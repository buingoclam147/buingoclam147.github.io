"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[6080],{56080:(N,Z,d)=>{d.r(Z),d.d(Z,{BtcOrderManagementComponent:()=>Fe,BtcOrderManagementDetailComponent:()=>Te});var m=d(36895),a=d(24006),g=d(83700),s=d(72506),x=d(12264),C=d(10908),e=d(94650),_=d(97579);let f=(()=>{class n{constructor(t,r,i,l){this.ref=t,this.bottomSheetData=r,this.bottomSheetRef=i,this.cfIconRegister=l,this.remarkControl=new a.NI("",a.kI.required),t&&(this.title=t.data.title,this.body=t.data.body)}ngOnInit(){}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}ok(){this.ref&&this.ref.close({remark:this.remarkControl.value}),this.bottomSheetData&&this.bottomSheetRef.dismiss({remark:this.remarkControl.value})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.gb,8),e.Y36(C.Rr,8),e.Y36(C.Zu,8),e.Y36(s.KNP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-change-state"]],standalone:!0,features:[e.jDz],decls:23,vars:4,consts:[[1,"w-[500px]","flex","flex-col","rounded-lg","bg-neutral-white","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-4"],[1,"flex","items-center","gap-x-4"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.23916 18.3887L10.1497 3.95489C10.3277 3.66664 10.594 3.42543 10.92 3.25719C11.246 3.08895 11.6194 3.00005 12 3.00005C12.3806 3.00005 12.754 3.08895 13.08 3.25719C13.406 3.42543 13.6723 3.66664 13.8503 3.95489L22.7608 18.3887C22.9281 18.6611 23.0101 18.9659 22.999 19.2736C22.9879 19.5812 22.8839 19.8811 22.6973 20.1441C22.5106 20.4071 22.2477 20.6241 21.934 20.7741C21.6204 20.9241 21.2667 21.002 20.9075 21H3.08847C2.72962 21.0014 2.37647 20.9231 2.06336 20.7729C1.75026 20.6226 1.48787 20.4055 1.3017 20.1426C1.11553 19.8797 1.01193 19.5801 1.00097 19.2727C0.99001 18.9654 1.07207 18.6608 1.23916 18.3887Z","fill","#FCB40A"],["d","M12 18.75C11.5858 18.75 11.25 18.4143 11.25 18L11.25 17.9901C11.25 17.5758 11.5858 17.2401 12 17.2401C12.4142 17.2401 12.75 17.5758 12.75 17.9901L12.75 18C12.75 18.4143 12.4142 18.75 12 18.75Z","fill","#2C2C2C"],["d","M12 15.75C11.5858 15.75 11.25 15.4142 11.25 15L11.25 8.00002C11.25 7.5858 11.5858 7.25002 12 7.25002C12.4142 7.25002 12.75 7.5858 12.75 8.00002L12.75 15C12.75 15.4142 12.4142 15.75 12 15.75Z","fill","#2C2C2C"],[1,"text-body-md",3,"innerHTML"],[1,"text-espressive-sm","text-black","mb-1.5"],["placeholder","Ghi ch\xfa",1,"w-full","placeholder:text-body-md","placeholder:text-neutral-gray-4","border","border-neutral-gray-2","rounded-[8px]","shadow-xs","px-[14px]","py-[10px]","max-h-80",2,"min-height","40px",3,"formControl"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6","md:p-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","md:justify-center",3,"click"],["cf-button","","size","medium","primary-1","",1,"md:w-full","md:justify-center",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return r.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div"),e.O4$(),e.TgZ(8,"svg",6),e._UZ(9,"path",7)(10,"path",8)(11,"path",9),e.qZA()(),e.kcU(),e._UZ(12,"div",10),e.qZA(),e.TgZ(13,"div")(14,"div",11),e._uU(15,"Remark"),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"textarea",12),e.qZA()()(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){return r.close()}),e._uU(20," H\u1ee7y "),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return r.ok()}),e._uU(22," X\xe1c nh\u1eadn "),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(r.title),e.xp6(9),e.Q6J("innerHTML",r.body,e.oJD),e.xp6(5),e.Q6J("formControl",r.remarkControl),e.xp6(4),e.Q6J("disabled",r.remarkControl.invalid||!(null!=r.remarkControl.value&&r.remarkControl.value.trim())))},dependencies:[m.ez,s.AxE,s.Sm8,g.N8,g.Xq,a.u5,a.Fj,a.JJ,a.UX,a.oH],encapsulation:2}),n})();var y=d(67460),b=d(76978),v=d(40899),A=d(80429),G=d(39300),K=d(63900),L=d(80529),X=d(88001),E=d(50494),D=d(54004),u=d(97582),p=d(87067);let F=(()=>{class n{}return(0,u.gn)([(0,p.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"traceId",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"errorCode",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"success",void 0),n})();var S=d(43429);let V=(()=>{class n{}return(0,u.gn)([(0,p.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,S.D)(()=>$),(0,p.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"traceId",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"errorCode",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"success",void 0),n})(),$=(()=>{class n{}return(0,u.gn)([(0,p.C)()],n.prototype,"orderId",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"state",void 0),(0,u.gn)([(0,S.D)(()=>ee),(0,p.C)()],n.prototype,"totalCharge",void 0),(0,u.gn)([(0,S.D)(()=>W),(0,p.C)()],n.prototype,"journeyInfos",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"timeBook",void 0),n})(),W=(()=>{class n{}return(0,u.gn)([(0,p.C)()],n.prototype,"airline",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"startPoint",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"endPoint",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"departureTime",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"numPax",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"nameBooked",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"totalPrice",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"pnr",void 0),n})(),ee=(()=>{class n{}return(0,u.gn)([(0,p.C)()],n.prototype,"totalFare",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"totalPrice",void 0),(0,u.gn)([(0,p.C)()],n.prototype,"totalDiscount",void 0),n})();const B={headers:new L.WM({"Content-Type":"application/json"})};let U=(()=>{class n{constructor(t,r){this.http=t,this.appConfig=r}getListOrder(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-list-order",JSON.stringify(t),B).pipe((0,D.U)(r=>(0,E.yE)(V,r,{excludeExtraneousValues:!0})))}getInfoOrderDetail(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-info-order-detail",JSON.stringify({orderId:t}),B).pipe((0,D.U)(r=>(0,E.yE)(F,r,{excludeExtraneousValues:!0})))}updateStateOrder(t){return this.http.post(this.appConfig.apiUrl+"bc-server/update-state-order",JSON.stringify(t),B).pipe((0,D.U)(r=>(0,E.yE)(F,r,{excludeExtraneousValues:!0})))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(L.eN),e.LFG(X.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var J=d(82761),P=d(62733),j=d(28490),R=d(62331);function te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.confirmPayment())}),e._uU(1," X\xe1c nh\u1eadn thanh to\xe1n "),e.qZA()}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.confirmRefund())}),e._uU(1," X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n "),e.qZA()}}function re(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.confirmIssueFailed())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i "),e.qZA()}}function ie(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.confirmIssueSuccess())}),e._uU(1," X\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\xe0nh c\xf4ng "),e.qZA()}}function oe(n,o){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,te,2,0,"button",17),e.YNc(2,ne,2,0,"button",17),e.YNc(3,re,2,0,"button",18),e.YNc(4,ie,2,0,"button",17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","PAYMENT_PROCESSING"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","FAILED"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewRefundTopup),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","PAYMENT_SUCCESS"===(null==t.dataOrder.orderInfo?null:t.dataOrder.orderInfo.state)&&t.isViewUpdateOrder)}}function ae(n,o){if(1&n&&(e.TgZ(0,"div",34),e._UZ(1,"cf-icon",35),e.TgZ(2,"span",36),e._uU(3),e.qZA()()),2&n){const t=o.ngIf;e.Q6J("ngClass",t.bgColor),e.xp6(1),e.Q6J("icon",t.icon),e.xp6(2),e.hij(" ",t.name," ")}}function de(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"div",22),e.TgZ(3,"div",23),e._uU(4,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(5,"div",24)(6,"div",25)(7,"div",20)(8,"div",26)(9,"div",27),e._UZ(10,"cf-icon",28),e.TgZ(11,"div",29),e._uU(12," M\xe3 \u0111\u01a1n h\xe0ng: "),e.qZA(),e.TgZ(13,"span",30),e._uU(14),e.qZA()(),e.TgZ(15,"div",27),e._UZ(16,"cf-icon",31),e.TgZ(17,"div",29),e._uU(18," T\u1ed5ng ti\u1ec1n (\u0110\xe3 g\u1ed3m VAT): "),e.qZA(),e.TgZ(19,"span",30),e._uU(20),e.ALo(21,"replace"),e.ALo(22,"number"),e.qZA()(),e.TgZ(23,"div",27),e._UZ(24,"cf-icon",32),e.TgZ(25,"div",29),e._uU(26," Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: "),e.qZA(),e.TgZ(27,"span",30),e._uU(28),e.qZA()(),e.TgZ(29,"div",27),e._UZ(30,"cf-icon",32),e.TgZ(31,"div",29),e._uU(32," Tr\u1ea1ng th\xe1i: "),e.qZA(),e.YNc(33,ae,4,3,"div",33),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(14),e.Oqu(t.dataOrder.orderInfo.orderId),e.xp6(6),e.hij(" ",e.Dn7(21,4,e.lcZ(22,8,t.dataOrder.orderInfo.totalPrice),",",".")," \u0111 "),e.xp6(8),e.hij("",t.dataOrder.orderInfo.paymentMethod," "),e.xp6(5),e.Q6J("ngIf",t.configStatus[t.dataOrder.orderInfo.state])}}function se(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"div",22),e.TgZ(3,"div",23),e._uU(4,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA()(),e.TgZ(5,"div",24)(6,"div",37)(7,"div",38),e._UZ(8,"cf-icon",39),e.TgZ(9,"span",40),e._uU(10,"H\u1ecd v\xe0 t\xean:"),e.qZA(),e.TgZ(11,"span",41),e._uU(12),e.qZA()(),e.TgZ(13,"div",38),e._UZ(14,"cf-icon",42),e.TgZ(15,"span",40),e._uU(16,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"),e.qZA(),e.TgZ(17,"span",41),e._uU(18),e.qZA()(),e.TgZ(19,"div",38),e._UZ(20,"cf-icon",43),e.TgZ(21,"span",40),e._uU(22,"Email:"),e.qZA(),e.TgZ(23,"span",41),e._uU(24),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(12),e.hij(" ",t.dataOrder.contact.name||"N/A"," "),e.xp6(6),e.AsE(" ",t.dataOrder.contact.phonePrefix,"",t.dataOrder.contact.phone||"N/A"," "),e.xp6(6),e.hij(" ",t.dataOrder.contact.email||"N/A"," ")}}function ce(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",48),e._uU(2),e.qZA(),e.TgZ(3,"td",49),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",50),e._uU(7),e.ALo(8,"mapper"),e.qZA()()),2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(2),e.hij(" ",t.firstName+" "+t.lastName||"N/A"," "),e.xp6(2),e.hij(" ",e.xi3(5,3,t.type,r.formatterPassengerType)||"N/A"," "),e.xp6(3),e.hij(" ",e.xi3(8,6,t.gender,r.formatterGender)||"N/A"," ")}}function le(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"div",22),e.TgZ(3,"div",23),e._uU(4,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(5,"div",24)(6,"div",44)(7,"table",45)(8,"thead")(9,"tr")(10,"th",46),e._uU(11," H\u1ecd t\xean "),e.qZA(),e.TgZ(12,"th",46),e._uU(13," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(14,"th",46),e._uU(15," Gi\u1edbi t\xednh "),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,ce,9,9,"tr",47),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.dataOrder.listPax)}}function ue(n,o){if(1&n&&(e.TgZ(0,"div",73)(1,"div",74),e._uU(2),e.qZA(),e.TgZ(3,"div",74),e._uU(4),e.qZA(),e.TgZ(5,"div",74),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",t.airline,"",t.flightNumber," "),e.xp6(2),e.AsE(" ",t.startPoint," - ",t.endPoint," "),e.xp6(2),e.AsE(" ",e.xi3(7,6,t.departureTime,"HH:mm")," - ",e.xi3(8,9,t.departureTime,"dd/MM/yyyy")," ")}}function pe(n,o){if(1&n&&(e.TgZ(0,"div",75)(1,"div"),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(3,"div",76),e._uU(4),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.pnr||"---"," ")}}function me(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",48),e._uU(2),e.qZA(),e.TgZ(3,"td",49),e._uU(4),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"td",50),e._uU(7),e.ALo(8,"mapper"),e.qZA(),e.TgZ(9,"td",77),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA()()),2&n){const t=o.$implicit,r=e.oxw(3);e.xp6(2),e.AsE(" ",t.firstName," ",t.lastName," "),e.xp6(2),e.hij(" ",e.xi3(5,5,t.type,r.formatterPassengerType)," "),e.xp6(3),e.hij(" ",e.xi3(8,8,t.gender,r.formatterGender)," "),e.xp6(3),e.hij(" ",e.Dn7(11,11,e.lcZ(12,15,t.totalFare),",",".")," \u0111 ")}}function fe(n,o){if(1&n&&(e.TgZ(0,"div",78)(1,"div",79)(2,"div",80),e._uU(3,"H\u1ecd t\xean"),e.qZA(),e.TgZ(4,"div",81),e._uU(5),e.qZA()(),e.TgZ(6,"div",79)(7,"div",80),e._uU(8,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(9,"div",81),e._uU(10),e.ALo(11,"mapper"),e.qZA()(),e.TgZ(12,"div",79)(13,"div",80),e._uU(14,"Gi\u1edbi t\xednh"),e.qZA(),e.TgZ(15,"div",81),e._uU(16),e.ALo(17,"mapper"),e.qZA()(),e.TgZ(18,"div",79)(19,"div",80),e._uU(20,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(21,"div",81),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA()()()),2&n){const t=o.$implicit,r=e.oxw(3);e.xp6(5),e.AsE("",t.firstName," ",t.lastName," "),e.xp6(5),e.hij(" ",e.xi3(11,5,t.type,r.formatterPassengerType)||"N/A",""),e.xp6(6),e.Oqu(e.xi3(17,8,t.gender,r.formatterGender)||"N/A"),e.xp6(6),e.Oqu(e.Dn7(23,11,e.lcZ(24,15,t.totalFare),",",".")||"N/A")}}function ge(n,o){if(1&n&&(e.TgZ(0,"div",53)(1,"div",54)(2,"div",55),e._UZ(3,"img",56),e.ALo(4,"mapper"),e.TgZ(5,"div",57),e._uU(6),e.qZA()(),e.TgZ(7,"div",58)(8,"div",55)(9,"div",59)(10,"div",55)(11,"div",60),e._uU(12),e.ALo(13,"mapper"),e.qZA()(),e.TgZ(14,"div"),e._UZ(15,"cf-icon",61),e.qZA(),e.TgZ(16,"div",55)(17,"div",62),e._uU(18),e.ALo(19,"mapper"),e.qZA()()(),e.TgZ(20,"div",63),e.YNc(21,ue,9,12,"div",64),e.qZA()(),e.YNc(22,pe,5,1,"div",65),e.qZA()(),e.TgZ(23,"table",66)(24,"thead")(25,"tr")(26,"th",46),e._uU(27," H\u1ecd t\xean "),e.qZA(),e.TgZ(28,"th",46),e._uU(29," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(30,"th",46),e._uU(31," Gi\u1edbi t\xednh "),e.qZA(),e.TgZ(32,"th",67),e._uU(33," Gi\xe1 v\xe9 "),e.qZA()()(),e.TgZ(34,"tbody"),e.YNc(35,me,13,17,"tr",47),e.qZA()(),e.TgZ(36,"div",68),e.YNc(37,fe,25,17,"div",69),e.qZA(),e.TgZ(38,"div",70)(39,"div",71),e._uU(40," T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(41,"div",72),e._uU(42),e.ALo(43,"replace"),e.ALo(44,"number"),e.ALo(45,"mapper"),e.qZA()()()),2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(3),e.Q6J("src",e.xi3(4,12,t.airline,r.getAirlineLogoByCode),e.LSH)("alt",t.airline),e.xp6(3),e.hij(" ",t.airline," "),e.xp6(6),e.AsE(" ",e.xi3(13,15,t.startPoint,r.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(19,18,t.endPoint,r.getLocationData)," ( ",t.endPoint,") "),e.xp6(3),e.Q6J("ngForOf",t.segments),e.xp6(1),e.Q6J("ngIf",t.pnr),e.xp6(13),e.Q6J("ngForOf",t.paxList),e.xp6(2),e.Q6J("ngForOf",t.paxList),e.xp6(5),e.hij(" ",e.Dn7(43,21,e.lcZ(44,25,e.xi3(45,27,t.paxList,r.sumPriceByPaxList)),",",".")," \u0111 ")}}function he(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"div",22),e.TgZ(3,"div",23),e._uU(4,"Th\xf4ng tin h\xe0nh tr\xecnh"),e.qZA()(),e.TgZ(5,"div",24)(6,"div",51),e.YNc(7,ge,46,30,"div",52),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.dataOrder.listJourney)}}function xe(n,o){if(1&n&&(e.TgZ(0,"div",82)(1,"div",83)(2,"div"),e._UZ(3,"img",84),e.qZA(),e.TgZ(4,"div")(5,"div",85),e._uU(6),e.qZA(),e.TgZ(7,"div",86),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",87)(11,"div",88),e._uU(12," Chuy\u1ec3n t\u1eeb tr\u1ea1ng th\xe1i "),e.TgZ(13,"span",89),e._uU(14),e.qZA(),e._uU(15," sang "),e.TgZ(16,"span",89),e._uU(17),e.qZA()(),e.TgZ(18,"div",88),e._uU(19),e.qZA()()()),2&n){const t=o.$implicit,r=e.oxw();e.xp6(3),e.Q6J("src","https://cheapflighttest.s3.ap-southeast-1.amazonaws.com/avarta-default.jpg",e.LSH),e.xp6(3),e.Oqu("BOOKER"===t.actionType?t.nameBooked:"H\u1ec7 th\u1ed1ng"),e.xp6(2),e.Oqu(e.xi3(9,6,t.timeAction,"HH:mm - dd/MM/yyyy")),e.xp6(6),e.Oqu(r.getStateDisplay(t.oldState)),e.xp6(3),e.Oqu(r.getStateDisplay(t.newState)),e.xp6(2),e.hij(" N\u1ed9i dung remark: ",t.noteChange," ")}}function ve(n,o){1&n&&(e.TgZ(0,"div",90)(1,"div"),e._UZ(2,"img",91),e.qZA(),e.TgZ(3,"div",92)(4,"div",93)(5,"div"),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA()()()())}function _e(n,o){1&n&&e._UZ(0,"cf-spinner")}const ye=function(){return[]};let Te=(()=>{class n{constructor(t,r,i,l,c,T,w,q){this._bcServiceSvc=t,this.route=r,this._flightDataService=i,this.cfIconRegister=l,this._locationDataSvc=c,this._modal=T,this._toastService=w,this._permissionService=q,this.configStatus=x.cT,this.isViewRefundTopup=this._permissionService.hasPermission(v.or.RefundTopup),this.isViewUpdateOrder=this._permissionService.hasPermission(v.or.UpdateOrder),this.actionSuccessOptions=[{text:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",value:"SUCCESS"},{text:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",value:"FAILED"}],this.isLoading=!1,this.actionSuccess="",this.getAirlineLogoByCode=h=>this._flightDataService.getAirlineLogoByCode(h),this.getLocationData=h=>this._locationDataSvc.getCityNameByCode(h),this.formatterPassengerType=h=>({ADT:"Ng\u01b0\u1eddi l\u1edbn",CHD:"Tr\u1ebb em",INF:"Em b\xe9"}[h]||h),this.formatterGender=h=>({male:"Nam",female:"N\u1eef",order:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}[h]||h),this.sumPriceByPaxList=h=>h.reduce((O,k)=>O+k.totalFare,0),this.cfIconRegister.registerIcons([s.KYu,s.GUN,s.$f3,s.o1t,s.P5K,s.PcQ,s.S7Q,s.Gey,s.YwC,s.hTA,s.okA])}ngOnInit(){this.initDataOrder()}initDataOrder(){this.route.paramMap.pipe((0,G.h)(t=>t.has("id")),(0,K.w)(t=>{const r=t.get("id");return this._bcServiceSvc.getInfoOrderDetail(r)})).subscribe(t=>{this.dataOrder=t.data})}confirmPayment(){this._modal.open(f,{title:"X\xe1c nh\u1eadn thanh to\xe1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh xu\u1ea5t v\xe9 khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c thanh to\xe1n th\xe0nh c\xf4ng"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"PAYMENT_SUCCESS"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{"OK"===c.status?(this.dataOrder=c.data,this._toastService.add({severity:"success",summary:"Thanh to\xe1n th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmRefund(){this._modal.open(f,{title:"X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh ho\xe0n ti\u1ec1n khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c ho\xe0n ti\u1ec1n"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"REFUNDED"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{"OK"===c.status?(this.dataOrder=c.data,this._toastService.add({severity:"success",summary:"Ho\xe0n ti\u1ec1n th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmIssueSuccess(){this._modal.open(f,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\xe0nh c\xf4ng \u0111\u01a1n h\xe0ng n\xe0y"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"SUCCESS"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{"OK"===c.status?(this.dataOrder=c.data,this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}else this.actionSuccess=""}})}confirmIssueFailed(){this._modal.open(f,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng th\u1ea5t b\u1ea1i",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xe1c nh\u1eadn xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i \u0111\u01a1n h\xe0ng n\xe0y"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.dataOrder.orderInfo.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"FAILED"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{"OK"===c.status?(this.dataOrder=c.data,this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng",detail:"",sticky:!1})):this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}else this.actionSuccess=""}})}getStateDisplay(t){switch(t){case"PAYMENT_PROCESSING":return"Ch\u01b0a thanh to\xe1n";case"PAYMENT_SUCCESS":return"\u0110\xe3 thanh to\xe1n";case"CANCELLED":return"\u0110\xe3 h\u1ee7y";case"SUCCESS":return"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng";case"FAILED":return"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i";case"REFUNDED":return"\u0110\xe3 ho\xe0n ti\u1ec1n";default:return""}}onChangeActionSuccess(t){"SUCCESS"===t.value&&this.confirmIssueSuccess(),"FAILED"===t.value&&this.confirmIssueFailed()}back(){window.history.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U),e.Y36(J.gz),e.Y36(P.G),e.Y36(s.KNP),e.Y36(j._),e.Y36(_.oE),e.Y36(R.BX),e.Y36(v.$A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-management-detail"]],standalone:!0,features:[e.jDz],decls:21,vars:9,consts:[[1,"container","mx-auto","px-4","py-6","max-w-5xl","flex","gap-x-4"],[1,"w-full"],[1,"space-y-6"],[1,"flex","justify-between","items-center"],["type","secondary","size","medium","cf-button","",1,"bg-white",3,"click"],["class","flex gap-4 items-center",4,"ngIf"],["class","flex flex-col gap-4",4,"ngIf"],["class","flex flex-col gap-4 ",4,"ngIf"],[1,"rounded","bg-white","block","w-[320px]","h-full","mt-[106px]"],[1,"flex","justify-between","items-center","py-3.5","px-4","border-b","border-neutral-gray-1"],[1,"text-express-sm","text-neutral-gray-6"],[1,""],[1,"p-4","flex","flex-col","gap-y-2"],["class","p-3 rounded flex flex-col gap-y-2 bg-neutral-gray-1",4,"ngFor","ngForOf"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-4 flex flex-col justify-center items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[4,"ngIf"],[1,"flex","gap-4","items-center"],["type","solid","size","medium","cf-button","",3,"click",4,"ngIf"],["type","secondary","class","bg-white","size","medium","cf-button","",3,"click",4,"ngIf"],["type","solid","size","medium","cf-button","",3,"click"],[1,"flex","flex-col","gap-4"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"p-6","bg-white","shadow-sm","rounded-lg"],[1,"flex","justify-between","items-start","flex-col","gap-3"],[1,"flex","flex-col","gap-3"],[1,"flex","items-center","gap-2","text-sm","text-neutral-gray-6"],["cfHeadIcon","","icon","ticket","size","small",1,"text-neutral-gray-6"],[1,"text-body-md-short"],[1,"font-medium","text-body-md-short","text-neutral-gray-6"],["cfHeadIcon","","icon","money","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","credit_card","size","small",1,"text-neutral-gray-6"],["class","py-1 px-2 rounded-full w-fit gap-1 h-fit flex items-center justify-center",3,"ngClass",4,"ngIf"],[1,"py-1","px-2","rounded-full","w-fit","gap-1","h-fit","flex","items-center","justify-center",3,"ngClass"],["size","small",1,"md:hidden","text-white",3,"icon"],[1,"text-neutral-white","text-body-sm"],[1,"space-y-3"],[1,"flex","items-center","gap-2","text-sm"],["cfHeadIcon","","icon","user","size","small",1,"text-neutral-gray-6"],[1,"text-neutral-gray-6","text-body-md-short"],[1,"font-medium","text-body-md-short"],["cfHeadIcon","","icon","call","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","email","size","small",1,"text-neutral-gray-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-neutral-gray-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","pb-3"],[4,"ngFor","ngForOf"],[1,"text-body-md","text-neutral-black","pt-4","uppercase"],[1,"text-body-md","text-neutral-black","pt-4"],[1,"text-body-md","text-neutral-black","pt-4","capitalize"],[1,"space-y-4"],["class","p-3 flex flex-col  gap-3 shadow-lg rounded-lg",4,"ngFor","ngForOf"],[1,"p-3","flex","flex-col","gap-3","shadow-lg","rounded-lg"],[1,"flex","gap-6","items-center"],[1,"flex","flex-col","items-center"],[1,"w-14","h-14","object-contain",3,"src","alt"],[1,"text-body-md-long","font-semibold","text-neutral-gray-4"],[1,"flex","gap-3","md:flex-col"],[1,"flex","gap-3","items-center","md:flex-col","md:items-start"],[1,"text-body-md","font-semibold"],["icon","plane","size","small"],[1,"text-body-lg","font-semibold"],[1,"flex","flex-col","gap-3","w-full"],["class","flex gap-2 md:flex-col text-neutral-gray-4 text-body-md",4,"ngFor","ngForOf"],["class","flex flex-col gap-1 text-body-md",4,"ngIf"],[1,"min-w-full","divide-y","divide-neutral-gray-3","md:hidden"],[1,"text-espressive-sm","text-neutral-gray-4","pb-3","text-right"],[1,"hidden","w-full","md:flex","justify-between","gap-4"],["class","flex flex-col rounded-lg bg-neutral-white p-3 gap-y-2",4,"ngFor","ngForOf"],[1,"w-full","flex","justify-end","gap-4"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"text-heading-md","font-bold"],[1,"flex","gap-2","md:flex-col","text-neutral-gray-4","text-body-md"],[1,"flex","items-center","gap-1"],[1,"flex","flex-col","gap-1","text-body-md"],[1,"font-semibold"],[1,"text-body-md","text-neutral-black","pt-4","text-right"],[1,"flex","flex-col","rounded-lg","bg-neutral-white","p-3","gap-y-2"],[1,"flex","items-center","gap-x-5"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"text-espressive-md","text-neutral-gray-6"],[1,"p-3","rounded","flex","flex-col","gap-y-2","bg-neutral-gray-1"],[1,"flex","items-center","gap-x-2"],[1,"w-10","h-10","rounded-full","object-cover","ng-star-inserted",3,"src"],[1,"text-express-sm"],[1,"text-body-sm","text-neutral-gray-4"],[1,"flex","flex-col","gap-y-3"],[1,"text-body-sm"],[1,"text-body-md-short","font-medium"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-4","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[80px]","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-center","text-body-md-short"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return r.back()}),e._uU(5," Quay l\u1ea1i "),e.qZA(),e.YNc(6,oe,5,4,"div",5),e.qZA(),e.YNc(7,de,34,10,"div",6),e.YNc(8,se,25,4,"div",7),e.YNc(9,le,18,1,"div",6),e.YNc(10,he,8,1,"div",6),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10),e._uU(14,"Remark"),e.qZA(),e._UZ(15,"div"),e.qZA(),e.TgZ(16,"div",11)(17,"div",12),e.YNc(18,xe,20,9,"div",13),e.qZA(),e.YNc(19,ve,7,0,"div",14),e.qZA()()(),e.YNc(20,_e,1,0,"cf-spinner",15)),2&t&&(e.xp6(6),e.Q6J("ngIf",null==r.dataOrder?null:r.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf",null==r.dataOrder?null:r.dataOrder.orderInfo),e.xp6(1),e.Q6J("ngIf",null==r.dataOrder?null:r.dataOrder.contact),e.xp6(1),e.Q6J("ngIf",null==r.dataOrder?null:r.dataOrder.listPax),e.xp6(1),e.Q6J("ngIf",null==r.dataOrder?null:r.dataOrder.listJourney),e.xp6(8),e.Q6J("ngForOf",(null==r.dataOrder||null==r.dataOrder.orderInfo?null:r.dataOrder.orderInfo.trackingModifyList)||e.DdM(8,ye)),e.xp6(1),e.Q6J("ngIf",!(null!=r.dataOrder&&null!=r.dataOrder.orderInfo&&null!=r.dataOrder.orderInfo.trackingModifyList&&r.dataOrder.orderInfo.trackingModifyList.length)),e.xp6(1),e.Q6J("ngIf",r.isLoading))},dependencies:[m.ez,m.mk,m.sg,m.O5,m.JJ,m.uU,s.AxE,s.Sm8,A.q,b.AS,g.N8,g.Xq,y.OR,a.u5],encapsulation:2}),n})();var Ze=d(88516),I=d(44143),Ce=d(4688),be=d(74713),M=d(78043);function Oe(n,o){if(1&n&&(e.TgZ(0,"div",19),e._UZ(1,"cf-icon",20),e.TgZ(2,"span",21),e._uU(3),e.qZA()()),2&n){const t=o.ngIf;e.Q6J("ngClass",t.bgColor),e.xp6(1),e.Q6J("icon",t.icon),e.xp6(2),e.hij(" ",t.name," ")}}function Ie(n,o){if(1&n&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.TgZ(2,"div",48),e._uU(3),e.qZA(),e._UZ(4,"div",47),e.qZA()),2&n){const t=e.oxw().index;e.xp6(3),e.hij("Ch\u1eb7ng ",t+2,"")}}function Ae(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),e._UZ(4,"img",26),e.ALo(5,"mapper"),e.qZA(),e.TgZ(6,"div",27)(7,"div",28)(8,"div",29)(9,"div",30),e._uU(10),e.ALo(11,"mapper"),e.qZA()(),e.TgZ(12,"div"),e._UZ(13,"cf-icon",31),e.qZA(),e.TgZ(14,"div",29)(15,"div",30),e._uU(16),e.ALo(17,"mapper"),e.qZA()()(),e.TgZ(18,"div",32)(19,"div",33)(20,"div",34),e._UZ(21,"cf-icon",35),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"div",34),e._UZ(25,"cf-icon",8),e._uU(26),e.ALo(27,"date"),e.qZA()()()()()(),e.TgZ(28,"div",36)(29,"div",37)(30,"div",38)(31,"div",39),e._UZ(32,"cf-icon",40),e._uU(33," H\xe0nh kh\xe1ch: "),e.qZA(),e.TgZ(34,"div",41),e._uU(35),e.qZA()(),e.TgZ(36,"div",38)(37,"div",39),e._UZ(38,"cf-icon",42),e._uU(39," PNR: "),e.qZA(),e.TgZ(40,"div",41),e._uU(41),e.qZA()()(),e.TgZ(42,"div",43)(43,"div",44),e._uU(44),e.ALo(45,"replace"),e.ALo(46,"number"),e.qZA()()(),e.YNc(47,Ie,5,1,"div",45),e.qZA()),2&n){const t=o.$implicit,r=o.last,i=e.oxw();e.xp6(4),e.Q6J("src",e.xi3(5,11,t.airline,i.getAirlineLogoByCode),e.LSH),e.xp6(6),e.AsE(" ",e.xi3(11,14,t.startPoint,i.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(17,17,t.endPoint,i.getLocationData)," ( ",t.endPoint,") "),e.xp6(6),e.hij(" ",e.xi3(23,20,t.departureTime,"dd/MM/yyyy")," "),e.xp6(4),e.hij(" ",e.xi3(27,23,t.departureTime,"HH:mm")," "),e.xp6(9),e.hij(" ",t.numPax||"---"," "),e.xp6(6),e.hij(" ",t.pnr||"---"," "),e.xp6(3),e.hij(" T\u1ed5ng ti\u1ec1n: ",e.Dn7(45,26,e.lcZ(46,30,t.totalPrice),",",".")," \u0111 "),e.xp6(3),e.Q6J("ngIf",!r)}}function Ee(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navigateToDetail(i.order.orderId))}),e._uU(1," Chi ti\u1ebft "),e.qZA()}}function De(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmPayment())}),e._uU(1," X\xe1c nh\u1eadn thanh to\xe1n "),e.qZA()}}function Se(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmRefund())}),e._uU(1," X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n "),e.qZA()}}let Be=(()=>{class n{constructor(t,r,i,l,c,T,w,q){this._flightDataService=t,this._locationDataSvc=r,this.cfIconRegister=i,this.router=l,this._modal=c,this._bcServiceSvc=T,this._toastService=w,this._permissionService=q,this.configStatus=x.cT,this.isViewInfoOrderDetail=this._permissionService.hasPermission(v.or.GetInfoOrderDetail),this.isViewUpdateOrder=this._permissionService.hasPermission(v.or.UpdateOrder),this.isViewRefundTopup=this._permissionService.hasPermission(v.or.RefundTopup),this.getAirlineLogoByCode=h=>this._flightDataService.getAirlineLogoByCode(h),this.getLocationData=h=>this._locationDataSvc.getCityNameByCode(h),this.totalPriceJourneys=h=>h.reduce((O,k)=>O+k.totalPrice,0),this.cfIconRegister.registerIcons([s.okA,s.qDv,s.wvd,s.o1t,s.DFc,s.YwC,s.TOh,s.o1t,s.P5K,s.PcQ,s.S7Q,s.Gey])}navigateToDetail(t){this.router.navigate(["admin/btc-order-detail",t])}confirmPayment(){this._modal.open(f,{title:"X\xe1c nh\u1eadn thanh to\xe1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh xu\u1ea5t v\xe9 khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\u01b0\u1ee3c thanh to\xe1n th\xe0nh c\xf4ng"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.order.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"PAYMENT_SUCCESS"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{this._toastService.add("OK"===c.status?{severity:"success",summary:"Thanh to\xe1n th\xe0nh c\xf4ng",detail:"",sticky:!1}:{severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Thanh to\xe1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}confirmRefund(){this._modal.open(f,{title:"X\xe1c nh\u1eadn ho\xe0n ti\u1ec1n \u0111\u01a1n h\xe0ng",body:"H\u1ec7 th\u1ed1ng s\u1ebd ti\u1ebfn h\xe0nh ho\xe0n ti\u1ec1n khi b\u1ea5m x\xe1c nh\u1eadn. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn \u0111\u01a1n h\xe0ng n\xe0y \u0111\u01b0\u1ee3c ho\xe0n ti\u1ec1n"}).afterClosed$.subscribe({next:r=>{var i;if(r.data){const l={orderId:this.order.orderId,noteChange:(null===(i=r.data.remark)||void 0===i?void 0:i.trim())||"",state:"REFUNDED"};this._bcServiceSvc.updateStateOrder(l).subscribe({next:c=>{this._toastService.add("OK"===c.status?{severity:"success",summary:"Ho\xe0n ti\u1ec1n th\xe0nh c\xf4ng",detail:"",sticky:!1}:{severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Ho\xe0n ti\u1ec1n th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P.G),e.Y36(j._),e.Y36(s.KNP),e.Y36(J.F0),e.Y36(_.oE),e.Y36(U),e.Y36(R.BX),e.Y36(v.$A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-item"]],inputs:{order:"order"},standalone:!0,features:[e.jDz],decls:27,vars:17,consts:[[1,"flex","flex-col","rounded-lg","w-full","shadow-md","bg-neutral-white","gap-3","p-4"],[1,"flex","flex-col","gap-2"],[1,"flex","gap-2","items-center"],[1,"text-body-lg","text-neutral-gray-5","font-semibold"],[1,"font-semibold","text-heading-lg","md:text-body-sm"],["class","py-1 px-2 rounded-full w-fit gap-1 h-fit flex items-center justify-center",3,"ngClass",4,"ngIf"],[1,"flex","flex-col","gap-1"],[1,"text-body-md","text-neutral-gray-4","font-medium","gap-1","flex","items-center"],["icon","clock","size","small"],[1,"pt-3","px-3"],[1,"w-full","border-b","border-neutral-gray-2","pb-4","flex","flex-col","gap-4"],["class","flex flex-col gap-4",4,"ngFor","ngForOf"],[1,"rounded-b-lg","flex","gap-2","p-3","bg-white","justify-end","items-center"],[1,"text-body-lg","font-semibold","flex","items-center","gap-1"],["icon","inbox","size","small"],[1,"text-body-lg","font-semibold"],[1,"flex","gap-2","items-center","w-full","justify-end"],["type","secondary","size","medium","cf-button","",3,"click",4,"ngIf"],["type","solid","size","medium","cf-button","",3,"click",4,"ngIf"],[1,"py-1","px-2","rounded-full","w-fit","gap-1","h-fit","flex","items-center","justify-center",3,"ngClass"],["size","small",1,"md:hidden","text-white",3,"icon"],[1,"text-neutral-white","text-body-sm"],[1,"flex","flex-col","gap-4"],[1,"flex","justify-between"],[1,"flex","gap-6","items-center","md:w-full","md:justify-between"],[1,"flex","gap-3"],["alt","logo airline",1,"w-14","h-14","object-contain",3,"src"],[1,"flex","flex-col","items-center","gap-1","md:items-start","md:flex-1"],[1,"flex","gap-3","items-center","md:flex-col","md:items-start"],[1,"flex","flex-col","items-center"],[1,"text-body-md","font-semibold"],["icon","plane","size","small"],[1,"flex","gap-4"],[1,"flex","gap-3","items-center","text-neutral-gray-4","text-espressive-sm"],[1,"flex","items-center","gap-1"],["icon","calendar","size","small"],[1,"flex","gap-5","justify-between"],[1,"flex","gap-6","items-center","md:items-start","md:flex-col"],[1,"flex","gap-1"],[1,"text-body-md","flex","gap-1","items-center"],["icon","users","size","small",1,"md:hidden"],[1,"text-body-md"],["icon","ticket","size","small",1,"md:hidden"],[1,"flex","flex-col","gap-1","items-center","md:justify-end"],[1,"text-body-md","font-medium"],["class","my-2 flex items-center gap-2",4,"ngIf"],[1,"my-2","flex","items-center","gap-2"],[1,"flex-1","border-t","border-neutral-gray-2","h-[1px]"],[1,"border","rounded-2xl","p-1","border-neutral-gray-2","w-fit","text-body-sm"],["type","secondary","size","medium","cf-button","",3,"click"],["type","solid","size","medium","cf-button","",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Oe,4,3,"div",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e._UZ(9,"cf-icon",8),e._uU(10),e.ALo(11,"date"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10),e.YNc(14,Ae,48,32,"div",11),e.qZA()(),e.TgZ(15,"div",12)(16,"div",13),e._UZ(17,"cf-icon",14),e._uU(18," T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.ALo(21,"replace"),e.ALo(22,"number"),e.qZA()(),e.TgZ(23,"div",16),e.YNc(24,Ee,2,0,"button",17),e.YNc(25,De,2,0,"button",18),e.YNc(26,Se,2,0,"button",18),e.qZA()()),2&t&&(e.xp6(4),e.hij(" ",r.order.orderId," "),e.xp6(2),e.Q6J("ngIf",r.configStatus[r.order.state]),e.xp6(4),e.hij(" Ng\xe0y \u0111\u1eb7t: ",e.xi3(11,8,r.order.timeBook,"dd/MM/yyyy")||"---"," "),e.xp6(4),e.Q6J("ngForOf",r.order.journeyInfos),e.xp6(6),e.hij(" ",e.Dn7(21,11,e.lcZ(22,15,r.order.totalCharge.totalPrice),",",".")," \u0111 "),e.xp6(4),e.Q6J("ngIf",r.isViewInfoOrderDetail),e.xp6(1),e.Q6J("ngIf","PAYMENT_PROCESSING"===r.order.state&&r.isViewUpdateOrder),e.xp6(1),e.Q6J("ngIf","FAILED"===r.order.state&&r.isViewRefundTopup))},dependencies:[m.ez,m.mk,m.sg,m.O5,m.JJ,m.uU,s.AxE,s.Sm8,g.N8,g.Xq,A.q,b.AS],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})();var Y=d(35119),Q=d(81664),z=d(47910);const Ue=function(n,o){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":o}},Me=function(n){return{"text-neutral-gray-6":n}},we=function(n){return{"!bg-neutral-gray-6 text-express-sm":n}};function qe(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38,39),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.MAs(2),T=e.oxw();return e.KtG(T.onChangeTab(l,c))}),e.TgZ(3,"div",40),e._uU(4),e.TgZ(5,"cf-label",41),e._uU(6),e.qZA()()(),e.BQk()}if(2&n){const t=o.$implicit,r=o.first,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(6,Ue,t.value===i.currentTab,!r)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Me,t.value===i.currentTab)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,we,t.value===i.currentTab)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function ke(n,o){1&n&&e._UZ(0,"cf-input-hint",42),2&n&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Ne(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"btc-order-item",43),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("order",t)}}const H=function(){return[]},Le=function(){return{standalone:!0}};let Fe=(()=>{class n{constructor(t,r){this._fb=t,this._bcServiceSvc=r,this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},...Object.keys(x.cT).map(i=>({value:i,text:x.cT[i].name,counter:0,active:!1}))],this.currentTab="ALL",this.listOrderRaw=[],this.invalidTimeFilter=!1,this.dateRangeStr="",this.timeOptions=x.qM,this.channelTypeOptions=x.bN,this.searchTypeOptions=x.Oi,this.filterByTab=(i,l)=>i.filter(c=>"ALL"===l||c.state===l)}ngOnInit(){this.initSearchForm()}onChangeTab(t,r){t.value!==this.currentTab&&(this.currentTab=t.value,this.onSearch())}initSearchForm(){const t=(0,m.p6)((0,Y.Z)(new Date),"dd/MM/yyyy","vi-VN"),r=(0,m.p6)((0,Q.Z)(new Date),"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+r,this.searchForm=this._fb.group({startTime:[(0,Y.Z)(new Date),a.kI.required],endTime:[(0,Q.Z)(new Date),a.kI.required],searchText:"",filterTimeType:M.XY.TIME_BOOKED,channelType:M.R$.ALL,searchType:M.r4.ORDER}),this.onSearch()}onDateSelection(t,r,i,l){if(r.value||i.value)if(r.value&&!i.value&&t&&t.getTime()>=r.value.getTime()){i.setValue(t),l.close(),this.startDate=r.value;const c=(0,m.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{i.setValue(null),r.setValue(t);const c=(0,m.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{r.setValue(t),i.setValue(null);const c=(0,m.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}this.invalidTimeFilter=r.invalid||i.invalid}onSearch(){this.searchForm.invalid||this.invalidTimeFilter||this._bcServiceSvc.getListOrder(Object.assign(Object.assign({},this.searchForm.value),{startTime:(0,z.Z)(this.searchForm.value.startTime,"yyyy-MM-dd"),endTime:(0,z.Z)(this.searchForm.value.endTime,"yyyy-MM-dd"),state:this.currentTab&&"ALL"!=this.currentTab?this.currentTab:null})).subscribe({next:t=>{this.listOrderRaw=[...t.data],this.progressCouterOfTabs(t.data)}})}progressCouterOfTabs(t){this.listTab=[...this.listTab.map(r=>(r.counter=(t||[]).filter(i=>"ALL"===r.value||i.state===r.value).length,r))]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-order-management"]],standalone:!0,features:[e.jDz],decls:47,vars:35,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-3",3,"formGroup"],[1,"flex","gap-x-4","items-center","md:hidden"],[1,"flex","gap-y-1.5","flex-col"],[1,"text-express-md","whitespace-nowrap","text-neutral-gray-5"],["textField","text","valueField","value","formControlName","filterTimeType",1,"!max-w-none","w-[180px]",3,"status","data","placeholder","allowSearch"],[1,"flex"],[1,"grow",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[8px]",3,"ngModel","ngModelOptions","click","ngModelChange"],[1,"hidden"],["cfHint","",3,"hint",4,"ngIf"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value","formControlName","channelType",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch"],[1,"flex","gap-2","flex-1"],[1,"flex","items-center","gap-y-1.5"],["textField","text","valueField","value","formControlName","searchType",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch"],[1,"flex-1","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng","autocomplete","off","formControlName","searchText"],["tableSearchInput",""],[1,"flex","flex-col","justify-end","w-[168px]","shrink-0"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"disabled","click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[680px]","max-w-[680px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-6","md:gap-y-4"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["cfHint","",3,"hint"],[3,"order"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"Qu\u1ea3n l\xfd \u0111\u01a1n h\xe0ng B2C"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e.YNc(8,qe,7,13,"ng-container",7),e.qZA(),e.TgZ(9,"form",8)(10,"div",9)(11,"div",10)(12,"div",11),e._uU(13,"L\u1ecdc theo"),e.qZA(),e._UZ(14,"cf-select",12),e.qZA(),e.TgZ(15,"div",13)(16,"cf-input-group",14),e._UZ(17,"cf-icon",15),e.TgZ(18,"label",16),e._uU(19,"Th\u1eddi gian"),e.qZA(),e.TgZ(20,"input",17),e.NdJ("click",function(){e.CHM(i);const c=e.MAs(24);return e.KtG(c.open())})("ngModelChange",function(c){return r.dateRangeStr=c}),e.qZA(),e.TgZ(21,"div",18),e.YNc(22,ke,1,1,"cf-input-hint",19),e.qZA()(),e.TgZ(23,"input",20,21),e.NdJ("dateSelect",function(c){e.CHM(i);const T=e.MAs(24);return e.KtG(r.onDateSelection(c,r.searchForm.controls.startTime,r.searchForm.controls.endTime,T))}),e.qZA()(),e.TgZ(25,"div",10)(26,"div",11),e._uU(27,"K\xeanh b\xe1n l\u1ebb"),e.qZA(),e._UZ(28,"cf-select",22),e.qZA()(),e.TgZ(29,"div",23)(30,"div",24),e._UZ(31,"cf-select",25),e.qZA(),e.TgZ(32,"cf-input-group",26),e._UZ(33,"cf-icon",27)(34,"input",28,29),e.qZA(),e.TgZ(36,"div",30)(37,"button",31),e.NdJ("click",function(){return r.onSearch()}),e._UZ(38,"cf-icon",32),e._uU(39," T\xecm ki\u1ebfm "),e.qZA()()()()()(),e.TgZ(40,"div",33)(41,"div",34)(42,"div",35)(43,"div",36)(44,"div",37),e.YNc(45,Ne,2,1,"ng-container",7),e.ALo(46,"mapper"),e.qZA()()()()()()}2&t&&(e.xp6(8),e.Q6J("ngForOf",r.listTab),e.xp6(1),e.Q6J("formGroup",r.searchForm),e.xp6(5),e.Q6J("status","default")("data",r.timeOptions||e.DdM(32,H))("placeholder","")("allowSearch",!0),e.xp6(2),e.Q6J("status",r.invalidTimeFilter?"error":"default"),e.xp6(4),e.Q6J("ngModel",r.dateRangeStr)("ngModelOptions",e.DdM(33,Le)),e.xp6(2),e.Q6J("ngIf",r.invalidTimeFilter),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",r.startDate)("canReset",!1)("fromDate",r.searchForm.controls.startTime.value)("toDate",r.searchForm.controls.endTime.value),e.xp6(5),e.Q6J("status","default")("data",r.channelTypeOptions)("placeholder","")("allowSearch",!1),e.xp6(3),e.Q6J("status","default")("data",r.searchTypeOptions||e.DdM(34,H))("placeholder","")("allowSearch",!1),e.xp6(6),e.Q6J("disabled",r.invalidTimeFilter),e.xp6(8),e.Q6J("ngForOf",e.Dn7(46,28,r.listOrderRaw,r.filterByTab,r.currentTab)))},dependencies:[m.ez,m.mk,m.sg,m.O5,Be,be.q,I.j$,I.ND,I.BN,I.v2,s.AxE,s.Sm8,g.N8,g.Xq,a.u5,a._Y,a.Fj,a.JJ,a.JL,a.On,Ce.b,Ze.Cs,a.UX,a.sg,a.u,A.q],encapsulation:2}),n})()},80429:(N,Z,d)=>{d.d(Z,{q:()=>a});var m=d(94650);let a=(()=>{class g{transform(x,C,...e){return C(x,...e)}}return g.\u0275fac=function(x){return new(x||g)},g.\u0275pipe=m.Yjl({name:"mapper",type:g,pure:!0,standalone:!0}),g})()},4688:(N,Z,d)=>{d.d(Z,{b:()=>C});var m=d(36895),a=d(94650),g=d(72506);function s(e,_){if(1&e){const f=a.EpF();a.TgZ(0,"cf-icon",3),a.NdJ("click",function(b){a.CHM(f);const v=a.oxw();return a.KtG(v.close(b))}),a.qZA()}}const x=["*"];let C=(()=>{class e{constructor(f,y,b){this.renderer=f,this.elementRef=y,this.mode="default",this.type="solid",this.size="medium",this.color="red",this.onClose=new a.vpe,b.registerIcons([g.UNF])}ngOnChanges(f){this.loadClasses()}ngOnInit(){this.loadClasses()}loadClasses(){this.classes="rounded inline-flex justify-center items-center gap-x-1 "+this.getSizeClass()+" "+this.getModeClass()}getSizeClass(){return"small"===this.size?"py-1 px-2 text-express-sm":"xsmall"===this.size?"py-[2px] px-1 text-express-sm":"py-1.5 px-3 text-express-md"}getModeClass(){return"outline"===this.type?`bg-white bordertext-${this.color}-4 border-${this.color}-4`:"inverted"===this.type?`bg-${this.color}-1 text-${this.color}-4`:"gray-2"===this.color?"text-neutral-gray-6 bg-neutral-gray-2":`text-neutral-white bg-${this.color}-4`}close(f){this.onClose.emit(f),f.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return e.\u0275fac=function(f){return new(f||e)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(g.KNP))},e.\u0275cmp=a.Xpm({type:e,selectors:[["cf-label"]],hostVars:2,hostBindings:function(f,y){2&f&&a.Tol(y.classes)},inputs:{mode:"mode",type:"type",size:"size",color:"color"},outputs:{onClose:"onClose"},standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:x,decls:4,vars:1,consts:[[1,"flex","justify-between","items-center","gap-x-2"],[1,"text-ellipsis","overflow-hidden","whitespace-normal","flex","items-center"],["icon","close","size","small","class","cursor-pointer",3,"click",4,"ngIf"],["icon","close","size","small",1,"cursor-pointer",3,"click"]],template:function(f,y){1&f&&(a.F$t(),a.TgZ(0,"div",0)(1,"div",1),a.Hsn(2),a.qZA(),a.YNc(3,s,1,0,"cf-icon",2),a.qZA()),2&f&&(a.xp6(3),a.Q6J("ngIf","closeable"===y.mode))},dependencies:[m.ez,m.O5,g.AxE,g.Sm8],encapsulation:2,changeDetection:0}),e})()}}]);