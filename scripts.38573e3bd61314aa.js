var Reflect;(function(Ba){!function(Ae){var to="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),eo=Wo(Ba);function Wo(Sn,Ko){return function(no,oo){"function"!=typeof Sn[no]&&Object.defineProperty(Sn,no,{configurable:!0,writable:!0,value:oo}),Ko&&Ko(no,oo)}}typeof to.Reflect>"u"?to.Reflect=Ba:eo=Wo(to.Reflect,eo),function(Ae){var to=Object.prototype.hasOwnProperty,eo="function"==typeof Symbol,Wo=eo&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",Sn=eo&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",Ko="function"==typeof Object.create,no={__proto__:[]}instanceof Array,oo=!Ko&&!no,ro={create:Ko?function(){return Qo(Object.create(null))}:no?function(){return Qo({__proto__:null})}:function(){return Qo({})},has:oo?function(M,q){return to.call(M,q)}:function(M,q){return q in M},get:oo?function(M,q){return to.call(M,q)?M[q]:void 0}:function(M,q){return M[q]}},Pa=Object.getPrototypeOf(Function),Eo="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,it=Eo||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function Nn(){var M={},q=[],K=function(){function Et(Pt,at,It){this._index=0,this._keys=Pt,this._values=at,this._selector=It}return Et.prototype["@@iterator"]=function(){return this},Et.prototype[Sn]=function(){return this},Et.prototype.next=function(){var Pt=this._index;if(Pt>=0&&Pt<this._keys.length){var at=this._selector(this._keys[Pt],this._values[Pt]);return Pt+1>=this._keys.length?(this._index=-1,this._keys=q,this._values=q):this._index++,{value:at,done:!1}}return{value:void 0,done:!0}},Et.prototype.throw=function(Pt){throw this._index>=0&&(this._index=-1,this._keys=q,this._values=q),Pt},Et.prototype.return=function(Pt){return this._index>=0&&(this._index=-1,this._keys=q,this._values=q),{value:Pt,done:!0}},Et}();return function(){function Et(){this._keys=[],this._values=[],this._cacheKey=M,this._cacheIndex=-2}return Object.defineProperty(Et.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Et.prototype.has=function(Pt){return this._find(Pt,!1)>=0},Et.prototype.get=function(Pt){var at=this._find(Pt,!1);return at>=0?this._values[at]:void 0},Et.prototype.set=function(Pt,at){var It=this._find(Pt,!0);return this._values[It]=at,this},Et.prototype.delete=function(Pt){var at=this._find(Pt,!1);if(at>=0){for(var It=this._keys.length,zt=at+1;zt<It;zt++)this._keys[zt-1]=this._keys[zt],this._values[zt-1]=this._values[zt];return this._keys.length--,this._values.length--,Pt===this._cacheKey&&(this._cacheKey=M,this._cacheIndex=-2),!0}return!1},Et.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=M,this._cacheIndex=-2},Et.prototype.keys=function(){return new K(this._keys,this._values,lt)},Et.prototype.values=function(){return new K(this._keys,this._values,bt)},Et.prototype.entries=function(){return new K(this._keys,this._values,se)},Et.prototype["@@iterator"]=function(){return this.entries()},Et.prototype[Sn]=function(){return this.entries()},Et.prototype._find=function(Pt,at){return this._cacheKey!==Pt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Pt)),this._cacheIndex<0&&at&&(this._cacheIndex=this._keys.length,this._keys.push(Pt),this._values.push(void 0)),this._cacheIndex},Et}();function lt(Et,Pt){return Et}function bt(Et,Pt){return Pt}function se(Et,Pt){return[Et,Pt]}}():Map,Se=Eo||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function Xo(){return function(){function M(){this._map=new it}return Object.defineProperty(M.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),M.prototype.has=function(q){return this._map.has(q)},M.prototype.add=function(q){return this._map.set(q,q),this},M.prototype.delete=function(q){return this._map.delete(q)},M.prototype.clear=function(){this._map.clear()},M.prototype.keys=function(){return this._map.keys()},M.prototype.values=function(){return this._map.values()},M.prototype.entries=function(){return this._map.entries()},M.prototype["@@iterator"]=function(){return this.keys()},M.prototype[Sn]=function(){return this.keys()},M}()}():Set,Jt=new(Eo||"function"!=typeof WeakMap?function Hr(){var M=16,q=ro.create(),K=lt();return function(){function at(){this._key=lt()}return at.prototype.has=function(It){var zt=bt(It,!1);return void 0!==zt&&ro.has(zt,this._key)},at.prototype.get=function(It){var zt=bt(It,!1);return void 0!==zt?ro.get(zt,this._key):void 0},at.prototype.set=function(It,zt){return bt(It,!0)[this._key]=zt,this},at.prototype.delete=function(It){var zt=bt(It,!1);return void 0!==zt&&delete zt[this._key]},at.prototype.clear=function(){this._key=lt()},at}();function lt(){var at;do{at="@@WeakMap@@"+Pt()}while(ro.has(q,at));return q[at]=!0,at}function bt(at,It){if(!to.call(at,K)){if(!It)return;Object.defineProperty(at,K,{value:ro.create()})}return at[K]}function se(at,It){for(var zt=0;zt<It;++zt)at[zt]=255*Math.random()|0;return at}function Pt(){var at=function Et(at){return"function"==typeof Uint8Array?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(at)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(at)):se(new Uint8Array(at),at):se(new Array(at),at)}(M);at[6]=79&at[6]|64,at[8]=191&at[8]|128;for(var It="",zt=0;zt<M;++zt){var vn=at[zt];(4===zt||6===zt||8===zt)&&(It+="-"),vn<16&&(It+="0"),It+=vn.toString(16).toLowerCase()}return It}}():WeakMap);function ce(M,q,K){var lt=Jt.get(M);if(C(lt)){if(!K)return;lt=new it,Jt.set(M,lt)}var bt=lt.get(q);if(C(bt)){if(!K)return;bt=new it,lt.set(q,bt)}return bt}function Da(M,q,K){if(Z(M,q,K))return!0;var bt=je(q);return!In(bt)&&Da(M,bt,K)}function Z(M,q,K){var lt=ce(q,K,!1);return!C(lt)&&function Xt(M){return!!M}(lt.has(M))}function So(M,q,K){if(Z(M,q,K))return La(M,q,K);var bt=je(q);return In(bt)?void 0:So(M,bt,K)}function La(M,q,K){var lt=ce(q,K,!1);if(!C(lt))return lt.get(M)}function jr(M,q,K,lt){ce(K,lt,!0).set(M,q)}function No(M,q){var K=Ht(M,q),lt=je(M);if(null===lt)return K;var bt=No(lt,q);if(bt.length<=0)return K;if(K.length<=0)return bt;for(var se=new Se,Et=[],Pt=0,at=K;Pt<at.length;Pt++)se.has(It=at[Pt])||(se.add(It),Et.push(It));for(var vn=0,Ia=bt;vn<Ia.length;vn++){var It;se.has(It=Ia[vn])||(se.add(It),Et.push(It))}return Et}function Ht(M,q){var K=[],lt=ce(M,q,!1);if(C(lt))return K;for(var se=function hi(M){var q=Oe(M,Sn);if(!Ze(q))throw new TypeError;var K=q.call(M);if(!Ce(K))throw new TypeError;return K}(lt.keys()),Et=0;;){var Pt=Go(se);if(!Pt)return K.length=Et,K;var at=ae(Pt);try{K[Et]=at}catch(It){try{bi(se)}finally{throw It}}Et++}}function Zt(M){if(null===M)return 1;switch(typeof M){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===M?1:6;default:return 6}}function C(M){return void 0===M}function In(M){return null===M}function Ce(M){return"object"==typeof M?null!==M:"function"==typeof M}function pi(M,q){switch(Zt(M)){case 0:case 1:case 2:case 3:case 4:case 5:return M}var K=3===q?"string":5===q?"number":"default",lt=Oe(M,Wo);if(void 0!==lt){var bt=lt.call(M,K);if(Ce(bt))throw new TypeError;return bt}return function Mt(M,q){if("string"===q){var K=M.toString;if(Ze(K)&&!Ce(lt=K.call(M)))return lt;if(Ze(bt=M.valueOf)&&!Ce(lt=bt.call(M)))return lt}else{var bt;if(Ze(bt=M.valueOf)&&!Ce(lt=bt.call(M)))return lt;var lt,se=M.toString;if(Ze(se)&&!Ce(lt=se.call(M)))return lt}throw new TypeError}(M,"default"===K?"number":K)}function F(M){var q=pi(M,3);return function _d(M){return"symbol"==typeof M}(q)?q:function At(M){return""+M}(q)}function Ma(M){return Array.isArray?Array.isArray(M):M instanceof Object?M instanceof Array:"[object Array]"===Object.prototype.toString.call(M)}function Ze(M){return"function"==typeof M}function vt(M){return"function"==typeof M}function Oe(M,q){var K=M[q];if(null!=K){if(!Ze(K))throw new TypeError;return K}}function ae(M){return M.value}function Go(M){var q=M.next();return!q.done&&q}function bi(M){var q=M.return;q&&q.call(M)}function je(M){var q=Object.getPrototypeOf(M);if("function"!=typeof M||M===Pa||q!==Pa)return q;var K=M.prototype,lt=K&&Object.getPrototypeOf(K);if(null==lt||lt===Object.prototype)return q;var bt=lt.constructor;return"function"!=typeof bt||bt===M?q:bt}function Qo(M){return M.__=void 0,delete M.__,M}Ae("decorate",function Te(M,q,K,lt){if(C(K)){if(!Ma(M))throw new TypeError;if(!vt(q))throw new TypeError;return function gi(M,q){for(var K=M.length-1;K>=0;--K){var bt=(0,M[K])(q);if(!C(bt)&&!In(bt)){if(!vt(bt))throw new TypeError;q=bt}}return q}(M,q)}if(!Ma(M))throw new TypeError;if(!Ce(q))throw new TypeError;if(!Ce(lt)&&!C(lt)&&!In(lt))throw new TypeError;return In(lt)&&(lt=void 0),function Y(M,q,K,lt){for(var bt=M.length-1;bt>=0;--bt){var Et=(0,M[bt])(q,K,lt);if(!C(Et)&&!In(Et)){if(!Ce(Et))throw new TypeError;lt=Et}}return lt}(M,q,K=F(K),lt)}),Ae("metadata",function ao(M,q){return function K(lt,bt){if(!Ce(lt))throw new TypeError;if(!C(bt)&&!function Yo(M){switch(Zt(M)){case 3:case 4:return!0;default:return!1}}(bt))throw new TypeError;jr(M,q,lt,bt)}}),Ae("defineMetadata",function ge(M,q,K,lt){if(!Ce(K))throw new TypeError;return C(lt)||(lt=F(lt)),jr(M,q,K,lt)}),Ae("hasMetadata",function ne(M,q,K){if(!Ce(q))throw new TypeError;return C(K)||(K=F(K)),Da(M,q,K)}),Ae("hasOwnMetadata",function W(M,q,K){if(!Ce(q))throw new TypeError;return C(K)||(K=F(K)),Z(M,q,K)}),Ae("getMetadata",function Bt(M,q,K){if(!Ce(q))throw new TypeError;return C(K)||(K=F(K)),So(M,q,K)}),Ae("getOwnMetadata",function Je(M,q,K){if(!Ce(q))throw new TypeError;return C(K)||(K=F(K)),La(M,q,K)}),Ae("getMetadataKeys",function ko(M,q){if(!Ce(M))throw new TypeError;return C(q)||(q=F(q)),No(M,q)}),Ae("getOwnMetadataKeys",function xt(M,q){if(!Ce(M))throw new TypeError;return C(q)||(q=F(q)),Ht(M,q)}),Ae("deleteMetadata",function bn(M,q,K){if(!Ce(q))throw new TypeError;C(K)||(K=F(K));var lt=ce(q,K,!1);if(C(lt)||!lt.delete(M))return!1;if(lt.size>0)return!0;var bt=Jt.get(q);return bt.delete(K),bt.size>0||Jt.delete(q),!0})}(eo)}()})(Reflect||(Reflect={})),function(){"use strict";var Ba=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Ae=function(t){return{eq:t}},to=Ae(function(t,e){return t===e}),eo=function(t){return Ae(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},Wo=function(t){return Ae(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=to,c=eo(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},Ae(function(m,p){return c.eq(u(m),u(p))})).eq(o,r))return!1;for(var a=o.length,s=0;s<a;s++){var i=o[s];if(!t.eq(e[i],n[i]))return!1}return!0})},Sn=Ae(function(t,e){if(t===e)return!0;var n=Ba(t);return n===Ba(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?eo(Sn).eq(t,e):"object"===n&&Wo(Sn).eq(t,e))});const Ko=Object.getPrototypeOf,no=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},oo=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&no(n,String,(r,a)=>a.isPrototypeOf(r))?"string":o})(e)===t,ro=t=>e=>typeof e===t,Pa=t=>e=>t===e,Eo=(t,e)=>Se(t)&&no(t,e,(n,o)=>Ko(n)===o),it=oo("string"),Se=oo("object"),fi=t=>Eo(t,Object),Jt=oo("array"),Te=Pa(null),ao=ro("boolean"),ge=Pa(void 0),ne=t=>null==t,W=t=>!ne(t),Bt=ro("function"),Je=ro("number"),ko=(t,e)=>{if(Jt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},xt=()=>{},bn=(t,e)=>(...n)=>t(e.apply(null,n)),gi=(t,e)=>n=>t(e(n)),Y=t=>()=>t,ce=t=>t,Da=(t,e)=>t===e;function Z(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const So=t=>e=>!t(e),La=t=>()=>{throw new Error(t)},jr=t=>t(),No=t=>{t()},Ht=Y(!1),Zt=Y(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return W(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const In=Array.prototype.slice,_d=Array.prototype.indexOf,Ce=Array.prototype.push,pi=(t,e)=>_d.call(t,e),Mt=(t,e)=>pi(t,e)>-1,Xt=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},At=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},F=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Ma=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Ze=(t,e)=>{const n=[],o=[];for(let r=0,a=t.length;r<a;r++){const s=t[r];(e(s,r)?n:o).push(s)}return{pass:n,fail:o}},vt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];e(a,o)&&n.push(a)}return n},Yo=(t,e,n)=>(Ma(t,(o,r)=>{n=e(n,o,r)}),n),Oe=(t,e,n)=>(F(t,(o,r)=>{n=e(n,o,r)}),n),hi=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const a=t[o];if(e(a,o))return C.some(a);if(n(a,o))break}return C.none()},ae=(t,e)=>hi(t,e,Ht),Go=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},bi=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Jt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Ce.apply(e,t[n])}return e},je=(t,e)=>bi(At(t,e)),Nn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},Xo=t=>{const e=In.call(t,0);return e.reverse(),e},Hr=(t,e)=>vt(t,n=>!Mt(e,n)),Qo=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const a=t[o];n[String(a)]=e(a,o)}return n},M=(t,e)=>{const n=In.call(t,0);return n.sort(e),n},q=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),K=t=>q(t,0),lt=t=>q(t,t.length-1),bt=Bt(Array.from)?Array.from:t=>In.call(t),se=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},Et=Object.keys,Pt=Object.hasOwnProperty,at=(t,e)=>{const n=Et(t);for(let o=0,r=n.length;o<r;o++){const a=n[o];e(t[a],a)}},It=(t,e)=>zt(t,(n,o)=>({k:o,v:e(n,o)})),zt=(t,e)=>{const n={};return at(t,(o,r)=>{const a=e(o,r);n[a.k]=a.v}),n},vn=t=>(e,n)=>{t[n]=e},Ia=(t,e,n,o)=>{at(t,(r,a)=>{(e(r,a)?n:o)(r,a)})},Fa=(t,e)=>{const n={};return Ia(t,e,vn(n),xt),n},vi=(t,e)=>{const n=[];return at(t,(o,r)=>{n.push(e(o,r))}),n},xd=t=>vi(t,ce),$t=(t,e)=>_t(t,e)?C.from(t[e]):C.none(),_t=(t,e)=>Pt.call(t,e),$r=(t,e)=>_t(t,e)&&null!=t[e],Gf=t=>{const e={};return F(t,n=>{e[n]={}}),Et(e)},Xf=t=>void 0!==t.length,Ed=Array.isArray,yi=(t,e,n)=>{if(!t)return!1;if(n=n||t,Xf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(_t(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},kd=(t,e)=>{const n=[];return yi(t,(o,r)=>{n.push(e(o,r,t))}),n},Ua=(t,e)=>{const n=[];return yi(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Ci=(t,e,n,o)=>{let r=ge(n)?t[0]:n;for(let a=0;a<t.length;a++)r=e.call(o,r,t[a],a);return r},Qf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Jo=t=>t[t.length-1],Zo=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Jf=()=>Sd(0,0),Sd=(t,e)=>({major:t,minor:e}),za={nu:Sd,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Jf():((o,r)=>{const a=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!a)return{major:0,minor:0};const s=i=>Number(r.replace(a,"$"+i));return Sd(s(1),s(2))})(t,n)},unknown:Jf},Zf=(t,e)=>{const n=String(e).toLowerCase();return ae(t,o=>o.search(n))},tg=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,eg=(t,e)=>we(t,e)?t.substring(e.length):t,Be=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!ge(o)||r+e.length<=o)},we=(t,e)=>tg(t,e,0),Nd=(t,e)=>tg(t,e,t.length-e.length),Rd=t=>e=>e.replace(t,""),Vr=Rd(/^\s+|\s+$/g),Wx=Rd(/^\s+/g),ng=Rd(/\s+$/g),Fn=t=>t.length>0,ja=t=>!Fn(t),wi=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},Ad=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,so=t=>e=>Be(e,t),Kx=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Be(t,"edge/")&&Be(t,"chrome")&&Be(t,"safari")&&Be(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ad],search:t=>Be(t,"chrome")&&!Be(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Be(t,"msie")||Be(t,"trident")},{name:"Opera",versionRegexes:[Ad,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:so("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:so("firefox")},{name:"Safari",versionRegexes:[Ad,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Be(t,"safari")||Be(t,"mobile/"))&&Be(t,"applewebkit")}],Yx=[{name:"Windows",search:so("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Be(t,"iphone")||Be(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:so("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:so("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:so("linux"),versionRegexes:[]},{name:"Solaris",search:so("sunos"),versionRegexes:[]},{name:"FreeBSD",search:so("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:so("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],og={browsers:Y(Kx),oses:Y(Yx)},ag="Chromium",ig="Firefox",dg=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(ag),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(ig),isSafari:o("Safari")}},Gx=()=>dg({current:void 0,version:za.unknown()}),Xx=dg,cg=(Y("Edge"),Y(ag),Y("IE"),Y("Opera"),Y(ig),Y("Safari"),"Windows"),ug="Android",gg="Solaris",pg="FreeBSD",hg="ChromeOS",bg=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(cg),isiOS:o("iOS"),isAndroid:o(ug),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(gg),isFreeBSD:o(pg),isChromeOS:o(hg)}},Qx=()=>bg({current:void 0,version:za.unknown()}),Jx=bg,Zx=(Y(cg),Y("iOS"),Y(ug),Y("Linux"),Y("macOS"),Y(gg),Y(pg),Y(hg),t=>window.matchMedia(t).matches);let tE=Zo(()=>((t,e,n)=>{const o=og.browsers(),r=og.oses(),a=e.bind(l=>{return d=o,se(l.brands,u=>{const m=u.brand.toLowerCase();return ae(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:za.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return Zf(o,d=t).map(c=>{const u=za.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Gx,Xx),s=(l=r,d=t,Zf(l,d).map(c=>{const u=za.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(Qx,Jx),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:Y(m),isiPhone:Y(p),isTablet:Y(g),isPhone:Y(b),isTouch:Y(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Y(v),isDesktop:Y(y)}})(s,a,t,n);var l,d;return{browser:a,os:s,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),Zx));const Un=()=>tE(),eE=navigator.userAgent,Td=Un(),zn=Td.browser,jn=Td.os,tr=Td.deviceType,nE=-1!==eE.indexOf("Windows Phone"),Ot={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zn.isIE(),windowsPhone:nE,browser:{current:zn.current,version:zn.version,isChromium:zn.isChromium,isEdge:zn.isEdge,isFirefox:zn.isFirefox,isIE:zn.isIE,isOpera:zn.isOpera,isSafari:zn.isSafari},os:{current:jn.current,version:jn.version,isAndroid:jn.isAndroid,isChromeOS:jn.isChromeOS,isFreeBSD:jn.isFreeBSD,isiOS:jn.isiOS,isLinux:jn.isLinux,isMacOS:jn.isMacOS,isSolaris:jn.isSolaris,isWindows:jn.isWindows},deviceType:{isDesktop:tr.isDesktop,isiPad:tr.isiPad,isiPhone:tr.isiPhone,isPhone:tr.isPhone,isTablet:tr.isTablet,isTouch:tr.isTouch,isWebView:tr.isWebView}},oE=/^\s*|\s*$/g,vg=t=>ne(t)?"":(""+t).replace(oE,""),yg=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),yi(t,(r,a)=>!1!==e.call(o,r,a,n)&&(yg(r,e,n,o),!0)))},$={trim:vg,isArray:Ed,is:(t,e)=>e?!("array"!==e||!Ed(t))||typeof t===e:void 0!==t,toArray:t=>{if(Ed(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=it(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:yi,map:kd,grep:Ua,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:_t,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(_t(o,r)){const a=o[r];void 0!==a&&(t[r]=a)}}return t},walk:yg,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Jt(t)?t:""===t?[]:kd(t.split(e||","),vg),_addCacheSuffix:t=>{const e=Ot.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},qr=(t,e,n=Da)=>t.exists(o=>n(o,e)),Cg=(t,e,n=Da)=>Pe(t,e,n).getOr(t.isNone()&&e.isNone()),Pe=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Wr=(t,e)=>t?C.some(e):C.none(),rE=typeof window<"u"?window:Function("return this;")(),wg=(t,e)=>((n,o)=>{let r=null!=o?o:rE;for(let a=0;a<n.length&&null!=r;++a)r=r[n[a]];return r})(t.split("."),e),aE=Object.getPrototypeOf,Tt=t=>t.dom.nodeName.toLowerCase(),_g=t=>t.dom.nodeType,_i=t=>e=>_g(e)===t,xi=t=>Ye(t)&&(t=>{const e=wg("ownerDocument.defaultView",t);return Se(t)&&((n=e,((o,r)=>{const a=wg(o,r);if(null==a)throw new Error(o+" not available on this browser");return a})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(aE(t).constructor.name));var n})(t.dom),Ye=_i(1),tn=_i(3),iE=_i(9),lE=_i(11),Ei=t=>e=>Ye(e)&&Tt(e)===t,xg=(t,e,n)=>{if(!(it(n)||ao(n)||Je(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},_e=(t,e,n)=>{xg(t.dom,e,n)},io=(t,e)=>{const n=t.dom;at(e,(o,r)=>{xg(n,r,o)})},Ge=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},lo=(t,e)=>C.from(Ge(t,e)),Ha=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},xe=(t,e)=>{t.dom.removeAttribute(e)},Eg=t=>Oe(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Od=(t,e)=>{const n=Ge(t,e);return void 0===n||""===n?[]:n.split(" ")},$a=t=>void 0!==t.dom.classList,kg=t=>Od(t,"class"),Sg=(t,e)=>((n,o,r)=>{const a=Od(n,o).concat([r]);return _e(n,o,a.join(" ")),!0})(t,"class",e),Ng=(t,e)=>((n,o,r)=>{const a=vt(Od(n,o),s=>s!==r);return a.length>0?_e(n,o,a.join(" ")):xe(n,o),!1})(t,"class",e),Kr=(t,e)=>{$a(t)?t.dom.classList.add(e):Sg(t,e)},Rg=t=>{0===($a(t)?t.dom.classList:kg(t)).length&&xe(t,"class")},Va=(t,e)=>{$a(t)?t.dom.classList.remove(e):Ng(t,e),Rg(t)},Bd=(t,e)=>$a(t)&&t.dom.classList.contains(e),qa=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Wa=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return qa(n.childNodes[0])},pe=(t,e)=>{const n=(e||document).createElement(t);return qa(n)},Yr=(t,e)=>{const n=(e||document).createTextNode(t);return qa(n)},k=qa,Ag=(t,e)=>{const n=[],o=a=>(n.push(a),e(a));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},Rn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Tg=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Dt=(t,e)=>t.dom===e.dom,co=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},Og=t=>k(t.dom.ownerDocument),uo=t=>iE(t)?t:Og(t),Ka=t=>k(uo(t).dom.defaultView),yn=t=>C.from(t.dom.parentNode).map(k),ki=t=>C.from(t.dom.parentElement).map(k),Bg=(t,e)=>{const n=Bt(e)?e:Ht;let o=t.dom;const r=[];for(;null!=o.parentNode;){const a=o.parentNode,s=k(a);if(r.push(s),!0===n(s))break;o=a}return r},er=t=>C.from(t.dom.previousSibling).map(k),Ya=t=>C.from(t.dom.nextSibling).map(k),Pg=t=>Xo(Ag(t,er)),Dg=t=>Ag(t,Ya),Ee=t=>At(t.dom.childNodes,k),Gr=(t,e)=>C.from(t.dom.childNodes[e]).map(k),Pd=t=>Gr(t,0),Dd=t=>Gr(t,t.dom.childNodes.length-1),Ld=t=>t.dom.childNodes.length,Md=t=>lE(t)&&W(t.dom.host),Lg=Bt(Element.prototype.attachShadow)&&Bt(Node.prototype.getRootNode),cE=Y(Lg),Ro=Lg?t=>k(t.dom.getRootNode()):uo,Id=t=>Md(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return k(n)})(uo(t)),uE=t=>k(t.dom.host),Mg=t=>{if(cE()&&W(t.target)){const e=k(t.target);if(Ye(e)&&mE(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return K(n)}}return C.from(t.target)},mE=t=>W(t.dom.shadowRoot),Xr=t=>{const e=tn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Ro(o);return Md(r)?C.some(r):C.none()})(k(e)).fold(()=>n.body.contains(e),gi(Xr,uE))};var Ig=(t,e,n,o,r)=>t(n,o)?C.some(n):Bt(r)&&r(n)?C.none():e(n,o,r);const mo=(t,e,n)=>{let o=t.dom;const r=Bt(n)?n:Ht;for(;o.parentNode;){o=o.parentNode;const a=k(o);if(e(a))return C.some(a);if(r(a))break}return C.none()},nr=(t,e,n)=>Ig((o,r)=>r(o),mo,t,e,n),Fg=(t,e)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const a=k(o.childNodes[r]);if(e(a))return C.some(a);const s=n(o.childNodes[r]);if(s.isSome())return s}return C.none()};return n(t.dom)},Ga=(t,e,n)=>mo(t,o=>Rn(o,e),n),Xa=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Tg(r)?C.none():C.from(r.querySelector(n)).map(k)})(e,t),or=(t,e,n)=>Ig((o,r)=>Rn(o,r),Ga,t,e,n),rr=(t,e=!1)=>{return Xr(t)?t.dom.isContentEditable:(n=t,or(n,"[contenteditable]")).fold(Y(e),o=>"true"===fE(o));var n},fE=t=>t.dom.contentEditable,Qa=t=>void 0!==t.style&&Bt(t.style.getPropertyValue),Ug=(t,e,n)=>{if(!it(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Qa(t)&&t.style.setProperty(e,n)},zg=(t,e,n)=>{Ug(t.dom,e,n)},Si=(t,e)=>{const n=t.dom;at(e,(o,r)=>{Ug(n,r,o)})},Hn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Xr(t)?o:jg(n,e)},jg=(t,e)=>Qa(t)?t.style.getPropertyValue(e):"",Ni=(t,e)=>{const o=jg(t.dom,e);return C.from(o).filter(r=>r.length>0)},Fd=t=>{const e={},n=t.dom;if(Qa(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},Hg=(t,e)=>{var n,o;o=e,Qa(n=t.dom)&&n.style.removeProperty(o),qr(lo(t,"style").map(Vr),"")&&xe(t,"style")},qe=(t,e)=>{yn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},fo=(t,e)=>{Ya(t).fold(()=>{yn(t).each(n=>{ie(n,e)})},n=>{qe(n,e)})},Ud=(t,e)=>{Pd(t).fold(()=>{ie(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},ie=(t,e)=>{t.dom.appendChild(e.dom)},$g=(t,e)=>{qe(t,e),ie(e,t)},ar=(t,e)=>{F(e,n=>{ie(t,n)})},Qr=t=>{t.dom.textContent="",F(Ee(t),e=>{Vt(e)})},Vt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},go=t=>{const e=Ee(t);var n,o;e.length>0&&(n=t,F(o=e,(r,a)=>{fo(0===a?n:o[a-1],r)})),Vt(t)},zd=t=>At(t,k),Vg=t=>t.dom.innerHTML,Ri=(t,e)=>{const n=Og(t).dom,o=k(n.createDocumentFragment()),r=((a,s)=>{const i=(s||document).createElement("div");return i.innerHTML=a,Ee(k(i))})(e,n);ar(o,r),Qr(t),ie(t,o)},pE=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},qg=(t,e)=>({left:t,top:e,translate:(n,o)=>qg(t+n,e+o)}),Jr=qg,Ai=(t,e)=>void 0!==t?t:void 0!==e?e:0,jd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Jr(n.offsetLeft,n.offsetTop):Xr(t)?(o=>{const r=o.getBoundingClientRect();return Jr(r.left,r.top)})(e):Jr(0,0)},Hd=t=>{const e=void 0!==t?t.dom:document;return Jr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Wg=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Kg=(t,e)=>{Un().browser.isSafari()&&Bt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Yg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Gg=t=>{const e=void 0===t?window:t,o=Hd(k(e.document));return(r=>{const a=void 0===r?window:r;return Un().browser.isFirefox()?C.none():C.from(a.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Yg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Yg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Xg=(t,e)=>{let n=[];return F(Ee(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(Xg(o,e))}),n},De=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Tg(r)?[]:At(r.querySelectorAll(n),k)})(e,t),Qg=(t,e,n)=>Ga(t,e,n).isSome();class ue{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let a=e[o];if(a)return a;for(let s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(a=s[o],a)return a}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let a=o.lastChild;a;a=a.lastChild)if(!a.lastChild)return a;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const sr=t=>e=>!!e&&e.nodeType===t,Ti=t=>!!t&&!Object.getPrototypeOf(t),nt=sr(1),po=t=>nt(t)&&xi(k(t)),Ja=t=>{const e=t.toLowerCase();return n=>W(n)&&n.nodeName.toLowerCase()===e},An=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Mt(e,o)}return!1}},Oi=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(nt(o)){const r=o.ownerDocument.defaultView;if(r)for(let a=0;a<n.length;a++){const s=r.getComputedStyle(o,null);if((s?s.getPropertyValue(t):null)===n[a])return!0}}return!1}},Jg=t=>e=>nt(e)&&e.hasAttribute(t),ir=t=>nt(t)&&t.hasAttribute("data-mce-bogus"),ho=t=>nt(t)&&"TABLE"===t.tagName,Zg=t=>e=>!(!po(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),$d=An(["textarea","input"]),H=sr(3),hE=sr(4),bE=sr(7),Ao=sr(8),Za=sr(9),Vd=sr(11),te=Ja("br"),tp=Ja("img"),Cn=Zg("true"),qt=Zg("false"),Bi=An(["td","th"]),vE=An(["td","th","caption"]),$n=An(["video","audio","object","embed"]),yE=Ja("li"),qd=Ja("details"),CE=Ja("summary"),he="\xa0",Wd=t=>"\ufeff"===t,Kd=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(tn),Pi=t=>Kd.get(t),ep=t=>Kd.getOption(t),Zr=t=>{let e;return n=>(e=e||Qo(t,Zt),_t(e,Tt(n)))},lr=t=>Ye(t)&&"br"===Tt(t),np=Zr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Yd=Zr(["ul","ol","dl"]),es=Zr(["li","dd","dt"]),wE=Zr(["thead","tbody","tfoot"]),ns=Zr(["td","th"]),Di=Zr(["pre","script","textarea","style"]),os=()=>{const t=pe("br");return _e(t,"data-mce-bogus","1"),t},To=t=>{Qr(t),ie(t,os())},be="\ufeff",Li=Wd,Xe=t=>t.replace(/\uFEFF/g,""),_E=nt,ta=H,ea=t=>(ta(t)&&(t=t.parentNode),_E(t)&&t.hasAttribute("data-mce-caret")),Oo=t=>ta(t)&&Li(t.data),en=t=>ea(t)||Oo(t),op=t=>t.firstChild!==t.lastChild||!te(t.firstChild),Gd=t=>{const e=t.container();return!!H(e)&&(e.data.charAt(t.offset())===be||t.isAtStart()&&Oo(e.previousSibling))},Xd=t=>{const e=t.container();return!!H(e)&&(e.data.charAt(t.offset()-1)===be||t.isAtEnd()&&Oo(e.nextSibling))},Mi=t=>ta(t)&&t.data[0]===be,Ii=t=>ta(t)&&t.data[t.data.length-1]===be,Qd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];ir(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,rp=t=>ea(t.startContainer),ap=Cn,xE=qt,EE=te,kE=H,SE=An(["script","style","textarea"]),sp=An(["img","input","textarea","hr","iframe","video","audio","object","embed"]),NE=An(["table"]),RE=en,wn=t=>!RE(t)&&(kE(t)?!SE(t.parentNode):sp(t)||EE(t)||NE(t)||Jd(t)),Jd=t=>{return!(nt(e=t)&&"true"===e.getAttribute("unselectable"))&&xE(t);var e},ip=(t,e)=>wn(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Jd(r))return!1;if(ap(r))return!0}return!0})(t,e),AE=/^[ \t\r\n]*$/,Bo=t=>AE.test(t),TE=t=>{for(const e of t)if(!Wd(e))return!1;return!0},lp=t=>"\n"===t||"\r"===t,dp=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),a=t.replace(/\t/g,r);var l;return Oe(a,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===he?i.pcIsSpace||""===i.str&&n||i.str.length===a.length-1&&o||(c=i.str.length+1)<(d=a).length&&c>=0&&lp(d[c])?{pcIsSpace:!1,str:i.str+he}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:lp(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},Fi=(t,e)=>{return wn(t)&&(o=e,!(H(n=t)&&Bo(n.data)&&!((r,a)=>{const s=k(a),i=k(r);return Qg(i,"pre,code",Z(Dt,s))})(n,o)))||(n=>nt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||OE(t);var n,o},OE=Jg("data-mce-bookmark"),BE=Jg("data-mce-bogus"),PE=t=>nt(t)&&"all"===t.getAttribute("data-mce-bogus"),DE=t=>ki(k(t)).exists(e=>!rr(e)),oe=(t,e=!0)=>((n,o)=>{let r=0;if(Fi(n,n))return!1;{let a=n.firstChild;if(!a)return!0;const s=new ue(a,n);do{if(o){if(PE(a)){a=s.next(!0);continue}if(BE(a)){a=s.next();continue}}if(Cn(a)&&DE(a))return!1;if(te(a))r++,a=s.next();else{if(Fi(a,n))return!1;a=s.next()}}while(a);return r<=1}})(t.dom,e),dr=t=>"svg"===t.toLowerCase(),Zd=t=>dr(t.nodeName),cp=t=>"svg"===(null==t?void 0:t.nodeName)?"svg":"html",LE=["svg"],Ui="data-mce-block",tc=t=>{return At((e=t,vt(Et(e),n=>!/[A-Z]/.test(n))),e=>`${e}:`+At(LE,n=>`not(${n} ${e})`).join(":")).join(",");var e},up=(t,e)=>W(e.querySelector(t))?(e.setAttribute(Ui,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Ui),!1),mp=(t,e)=>{const n=tc(t.getTransparentElements()),o=tc(t.getBlockElements());return vt(e.querySelectorAll(n),r=>up(o,r))},fp=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(oe(k(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},ec=(t,e)=>{const n=mp(t,e);var o,r,a;((t,e,n)=>{const o=t.getBlockElements(),r=k(e),a=i=>Tt(i)in o,s=i=>Dt(i,r);F(zd(n),i=>{mo(i,a,s).each(l=>{const d=vt(Ee(i),m=>a(m)&&!t.isValidChild(Tt(l),Tt(m)));if(d.length>0){const c=ki(l);F(d,u=>{mo(u,a,s).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();fp(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();fp(v,!1),oe(k(b))||g.insertBefore(b,p),oe(k(f))||g.insertBefore(f,p),oe(k(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>mp(t,u.dom))}})})})(t,e,n),o=t,r=e,a=n,F([...a,...cr(o,r)?[r]:[]],s=>F(De(k(s),s.nodeName.toLowerCase()),i=>{FE(o,i.dom)&&go(i)}))},IE=(t,e)=>{if(rc(t,e)){const n=tc(t.getBlockElements());up(n,e)}},nc=t=>t.hasAttribute(Ui),oc=(t,e)=>_t(t.getTransparentElements(),e),rc=(t,e)=>nt(e)&&oc(t,e.nodeName),cr=(t,e)=>rc(t,e)&&nc(e),FE=(t,e)=>rc(t,e)&&!nc(e),ac=(t,e)=>1===e.type&&oc(t,e.name)&&it(e.attr(Ui)),UE=Un().browser,gp=t=>ae(t,Ye),pp=(t,e)=>t.children&&Mt(t.children,e),hp=(t,e={})=>{let n=0;const o={},r=k(t),a=uo(r),s=u=>{ie(Id(r),u)},i=u=>{const m=Id(r);Xa(m,"#"+u).each(Vt)},l=u=>$t(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),d=u=>new Promise((m,p)=>{let f;const h=$._addCacheSuffix(u),g=l(h);o[h]=g,g.count++;const b=(w,x)=>{F(w,No),g.status=x,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>b(g.passed,2),y=()=>b(g.failed,3);if(m&&g.passed.push(m),p&&g.failed.push(p),1===g.status)return;if(2===g.status)return void v();if(3===g.status)return void y();g.status=1;const _=pe("link",a.dom);io(_,{rel:"stylesheet",type:"text/css",id:g.id}),e.contentCssCors&&_e(_,"crossOrigin","anonymous"),e.referrerPolicy&&_e(_,"referrerpolicy",e.referrerPolicy),f=_.dom,f.onload=v,f.onerror=y,s(_),_e(_,"href",h)}),c=u=>{const m=$._addCacheSuffix(u);$t(o,m).each(p=>{0==--p.count&&(delete o[m],i(p.id))})};return{load:d,loadRawCss:(u,m)=>{const p=l(u);o[u]=p,p.count++;const f=pe("style",a.dom);io(f,{rel:"stylesheet",type:"text/css",id:p.id}),f.dom.innerHTML=m,s(f)},loadAll:u=>Promise.allSettled(At(u,m=>d(m).then(Y(m)))).then(m=>{const p=Ze(m,f=>"fulfilled"===f.status);return p.fail.length>0?Promise.reject(At(p.fail,f=>f.reason)):At(p.pass,f=>f.value)}),unload:c,unloadRawCss:u=>{$t(o,u).each(m=>{0==--m.count&&(delete o[u],i(m.id))})},unloadAll:u=>{F(u,m=>{c(m)})},_setReferrerPolicy:u=>{e.referrerPolicy=u},_setContentCssCors:u=>{e.contentCssCors=u}}},bp=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Ro(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=hp(o,n);return t.set(o,r),r})}}})(),vp=(t,e,n)=>W(t)&&(Fi(t,e)||n.isInline(t.nodeName.toLowerCase())),yp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),sc=(t,e,n,o)=>{var r;const a=o||e;if(nt(e)&&yp(e))return e;const s=e.childNodes;for(let i=s.length-1;i>=0;i--)sc(t,s[i],n,a);if(nt(e)){const i=e.childNodes;1===i.length&&yp(i[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(i[0],e))}return Vd(i=e)||Za(i)||Fi(e,a)||(i=>!!nt(i)&&i.childNodes.length>0)(e)||((i,l,d)=>H(i)&&i.data.length>0&&((c,u,m)=>{const p=new ue(c,u).prev(!1),f=new ue(c,u).next(!1),h=ge(p)||vp(p,u,m),g=ge(f)||vp(f,u,m);return h&&g})(i,l,d))(e,a,n)||t.remove(e),e;var i},zE=$.makeMap,zi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ji=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jE=/[<>&\"\']/g,HE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,$E={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ur={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},VE={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Cp=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const a=String.fromCharCode(parseInt(o[r],e));if(!ur[a]){const s="&"+o[r+1]+";";n[a]=s,n[s]=a}}return n}},ic=Cp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),wp=(t,e)=>t.replace(e?zi:ji,n=>ur[n]||n),_p=(t,e)=>t.replace(e?zi:ji,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ur[n]||"&#"+n.charCodeAt(0)+";"),lc=(t,e,n)=>{const o=n||ic;return t.replace(e?zi:ji,r=>ur[r]||o[r]||r)},mr={encodeRaw:wp,encodeAllRaw:t=>(""+t).replace(jE,e=>ur[e]||e),encodeNumeric:_p,encodeNamed:lc,getEncodeFunc:(t,e)=>{const n=Cp(e)||ic,o=zE(t.replace(/\+/g,","));return o.named&&o.numeric?(r,a)=>r.replace(a?zi:ji,s=>void 0!==ur[s]?ur[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):o.named?e?(r,a)=>lc(r,a,n):lc:o.numeric?_p:wp},decode:t=>t.replace(HE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):$E[n]||String.fromCharCode(n):VE[e]||ic[e]||(o=>{const r=pe("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Ne=(t,e)=>(t=$.trim(t))?t.split(e||" "):[],xp=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Hi={},rs=$.makeMap,Tn=$.each,dc=$.extend,Ep=$.explode,kp=(t,e={})=>{const n=rs(t," ",rs(t.toUpperCase()," "));return dc(n,e)},Sp=t=>kp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),cc=(t,e)=>{if(t){const n={};return it(t)&&(t={"*":t}),Tn(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?rs(o,/[, ]/):Ep(o,/[, ]/)}),n}},Po=(t={})=>{var e;const n={},o={};let r=[];const a={},s={},i=(ot,kt,Nt)=>{const wt=t[ot];if(wt)return rs(wt,/[, ]/,rs(wt.toUpperCase(),/[, ]/));{let Rt=Hi[ot];return Rt||(Rt=kp(kt,Nt),Hi[ot]=Rt),Rt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(ot=>{const{globalAttributes:kt,phrasingContent:Nt,flowContent:wt}=(Kt=>{let le,ke,ze;le="id accesskey class dir lang style tabindex title role",ke="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ze="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Kt&&(le+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ke+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ze+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==Kt&&(le+=" xml:lang",ze=[ze,"acronym applet basefont big font strike tt"].join(" "),ke=[ke,"center dir isindex noframes"].join(" "));const fn=[ke,ze].join(" ");return{globalAttributes:le,blockContent:ke,phrasingContent:ze,flowContent:fn}})(ot),Rt={},fe=(Kt,le,ke)=>{Rt[Kt]={attributes:Qo(le,Y({})),attributesOrder:le,children:Qo(ke,Y({}))}},ut=(Kt,le="",ke="")=>{const ze=Ne(ke),fn=Ne(Kt);let Re=fn.length;const gn=Ne([kt,le].join(" "));for(;Re--;)fe(fn[Re],gn.slice(),ze)},St=(Kt,le)=>{const ke=Ne(Kt),ze=Ne(le);let fn=ke.length;for(;fn--;){const Re=Rt[ke[fn]];for(let gn=0,de=ze.length;gn<de;gn++)Re.attributes[ze[gn]]={},Re.attributesOrder.push(ze[gn])}};return"html5-strict"!==ot&&(F(Ne("acronym applet basefont big font strike tt"),Kt=>{ut(Kt,"",Nt)}),F(Ne("center dir isindex noframes"),Kt=>{ut(Kt,"",wt)})),ut("html","manifest","head body"),ut("head","","base command link meta noscript script style title"),ut("title hr noscript br"),ut("base","href target"),ut("link","href rel media hreflang type sizes hreflang"),ut("meta","name http-equiv content charset"),ut("style","media type scoped"),ut("script","src async defer type charset"),ut("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",wt),ut("dd div","",wt),ut("address dt caption","","html4"===ot?Nt:wt),ut("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Nt),ut("blockquote","cite",wt),ut("ol","reversed start type","li"),ut("ul","","li"),ut("li","value",wt),ut("dl","","dt dd"),ut("a","href target rel media hreflang type","html4"===ot?Nt:wt),ut("q","cite",Nt),ut("ins del","cite datetime",wt),ut("img","src sizes srcset alt usemap ismap width height"),ut("iframe","src name width height",wt),ut("embed","src type width height"),ut("object","data type typemustmatch name usemap form width height",[wt,"param"].join(" ")),ut("param","name value"),ut("map","name",[wt,"area"].join(" ")),ut("area","alt coords shape href target rel media hreflang type"),ut("table","border","caption colgroup thead tfoot tbody tr"+("html4"===ot?" col":"")),ut("colgroup","span","col"),ut("col","span"),ut("tbody thead tfoot","","tr"),ut("tr","","td th"),ut("td","colspan rowspan headers",wt),ut("th","colspan rowspan headers scope abbr",wt),ut("form","accept-charset action autocomplete enctype method name novalidate target",wt),ut("fieldset","disabled form name",[wt,"legend"].join(" ")),ut("label","form for",Nt),ut("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ut("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===ot?wt:Nt),ut("select","disabled form multiple name required size","option optgroup"),ut("optgroup","disabled label","option"),ut("option","disabled label selected value"),ut("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ut("menu","type label",[wt,"li"].join(" ")),ut("noscript","",wt),"html4"!==ot&&(ut("wbr"),ut("ruby","",[Nt,"rt rp"].join(" ")),ut("figcaption","",wt),ut("mark rt rp bdi","",Nt),ut("summary","",[Nt,"h1 h2 h3 h4 h5 h6"].join(" ")),ut("canvas","width height",wt),ut("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[wt,"track source"].join(" ")),ut("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[wt,"track source"].join(" ")),ut("picture","","img source"),ut("source","src srcset type media sizes"),ut("track","kind src srclang label default"),ut("datalist","",[Nt,"option"].join(" ")),ut("article section nav aside main header footer","",wt),ut("hgroup","","h1 h2 h3 h4 h5 h6"),ut("figure","",[wt,"figcaption"].join(" ")),ut("time","datetime",Nt),ut("dialog","open",wt),ut("command","type label icon disabled checked radiogroup command"),ut("output","for form name",Nt),ut("progress","value max",Nt),ut("meter","value min max low high optimum",Nt),ut("details","open",[wt,"summary"].join(" ")),ut("keygen","autofocus challenge disabled form keytype name"),fe("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==ot&&(St("script","language xml:space"),St("style","xml:space"),St("object","declare classid code codebase codetype archive standby align border hspace vspace"),St("embed","align name hspace vspace"),St("param","valuetype type"),St("a","charset name rev shape coords"),St("br","clear"),St("applet","codebase archive code object alt name width height align hspace vspace"),St("img","name longdesc align border hspace vspace"),St("iframe","longdesc frameborder marginwidth marginheight scrolling align"),St("font basefont","size color face"),St("input","usemap align"),St("select"),St("textarea"),St("h1 h2 h3 h4 h5 h6 div p legend caption","align"),St("ul","type compact"),St("li","type"),St("ol dl menu dir","compact"),St("pre","width xml:space"),St("hr","align noshade size width"),St("isindex","prompt"),St("table","summary width frame rules cellspacing cellpadding align bgcolor"),St("col","width align char charoff valign"),St("colgroup","width align char charoff valign"),St("thead","align char charoff valign"),St("tr","align char charoff valign bgcolor"),St("th","axis align char charoff valign nowrap bgcolor width height"),St("form","accept"),St("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),St("tfoot","align char charoff valign"),St("tbody","align char charoff valign"),St("area","nohref"),St("body","background bgcolor text link vlink alink")),"html4"!==ot&&(St("input button select textarea","autofocus"),St("input textarea","placeholder"),St("a","download"),St("link script img","crossorigin"),St("img","loading"),St("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==ot&&F([Rt.video,Rt.audio],Kt=>{delete Kt.children.audio,delete Kt.children.video}),F(Ne("a form meter progress dfn"),Kt=>{Rt[Kt]&&delete Rt[Kt].children[Kt]}),delete Rt.caption.children.table,delete Rt.script,Rt})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=cc(t.valid_styles),u=cc(t.invalid_styles,"map"),m=cc(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg",h),y=i("move_caret_before_on_enter_elements",b+" table",h),_="h1 h2 h3 h4 h5 h6",w=i("text_block_elements",_+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),N=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),T=i("transparent_elements","a ins del canvas map"),O=i("wrap_block_elements","pre "+_);Tn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ot=>{s[ot]=new RegExp("</"+ot+"[^>]*>","gi")});const P=ot=>{const kt=C.from(n["@"]),Nt=/[*?+]/;F(((wt,Rt)=>{const fe=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return je(Ne(Rt,","),ut=>{const St=fe.exec(ut);if(St){const Kt=St[1],le=St[2],ke=St[3],ze=St[4],fn=St[5],Re={attributes:{},attributesOrder:[]};if(wt.each(gn=>{return _o=Re,at((de=gn).attributes,(pn,kn)=>{_o.attributes[kn]=pn}),void _o.attributesOrder.push(...de.attributesOrder);var de,_o}),"#"===Kt?Re.paddEmpty=!0:"-"===Kt&&(Re.removeEmpty=!0),"!"===ze&&(Re.removeEmptyAttrs=!0),fn&&((gn,de)=>{const _o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,pn=/[*?+]/,{attributes:kn,attributesOrder:Ir}=de;F(Ne(gn,"|"),ci=>{const Fr=_o.exec(ci);if(Fr){const hn={},yd=Fr[1],Yt=Fr[2].replace(/[\\:]:/g,":"),Mn=Fr[3],Ur=Fr[4];if("!"===yd&&(de.attributesRequired=de.attributesRequired||[],de.attributesRequired.push(Yt),hn.required=!0),"-"===yd)return delete kn[Yt],void Ir.splice($.inArray(Ir,Yt),1);if(Mn&&("="===Mn?(de.attributesDefault=de.attributesDefault||[],de.attributesDefault.push({name:Yt,value:Ur}),hn.defaultValue=Ur):"~"===Mn?(de.attributesForced=de.attributesForced||[],de.attributesForced.push({name:Yt,value:Ur}),hn.forcedValue=Ur):"<"===Mn&&(hn.validValues=$.makeMap(Ur,"?"))),pn.test(Yt)){const ui=hn;de.attributePatterns=de.attributePatterns||[],ui.pattern=xp(Yt),de.attributePatterns.push(ui)}else kn[Yt]||Ir.push(Yt),kn[Yt]=hn}})})(fn,Re),ke&&(Re.outputName=le),"@"===le){if(!wt.isNone())return[];wt=C.some(Re)}return[ke?{name:le,element:Re,aliasName:ke}:{name:le,element:Re}]}return[]})})(kt,null!=ot?ot:""),({name:wt,element:Rt,aliasName:fe})=>{if(fe&&(n[fe]=Rt),Nt.test(wt)){const ut=Rt;ut.pattern=xp(wt),r.push(ut)}else n[wt]=Rt})},E=ot=>{r=[],F(Et(n),kt=>{delete n[kt]}),P(ot)},R=ot=>{delete Hi.text_block_elements,delete Hi.block_elements,F((kt=>{const Nt=/^(~)?(.+)$/;return je(Ne(kt,","),wt=>{const Rt=Nt.exec(wt);if(Rt){const fe="~"===Rt[1];return[{inline:fe,cloneName:fe?"span":"div",name:Rt[2]}]}return[]})})(null!=ot?ot:""),({inline:kt,name:Nt,cloneName:wt})=>{if(o[Nt]=o[wt],a[Nt]=wt,v[Nt.toUpperCase()]={},v[Nt]={},kt||(x[Nt.toUpperCase()]={},x[Nt]={}),!n[Nt]){let Rt=n[wt];Rt=dc({},Rt),delete Rt.removeEmptyAttrs,delete Rt.removeEmpty,n[Nt]=Rt}at(o,(Rt,fe)=>{Rt[wt]&&(o[fe]=Rt=dc({},o[fe]),Rt[Nt]=Rt[wt])})})},B=ot=>{F((kt=>{const Nt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return je(Ne(kt,","),wt=>{const Rt=Nt.exec(wt);if(Rt){const fe=Rt[1];return[{operation:fe?(St=fe,"-"===St?"remove":"add"):"replace",name:Rt[2],validChildren:Ne(Rt[3],"|")}]}var St;return[]})})(null!=ot?ot:""),({operation:kt,name:Nt,validChildren:wt})=>{const Rt="replace"===kt?{"#comment":{}}:o[Nt];F(wt,fe=>{"remove"===kt?delete Rt[fe]:Rt[fe]={}}),o[Nt]=Rt})},I=ot=>{const kt=n[ot];if(kt)return kt;let Nt=r.length;for(;Nt--;){const wt=r[Nt];if(wt.pattern.test(ot))return wt}};t.valid_elements?(E(t.valid_elements),Tn(d,(ot,kt)=>{o[kt]=ot.children})):(Tn(d,(ot,kt)=>{n[kt]={attributes:ot.attributes,attributesOrder:ot.attributesOrder},o[kt]=ot.children}),Tn(Ne("strong/b em/i"),ot=>{const kt=Ne(ot,"/");n[kt[1]].outputName=kt[0]}),Tn(N,(ot,kt)=>{n[kt]&&(t.padd_empty_block_inline_children&&(n[kt].paddInEmptyBlock=!0),n[kt].removeEmpty=!0)}),Tn(Ne("ol ul blockquote a table tbody"),ot=>{n[ot]&&(n[ot].removeEmpty=!0)}),Tn(Ne("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ot=>{n[ot]&&(n[ot].paddEmpty=!0)}),Tn(Ne("span"),ot=>{n[ot].removeEmptyAttrs=!0})),delete n.svg,R(t.custom_elements),B(t.valid_children),P(t.extended_valid_elements),B("+ol[ul|ol],+ul[ul|ol]"),Tn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ot,kt)=>{n[kt]&&(n[kt].parentsRequired=Ne(ot))}),t.invalid_elements&&Tn(Ep(t.invalid_elements),ot=>{n[ot]&&delete n[ot]}),I("span")||P("span[!data-mce-type|*]");const G=Y(c),V=Y(u),dt=Y(m),rt=Y(g),ft=Y(x),ct=Y(w),X=Y(N),tt=Y(Object.seal(h)),yt=Y(f),S=Y(v),A=Y(y),U=Y(p),z=Y(T),j=Y(O),et=Y(Object.seal(s)),mt=(ot,kt)=>{const Nt=I(ot);if(Nt){if(!kt)return!0;{if(Nt.attributes[kt])return!0;const wt=Nt.attributePatterns;if(wt){let Rt=wt.length;for(;Rt--;)if(wt[Rt].pattern.test(kt))return!0}}}return!1},Ct=ot=>_t(ft(),ot),gt=ot=>!we(ot,"#")&&mt(ot)&&!Ct(ot),Ut=Y(a);return{type:l,children:o,elements:n,getValidStyles:G,getValidClasses:dt,getBlockElements:ft,getInvalidStyles:V,getVoidElements:tt,getTextBlockElements:ct,getTextInlineElements:X,getBoolAttrs:rt,getElementRule:I,getSelfClosingElements:yt,getNonEmptyElements:S,getMoveCaretBeforeOnEnterElements:A,getWhitespaceElements:U,getTransparentElements:z,getSpecialElements:et,isValidChild:(ot,kt)=>{const Nt=o[ot.toLowerCase()];return!(!Nt||!Nt[kt.toLowerCase()])},isValid:mt,isBlock:Ct,isInline:gt,isWrapper:ot=>_t(j(),ot)||gt(ot),getCustomElements:Ut,addValidElements:P,setValidElements:E,addCustomElements:R,addValidChildren:B}},uc=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},qE=t=>{return{value:(n=uc(t.red)+uc(t.green)+uc(t.blue),eg(n,"#").toUpperCase())};var n},WE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,KE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Np=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Rp=(t,e,n,o)=>{const r=parseInt(t,10),a=parseInt(e,10),s=parseInt(n,10),i=parseFloat(o);return Np(r,a,s,i)},Ap=t=>{if("transparent"===t)return C.some(Np(0,0,0,0));const e=WE.exec(t);if(null!==e)return C.some(Rp(e[1],e[2],e[3],"1"));const n=KE.exec(t);return null!==n?C.some(Rp(n[1],n[2],n[3],n[4])):C.none()},YE=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,as=t=>Ap(t).map(qE).map(e=>"#"+e.value).getOr(t),mc=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,a={};let s,i;e&&(s=e.getValidStyles(),i=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)a[d[u]]="\ufeff"+u,a["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(P,E,R)=>{const B=m[P+"-top"+E];if(!B)return;const I=m[P+"-right"+E];if(!I)return;const G=m[P+"-bottom"+E];if(!G)return;const V=m[P+"-left"+E];if(!V)return;const dt=[B,I,G,V];let rt=dt.length-1;for(;rt--&&dt[rt]===dt[rt+1];);rt>-1&&R||(m[P+E]=-1===rt?dt[0]:dt.join(" "),delete m[P+"-top"+E],delete m[P+"-right"+E],delete m[P+"-bottom"+E],delete m[P+"-left"+E])},b=P=>{const E=m[P];if(!E)return;const R=E.indexOf(",")>-1?[E]:E.split(" ");let B=R.length;for(;B--;)if(R[B]!==R[0])return!1;return m[P]=R[0],!0},v=P=>(p=!0,a[P]),y=(P,E)=>(p&&(P=P.replace(/\uFEFF[0-9]/g,R=>a[R])),E||(P=P.replace(/\\([\'\";:])/g,"$1")),P),_=P=>String.fromCharCode(parseInt(P.slice(1),16)),w=P=>P.replace(/\\[0-9a-f]+/gi,_),x=(P,E,R,B,I,G)=>{if(I=I||G)return"'"+(I=y(I)).replace(/\'/g,"\\'")+"'";if(E=y(E||R||B||""),!t.allow_script_urls){const V=E.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(V)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(V))return""}return f&&(E=f.call(h,E,"style")),"url('"+E.replace(/\'/g,"\\'")+"')"};if(u){let P;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,E=>E.replace(/[;:]/g,v));P=o.exec(u);){o.lastIndex=P.index+P[0].length;let E=P[1].replace(r,"").toLowerCase(),R=P[2].replace(r,"");if(E&&R){if(E=w(E),R=w(R),-1!==E.indexOf("\ufeff")||-1!==E.indexOf('"')||!t.allow_script_urls&&("behavior"===E||/expression\s*\(|\/\*|\*\//.test(R)))continue;"font-weight"===E&&"700"===R?R="bold":"color"!==E&&"background-color"!==E||(R=R.toLowerCase()),it(t.force_hex_color)&&"off"!==t.force_hex_color&&Ap(R).each(B=>{"always"!==t.force_hex_color&&1!==B.alpha||(R=as(YE(B)))}),R=R.replace(n,x),m[E]=p?y(R,!0):R}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),T="border-style",O="border-color",b(N="border-width")&&b(T)&&b(O)&&(m.border=m[N]+" "+m[T]+" "+m[O],delete m[N],delete m[T],delete m[O]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var N,T,O;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const _=b[v],w=u[_];w&&(p+=(p.length>0?" ":"")+_+": "+w+";")}};return m&&s?(f("*",s),f(m,s)):at(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},GE={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Tp=(t,e)=>{const n=null!=e?e:{};for(const o in t)_t(GE,o)||(n[o]=t[o]);return W(t.composedPath)&&(n.composedPath=()=>t.composedPath()),W(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),W(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},fc=(t,e,n,o)=>{var r;const a=Tp(e,o);return a.type=t,ne(a.target)&&(a.target=null!==(r=a.srcElement)&&void 0!==r?r:n),(ne((s=e).preventDefault)||(i=s)instanceof Event||Bt(i.initEvent))&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=Zt,Bt(e.preventDefault)&&e.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=Zt,Bt(e.stopPropagation)&&e.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=Zt,a.stopPropagation()},(s=>s.isDefaultPrevented===Zt||s.isDefaultPrevented===Ht)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?Zt:Ht,a.isPropagationStopped=!0===a.cancelBubble?Zt:Ht,a.isImmediatePropagationStopped=Ht)),a;var s,i},XE=/^(?:mouse|contextmenu)|click/,gc=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},$i=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},ss=(t,e)=>{const n=fc(t.type,t,document,e);if(W(o=t)&&XE.test(o.type)&&ge(t.pageX)&&!ge(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,a=o.body,s=n;s.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),s.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}var o;return n},QE=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const a=()=>{$i(t,"DOMContentLoaded",a),$i(t,"load",a),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?a():gc(t,"DOMContentLoaded",a),n.domLoaded||gc(t,"load",a)};class fr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const a=this;let s;const i=window,l=m=>{a.executeHandlers(ss(m||i.event),d)};if(!e||H(e)||Ao(e))return o;let d;e[a.expando]?d=e[a.expando]:(d=a.count++,e[a.expando]=d,a.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),a.domLoaded&&"ready"===m&&"complete"===e.readyState?o.call(r,ss({type:m})):(a.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=ss(g||i.event);b.type="focus"===b.type?"focusin":"focusout",a.executeHandlers(b,d)}),s=a.events[d][m],s?"ready"===m&&a.domLoaded?o(ss({type:m})):s.push({func:o,scope:r}):(a.events[d][m]=s=[{func:o,scope:r}],s.fakeName=h,s.capture=f,s.nativeHandler=p,"ready"===m?QE(e,p,a):gc(e,h||m,p,f)))}return e=s=null,o}unbind(e,n,o){if(!e||H(e)||Ao(e))return this;const r=e[this.expando];if(r){let a=this.events[r];if(n){const s=n.split(" ");let i=s.length;for(;i--;){const l=s[i],d=a[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,a[l]=f}}o&&0!==d.length||(delete a[l],$i(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else at(a,(s,i)=>{$i(e,s.fakeName||i,s.nativeHandler,s.capture)}),a={};for(const s in a)if(_t(a,s))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||H(e)||Ao(e))return this;const r=ss({type:n,target:e},o);do{const a=e[this.expando];a&&this.executeHandlers(r,a),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||H(e)||Ao(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let a=0,s=r.length;a<s;a++){const i=r[a];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}fr.Event=new fr;const pc=$.each,JE=$.grep,hc="data-mce-style",ZE=$.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),is=(t,e,n)=>{ne(n)||""===n?xe(t,e):_e(t,e,n)},Op=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),na=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const a=r.nodeType;(!e||!H(r)||a!==o&&r.data.length)&&(n++,o=a)}return n},Bp=(t,e)=>{const n=Ge(e,"style"),o=t.serialize(t.parse(n),Tt(e));is(e,hc,o)},Pp=(t,e,n)=>{const o=Op(e);var r,a;ne(n)||""===n?Hg(t,o):zg(t,o,(a=o,Je(r=n)?_t(ZE,a)?r+"":r+"px":r))},jt=(t,e={})=>{const n={},o=window,r={};let a=0;const s=bp.forElement(k(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Po({}),d=mc({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,force_hex_color:e.force_hex_color},e.schema),c=e.ownEvents?new fr:fr.Event,u=l.getBlockElements(),m=S=>S&&t&&it(S)?t.getElementById(S):S,p=S=>{const A=m(S);return W(A)?k(A):null},f=(S,A,U="")=>{let z;const j=p(S);if(W(j)&&Ye(j)){const et=yt[A];z=et&&et.get?et.get(j.dom,A):Ge(j,A)}return W(z)?z:U},h=S=>{const A=m(S);return ne(A)?[]:A.attributes},g=(S,A,U)=>{T(S,z=>{if(nt(z)){const j=k(z),et=""===U?null:U,mt=Ge(j,A),Ct=yt[A];Ct&&Ct.set?Ct.set(j.dom,et,A):is(j,A,et),mt!==et&&e.onSetAttrib&&e.onSetAttrib({attrElm:j.dom,attrName:A,attrValue:et})}})},b=()=>e.root_element||t.body,v=(S,A)=>((U,z,j)=>{let et=0,mt=0;const Ct=U.ownerDocument;if(j=j||U,z){if(j===U&&z.getBoundingClientRect&&"static"===Hn(k(U),"position")){const Ut=z.getBoundingClientRect();return et=Ut.left+(Ct.documentElement.scrollLeft||U.scrollLeft)-Ct.documentElement.clientLeft,mt=Ut.top+(Ct.documentElement.scrollTop||U.scrollTop)-Ct.documentElement.clientTop,{x:et,y:mt}}let gt=z;for(;gt&&gt!==j&&gt.nodeType&&!pp(gt,j);)et+=gt.offsetLeft||0,mt+=gt.offsetTop||0,gt=gt.offsetParent;for(gt=z.parentNode;gt&&gt!==j&&gt.nodeType&&!pp(gt,j);)et-=gt.scrollLeft||0,mt-=gt.scrollTop||0,gt=gt.parentNode;mt+=(Ut=k(z),UE.isFirefox()&&"table"===Tt(Ut)?gp(Ee(Ut)).filter(ot=>"caption"===Tt(ot)).bind(ot=>gp(Dg(ot)).map(kt=>kt.dom.offsetTop<=ot.dom.offsetTop?-ot.dom.offsetHeight:0)).getOr(0):0)}var Ut;return{x:et,y:mt}})(t.body,m(S),A),y=(S,A,U)=>{const z=m(S);var j;if(!ne(z)&&(po(z)||nt(j=z)&&"http://www.w3.org/2000/svg"===j.namespaceURI))return U?Hn(k(z),Op(A)):("float"===(A=A.replace(/-(\D)/g,(et,mt)=>mt.toUpperCase()))&&(A="cssFloat"),z.style?z.style[A]:void 0)},_=S=>{const A=m(S);if(!A)return{w:0,h:0};let U=y(A,"width"),z=y(A,"height");return U&&-1!==U.indexOf("px")||(U="0"),z&&-1!==z.indexOf("px")||(z="0"),{w:parseInt(U,10)||A.offsetWidth||A.clientWidth,h:parseInt(z,10)||A.offsetHeight||A.clientHeight}},w=(S,A)=>{if(!S)return!1;const U=Jt(S)?S:[S];return Xt(U,z=>Rn(k(z),A))},x=(S,A,U,z)=>{const j=[];let et=m(S);z=void 0===z;const mt=U||("BODY"!==b().nodeName?b().parentNode:null);if(it(A))if("*"===A)A=nt;else{const Ct=A;A=gt=>w(gt,Ct)}for(;et&&!(et===mt||ne(et.nodeType)||Za(et)||Vd(et));){if(!A||A(et)){if(!z)return[et];j.push(et)}et=et.parentNode}return z?j:null},N=(S,A,U)=>{let z=A;if(S){it(A)&&(z=j=>w(j,A));for(let j=S[U];j;j=j[U])if(Bt(z)&&z(j))return j}return null},T=function(S,A,U){const z=null!=U?U:this;if(Jt(S)){const j=[];return pc(S,(et,mt)=>{const Ct=m(et);Ct&&j.push(A.call(z,Ct,mt))}),j}{const j=m(S);return!!j&&A.call(z,j)}},O=(S,A)=>{T(S,U=>{at(A,(z,j)=>{g(U,j,z)})})},P=(S,A)=>{T(S,U=>{const z=k(U);Ri(z,A)})},E=(S,A,U,z,j)=>T(S,et=>{const mt=it(A)?t.createElement(A):A;return W(U)&&O(mt,U),z&&(!it(z)&&z.nodeType?mt.appendChild(z):it(z)&&P(mt,z)),j?mt:et.appendChild(mt)}),R=(S,A,U)=>E(t.createElement(S),S,A,U,!0),B=mr.encodeAllRaw,I=(S,A)=>T(S,U=>{const z=k(U);return A&&F(Ee(z),j=>{tn(j)&&0===j.dom.length?Vt(j):qe(z,j)}),Vt(z),z.dom}),G=(S,A,U)=>{T(S,z=>{if(nt(z)){const j=k(z),et=A.split(" ");F(et,mt=>{var Ct,gt,ot,kt;W(U)?(U?Kr:Va)(j,mt):(gt=mt,$a(Ct=j)?Ct.dom.classList.toggle(gt):(kt=gt,Mt(kg(ot=Ct),kt)?Ng(ot,kt):Sg(ot,kt)),Rg(Ct))})}})},V=(S,A,U)=>T(A,z=>{var j;const et=Jt(A)?S.cloneNode(!0):S;return U&&pc(JE(z.childNodes),mt=>{et.appendChild(mt)}),null===(j=z.parentNode)||void 0===j||j.replaceChild(et,z),z}),dt=S=>{if(nt(S)){const A="a"===S.nodeName.toLowerCase()&&!f(S,"href")&&f(S,"id");if(f(S,"name")||f(S,"data-mce-bookmark")||A)return!0}return!1},rt=()=>t.createRange(),ft=(S,A,U,z)=>{if(Jt(S)){let j=S.length;const et=[];for(;j--;)et[j]=ft(S[j],A,U,z);return et}return!e.collect||S!==t&&S!==o||i.push([S,A,U,z]),c.bind(S,A,U,z||tt)},ct=(S,A,U)=>{if(Jt(S)){let z=S.length;const j=[];for(;z--;)j[z]=ct(S[z],A,U);return j}if(i.length>0&&(S===t||S===o)){let z=i.length;for(;z--;){const[j,et,mt]=i[z];S!==j||A&&A!==et||U&&U!==mt||c.unbind(j,et,mt)}}return c.unbind(S,A,U)},X=S=>{if(S&&po(S)){const A=S.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==S.contentEditable?S.contentEditable:null}return null},tt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:i,styles:d,schema:l,events:c,isBlock:S=>it(S)?_t(u,S):nt(S)&&(_t(u,S.nodeName)||cr(l,S)),root:null,clone:(S,A)=>S.cloneNode(A),getRoot:b,getViewPort:S=>{const A=Gg(S);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:S=>{const A=m(S),U=v(A),z=_(A);return{x:U.x,y:U.y,w:z.w,h:z.h}},getSize:_,getParent:(S,A,U)=>{const z=x(S,A,U,!1);return z&&z.length>0?z[0]:null},getParents:x,get:m,getNext:(S,A)=>N(S,A,"nextSibling"),getPrev:(S,A)=>N(S,A,"previousSibling"),select:(S,A)=>{var U,z;const j=null!==(z=null!==(U=m(A))&&void 0!==U?U:e.root_element)&&void 0!==z?z:t;return Bt(j.querySelectorAll)?bt(j.querySelectorAll(S)):[]},is:w,add:E,create:R,createHTML:(S,A,U="")=>{let z="<"+S;for(const j in A)$r(A,j)&&(z+=" "+j+'="'+B(A[j])+'"');return ja(U)&&_t(l.getVoidElements(),S)?z+" />":z+">"+U+"</"+S+">"},createFragment:S=>{const A=t.createElement("div"),U=t.createDocumentFragment();let z;for(U.appendChild(A),S&&(A.innerHTML=S);z=A.firstChild;)U.appendChild(z);return U.removeChild(A),U},remove:I,setStyle:(S,A,U)=>{T(S,z=>{const j=k(z);Pp(j,A,U),e.update_styles&&Bp(d,j)})},getStyle:y,setStyles:(S,A)=>{T(S,U=>{const z=k(U);at(A,(j,et)=>{Pp(z,et,j)}),e.update_styles&&Bp(d,z)})},removeAllAttribs:S=>T(S,A=>{const U=A.attributes;for(let z=U.length-1;z>=0;z--)A.removeAttributeNode(U.item(z))}),setAttrib:g,setAttribs:O,getAttrib:f,getPos:v,parseStyle:S=>d.parse(S),serializeStyle:(S,A)=>d.serialize(S,A),addStyle:S=>{if(tt!==jt.DOM&&t===document){if(n[S])return;n[S]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const U=t.head;U.firstChild?U.insertBefore(A,U.firstChild):U.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=S:A.appendChild(t.createTextNode(S))},loadCSS:S=>{S||(S=""),F(S.split(","),A=>{r[A]=!0,s.load(A).catch(xt)})},addClass:(S,A)=>{G(S,A,!0)},removeClass:(S,A)=>{G(S,A,!1)},hasClass:(S,A)=>{const U=p(S),z=A.split(" ");return W(U)&&Nn(z,j=>Bd(U,j))},toggleClass:G,show:S=>{T(S,A=>Hg(k(A),"display"))},hide:S=>{T(S,A=>zg(k(A),"display","none"))},isHidden:S=>{const A=p(S);return W(A)&&qr(Ni(A,"display"),"none")},uniqueId:S=>(S||"mce_")+a++,setHTML:P,getOuterHTML:S=>{const A=p(S);return W(A)?nt(A.dom)?A.dom.outerHTML:(U=>{const z=pe("div"),j=k(U.dom.cloneNode(!0));return ie(z,j),Vg(z)})(A):""},setOuterHTML:(S,A)=>{T(S,U=>{nt(U)&&(U.outerHTML=A)})},decode:mr.decode,encode:B,insertAfter:(S,A)=>{const U=m(A);return T(S,z=>{const j=null==U?void 0:U.parentNode,et=null==U?void 0:U.nextSibling;return j&&(et?j.insertBefore(z,et):j.appendChild(z)),z})},replace:V,rename:(S,A)=>{if(S.nodeName!==A.toUpperCase()){const U=R(A);return pc(h(S),z=>{g(U,z.nodeName,f(S,z.nodeName))}),V(U,S,!0),U}return S},findCommonAncestor:(S,A)=>{let U=S;for(;U;){let z=A;for(;z&&U!==z;)z=z.parentNode;if(U===z)break;U=U.parentNode}return!U&&S.ownerDocument?S.ownerDocument.documentElement:U},run:T,getAttribs:h,isEmpty:(S,A,U)=>{let z=0;if(dt(S))return!1;const j=S.firstChild;if(j){const et=new ue(j,S),mt=l?l.getWhitespaceElements():{},Ct=A||(l?l.getNonEmptyElements():null);let gt=j;do{if(nt(gt)){const Ut=gt.getAttribute("data-mce-bogus");if(Ut){gt=et.next("all"===Ut);continue}const ot=gt.nodeName.toLowerCase();if(Ct&&Ct[ot]){if("br"===ot){z++,gt=et.next();continue}return!1}if(dt(gt))return!1}if(Ao(gt)||H(gt)&&!Bo(gt.data)&&(null==U||!U.includeZwsp||!TE(gt.data))||H(gt)&&gt.parentNode&&mt[gt.parentNode.nodeName]&&Bo(gt.data))return!1;gt=et.next()}while(gt)}return z<=1},createRng:rt,nodeIndex:na,split:(S,A,U)=>{let z,j,et=rt();if(S&&A&&S.parentNode&&A.parentNode){const mt=S.parentNode;return et.setStart(mt,na(S)),et.setEnd(A.parentNode,na(A)),z=et.extractContents(),et=rt(),et.setStart(A.parentNode,na(A)+1),et.setEnd(mt,na(S)+1),j=et.extractContents(),mt.insertBefore(sc(tt,z,l),S),mt.insertBefore(U||A,S),mt.insertBefore(sc(tt,j,l),S),I(S),U||A}},bind:ft,unbind:ct,fire:(S,A,U)=>c.dispatch(S,A,U),dispatch:(S,A,U)=>c.dispatch(S,A,U),getContentEditable:X,getContentEditableParent:S=>{const A=b();let U=null;for(let z=S;z&&z!==A&&(U=X(z),null===U);z=z.parentNode);return U},isEditable:S=>{if(W(S)){const A=nt(S)?S:S.parentElement;return W(A)&&po(A)&&rr(k(A))}return!1},destroy:()=>{if(i.length>0){let S=i.length;for(;S--;){const[A,U,z]=i[S];c.unbind(A,U,z)}}at(r,(S,A)=>{s.unload(A),delete r[A]})},isChildOf:(S,A)=>S===A||A.contains(S),dumpRng:S=>"startContainer: "+S.startContainer.nodeName+", startOffset: "+S.startOffset+", endContainer: "+S.endContainer.nodeName+", endOffset: "+S.endOffset},yt=((S,A,U)=>{const z=A.keep_values,et={style:{set:(mt,Ct)=>{const gt=k(mt);z&&is(gt,hc,Ct),xe(gt,"style"),it(Ct)&&Si(gt,S.parse(Ct))},get:mt=>{const Ct=k(mt),gt=Ge(Ct,hc)||Ge(Ct,"style");return S.serialize(S.parse(gt),Tt(Ct))}}};return z&&(et.href=et.src={set:(mt,Ct,gt)=>{const Ut=k(mt);Bt(A.url_converter)&&W(Ct)&&(Ct=A.url_converter.call(A.url_converter_scope||U(),String(Ct),gt,mt)),is(Ut,"data-mce-"+gt,Ct),is(Ut,gt,Ct)},get:(mt,Ct)=>{const gt=k(mt);return Ge(gt,"data-mce-"+Ct)||Ge(gt,Ct)}}),et})(d,e,Y(tt));return tt};jt.DOM=jt(document),jt.nodeIndex=na;const tk=jt.DOM;class bo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=tk;let a;const s=()=>{r.remove(i),a&&(a.onerror=a.onload=a=null)},i=r.uniqueId();a=document.createElement("script"),a.id=i,a.type="text/javascript",a.src=$._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{s(),n()},a.onerror=()=>{s(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{$t(n.scriptLoadedCallbacks,d).each(c=>{F(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=vt(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(je(d,({reason:c})=>Jt(c)?c:[c])):Promise.resolve()},a=l=>Promise.allSettled(At(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],a(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),s=l=>(n.loading=!0,a(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(No),r(d)})),i=Gf(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(l,d)})}):s(i)}}bo.ScriptLoader=new bo;const ve=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},ls={},bc=ve("en"),Dp=()=>$t(ls,bc.get()),On={getData:()=>It(ls,t=>({...t})),setCode:t=>{t&&bc.set(t)},getCode:()=>bc.get(),add:(t,e)=>{let n=ls[t];n||(ls[t]=n={});const o=At(Et(e),r=>r.toLowerCase());at(e,(r,a)=>{const s=a.toLowerCase();s!==a&&((i,l)=>{const d=i.indexOf(l);return-1!==d&&i.indexOf(l,d+1)>d})(o,s)?(_t(e,s)||(n[s]=r),n[a]=r):n[s]=r})},translate:t=>{const e=Dp().getOr({}),n=i=>Bt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return _t(e,l)?n(e[l]):$t(e,l.toLowerCase()).map(n).getOr(l)},a=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(Se(s=t)&&_t(s,"raw"))return n(t.raw);var s,i;if(Jt(i=t)&&i.length>1){const i=t.slice(1);return a(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>_t(i,d)?n(i[d]):l))}return a(r(t))},isRtl:()=>Dp().bind(t=>$t(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>_t(ls,t)},Ie=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=vt(o,u=>u.name===l&&u.state===d);F(c,u=>u.resolve())},a=l=>_t(e,l),s=(l,d)=>{const c=On.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||bo.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&_t(n,l)||"loaded"===d&&a(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==Ie.languageLoad&&(a(l)?s(l,d):i(l,"loaded").then(()=>s(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>it(d)?it(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=it(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=Ie.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():bo.ScriptLoader.add(c).then(u)},waitFor:i}};Ie.languageLoad=!0,Ie.baseURL="",Ie.PluginManager=Ie(),Ie.ThemeManager=Ie(),Ie.ModelManager=Ie();const ek=t=>{const e=ve(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},Do=()=>{const t=(e=>{const n=ve(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(xt);return{...t,on:e=>t.get().each(e)}},Vi=(t,e)=>{let n=null;return{cancel:()=>{Te(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Te(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},vc=(t,e)=>{let n=null;const o=()=>{Te(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},ds=Y("mce-annotation"),gr=Y("data-mce-annotation"),oa=Y("data-mce-annotation-uid"),cs=Y("data-mce-annotation-active"),us=Y("data-mce-annotation-classes"),ms=Y("data-mce-annotation-attrs"),Lp=t=>e=>Dt(e,t),Mp=(t,e)=>{const n=t.selection.getRng(),o=k(n.startContainer),r=k(t.getBody()),a=e.fold(()=>"."+ds(),i=>`[${gr()}="${i}"]`),s=Gr(o,n.startOffset).getOr(o);return or(s,a,Lp(r)).bind(i=>lo(i,`${oa()}`).bind(l=>lo(i,`${gr()}`).map(d=>{const c=Fp(t,l);return{uid:l,name:d,elements:c}})))},Ip=(t,e)=>Ha(t,"data-mce-bogus")||Qg(t,'[data-mce-bogus="all"]',Lp(e)),Fp=(t,e)=>{const n=k(t.getBody()),o=De(n,`[${oa()}="${e}"]`);return vt(o,r=>!Ip(r,n))},Up=(t,e)=>{const n=k(t.getBody()),o=De(n,`[${gr()}="${e}"]`),r={};return F(o,a=>{if(!Ip(a,n)){const s=Ge(a,oa()),i=$t(r,s).getOr([]);r[s]=i.concat([a])}}),r};let zp=0;const fs=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return zp++,t+"_"+n+zp+String(e)},jp=(t,e)=>k(t.dom.cloneNode(e)),pr=t=>jp(t,!1),Hp=t=>jp(t,!0),$p=(t,e,n=Ht)=>{const o=new ue(t,e),r=a=>{let s;do{s=o[a]()}while(s&&!H(s)&&!n(s));return C.from(s).filter(H)};return{current:()=>C.from(o.current()).filter(H),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},hr=(t,e)=>{const n=e||(r=>t.isBlock(r)||te(r)||qt(r)),o=(r,a,s,i)=>{if(H(r)){const l=i(r,a,r.data);if(-1!==l)return C.some({container:r,offset:l})}return s().bind(l=>o(l.container,l.offset,s,i))};return{backwards:(r,a,s,i)=>{const l=$p(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>l.prev().map(d=>({container:d,offset:d.length})),s).getOrNull()},forwards:(r,a,s,i)=>{const l=$p(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>l.next().map(d=>({container:d,offset:0})),s).getOrNull()}}},ra=Math.round,br=t=>t?{left:ra(t.left),top:ra(t.top),bottom:ra(t.bottom),right:ra(t.right),width:ra(t.width),height:ra(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Vp=(t,e)=>(t=br(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),qp=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,gs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&qp(e.top-t.bottom,t,e)},ps=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&qp(e.bottom-t.top,t,e),Wp=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},qi=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Lo=(t,e)=>{if(nt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(s=n.length-1,Math.min(Math.max(e,0),s))]}var s;return t},nk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Kp=t=>it(t)&&t.charCodeAt(0)>=768&&nk.test(t),Yp=nt,ok=wn,Gp=Oi("display","block table"),rk=Oi("float","left right"),hs=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Yp,ok,So(rk)),ak=So(Oi("white-space","pre pre-line pre-wrap")),bs=H,yc=te,Xp=jt.nodeIndex,Wi=(t,e)=>e<0&&nt(t)&&t.hasChildNodes()?void 0:Lo(t,e),Cc=t=>t?t.createRange():jt.DOM.createRng(),wc=t=>it(t)&&/[\r\n\t ]/.test(t),Qp=t=>!!t.setStart&&!!t.setEnd,_c=t=>{const e=t.startContainer,n=t.startOffset;if(wc(t.toString())&&ak(e.parentNode)&&H(e)){const o=e.data;if(wc(o[n-1])||wc(o[n+1]))return!0}return!1},Jp=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Mo=t=>{var e;let n;const o=t.getClientRects();return n=br(o.length>0?o[0]:t.getBoundingClientRect()),!Qp(t)&&yc(t)&&Jp(n)?(r=>{const a=r.ownerDocument,s=Cc(a),i=a.createTextNode(he),l=r.parentNode;l.insertBefore(i,r),s.setStart(i,0),s.setEnd(i,1);const d=br(s.getBoundingClientRect());return l.removeChild(i),d})(t):Jp(n)&&Qp(t)&&null!==(e=(r=>{const s=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===s&&H(s)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(s),Mo(d)}return null})(t))&&void 0!==e?e:n},vr=(t,e)=>{const n=Vp(t,e);return n.width=1,n.right=n.left+1,n},L=(t,e,n)=>{const o=()=>(n||(n=(r=>{const a=[],s=c=>{var u,m;0!==c.height&&(a.length>0&&(u=c).left===(m=a[a.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||a.push(c))},i=(c,u)=>{const m=Cc(c.ownerDocument);if(u<c.data.length){if(Kp(c.data[u]))return;if(Kp(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!_c(m)))return void s(vr(Mo(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),_c(m)||s(vr(Mo(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),_c(m)||s(vr(Mo(m),!0)))},l=r.container(),d=r.offset();if(bs(l))return i(l,d),a;if(Yp(l))if(r.isAtEnd()){const c=Wi(l,d);bs(c)&&i(c,c.data.length),hs(c)&&!yc(c)&&s(vr(Mo(c),!1))}else{const c=Wi(l,d);if(bs(c)&&i(c,0),hs(c)&&r.isAtEnd())return s(vr(Mo(c),!1)),a;const u=Wi(r.container(),r.offset()-1);hs(u)&&!yc(u)&&(Gp(u)||Gp(c)||!hs(c))&&s(vr(Mo(u),!1)),hs(c)&&s(vr(Mo(c),!0))}return a})(L(t,e))),n);return{container:Y(t),offset:Y(e),toRange:()=>{const r=Cc(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(bs(t),0===e),isAtEnd:()=>bs(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Wi(t,r?e-1:e)}};L.fromRangeStart=t=>L(t.startContainer,t.startOffset),L.fromRangeEnd=t=>L(t.endContainer,t.endOffset),L.after=t=>L(t.parentNode,Xp(t)+1),L.before=t=>L(t.parentNode,Xp(t)),L.isAbove=(t,e)=>Pe(K(e.getClientRects()),lt(t.getClientRects()),gs).getOr(!1),L.isBelow=(t,e)=>Pe(lt(e.getClientRects()),K(t.getClientRects()),ps).getOr(!1),L.isAtStart=t=>!!t&&t.isAtStart(),L.isAtEnd=t=>!!t&&t.isAtEnd(),L.isTextPosition=t=>!!t&&H(t.container()),L.isElementPosition=t=>!L.isTextPosition(t);const Ki=(t,e)=>{H(e)&&0===e.data.length&&t.remove(e)},xc=(t,e,n)=>{var o,a;Vd(n)?((o,r,a)=>{const s=C.from(a.firstChild),i=C.from(a.lastChild);r.insertNode(a),s.each(l=>Ki(o,l.previousSibling)),i.each(l=>Ki(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(a=n),Ki(o,a.previousSibling),Ki(o,a.nextSibling))},Bn=H,Zp=ir,th=jt.nodeIndex,eh=t=>{const e=t.parentNode;return Zp(e)?eh(e):e},Ec=t=>t?Ci(t.childNodes,(e,n)=>(Zp(n)&&"BR"!==n.nodeName?e=e.concat(Ec(n)):e.push(n),e),[]):[],nh=t=>e=>t===e,oh=t=>(Bn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Ec(eh(e)),o=Qf(n,nh(e),e),n=n.slice(0,o+1);const r=Ci(n,(a,s,i)=>(Bn(s)&&Bn(n[i-1])&&a++,a),0);return n=Ua(n,An([e.nodeName])),o=Qf(n,nh(e),e),o-r})(t)+"]",rh=(t,e)=>{let n,o=[],r=e.container(),a=e.offset();if(Bn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&Bn(d);)l+=d.data.length;return l})(r,a);else{const i=r.childNodes;a>=i.length?(n="after",a=i.length-1):n="before",r=i[a]}o.push(oh(r));let s=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return s=Ua(s,So(ir)),o=o.concat(kd(s,i=>oh(i))),o.reverse().join("/")+","+n},ah=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",a=Ci(o,(s,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=Ec(d);return m=Ua(m,(p,f)=>!Bn(p)||!Bn(m[f-1])),m=Ua(m,An([c])),m[u]})(s,l[1],parseInt(l[2],10))):null},t);if(!a)return null;if(!Bn(a)&&a.parentNode){let s;return s="after"===r?th(a)+1:th(a),L(a.parentNode,s)}return((s,i)=>{let l=s,d=0;for(;Bn(l);){const c=l.data.length;if(i>=d&&i<=d+c){s=l,i-=d;break}if(!Bn(l.nextSibling)){s=l,i=c;break}d+=c,l=l.nextSibling}return Bn(s)&&i>s.data.length&&(i=s.data.length),L(s,i)})(a,parseInt(r,10))},Yi=qt,sh=(t,e,n,o,r)=>{const a=r?o.startContainer:o.endContainer;let s=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if(H(a))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&H(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,a,s):s);else{let d=0;const c=a.childNodes;s>=c.length&&c.length&&(d=1,s=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[s],n)+d)}for(let d=a;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},kc=(t,e,n)=>{let o=0;return $.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},ih=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(nt(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},lh=t=>(ih(t,!0),ih(t,!1),t),dh=(t,e)=>{if(nt(t)&&(t=Lo(t,e),Yi(t)))return t;if(en(t)){H(t)&&ea(t)&&(t=t.parentNode);let n=t.previousSibling;if(Yi(n)||(n=t.nextSibling,Yi(n)))return n}},ch=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||Yi(o)){const s=o.nodeName;return{name:s,index:kc(n.dom,s,o)}}const a=dh((s=r).startContainer,s.startOffset)||dh(s.endContainer,s.endOffset);var s;if(a){const s=a.tagName;return{name:s,index:kc(n.dom,s,a)}}return((s,i,l,d)=>{const c=i.dom,u=sh(c,s,l,d,!0),m=i.isForward(),p=rp(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:sh(c,s,l,d,!1),forward:m,...p}})(t,n,e,r)},uh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},mh=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),a=t.isCollapsed(),s=t.getNode(),i=s.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:kc(n,i,s)};const d=lh(o.cloneRange());if(!a){d.collapse(!1);const u=uh(n,r+"_end",e);xc(n,d,u)}o=lh(o),o.collapse(!0);const c=uh(n,r+"_start",e);return xc(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Sc=Z(ch,ce,!0),fh=t=>{const e=a=>a(t),n=Y(t),o=()=>r,r={tag:!0,inner:t,fold:(a,s)=>s(t),isValue:Zt,isError:Ht,map:a=>He.value(a(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:a=>{a(t)},toOptional:()=>C.some(t)};return r},gh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:Ht,isError:Zt,map:e,mapError:o=>He.error(o(t)),bind:e,exists:Ht,forall:Zt,getOr:ce,or:ce,getOrThunk:jr,orThunk:jr,getOrDie:La(String(t)),each:xt,toOptional:C.none};return n},He={value:fh,error:gh,fromOption:(t,e)=>t.fold(()=>gh(e),fh)},Vn=t=>{if(!Jt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return F(t,(o,r)=>{const a=Et(o);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],i=o[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!Jt(i))throw new Error("case arguments must be an array");e.push(s),n[s]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Et(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Nn(e,m=>Mt(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[s].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:s,params:l})}}}}),n};Vn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sk=t=>"inline-command"===t.type||"inline-format"===t.type,ik=t=>"block-command"===t.type||"block-format"===t.type,lk=t=>{const e=o=>He.error({message:o,pattern:t}),n=(o,r,a)=>{if(void 0!==t.format){let s;if(Jt(t.format)){if(!Nn(t.format,it))return e(o+" pattern has non-string items in the `format` array");s=t.format}else{if(!it(t.format))return e(o+" pattern has non-string `format` parameter");s=[t.format]}return He.value(r(s))}return void 0!==t.cmd?it(t.cmd)?He.value(a(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!Se(t))return e("Raw pattern is not an object");if(!it(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!it(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",a=>({type:"inline-format",start:o,end:r,format:a}),(a,s)=>({type:"inline-command",start:o,end:r,cmd:a,value:s}))}return void 0!==t.replacement?it(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):He.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},ph=t=>vt(t,ik),hh=t=>vt(t,sk),bh=t=>{const e=(n=>{const o=[],r=[];return F(n,a=>{a.fold(s=>{o.push(s)},s=>{r.push(s)})}),{errors:o,values:r}})(At(t,lk));return F(e.errors,n=>console.error(n.message,n.pattern)),e.values},Nc=Un().deviceType,dk=Nc.isTouch(),ck=jt.DOM,vh=t=>Eo(t,RegExp),J=t=>e=>e.options.get(t),Rc=t=>it(t)||Se(t),yh=(t,e="")=>n=>{const o=it(n);if(o){if(-1!==n.indexOf("=")){const r=(a=>{const s=a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(",");return Oe(s,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[Vr(c)]=Vr(u),i},{})})(n);return{value:$t(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},uk=J("iframe_attrs"),mk=J("doctype"),Ch=J("document_base_url"),fk=J("body_id"),gk=J("body_class"),wh=J("content_security_policy"),pk=J("br_in_pre"),Le=J("forced_root_block"),vs=J("forced_root_block_attrs"),hk=J("newline_behavior"),bk=J("br_newline_selector"),vk=J("no_newline_selector"),yk=J("keep_styles"),Ck=J("end_container_on_empty_block"),_h=J("automatic_uploads"),xh=J("images_reuse_filename"),wk=J("images_replace_blob_uris"),Eh=J("icons"),_k=J("icons_url"),xk=J("images_upload_url"),Ek=J("images_upload_base_path"),kk=J("images_upload_credentials"),Sk=J("images_upload_handler"),Nk=J("content_css_cors"),Ac=J("referrer_policy"),kh=J("language"),Rk=J("language_url"),Sh=J("indent_use_margin"),Ak=J("indentation"),Tk=J("content_css"),Ok=J("content_style"),Nh=J("font_css"),Bk=J("directionality"),Pk=J("inline_boundaries_selector"),Rh=J("object_resizing"),Dk=J("resize_img_proportional"),Lk=J("placeholder"),Ah=J("event_root"),Mk=J("service_message"),aa=J("theme"),Ik=J("theme_url"),Tc=J("model"),Fk=J("model_url"),ys=J("inline_boundaries"),Uk=J("formats"),zk=J("preview_styles"),jk=J("format_empty_lines"),Hk=J("format_noneditable_selector"),$k=J("custom_ui_selector"),Oc=J("inline"),Vk=J("hidden_input"),qk=J("submit_patch"),Wk=J("add_form_submit_trigger"),Kk=J("add_unload_trigger"),Yk=J("custom_undo_redo_levels"),Gk=J("disable_nodechange"),Th=J("readonly"),Xk=J("editable_root"),Oh=J("content_css_cors"),Gi=J("plugins"),Qk=J("external_plugins"),Jk=J("block_unsupported_drop"),Zk=J("visual"),tS=J("visual_table_class"),Bh=J("visual_anchor_class"),eS=J("iframe_aria_text"),nS=J("setup"),oS=J("init_instance_callback"),rS=J("urlconverter_callback"),aS=J("auto_focus"),sS=J("browser_spellcheck"),iS=J("protect"),lS=J("paste_block_drop"),Xi=J("paste_data_images"),dS=J("paste_preprocess"),cS=J("paste_postprocess"),uS=J("newdocument_content"),mS=J("paste_webkit_styles"),fS=J("paste_remove_styles_if_webkit"),gS=J("paste_merge_formats"),pS=J("smart_paste"),hS=J("paste_as_text"),bS=J("paste_tab_spaces"),vS=J("allow_html_data_urls"),yS=J("text_patterns"),CS=J("text_patterns_lookup"),Ph=J("noneditable_class"),wS=J("editable_class"),_S=J("noneditable_regexp"),xS=J("preserve_cdata"),ES=J("highlight_on_focus"),Bc=J("xss_sanitization"),kS=J("init_content_sync"),Dh=t=>$.explode(t.options.get("images_file_types")),SS=J("table_tab_navigation"),NS=J("details_initial_state"),RS=J("details_serialized_state"),AS=J("force_hex_color"),Pc=J("sandbox_iframes"),TS=nt,Lh=H,Mh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Ih=t=>{const e=Xe(t);return{count:t.length-e.length,text:e}},Fh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(be));)t.deleteData(e,1)},Uh=(t,e)=>(yr(t),e),yr=t=>{TS(t)&&en(t)&&(op(t)?t.removeAttribute("data-mce-caret"):Mh(t)),Lh(t)&&(Fh(t),0===t.data.length&&Mh(t))},BS=qt,PS=$n,DS=Bi,zh=(t,e,n)=>{const o=Vp(e.getBoundingClientRect(),n);let r,a;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,a=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,a=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=a,o.bottom+=a,o.width=1;let s=e.offsetWidth-e.clientWidth;return s>0&&(n&&(s*=-1),o.left+=s,o.right+=s),o},jh=()=>Ot.browser.isFirefox(),Cs=t=>BS(t)||PS(t),ws=t=>(Cs(t)||ho(t)&&jh())&&ki(k(t)).exists(rr),MS=Cn,Dc=qt,IS=$n,Hh=Oi("display","block table table-cell table-caption list-item"),$h=en,Vh=ea,FS=nt,US=H,zS=wn,sa=t=>t>0,Cr=t=>t<0,Qi=(t,e)=>{let n;for(;n=t(e);)if(!Vh(n))return n;return null},_s=(t,e,n,o,r)=>{const a=new ue(t,o),s=Dc(t)||Vh(t);let i;if(Cr(e)){if(s&&(i=Qi(a.prev.bind(a),!0),n(i)))return i;for(;i=Qi(a.prev.bind(a),r);)if(n(i))return i}if(sa(e)){if(s&&(i=Qi(a.next.bind(a),!0),n(i)))return i;for(;i=Qi(a.next.bind(a),r);)if(n(i))return i}return null},Io=(t,e)=>{for(;t&&t!==e;){if(Hh(t))return t;t=t.parentNode}return null},qn=(t,e,n)=>Io(t.container(),n)===Io(e.container(),n),Lc=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return FS(n)?C.from(n.childNodes[o+t]):C.none()},qh=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},jS=(t,e,n)=>Io(e,t)===Io(n,t),Wh=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let a=r[o];if(a&&$h(a)&&(a=a[o]),Dc(a)||IS(a)){if(jS(e,a,r))return a;break}if(zS(a))break;r=r.parentNode}return null},xs=Z(qh,!0),Es=Z(qh,!1),Mc=(t,e,n)=>{let o;const r=Z(Wh,!0,e),a=Z(Wh,!1,e),s=n.startContainer,i=n.startOffset;if(ea(s)){const l=US(s)?s.parentNode:s,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,ws(o)))return xs(o);if("after"===d&&(o=l.previousSibling,ws(o)))return Es(o)}if(!n.collapsed)return n;if(H(s)){if($h(s)){if(1===t){if(o=a(s),o)return xs(o);if(o=r(s),o)return Es(o)}if(-1===t){if(o=r(s),o)return Es(o);if(o=a(s),o)return xs(o)}return n}if(Ii(s)&&i>=s.data.length-1)return 1===t&&(o=a(s),o)?xs(o):n;if(Mi(s)&&i<=1)return-1===t&&(o=r(s),o)?Es(o):n;if(i===s.data.length)return o=a(s),o?xs(o):n;if(0===i)return o=r(s),o?Es(o):n}return n},Kh=(t,e)=>Lc(t?0:-1,e).filter(Dc),ks=(t,e,n)=>{const o=Mc(t,e,n);return-1===t?L.fromRangeStart(o):L.fromRangeEnd(o)},Ji=t=>C.from(t.getNode()).map(k),Ic=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Zi=(t,e)=>{const n=qn(t,e);return!(n||!te(t.getNode()))||n};var ye,t;(t=ye||(ye={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const HS=qt,Wn=H,Yh=nt,Fc=te,ia=wn,Gh=t=>{return sp(t)||!!Jd(e=t)&&!Oe(bt(e.getElementsByTagName("*")),(n,o)=>n||ap(o),!1);var e},tl=ip,Xh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Qh=(t,e)=>{if(sa(t)){if(ia(e.previousSibling)&&!Wn(e.previousSibling))return L.before(e);if(Wn(e))return L(e,0)}if(Cr(t)){if(ia(e.nextSibling)&&!Wn(e.nextSibling))return L.after(e);if(Wn(e))return L(e,e.data.length)}return Cr(t)?Fc(e)?L.before(e):L.after(e):L.before(e)},Uc=(t,e,n)=>{let o,r,a,s;if(!Yh(n)||!e)return null;if(e.isEqual(L.after(n))&&n.lastChild){if(s=L.after(n.lastChild),Cr(t)&&ia(n.lastChild)&&Yh(n.lastChild))return Fc(n.lastChild)?L.before(n.lastChild):s}else s=e;const i=s.container();let l=s.offset();if(Wn(i)){if(Cr(t)&&l>0)return L(i,--l);if(sa(t)&&l<i.length)return L(i,++l);o=i}else{if(Cr(t)&&l>0&&(r=Xh(i,l-1),ia(r)))return!Gh(r)&&(a=_s(r,t,tl,r),a)?Wn(a)?L(a,a.data.length):L.after(a):Wn(r)?L(r,r.data.length):L.before(r);if(sa(t)&&l<i.childNodes.length&&(r=Xh(i,l),ia(r)))return Fc(r)?((c,u)=>{const m=u.nextSibling;return m&&ia(m)?Wn(m)?L(m,0):L.before(m):Uc(ye.Forwards,L.after(u),c)})(n,r):!Gh(r)&&(a=_s(r,t,tl,r),a)?Wn(a)?L(a,0):L.before(a):Wn(r)?L(r,0):L.after(r);o=r||s.getNode()}if(o&&(sa(t)&&s.isAtEnd()||Cr(t)&&s.isAtStart())&&(o=_s(o,t,Zt,n,!0),tl(o,n)))return Qh(t,o);r=o&&_s(o,t,tl,n);const d=Jo(vt(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),HS));return!d||r&&d.contains(r)?r?Qh(t,r):null:(s=sa(t)?L.after(d):L.before(d),s)},Kn=t=>({next:e=>Uc(ye.Forwards,e,t),prev:e=>Uc(ye.Backwards,e,t)}),Jh=t=>L.isTextPosition(t)?0===t.offset():wn(t.getNode()),Zh=t=>{if(L.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return wn(t.getNode(!0))},tb=(t,e)=>!L.isTextPosition(t)&&!L.isTextPosition(e)&&t.getNode()===e.getNode(!0),nn=(t,e,n)=>{const o=Kn(e);return C.from(t?o.next(n):o.prev(n))},la=(t,e,n)=>nn(t,e,n).bind(o=>{return qn(n,o,e)&&(a=n,s=o,t?!tb(a,s)&&(L.isTextPosition(i=a)||!te(i.getNode()))&&Zh(a)&&Jh(s):!tb(s,a)&&Jh(a)&&Zh(s))?nn(t,e,o):C.some(o);var a,s,i}),eb=(t,e,n,o)=>la(t,e,n).bind(r=>o(r)?eb(t,e,r,o):C.some(r)),da=(t,e)=>{const n=t?e.firstChild:e.lastChild;return H(n)?C.some(L(n,t?0:n.data.length)):n?wn(n)?C.some(t?L.before(n):te(o=n)?L.before(o):L.after(o)):((r,a,s)=>{const i=r?L.before(s):L.after(s);return nn(r,a,i)})(t,e,n):C.none();var o},$e=Z(nn,!0),We=Z(nn,!1),Me=Z(da,!0),_n=Z(da,!1),zc="_mce_caret",on=t=>nt(t)&&t.id===zc,wr=(t,e)=>{let n=e;for(;n&&n!==t;){if(on(n))return n;n=n.parentNode}return null},nb=t=>_t(t,"name"),ob=t=>$.isArray(t.start),el=t=>!(!nb(t)&&ao(t.forward))||t.forward,rb=(t,e)=>(nt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),$S=(t,e)=>_n(t).fold(Ht,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),ab=(t,e,n)=>!(e.hasChildNodes()||!wr(t,e)||(((o,r)=>{var a;const s=(null!==(a=o.ownerDocument)&&void 0!==a?a:document).createTextNode(be);o.appendChild(s),r.setStart(s,0),r.setEnd(s,0)})(e,n),0)),sb=(t,e,n,o)=>{const r=n[e?"start":"end"],a=t.getRoot();if(r){let s=a,i=r[0];for(let l=r.length-1;s&&l>=1;l--){const d=s.childNodes;if(ab(a,s,o))return!0;if(r[l]>d.length-1)return!!ab(a,s,o)||$S(s,o);s=d[r[l]]}H(s)&&(i=Math.min(r[0],s.data.length)),nt(s)&&(i=Math.min(r[0],s.childNodes.length)),e?o.setStart(s,i):o.setEnd(s,i)}return!0},jc=t=>H(t)&&t.data.length>0,ib=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=null==o?void 0:o.parentNode,a=n.keep;if(o&&r){let s,i;if("start"===e?a?o.hasChildNodes()?(s=o.firstChild,i=1):jc(o.nextSibling)?(s=o.nextSibling,i=0):jc(o.previousSibling)?(s=o.previousSibling,i=o.previousSibling.data.length):(s=r,i=t.nodeIndex(o)+1):(s=r,i=t.nodeIndex(o)):a?o.hasChildNodes()?(s=o.firstChild,i=1):jc(o.previousSibling)?(s=o.previousSibling,i=o.previousSibling.data.length):(s=r,i=t.nodeIndex(o)):(s=r,i=t.nodeIndex(o)),!a){const l=o.previousSibling,d=o.nextSibling;let c;for($.each($.grep(o.childNodes),u=>{H(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(H(d)&&H(l)&&!Ot.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),s=l,i=u}}return C.some(L(s,i))}return C.none()},VS=(t,e,n)=>((o,r,a=!1)=>{return 2===r?ch(Xe,a,o):3===r?(s=>{const i=s.getRng();return{start:rh(s.dom.getRoot(),L.fromRangeStart(i)),end:rh(s.dom.getRoot(),L.fromRangeEnd(i)),forward:s.isForward()}})(o):r?{rng:(s=o).getRng(),forward:s.isForward()}:mh(o,!1);var s})(t,e,n),qS=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(ob(o))return((a,s)=>{const i=a.createRng();return sb(a,!0,s,i)&&sb(a,!1,s,i)?C.some({range:i,forward:el(s)}):C.none()})(r,o);if(it(o.start))return((a,s)=>{const i=C.from(ah(a.getRoot(),s.start)),l=C.from(ah(a.getRoot(),s.end));return Pe(i,l,(d,c)=>{const u=a.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:el(s)}})})(r,o);if(_t(o,"id"))return((a,s)=>{const i=ib(a,"start",s),l=ib(a,"end",s);return Pe(i,l.or(i),(d,c)=>{const u=a.createRng();return u.setStart(rb(a,d.container()),d.offset()),u.setEnd(rb(a,c.container()),c.offset()),{range:u,forward:el(s)}})})(r,o);if(nb(o))return((a,s)=>C.from(a.select(s.name)[s.index]).map(i=>{const l=a.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((a=>_t(a,"rng"))(o))return C.some({range:o.rng,forward:el(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},rn=t=>nt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),nl=(lb=he,t=>lb===t);var lb;const ca=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Hc=t=>!ca(t)&&!nl(t)&&!Wd(t),$c=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},db=(t,e)=>{const n=De(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:vt(je(t,a=>{const s=qi(a);return s?[k(s)]:[]}),ns)},ua=t=>db($c(t.selection.getSel()),k(t.getBody())),Ss=(t,e)=>Ga(t,"table",e),cb=t=>Pd(t).fold(Y([t]),e=>[t].concat(cb(e))),Vc=t=>Dd(t).fold(Y([t]),e=>"br"===Tt(e)?er(e).map(n=>[t].concat(Vc(n))).getOr([]):[t].concat(Vc(e))),qc=(t,e)=>Pe((n=>{const o=n.startContainer,r=n.startOffset;return H(o)?0===r?C.some(k(o)):C.none():C.from(o.childNodes[r]).map(k)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return H(o)?r===o.data.length?C.some(k(o)):C.none():C.from(o.childNodes[r-1]).map(k)})(e),(n,o)=>{const r=ae(cb(t),Z(Dt,n)),a=ae(Vc(t),Z(Dt,o));return r.isSome()&&a.isSome()}).getOr(!1),Wc=(t,e,n,o)=>{const r=n,a=new ue(n,r),s=Fa(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Mt(["td","th","table"],d.toLowerCase()));let i=n;do{if(H(i)&&0!==$.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(s[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?a.next():a.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},ol=t=>{const e=t.selection.getSel();return W(e)&&e.rangeCount>0},Kc=(t,e)=>{const n=ua(t);n.length>0?F(n,o=>{const r=o.dom,a=t.dom.createRng();a.setStartBefore(r),a.setEndAfter(r),e(a,!0)}):e(t.selection.getRng(),!1)},ub=(t,e,n)=>{const o=mh(t,e);n(o),t.moveToBookmark(o)},Ns=t=>Je(null==t?void 0:t.nodeType),Yc=t=>nt(t)&&!rn(t)&&!on(t)&&!ir(t),mb=(t,e,n)=>{const{selection:o,dom:r}=t,a=o.getNode(),s=qt(a);ub(o,!0,()=>{e()}),s&&qt(a)&&r.isChildOf(a,t.getBody())?t.selection.select(a):n(o.getStart())&&WS(r,o)},WS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:a,startOffset:s}=r;if(!((i,l)=>{if(Yc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&nt(a)){const i=a.childNodes,l=t.getRoot();let d;if(s<i.length){const c=i[s];d=new ue(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new ue(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if(H(c)&&!Xc(c))return r.setStart(c,0),void e.setRng(r)}}},fb=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nt(t)||!Xc(t))return t}},Gc=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||cr(t,e),ma=(t,e,n)=>t.schema.isValidChild(e,n),Xc=(t,e=!1)=>{if(W(t)&&H(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Bo(n)}return!1},gb=(t,e)=>{const n=t.dom;return Yc(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const a="[data-mce-cef-wrappable]",s=Hk(o),i=ja(s)?a:`${a},${s}`;return Rn(k(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Fo=(t,e)=>Bt(t)?t(e):(W(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Qc=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Jc=(t,e)=>{if(ne(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=as(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},rl=(t,e,n)=>{const o=t.getStyle(e,n);return Jc(o,n)},pb=(t,e)=>{let n;return t.getParent(e,o=>!!nt(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},al=(t,e,n)=>t.getParents(e,n,t.getRoot()),Zc=(t,e,n)=>{const o=t.formatter.get(e);return W(o)&&Xt(o,n)},Yn=t=>$r(t,"block"),an=t=>$r(t,"selector"),me=t=>$r(t,"inline"),tu=t=>an(t)&&!1!==t.expand&&!me(t),hb=t=>(e=>{const n=[];let o=e;for(;o;){if(H(o)&&o.data!==be||o.childNodes.length>1)return[];nt(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,eu=t=>on(t.dom)&&hb(t.dom),fa=rn,bb=al,vb=Xc,KS=Gc,yb=(t,e)=>{let n=e;for(;n;){if(nt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Cb=(t,e,n,o)=>{const r=e.data;if(t){for(let a=n;a>0;a--)if(o(r.charAt(a-1)))return a}else for(let a=n;a<r.length;a++)if(o(r.charAt(a)))return a;return-1},YS=(t,e,n)=>Cb(t,e,n,o=>nl(o)||ca(o)),GS=(t,e,n)=>Cb(t,e,n,Hc),wb=(t,e,n,o,r,a)=>{let s;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=hr(t);return C.from((r?m.backwards:m.forwards)(d,c,(f,h)=>fa(f.parentNode)?-1:(s=f,u(r,f,h)),i))};return l(n,o,YS).bind(d=>a?l(d.container,d.offset+(r?-1:0),GS):C.some(d)).orThunk(()=>s?C.some({container:s,offset:r?0:s.length}):C.none())},_b=(t,e,n,o,r)=>{const a=o[r];H(o)&&ja(o.data)&&a&&(o=a);const s=bb(t,o);for(let i=0;i<s.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!W(d.collapsed)||d.collapsed===n.collapsed)&&an(d)&&t.is(s[i],d.selector))return s[i]}return o},xb=(t,e,n,o)=>{var r;let a=n;const s=t.getRoot(),i=e[0];if(Yn(i)&&(a=i.wrapper?null:t.getParent(n,i.block,s)),!a){const l=null!==(r=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:s;a=t.getParent(H(n)?n.parentNode:n,d=>d!==s&&KS(t.schema,d),l)}if(a&&Yn(i)&&i.wrapper&&(a=bb(t,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[o]&&!t.isBlock(a[o])&&(a=a[o],!Qc(a,"br")););return a||n},Eb=(t,e,n,o)=>{const r=n.parentNode;return!W(n[o])&&(!(r!==e&&!ne(r)&&!t.isBlock(r))||Eb(t,e,r,o))},sl=(t,e,n,o,r)=>{let a=n;const s=r?"previousSibling":"nextSibling",i=t.getRoot();if(H(n)&&!vb(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let d=a[s];d;d=d[s]){const c=H(d)&&!Eb(t,i,d,s);if(!fa(d)&&(!te(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!vb(d,c))return a}if(a===i||a.parentNode===i){n=a;break}a=a.parentNode}var l;return n},kb=t=>fa(t.parentNode)||fa(t),_r=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:a,endContainer:s,endOffset:i}=e;const l=n[0];return nt(r)&&r.hasChildNodes()&&(r=Lo(r,a),H(r)&&(a=0)),nt(s)&&s.hasChildNodes()&&(s=Lo(s,e.collapsed?i:i-1),H(s)&&(i=s.data.length)),r=yb(t,r),s=yb(t,s),kb(r)&&(r=fa(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,H(r)&&(a=e.collapsed?r.length:0)),kb(s)&&(s=fa(s)?s:s.parentNode,s=e.collapsed?s.nextSibling||s:s.previousSibling||s,H(s)&&(i=e.collapsed?0:s.length)),e.collapsed&&(wb(t,t.getRoot(),r,a,!0,o).each(({container:d,offset:c})=>{r=d,a=c}),wb(t,t.getRoot(),s,i,!1,o).each(({container:d,offset:c})=>{s=d,i=c})),(me(l)||l.block_expand)&&(me(l)&&H(r)&&0!==a||(r=sl(t,n,r,a,!0)),me(l)&&H(s)&&i!==s.data.length||(s=sl(t,n,s,i,!1))),tu(l)&&(r=_b(t,n,e,r,"previousSibling"),s=_b(t,n,e,s,"nextSibling")),(Yn(l)||an(l))&&(r=xb(t,n,r,"previousSibling"),s=xb(t,n,s,"nextSibling"),Yn(l)&&(t.isBlock(r)||(r=sl(t,n,r,a,!0)),t.isBlock(s)||(s=sl(t,n,s,i,!1)))),nt(r)&&r.parentNode&&(a=t.nodeIndex(r),r=r.parentNode),nt(s)&&s.parentNode&&(i=t.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:a,endContainer:s,endOffset:i}},Rs=(t,e,n)=>{var o;const r=e.startOffset,a=Lo(e.startContainer,r),s=e.endOffset,i=Lo(e.endContainer,s-1),l=g=>{const b=g[0];H(b)&&b===a&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===s&&g.length>0&&v===i&&H(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let _=g,w=_.parentNode;_&&_!==b;_=w){w=_.parentNode;const x=d(_===g?_:_[y],y);x.length&&(v||x.reverse(),n(l(x)))}};if(a===i)return n(l([a]));const m=null!==(o=t.findCommonAncestor(a,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(a,i))return u(a,m,!0);if(t.isChildOf(i,a))return u(i,m);const p=c(a,m)||a,f=c(i,m)||i;u(a,p,!0);const h=d(p===a?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},XS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Sb=(t,e,n,o,r,a)=>{const{uid:s=e,...i}=n;Kr(t,ds()),_e(t,`${oa()}`,s),_e(t,`${gr()}`,o);const{attributes:l={},classes:d=[]}=r(s,i);if(io(t,l),c=t,F(d,m=>{Kr(c,m)}),a){d.length>0&&_e(t,`${us()}`,d.join(","));const c=Et(l);c.length>0&&_e(t,`${ms()}`,c.join(","))}var c},Nb=(t,e,n,o,r)=>{const a=pe("span",t);return Sb(a,e,n,o,r,!1),a},Rb=t=>{const e=(()=>{const a={};return{register:(s,i)=>{a[s]={name:s,settings:i}},lookup:s=>$t(a,s).map(i=>i.settings),getNames:()=>Et(a)}})();((a,s)=>{const i=gr(),l=c=>C.from(c.attr(i)).bind(s.lookup),d=c=>{var u,m;c.attr(oa(),null),c.attr(gr(),null),c.attr(cs(),null);const p=C.from(c.attr(ms())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(us())).map(b=>b.split(",")).getOr([]);F(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=Hr(h,[ds()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(us(),null),c.attr(ms(),null)};a.serializer.addTempAttr(cs()),a.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((a,s)=>{const i=ve({}),l=()=>({listeners:[],previous:Do()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f($t(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{F(Fp(a,p),h=>{f?_e(h,cs(),"true"):xe(h,cs())})},m=vc(()=>{const p=M(s.getNames());F(p,f=>{c(f,h=>{const g=h.previous.get();return Mp(a,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{F(y.listeners,_=>_(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var _,w,x;qr(g,b)||(g.each(_=>u(_,!1)),w=b,x=y,d(_=v,N=>{F(N.listeners,T=>T(!0,_,{uid:w,nodes:At(x,O=>O.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return a.on("remove",()=>{m.cancel()}),a.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=Ei("span"),r=a=>{F(a,s=>{o(s)?go(s):(i=>{Va(i,ds()),xe(i,`${oa()}`),xe(i,`${gr()}`),xe(i,`${cs()}`);const l=lo(i,`${ms()}`).map(u=>u.split(",")).getOr([]),d=lo(i,`${us()}`).map(u=>u.split(",")).getOr([]);var c;F(l,u=>xe(i,u)),c=i,F(d,u=>{Va(c,u)}),xe(i,`${us()}`),xe(i,`${ms()}`)})(s)})};return{register:(a,s)=>{e.register(a,s)},annotate:(a,s)=>{e.lookup(a).each(i=>{var l,d,c,u;d=a,c=i,u=s,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=ua(l).length>0,h=fs("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=_r(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=Nb(l.getDoc(),h,u,d,c.decorate);Ri(g,he),m.getRng().insertNode(g.dom),m.select(g.dom)}else ub(m,!1,()=>{Kc(l,g=>{((t,e,n,o,r,a)=>{const s=[],i=Nb(t.getDoc(),n,a,o,r),l=Do(),d=()=>{l.clear()},c=m=>{F(m,u)},u=m=>{switch(p=t,f=m,h="span",g=Tt(m),yn(f).fold(()=>"skipping",b=>{return"br"===g||tn(v=f)&&Pi(v)===be?"valid":(v=>Ye(v)&&Bd(v,ds()))(f)?"existing":on(f.dom)?"caret":Xt(XS,v=>Rn(f,v))?"valid-block":ma(p,h,g)&&ma(p,Tt(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=Ee(m);c(p),d();break}case"valid-block":d(),Sb(m,n,a,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=pr(i);return s.push(f),l.set(f),f});$g(m,p);break}}var p,f,h,g};Rs(t.dom,e,m=>{d(),(p=>{const f=At(p,k);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(a,s)=>{n.addListener(a,s)},remove:a=>{Mp(t,C.some(a)).each(({elements:s})=>{const i=t.selection.getBookmark();r(s),t.selection.moveToBookmark(i)})},removeAll:a=>{const s=t.selection.getBookmark();at(Up(t,a),(i,l)=>{r(i)}),t.selection.moveToBookmark(s)},getAll:a=>{const s=Up(t,a);return It(s,i=>At(i,l=>l.dom))}}},As=t=>({getBookmark:Z(VS,t),moveToBookmark:Z(qS,t)});As.isBookmarkNode=rn;const Ab=(t,e,n)=>!n.collapsed&&Xt(n.getClientRects(),o=>{return s=e,(a=t)>=(r=o).left&&a<=r.right&&s>=r.top&&s<=r.bottom;var r,a,s}),Tb=(t,e,n)=>{t.dispatch(e,n)},Ob=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Bb=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Pb=(t,e)=>t.dispatch("SetContent",e),Db=(t,e)=>t.dispatch("GetContent",e),Lb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Q={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Q.metaKeyPressed(t),metaKeyPressed:t=>Ot.os.isMacOS()||Ot.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},xr="data-mce-selected",Mb=Math.abs,il=Math.round,nu={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Ib=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,a=e.getBody();let s,i,l,d,c,u,m,p,f,h,g,b,v,y,_;const w=X=>W(X)&&(tp(X)||n.is(X,"figure.image")),x=X=>$n(X)||n.hasClass(X,"mce-preview-object"),N=X=>{const tt=X.target;((yt,S)=>{if("longpress"===(A=yt).type||0===A.type.indexOf("touch")){const A=yt.touches[0];return w(yt.target)&&!Ab(A.clientX,A.clientY,S)}var A;return w(yt.target)&&!Ab(yt.clientX,yt.clientY,S)})(X,e.selection.getRng())&&!X.isDefaultPrevented()&&e.selection.select(tt)},T=X=>n.hasClass(X,"mce-preview-object")&&W(X.firstElementChild)?[X,X.firstElementChild]:n.is(X,"figure.image")?[X.querySelector("img")]:[X],O=X=>{const tt=Rh(e);return!!tt&&"false"!==X.getAttribute("data-mce-resize")&&X!==e.getBody()&&(n.hasClass(X,"mce-preview-object")&&W(X.firstElementChild)?Rn(k(X.firstElementChild),tt):Rn(k(X),tt))},P=(X,tt,yt)=>{if(W(yt)){const S=T(X);F(S,A=>{A.style[tt]||!e.schema.isValid(A.nodeName.toLowerCase(),tt)?n.setStyle(A,tt,yt):n.setAttrib(A,tt,""+yt)})}},E=(X,tt,yt)=>{P(X,"width",tt),P(X,"height",yt)},R=X=>{let tt,yt,S,A,U;tt=X.screenX-u,yt=X.screenY-m,b=tt*d[2]+p,v=yt*d[3]+f,b=b<5?5:b,v=v<5?5:v,S=(w(s)||x(s))&&!1!==Dk(e)?!Q.modifierPressed(X):Q.modifierPressed(X),S&&(Mb(tt)>Mb(yt)?(v=il(b*h),b=il(v/h)):(b=il(v/h),v=il(b*h))),E(i,b,v),A=d.startPos.x+tt,U=d.startPos.y+yt,A=A>0?A:0,U=U>0?U:0,n.setStyles(l,{left:A,top:U,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),tt=a.scrollWidth-y,yt=a.scrollHeight-_,tt+yt!==0&&n.setStyles(l,{left:A-tt,top:U-yt}),g||(e.dispatch("ObjectResizeStart",{target:s,width:p,height:f,origin:"corner-"+d.name}),g=!0)},B=()=>{const X=g;g=!1,X&&(P(s,"width",b),P(s,"height",v)),n.unbind(o,"mousemove",R),n.unbind(o,"mouseup",B),r!==o&&(n.unbind(r,"mousemove",R),n.unbind(r,"mouseup",B)),n.remove(i),n.remove(l),n.remove(c),I(s),X&&(e.dispatch("ObjectResized",{target:s,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),e.nodeChanged()},I=X=>{ft();const tt=n.getPos(X,a),yt=tt.x,S=tt.y,A=X.getBoundingClientRect(),U=A.width||A.right-A.left,z=A.height||A.bottom-A.top;s!==X&&(V(),s=X,b=v=0);const j=e.dispatch("ObjectSelected",{target:X});O(X)&&!j.isDefaultPrevented()?at(nu,(et,mt)=>{let Ct=n.get("mceResizeHandle"+mt);Ct&&n.remove(Ct),Ct=n.add(a,"div",{id:"mceResizeHandle"+mt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+mt+"-resize; margin:0; padding:0"}),n.bind(Ct,"mousedown",gt=>{gt.stopImmediatePropagation(),gt.preventDefault(),(Ut=>{const ot=T(s)[0];var kt;u=Ut.screenX,m=Ut.screenY,p=ot.clientWidth,f=ot.clientHeight,h=f/p,d=et,d.name=mt,d.startPos={x:U*et[0]+yt,y:z*et[1]+S},y=a.scrollWidth,_=a.scrollHeight,c=n.add(a,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=x(kt=s)?n.create("img",{src:Ot.transparentSrc}):kt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:yt,top:S,margin:0}),E(i,U,z),i.removeAttribute(xr),a.appendChild(i),n.bind(o,"mousemove",R),n.bind(o,"mouseup",B),r!==o&&(n.bind(r,"mousemove",R),n.bind(r,"mouseup",B)),l=n.add(a,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(gt)}),et.elm=Ct,n.setStyles(Ct,{left:U*et[0]+yt-Ct.offsetWidth/2,top:z*et[1]+S-Ct.offsetHeight/2})}):V(!1)},G=Vi(I,0),V=(X=!0)=>{G.cancel(),ft(),s&&X&&s.removeAttribute(xr),at(nu,(tt,yt)=>{const S=n.get("mceResizeHandle"+yt);S&&(n.unbind(S),n.remove(S))})},dt=(X,tt)=>n.isChildOf(X,tt),rt=X=>{if(g||e.removed||e.composing)return;const tt="mousedown"===X.type?X.target:t.getNode(),yt=or(k(tt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(A=>A.dom).filter(A=>n.isEditable(A.parentElement)||"IMG"===A.nodeName&&n.isEditable(A)).getOrUndefined(),S=W(yt)?n.getAttrib(yt,xr,"1"):"1";if(F(n.select(`img[${xr}],hr[${xr}]`),A=>{A.removeAttribute(xr)}),W(yt)&&dt(yt,a)&&e.hasFocus()){ct();const A=t.getStart(!0);if(dt(A,yt)&&dt(t.getEnd(!0),yt))return n.setAttrib(yt,xr,S),void G.throttle(yt)}V()},ft=()=>{at(nu,X=>{X.elm&&(n.unbind(X.elm),delete X.elm)})},ct=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{ct(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",rt),e.on("keyup compositionend",X=>{s&&"TABLE"===s.nodeName&&rt(X)}),e.on("hide blur",V),e.on("contextmenu longpress",N,!0)}),e.on("remove",ft),{isResizable:O,showResizeRect:I,hideResizeRect:V,updateResizeRect:rt,destroy:()=>{G.cancel(),s=i=c=null}}},Fb=(t,e,n)=>{const o=t.document.createRange();var r,a;return r=o,e.fold(a=>{r.setStartBefore(a.dom)},(a,s)=>{r.setStart(a.dom,s)},a=>{r.setStartAfter(a.dom)}),a=o,n.fold(i=>{a.setEndBefore(i.dom)},(i,l)=>{a.setEnd(i.dom,l)},i=>{a.setEndAfter(i.dom)}),o},ou=(t,e,n,o,r)=>{const a=t.document.createRange();return a.setStart(e.dom,n),a.setEnd(o.dom,r),a},Ts=Vn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ub=(t,e,n)=>e(k(n.startContainer),n.startOffset,k(n.endContainer),n.endOffset),zb=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),JS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(a=>{if(null===a.offsetNode)return C.none();const s=t.dom.createRange();return s.setStart(a.offsetNode,a.offset),s.collapse(),C.some(s)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,ru=Vn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vo={before:ru.before,on:ru.on,after:ru.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(ce,ce,ce)},ll=Vn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ga={domRange:ll.domRange,relative:ll.relative,exact:ll.exact,exactFromRange:t=>ll.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>k(o.startContainer),relative:(o,r)=>vo.getStart(o),exact:(o,r,a,s)=>o});return Ka(e)},range:zb},dl=(t,e)=>{const n=Tt(t);return"input"===n?vo.after(t):Mt(["br","img"],n)?0===e?vo.before(t):vo.after(t):vo.on(t,e)},ZS=(t,e)=>{const n=t.fold(vo.before,dl,vo.after),o=e.fold(vo.before,dl,vo.after);return ga.relative(n,o)},jb=(t,e,n,o)=>{const r=dl(t,e),a=dl(n,o);return ga.relative(r,a)},au=(t,e)=>{const n=(e||document).createDocumentFragment();return F(t,o=>{n.appendChild(o.dom)}),k(n)},Hb=(t,e,n)=>{return(o=Ka(k(n)).dom,r=t,a=e,((s,i,l)=>{const d=k(s.document);return JS(d,i,l).map(c=>zb(k(c.startContainer),c.startOffset,k(c.endContainer),c.endOffset))})(o,r,a)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,a},su=(t,e)=>W(t)&&W(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,$b=(t,e,n)=>null!==((o,r,a)=>{let s=o;for(;s&&s!==r;){if(a(s))return s;s=s.parentNode}return null})(t,e,n),eN=(t,e,n)=>$b(t,e,o=>o.nodeName===n),nN=(t,e)=>en(t)&&!$b(t,e,on),Vb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new ue(e,t.getParent(o,t.isBlock)||t.getRoot());let a;for(;a=r[n?"prev":"next"]();)if(te(a))return!0}return!1},iu=(t,e,n,o,r)=>{const a=t.getRoot(),s=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||a;if(o&&te(r)&&e&&t.isEmpty(c))return C.some(L(i,t.nodeIndex(r)));const u=new ue(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||nN(d,a))return C.none();if(H(d)&&d.data.length>0)return eN(d,a,"A")?C.none():C.some(L(d,o?d.data.length:0));if(t.isBlock(d)||s[d.nodeName.toLowerCase()])return C.none();l=d}return Ao(l)?C.none():n&&l?C.some(L(l,0)):C.none()},qb=(t,e,n,o)=>{const r=t.getRoot();let a,s=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=nt(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(en(i))return C.none();if(nt(i)&&l>i.childNodes.length-1&&(u=!1),Za(i)&&(i=r,l=0),i===r){if(u&&(a=i.childNodes[l>0?l-1:0],a)&&(en(a)||c[a.nodeName]||ho(a)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=H(i)&&d?i.data.length:0,!e&&i===r.lastChild&&ho(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(qt(f))return!0;f=f.parentNode}return!1})(r,i)||en(i)||qd(i))return C.none();if(i.hasChildNodes()&&!ho(i)){a=i;const m=new ue(i,r);do{if(qt(a)||en(a)){s=!1;break}if(H(a)&&a.data.length>0){l=u?0:a.data.length,i=a,s=!0;break}if(c[a.nodeName.toLowerCase()]&&!vE(a)){l=t.nodeIndex(a),i=a.parentNode,u||l++,s=!0;break}}while(a=u?m.next():m.prev())}}}return e&&(H(i)&&0===l&&iu(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),nt(i)&&(a=i.childNodes[l],a||(a=i.childNodes[l-1]),!a||!te(a)||"A"===(null===(f=a.previousSibling)||void 0===f?void 0:f.nodeName)||Vb(t,a,!1)||Vb(t,a,!0)||iu(t,d,e,!0,a).each(m=>{i=m.container(),l=m.offset(),s=!0}))),u&&!e&&H(i)&&l===i.data.length&&iu(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),s&&i?C.some(L(i,l)):C.none();var f},cl=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=L.fromRangeStart(e);return qb(t,n,!0,o).each(a=>{n&&L.isAbove(r,a)||o.setStart(a.container(),a.offset())}),n||qb(t,n,!1,o).each(a=>{o.setEnd(a.container(),a.offset())}),n&&o.collapse(!0),su(e,o)?C.none():C.some(o)},ul=(t,e)=>t.splitText(e),ml=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&H(e)){if(n>0&&n<e.data.length)if(o=ul(e,n),e=o.previousSibling,r>n){r-=n;const a=ul(o,r).previousSibling;e=o=a,r=a.data.length,n=0}else r=0}else if(H(e)&&n>0&&n<e.data.length&&(e=ul(e,n),n=0),H(o)&&r>0&&r<o.data.length){const a=ul(o,r).previousSibling;o=a,r=a.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Er=t=>({walk:(e,n)=>Rs(t,e,n),split:ml,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=_r(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>cl(t,e).fold(Ht,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Er.compareRanges=su,Er.getCaretRangeFromPoint=Hb,Er.getSelectedNode=qi,Er.getNode=Lo;const oN=((t,e)=>{const n=r=>{const a=(s=>{const i=s.dom;return Xr(s)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(a<=0||null===a){const s=Hn(r,t);return parseFloat(s)||0}return a},o=(r,a)=>Oe(a,(s,i)=>{const l=Hn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?s:s+d},0);return{set:(r,a)=>{if(!Je(a)&&!a.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+a);const s=r.dom;Qa(s)&&(s.style[t]=a+"px")},get:n,getOuter:n,aggregate:o,max:(r,a,s)=>{const i=o(r,s);return a>i?a-i:0}}})("height"),Wb=()=>k(document),Kb=(t,e)=>t.view(e).fold(Y([]),n=>{const o=t.owner(n),r=Kb(t,o);return[n].concat(r)});var rN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(k)},owner:t=>uo(t)});const lu=t=>"textarea"===Tt(t),Yb=(t,e)=>{const n=(r=>{const a=r.dom.ownerDocument,s=a.body,i=a.defaultView,l=a.documentElement;if(s===r.dom)return Jr(s.offsetLeft,s.offsetTop);const d=Ai(null==i?void 0:i.pageYOffset,l.scrollTop),c=Ai(null==i?void 0:i.pageXOffset,l.scrollLeft),u=Ai(l.clientTop,s.clientTop),m=Ai(l.clientLeft,s.clientLeft);return jd(r).translate(c-m,d-u)})(t),o=oN.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},Gb=(t,e,n,o)=>{sN(t,(r,a)=>aN(t,e,n,o),n)},Xb=(t,e,n,o,r)=>{const a={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",a).isDefaultPrevented()||(n(t,e,Hd(e).top,o,r),t.dispatch("AfterScrollIntoView",a))},aN=(t,e,n,o)=>{k(t.getBody());const a=k(t.getDoc()),s=((i,l)=>{const d=((u,m)=>{const p=Ee(u);if(0===p.length||lu(u))return{element:u,offset:m};if(m<p.length&&!lu(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return lu(f)?{element:u,offset:m}:"img"===Tt(f)?{element:f,offset:1}:tn(f)?{element:f,offset:Pi(f).length}:{element:f,offset:Ee(f).length}}})(i,l),c=Wa('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return qe(d.element,c),Yb(c,()=>Vt(c))})(k(n.startContainer),n.startOffset);Xb(t,a,e,s,o),s.cleanup()},Qb=(t,e,n,o)=>{const r=k(t.getDoc());Xb(t,r,n,Yb(k(e),xt),o)},sN=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,a=n.endContainer,s=n.endOffset;e(k(o),k(a));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(a,s),t.selection.setRng(n)},du=(t,e,n,o,r)=>{const a=e.pos;if(o)Wg(a.left,a.top,r);else{const s=a.top-n+e.height;Wg(-t.getBody().getBoundingClientRect().left,s,r)}},Jb=(t,e,n,o,r,a)=>{const s=o+n,i=r.pos.top,l=r.bottom,d=l-i>=o;i<n?du(t,r,o,!1!==a,e):i>s?du(t,r,o,d?!1!==a:!0===a,e):l>s&&!d&&du(t,r,o,!0===a,e)},Zb=(t,e,n,o,r)=>{const a=Ka(e).dom.innerHeight;Jb(t,e,n,a,o,r)},tv=(t,e,n,o,r)=>{const a=Ka(e).dom.innerHeight;Jb(t,e,n,a,o,r);const s=(l=>{const d=Wb(),c=Hd(d),u=((f,h)=>{const g=h.owner(f);return Kb(h,g)})(l,rN),m=jd(l),p=Yo(u,(f,h)=>{const g=jd(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return Jr(p.left+m.left+c.left,p.top+m.top+c.top)})(o.element),i=Gg(window);s.top<i.y?Kg(o.element,!1!==r):s.top>i.bottom&&Kg(o.element,!0===r)},iN=(t,e,n)=>Gb(t,Zb,e,n),lN=(t,e,n)=>Qb(t,e,Zb,n),dN=(t,e,n)=>Gb(t,tv,e,n),cN=(t,e,n)=>Qb(t,e,tv,n),Os=(t,e,n)=>{(t.inline?iN:dN)(t,e,n)},ev=(t,e=!1)=>t.dom.focus({preventScroll:e}),nv=t=>{const e=Ro(t).dom;return t.dom===e.activeElement},cu=(t=Wb())=>C.from(t.dom.activeElement).map(k),ov=(t,e)=>{const n=tn(e)?Pi(e).length:Ee(e).length+1;return t>n?n:t<0?0:t},uN=t=>ga.range(t.start,ov(t.soffset,t.start),t.finish,ov(t.foffset,t.finish)),rv=(t,e)=>!Ti(e.dom)&&(co(t,e)||Dt(t,e)),av=t=>e=>rv(t,e.start)&&rv(t,e.finish),mN=t=>ga.range(k(t.startContainer),t.startOffset,k(t.endContainer),t.endOffset),fN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},uu=t=>{const e=t.inline||Ot.browser.isFirefox()?(n=k(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(mN)})(Ka(n).dom).filter(av(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},mu=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=k(t.getBody()),C.from(e).filter(av(n)).map(uN);var n}).bind(fN),sv={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},sn={setEditorTimeout:(t,e,n)=>{return Je(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(Je(a=n)||(a=0),setInterval(()=>{t.removed?clearInterval(o):e()},a));var a;return o}};let pa;const fu=jt.DOM,gu=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},fl=(t,e)=>{const n=$k(t);return null!==fu.getParent(e,r=>{return nt(a=r)&&sv.isEditorUIElement(a)||!!n&&t.dom.is(r,n);var a})},pu=t=>{try{const e=Ro(k(t.getElement()));return cu(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},gN=(t,e)=>{const n=e.editor;(r=>{const a=Vi(()=>{uu(r)},0);r.on("init",()=>{var s,d;r.inline&&((s,i)=>{const l=()=>{i.throttle()};jt.DOM.bind(document,"mouseup",l),s.on("remove",()=>{jt.DOM.unbind(document,"mouseup",l)})})(r,a),d=a,(s=r).on("mouseup touchend",c=>{d.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||uu(s)})}),r.on("remove",()=>{a.cancel()})})(n);const o=(r,a)=>{ES(r)&&!0!==r.inline&&a(k(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;gu(pu(n))&&o(n,Kr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{sn.setEditorTimeout(n,()=>{const r=t.focusedEditor;gu(pu(n))&&r===n||o(n,Va),fl(n,pu(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),pa||(pa=r=>{const a=t.activeEditor;a&&Mg(r).each(s=>{s.ownerDocument===document&&(s===document.body||fl(a,s)||t.focusedEditor!==a||(a.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},fu.bind(document,"focusin",pa))},pN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&pa&&(fu.unbind(document,"focusin",pa),pa=null)},iv=(t,e)=>{var n,o,r;(n=k(t.getBody()),o=e,(r=o,r.collapsed?C.from(Lo(r.startContainer,r.startOffset)).map(k):C.none()).bind(r=>wE(r)?C.some(r):co(n,r)?C.none():C.some(n))).bind(n=>Me(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},hu=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},kr=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=k(n),nv(o)||(r=o,cu(Ro(r)).filter(a=>r.dom.contains(a.dom))).isSome());var o,r})(t):W((e=t).iframeElement)&&nv(k(e.iframeElement));var e},lv=t=>kr(t)||(e=>{const n=Ro(k(e.getElement()));return cu(n).filter(o=>!gu(o.dom)&&fl(e,o.dom)).isSome()})(t),bu=t=>t.editorManager.setActive(t),dv=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),cv=(t,e,n,o,r)=>{const s=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(k).map(i=>o&&e.collapsed?i:Gr(i,r(i,s)).getOr(i)).bind(i=>Ye(i)?C.some(i):yn(i).filter(Ye)).map(i=>i.dom).getOr(t)},uv=(t,e,n=!1)=>cv(t,e,!0,n,(o,r)=>Math.min(Ld(o),r)),mv=(t,e,n=!1)=>cv(t,e,!1,n,(o,r)=>r>0?r-1:r),fv=(t,e)=>{const n=t;for(;t&&H(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},vu=(t,e)=>At(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),hN=["img","br"],gv=t=>{return ep(t).filter(n=>0!==n.trim().length||n.indexOf(he)>-1).isSome()||Mt(hN,Tt(t))||xi(n=t)&&"false"===Ge(n,"contenteditable");var n},pv="[data-mce-autocompleter]",hv=t=>Xa(t,pv),vN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},gl=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let a=t[r];if(a)return a;for(let s=t.parent;s&&s!==e;s=s.parent)if(a=s[r],a)return a}},yN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Bo(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},bv=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Fe{static create(e,n){const o=new Fe(e,vN[e]||1);return n&&at(n,(r,a)=>{o.attr(a,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!it(e))return W(e)&&at(e,(a,s)=>{o.attr(s,a)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let a=r.length;for(;a--;)if(r[a].name===e)return r.splice(a,1),o}return o}if(e in r.map){let a=r.length;for(;a--;)if(r[a].name===e){r[a].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new Fe(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let a=0,s=o.length;a<s;a++){const i=o[a];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=gl(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=gl(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const a=this;let s=a.firstChild;if(bv(a))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name]||bv(s))return!1}if(8===s.type||3===s.type&&!yN(s)||3===s.type&&s.parent&&n[s.parent.name]&&Bo(null!==(r=s.value)&&void 0!==r?r:"")||o&&o(s))return!1}while(s=gl(s,a));return!0}walk(e){return gl(this,null,e)}}const CN=$.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),vv=t=>it(t.nodeValue)&&t.nodeValue.includes(be),yv=t=>(0===t.length?"":`${At(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',Cv=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>vv(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),wv=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(vv(e)){const n=e.parentNode;return n&&_t(CN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),wN=t=>null!==Cv(t).nextNode(),_N=t=>null!==wv(t).nextNode(),xN=(t,e)=>null!==e.querySelector(yv(t)),EN=(t,e)=>{F(e.querySelectorAll(yv(t)),n=>{const o=k(n);"all"===Ge(o,"data-mce-bogus")?Vt(o):F(t,r=>{Ha(o,r)&&xe(o,r)})})},_v=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},kN=bn(_v,Cv),SN=bn(_v,wv),xv=(t,e)=>{const n=[{condition:Z(xN,e),action:Z(EN,e)},{condition:wN,action:kN},{condition:_N,action:SN}];let o=t,r=!1;return F(n,({condition:a,action:s})=>{a(o)&&(r||(o=t.cloneNode(!0),r=!0),s(o))}),o},Ev=t=>{const e=De(t,"[data-mce-bogus]");F(e,n=>{"all"===Ge(n,"data-mce-bogus")?Vt(n):lr(n)?(qe(n,Yr("\ufeff")),Vt(n)):go(n)})},kv=t=>{const e=De(t,"input");F(e,n=>{xe(n,"name")})},Sv=$.makeMap,Nv=t=>{const e=[],n=(t=t||{}).indent,o=Sv(t.indent_before||""),r=Sv(t.indent_after||""),a=mr.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',a(m.value,!0),'"')}if(e[e.length]=!d||s?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:a(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",a(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Uo=(t={},e=Po())=>{const n=Nv(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,a={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{s(l)}while(l=l.next)}};n.reset();const s=i=>{var l;const d=a[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),dr(c))it(i.value)&&n.text(i.value,!0),n.end(c);else if(!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{s(p)}while(p=p.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?a[3](o):a[11](o):s(o),n.getContent()}}},Rv=new Set;F(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Rv.add(t)});const Av=["font","text-decoration","text-emphasis"],yu=(t,e)=>Et(t.parseStyle(t.getAttrib(e,"style"))),RN=(t,e,n)=>{const o=yu(t,e),r=yu(t,n),a=s=>{var i,l;const d=null!==(i=t.getStyle(e,s))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,s))&&void 0!==l?l:"";return Fn(d)&&Fn(c)&&d!==c};return Xt(o,s=>{const i=l=>Xt(l,d=>d===s);if(!i(r)&&i(Av)){const l=vt(r,d=>Xt(Av,c=>we(d,c)));return Xt(l,a)}return a(s)})},Tv=(t,e,n)=>C.from(n.container()).filter(H).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),Cu=Z(Tv,!0,ca),wu=Z(Tv,!1,ca),AN=t=>{const e=t.container();return H(e)&&(0===e.data.length||Li(e.data)&&As.isBookmarkNode(e.parentNode))},zo=(t,e)=>n=>Lc(t?0:-1,n).filter(e).isSome(),Ov=t=>tp(t)&&"block"===Hn(k(t),"display"),Bv=t=>{return qt(t)&&!(nt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},TN=zo(!0,Ov),ON=zo(!1,Ov),Bs=zo(!0,$n),Ps=zo(!1,$n),Pv=zo(!0,ho),Dv=zo(!1,ho),jo=zo(!0,Bv),Ho=zo(!1,Bv),Lv=(t,e)=>{return r=Ht,co(o=e,n=t)?Bg(n,a=>r(a)||Dt(a,o)).slice(0,-1):[];var n,o,r},yo=(t,e)=>[t].concat(Lv(t,e)),_u=(t,e,n)=>eb(t,e,n,AN),Mv=(t,e,n)=>{return ae(yo(k(e.container()),t),(o=n,r=>o.isBlock(Tt(r))));var o},Iv=(t,e,n,o)=>_u(t,e.dom,n).forall(r=>Mv(e,n,o).fold(()=>!qn(r,n,e.dom),a=>!qn(r,n,e.dom)&&co(a,k(r.container())))),Fv=(t,e,n,o)=>Mv(e,n,o).fold(()=>_u(t,e.dom,n).forall(r=>!qn(r,n,e.dom)),r=>_u(t,r.dom,n).isNone()),xu=Z(Fv,!1),Uv=Z(Fv,!0),BN=Z(Iv,!1),PN=Z(Iv,!0),DN=t=>Ji(t).exists(lr),pl=(t,e,n,o)=>{const r=vt(yo(k(n.container()),e),s=>o.isBlock(Tt(s))),a=K(r).getOr(e);return nn(t,a.dom,n).filter(DN)},Eu=(t,e,n)=>Ji(e).exists(lr)||pl(!0,t,e,n).isSome(),ku=(t,e,n)=>{return(o=e,C.from(o.getNode(!0)).map(k)).exists(lr)||pl(!1,t,e,n).isSome();var o},LN=Z(pl,!1),MN=Z(pl,!0),zv=t=>L.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),jv=(t,e,n)=>{const o=vt(yo(k(e.container()),t),r=>n.isBlock(Tt(r)));return K(o).getOr(t)},Hv=(t,e,n)=>zv(e)?wu(e):wu(e)||We(jv(t,e,n).dom,e).exists(wu),$v=(t,e,n)=>zv(e)?Cu(e):Cu(e)||$e(jv(t,e,n).dom,e).exists(Cu),Su=t=>Ji(t).bind(e=>nr(e,Ye)).exists(e=>{return n=Hn(e,"white-space"),Mt(["pre","pre-wrap"],n);var n}),Vv=(t,e)=>n=>{return o=new ue(n,t)[e](),W(o)&&qt(o)&&Hh(o);var o},qv=(t,e,n)=>{return!Su(e)&&(a=n,We((o=t).dom,r=e).isNone()||$e(o.dom,r).isNone()||xu(o,r,a)||Uv(o,r,a)||ku(o,r,a)||Eu(o,r,a)||Hv(t,e,n)||$v(t,e,n));var o,r,a},Ds=(t,e,n)=>!Su(e)&&(xu(t,e,n)||BN(t,e,n)||ku(t,e,n)||Hv(t,e,n)||((o,r)=>{const a=We(o.dom,r).getOr(r),s=Vv(o.dom,"prev");return r.isAtStart()&&(s(r.container())||s(a.container()))})(t,e)),Ls=(t,e,n)=>!Su(e)&&(Uv(t,e,n)||PN(t,e,n)||Eu(t,e,n)||$v(t,e,n)||((o,r)=>{const a=$e(o.dom,r).getOr(r),s=Vv(o.dom,"next");return r.isAtEnd()&&(s(r.container())||s(a.container()))})(t,e)),Nu=(t,e,n)=>Ds(t,e,n)||Ls(t,(o=>{const r=o.container(),a=o.offset();return H(r)&&a<r.data.length?L(r,a+1):o})(e),n),Wv=(t,e)=>nl(t.charAt(e)),Kv=(t,e)=>ca(t.charAt(e)),Yv=(t,e,n,o)=>{const r=e.data,a=L(e,0);return n||!Wv(r,0)||Nu(t,a,o)?!!(n&&Kv(r,0)&&Ds(t,a,o))&&(e.data=he+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},Gv=(t,e,n,o)=>{const r=e.data,a=L(e,r.length-1);return n||!Wv(r,r.length-1)||Nu(t,a,o)?!!(n&&Kv(r,r.length-1)&&Ls(t,a,o))&&(e.data=r.slice(0,-1)+he,!0):(e.data=r.slice(0,-1)+" ",!0)},Xv=(t,e,n,o)=>{if(0===n)return;const r=k(t),a=mo(r,d=>o.isBlock(Tt(d))).getOr(r),s=t.data.slice(e,e+n),i=e+n>=t.data.length&&Ls(a,L(t,t.data.length),o),l=0===e&&Ds(a,L(t,0),o);t.replaceData(e,n,dp(s,4,l,i))},hl=(t,e,n)=>{const o=t.data.slice(e),r=o.length-Wx(o).length;Xv(t,e,r,n)},Ru=(t,e,n)=>{const o=t.data.slice(0,e),r=o.length-ng(o).length;Xv(t,e-r,r,n)},Au=(t,e,n,o,r=!0)=>{const a=ng(t.data).length,s=r?t:e,i=r?e:t;return r?s.appendData(i.data):s.insertData(0,i.data),Vt(k(i)),o&&hl(s,a,n),s},FN=(t,e)=>((n,o)=>{const r=n.container(),a=n.offset();return!L.isTextPosition(n)&&r===o.parentNode&&a>L.before(o).offset()})(e,t)?L(e.container(),e.offset()-1):e,Qv=t=>{return wn(t.previousSibling)?C.some(H(e=t.previousSibling)?L(e,e.data.length):L.after(e)):t.previousSibling?_n(t.previousSibling):C.none();var e},Jv=t=>{return wn(t.nextSibling)?C.some(H(e=t.nextSibling)?L(e,0):L.before(e)):t.nextSibling?Me(t.nextSibling):C.none();var e},Zv=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},zN=(t,e)=>e&&_t(t.schema.getBlockElements(),Tt(e)),Sr=(t,e,n,o=!0,r=!1)=>{const a=((t,e,n)=>{return(o=t,r=e,a=n,o?(s=r,Jv(i=a).orThunk(()=>Qv(i)).orThunk(()=>{return $e(l=s,L.after(d=i)).orThunk(()=>We(l,L.before(d)));var l,d})):((s,i)=>Qv(i).orThunk(()=>Jv(i)).orThunk(()=>{return l=s,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>We(l,L.before(c))).orThunk(()=>$e(l,L.after(d)));var l,d}))(r,a)).map(Z(FN,n));var o,r,a,s,i})(e,t.getBody(),n.dom),s=mo(n,Z(zN,t),(i=t.getBody(),d=>d.dom===i));var i;const l=((d,c,u,m)=>{const p=er(d).filter(tn),f=Ya(d).filter(tn);return Vt(d),(h=p,g=f,b=c,v=(y,_,w)=>{const x=y.dom,N=_.dom,T=x.data.length;return Au(x,N,u,m),w.container()===N?L(x,T):w},h.isSome()&&g.isSome()&&b.isSome()?C.some(v(h.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(m&&(p.each(y=>Ru(y.dom,y.dom.length,u)),f.each(y=>hl(y.dom,0,u))),c));var h,g,b,v})(n,a,t.schema,(c=n,_t(t.schema.getTextInlineElements(),Tt(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(d=>((c,u)=>{if(oe(c)){const m=Wa('<br data-mce-bogus="1">');return u?F(Ee(c),p=>{eu(p)||Vt(p)}):Qr(c),ie(c,m),C.some(L.before(m.dom))}return C.none()})(d,r)).fold(()=>{o&&Zv(t,e,l)},d=>{o&&Zv(t,e,C.some(d))})},jN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Nr=(t,e)=>Rn(k(e),Pk(t))&&!cr(t.schema,e)&&t.dom.isEditable(e),t0=t=>{var e,n;return"rtl"===jt.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",jN.test(n))},$o=(t,e,n)=>{const o=(r=t,a=e,vt(jt.DOM.getParents(n.container(),"*",a),r));var r,a;return C.from(o[o.length-1])},ln=(t,e)=>{const n=e.container(),o=e.offset();return t?Oo(n)?H(n.nextSibling)?L(n.nextSibling,0):L.after(n):Gd(e)?L(n,o+1):e:Oo(n)?H(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):Xd(e)?L(n,o-1):e},e0=Z(ln,!0),n0=Z(ln,!1),o0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Tu=t=>o0(t,"Delete"),HN=t=>np(t)||es(t),bl=(t,e)=>{return co(t,e)?nr(e,HN,(n=t,o=>qr(yn(o),n,Dt))):C.none();var n},Ou=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},r0=(t,e,n)=>Pe(Me(n),_n(n),(o,r)=>{const a=ln(!0,o),s=ln(!1,r),i=ln(!1,e);return t?$e(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a)):We(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s))}).getOr(!0),a0=t=>{var e;return(8===_g(e=t)||"#comment"===Tt(e)?er(t):Dd(t)).bind(a0).orThunk(()=>C.some(t))},s0=(t,e,n,o=!0)=>{var r;e.deleteContents();const a=a0(n).getOr(n),s=k(null!==(r=t.dom.getParent(a.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(s.dom===t.getBody()?Ou(t,o):oe(s)&&(To(s),o&&t.selection.setCursorLocation(s.dom,0)),!Dt(n,s)){const l=qr(yn(s),n)?[]:yn(i=s).map(Ee).map(d=>vt(d,c=>!Dt(i,c))).getOr([]);F(l.concat(Ee(n)),d=>{Dt(d,s)||co(d,s)||!oe(d)||Vt(d)})}var i},i0=(t,e)=>Fg(t,e).isSome(),Bu=t=>De(t,"td,th"),l0=(t,e)=>Ss(k(t),e),Pu=(t,e)=>({start:t,end:e}),Ms=Vn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),vl=(t,e)=>or(k(t),"td,th",e),d0=t=>!Dt(t.start,t.end),c0=(t,e)=>Ss(t.start,e).bind(n=>Ss(t.end,e).bind(o=>Wr(Dt(n,o),n))),Du=t=>e=>c0(e,t).map(n=>({rng:e,table:n,cells:Bu(n)})),u0=(t,e,n,o)=>{if(n.collapsed||!t.forall(d0))return C.none();if(e.isSameTable){const r=t.bind(Du(o));return C.some({start:r,end:r})}{const r=vl(n.startContainer,o),a=vl(n.endContainer,o),s=r.bind((l=o,d=>Ss(d,l).bind(c=>lt(Bu(c)).map(u=>Pu(d,u))))).bind(Du(o)),i=a.bind((l=>d=>Ss(d,l).bind(c=>K(Bu(c)).map(u=>Pu(u,d))))(o)).bind(Du(o));return C.some({start:s,end:i})}var l},m0=(t,e)=>Go(t,n=>Dt(n,e)),Lu=t=>Pe(m0(t.cells,t.rng.start),m0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),f0=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(a=>r.setStartAfter(a.dom)),o.each(a=>r.setEndBefore(a.dom)),r},g0=t=>F(t,e=>{xe(e,"contenteditable"),To(e)}),Mu=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Iu(t,r,e,!1).each(a=>a())},p0=t=>{const e=ua(t),n=k(t.selection.getNode());Bi(n.dom)&&oe(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Xt(e,o=>Dt(o,n))&&_e(n,"data-mce-selected","1")},h0=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:a,isStartInTable:s})=>{const i=C.from((d=t).dom.getParent(s?a.endContainer:a.startContainer,d.dom.isBlock)).map(k);var d;a.deleteContents(),((d,c,u)=>{u.each(m=>{c?Vt(m):(To(m),d.selection.setCursorLocation(m.dom,0))})})(t,s,i.filter(oe));const l=s?e[0]:e[e.length-1];return Mu(t,l,o,s),oe(l)?C.none():C.some(s?e.slice(1):e.slice(0,-1))}).getOr(e);g0(r),p0(t)}),qN=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),a=e[0],s=n[n.length-1];Mu(t,a,r,!0),Mu(t,s,r,!1);const i=oe(a)?e:e.slice(1),l=oe(s)?n:n.slice(0,-1);g0(i.concat(l)),o.deleteContents(),p0(t)}),Iu=(t,e,n,o=!0)=>C.some(()=>{s0(t,e,n,o)}),WN=(t,e)=>C.some(()=>Sr(t,!1,e)),b0=(t,e)=>ae(yo(e,t),ns),Fu=(t,e)=>ae(yo(e,t),Ei("caption")),yl=(t,e)=>C.some(()=>{To(e),t.selection.setCursorLocation(e.dom,0)}),v0=(t,e)=>t?Pv(e):Dv(e),Uu=(t,e)=>{const n=k(t.selection.getStart(!0)),o=ua(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=k(t.getBody());return Fu(o,n).fold(()=>((r,a,s,i)=>{const l=L.fromRangeStart(r.selection.getRng());return b0(s,i).bind(d=>{return oe(d)?yl(r,d):(u=s,p=d,f=l,la(a,r.getBody(),f).bind(h=>b0(u,k(h.getNode())).bind(g=>Dt(g,p)?C.none():C.some(xt))));var u,p,f})})(t,e,o,n).orThunk(()=>Wr(((r,a)=>{const s=L.fromRangeStart(r.selection.getRng());return v0(a,s)||nn(a,r.getBody(),s).exists(i=>v0(a,i))})(t,e),xt)),r=>((a,s,i,l)=>{const d=L.fromRangeStart(a.selection.getRng());return oe(l)?yl(a,l):(u=i,p=l,f=d,la(m=s,(c=a).getBody(),f).fold(()=>C.some(xt),h=>{return b=m,v=f,y=h,Me((g=p).dom).bind(_=>_n(g.dom).map(w=>b?v.isEqual(_)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(_))).getOr(!0)?((g,b)=>yl(g,b))(c,p):((g,b,v)=>Fu(g,k(v.getNode())).fold(()=>C.some(xt),y=>Wr(!Dt(y,b),xt)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(t,e,o,r))})(t,e,n):((r,a,s)=>{const i=k(r.getBody()),l=r.selection.getRng();return 0!==s.length?h0(r,s,C.none()):(d=r,u=l,Fu(c=i,a).fold(()=>{return p=d,((t,e)=>{const n=(a=t,s=>Dt(a,s)),o=((a,s)=>{const i=vl(a.startContainer,s),l=vl(a.endContainer,s);return Pe(i,l,Pu)})(e,n),r=((a,s)=>{const i=l0(a.startContainer,s),l=l0(a.endContainer,s),d=i.isSome(),c=l.isSome(),u=Pe(i,l,Dt).getOr(!1);return Pe((m={startTable:i,endTable:l,isStartInTable:d,isEndInTable:c,isSameTable:u,isMultiTable:!u&&d&&c}).startTable,m.endTable,(p,f)=>{const h=i0(p,b=>Dt(b,f)),g=i0(f,b=>Dt(b,p));return h||g?{...m,startTable:h?C.none():m.startTable,endTable:g?C.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m);var m})(e,n);var a;return((a,s,i)=>a.exists(l=>{return c=i,!d0(d=l)&&c0(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&qc(l.start,s);var d,c}))(o,e,n)?o.map(a=>Ms.singleCellTable(e,a.start)):r.isMultiTable?((a,s,i,l)=>u0(a,s,i,l).bind(({start:d,end:c})=>{const u=d.bind(Lu).getOr([]),m=c.bind(Lu).getOr([]);if(u.length>0&&m.length>0){const p=f0(i,s);return C.some(Ms.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((a,s,i,l)=>u0(a,s,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=s,u=Lu(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Ms.fullTable(d.table));if(u.length>0){if(c)return C.some(Ms.partialTable(u,C.none()));{const m=f0(i,s);return C.some(Ms.partialTable(u,C.some({...s,rng:m})))}}return C.none()}))(o,r,e,n)})(c,u).bind(g=>g.fold(Z(Iu,p),Z(WN,p),Z(h0,p),Z(qN,p)));var p},p=>yl(d,p)));var d,c,u})(t,n,o)},Rr=(t,e)=>{let n=e;for(;n&&n!==t;){if(Cn(n)||qt(n))return n;n=n.parentNode}return null},YN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],GN=$.each,zu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>Xt(YN,a=>we(r,a))||n.has(r);return{compare:(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const s=l=>{const d={};return GN(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(_t(l,c)){const u=d[c];if(ge(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(_t(d,c))return!1;return!0};return!(nt(r)&&nt(a)&&(!i(s(r),s(a))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(a,"style"))))||rn(r)||rn(a))},isAttributeInternal:o}},y0=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),C0=(t,e,n,o)=>{const r=n.name;for(let a=0,s=t.length;a<s;a++){const i=t[a];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let a=0,s=e.length;a<s;a++){const i=e[a],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},w0=(t,e)=>{const n=(o,r)=>{at(o,a=>{const s=bt(a.nodes);F(a.filter.callbacks,i=>{for(let l=s.length-1;l>=0;l--){const d=s[l];(r?void 0!==d.attr(a.filter.name):d.name===a.filter.name)&&!ne(d.parent)||s.splice(l,1)}s.length>0&&i(s,a.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},_0=(t,e,n,o={})=>{const r=((a,s,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)C0(a,s,u,l)})(i),l})(t,e,n);w0(r,o)},ju=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new Fe("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Fe("#text",3)).value=he},x0=(t,e)=>{const n=null==t?void 0:t.firstChild;return W(n)&&n===t.lastChild&&n.name===e},Is=(t,e,n,o)=>o.isEmpty(e,n,r=>((a,s)=>{const i=a.getElementRule(s.name);return!0===(null==i?void 0:i.paddEmpty)})(t,r)),XN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},Hu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&Hu(r,e,n);t.unwrap()}},$u=(t,e,n,o=xt)=>{const r=e.getTextBlockElements(),a=e.getNonEmptyElements(),s=e.getWhitespaceElements(),i=$.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(Vu(e,u,m))Hu(u,e);else{h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}Is(e,a,s,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(Is(e,a,s,m)||x0(m,"br"))&&m.empty().remove()}else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new Fe("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new Fe("div",1);o(g),u.wrap(g)}else Hu(u,e)}}},Vu=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((o,r)=>{let a=o;for(;a;){if("a"===a.name)return!0;a=a.parent}return!1})(n))&&(o=n,"summary"!==o.name||!y0(e)||(null==n?void 0:n.firstChild)===e&&(null==n?void 0:n.lastChild)===e));var o},qu=t=>t.collapsed?t:(e=>{const n=L.fromRangeStart(e),o=L.fromRangeEnd(e),r=e.commonAncestorContainer;return nn(!1,r,o).map(a=>!qn(n,o,r)&&qn(n,a,r)?((s,i,l,d)=>{const c=document.createRange();return c.setStart(s,i),c.setEnd(l,d),c})(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)})(t),Wu=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},E0=(t,e)=>{const n=L.after(t),o=Kn(e).prev(n);return o?o.toRange():null},tR=["pre"],Ku=Bi,eR=(t,e,n)=>{var o,r;const a=t.selection,s=t.dom,i=t.parser,l=n.merge,d=Uo({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=Xe(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=a.getRng();const m=u.startContainer,p=t.getBody();var y,_;m===p&&a.isCollapsed()&&s.isBlock(p.firstChild)&&(y=t,W(_=p.firstChild)&&!y.schema.getVoidElements()[_.nodeName])&&s.isEmpty(p.firstChild)&&(u=s.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),a.setRng(u)),a.isCollapsed()||(y=>{const _=y.dom,w=qu(y.selection.getRng());y.selection.setRng(w);const x=_.getParent(w.startContainer,Ku);var N,T,O;N=_,T=w,W(O=x)&&O===N.getParent(T.endContainer,Ku)&&qc(k(O),T)?Iu(y,w,k(x)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&H(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=a.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,a)=>{const s=r.getNonEmptyElements();return W(a)&&(a.isEmpty(s)||(l=a,r.getBlockElements()[l.name]&&W((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===he)(l.firstChild)));var l,d})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,_)=>!!Wu(y,_))(s,f))return u=((t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),a=Wu(e,n.startContainer),s=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||W(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===he||te(o)))?t.slice(0,-1):t;var o,e,n})(vt(null!==(l=null==(i=r.firstChild)?void 0:i.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var i,l;const d=e.getRoot(),c=u=>{const m=L.fromRangeStart(n),p=Kn(e.getRoot()),f=1===u?p.prev(m):p.next(m),h=null==f?void 0:f.getNode();return!h||Wu(e,h)!==a};return a?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&$.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=L.before(h),v=Kn(g).next(b);return v?v.toRange():null})(u,p)})(a,s,d):c(2)?(u=a,p=d,e.insertAfter((m=s).reverse(),u),E0(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),_=v.cloneRange();return y.setStartBefore(b),_.setEndAfter(b),[y.cloneContents(),_.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),$.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),E0(m[m.length-1],p)})(a,s,d,n):null;var u,m,p})(d,s,a.getRng(),g),u&&a.setRng(u),e;!0===n.paste&&((y,_,w,x)=>{var N;const T=_.firstChild,O=_.lastChild,P=T===("bookmark"===O.attr("data-mce-type")?O.prev:O),E=Mt(tR,T.name);if(P&&E){const R="false"!==T.attr("contenteditable"),B=(null===(N=y.getParent(w,y.isBlock))||void 0===N?void 0:N.nodeName.toLowerCase())===T.name,I=C.from(Rr(x,w)).forall(Cn);return R&&B&&I}return!1})(s,g,f,t.getBody())&&(null===(o=g.firstChild)||void 0===o||o.unwrap()),(y=>{let _=y;for(;_=_.walk();)1===_.type&&_.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!s.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid||((y,_,w)=>{var x;return Xt(w.children(),y0)&&"SUMMARY"===(null===(x=y.getParent(_,y.isBlock))||void 0===x?void 0:x.nodeName)})(s,f,g)){t.selection.setContent(c);let y,_=a.getNode();const w=t.getBody();for(Za(_)?_=y=w:y=_;y&&y!==w;)_=y,y=y.parentNode;e=_===w?w.innerHTML:s.getOuterHTML(_);const x=i.parse(e),N=(R=>{for(let B=R;B;B=B.walk())if("mce_marker"===B.attr("id"))return C.some(B);return C.none()})(x),T=N.bind(XN).getOr(x);N.each(R=>R.replace(g));const O=g.children(),P=null!==(r=g.parent)&&void 0!==r?r:x;g.unwrap();const E=vt(O,R=>Vu(t.schema,R,P));$u(E,t.schema,T),_0(i.getNodeFilters(),i.getAttributeFilters(),x),e=d.serialize(x),_===w?s.setHTML(w,e):s.setOuterHTML(_,e)}else e=d.serialize(g),((y,_,w)=>{var x;if("all"===w.getAttribute("data-mce-bogus"))null===(x=w.parentNode)||void 0===x||x.insertBefore(y.dom.createFragment(_),w);else{const N=w.firstChild;!N||N===w.lastChild&&"BR"===N.nodeName?y.dom.setHTML(w,_):y.selection.setContent(_,{no_events:!0})}})(t,e,f);var v;return((y,_)=>{const w=y.schema.getTextInlineElements(),x=y.dom;if(_){const N=y.getBody(),T=zu(y);$.each(x.select("*[data-mce-fragment]"),O=>{if(W(w[O.nodeName.toLowerCase()])&&Nn(yu(x,O),R=>!Rv.has(R)))for(let P=O.parentElement;W(P)&&P!==N&&!RN(x,O,P);P=P.parentElement)if(T.compare(P,O)){x.remove(O,!0);break}})}})(t,l),((y,_)=>{var w,x,N;let T;const O=y.dom,P=y.selection;if(!_)return;P.scrollIntoView(_);const E=Rr(y.getBody(),_);if(E&&"false"===O.getContentEditable(E))return O.remove(_),void P.select(E);let R=O.createRng();const B=_.previousSibling;if(H(B)){R.setStart(B,null!==(x=null===(w=B.nodeValue)||void 0===w?void 0:w.length)&&void 0!==x?x:0);const G=_.nextSibling;H(G)&&(B.appendData(G.data),null===(N=G.parentNode)||void 0===N||N.removeChild(G))}else R.setStartBefore(_),R.setEndBefore(_);const I=O.getParent(_,O.isBlock);if(O.remove(_),I&&O.isEmpty(I)){const G=Ku(I);Qr(k(I)),R.setStart(I,0),R.setEnd(I,0),G||I.getAttribute("data-mce-fragment")||!(T=(V=>{let dt=L.fromRangeStart(V);return dt=Kn(y.getBody()).next(dt),null==dt?void 0:dt.toRange()})(R))?O.add(I,O.create("br",G?{}:{"data-mce-bogus":"1"})):(R=T,O.remove(I))}P.setRng(R)})(t,s.get("mce_marker")),v=t.getBody(),$.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,_,w)=>{C.from(y.getParent(_,"td,th")).map(k).each(x=>{return T=w,void Dd(N=x).each(O=>{er(O).each(P=>{T.isBlock(Tt(N))&&lr(O)&&T.isBlock(Tt(P))&&Vt(O)})});var N,T})})(s,a.getStart(),t.schema),((y,_,w)=>{const x=Bg(k(w),N=>Dt(N,k(_)));q(x,x.length-2).filter(Ye).fold(()=>ec(y,_),N=>ec(y,N.dom))})(t.schema,t.getBody(),a.getStart()),e},Cl=t=>t instanceof Fe,Yu=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&kr(o=t)&&Me(o.getBody()).each(r=>{const a=r.getNode(),s=ho(a)?Me(a).getOr(r):r;o.selection.setRng(s.toRange())})},k0=t=>Bt(t)?t:Ht,Gu=(t,e,n)=>{const o=e(t),r=k0(n);return o.orThunk(()=>r(t)?C.none():((a,s,i)=>{let l=a.dom;const d=k0(i);for(;l.parentNode;){l=l.parentNode;const c=k(l),u=s(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},Xu=Qc,S0=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const a=o[r];if(an(a)&&!1===a.inherit&&t.dom.is(e,a.selector))return!0}return!1},Qu=(t,e,n,o,r)=>{const a=t.dom.getRoot();if(e===a)return!1;const s=t.dom.getParent(e,i=>!!S0(t,i,n)||i.parentNode===a||!!Gn(t,i,n,o,!0));return!!Gn(t,s,n,o,r)},wl=(t,e,n)=>!(!me(n)||!Xu(e,n.inline))||!(!Yn(n)||!Xu(e,n.block))||!!an(n)&&nt(e)&&t.is(e,n.selector),N0=(t,e,n,o,r,a)=>{const s=n[o],i="attributes"===o;if(Bt(n.onmatch))return n.onmatch(e,n,o);if(s)if(Xf(s)){for(let l=0;l<s.length;l++)if(i?t.getAttrib(e,s[l]):rl(t,e,s[l]))return!0}else for(const l in s)if(_t(s,l)){const d=i?t.getAttrib(e,l):rl(t,e,l),c=Fo(s[l],a),u=ne(d)||ja(d);if(u&&ne(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Xu(d,Jc(c,l)))return!1}return!0},Gn=(t,e,n,o,r)=>{const a=t.formatter.get(n),s=t.dom;if(a&&nt(e))for(let i=0;i<a.length;i++){const l=a[i];if(wl(t.dom,e,l)&&N0(s,e,l,"attributes",r,o)&&N0(s,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,Fo(d[c],o)))return;return l}}},Ju=(t,e,n,o,r)=>{if(o)return Qu(t,o,e,n,r);if(o=t.selection.getNode(),Qu(t,o,e,n,r))return!0;const a=t.selection.getStart();return!(a===o||!Qu(t,a,e,n,r))},Fs=be,R0=t=>{if(t){const e=new ue(t,t);for(let n=e.current();n;n=e.next())if(H(n))return n}return null},Zu=t=>{const e=pe("span");return io(e,{id:zc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&ie(e,Yr(Fs)),e},tm=(t,e,n)=>{const o=t.dom,r=t.selection;if(hb(e))Sr(t,!1,k(e),n,!0);else{const a=r.getRng(),s=o.getParent(e,o.isBlock),i=a.startContainer,l=a.startOffset,d=a.endContainer,c=a.endOffset,u=(m=>{const p=R0(m);return p&&p.data.charAt(0)===Fs&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&a.setStart(u,l-1),d===u&&c>0&&a.setEnd(u,c-1),s&&o.isEmpty(s)&&To(k(s)),r.setRng(a)}},em=(t,e,n)=>{const o=t.dom,r=t.selection;if(e)tm(t,e,n);else if(!(e=wr(t.getBody(),r.getStart())))for(;e=o.get(zc);)tm(t,e,n)},A0=(t,e)=>(t.appendChild(e),e),T0=(t,e)=>{var n;const o=Yo(t,(a,s)=>A0(a,s.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return A0(o,r.createTextNode(Fs))},O0=t=>{const e=Zu(!1),n=T0(t,e.dom);return{caretContainer:e,caretPosition:L(n,0)}},B0=(t,e)=>{const{caretContainer:n,caretPosition:o}=O0(e);return qe(k(t),n),Vt(k(t)),o},P0=(t,e)=>{if(on(e.dom))return!1;const n=t.schema.getTextInlineElements();return _t(n,Tt(e))&&!on(e.dom)&&!ir(e.dom)},Us={},D0=An(["pre"]);((t,e)=>{Us[t]||(Us[t]=[]),Us[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=vt(vt(o,D0),(a=o,s=>{const i=s.previousSibling;return D0(i)&&Mt(a,i)}));F(r,a=>{((s,i)=>{const l=k(i),d=uo(l).dom;Vt(l),ar(k(s),[pe("br",d),pe("br",d),...Ee(l)])})(a.previousSibling,a)})}var a})})("pre");const L0=["fontWeight","fontStyle","color","fontSize","fontFamily"],M0=(t,e)=>{const n=t.get(e);return Jt(n)?ae(n,o=>{return me(o)&&"span"===o.inline&&Se((r=o).styles)&&Xt(Et(r.styles),a=>Mt(L0,a));var r}):C.none()},I0=(t,e)=>We(e,L.fromRangeStart(t)).isNone(),F0=(t,e)=>!1===$e(e,L.fromRangeEnd(t)).exists(n=>!te(n.getNode())||$e(e,n).isSome()),U0=t=>e=>yE(e)&&t.isEditable(e),z0=t=>vt(t.getSelectedBlocks(),U0(t.dom)),nm=$.each,om=t=>nt(t)&&!rn(t)&&!on(t)&&!ir(t),j0=(t,e)=>{for(let n=t;n;n=n[e]){if(H(n)&&Fn(n.data))return t;if(nt(n)&&!rn(n))return n}return t},H0=(t,e,n)=>{const o=zu(t),r=po(e)&&t.dom.isEditable(e),a=po(n)&&t.dom.isEditable(n);if(r&&a){const s=j0(e,"previousSibling"),i=j0(n,"nextSibling");if(o.compare(s,i)){for(let l=s.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,s.appendChild(d)}return t.dom.remove(i),$.each($.grep(i.childNodes),l=>{s.appendChild(l)}),s}}return n},$0=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const a=null!==(r=H0(t,fb(o),o))&&void 0!==r?r:o;H0(t,a,fb(a,!0))}},rm=(t,e,n)=>{nm(t.childNodes,o=>{om(o)&&(e(o)&&n(o),o.hasChildNodes()&&rm(o,e,n))})},V0=(t,e)=>n=>!(!n||!rl(t,n,e)),q0=(t,e,n)=>o=>{var r,a;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(a=o).nodeName&&0===r.getAttribs(a).length&&r.remove(a,!0)},Ar=Vn([{keep:[]},{rename:["name"]},{removed:[]}]),oR=/^(src|href|style)$/,am=$.each,_l=Qc,W0=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),K0=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(nt(o)){const a=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>a?a:r]}return H(o)&&n&&r>=o.data.length&&(o=new ue(o,t.getBody()).next()||o),H(o)&&!n&&0===r&&(o=new ue(o,t.getBody()).prev()||o),o},Y0=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},sm=(t,e,n,o)=>{var r;const a=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(a,e),a.appendChild(e),a},G0=(t,e,n,o,r)=>{const a=k(e),s=k(t.create(o,r)),i=n?Dg(a):Pg(a);return ar(s,i),n?(qe(a,s),Ud(s,a)):(fo(a,s),ie(s,a)),s.dom},X0=(t,e,n)=>{const o=e.parentNode;let r;const a=t.dom,s=Le(t);var i;Yn(n)&&o===a.getRoot()&&(n.list_block&&_l(e,n.list_block)||F(bt(e.childNodes),i=>{ma(t,s,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=sm(a,i,s),a.setAttribs(r,vs(t))):r=null})),an(i=n)&&me(i)&&qr($t(i,"mixed"),!0)&&!_l(n.inline,e)||a.remove(e,!0)},Q0=(t,e,n)=>Je(t)?{name:e,value:null}:{name:t,value:Fo(e,n)},J0=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Z0=(t,e,n,o,r)=>{let a=!1;am(n.styles,(s,i)=>{const{name:l,value:d}=Q0(i,s,o),c=Jc(d,l);(n.remove_similar||Te(d)||!nt(r)||_l(rl(t,r,l),c))&&t.setStyle(e,l,""),a=!0}),a&&J0(t,e)},ty=(t,e,n,o,r)=>{const a=t.dom,s=zu(t),i=t.schema;if(me(e)&&oc(i,e.inline)&&cr(i,o)&&o.parentElement===t.getBody())return X0(t,o,e),Ar.removed();if(!e.ceFalseOverride&&o&&"false"===a.getContentEditableParent(o)||o&&!wl(a,o,e)&&(!e.links||"A"!==o.nodeName))return Ar.keep();const l=o,d=e.preserve_attributes;if(me(e)&&"all"===e.remove&&Jt(d)){const c=vt(a.getAttribs(l),u=>Mt(d,u.name.toLowerCase()));if(a.removeAllAttribs(l),F(c,u=>a.setAttrib(l,u.name,u.value)),c.length>0)return Ar.rename("span")}if("all"!==e.remove){Z0(a,l,e,n,r),am(e.attributes,(u,m)=>{const{name:p,value:f}=Q0(m,u,n);if(e.remove_similar||Te(f)||!nt(r)||_l(a.getAttrib(r,p),f)){if("class"===p){const h=a.getAttrib(l,p);if(h){let g="";if(F(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void a.setAttrib(l,p,g)}}if(oR.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&An(["li"])(l)&&"none"===a.getStyle(l,"list-style-type"))return l.removeAttribute(p),void a.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),am(e.classes,u=>{u=Fo(u,n),nt(r)&&!a.hasClass(r,u)||a.removeClass(l,u)});const c=a.getAttribs(l);for(let u=0;u<c.length;u++)if(!s.isAttributeInternal(c[u].nodeName))return Ar.keep()}return"none"!==e.remove?(X0(t,l,e),Ar.removed()):Ar.keep()},rR=(t,e,n,o)=>ty(t,e,n,o,o).fold(Y(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),Y(null)),ey=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((a,s,i,l,d)=>{const c=a.formatter.get(s),u=c[0],m=a.dom,p=a.selection,f=y=>{const _=((w,x,N,T,O)=>{let P;return x.parentNode&&F(al(w.dom,x.parentNode).reverse(),E=>{if(!P&&nt(E)&&"_start"!==E.id&&"_end"!==E.id){const R=Gn(w,E,N,T,O);R&&!1!==R.split&&(P=E)}}),P})(a,y,s,i,d);return((w,x,N,T,O,P,E,R)=>{var B,I;let G,V;const dt=w.dom;if(N){const rt=N.parentNode;for(let ft=T.parentNode;ft&&ft!==rt;ft=ft.parentNode){let ct=dt.clone(ft,!1);for(let X=0;X<x.length&&(ct=rR(w,x[X],R,ct),null!==ct);X++);ct&&(G&&ct.appendChild(G),V||(V=ct),G=ct)}E.mixed&&dt.isBlock(N)||(T=null!==(B=dt.split(N,T))&&void 0!==B?B:T),G&&V&&(null===(I=O.parentNode)||void 0===I||I.insertBefore(G,O),V.appendChild(O),me(E)&&$0(w,E,0,G))}return T})(a,c,_,y,y,0,u,i)},h=y=>Xt(c,_=>zs(a,_,i,y,y)),g=y=>{const _=bt(y.childNodes),w=h(y)||Xt(c,N=>wl(m,y,N)),x=y.parentNode;if(!w&&W(x)&&tu(u)&&h(x),u.deep&&_.length)for(let N=0;N<_.length;N++)g(_[N]);F(["underline","line-through","overline"],N=>{nt(y)&&a.dom.getStyle(y,"text-decoration")===N&&y.parentNode&&pb(m,y.parentNode)===N&&zs(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:N}},void 0,y)})},b=y=>{const _=m.get(y?"_start":"_end");if(_){let w=_[y?"firstChild":"lastChild"];return rn(x=w)&&nt(x)&&("_start"===x.id||"_end"===x.id)&&(w=w[y?"firstChild":"lastChild"]),H(w)&&0===w.data.length&&(w=y?_.previousSibling||_.nextSibling:_.nextSibling||_.previousSibling),m.remove(_,!0),w}var x;return null},v=y=>{let _,w,x=_r(m,y,c,y.collapsed);if(u.split){if(x=ml(x),_=K0(a,x,!0),w=K0(a,x),_!==w){if(_=Y0(_,!0),w=Y0(w,!1),W0(m,_,w)){const T=C.from(_.firstChild).getOr(_);return f(G0(m,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(W0(m,w,_)){const T=C.from(w.lastChild).getOr(w);return f(G0(m,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}_=sm(m,_,"span",{id:"_start","data-mce-type":"bookmark"}),w=sm(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const N=m.createRng();N.setStartAfter(_),N.setEndBefore(w),Rs(m,N,T=>{F(T,O=>{rn(O)||rn(O.parentNode)||f(O)})}),f(_),f(w),_=b(!0),w=b()}else _=w=f(_);x.startContainer=_.parentNode?_.parentNode:_,x.startOffset=m.nodeIndex(_),x.endContainer=w.parentNode?w.parentNode:w,x.endOffset=m.nodeIndex(w)+1}Rs(m,x,N=>{F(N,g)})};if(l){if(Ns(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);Bb(a,s,l,i)}else p.isCollapsed()&&me(u)&&!ua(a).length?((t,e,n,o)=>{const r=t.dom,a=t.selection;let s=!1;const i=t.formatter.get(e);if(!i)return;const l=a.getRng(),d=l.startContainer,c=l.startOffset;let u=d;H(d)&&(c!==d.data.length&&(s=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Gn(t,u,e,n,o)){p=u;break}u.nextSibling&&(s=!0),m.push(u),u=u.parentNode}if(p)if(s){const f=a.getBookmark();l.collapse(!0);let h=_r(r,l,i,!0);h=ml(h),t.formatter.remove(e,n,h,o),a.moveToBookmark(f)}else{const f=wr(t.getBody(),p),h=W(f)?r.getParents(p.parentNode,Zt,f):[],g=Zu(!1).dom;((y,_,w)=>{var x,N;const T=y.dom,O=T.getParent(w,Z(Gc,y.schema));O&&T.isEmpty(O)?null===(x=w.parentNode)||void 0===x||x.replaceChild(_,w):((P=>{const E=De(P,"br"),R=vt((B=>{const I=[];let G=B.dom;for(;G;)I.push(k(G)),G=G.lastChild;return I})(P).slice(-1),lr);E.length===R.length&&F(R,Vt)})(k(w)),T.isEmpty(w)?null===(N=w.parentNode)||void 0===N||N.replaceChild(_,w):T.insertAfter(_,w))})(t,g,null!=f?f:p);const b=((y,_,w,x,N,T)=>{const O=y.formatter,P=y.dom,E=vt(Et(O.get()),B=>B!==x&&!Be(B,"removeformat")),R=(B=y,I=w,Oe(E,(V,dt)=>{const rt=Zc(B,dt,X=>{const tt=yt=>Bt(yt)||yt.length>1&&"%"===yt.charAt(0);return Xt(["styles","attributes"],yt=>$t(X,yt).exists(S=>{const A=Jt(S)?S:xd(S);return Xt(A,tt)}))});return B.formatter.matchNode(I,dt,{},rt)?V.concat([dt]):V},[]));var B,I;if(vt(R,B=>!((I,G,V)=>{const dt=["inline","block","selector","attributes","styles","classes"],rt=ft=>Fa(ft,(ct,X)=>Xt(dt,tt=>tt===X));return Zc(I,G,ft=>{const ct=rt(ft);return Zc(I,V,X=>{const tt=rt(X);return((yt,S,A=Sn)=>Wo(A).eq(yt,S))(ct,tt)})})})(y,B,x)).length>0){const B=w.cloneNode(!1);return P.add(_,B),O.remove(x,N,B,T),P.remove(B),C.some(B)}return C.none()})(t,g,p,e,n,o),v=T0([...m,...b.toArray(),...h],g);f&&tm(t,f,W(f)),a.setCursorLocation(v,1),r.isEmpty(p)&&r.remove(p)}})(a,s,i,d):(mb(a,()=>Kc(a,v),y=>me(u)&&Ju(a,s,i,y)),a.nodeChanged()),y=a,w=i,"removeformat"===(_=s)?F(z0(y.selection),x=>{F(L0,N=>y.dom.setStyle(x,N,"")),J0(y.dom,x)}):M0(y.formatter,_).each(x=>{F(z0(y.selection),N=>Z0(y.dom,N,x,w,null))}),Bb(a,s,l,i);var y,_,w})(t,e,n,o,r)},zs=(t,e,n,o,r)=>ty(t,e,n,o,r).fold(Ht,a=>(t.dom.rename(o,a),!0),Zt),ny=$.each,xl=$.each,oy=(t,e,n,o)=>{if(xl(n.styles,(r,a)=>{t.setStyle(e,a,Fo(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},aR=(t,e,n,o)=>{const r=t.formatter.get(e),a=r[0],s=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=a)=>{Bt(h.onformat)&&h.onformat(f,h,n,o),oy(i,f,h,n),xl(h.attributes,(g,b)=>{i.setAttrib(f,b,Fo(g,n))}),xl(h.classes,g=>{const b=Fo(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return xl(f,b=>!(!an(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!W(b.collapsed)||b.collapsed===s)&&i.is(h,b.selector)&&!on(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=a.inline||a.block,_=(f=>{if(it(f)){const h=i.create(f);return d(h),h}return null})(y);Rs(f,h,w=>{let x;const N=T=>{let O=!1,P=v,E=!1;const R=T.parentNode,B=R.nodeName.toLowerCase(),I=f.getContentEditable(T);W(I)&&(P=v,v="true"===I,O=!0,E=gb(t,T));const G=v&&!O;if(te(T)&&!((V,dt,rt,ft)=>{if(jk(V)&&me(dt)&&rt.parentNode){const ct=Sp(V.schema),X=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(a=k(r.parentNode),ae(a.dom.childNodes,i=>(a=>!Dt(n,a)&&o(a))(k(i))).map(k)):C.none();var a})(t,e).isSome())(k(rt),tt=>on(tt.dom));return $r(ct,ft)&&oe(k(rt.parentNode),!1)&&!X}return!1})(t,a,T,B))return x=null,void(Yn(a)&&f.remove(T));if(V=T,Yn(dt=a)&&!0===dt.wrapper&&Gn(t,V,e,n))x=null;else{if(((V,dt,rt)=>{const ft=Yn(ct=a)&&!0!==ct.wrapper&&Gc(t.schema,V)&&ma(t,dt,y);var ct;return rt&&ft})(T,B,G)){const V=f.rename(T,y);return d(V),b.push(V),void(x=null)}if(an(a)){let V=c(r,T);if(!V&&W(R)&&tu(a)&&(V=c(r,R)),!me(a)||V)return void(x=null)}W(_)&&((V,dt,rt,ft)=>{const ct=V.nodeName.toLowerCase(),X=ma(t,y,ct)&&ma(t,dt,y),tt=!g&&H(V)&&Li(V.data),yt=on(V),S=!me(a)||!f.isBlock(V);return(rt||ft)&&X&&!tt&&!yt&&S})(T,B,G,E)?(x||(x=f.clone(_,!1),R.insertBefore(x,T),b.push(x)),E&&O&&(v=P),x.appendChild(T)):(x=null,F(bt(T.childNodes),N),O&&(v=P),x=null)}var V,dt};F(w,N)}),!0===a.links&&F(b,w=>{const x=N=>{"A"===N.nodeName&&d(N,a),F(bt(N.childNodes),x)};x(w)}),F(b,w=>{const x=(N=>{let T=0;return F(N.childNodes,O=>{var P;W(P=O)&&H(P)&&0===P.length||rn(O)||T++}),T})(w);var N;!(b.length>1)&&f.isBlock(w)||0!==x?(me(a)||Yn(a)&&a.wrapper)&&(a.exact||1!==x||(w=ae((N=w).childNodes,Yc).filter(O=>"false"!==f.getContentEditable(O)&&wl(f,O,a)).map(O=>{const P=f.clone(O,!1);return d(P),f.replace(P,N,!0),f.remove(O,!0),P}).getOr(N)),((N,T,O,P)=>{ny(T,E=>{var R,B,I;me(E)&&ny(N.dom.select(E.inline,P),R=>{om(R)&&zs(N,E,O,R,E.exact?R:null)}),R=N.dom,I=P,(B=E).clear_child_styles&&nm(R.select(B.links?"*:not(a)":"*",I),V=>{om(V)&&R.isEditable(V)&&nm(B.styles,(dt,rt)=>{R.setStyle(V,rt,"")})})})})(t,r,n,w),((N,T,O,P,E)=>{const R=E.parentNode;Gn(N,R,O,P)&&zs(N,T,P,E)||T.merge_with_parents&&R&&N.dom.getParent(R,B=>!!Gn(N,B,O,P)&&(zs(N,T,P,E),!0))})(t,a,e,n,w),((N,T,O,P)=>{if(T.styles&&T.styles.backgroundColor){const E=V0(N,"fontSize");rm(P,R=>E(R)&&N.isEditable(R),q0(N,"backgroundColor",Fo(T.styles.backgroundColor,O)))}})(f,a,n,w),((N,T,O,P)=>{const E=R=>{if(po(R)&&nt(R.parentNode)&&N.isEditable(R)){const B=pb(N,R.parentNode);N.getStyle(R,"color")&&B?N.setStyle(R,"text-decoration",B):N.getStyle(R,"text-decoration")===B&&N.setStyle(R,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&($.walk(P,E,"childNodes"),E(P))})(f,a,0,w),((N,T,O,P)=>{if(me(T)&&("sub"===T.inline||"sup"===T.inline)){const E=V0(N,"fontSize");rm(P,B=>E(B)&&N.isEditable(B),q0(N,"fontSize",""));const R=vt(N.select("sup"===T.inline?"sub":"sup",P),N.isEditable);N.remove(R,!0)}})(f,a,0,w),$0(t,a,0,w)):f.remove(w,!0)})},p=Ns(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!gb(t,p))return c(r,o=p),void Ob(t,e,o,n);if(a){if(o)if(Ns(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,_r(i,f,r),!0)}}else m(i,o,!0);else s&&me(a)&&!ua(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const _=v.getRng();let w=_.startOffset;const x=_.startContainer.nodeValue;b=wr(f.getBody(),v.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&w>0&&w<x.length&&N.test(x.charAt(w))&&N.test(x.charAt(w-1))){const P=v.getBookmark();_.collapse(!0);let E=_r(f.dom,_,y);E=ml(E),f.formatter.apply(h,g,E),v.moveToBookmark(P)}else{let P=b?R0(b):null;b&&(null==P?void 0:P.data)===Fs||(T=f.getDoc(),O=Zu(!0).dom,b=T.importNode(O,!0),P=b.firstChild,_.insertNode(b),w=1),f.formatter.apply(h,g,b),v.setCursorLocation(P,w)}var T,O})(t,e,n):(l.setRng(qu(l.getRng())),mb(t,()=>{Kc(t,(f,h)=>{const g=h?f:_r(i,f,r);m(i,g,!1)})},Zt),t.nodeChanged()),M0(t.formatter,e).each(f=>{var h;F(vt((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return I0(v,b[0])&&F0(v,b[0])?b:[];{const y=K(b).filter(x=>I0(v,x)).toArray(),_=lt(b).filter(x=>F0(v,x)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(_)}})(h=t.selection),U0(h.dom)),h=>oy(i,h,f,n))});h=t,_t(Us,f=e)&&F(Us[f],g=>{g(h)})}var f,h;Ob(t,e,o,n)},ry=(t,e,n,o)=>{(o||t.selection.isEditable())&&aR(t,e,n,o)},ay=t=>_t(t,"vars"),sy=t=>t.selection.getStart(),iy=(t,e,n,o,r)=>hi(e,a=>{const s=t.formatter.matchNode(a,n,null!=r?r:{},o);return!ge(s)},a=>!!S0(t,a,n)||!o&&W(t.formatter.matchNode(a,n,r,!0))),ly=(t,e)=>{const n=null!=e?e:sy(t);return vt(al(t.dom,n),o=>nt(o)&&!ir(o))},dy=(t,e,n)=>{const o=ly(t,e);at(n,(r,a)=>{const s=i=>{const l=iy(t,o,a,i.similar,ay(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);ay(i)?i.callback(d,{node:c,format:a,parents:o}):F(i.callbacks,u=>u(d,{node:c,format:a,parents:o}))}};F([r.withSimilar,r.withoutSimilar],s),F(r.withVars,s)})},cy=$.explode,uy=()=>{const t={};return{addFilter:(e,n)=>{F(cy(e),o=>{_t(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>xd(t),removeFilter:(e,n)=>{F(cy(e),o=>{if(_t(t,o))if(W(n)){const r=t[o],a=vt(r.callbacks,s=>s!==n);a.length>0?r.callbacks=a:delete t[o]}else delete t[o]})}}},my=(t,e,n)=>{e.addNodeFilter("br",(o,r,a)=>{const s=$.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();s.body=1;const d=c=>c.name in s||ac(n,c);for(let c=0,u=o.length;c<u;c++){let m=o[c],p=m.parent;if(p&&d(p)&&m===p.lastChild){let f=m.prev;for(;f;){const h=f.name;if("span"!==h||"bookmark"!==f.attr("data-mce-type")){"br"===h&&(m=null);break}f=f.prev}if(m&&(m.remove(),Is(n,i,l,p))){const h=n.getElementRule(p.name);h&&(h.removeEmpty?p.remove():h.paddEmpty&&ju(t,a,d,p))}}else{let f=m;for(;p&&p.firstChild===f&&p.lastChild===f&&(f=p,!s[p.name]);)p=p.parent;if(f===p){const h=new Fe("#text",3);h.value=he,m.replace(h)}}}})},im=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const a=";base64"===r[2],s=a?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:s,base64Encoded:a})}return C.none()},fy=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let a=0;a<r.length;a++)r[a]=o.charCodeAt(a);return C.some(new Blob([r],{type:t}))},gy=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let iR=0;const py=(t,e,n)=>im(t).bind(({data:o,type:r,base64Encoded:a})=>{if(e&&!a)return C.none();{const s=a?o:btoa(o);return n(s,r)}}),hy=(t,e,n)=>{const o=t.create("blobid"+iR++,e,n);return t.add(o),o},by=(t,e,n=!1)=>py(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>fy(r,o).map(a=>hy(t,a,o)))),lm=(t,e)=>we(t,`${e}/`),{entries:vy,setPrototypeOf:yy,isFrozen:dR,getPrototypeOf:cR,getOwnPropertyDescriptor:uR}=Object;let{freeze:Ke,seal:Pn,create:mR}=Object,{apply:dm,construct:cm}=typeof Reflect<"u"&&Reflect;dm||(dm=function(t,e,n){return t.apply(e,n)}),Ke||(Ke=function(t){return t}),Pn||(Pn=function(t){return t}),cm||(cm=function(t,e){return new t(...e)});const fR=xn(Array.prototype.forEach),gR=xn(Array.prototype.pop),js=xn(Array.prototype.push),El=xn(String.prototype.toLowerCase),um=xn(String.prototype.toString),pR=xn(String.prototype.match),Dn=xn(String.prototype.replace),hR=xn(String.prototype.indexOf),bR=xn(String.prototype.trim),dn=xn(RegExp.prototype.test),Hs=(Cy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cm(Cy,e)});var Cy;function xn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return dm(t,e,o)}}function Lt(t,e,n){var o;n=null!==(o=n)&&void 0!==o?o:El,yy&&yy(t,null);let r=e.length;for(;r--;){let a=e[r];if("string"==typeof a){const s=n(a);s!==a&&(dR(e)||(e[r]=s),a=s)}t[a]=!0}return t}function ha(t){const e=mR(null);for(const[n,o]of vy(t))e[n]=o;return e}function kl(t,e){for(;null!==t;){const n=uR(t,e);if(n){if(n.get)return xn(n.get);if("function"==typeof n.value)return xn(n.value)}t=cR(t)}return function(n){return console.warn("fallback value for",n),null}}const wy=Ke(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mm=Ke(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fm=Ke(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vR=Ke(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gm=Ke(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yR=Ke(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_y=Ke(["#text"]),xy=Ke(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),pm=Ke(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ey=Ke(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Sl=Ke(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CR=Pn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wR=Pn(/<%[\w\W]*|[\w\W]*%>/gm),_R=Pn(/\${[\w\W]*}/gm),xR=Pn(/^data-[\-\w.\u00B7-\uFFFF]/),ER=Pn(/^aria-[\-\w]+$/),ky=Pn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kR=Pn(/^(?:\w+script|data):/i),SR=Pn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Sy=Pn(/^html$/i);var Ny=Object.freeze({__proto__:null,MUSTACHE_EXPR:CR,ERB_EXPR:wR,TMPLIT_EXPR:_R,DATA_ATTR:xR,ARIA_ATTR:ER,IS_ALLOWED_URI:ky,IS_SCRIPT_OR_DATA:kR,ATTR_WHITESPACE:SR,DOCTYPE_NAME:Sy});const NR=()=>typeof window>"u"?null:window;var Ry=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NR();const n=D=>t(D);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:a}=e;const{DocumentFragment:s,HTMLTemplateElement:i,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=e,h=d.prototype,g=kl(h,"cloneNode"),b=kl(h,"nextSibling"),v=kl(h,"childNodes"),y=kl(h,"parentNode");if("function"==typeof i){const D=a.createElement("template");D.content&&D.content.ownerDocument&&(a=D.content.ownerDocument)}let _,w="";const{implementation:x,createNodeIterator:N,createDocumentFragment:T,getElementsByTagName:O}=a,{importNode:P}=o;let E={};n.isSupported="function"==typeof vy&&"function"==typeof y&&x&&void 0!==x.createHTMLDocument;const{MUSTACHE_EXPR:R,ERB_EXPR:B,TMPLIT_EXPR:I,DATA_ATTR:G,ARIA_ATTR:V,IS_SCRIPT_OR_DATA:dt,ATTR_WHITESPACE:rt}=Ny;let{IS_ALLOWED_URI:ft}=Ny,ct=null;const X=Lt({},[...wy,...mm,...fm,...gm,..._y]);let tt=null;const yt=Lt({},[...xy,...pm,...Ey,...Sl]);let S=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),A=null,U=null,z=!0,j=!0,et=!1,mt=!0,Ct=!1,gt=!1,Ut=!1,ot=!1,kt=!1,Nt=!1,wt=!1,Rt=!0,fe=!1,ut=!0,St=!1,Kt={},le=null;const ke=Lt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const fn=Lt({},["audio","video","img","source","image","track"]);let Re=null;const gn=Lt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",_o="http://www.w3.org/2000/svg",pn="http://www.w3.org/1999/xhtml";let kn=pn,Ir=!1,ci=null;const Fr=Lt({},[de,_o,pn],um);let hn;const yd=["application/xhtml+xml","text/html"];let Yt,Mn=null;const Ur=a.createElement("form"),ui=function(D){return D instanceof RegExp||D instanceof Function},Kf=function(D){if(!Mn||Mn!==D){if(D&&"object"==typeof D||(D={}),D=ha(D),hn=hn=-1===yd.indexOf(D.PARSER_MEDIA_TYPE)?"text/html":D.PARSER_MEDIA_TYPE,Yt="application/xhtml+xml"===hn?um:El,ct="ALLOWED_TAGS"in D?Lt({},D.ALLOWED_TAGS,Yt):X,tt="ALLOWED_ATTR"in D?Lt({},D.ALLOWED_ATTR,Yt):yt,ci="ALLOWED_NAMESPACES"in D?Lt({},D.ALLOWED_NAMESPACES,um):Fr,Re="ADD_URI_SAFE_ATTR"in D?Lt(ha(gn),D.ADD_URI_SAFE_ATTR,Yt):gn,ze="ADD_DATA_URI_TAGS"in D?Lt(ha(fn),D.ADD_DATA_URI_TAGS,Yt):fn,le="FORBID_CONTENTS"in D?Lt({},D.FORBID_CONTENTS,Yt):ke,A="FORBID_TAGS"in D?Lt({},D.FORBID_TAGS,Yt):{},U="FORBID_ATTR"in D?Lt({},D.FORBID_ATTR,Yt):{},Kt="USE_PROFILES"in D&&D.USE_PROFILES,z=!1!==D.ALLOW_ARIA_ATTR,j=!1!==D.ALLOW_DATA_ATTR,et=D.ALLOW_UNKNOWN_PROTOCOLS||!1,mt=!1!==D.ALLOW_SELF_CLOSE_IN_ATTR,Ct=D.SAFE_FOR_TEMPLATES||!1,gt=D.WHOLE_DOCUMENT||!1,kt=D.RETURN_DOM||!1,Nt=D.RETURN_DOM_FRAGMENT||!1,wt=D.RETURN_TRUSTED_TYPE||!1,ot=D.FORCE_BODY||!1,Rt=!1!==D.SANITIZE_DOM,fe=D.SANITIZE_NAMED_PROPS||!1,ut=!1!==D.KEEP_CONTENT,St=D.IN_PLACE||!1,ft=D.ALLOWED_URI_REGEXP||ky,kn=D.NAMESPACE||pn,S=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&ui(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(S.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&ui(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(S.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(S.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(j=!1),Nt&&(kt=!0),Kt&&(ct=Lt({},[..._y]),tt=[],!0===Kt.html&&(Lt(ct,wy),Lt(tt,xy)),!0===Kt.svg&&(Lt(ct,mm),Lt(tt,pm),Lt(tt,Sl)),!0===Kt.svgFilters&&(Lt(ct,fm),Lt(tt,pm),Lt(tt,Sl)),!0===Kt.mathMl&&(Lt(ct,gm),Lt(tt,Ey),Lt(tt,Sl))),D.ADD_TAGS&&(ct===X&&(ct=ha(ct)),Lt(ct,D.ADD_TAGS,Yt)),D.ADD_ATTR&&(tt===yt&&(tt=ha(tt)),Lt(tt,D.ADD_ATTR,Yt)),D.ADD_URI_SAFE_ATTR&&Lt(Re,D.ADD_URI_SAFE_ATTR,Yt),D.FORBID_CONTENTS&&(le===ke&&(le=ha(le)),Lt(le,D.FORBID_CONTENTS,Yt)),ut&&(ct["#text"]=!0),gt&&Lt(ct,["html","head","body"]),ct.table&&(Lt(ct,["tbody"]),delete A.tbody),D.TRUSTED_TYPES_POLICY){if("function"!=typeof D.TRUSTED_TYPES_POLICY.createHTML)throw Hs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof D.TRUSTED_TYPES_POLICY.createScriptURL)throw Hs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=D.TRUSTED_TYPES_POLICY,w=_.createHTML("")}else void 0===_&&(_=function(st,ht){if("object"!=typeof st||"function"!=typeof st.createPolicy)return null;let Ft=null;const Wt="data-tt-policy-suffix";ht&&ht.hasAttribute(Wt)&&(Ft=ht.getAttribute(Wt));const Qt="dompurify"+(Ft?"#"+Ft:"");try{return st.createPolicy(Qt,{createHTML:Gt=>Gt,createScriptURL:Gt=>Gt})}catch{return console.warn("TrustedTypes policy "+Qt+" could not be created."),null}}(f,r)),null!==_&&"string"==typeof w&&(w=_.createHTML(""));Ke&&Ke(D),Mn=D}},Ix=Lt({},["mi","mo","mn","ms","mtext"]),Fx=Lt({},["foreignobject","desc","title","annotation-xml"]),mB=Lt({},["title","style","font","a","script"]),Cd=Lt({},mm);Lt(Cd,fm),Lt(Cd,vR);const Yf=Lt({},gm);Lt(Yf,yR);const zr=function(D){js(n.removed,{element:D});try{D.parentNode.removeChild(D)}catch{D.remove()}},mi=function(D,st){try{js(n.removed,{attribute:st.getAttributeNode(D),from:st})}catch{js(n.removed,{attribute:null,from:st})}if(st.removeAttribute(D),"is"===D&&!tt[D])if(kt||Nt)try{zr(st)}catch{}else try{st.setAttribute(D,"")}catch{}},Ux=function(D){let st,ht;if(ot)D="<remove></remove>"+D;else{const Qt=pR(D,/^[\r\n\t ]+/);ht=Qt&&Qt[0]}"application/xhtml+xml"===hn&&kn===pn&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const Ft=_?_.createHTML(D):D;if(kn===pn)try{st=(new p).parseFromString(Ft,hn)}catch{}if(!st||!st.documentElement){st=x.createDocument(kn,"template",null);try{st.documentElement.innerHTML=Ir?w:Ft}catch{}}const Wt=st.body||st.documentElement;return D&&ht&&Wt.insertBefore(a.createTextNode(ht),Wt.childNodes[0]||null),kn===pn?O.call(st,gt?"html":"body")[0]:gt?st.documentElement:Wt},zx=function(D){return N.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},wd=function(D){return"object"==typeof l?D instanceof l:D&&"object"==typeof D&&"number"==typeof D.nodeType&&"string"==typeof D.nodeName},xo=function(D,st,ht){E[D]&&fR(E[D],Ft=>{Ft.call(n,st,ht,Mn)})},jx=function(D){let st;if(xo("beforeSanitizeElements",D,null),(ht=D)instanceof m&&("string"!=typeof ht.nodeName||"string"!=typeof ht.textContent||"function"!=typeof ht.removeChild||!(ht.attributes instanceof u)||"function"!=typeof ht.removeAttribute||"function"!=typeof ht.setAttribute||"string"!=typeof ht.namespaceURI||"function"!=typeof ht.insertBefore||"function"!=typeof ht.hasChildNodes))return zr(D),!0;var ht;const Ft=Yt(D.nodeName);if(xo("uponSanitizeElement",D,{tagName:Ft,allowedTags:ct}),D.hasChildNodes()&&!wd(D.firstElementChild)&&(!wd(D.content)||!wd(D.content.firstElementChild))&&dn(/<[/\w]/g,D.innerHTML)&&dn(/<[/\w]/g,D.textContent))return zr(D),!0;if(!ct[Ft]||A[Ft]){if(!A[Ft]&&$x(Ft)&&(S.tagNameCheck instanceof RegExp&&dn(S.tagNameCheck,Ft)||S.tagNameCheck instanceof Function&&S.tagNameCheck(Ft)))return!1;if(ut&&!le[Ft]){const Wt=y(D)||D.parentNode,Qt=v(D)||D.childNodes;if(Qt&&Wt)for(let Gt=Qt.length-1;Gt>=0;--Gt)Wt.insertBefore(g(Qt[Gt],!0),b(D))}return zr(D),!0}return D instanceof d&&!function(Wt){let Qt=y(Wt);Qt&&Qt.tagName||(Qt={namespaceURI:kn,tagName:"template"});const Gt=El(Wt.tagName),ee=El(Qt.tagName);return!!ci[Wt.namespaceURI]&&(Wt.namespaceURI===_o?Qt.namespaceURI===pn?"svg"===Gt:Qt.namespaceURI===de?"svg"===Gt&&("annotation-xml"===ee||Ix[ee]):Boolean(Cd[Gt]):Wt.namespaceURI===de?Qt.namespaceURI===pn?"math"===Gt:Qt.namespaceURI===_o?"math"===Gt&&Fx[ee]:Boolean(Yf[Gt]):Wt.namespaceURI===pn?!(Qt.namespaceURI===_o&&!Fx[ee])&&!(Qt.namespaceURI===de&&!Ix[ee])&&!Yf[Gt]&&(mB[Gt]||!Cd[Gt]):!("application/xhtml+xml"!==hn||!ci[Wt.namespaceURI]))}(D)?(zr(D),!0):"noscript"!==Ft&&"noembed"!==Ft&&"noframes"!==Ft||!dn(/<\/no(script|embed|frames)/i,D.innerHTML)?(Ct&&3===D.nodeType&&(st=D.textContent,st=Dn(st,R," "),st=Dn(st,B," "),st=Dn(st,I," "),D.textContent!==st&&(js(n.removed,{element:D.cloneNode()}),D.textContent=st)),xo("afterSanitizeElements",D,null),!1):(zr(D),!0)},Hx=function(D,st,ht){if(Rt&&("id"===st||"name"===st)&&(ht in a||ht in Ur))return!1;if((!j||U[st]||!dn(G,st))&&(!z||!dn(V,st)))if(!tt[st]||U[st]){if(!($x(D)&&(S.tagNameCheck instanceof RegExp&&dn(S.tagNameCheck,D)||S.tagNameCheck instanceof Function&&S.tagNameCheck(D))&&(S.attributeNameCheck instanceof RegExp&&dn(S.attributeNameCheck,st)||S.attributeNameCheck instanceof Function&&S.attributeNameCheck(st))||"is"===st&&S.allowCustomizedBuiltInElements&&(S.tagNameCheck instanceof RegExp&&dn(S.tagNameCheck,ht)||S.tagNameCheck instanceof Function&&S.tagNameCheck(ht))))return!1}else if(!Re[st]&&!dn(ft,Dn(ht,rt,""))&&("src"!==st&&"xlink:href"!==st&&"href"!==st||"script"===D||0!==hR(ht,"data:")||!ze[D])&&(!et||dn(dt,Dn(ht,rt,"")))&&ht)return!1;return!0},$x=function(D){return D.indexOf("-")>0},Vx=function(D){let st,ht,Ft,Wt;xo("beforeSanitizeAttributes",D,null);const{attributes:Qt}=D;if(!Qt)return;const Gt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:tt};for(Wt=Qt.length;Wt--;){st=Qt[Wt];const{name:ee,namespaceURI:Oa}=st;ht="value"===ee?st.value:bR(st.value);const gB=ht;if(Ft=Yt(ee),Gt.attrName=Ft,Gt.attrValue=ht,Gt.keepAttr=!0,Gt.forceKeepAttr=void 0,xo("uponSanitizeAttribute",D,Gt),ht=Gt.attrValue,Gt.forceKeepAttr)continue;if(!Gt.keepAttr){mi(ee,D);continue}if(!mt&&dn(/\/>/i,ht)){mi(ee,D);continue}Ct&&(ht=Dn(ht,R," "),ht=Dn(ht,B," "),ht=Dn(ht,I," "));const qx=Yt(D.nodeName);if(Hx(qx,Ft,ht)){if(!fe||"id"!==Ft&&"name"!==Ft||(mi(ee,D),ht="user-content-"+ht),_&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!Oa)switch(f.getAttributeType(qx,Ft)){case"TrustedHTML":ht=_.createHTML(ht);break;case"TrustedScriptURL":ht=_.createScriptURL(ht)}if(ht!==gB)try{Oa?D.setAttributeNS(Oa,ee,ht):D.setAttribute(ee,ht)}catch{mi(ee,D)}}else mi(ee,D)}xo("afterSanitizeAttributes",D,null)},fB=function D(st){let ht;const Ft=zx(st);for(xo("beforeSanitizeShadowDOM",st,null);ht=Ft.nextNode();)xo("uponSanitizeShadowNode",ht,null),jx(ht)||(ht.content instanceof s&&D(ht.content),Vx(ht));xo("afterSanitizeShadowDOM",st,null)};return n.sanitize=function(D){let st,ht,Ft,Wt,Qt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ir=!D,Ir&&(D="\x3c!--\x3e"),"string"!=typeof D&&!wd(D)){if("function"!=typeof D.toString)throw Hs("toString is not a function");if("string"!=typeof(D=D.toString()))throw Hs("dirty is not a string, aborting")}if(!n.isSupported)return D;if(Ut||Kf(Qt),n.removed=[],"string"==typeof D&&(St=!1),St){if(D.nodeName){const Oa=Yt(D.nodeName);if(!ct[Oa]||A[Oa])throw Hs("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof l)st=Ux("\x3c!----\x3e"),ht=st.ownerDocument.importNode(D,!0),1===ht.nodeType&&"BODY"===ht.nodeName||"HTML"===ht.nodeName?st=ht:st.appendChild(ht);else{if(!kt&&!Ct&&!gt&&-1===D.indexOf("<"))return _&&wt?_.createHTML(D):D;if(st=Ux(D),!st)return kt?null:wt?w:""}st&&ot&&zr(st.firstChild);const Gt=zx(St?D:st);for(;Ft=Gt.nextNode();)jx(Ft)||(Ft.content instanceof s&&fB(Ft.content),Vx(Ft));if(St)return D;if(kt){if(Nt)for(Wt=T.call(st.ownerDocument);st.firstChild;)Wt.appendChild(st.firstChild);else Wt=st;return(tt.shadowroot||tt.shadowrootmode)&&(Wt=P.call(o,Wt,!0)),Wt}let ee=gt?st.outerHTML:st.innerHTML;return gt&&ct["!doctype"]&&st.ownerDocument&&st.ownerDocument.doctype&&st.ownerDocument.doctype.name&&dn(Sy,st.ownerDocument.doctype.name)&&(ee="<!DOCTYPE "+st.ownerDocument.doctype.name+">\n"+ee),Ct&&(ee=Dn(ee,R," "),ee=Dn(ee,B," "),ee=Dn(ee,I," ")),_&&wt?_.createHTML(ee):ee},n.setConfig=function(D){Kf(D),Ut=!0},n.clearConfig=function(){Mn=null,Ut=!1},n.isValidAttribute=function(D,st,ht){Mn||Kf({});const Ft=Yt(D),Wt=Yt(st);return Hx(Ft,Wt,ht)},n.addHook=function(D,st){"function"==typeof st&&(E[D]=E[D]||[],js(E[D],st))},n.removeHook=function(D){if(E[D])return gR(E[D])},n.removeHooks=function(D){E[D]&&(E[D]=[])},n.removeAllHooks=function(){E={}},n}();const Ay=$.each,RR=$.trim,AR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],TR={ftp:21,http:80,https:443,mailto:25},OR=["img","video"],Ty=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(a=n,(W(r=t.allow_svg_data_urls)?!r:!W(a)||!Mt(OR,a))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,a};class En{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=mr.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Ty(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=RR(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const a=0===e.indexOf("//");if(0!==e.indexOf("/")||a||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new En(document.location.href).directory;if(""===(null==o?void 0:o.protocol))e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&Ay(AR,(i,l)=>{let d=s[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),a&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new En(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let a=this.toRelPath(this.path,n.path);return n.query&&(a+="?"+n.query),n.anchor&&(a+="#"+n.anchor),a}toAbsolute(e,n){const o=new En(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?TR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,a=0,s="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){a=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){a=o+1;break}if(1===a)return n;for(o=0,r=i.length-(a-1);o<r;o++)s+="../";for(o=a-1,r=l.length;o<r;o++)s+=o!==a-1?"/"+l[o]:l[o];return s}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",a=e.split("/"),s=n.split("/"),i=[];Ay(a,u=>{u&&i.push(u)});const l=[];for(let u=s.length-1;u>=0;u--)0!==s[u].length&&"."!==s[u]&&(".."!==s[u]?o>0?o--:l.push(s[u]):o++);const d=i.length-o;let c;return c=d<=0?Xo(l).join("/"):i.slice(0,d).join("/")+"/"+Xo(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const BR=$.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hm="data-mce-type";let Oy=0;const By=(t,e,n,o,r)=>{var a,s,i,l;const d=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(a=t.nodeValue)&&void 0!==a?a:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=null==r?void 0:r.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(W(r)&&(r.allowedTags[u]=!0));if(1!==t.nodeType||"body"===u)return;const m=k(t),p=Ha(m,hm),f=Ge(m,"data-mce-bogus");if(!p&&it(f))return void("all"===f?Vt(m):go(m));const h=n.getElementRule(u);if(!d||h){if(W(r)&&(r.allowedTags[u]=!0),d&&h&&!p){if(F(null!==(i=h.attributesForced)&&void 0!==i?i:[],g=>{_e(m,g.name,"{$uid}"===g.value?"mce_"+Oy++:g.value)}),F(null!==(l=h.attributesDefault)&&void 0!==l?l:[],g=>{Ha(m,g.name)||_e(m,g.name,"{$uid}"===g.value?"mce_"+Oy++:g.value)}),h.attributesRequired&&!Xt(h.attributesRequired,g=>Ha(m,g))||h.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return null==b||0===b.length})(m))return void go(m);h.outputName&&h.outputName!==u&&((g,b)=>{const v=((_,w)=>{const x=pe(w),N=Eg(_);return io(x,N),x})(g,b);fo(g,v);const y=Ee(g);ar(v,y),Vt(g)})(m,h.outputName)}}else _t(c,u)?Vt(m):go(m)},Py=(t,e,n,o,r,a)=>"html"!==n&&!dr(o)||!(r in BR&&Ty(t,a,o))&&(!t.validate||e.isValid(o,r)||we(r,"data-")||we(r,"aria-")),Dy=(t,e)=>t.hasAttribute(hm)&&("id"===e||"class"===e||"style"===e),Ly=(t,e)=>t in e.getBoolAttrs(),PR=(t,e,n,o)=>{const{attributes:r}=t;for(let a=r.length-1;a>=0;a--){const s=r[a],i=s.name,l=s.value;Py(e,n,o,t.tagName.toLowerCase(),i,l)||Dy(t,i)?Ly(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},LR=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`)};return Ry().sanitize(t,n),t.innerHTML},My=$.makeMap,Iy=$.extend,Fy=(t,e,n,o)=>{const r=t.name,a=r in n&&"title"!==r&&"textarea"!==r&&"noscript"!==r,s=e.childNodes;for(let i=0,l=s.length;i<l;i++){const d=s[i],c=new Fe(d.nodeName.toLowerCase(),d.nodeType);if(nt(d)){const u=d.attributes;for(let m=0,p=u.length;m<p;m++){const f=u[m];c.attr(f.name,f.value)}dr(c.name)&&(o(d),c.value=d.innerHTML)}else H(d)?(c.value=d.data,a&&(c.raw=!0)):(Ao(d)||hE(d)||bE(d))&&(c.value=d.data);dr(c.name)||Fy(c,d,n,o),t.append(c)}},ba=(t={},e=Po())=>{const n=uy(),o=uy(),r={validate:!0,root_name:"body",sanitize:!0,...t},a=new DOMParser,s=((h,g)=>{const b=(()=>{let v=[];const y=()=>v[v.length-1];return{track:_=>{Zd(_)&&v.push(_);let w=y();return w&&!w.contains(_)&&(v.pop(),w=y()),cp(w)},current:()=>cp(y()),reset:()=>{v=[]}}})();if(h.sanitize){const v=((t,e,n)=>{const o=Ry();return o.addHook("uponSanitizeElement",(r,a)=>{By(r,t,e,n.track(r),a)}),o.addHook("uponSanitizeAttribute",(r,a)=>{((s,i,l,d,c)=>{const u=s.tagName.toLowerCase(),{attrName:m,attrValue:p}=c;c.keepAttr=Py(i,l,d,u,m,p),c.keepAttr?(c.allowedAttributes[m]=!0,Ly(m,l)&&(c.attrValue=m),i.allow_svg_data_urls&&we(p,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Dy(s,m)&&(c.forceKeepAttr=!0)})(r,t,e,n.current(),a)}),o})(h,g,b);return{sanitizeHtmlElement:(_,w)=>{v.sanitize(_,((x,N)=>{const T={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return T.PARSER_MEDIA_TYPE=N,x.allow_script_urls?T.ALLOWED_URI_REGEXP=/.*/:x.allow_html_data_urls&&(T.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),T})(h,w)),v.removed=[],b.reset()},sanitizeNamespaceElement:LR}}return{sanitizeHtmlElement:(v,y)=>{const _=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=_.nextNode();){const x=b.track(w);By(w,h,g,x),nt(w)&&PR(w,h,g,x)}b.reset()},sanitizeNamespaceElement:xt}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,g)=>{const b=it(g.attr(hm)),v=1===g.type&&!_t(h,g.name)&&!ac(e,g)&&!dr(g.name);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=r.validate,y=null!==(b=g.context)&&void 0!==b?b:r.root_name,_=((B,I,G="html")=>{const V="xhtml"===G?"application/xhtml+xml":"text/html",dt=_t(e.getSpecialElements(),I.toLowerCase()),rt=dt?`<${I}>${B}</${I}>`:B,ct=a.parseFromString("xhtml"===G?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${rt}</body></html>`:`<body>${rt}</body>`,V).body;return s.sanitizeHtmlElement(ct,V),dt?ct.firstChild:ct})(h,y,g.format);ec(e,_);const w=new Fe(y,11);Fy(w,_,e.getSpecialElements(),s.sanitizeNamespaceElement),_.innerHTML="";const[x,N]=((B,I,G,V)=>{const dt=G.validate,rt=I.getNonEmptyElements(),ft=I.getWhitespaceElements(),ct=Iy(My("script,style,head,html,body,title,meta,param"),I.getBlockElements()),X=Sp(I),tt=/[ \t\r\n]+/g,yt=/^[ \t\r\n]+/,S=/[ \t\r\n]+$/,A=j=>{let et=j.parent;for(;W(et);){if(et.name in ft)return!0;et=et.parent}return!1},U=j=>j.name in ct||ac(I,j)||dr(j.name)&&j.parent===B,z=(j,et)=>!W(et?j.prev:j.next)&&!ne(j.parent)&&U(j.parent)&&(j.parent!==B||!0===V.isRootContent);return[j=>{var et,Ct,gt;if(3===j.type&&!A(j)){let mt=null!==(et=j.value)&&void 0!==et?et:"";mt=mt.replace(tt," "),gt=U,(W(Ct=j.prev)&&(gt(Ct)||"br"===Ct.name)||z(j,!0))&&(mt=mt.replace(yt,"")),0===mt.length?j.remove():j.value=mt}},j=>{var et,gt,Ut;if(1===j.type){const mt=I.getElementRule(j.name);if(dt&&mt){const Ct=Is(I,rt,ft,j);mt.paddInEmptyBlock&&Ct&&(gt=>{let Ut=gt;for(;W(Ut);){if(Ut.name in X)return Is(I,rt,ft,Ut);Ut=Ut.parent}return!1})(j)?ju(G,V,U,j):mt.removeEmpty&&Ct?U(j)?j.remove():j.unwrap():mt.paddEmpty&&(Ct||x0(gt=j,"#text")&&(null===(Ut=null==gt?void 0:gt.firstChild)||void 0===Ut?void 0:Ut.value)===he)&&ju(G,V,U,j)}}else if(3===j.type&&!A(j)){let mt=null!==(et=j.value)&&void 0!==et?et:"";(j.next&&U(j.next)||z(j,!1))&&(mt=mt.replace(S,"")),0===mt.length?j.remove():j.value=mt}}]})(w,e,r,g),T=[],P={nodes:{},attributes:{}},E=B=>C0(l(),u(),B,P);if(((B,I,G)=>{const V=[];for(let dt=B,rt=dt;dt;rt=dt,dt=dt.walk()){const ft=dt;F(I,ct=>ct(ft)),ne(ft.parent)&&ft!==B?dt=rt:V.push(ft)}for(let dt=V.length-1;dt>=0;dt--){const rt=V[dt];F(G,ft=>ft(rt))}})(w,[x,E],[N,v?B=>{return G=T,void(Vu(e,I=B)&&G.push(I));var I,G}:xt]),T.reverse(),v&&T.length>0)if(g.context){const{pass:B,fail:I}=Ze(T,G=>G.parent===w);$u(I,e,w,E),g.invalid=B.length>0}else $u(T,e,w,E);const R=((B,I)=>{var G;const V=null!==(G=I.forced_root_block)&&void 0!==G?G:B.forced_root_block;return!1===V?"":!0===V?"p":V})(r,g);return R&&("body"===w.name||g.isRootContent)&&((B,I)=>{const G=Iy(My("script,style,head,html,body,title,meta,param"),e.getBlockElements()),V=/^[ \t\r\n]+/,dt=/[ \t\r\n]+$/;let rt=B.firstChild,ft=null;const ct=X=>{var tt,yt;X&&(rt=X.firstChild,rt&&3===rt.type&&(rt.value=null===(tt=rt.value)||void 0===tt?void 0:tt.replace(V,"")),rt=X.lastChild,rt&&3===rt.type&&(rt.value=null===(yt=rt.value)||void 0===yt?void 0:yt.replace(dt,"")))};if(e.isValidChild(B.name,I.toLowerCase())){for(;rt;){const X=rt.next;p(G,rt)?(ft||(ft=new Fe(I,1),ft.attr(r.forced_root_block_attrs),B.insert(ft,rt)),ft.append(rt)):(ct(ft),ft=null),rt=X}ct(ft)}})(w,R),g.invalid||w0(P,g),w}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&my(e,t,n),t.addAttributeFilter("href",r=>{let a=r.length;const s=i=>{const l=i?$.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;a--;){const i=r[a];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",s(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let a,s,i,l,d=r.length;for(;d--;)if(l=r[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,a=l.lastChild;a&&i;)s=a.prev,i.insert(a,l),a=s}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let a,s,i=r.length;for(;i--;)if(a=r[i],s=a.parent,s&&("ul"===s.name||"ol"===s.name))if(a.prev&&"li"===a.prev.name)a.prev.append(a);else{const l=new Fe("li",1);l.attr("style","list-style-type: none"),a.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var a;let s=r.length;for(;s--;){const i=r[s],l=null!==(a=i.attr("class"))&&void 0!==a?a:"",d=$.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=o["*"];f&&f[m]&&(p=!0),f=o[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((r,a)=>{const{blob_cache:s}=a;if(s){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===Ot.transparentSrc||W(c.attr("data-mce-placeholder"))||(c=>W(c.attr("data-mce-bogus")))(l)||ne(d)||by(s,d,!0).each(c=>{l.attr("src",c.blobUri())})};r.addAttributeFilter("src",l=>F(l,i))}})(t,e),e.convert_unsafe_embeds&&t.addNodeFilter("object,embed",r=>F(r,a=>{a.replace(((s,i,l,d,c)=>{let u;u=ge(s)?"iframe":lm(s,"image")?"img":lm(s,"video")?"video":lm(s,"audio")?"audio":"iframe";const m=new Fe(u,1);return m.attr("audio"===u?{src:i}:{src:i,width:l,height:d}),"audio"!==u&&"video"!==u||m.attr("controls",""),"iframe"===u&&c&&m.attr("sandbox",""),m})(a.attr("type"),a.attr("object"===a.name?"data":"src"),a.attr("width"),a.attr("height"),e.sandbox_iframes))})),e.sandbox_iframes&&t.addNodeFilter("iframe",r=>F(r,a=>a.attr("sandbox","")))})(f,r),(g=r).inline_styles&&((t,e,n)=>{var o;const r=mc();var a,s,i;e.convert_fonts_to_spans&&(a=t,s=r,i=$.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),a.addNodeFilter("font",l=>{F(l,d=>{const c=s.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&wi(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",s.serialize(c)),f=d,F(["color","face","size"],g=>{f.attr(g,null)})})})),((a,s,i)=>{a.addNodeFilter("strike",l=>{const d="html4"!==s.type;F(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(f,g,e),f;var g},Uy=(t,e,n)=>{const o=Cl(a=t)?Uo({validate:!1}).serialize(a):a,r=e(o);var a;if(r.isDefaultPrevented())return r;if(Cl(t)){if(r.content!==o){const a=ba({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:t.name});return{...r,content:a}}return{...r,content:t}}return r},zy=(t,e)=>{if(e.no_events)return He.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?He.error(Db(t,{content:"",...n}).content):He.value(n)}},jy=(t,e,n)=>n.no_events?e:Uy(e,r=>Db(t,{...n,content:r}),{sanitize:Bc(t),sandbox_iframes:Pc(t)}).content,bm=(t,e)=>{if(e.no_events)return He.value(e);{const n=Uy(e.content,o=>{return r=t,a={...e,content:o},r.dispatch("BeforeSetContent",a);var r,a},{sanitize:Bc(t),sandbox_iframes:Pc(t)});return n.isDefaultPrevented()?(Pb(t,n),He.error(void 0)):He.value(n)}},vm=(t,e,n)=>{n.no_events||Pb(t,{...n,content:e})},ym=(t,e,n)=>({element:t,width:e,rows:n}),Hy=(t,e)=>({element:t,cells:e}),MR=(t,e)=>({x:t,y:e}),$y=(t,e)=>lo(t,e).bind(wi).getOr(1),IR=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},Vy=t=>Oe(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),qy=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let a=0;a<r.length;a++)if(Dt(r[a],e))return C.some(MR(a,o))}return C.none()},Wy=(t,e,n,o,r)=>{const a=[],s=t.rows;for(let i=n;i<=r;i++){const l=s[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);a.push(Hy(s[i].element,d))}return a},FR=t=>((e,n)=>{const o=pr(e.element),r=pe("tbody");return ar(r,n),ie(o,r),o})(t,At(t.rows,n=>{const o=At(n.cells,a=>{const s=Hp(a);return xe(s,"colspan"),xe(s,"rowspan"),s}),r=pr(n.element);return ar(r,o),r})),Ky=()=>au([]),Nl=(t,e)=>e>=0&&e<t.length&&ca(t.charAt(e)),Yy=t=>Xe(t.innerText),Gy=t=>nt(t)?t.outerHTML:H(t)?mr.encodeRaw(t.data,!1):Ao(t)?"\x3c!--"+t.data+"--\x3e":"",$R=Zo(()=>document.implementation.createHTMLDocument("undo")),Rl=t=>{const e=t.serializer.getTempAttrs(),n=xv(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:vt(At(bt(n.childNodes),bn(Xe,Gy)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Xe(n.innerHTML),bookmark:null,beforeBookmark:null}},Cm=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;F(n,a=>{var s,i;0===a[0]?r++:1===a[0]?(((s,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);s.hasChildNodes()&&l<s.childNodes.length?s.insertBefore(d,s.childNodes[l]):s.appendChild(d)})(o,a[1],r),r++):2===a[0]&&(i=r,(s=o).hasChildNodes()&&i<s.childNodes.length&&s.removeChild(s.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,a=new Array(r),s=new Array(r),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let _,w,x,N,T;for(a[1+y]=u,s[1+y]=m+1,_=0;_<=y;++_){for(w=-_;w<=_;w+=2){for(x=w+y,a[x]=w===-_||w!==_&&a[x-1]<a[x+1]?a[x+1]:a[x-1]+1,N=a[x],T=N-u+p-w;N<m&&T<f&&n[N]===o[T];)a[x]=++N,++T;if(b%2!=0&&b-_<=w&&w<=b+_&&s[x-b]<=a[x])return l(s[x-b],w+u-p,m,f)}for(w=b-_;w<=b+_;w+=2){for(x=w+y-b,s[x]=w===b-_||w!==b+_&&s[x+1]<=s[x-1]?s[x+1]-1:s[x-1],N=s[x]-1,T=N-u+p-w;N>=u&&T>=p&&n[N]===o[T];)s[x]=N--,T--;if(b%2==0&&-_<=w&&w<=_&&s[x]<=a[x+b])return l(s[x],w+u-p,m,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(At(bt(e.childNodes),Gy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!W(o)||!ob(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},wm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Xy=t=>{const e=pe("body",$R());return Ri(e,wm(t)),F(De(e,"*[data-mce-bogus]"),go),Vg(e)},_m=(t,e)=>{return!(!t||!e)&&(o=e,!(wm(t)!==wm(o))||((n,o)=>Xy(n)===Xy(o))(t,e));var o},xm=t=>0===t.get(),Al=(t,e,n)=>{xm(n)&&(t.typing=e)},Qy=(t,e)=>{t.typing&&(Al(t,!1,e),t.add())},Jy=t=>({init:{bindEvents:xt},undoManager:{beforeChange:(e,n)=>{return o=t,a=n,void(xm(e)&&a.set(Sc(o.selection)));var o,a},add:(e,n,o,r,a,s)=>((i,l,d,c,u,m,p)=>{const f=Rl(i),h=$.extend(m||{},f);if(!xm(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&_m(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=Yk(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=Sc(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,a,s),undo:(e,n,o)=>((r,a,s,i)=>{let l;return a.typing&&(a.add(),a.typing=!1,Al(a,!1,s)),i.get()>0&&(i.set(i.get()-1),l=a.data[i.get()],Cm(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,a)=>{let s;return r.get()<a.length-1&&(r.set(r.get()+1),s=a[r.get()],Cm(o,s,!1),o.setDirty(!0),o.dispatch("Redo",{level:s})),s})(t,e,n),clear:(e,n)=>{return o=t,a=n,(r=e).data=[],a.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,a},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!_m(Rl(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return s=o,Qy(r=e,n),r.beforeChange(),r.ignore(s),r.add();var r,s},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((a,s,i,l,d)=>{if(s.transact(l)){const c=s.data[i.get()].bookmark,u=s.data[i.get()-1];Cm(a,u,!0),s.transact(d)&&(s.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Ju(t,e,n,o,r),matchAll:(e,n)=>((o,r,a)=>{const s=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Gn(o,d,u,a)&&(i[u]=!0,s.push(u))}},o.dom.getRoot()),s})(t,e,n),matchNode:(e,n,o,r)=>Gn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),a=n.dom;if(r&&n.selection.isEditable()){const s=n.selection.getStart(),i=al(a,s);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!an(d))return!0;for(let c=i.length-1;c>=0;c--)if(a.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=a=>Dt(a,k(n.getBody()));return C.from(n.selection.getStart(!0)).bind(a=>Gu(k(a),s=>se(o,i=>{return Gn(n,s.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>ry(t,e,n,o),remove:(e,n,o,r)=>ey(t,e,n,o,r),toggle:(e,n,o)=>((r,a,s,i)=>{const l=r.formatter.get(a);l&&(!Ju(r,a,s,i)||"toggle"in l[0]&&!l[0].toggle?ry(r,a,s,i):ey(r,a,s,i))})(t,e,n,o),formatChanged:(e,n,o,r,a)=>{return((m,p,f,h,g,b)=>{const v=p.get();F(f.split(","),y=>{const _=$t(v,y).getOrThunk(()=>{const x={withSimilar:{state:ve(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ve(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=x,x}),w=()=>{const x=ly(m);return iy(m,x,y,g,b).isSome()};if(ge(b)){const x=g?_.withSimilar:_.withoutSimilar;x.callbacks.push(h),1===x.callbacks.length&&x.state.set(w())}else _.withVars.push({state:ve(w()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=o,r,a),{unbind:()=>((m,p,f)=>{const h=m.get();F(p.split(","),g=>$t(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:vt(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:vt(b.withoutSimilar.callbacks,v=>v!==f)},withVars:vt(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(Y("tree"===o.format?new Fe("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?$.trim(Xe(xv(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((r,a)=>{const s=r.getDoc(),i=Ro(k(r.getBody())),l=pe("div",s);_e(l,"data-mce-bogus","all"),Si(l,{position:"fixed",left:"-9999999px",top:"0"}),Ri(l,a.innerHTML),Ev(l),kv(l);const d=Md(u=i)?u:k(uo(u).dom.body);var u;ie(d,l);const c=Xe(l.dom.innerText);return Vt(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,a)=>{const s=Le(r),i=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return a.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Di(k(n))&&it(o)?$.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,a=n,C.from((o=t).getBody()).map(s=>Cl(r)?((i,l,d,c)=>{_0(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=Uo({validate:!1},i.schema).serialize(d),m=Xe(Di(k(l))?u:$.trim(u));return Yu(i,m,c.no_selection),{content:d,html:m}})(o,s,r,a):((i,l,d,c)=>{if(0===(d=Xe(d)).length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=Le(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,vs(i),d)):d||(d=u),Yu(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=Uo({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=Di(k(l))?d:$.trim(d);return Yu(i,u,c.no_selection),{content:u,html:u}}})(o,s,r,a)).getOr({content:r,html:Cl(a.content)?"":a.content});var o,r,a},insertContent:(e,n)=>eR(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,a=W(o)?o:n.getBody();F(r.select("table,a",a),s=>{switch(s.nodeName){case"TABLE":const i=tS(n),l=r.getAttrib(s,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(s,i):r.addClass(s,i);break;case"A":if(!r.getAttrib(s,"href")){const d=r.getAttrib(s,"name")||s.id,c=Bh(n);d&&n.hasVisual?r.addClass(s,c):r.removeClass(s,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,a={})=>{const s=(i=a,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return zy(o,s).fold(ce,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(x=>x.nodeName).getOr("div").toLowerCase(),b=k(m.cloneContents());Ev(b),kv(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=Yy(v),_=Xe(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Nl(_,0)||Nl(_,_.length-1)){const w=f.getOr(h),x=Yy(w),N=x.indexOf(y);return-1===N?y:(Nl(x,N-1)?" ":"")+y+(Nl(x,N+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=vu(m,$c(g)),v=p.contextual?((t,e,n)=>{const o=db(e,t);return o.length>0?((t,e)=>{return(n=t,o=e[0],Ga(o,"table",Z(Dt,n))).bind(n=>{const o=e[0],r=e[e.length-1],a=(s=>{const i=ym(pr(s),0,[]);return F(De(s,"tr"),(l,d)=>{F(De(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=$y(g,"rowspan"),v=$y(g,"colspan"),y=m.rows;for(let _=f;_<f+b;_++){y[_]||(y[_]=Hy(Hp(h),[]));for(let w=p;w<p+v;w++)y[_].cells[w]=_===f&&w===p?g:pr(g)}})(i,((m,p,f)=>{for(;IR(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),ym(i.element,Vy(i.rows),i.rows)})(n);return(s=a,i=o,l=r,qy(s,i).bind(d=>qy(s,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?Wy(u,f,h,g,b):Wy(u,f,b,g,h);return ym(u.element,Vy(v),v)})(s,d,c)))).map(s=>au([FR(s)]));var s,i,l}).getOrThunk(Ky);var n,o})(t,o):(r=t,s=n,(a=e).length>0&&a[0].collapsed?Ky():(i=r,d=s,((c,u)=>{const m=Oe(u,(p,f)=>(ie(f,p),f),c);return u.length>0?au([m]):m})(k((l=a[0]).cloneContents()),((t,e,n)=>{const o=k(e.commonAncestorContainer),r=yo(o,t),a=vt(r,l=>n.isWrapper(Tt(l))),s=(d=e,ae(l=r,c=>"li"===Tt(c)&&qc(c,d)).fold(Y([]),c=>{return(u=l,ae(u,m=>"ul"===Tt(m)||"ol"===Tt(m))).map(u=>{const m=pe(Tt(u)),p=Fa(Fd(u),(f,h)=>we(h,"list-style"));return Si(m,p),[pe("li"),m]}).getOr([]);var u})),i=a.concat(s.length?s:(l=>es(l)?yn(l).filter(Yd).fold(Y([]),d=>[l,d]):Yd(l)?[l]:[])(o));var l,d;return At(i,pr)})(i,l,d))));var r,a,s,i,l,d})(k(m.getBody()),b,m.schema).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return jy(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(hv(k(t.getBody())).isNone()){const o=Wa('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());ie(o,k(e.extractContents())),e.insertNode(o.dom),yn(o).each(r=>r.dom.normalize()),(n=o,((r,a)=>{const s=i=>{const l=Ee(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(a(c))return C.some(c);const u=s(c);if(u.isSome())return u}return C.none()};return s(r)})(n,gv)).map(r=>{var a;t.selection.setCursorLocation(r.dom,"img"===Tt(a=r)?1:ep(a).fold(()=>Ee(a).length,s=>s.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=k(t.getBody()),hv(n).each(o=>{const r=e.selection.getBookmark();go(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),Xn=t=>_t(t.plugins,"rtc"),Em=t=>t.rtcInstance?t.rtcInstance:Jy(t),re=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Zy=t=>re(t).init.bindEvents(),tC=t=>0===t.dom.length?(Vt(t),C.none()):C.some(t),eC=(t,e,n,o,r)=>{t.bind(a=>((o?Ru:hl)(a.dom,o?a.dom.length:0,r),e.filter(tn).map(s=>((i,l,d,c,u)=>{const m=i.dom,p=l.dom,f=c?m.length:p.length;c?(Au(m,p,u,!1,!c),d.setStart(p,f)):(Au(p,m,u,!1,!c),d.setEnd(p,f))})(a,s,n,o,r)))).orThunk(()=>{return(s=e,i=o,s.filter(l=>As.isBookmarkNode(l.dom)).bind(i?Ya:er)).or(e).filter(tn).map(s=>((i,l,d)=>{yn(i).each(c=>{const u=i.dom;l&&Ds(c,L(u,0),d)?hl(u,0,d):!l&&Ls(c,L(u,u.length),d)&&Ru(u,u.length,d)})})(s,o,r));var s,i})},nC=(t,e,n)=>{if(_t(t,e)){const o=vt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},oC=t=>!(!t||!t.ownerDocument)&&co(k(t.ownerDocument),k(t)),rC=(t,e,n,o)=>{let r,a;const{selectorChangedWithUnbind:s}=((g,b)=>{let v,y;const _=(x,N)=>ae(N,T=>g.is(T,x)),w=x=>g.getParents(x,void 0,g.getRoot());return{selectorChangedWithUnbind:(x,N)=>(v||(v={},y={},b.on("NodeChange",T=>{const O=T.element,P=w(O),E={};at(v,(R,B)=>{_(B,P).each(I=>{y[B]||(F(R,G=>{G(!0,{node:I,selector:B,parents:P})}),y[B]=R),E[B]=R})}),at(y,(R,B)=>{E[B]||(delete y[B],F(R,I=>{I(!1,{node:O,selector:B,parents:P})}))})})),v[x]||(v[x]=[]),v[x].push(N),_(x,w(b.selection.getStart())).each(()=>{y[x]=v[x]}),{unbind:()=>{nC(v,x,N),nC(y,x,N)}})}})(t,o),i=(g,b)=>((v,y,_={})=>{const w=(x=_,N=y,{format:"html",...x,set:!0,selection:!0,content:N});var x,N;bm(v,w).each(x=>{const N=((O,P)=>{if("raw"!==P.format){const E=O.selection.getRng(),R=O.dom.getParent(E.commonAncestorContainer,O.dom.isBlock),B=R?{context:R.nodeName.toLowerCase()}:{},I=O.parser.parse(P.content,{forced_root_block:!1,...B,...P});return Uo({validate:!1},O.schema).serialize(I)}return P.content})(v,x),T=v.selection.getRng();((O,P,E)=>{const R=C.from(P.firstChild).map(k),B=C.from(P.lastChild).map(k);O.deleteContents(),O.insertNode(P);const I=R.bind(er).filter(tn).bind(tC),G=B.bind(Ya).filter(tn).bind(tC);eC(I,R,O,!0,E),eC(G,B,O,!1,E),O.collapse(!1)})(T,T.createContextualFragment(N),v.schema),v.selection.setRng(T),Os(v,T),vm(v,N,x)})})(o,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,_,w)=>{try{return _.compareBoundaryPoints(y,w)}catch{return-1}},v=e.document;if(W(o.bookmark)&&!kr(o)){const y=mu(o);if(y.isSome())return y.map(_=>vu(o,[_])[0]).getOr(v.createRange())}try{const y=d();y&&!Ti(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=vu(o,[g])[0])}catch{}if(g||(g=v.createRange()),Za(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&a&&(0===b(g.START_TO_START,g,r)&&0===b(g.END_TO_END,g,r)?g=a:(r=null,a=null)),g},u=(g,b)=>{if(!((y=g)&&oC(y.startContainer)&&oC(y.endContainer)))return;var y;const v=d();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){a=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&null!=v&&v.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=null==g?void 0:g.anchorNode,v=null==g?void 0:g.focusNode;if(!g||!b||!v||Ti(b)||Ti(v))return!0;const y=t.createRng(),_=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),_.setStart(v,g.focusOffset),_.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,_)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(Er(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();W(g)&&W(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(Wc(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return _=v.format?v.format:"html",w=v,re(b).selection.getContent(_,w);var _,w})(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,_=b,C.from(y).bind(w=>C.from(w.parentNode).map(x=>{const N=v.nodeIndex(w),T=v.createRng();return T.setStart(x,N),T.setEnd(x,N+1),_&&(Wc(v,T,w,!0),Wc(v,T,w,!1)),T}))).each(u),g;var v,y,_},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?Nn(b,v=>t.isEditable(v.parentElement)):dv(t,g)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const _=b.startOffset,w=b.endOffset;let x=b.commonAncestorContainer;b.collapsed||(v===y&&w-_<2&&v.hasChildNodes()&&(x=v.childNodes[_]),H(v)&&H(y)&&(v=v.length===_?fv(v.nextSibling,!0):v.parentNode,y=0===w?fv(y.previousSibling,!1):y.parentNode,v&&v===y&&(x=v)));const N=H(x)?x.parentNode:x;return po(N)?N:g})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>uv(o.getBody(),c(),g),getEnd:g=>mv(o.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,_,w)=>{const x=[],N=v.getRoot(),T=v.getParent(_||uv(N,y,y.collapsed),v.isBlock),O=v.getParent(w||mv(N,y,y.collapsed),v.isBlock);if(T&&T!==N&&x.push(T),T&&O&&T!==O){let P;const E=new ue(T,N);for(;(P=E.next())&&P!==O;)v.isBlock(P)&&x.push(P)}return O&&T!==O&&O!==N&&x.push(O),x})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!($c(b).length>1)&&ol(o)){const v=cl(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(s(g,b),p),selectorChangedWithUnbind:s,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;W(g)?((v=o).inline?lN:cN)(v,g,b):Os(o,c(),b)},placeCaretAt:(g,b)=>u(Hb(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?L.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=a=null,h.destroy()}},f=As(p),h=Ib(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},VR=(t,e,n)=>{-1===$.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let a=o.length;for(;a--;)o[a].attr(r,null)}),e.push(n))},aC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:jt.DOM,a=e&&e.schema?e.schema:Po(o),s=ba(o,a);return l=o,d=r,(i=s).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!Li(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=null==g?void 0:g.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===(null==p?void 0:p.indexOf("[CDATA["))?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==p?void 0:p.indexOf("mce:protected "))&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{F(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&my(l,i,i.schema),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,W(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const _=g.dom;let w=b.cloneNode(!0);const x=document.implementation;if(x.createHTMLDocument){const N=x.createHTMLDocument("");$.each("BODY"===w.nodeName?w.childNodes:[w],T=>{N.body.appendChild(N.importNode(T,!0))}),w="BODY"!==w.nodeName?N.body.firstChild:N.body,y=_.doc,_.doc=N}return T={...v,node:w},g.dispatch("PreProcess",T),y&&(_.doc=y),w;var T})(p,f,h):f),u=((p,f,h)=>{const g=Xe(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||Di(k(f))?g:$.trim(g)})(r,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>"br"===(null==w?void 0:w.name),_=v.lastChild;if(y(_)){const w=_.prev;y(w)&&(_.remove(),w.remove())}})(b),b})(s,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var w;return((y,_,w)=>{return!_.no_events&&y?(N=y,T={..._,content:w},N.dispatch("PostProcess",T)).content:w;var N,T})(p,b,(w=g,Uo(f,h).serialize(w)))})(e,o,a,m,d)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:Z(VR,s,n),getTempAttrs:Y(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var i,l,d})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},km=(t,e,n={})=>{const o=(r=n,a=e,{format:"html",...r,set:!0,content:a});var r,a;return bm(t,o).map(r=>{const a=(i=r.content,l=r,Em(t).editor.setContent(i,l));var i,l;return vm(t,a.html,r),a.content}).getOr(e)},WR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),KR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),YR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),sC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],iC=(t,e)=>{const n=vt(e,o=>_t(t,o));return M(n)},lC=(t,e)=>{const n=$.makeMap(t.plugins," "),o=vt(e,r=>_t(n,r));return M(o)},ZR=t=>ae(sC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),Tl=jt.DOM,Ol=t=>C.from(t).each(e=>e.destroy()),Bl=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>_t(t,e)}})(),va=Ie.ModelManager,dC=(t,e)=>e.dom[t],cC=(t,e)=>parseInt(Hn(e,t),10),tA=Z(dC,"clientWidth"),eA=Z(dC,"clientHeight"),nA=Z(cC,"margin-top"),oA=Z(cC,"margin-left"),uC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{F(e,l=>{l.reposition()})},a=l=>{Go(e,d=>d===l).each(d=>{e.splice(d,1)})},s=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(k)).map(Xr).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),ae(e,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{a(c),r(),lv(t)&&o().fold(()=>t.focus(),u=>ev(k(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=Y(e);return(l=t).on("SkinLoaded",()=>{const d=Mk(l);d&&s({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{F(e.slice(),d=>{n().close(d)})}),{open:s,close:()=>{o().each(l=>{n().close(l),a(l),r()})},getNotifications:i};var l},ya=Ie.PluginManager,Tr=Ie.ThemeManager,mC=t=>{let e=[];const n=()=>{const s=t.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(s,i)=>(...l)=>i?i.apply(s,l):void 0,r=s=>{t.dispatch("CloseWindow",{dialog:s}),e=vt(e,i=>i!==s),0===e.length&&t.focus()},a=s=>{t.editorManager.setActive(t),uu(t),t.ui.show();const i=s();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{F(e,s=>{n().close(s)})}),{open:(s,i)=>a(()=>n().open(s,i,r)),openUrl:s=>a(()=>n().openUrl(s,r)),alert:(s,i,l)=>{const d=n();d.alert(s,o(l||d,i))},confirm:(s,i,l)=>{const d=n();d.confirm(s,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(s=>{n().close(s),r(s)})}}},fC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},Pl=(t,e)=>{t._skinLoaded?fC(t,e):t.on("SkinLoaded",()=>{fC(t,e)})},$s=(t,e,n)=>{Tb(t,e,{message:n}),console.error(n)},Vs=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Dl=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Sm=t=>"content/"+t+"/content.css",gC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return At(e,r=>tinymce.Resource.has(Sm(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},pC=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let aA=0;const hC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),bC=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&it(f.location)?c((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=Bt(e.handler)?e.handler:o,a=(l,d)=>({url:d,blobInfo:l,status:!0}),s=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{$.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=$.grep(c=l,m=>!t.isUploaded(m.blobUri())),Promise.all($.map(c,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=r,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=xt)},_=x=>{y(),t.markUploaded(p.blobUri(),x),i(p.blobUri(),a(p,x)),g(a(p,x))},w=x=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),s(p,x)),g(s(p,x))};v=x=>{x<0||x>100||C.from(b).orThunk(()=>C.from(h).map(jr)).each(N=>{b=N,N.progressBar.value(x)})},f(p,v).then(_,x=>{w(it(x)?{message:x}:x)})}catch(y){g(s(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:xk(t),basePath:Ek(t),credentials:kk(t),handler:Sk(t)}),vC={remove_similar:!0,inherit:!1},Ca={selector:"td,th",...vC},lA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ca},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ca},tablecellbordercolor:{styles:{borderColor:"%value"},...Ca},tablecellclass:{classes:["%value"],...Ca},tableclass:{selector:"table",classes:["%value"],...vC},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ca},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ca}},dA=Y(lA),Ll=$.each,cn=jt.DOM,Nm=t=>W(t)&&Se(t),yC=(t,e)=>{const n=e&&e.schema||Po({}),o=s=>{const i=it(s)?{name:s,classes:[],attrs:{}}:s,l=cn.create(i.name);return d=l,(c=i).classes.length>0&&cn.addClass(d,c.classes.join(" ")),cn.setAttribs(d,c.attrs),l;var d,c},r=(s,i,l)=>{let d;const c=i[0],u=Nm(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=null==b?void 0:b.parentsRequired;return!(!v||!v.length)&&(g&&Mt(v,g)?g:v[0])})(s,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return s;const p=d?o(d):cn.create("div");p.appendChild(s),l&&$.each(l,h=>{const g=o(h);p.insertBefore(g,s)});const f=Nm(d)?d.siblings:void 0;return r(p,i,f)},a=cn.create("div");if(t.length>0){const s=t[0],i=o(s),l=Nm(s)?s.siblings:void 0;a.appendChild(r(i,t.slice(1),l))}return a},cA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=$.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,a,s,i)=>{switch(r){case"#":n.attrs.id=a;break;case".":n.classes.push(a);break;case":":-1!==$.inArray("checked disabled enabled read-only required".split(" "),a)&&(n.attrs[a]=a)}if("["===s){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},uA=(t,e)=>{let n="",o=zk(t);if(""===o)return"";const r=p=>it(p)?p.replace(/%(\w+)/g,""):"",a=(p,f)=>cn.getStyle(null!=f?f:t.getBody(),p,!0);if(it(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let s,i=e.block||e.inline||"span";const l=it(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=$.map(p.split(/(?:~\+|~|\+)/),cA),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,s=yC(l,t)):s=yC([i],t);const c=cn.select(i,s)[0]||s.firstChild;Ll(e.styles,(p,f)=>{const h=r(p);h&&cn.setStyle(c,f,h)}),Ll(e.attributes,(p,f)=>{const h=r(p);h&&cn.setAttrib(c,f,h)}),Ll(e.classes,p=>{const f=r(p);cn.hasClass(c,f)||cn.addClass(c,f)}),t.dispatch("PreviewFormats"),cn.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);const u=a("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return Ll(o.split(" "),p=>{let f=a(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=a(p),"#ffffff"===as(f).toLowerCase())||"color"===p&&"#000000"===as(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),cn.remove(s),n},CC=t=>{const e=(o=>{const r={},a=(s,i)=>{s&&(it(s)?(Jt(i)||(i=[i]),F(i,l=>{ge(l.deep)&&(l.deep=!an(l)),ge(l.split)&&(l.split=!an(l)||me(l)),ge(l.remove)&&an(l)&&!me(l)&&(l.remove="none"),an(l)&&me(l)&&(l.mixed=!0,l.block_expand=!0),it(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[s]=i):at(s,(l,d)=>{a(d,l)}))};return a((s=>{const i=s.dom,l=s.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>nt(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{$.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=null==c?void 0:c.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),a(dA()),a(Uk(o)),{get:s=>W(s)?r[s]:r,has:s=>_t(r,s),register:a,unregister:s=>(s&&r[s]&&delete r[s],r)}})(t),n=ve({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var a;((s,i,l)=>{const d=s.selection,c=s.getBody();em(s,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==Fs||em(s,wr(c,d.getStart()),!0),37!==i&&39!==i||em(s,wr(c,d.getStart()),!0)})(o,r.keyCode,(a=o.selection.getRng().endContainer,H(a)&&Nd(a.data,he)))}),Xn(t)||((o,r)=>{o.set({}),r.on("NodeChange",a=>{dy(r,a.element,o.get())}),r.on("FormatApply FormatRemove",a=>{const s=C.from(a.node).map(i=>Ns(i)?i:i.startContainer).bind(i=>nt(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>sy(r));dy(r,s,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,a)=>{var i,l,d;i=o,l=r,d=a,re(t).formatter.apply(i,l,d)},remove:(o,r,a,s)=>{var l,d,c,u;l=o,d=r,c=a,u=s,re(t).formatter.remove(l,d,c,u)},toggle:(o,r,a)=>{var i,l,d;i=o,l=r,d=a,re(t).formatter.toggle(i,l,d)},match:(o,r,a,s)=>{return l=o,d=r,c=a,u=s,re(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return a=o,re(t).formatter.closest(a);var a},matchAll:(o,r)=>{return s=o,i=r,re(t).formatter.matchAll(s,i);var s,i},matchNode:(o,r,a,s)=>{return l=o,d=r,c=a,u=s,re(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return a=o,re(t).formatter.canApply(a);var a},formatChanged:(o,r,a,s)=>{return l=n,d=o,c=r,u=a,m=s,re(t).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:Z(uA,t)};var o},wC=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},_C=t=>{const e=Do(),n=ve(0),o=ve(0),r={data:[],typing:!1,beforeChange:()=>{var s,i;s=n,i=e,re(t).undoManager.beforeChange(s,i)},add:(a,s)=>{return l=r,d=o,c=n,u=e,m=a,p=s,re(t).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{t.setDirty(!0);const a=Rl(t);a.bookmark=Sc(t.selection),t.dispatch("change",{level:a,lastLevel:q(r.data,o.get()).getOrUndefined()})},undo:()=>{return s=r,i=n,l=o,re(t).undoManager.undo(s,i,l);var s,i,l},redo:()=>{return s=o,i=r.data,re(t).undoManager.redo(s,i);var s,i},clear:()=>{var s,i;s=r,i=o,re(t).undoManager.clear(s,i)},reset:()=>{var s;s=r,re(t).undoManager.reset(s)},hasUndo:()=>{return s=r,i=o,re(t).undoManager.hasUndo(s,i);var s,i},hasRedo:()=>{return s=r,i=o,re(t).undoManager.hasRedo(s,i);var s,i},transact:a=>{return i=r,l=n,d=a,re(t).undoManager.transact(i,l,d);var i,l,d},ignore:a=>{var i,l;i=n,l=a,re(t).undoManager.ignore(i,l)},extra:(a,s)=>{var l,d,c,u;l=r,d=o,c=a,u=s,re(t).undoManager.extra(l,d,c,u)}};return Xn(t)||((a,s,i)=>{const l=ve(!1),d=c=>{Al(s,!1,i),s.add({},c)};a.on("init",()=>{s.add()}),a.on("BeforeExecCommand",c=>{wC(c.command)||(Qy(s,i),s.beforeChange())}),a.on("ExecCommand",c=>{wC(c.command)||d(c)}),a.on("ObjectResizeStart cut",()=>{s.beforeChange()}),a.on("SaveContent ObjectResized blur",d),a.on("dragend",d),a.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=Ot.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),a.nodeChanged()),46!==u&&8!==u||a.nodeChanged(),l.get()&&s.typing&&!_m(Rl(a),s.data[0])&&(a.isDirty()||a.setDirty(!0),a.dispatch("TypingUndo"),l.set(!1),a.nodeChanged())}),a.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||s.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((Ot.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&s.beforeChange()):(s.beforeChange(),Al(s,!0,i),s.add({},c),void l.set(!0));s.typing&&d(c)}}),a.on("mousedown",c=>{s.typing&&d(c)}),a.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),a.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||a.nodeChanged()})})(t,r,n),(a=t).addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),r;var a},mA=[9,27,Q.HOME,Q.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Q.DOWN,Q.UP,Q.LEFT,Q.RIGHT].concat(Ot.browser.isFirefox()?[224]:[]),xC="data-mce-placeholder",EC=t=>"keydown"===t.type||"keyup"===t.type,kC=t=>{const e=t.keyCode;return e===Q.BACKSPACE||e===Q.DELETE},fA=(t,e)=>({from:t,to:e}),Rm=(t,e)=>{const n=k(t),o=k(e.container());return bl(n,o).map(r=>({block:r,position:e}))},SC=(t,e)=>nr(e,n=>ns(n)||Cn(n.dom),n=>Dt(n,t)).filter(Ye).getOr(t),NC=(t,e)=>{const n=((o,r)=>{const a=Ee(o);return Go(a,s=>r.isBlock(Tt(s))).fold(Y(a),s=>a.slice(0,s))})(t,e);return F(n,Vt),n},RC=(t,e)=>{const n=yo(e,t);return ae(n.reverse(),o=>oe(o)).each(Vt)},gA=(t,e,n,o,r)=>{if(oe(n))return To(n),Me(n.dom);0===vt(Pg(r),s=>!oe(s)).length&&oe(e)&&qe(r,pe("br"));const a=We(n.dom,L.before(r.dom));return F(NC(e,o),s=>{qe(r,s)}),RC(t,e),a},pA=(t,e,n,o)=>{if(oe(n)){if(oe(e)){const s=Yo((i=>{const l=(d,c)=>Pd(d).fold(()=>c,u=>o.isInline(Tt(u))?l(u,c.concat(pr(u))):c);return l(i,[])})(n),(i,l)=>($g(i,l),l),os());Qr(e),ie(e,s)}return Vt(n),Me(e.dom)}const r=_n(n.dom);return F(NC(e,o),a=>{ie(n,a)}),RC(t,e),r},AC=(t,e)=>{da(t,e.dom).bind(n=>C.from(n.getNode())).map(k).filter(lr).each(Vt)},TC=(t,e,n,o)=>{return AC(!0,e),AC(!1,n),(r=e,a=n,co(a,r)?((s,i)=>{const l=yo(i,s);return C.from(l[l.length-1])})(a,r):C.none()).fold(Z(pA,t,e,n,o),Z(gA,t,e,n,o));var r,a},OC=(t,e,n,o,r)=>e?TC(t,o,n,r):TC(t,n,o,r),Am=(t,e)=>{const n=k(t.getBody());return(r=n.dom,a=e,s=t.selection.getRng(),s.collapsed?((i,l,d)=>{const c=Rm(i,L.fromRangeStart(d)),u=c.bind(m=>nn(l,i,m.position).bind(p=>Rm(i,p).map(f=>{return h=i,g=l,te((b=f).position.getNode())&&!oe(b.block)?da(!1,b.block.dom).bind(v=>v.isEqual(b.position)?nn(g,h,v).bind(y=>Rm(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return Pe(c,u,fA).filter(m=>{return!Dt((p=m).from.block,p.to.block)&&((p,f)=>{const h=k(p);return Dt(SC(h,f.from.block),SC(h,f.to.block))})(i,m)&&(p=>!1===qt(p.from.block.dom)&&!1===qt(p.to.block.dom))(m)&&(p=>{const f=h=>np(h)||nc(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(r,a,s):C.none()).map(r=>()=>{OC(n,e,r.from.block,r.to.block,t.schema).each(a=>{t.selection.setRng(a.toRange())})});var r,a,s},BC=(t,e)=>{const n=k(e),o=Z(Dt,t);return mo(n,ns,o).isSome()},Tm=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=k(t.getBody());return((n,o)=>{const r=We(n.dom,L.fromRangeStart(o)).isNone(),a=$e(n.dom,L.fromRangeEnd(o)).isNone();return!(BC(s=n,(i=o).startContainer)||BC(s,i.endContainer))&&r&&a;var s,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o,r)=>{const a=o.getRng();return Pe(bl(n,k(a.startContainer)),bl(n,k(a.endContainer)),(s,i)=>Dt(s,i)?C.none():C.some(()=>{a.deleteContents(),OC(n,!0,s,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(C.none())})(e,t.selection,t.schema);var n})(t),Co=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),qs=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Om=(t,e,n)=>e.collapsed?((o,r,a)=>{const s=Mc(1,o.getBody(),r),i=L.fromRangeStart(s),l=i.getNode();if(Cs(l))return Co(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Cs(d))return Co(1,o,d,!1,!1);const c=Rr(o.dom.getRoot(),i.getNode());return Cs(c)?Co(1,o,c,!1,a):C.none()})(t,e,n).getOr(e):e,bA=t=>jo(t)||Bs(t),vA=t=>Ho(t)||Ps(t),PC=(t,e,n,o,r,a)=>{var s,i;Co(o,t,a.getNode(!r),r,!0).each(s=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(s.startContainer,s.startOffset):i.setStart(s.endContainer,s.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(s)}),s=t.dom,H(i=n)&&0===i.data.length&&s.remove(i)},Bm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!H(r.commonAncestorContainer))return C.none();const a=o?ye.Forwards:ye.Backwards,s=Kn(n.getBody()),i=Z(Ic,o?s.next:s.prev),l=o?bA:vA,d=ks(a,n.getBody(),r),c=i(d),u=c&&ln(o,c);if(!u||!Zi(d,u))return C.none();if(l(u))return C.some(()=>PC(n,r,d.getNode(),a,o,u));const m=i(u);return m&&l(m)&&Zi(u,m)?C.some(()=>PC(n,r,d.getNode(),a,o,m)):C.none()})(t,e),Pm=(t,e)=>{const n=t.getBody();return e?Me(n).filter(jo):_n(n).filter(Ho)},Dm=t=>{const e=t.selection.getRng();return!e.collapsed&&(Pm(t,!0).exists(n=>n.isEqual(L.fromRangeStart(e)))||Pm(t,!1).exists(n=>n.isEqual(L.fromRangeEnd(e))))},un=Vn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),DC=(t,e,n,o)=>nn(e,t,n).bind(r=>{return a=r.getNode(),W(a)&&(ns(k(a))||es(k(a)))||((s,i,l,d,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!qn(l,d,s);return Kh(!i,l).fold(()=>Kh(i,d).fold(Ht,u),u)})(t,e,n,r,o)?C.none():e&&qt(r.getNode())||!e&&qt(r.getNode(!0))?((s,i,l,d)=>{const c=d.getNode(!i);return bl(k(s),k(l.getNode())).map(u=>oe(u)?un.remove(u.dom):un.moveToElement(c)).orThunk(()=>C.some(un.moveToElement(c)))})(t,e,n,r):e&&Ho(n)||!e&&jo(n)?C.some(un.moveToPosition(r)):C.none();var a}),LC=(t,e)=>C.from(Rr(t.getBody(),e)),MC=t=>{const e=t.dom,n=t.selection,o=Rr(t.getBody(),n.getNode());if(Cn(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(L.before(r).toRange())}return!0},Lm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return LC(t,n).filter(qt).fold(()=>((o,r,a,s)=>{const i=Mc(r?1:-1,o,a),l=L.fromRangeStart(i),d=k(o);return!r&&Ho(l)?C.some(un.remove(l.getNode(!0))):r&&jo(l)?C.some(un.remove(l.getNode())):!r&&jo(l)&&ku(d,l,s)?LN(d,l,s).map(c=>un.remove(c.getNode())):r&&Ho(l)&&Eu(d,l,s)?MN(d,l,s).map(c=>un.remove(c.getNode())):(c=o,p=s,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return nt(g)&&g.getAttribute("data-mce-caret")===b})(u=r,m=l)?(f=u,h=m.getNode(!u),ne(h)?C.none():f&&qt(h.nextSibling)?C.some(un.moveToElement(h.nextSibling)):!f&&qt(h.previousSibling)?C.some(un.moveToElement(h.previousSibling)):C.none()).orThunk(()=>DC(c,u,m,p)):DC(c,u,m,p).bind(f=>((h,g,b)=>b.fold(v=>C.some(un.remove(v)),v=>C.some(un.moveToElement(v)),v=>qn(g,v,h)?C.none():C.some(un.moveToPosition(v))))(c,m,f)));var c,u,m,p,f,h})(t.getBody(),e,t.selection.getRng(),t.schema).map(o=>()=>{return o.fold((r=t,a=e,s=>(r._selectionOverrides.hideFakeCaret(),Sr(r,a,k(s)),!0)),((r,a)=>s=>{const i=a?L.before(s):L.after(s);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>a=>(r.selection.setRng(a.toRange()),!0))(t));var r,a}),()=>C.some(xt))})(t,e):((n,o)=>{const r=n.selection.getNode();return qt(r)&&!Bi(r)?LC(n,r.parentNode).filter(qt).fold(()=>C.some(()=>{var a;a=k(n.getBody()),F(De(a,".mce-offscreen-selection"),Vt),Sr(n,o,k(n.selection.getNode())),Ou(n)}),()=>C.some(xt)):Dm(n)?C.some(()=>{s0(n,n.selection.getRng(),k(n.getBody()))}):C.none()})(t,e),Mm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=L.fromRangeStart(n.selection.getRng());return nn(o,n.getBody(),r).filter(a=>o?TN(a):ON(a)).bind(a=>Lc(o?0:-1,a)).map(a=>()=>n.selection.select(a))})(t,e):C.none(),wa=H,IC=t=>wa(t)&&t.data[0]===be,FC=t=>wa(t)&&t.data[t.data.length-1]===be,UC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(be)},Ml=(t,e)=>t?(n=>{var o;if(wa(n.previousSibling))return FC(n.previousSibling)||n.previousSibling.appendData(be),n.previousSibling;if(wa(n))return IC(n)||n.insertData(0,be),n;{const r=UC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(wa(n.nextSibling))return IC(n.nextSibling)||n.nextSibling.insertData(0,be),n.nextSibling;if(wa(n))return FC(n)||n.appendData(be),n;{const a=UC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(a,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(a),a}})(e),CA=Z(Ml,!0),wA=Z(Ml,!1),zC=(t,e)=>H(t.container())?Ml(e,t.container()):Ml(e,t.getNode()),jC=(t,e)=>{const n=e.get();return n&&t.container()===n&&Oo(n)},Im=(t,e)=>e.fold(n=>{yr(t.get());const o=CA(n);return t.set(o),C.some(L(o,o.length-1))},n=>Me(n).map(o=>{if(jC(o,t)){const r=t.get();return L(r,1)}{yr(t.get());const r=zC(o,!0);return t.set(r),L(r,1)}}),n=>_n(n).map(o=>{if(jC(o,t)){const r=t.get();return L(r,r.length-1)}{yr(t.get());const r=zC(o,!1);return t.set(r),L(r,r.length-1)}}),n=>{yr(t.get());const o=wA(n);return t.set(o),C.some(L(o,1))}),HC=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},Ue=Vn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),$C=(t,e)=>Io(e,t)||t,_A=(t,e,n)=>{const o=e0(n),r=$C(e,o.container());return $o(t,r,o).fold(()=>$e(r,o).bind(Z($o,t,r)).map(a=>Ue.before(a)),C.none)},xA=(t,e)=>null===wr(t,e),VC=(t,e,n)=>$o(t,e,n).filter(Z(xA,e)),EA=(t,e,n)=>{const o=n0(n);return VC(t,e,o).bind(r=>We(r,o).isNone()?C.some(Ue.start(r)):C.none())},kA=(t,e,n)=>{const o=e0(n);return VC(t,e,o).bind(r=>$e(r,o).isNone()?C.some(Ue.end(r)):C.none())},SA=(t,e,n)=>{const o=n0(n),r=$C(e,o.container());return $o(t,r,o).fold(()=>We(r,o).bind(Z($o,t,r)).map(a=>Ue.after(a)),C.none)},qC=t=>!t0(Fm(t)),Qn=(t,e,n)=>HC([_A,EA,kA,SA],[t,e,n]).filter(qC),Fm=t=>t.fold(ce,ce,ce,ce),WC=t=>t.fold(Y("before"),Y("start"),Y("end"),Y("after")),Il=t=>t.fold(Ue.before,Ue.before,Ue.after,Ue.after),Um=t=>t.fold(Ue.start,Ue.start,Ue.end,Ue.end),NA=(t,e,n,o,r,a)=>Pe($o(e,n,o),$o(e,n,r),(s,i)=>s!==i&&((l,d,c)=>{const u=Io(d,l),m=Io(c,l);return W(u)&&u===m})(n,s,i)?Ue.after(t?s:i):a).getOr(a),RA=(t,e)=>t.fold(Zt,n=>{return r=e,!(WC(o=n)===WC(r)&&Fm(o)===Fm(r));var o,r}),AA=(t,e)=>t?e.fold(bn(C.some,Ue.start),C.none,bn(C.some,Ue.after),C.none):e.fold(C.none,bn(C.some,Ue.before),C.none,bn(C.some,Ue.end)),KC=(t,e,n)=>{const o=t?1:-1;return e.setRng(L(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Jn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Jn||(Jn={}));const Fl=(t,e)=>t===ye.Backwards?Xo(e):e,TA=(t,e,n)=>t===ye.Forwards?e.next(n):e.prev(n),OA=(t,e,n,o)=>te(o.getNode(e===ye.Forwards))?Jn.Br:!1===qn(n,o)?Jn.Block:Jn.Wrap,YC=(t,e,n,o)=>{const r=Kn(n);let a=o;const s=[];for(;a;){const i=TA(e,r,a);if(!i)break;if(te(i.getNode(!1)))return e===ye.Forwards?{positions:Fl(e,s).concat([i]),breakType:Jn.Br,breakAt:C.some(i)}:{positions:Fl(e,s),breakType:Jn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(a,i)){const l=OA(0,e,a,i);return{positions:Fl(e,s),breakType:l,breakAt:C.some(i)}}s.push(i),a=i}else a=i}return{positions:Fl(e,s),breakType:Jn.Eol,breakAt:C.none()}},GC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const a=e(n,r).positions;return t===ye.Backwards?a.concat(r):[r].concat(a)}).getOr([]),zm=(t,e)=>Oe(t,(n,o)=>n.fold(()=>C.some(o),r=>Pe(K(r.getClientRects()),K(o.getClientRects()),(a,s)=>{const i=Math.abs(e-a.left);return Math.abs(e-s.left)<=i?o:r}).or(n)),C.none()),Ul=(t,e)=>K(e.getClientRects()).bind(n=>zm(t,n.left)),Ws=Z(YC,L.isAbove,-1),Ks=Z(YC,L.isBelow,1),XC=Z(GC,-1,Ws),QC=Z(GC,1,Ks),JC=(t,e)=>Ws(t,e).breakAt.isNone(),ZC=(t,e)=>Ks(t,e).breakAt.isNone(),BA=(t,e)=>Ul(XC(t,e),e),PA=(t,e)=>Ul(QC(t,e),e),DA=qt,t1=(t,e)=>Math.abs(t.left-e),e1=(t,e)=>Math.abs(t.right-e),n1=(t,e)=>Ci(t,(n,o)=>{const r=Math.min(t1(n,e),e1(n,e)),a=Math.min(t1(o,e),e1(o,e));return a===r&&$r(o,"node")&&DA(o.node)||a<r?o:n}),LA=t=>{const e=n=>At(n,o=>{const r=br(o);return r.node=t,r});if(nt(t))return e(t.getClientRects());if(H(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},o1=t=>je(t,LA);var Ys;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ys||(Ys={}));const r1=(t,e,n,o,r,a)=>{let s=0;const i=[],l=u=>{let m=o1([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,Jo(i))&&s++,f.line=s,r(f))return!0;i.push(f)}}return!1},d=Jo(a.getClientRects());if(!d)return i;const c=a.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=_s(h,u,ip,m);)if(p(h))return})(t,o,l,c)),i},MA=Z(r1,Ys.Up,gs,ps),IA=Z(r1,Ys.Down,ps,gs),a1=t=>Jo(t.getClientRects()),s1=t=>e=>e.line>t,jm=t=>e=>e.line===t,wo=(t,e)=>{t.selection.setRng(e),Os(t,t.selection.getRng())},Hm=(t,e,n)=>C.some(Om(t,e,n)),i1=(t,e,n,o,r,a)=>{const s=e===ye.Forwards,i=Kn(t.getBody()),l=Z(Ic,s?i.next:i.prev),d=s?o:r;if(!n.collapsed){const f=qi(n);if(a(f))return Co(e,t,f,e===ye.Backwards,!1);if(Dm(t)){const h=n.cloneRange();return h.collapse(e===ye.Backwards),C.from(h)}}const c=ks(e,t.getBody(),n);if(d(c))return qs(t,c.getNode(!s));let u=l(c);const m=rp(n);if(!u)return m?C.some(n):C.none();if(u=ln(s,u),d(u))return Co(e,t,u.getNode(!s),s,!1);const p=l(u);return p&&d(p)&&Zi(u,p)?Co(e,t,p.getNode(!s),s,!1):m?Hm(t,u.toRange(),!1):C.none()},l1=(t,e,n,o,r,a)=>{const s=ks(e,t.getBody(),n),i=Jo(s.getClientRects()),l=e===Ys.Down,d=t.getBody();if(!i)return C.none();if(Dm(t)){const h=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?PA:BA)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?IA:MA)(d,s1(1),s),u=vt(c,jm(1)),m=i.left,p=n1(u,m);if(p&&a(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return Co(e,t,p.node,h<g,!1)}let f;if(f=o(s)?s.getNode():r(s)?s.getNode(!0):qi(n),f){const h=((b,v,y,_)=>{const w=Kn(v);let x,N,T,O;const P=[];let E=0;1===b?(x=w.next,N=ps,T=gs,O=L.after(_)):(x=w.prev,N=gs,T=ps,O=L.before(_));const R=a1(O);do{if(!O.isVisible())continue;const B=a1(O);if(T(B,R))continue;P.length>0&&N(B,Jo(P))&&E++;const I=br(B);if(I.position=O,I.line=E,y(I))return P;P.push(I)}while(O=x(O));return P})(e,d,s1(1),f);let g=n1(vt(h,jm(1)),m);if(g||(g=Jo(vt(h,jm(0))),g))return Hm(t,g.position.toRange(),!1)}return 0===u.length?$m(t,l).filter(l?r:o).map(h=>Om(t,h.toRange(),!1)):C.none()},$m=(t,e)=>{const n=t.selection.getRng(),o=e?L.fromRangeEnd(n):L.fromRangeStart(n),r=(a=o.container(),s=t.getBody(),mo(k(a),i=>MS(i.dom),i=>i.dom===s).map(i=>i.dom).getOr(s));var a,s;if(e){const i=Ks(r,o);return lt(i.positions)}{const i=Ws(r,o);return K(i.positions)}},d1=(t,e,n)=>$m(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),zl=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},c1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},u1=(t,e,n)=>Im(e,n).map(o=>(zl(t,o),n)),m1=(t,e,n)=>!!ys(t)&&((t,e,n)=>{const o=t.getBody(),r=((a,s,i)=>{const l=L.fromRangeStart(a);if(a.collapsed)return l;{const d=L.fromRangeEnd(a);return i?We(s,d).getOr(d):$e(s,l).getOr(l)}})(t.selection.getRng(),o,n);return((a,s,i,l)=>{const d=ln(a,l),c=Qn(s,i,d);return Qn(s,i,d).bind(Z(AA,a)).orThunk(()=>((u,m,p,f,h)=>{const g=ln(u,h);return nn(u,p,g).map(Z(ln,u)).fold(()=>f.map(Il),b=>Qn(m,p,b).map(Z(NA,u,m,p,g,b)).filter(Z(RA,f))).filter(qC)})(a,s,i,c,l))})(n,Z(Nr,t),o,r).bind(a=>u1(t,e,a))})(t,e,n).isSome(),f1=(t,e,n)=>!!ys(e)&&((o,r)=>{const a=r.selection.getRng(),s=o?L.fromRangeEnd(a):L.fromRangeStart(a);return!!Bt(r.selection.getSel().modify)&&(o&&Gd(s)?KC(!0,r.selection,s):!(o||!Xd(s))&&KC(!1,r.selection,s))})(t,e),zA=Z(f1,!0),jA=Z(f1,!1),jl=(t,e,n)=>{if(ys(t)){const o=$m(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?L.fromRangeEnd(r):L.fromRangeStart(r)});return Qn(Z(Nr,t),t.getBody(),o).exists(r=>{const a=Il(r);return Im(n,a).exists(s=>(zl(t,s),!0))})}return!1},g1=(t,e)=>n=>Im(e,n).map(o=>()=>zl(t,o)),p1=(t,e,n,o)=>{const r=t.getBody(),a=Z(Nr,t);t.undoManager.ignore(()=>{t.selection.setRng(((s,i)=>{const l=document.createRange();return l.setStart(s.container(),s.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),Tu(t),Qn(a,r,L.fromRangeStart(t.selection.getRng())).map(Um).bind(g1(t,e)).each(No)}),t.nodeChanged()},Vm=(t,e,n)=>{if(t.selection.isCollapsed()&&ys(t)){const o=L.fromRangeStart(t.selection.getRng());return((r,a,s,i)=>{const l=(u=r.getBody(),m=i.container(),Io(m,u)||u),d=Z(Nr,r),c=Qn(d,l,i);var u,m;return c.bind(u=>s?u.fold(Y(C.some(Um(u))),C.none,Y(C.some(Il(u))),C.none):u.fold(C.none,Y(C.some(Il(u))),C.none,Y(C.some(Um(u))))).map(g1(r,a)).getOrThunk(()=>{const u=la(s,l,i),m=u.bind(p=>Qn(d,l,p));return Pe(c,m,()=>$o(d,l,i).bind(p=>{return Pe(Me(f=p),_n(f),(h,g)=>{const b=ln(!0,h),v=ln(!1,g);return $e(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{Sr(r,s,k(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{s?p1(r,a,i,p):p1(r,a,p,i)})))})})(t,e,n,o)}return C.none()},h1=(t,e)=>{const n=k(t.getBody()),o=k(t.selection.getStart()),r=yo(o,n);return Go(r,e).fold(Y(r),a=>r.slice(0,a))},HA=t=>1===Ld(t),b1=(t,e)=>{const n=Z(P0,t);return je(e,o=>n(o)?[o.dom]:[])},v1=t=>{const e=h1(n=t,o=>n.schema.isBlock(Tt(o)));var n;return b1(t,e)},y1=(t,e)=>{const n=t.selection.getStart(),o=((r,a)=>{const s=a.parentElement;return te(a)&&!Te(s)&&r.dom.isEmpty(s)})(t,n)||eu(k(n))?B0(n,e):((r,a)=>{const{caretContainer:s,caretPosition:i}=O0(a);return r.insertNode(s.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},C1=t=>H(t.startContainer),qm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=vt(h1(o=t,r=>o.schema.isBlock(Tt(r))||Ld(r)>1),HA);var o;return lt(n).bind(o=>{const r=L.fromRangeStart(t.selection.getRng());return r0(e,r,o.dom)&&!eu(o)?C.some(()=>((a,s,i,l)=>{const d=b1(s,l);if(0===d.length)Sr(s,a,i);else{const c=B0(i.dom,d);s.selection.setRng(c.toRange())}})(e,t,o,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&C1(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Te(r)&&P0(n,k(r))})(t,e)&&(n=>{return(r=>{const a=r.startContainer.parentNode,s=r.endContainer.parentNode;return!Te(a)&&!Te(s)&&a.isEqualNode(s)})(o=n)&&(r=>{const a=r.endContainer;return r.endOffset===(H(a)?a.length:a.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=v1(n);return C.some(()=>{Tu(n),((r,a)=>{const s=Hr(a,v1(r));s.length>0&&y1(r,s)})(n,o)})}return C.none()})(t),Gs=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(C1(n)||e.dom.isEmpty(n.startContainer))&&!((t,e)=>mo(t,n=>on(n.dom),n=>e.isBlock(Tt(n))).isSome())(k((o=e).selection.getStart()),o.schema);var o})(t)&&y1(t,[]),!0),Wm=(t,e,n)=>W(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),Sr(t,e,k(n))}):C.none(),Km=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Bs:Ps,s=ks(o?ye.Forwards:ye.Backwards,n.getBody(),n.selection.getRng());return r(s)?Wm(n,o,s.getNode(!o)):C.from(ln(o,s)).filter(i=>r(i)&&Zi(s,i)).bind(i=>Wm(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return $n(r)?Wm(n,o,r):C.none()})(t,e),Ym=t=>wi(null!=t?t:"").getOr(0),w1=(t,e)=>(t||"table"===Tt(e)?"margin":"padding")+("rtl"===Hn(e,"direction")?"-right":"-left"),_1=t=>{const e=E1(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Nn(e,r=>{const a=w1(Sh(n),r),s=Ni(r,a).map(Ym).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&s>0})));var n},x1=t=>Yd(t)||es(t),E1=t=>vt(zd(t.selection.getSelectedBlocks()),e=>!x1(e)&&!yn(e).exists(x1)&&nr(e,n=>Cn(n.dom)||qt(n.dom)).exists(n=>Cn(n.dom))),k1=(t,e)=>{var n,o;const{dom:r}=t,a=Ak(t),s=null!==(o=null===(n=/[a-z%]+$/i.exec(a))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=Ym(a),l=Sh(t);F(E1(t),d=>{((c,u,m,p,f,h)=>{const g=w1(m,k(h)),b=Ym(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(r,e,l,i,s,d.dom)})},S1=t=>k1(t,"outdent"),N1=t=>{if(t.selection.isCollapsed()&&_1(t)){const e=t.dom,n=t.selection.getRng(),o=L.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&xu(k(r),o,t.schema))return C.some(()=>S1(t))}return C.none()},R1=(t,e,n)=>se([N1,Lm,Bm,(o,r)=>Vm(o,e,r),Am,Uu,Mm,Km,Tm,qm],o=>o(t,n)).filter(o=>t.selection.isEditable()),A1=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),Gm=(t,e)=>_t(t,e.nodeName),KA=(t,e)=>!!H(e)||!!nt(e)&&!(Gm(t.getBlockElements(),e)||rn(e)||cr(t,e)||Zd(e)),YA=(t,e)=>{if(H(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Gm(t,e.nextSibling)||Zd(e.nextSibling)}return!1},T1=t=>t.dom.create(Le(t),vs(t)),GA=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),a=n.getStart(),s=t.getBody();let i,l,d=!1;const c=Le(t);if(!a||!nt(a))return;const u=s.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(y=r,_=s,Xt(Lv(k(a),k(_)),x=>Gm(y,x.dom))))return;var y,_;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=kr(t);let v=s.firstChild;for(;v;)if(nt(v)&&IE(o,v),KA(o,v)){if(YA(r,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=T1(t),s.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),t.nodeChanged())},O1=(t,e,n)=>{const o=k(T1(t)),r=os();ie(o,r),n(e,o);const a=document.createRange();return a.setStartBefore(r.dom),a.setEndBefore(r.dom),a},B1=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),XA=(t,e,n)=>function(o){const r=arguments,a=r[r.length-2],s=a>0?e.charAt(a-1):"";if('"'===s)return o;if(">"===s){const i=e.lastIndexOf("<",a);if(-1!==i&&-1!==e.substring(i,a).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},QA=(t,e)=>Nn(t,n=>{const o=e.match(n);return null!==o&&o[0].length===e.length}),P1=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Qd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},JA=(t,e)=>{const n=Xa(k(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void P1(t,n)):void(op(n)&&(P1(t,n),t.undoManager.add()))},D1=qt,L1=(t,e,n)=>{const o=Kn(t.getBody()),r=Z(Ic,1===e?o.next:o.prev);if(n.collapsed){const a=t.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!r(L.fromRangeStart(n))){const s=k((i=>{const l=i.dom.create(Le(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?fo(k(a),s):qe(k(a),s),t.selection.select(s.dom,!0),t.selection.collapse()}}},M1=(t,e)=>((n,o)=>{const r=o?ye.Forwards:ye.Backwards,a=n.selection.getRng();return(s=r,i=n,l=a,i1(i,s,l,jo,Ho,D1)).orThunk(()=>(L1(n,r,a),C.none()));var s,i,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return t0(r)?!o:o})(t.selection,e)).exists(n=>(wo(t,n),!0)),I1=(t,e)=>((n,o)=>{const r=o?1:-1,a=n.selection.getRng();return(s=r,i=n,l=a,l1(i,s,l,d=>jo(d)||Pv(d),d=>Ho(d)||Dv(d),D1)).orThunk(()=>(L1(n,r,a),C.none()));var s,i,l})(t,e).exists(n=>(wo(t,n),!0)),F1=(t,e)=>d1(t,e,e?Ho:jo),Hl=(t,e)=>Pm(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(wo(t,n),!0)),ZA=t=>Mt(["figcaption"],Tt(t)),U1=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=k(n.getBody()),a=L.fromRangeStart(n.selection.getRng());return((s,i,l)=>{const d=Z(Dt,i);return nr(k(s.container()),c=>l.isBlock(Tt(c)),d).filter(ZA)})(a,r,n.schema).exists(()=>{if(s=r,l=a,o?ZC(s.dom,l):JC(s.dom,l)){const s=O1(n,r,o?ie:Ud);return n.selection.setRng(s),!0}var s,l;return!1})})(t,e),z1=(t,e)=>{return n=t,e?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((a,s)=>{const i=a.selection.getRng(),l=L.fromRangeStart(i);return!(a.getBody().lastChild!==s||!ZC(s,l)||(a.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>C.from(n.dom.getParent(r,"details")).map(a=>((s,i,l)=>{const d=s.selection.getRng(),c=L.fromRangeStart(d);return!(s.getBody().firstChild!==i||!JC(l,c)||(s.execCommand("InsertNewBlockBefore"),0))})(n,a,r))).getOr(!1);var n},j1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},H1=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,pt=(t,...e)=>()=>t.apply(null,e),Xs=(t,e)=>{return ae((o=e,je(At(t,a=>({...j1,...a})),r=>H1(r,o)?[r]:[])),n=>n.action());var o},$1=(t,e)=>{return se((o=e,je(At(t,a=>({...j1,...a})),r=>H1(r,o)?[r]:[])),n=>n.action());var o},V1=(t,e)=>{const n=e?ye.Forwards:ye.Backwards,o=t.selection.getRng();return i1(t,n,o,Bs,Ps,$n).exists(r=>(wo(t,r),!0))},q1=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return l1(t,n,o,Bs,Ps,$n).exists(r=>(wo(t,r),!0))},W1=(t,e)=>d1(t,e,e?Ps:Bs),K1=Vn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Qs={...K1,none:t=>K1.none(t)},Y1=(t,e,n)=>je(Ee(t),o=>Rn(o,e)?n(o)?[o]:[]:Y1(o,e,n)),G1=(t,e)=>or(t,"table",e),Xm=(t,e,n,o,r=Zt)=>{const a=1===o;if(!a&&n<=0)return Qs.first(t[0]);if(a&&n>=t.length-1)return Qs.last(t[t.length-1]);{const s=n+o,i=t[s];return r(i)?Qs.middle(e,i):Xm(t,e,s,o,r)}},X1=(t,e)=>G1(t,e).bind(n=>{const o=Y1(n,"th,td",Zt);return Go(o,r=>Dt(t,r)).map(r=>({index:r,all:o}))}),Q1=(t,e,n,o,r)=>{const a=De(k(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Oe(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(vt((i=t,je(a,d=>{const c={left:(u=br(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},tT=Z(Q1,t=>t.bottom,(t,e)=>t.y<e),eT=Z(Q1,t=>t.top,(t,e)=>t.y>e),J1=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Jn.Wrap&&0===r.positions.length||!te(n.getNode())&&(r=>r.breakType===Jn.Br&&1===r.positions.length)(o)?!((r,a,s)=>s.breakAt.exists(i=>r(a,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},nT=Z(J1,Ws),oT=Z(J1,Ks),rT=(t,e,n,o)=>{const r=t.selection.getRng(),a=e?1:-1;return!(!jh()||!((s,i,l)=>{const d=L.fromRangeStart(i);return da(!s,l).exists(c=>c.isEqual(d))})(e,r,n)||(Co(a,t,n,!e,!1).each(s=>{wo(t,s)}),0))},Z1=(t,e,n)=>{const o=((a,s)=>{const i=s.getNode(a);return ho(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>wo(t,n.toRange()),a=>da(r,t.getBody()).filter(s=>s.isEqual(n)).fold(()=>wo(t,n.toRange()),s=>{return i=e,d=a,void(l=t).undoManager.transact(()=>{const c=i?fo:qe,u=O1(l,k(d),c);wo(l,u)});var i,l,d}))},aT=(t,e,n,o)=>{const r=t.selection.getRng(),a=L.fromRangeStart(r),s=t.getBody();if(!e&&nT(o,a)){const i=(l=s,(u=d=n,m=c=a,K(m.getClientRects()).bind(p=>tT(u,p.left,p.top)).bind(p=>{return Ul(_n(f=p).map(h=>Ws(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>K(c.getClientRects()).bind(u=>zm(XC(l,L.before(d)),u.left))).getOr(L.before(d)));return Z1(t,e,i),!0}var l,d,c,u,m;if(e&&oT(o,a)){const i=((l,d,c)=>((u,m)=>lt(m.getClientRects()).bind(p=>eT(u,p.left,p.top)).bind(p=>{return Ul(Me(f=p).map(h=>[h].concat(Ks(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>K(c.getClientRects()).bind(u=>zm(QC(l,L.after(d)),u.left))).getOr(L.after(d)))(s,n,a);return Z1(t,e,i),!0}return!1},tw=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),ew=(t,e)=>tw(t,e,rT),Qm=(t,e)=>tw(t,e,aT),nw=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(a=r,Fg(a,gv)).map(s=>{return(t=>{const e=ga.getWin(t).dom,n=(r,a,s,i)=>ou(e,r,a,s,i),o=t.match({domRange:a=>{const s=k(a.startContainer),i=k(a.endContainer);return jb(s,a.startOffset,i,a.endOffset)},relative:ZS,exact:jb});return((r,a)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>Ts.rtl(k(c.endContainer),c.endOffset,k(c.startContainer),c.startOffset)).getOrThunk(()=>Ub(0,Ts.ltr,d)):Ub(0,Ts.ltr,d)})(0,(i=r,a.match({domRange:d=>({ltr:Y(d),rtl:C.none}),relative:(d,c)=>({ltr:Zo(()=>Fb(i,d,c)),rtl:Zo(()=>C.some(Fb(i,c,d)))}),exact:(d,c,u,m)=>({ltr:Zo(()=>ou(i,d,c,u,m)),rtl:Zo(()=>C.some(ou(i,u,m,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})(ga.exact(i=s,0,i,0));var i});var a},o=>(t.execCommand("mceTableInsertRowAfter"),ow(t,e,o))),ow=(t,e,n)=>{return nw(t,e,(r=rr,X1(o=n,void 0).fold(()=>Qs.none(o),a=>Xm(a.all,o,a.index,1,r))));var o,r},sT=(t,e,n)=>{return nw(t,e,(r=rr,X1(o=n,void 0).fold(()=>Qs.none(),a=>Xm(a.all,o,a.index,-1,r))));var o,r},rw=(t,e)=>{const n=["table","li","dl"],o=k(t.getBody()),r=s=>{const i=Tt(s);return Dt(s,o)||Mt(n,i)},a=t.selection.getRng();return(s=k(e?a.endContainer:a.startContainer),i=r,((l,d,c=Ht)=>c(d)?C.none():Mt(l,Tt(d))?C.some(d):Ga(d,l.join(","),u=>Rn(u,"table")||c(u)))(["td","th"],s,i)).map(s=>(G1(s,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?ow:sT)(t,r,s).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var s,i},Ln=(t,e)=>({container:t,offset:e}),$l=jt.DOM,Vl=t=>e=>t===e?-1:0,Jm=(t,e,n)=>{if(H(t)&&e>=0)return C.some(Ln(t,e));{const o=hr($l);return C.from(o.backwards(t,e,Vl(t),n)).map(r=>Ln(r.container,r.container.data.length))}},Zm=(t,e,n)=>{if(!H(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(Ln(t,e));{const r=hr($l);return C.from(r.backwards(t,e,Vl(t),n)).bind(a=>Zm(a.container,e+a.container.data.length,n))}},aw=(t,e,n)=>{if(!H(t))return C.none();const o=t.data;if(e<=o.length)return C.some(Ln(t,e));{const r=hr($l);return C.from(r.forwards(t,e,Vl(t),n)).bind(a=>aw(a.container,e-o.length,n))}},tf=(t,e,n,o,r)=>{const a=hr(t,(s=t,i=>s.isBlock(i)||Mt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===s.getContentEditable(i)));var s;return C.from(a.backwards(e,n,o,r))},sw=t=>Xe(t.toString().replace(/\u00A0/g," ")),iw=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),ef=(t,e)=>t.substring(e.length),lw=(t,e,n,o=0)=>{return(r=k(e.startContainer),or(r,pv)).fold(()=>((a,s,i,l=0)=>{if(!(d=s).collapsed||!H(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=a.getParent(s.startContainer,a.isBlock)||a.getRoot();return tf(a,s.startContainer,s.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const _=h.charAt(v);if(iw(_))return C.none();if(y===_&&Be(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=s.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(s.endContainer,s.endOffset),p.collapsed)return C.none();const f=sw(p);return 0!==f.lastIndexOf(i)||ef(f,i).length<l?C.none():C.some({text:ef(f,i),range:p,trigger:i})})})(t,e,n,o),a=>{const s=t.createRng();s.selectNode(a.dom);const i=sw(s);return C.some({range:s,text:ef(i,n),trigger:n})});var r},dw=t=>{if(3===t.nodeType)return Ln(t,t.data.length);{const e=t.childNodes;return e.length>0?dw(e[e.length-1]):Ln(t,e.length)}},cw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?cw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?dw(n[n.length-1]):Ln(t,e)},uw=(t,e,n,o={})=>{var r;const a=e(),s=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=vt(a.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const m=cw(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return tf(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!iw(v)}).isSome()})(c,m)};var c})(n.range,s,n.text));if(0===i.length)return C.none();const l=Promise.all(At(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var Zn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Zn||(Zn={}));const nf=(t,e,n)=>t.stype===Zn.Error?e(t.serror):n(t.svalue),_a=t=>({stype:Zn.Value,svalue:t}),Js=t=>({stype:Zn.Error,serror:t}),iT=nf,of=t=>Se(t)&&Et(t).length>100?" removed due to size":JSON.stringify(t,null,2),ql=(t,e)=>Js([{path:t,getErrorInfo:e}]),mw=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const a in r)_t(r,a)&&(n[a]=t(n[a],r[a]))}return n},rf=mw((t,e)=>fi(t)&&fi(e)?rf(t,e):e),fw=(mw((t,e)=>e),t=>({tag:"defaultedThunk",process:Y(t)})),gw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},af=t=>({extract:(e,n)=>{return(o=t(n)).stype===Zn.Error?ql(e,Y(o.serror)):o;var o},toString:Y("val")}),cT=af(_a),pw=(t,e,n,o)=>o($t(t,e).getOrThunk(()=>n(t))),uT=(t,e,n,o,r)=>{const a=i=>r.extract(e.concat([o]),i),s=i=>i.fold(()=>_a(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Zn.Value?{stype:Zn.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=a,$t(l=n,d=o).fold(()=>{return m=d,p=l,ql(i,()=>'Could not find valid *required* value for "'+m+'" in '+of(p));var m,p},c);case"defaultedThunk":return pw(n,o,t.process,a);case"option":return((i,l,d)=>d($t(i,l)))(n,o,s);case"defaultedOptionThunk":return((i,l,d,c)=>c($t(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,s);case"mergeWithThunk":return pw(n,o,Y({}),i=>{const l=rf(t.process(n),i);return a(l)})}var i,l,d,c},sf=t=>({extract:(e,n)=>((o,r,a)=>{const s={},i=[];for(const l of a)gw(l,(d,c,u,m)=>{const p=uT(u,o,r,d,m);iT(p,f=>{i.push(...f)},f=>{s[c]=f})},(d,c)=>{s[d]=c(r)});return i.length>0?Js(i):_a(s)})(e,n,t),toString:()=>"obj{\n"+At(t,n=>gw(n,(o,r,a,s)=>o+" -> "+s.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),hw=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],a=[];return F(o,s=>{nf(s,i=>a.push(i),i=>r.push(i))}),{values:r,errors:a}})(t);return e.errors.length>0?(n=e.errors,bn(Js,bi)(n)):_a(e.values);var n})(At(n,(r,a)=>t.extract(e.concat(["["+a+"]"]),r))),toString:()=>"array("+t.toString()+")"}),bw=(t,e)=>((t,e)=>({extract:(n,o)=>$t(o,t).fold(()=>{return a=t,ql(n,()=>'Choice schema did not contain choice key: "'+a+'"');var a},r=>{return a=n,s=o,$t(i=e,l=r).fold(()=>{return c=i,u=l,ql(a,()=>'The chosen schema: "'+u+'" did not exist in branches: '+of(c));var c,u},d=>d.extract(a.concat(["branch: "+l]),s));var a,s,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Et(e)}))(t,It(e,sf)),fT=Y(cT),Wl=(t,e)=>af(n=>{const o=typeof n;return t(n)?_a(n):Js(`Expected type: ${e} but got: ${o}`)}),gT=Wl(Je,"number"),Kl=Wl(it,"string"),pT=Wl(ao,"boolean"),lf=Wl(Bt,"function"),Zs=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),vw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),yw=(t,e)=>Zs(t,t,{tag:"required",process:{}},e),Cw=t=>yw(t,Kl),ww=t=>yw(t,lf),df=(t,e)=>Zs(t,t,{tag:"option",process:{}},e),Yl=t=>df(t,Kl),xa=(t,e,n)=>Zs(t,t,fw(e),n),_w=(t,e)=>xa(t,e,gT),xw=(t,e,n)=>{return xa(t,e,(o=n,r=a=>Mt(o,a)?He.value(a):He.error(`Unsupported value: "${a}", choose one of "${o.join(", ")}".`),af(a=>r(a).fold(Js,_a))));var o,r},cf=(t,e)=>xa(t,e,pT),uf=(t,e)=>xa(t,e,lf),hT=Cw("type"),bT=ww("fetch"),mf=ww("onAction"),vT=uf("onSetup",()=>xt),yT=Yl("text"),CT=Yl("icon"),wT=Yl("tooltip"),_T=Yl("label"),xT=cf("active",!1),ET=cf("enabled",!0),Ew=cf("primary",!1),ti=t=>xa("type",t,Kl),kT=sf([hT,Cw("trigger"),_w("minChars",1),((t,e)=>Zs(t,t,fw(1),fT()))("columns"),_w("maxResults",10),df("matches",lf),bT,mf,(kw=Kl,xa("highlightOn",[],hw(kw)))]);var kw;const ff=[ET,wT,CT,yT,vT],Sw=[xT].concat(ff),ST=[uf("predicate",Ht),xw("scope","node",["node","editor"]),xw("position","selection",["node","selection","line"])],NT=ff.concat([ti("contextformbutton"),Ew,mf,vw("original",ce)]),RT=Sw.concat([ti("contextformbutton"),Ew,mf,vw("original",ce)]),AT=ff.concat([ti("contextformbutton")]),TT=Sw.concat([ti("contextformtogglebutton")]),OT=bw("type",{contextformbutton:NT,contextformtogglebutton:RT});sf([ti("contextform"),uf("initValue",Y("")),_T,((t,e)=>Zs(t,t,{tag:"required",process:{}},hw(e)))("commands",OT),df("launch",bw("type",{contextformbutton:AT,contextformtogglebutton:TT}))].concat(ST));const PT=t=>{const e=Do(),n=ve(!1),o=e.isSet,r=()=>{o()&&(re(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},a=Zo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=It(e,a=>{return(s=a,((t,e,n)=>{return o=(i=e.extract([t],s=n)).stype===Zn.Error?{stype:Zn.Error,serror:(i=>({input:s,errors:i}))(i.serror)}:i,nf(o,He.error,He.value);var s,i,o})("Autocompleter",kT,{trigger:s.ch,...s})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):d;return At(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+of(l.input));var l},ce);var s}),o=Gf(vi(n,a=>a.trigger)),r=xd(n);return{dataset:n,triggers:o,lookupByTrigger:a=>vt(r,s=>s.trigger===a)}})(t)),s=i=>{var l;(l=i,e.get().map(d=>lw(t.dom,t.selection.getRng(),d.trigger).bind(c=>uw(t,a,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,se(h.triggers,g=>lw(p,f,g))).bind(p=>uw(d,c,p));var p,f,h})(t,a))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,re(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=Se(l)?l.fetchOptions:{};s(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=vc(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:s})},DT=Un().browser.isSafari(),Nw=t=>To(k(t)),Rw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Gl=(t,e)=>C.from(t.getParent(e.container(),"details")),Aw=(t,e)=>Gl(t,e).isSome(),Tw=(t,e)=>{const n=e.getNode();ge(n)||t.selection.setCursorLocation(n,e.offset())},Ow=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?Me(r):_n(r)).each(a=>Tw(t,a))}else Tw(t,e)},Bw=(t,e,n)=>{const{dom:o,selection:r}=t,a=t.getBody();if("character"===n){const s=L.fromRangeStart(r.getRng()),i=o.getParent(s.container(),o.isBlock),l=Gl(o,s),d=i&&o.isEmpty(i),c=Te(null==i?void 0:i.previousSibling),u=Te(null==i?void 0:i.nextSibling);return!!(d&&(e?u:c)&&la(!e,a,s).exists(m=>Aw(o,m)&&!Cg(l,Gl(o,m))))||la(e,a,s).fold(Ht,m=>{const p=Gl(o,m);if(Aw(o,m)&&!Cg(l,p)){if(e||Ow(t,m,!1),i&&d){if(e&&c||!e&&u)return!0;Ow(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},Or=(t,e,n)=>{return r=e,a=n,((s,i)=>{const l=C.from(s.getParent(i.startContainer,"details")),d=C.from(s.getParent(i.endContainer,"details"));if(l.isSome()||d.isSome()){const c=l.bind(u=>C.from(s.select("summary",u)[0]));return C.some({startSummary:c,startDetails:l,endDetails:d})}return C.none()})((o=t).dom,o.selection.getRng()).fold(()=>Bw(o,r,a),s=>((t,e,n,o)=>{const r=t.selection.getRng(),a=L.fromRangeStart(r),s=t.getBody();return"selection"===o?((i,l)=>{const d=l.startSummary.exists(m=>m.contains(i.startContainer)),c=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(d||c)&&!(d&&c)||u})(r,e):n?(i=a,e.startSummary.exists(d=>{return c=i,_n(u=d).exists(m=>te(m.getNode())&&We(u,m).exists(p=>p.isEqual(c))||m.isEqual(c));var c,u})||((i,l,d)=>d.startDetails.exists(c=>$e(i,l).forall(u=>!c.contains(u.container()))))(s,a,e)):((i,l)=>l.startSummary.exists(d=>{return c=i,Me(d).exists(m=>m.isEqual(c));var c}))(a,e)||((i,l)=>l.startDetails.exists(d=>We(d,i).forall(c=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(c.container())))))(a,e);var i})(o,s,r,a)||Bw(o,r,a))||DT&&((o,r,a)=>{const s=o.selection,i=s.getNode(),l=s.getRng(),d=L.fromRangeStart(l);return!!CE(i)&&("selection"===a&&Rw(l,i)||r0(r,d,i)?Nw(i):o.undoManager.transact(()=>{const c=s.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=null!=c?c:{};const h=()=>{W(u)&&W(m)&&W(p)&&W(f)&&(null==c||c.setBaseAndExtent(u,m,p,f))},g=(v,y)=>{F(v.childNodes,_=>{Ns(_)&&y.appendChild(_)})},b=o.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),"word"!==a&&"line"!==a||null==c||c.modify("extend",r?"right":"left",a),!s.isCollapsed()&&Rw(s.getRng(),b)?Nw(i):(o.execCommand(r?"ForwardDelete":"Delete"),u=null==c?void 0:c.anchorNode,m=null==c?void 0:c.anchorOffset,p=null==c?void 0:c.focusNode,f=null==c?void 0:c.focusOffset,g(b,i),h()),o.dom.remove(b)}),!0)})(t,e,n)?C.some(xt):C.none();var o,r,a},Pw=t=>(e,n,o={})=>{const r=e.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:xt,inputType:n},s=Tp(new InputEvent(t));return e.dispatch(t,{...s,...a,...o})},ei=Pw("input"),Xl=Pw("beforeinput"),Dw=Un(),Lw=Dw.os,Mw=Lw.isMacOS()||Lw.isiOS(),MT=Dw.browser.isFirefox(),Ea=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const a=(s=>{for(;s;){if(nt(s)||H(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(e.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&e.insertBefore(n.doc.createTextNode(he),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const a=new ue(e,e);let s,i=e;for(;s=a.current();){if(H(s)){r.setStart(s,0),r.setEnd(s,0);break}if(o[s.nodeName.toLowerCase()]){r.setStartBefore(s),r.setEndBefore(s);break}i=s,s=a.next()}s||(r.setStart(i,0),r.setEnd(i,0))}else te(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),Os(t,r)},ni=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},gf=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),pf=t=>{t.innerHTML='<br data-mce-bogus="1">'},oi=(t,e)=>{Le(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const a=n.dom;C.from(r.style).map(a.parseStyle).each(c=>{const u={...Fd(k(o)),...c};a.setStyles(o,u)});const s=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>vt(c.split(/\s+/),u=>""!==u));Pe(s,i,(c,u)=>{const m=vt(u,f=>!Mt(c,f)),p=[...c,...m];a.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=Fa(r,(c,u)=>!Mt(l,u));a.setAttribs(o,d)})(t,e,vs(t))},Iw=(t,e,n,o,r=!0,a,s)=>{const i=t.dom,l=t.schema,d=Le(t),c=n?n.nodeName.toUpperCase():"";let u=e;const m=l.getTextInlineElements();let p;p=a||"TABLE"===c||"HR"===c?i.create(a||d,s||{}):n.cloneNode(!1);let f=p;if(r){do{if(m[u.nodeName]){if(on(u)||rn(u))continue;const h=u.cloneNode(!1);i.setAttrib(h,"id",""),p.hasChildNodes()?(h.appendChild(p.firstChild),p.appendChild(h)):(f=h,p.appendChild(h))}}while((u=u.parentNode)&&u!==o)}else i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);return oi(t,p),pf(f),p},Fw=(t,e)=>{const n=null==t?void 0:t.parentNode;return W(n)&&n.nodeName===e},Uw=t=>W(t)&&/^(OL|UL|LI)$/.test(t.nodeName),hf=t=>W(t)&&/^(LI|DT|DD)$/.test(t.nodeName),Ql=t=>{const e=t.parentNode;return hf(e)?e:t},Jl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nt(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},zw=t=>Oe(vi(Fd(k(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),IT=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),bf=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,vf=(t,e)=>W(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),yf=(t,e,n)=>H(e)?t?1===n&&e.data.charAt(n-1)===be?0:n:n===e.data.length-1&&e.data.charAt(n)===be?e.data.length:n:n,jw={insert:(t,e)=>{let n,o,r,a,s=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),d=t.selection.getRng(),c=Le(t),u=k(d.startContainer),m=Gr(u,d.startOffset),p=m.exists(O=>xi(O)&&!rr(O)),f=d.collapsed&&p,h=(O,P)=>Iw(t,n,w,_,yk(t),O,P),g=O=>{const P=yf(O,n,o);if(H(n)&&(O?P>0:P<n.data.length))return!1;if(n.parentNode===w&&s&&!O||O&&nt(n)&&n===w.firstChild)return!0;if(bf(n,"TABLE")||bf(n,"HR"))return s&&!O||!s&&O;const E=new ue(n,w);let R;for(H(n)&&(O&&0===P?E.prev():O||P!==n.data.length||E.next());R=E.current();){if(nt(R)){if(!R.getAttribute("data-mce-bogus")){const B=R.nodeName.toLowerCase();if(l[B]&&"br"!==B)return!1}}else if(H(R)&&!Bo(R.data))return!1;O?E.prev():E.next()}return!0},b=()=>{let O;return O=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==x?h(c):h(),((P,E)=>{const R=Ck(P);return!ne(E)&&(it(R)?Mt($.explode(R),E.nodeName.toLowerCase()):R)})(t,a)&&vf(i,a)&&i.isEmpty(w,void 0,{includeZwsp:!0})?O=i.split(a,w):i.insertAfter(O,w),Ea(t,O),O};cl(i,d).each(O=>{d.setStart(O.startContainer,O.startOffset),d.setEnd(O.endContainer,O.endOffset)}),n=d.startContainer,o=d.startOffset;const v=!(!e||!e.shiftKey),y=!(!e||!e.ctrlKey);nt(n)&&n.hasChildNodes()&&!f&&(s=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=s&&H(n)?n.data.length:0);const _=ni(i,n);if(!_||((O,P)=>{const E=O.dom.getParent(P,"ol,ul,dl");return null!==E&&"false"===O.dom.getContentEditableParent(E)})(t,n))return;v||(n=((O,P,E,R,B)=>{var I,G;const V=O.dom,dt=null!==(I=ni(V,R))&&void 0!==I?I:V.getRoot();let rt=V.getParent(R,V.isBlock);if(!rt||!vf(V,rt)){if(rt=rt||dt,!rt.hasChildNodes()){const tt=V.create(P);return oi(O,tt),rt.appendChild(tt),E.setStart(tt,0),E.setEnd(tt,0),tt}let ft,ct=R;for(;ct&&ct.parentNode!==rt;)ct=ct.parentNode;for(;ct&&!V.isBlock(ct);)ft=ct,ct=ct.previousSibling;const X=null===(G=null==ft?void 0:ft.parentElement)||void 0===G?void 0:G.nodeName;if(ft&&X&&O.schema.isValidChild(X,P.toLowerCase())){const tt=ft.parentNode,yt=V.create(P);for(oi(O,yt),tt.insertBefore(yt,ft),ct=ft;ct&&!V.isBlock(ct);){const S=ct.nextSibling;yt.appendChild(ct),ct=S}E.setStart(R,B),E.setEnd(R,B)}}return R})(t,c,d,n,o));let w=i.getParent(n,i.isBlock)||i.getRoot();a=W(null==w?void 0:w.parentNode)?i.getParent(w.parentNode,i.isBlock):null,r=w?w.nodeName.toUpperCase():"";const x=a?a.nodeName.toUpperCase():"";if("LI"!==x||y||(w=a,a=a.parentNode,r=x),nt(a)&&(O=t,E=w,!v&&E.nodeName.toLowerCase()===Le(O)&&O.dom.isEmpty(E)&&((R,B,I)=>{let G=B;for(;G&&G!==R&&Te(G.nextSibling);){const dt=G.parentElement;if(!dt||(V=dt,!_t(O.schema.getTextBlockElements(),V.nodeName.toLowerCase())))return qd(dt);G=dt}var V;return!1})(O.getBody(),E)))return((O,P,E)=>{var R,B,I;const G=P(Le(O)),V=O.dom.getParent(E,qd);V&&(O.dom.insertAfter(G,V),Ea(O,G),(null!==(I=null===(B=null===(R=E.parentElement)||void 0===R?void 0:R.childNodes)||void 0===B?void 0:B.length)&&void 0!==I?I:0)>1&&O.dom.remove(E))})(t,h,w);var O,E;if(/^(LI|DT|DD)$/.test(r)&&nt(a)&&i.isEmpty(w))return void((O,P,E,R,B)=>{const I=O.dom,G=O.selection.getRng(),V=E.parentNode;if(E===O.getBody()||!V)return;var dt;Uw(dt=E)&&Uw(dt.parentNode)&&(B="LI");const rt=hf(R)?zw(R):void 0;let ft=hf(R)&&rt?P(B,{style:zw(R)}):P(B);if(Jl(E,R,!0)&&Jl(E,R,!1))if(Fw(E,"LI")){const ct=Ql(E);I.insertAfter(ft,ct),(null===(tt=(X=E).parentNode)||void 0===tt?void 0:tt.firstChild)===X?I.remove(ct):I.remove(E)}else I.replace(ft,E);else if(Jl(E,R,!0))Fw(E,"LI")?(I.insertAfter(ft,Ql(E)),ft.appendChild(I.doc.createTextNode(" ")),ft.appendChild(E)):V.insertBefore(ft,E),I.remove(R);else if(Jl(E,R,!1))I.insertAfter(ft,Ql(E)),I.remove(R);else{E=Ql(E);const ct=G.cloneRange();ct.setStartAfter(R),ct.setEndAfter(E);const X=ct.extractContents();if("LI"===B&&((tt,yt)=>tt.firstChild&&"LI"===tt.firstChild.nodeName)(X)){const tt=vt(At(ft.children,k),So(Ei("br")));ft=X.firstChild,I.insertAfter(X,E),F(tt,yt=>Ud(k(ft),yt)),rt&&ft.setAttribute("style",rt)}else I.insertAfter(X,E),I.insertAfter(ft,E);I.remove(R)}var X,tt;Ea(O,ft)})(t,h,a,w,c);if(!(f||w!==t.getBody()&&vf(i,w)))return;const N=w.parentNode;let T;if(f)T=h(c),m.fold(()=>{ie(u,k(T))},O=>{qe(O,k(T))}),t.selection.setCursorLocation(T,0);else if(ea(w))T=Qd(w),i.isEmpty(w)&&pf(w),oi(t,T),Ea(t,T);else if(g(!1))T=b();else if(g(!0)&&N){T=N.insertBefore(h(),w);const O=k(d.startContainer).dom.hasChildNodes()&&d.collapsed;Ea(t,bf(w,"HR")||O?T:w)}else{const O=(E=>{const R=E.cloneRange();return R.setStart(E.startContainer,yf(!0,E.startContainer,E.startOffset)),R.setEnd(E.endContainer,yf(!1,E.endContainer,E.endOffset)),R})(d).cloneRange();O.setEndAfter(w);const P=O.extractContents();(E=>{F(Xg(k(E),tn),R=>{const B=R.dom;B.nodeValue=Xe(B.data)})})(P),(E=>{let R=E;do{H(R)&&(R.data=R.data.replace(/^[\r\n]+/,"")),R=R.firstChild}while(R)})(P),T=P.firstChild,i.insertAfter(P,w),((E,R,B)=>{var I;const G=[];if(!B)return;let V=B;for(;V=V.firstChild;){if(E.isBlock(V))return;nt(V)&&!R[V.nodeName.toLowerCase()]&&G.push(V)}let dt=G.length;for(;dt--;)V=G[dt],(!V.hasChildNodes()||V.firstChild===V.lastChild&&""===(null===(I=V.firstChild)||void 0===I?void 0:I.nodeValue)||IT(E,V))&&E.remove(V)})(i,l,T),((E,R)=>{R.normalize();const B=R.lastChild;(!B||nt(B)&&/^(left|right)$/gi.test(E.getStyle(B,"float",!0)))&&E.add(R,"br")})(i,w),i.isEmpty(w)&&pf(w),T.normalize(),i.isEmpty(T)?(i.remove(T),b()):(oi(t,T),Ea(t,T))}i.setAttrib(T,"id",""),t.dispatch("NewBlock",{newBlock:T})},fakeEventName:"insertParagraph"},Hw=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),Os(t,o)},FT=(t,e)=>{const n=pe("br");qe(k(e),n),t.undoManager.add()},UT=(t,e)=>{zT(t.getBody(),e)||fo(k(e),pe("br"));const n=pe("br");fo(k(e),n),Hw(t,n.dom,!1),t.undoManager.add()},zT=(t,e)=>{return n=L.after(e),!!te(n.getNode())||$e(t,L.after(e)).map(o=>te(o.getNode())).getOr(!1);var n},$w=t=>t&&"A"===t.nodeName&&"href"in t,jT=t=>t.fold(Ht,$w,$w,Ht),HT=(t,e)=>{e.fold(xt,Z(FT,t),Z(UT,t),xt)},Vw={insert:(t,e)=>{const n=(o=>{const r=Z(Nr,o),a=L.fromRangeStart(o.selection.getRng());return Qn(r,o.getBody(),a).filter(jT)})(t);n.isSome()?n.each(Z(HT,t)):((o,r)=>{const s=o.dom,i=o.selection.getRng();let l,d=!1;cl(s,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(nt(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&H(u)?u.data.length:0}let m=s.getParent(u,s.isBlock);const p=m&&m.parentNode?s.getParent(m.parentNode,s.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(m=p),H(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new ue(b,v);let _;const w=g.getNonEmptyElements();for(;_=y.next();)if(w[_.nodeName.toLowerCase()]||H(_)&&_.length>0)return!0;return!1})(o.schema,u,m||s.getRoot())||(l=s.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=s.create("br"),xc(s,i,l),Hw(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},qw=(t,e)=>gf(t).filter(n=>e.length>0&&Rn(k(n),e)).isSome(),Qe=Vn([{br:[]},{block:[]},{none:[]}]),$T=(t,e)=>{return qw(n=t,vk(n));var n},Ww=t=>(e,n)=>gf(e).filter(r=>es(k(r))).isSome()===t,Kw=(t,e)=>(n,o)=>gf(n).fold(Y(""),s=>s.nodeName.toUpperCase())===t.toUpperCase()===e,VT=t=>{const e=ni(t.dom,t.selection.getStart());return ne(e)},ri=t=>Kw("pre",t),Zl=t=>(e,n)=>pk(e)===t,qT=(t,e)=>{return qw(n=t,bk(n));var n},td=(t,e)=>e,WT=t=>{const e=Le(t),n=ni(t.dom,t.selection.getStart());return W(n)&&t.schema.isValidChild(n.nodeName,e)},KT=t=>{const e=t.selection.getRng(),n=k(e.startContainer),o=Gr(n,e.startOffset).map(r=>xi(r)&&!rr(r));return e.collapsed&&o.getOr(!0)},mn=(t,e)=>(n,o)=>Oe(t,(r,a)=>r&&a(n,o),!0)?C.some(e):C.none(),ed=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),W(n)&&Xl(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),W(n)&&ei(e,t.fakeEventName))},Yw=(t,e)=>{const n=()=>ed(Vw,t,e),o=()=>ed(jw,t,e),r=(a=t,s=e,HC([mn([$T],Qe.none()),mn([ri(!0),VT],Qe.none()),mn([Kw("summary",!0)],Qe.br()),mn([ri(!0),Zl(!1),td],Qe.br()),mn([ri(!0),Zl(!1)],Qe.block()),mn([ri(!0),Zl(!0),td],Qe.block()),mn([ri(!0),Zl(!0)],Qe.br()),mn([Ww(!0),td],Qe.br()),mn([Ww(!0)],Qe.block()),mn([qT],Qe.br()),mn([td],Qe.br()),mn([WT],Qe.block()),mn([KT],Qe.block())],[a,!(!s||!s.shiftKey)]).getOr(Qe.none()));var a,s;switch(hk(t)){case"linebreak":r.fold(n,n,xt);break;case"block":r.fold(o,o,xt);break;case"invert":r.fold(o,n,xt);break;default:r.fold(n,o,xt)}},Gw=Un(),YT=Gw.os.isiOS()&&Gw.browser.isSafari(),Xw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Yw(t,e)}))},GT=Un(),Qw=t=>t.stopImmediatePropagation(),Jw=t=>t.keyCode===Q.PAGE_UP||t.keyCode===Q.PAGE_DOWN,Zw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Qw,!0):!n&&t.get()&&e.off("NodeChange",Qw),t.set(n)},t_=(t,e)=>{const n=e.container(),o=e.offset();return H(n)?(n.insertData(o,t),C.some(L(n,o+t.length))):Ji(e).map(r=>{const a=Yr(t);return e.isAtEnd()?fo(r,a):qe(r,a),L(a.dom,t.length)})},e_=Z(t_,he),n_=Z(t_," "),o_=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},XT=t=>{const e=L.fromRangeStart(t.selection.getRng()),n=k(t.getBody());if(t.selection.isCollapsed()){const o=Z(Nr,t),r=L.fromRangeStart(t.selection.getRng());return Qn(o,t.getBody(),r).bind((a=n,s=>s.fold(i=>We(a.dom,L.before(i)),i=>Me(i),i=>_n(i),i=>$e(a.dom,L.after(i))))).map(a=>()=>{return(s=n,i=e,l=t.schema,d=>qv(s,d,l)?e_(i):n_(i))(a).each(o_(t));var s,i,l})}var a;return C.none()},QT=t=>{return Wr(Ot.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=k(t.getBody());var r,a,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,a=L.fromRangeStart(t.selection.getRng()),s=t.schema,qv(r,a,s)?e_(a):n_(a)).each(o_(t))});var e,n},JT=t=>SS(t)?[{keyCode:Q.TAB,action:pt(rw,t,!0)},{keyCode:Q.TAB,shiftKey:!0,action:pt(rw,t,!1)}]:[],ZT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),PT(t),Xn(t))return ve(null);{const e=(t=>{const e=ve(null),n=Z(Nr,t);return t.on("NodeChange",o=>{ys(t)&&(((r,a,s)=>{const i=At(De(k(a.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=vt(i,r),d=vt(s,r);F(Hr(l,d),Z(c1,!1)),F(Hr(d,l),Z(c1,!0))})(n,t.dom,o.parents),((r,a)=>{const s=a.get();if(r.selection.isCollapsed()&&!r.composing&&s){const i=L.fromRangeStart(r.selection.getRng());L.isTextPosition(i)&&!Gd(l=i)&&!Xd(l)&&(zl(r,((t,e)=>{return L.isTextPosition(e)?(o=e,Lh(n=t)&&o.container()===n?((r,a)=>{const s=Ih(r.data.substr(0,a.offset())),i=Ih(r.data.substr(a.offset()));return(s.text+i.text).length>0?(Fh(r),L(r,a.offset()-s.count)):a})(n,o):Uh(n,o)):((n,o)=>o.container()===n.parentNode?((r,a)=>{const s=a.container(),i=((l,d)=>{const c=pi(l,d);return-1===c?C.none():C.some(c)})(bt(s.childNodes),r).map(l=>l<a.offset()?L(s,a.offset()-1):a).getOr(a);return yr(r),i})(n,o):Uh(n,o))(t,e);var n,o})(s,i)),a.set(null))}var l})(t,e),((r,a,s,i)=>{if(a.selection.isCollapsed()){const l=vt(i,r);F(l,d=>{const c=L.fromRangeStart(a.selection.getRng());Qn(r,a.getBody(),c).bind(u=>u1(a,s,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("beforeinput",o=>{n.selection.isEditable()&&!Xt(o.getTargetRanges(),r=>!dv(n.dom,r))||o.preventDefault()}),(n=>{n.on("keyup compositionstart",Z(JA,n))})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((a,s,i)=>{const l=Ot.os.isMacOS()||Ot.os.isiOS();Xs([{keyCode:Q.RIGHT,action:pt(M1,a,!0)},{keyCode:Q.LEFT,action:pt(M1,a,!1)},{keyCode:Q.UP,action:pt(I1,a,!1)},{keyCode:Q.DOWN,action:pt(I1,a,!0)},...l?[{keyCode:Q.UP,action:pt(Hl,a,!1),metaKey:!0,shiftKey:!0},{keyCode:Q.DOWN,action:pt(Hl,a,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Q.RIGHT,action:pt(ew,a,!0)},{keyCode:Q.LEFT,action:pt(ew,a,!1)},{keyCode:Q.UP,action:pt(Qm,a,!1)},{keyCode:Q.DOWN,action:pt(Qm,a,!0)},{keyCode:Q.UP,action:pt(Qm,a,!1)},{keyCode:Q.UP,action:pt(z1,a,!1)},{keyCode:Q.DOWN,action:pt(z1,a,!0)},{keyCode:Q.RIGHT,action:pt(V1,a,!0)},{keyCode:Q.LEFT,action:pt(V1,a,!1)},{keyCode:Q.UP,action:pt(q1,a,!1)},{keyCode:Q.DOWN,action:pt(q1,a,!0)},{keyCode:Q.RIGHT,action:pt(m1,a,s,!0)},{keyCode:Q.LEFT,action:pt(m1,a,s,!1)},{keyCode:Q.RIGHT,ctrlKey:!l,altKey:l,action:pt(zA,a,s)},{keyCode:Q.LEFT,ctrlKey:!l,altKey:l,action:pt(jA,a,s)},{keyCode:Q.UP,action:pt(U1,a,!1)},{keyCode:Q.DOWN,action:pt(U1,a,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",a=>{r=a.keyCode===Q.BACKSPACE,a.isDefaultPrevented()||((s,i,l)=>{const d=l.keyCode===Q.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=s.selection.isCollapsed(),u=c?"character":"selection",m=p=>c?p?"word":"line":"selection";$1([{keyCode:Q.BACKSPACE,action:pt(N1,s)},{keyCode:Q.BACKSPACE,action:pt(Lm,s,!1)},{keyCode:Q.DELETE,action:pt(Lm,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Bm,s,!1)},{keyCode:Q.DELETE,action:pt(Bm,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Vm,s,i,!1)},{keyCode:Q.DELETE,action:pt(Vm,s,i,!0)},{keyCode:Q.BACKSPACE,action:pt(Uu,s,!1)},{keyCode:Q.DELETE,action:pt(Uu,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Or,s,!1,u)},{keyCode:Q.DELETE,action:pt(Or,s,!0,u)},...Mw?[{keyCode:Q.BACKSPACE,altKey:!0,action:pt(Or,s,!1,m(!0))},{keyCode:Q.DELETE,altKey:!0,action:pt(Or,s,!0,m(!0))},{keyCode:Q.BACKSPACE,metaKey:!0,action:pt(Or,s,!1,m(!1))}]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:pt(Or,s,!1,m(!0))},{keyCode:Q.DELETE,ctrlKey:!0,action:pt(Or,s,!0,m(!0))}],{keyCode:Q.BACKSPACE,action:pt(Mm,s,!1)},{keyCode:Q.DELETE,action:pt(Mm,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Km,s,!1)},{keyCode:Q.DELETE,action:pt(Km,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Tm,s,!1)},{keyCode:Q.DELETE,action:pt(Tm,s,!0)},{keyCode:Q.BACKSPACE,action:pt(Am,s,!1)},{keyCode:Q.DELETE,action:pt(Am,s,!0)},{keyCode:Q.BACKSPACE,action:pt(qm,s,!1)},{keyCode:Q.DELETE,action:pt(qm,s,!0)}],l).filter(p=>s.selection.isEditable()).each(p=>{l.preventDefault(),Xl(s,d).isDefaultPrevented()||(p(),ei(s,d))})})(n,o,a)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(i=a,l=r,Xs([{keyCode:Q.BACKSPACE,action:pt(MC,s=n)},{keyCode:Q.DELETE,action:pt(MC,s)},...Mw?[{keyCode:Q.BACKSPACE,altKey:!0,action:pt(Gs,s)},{keyCode:Q.DELETE,altKey:!0,action:pt(Gs,s)},...l?[{keyCode:MT?224:91,action:pt(Gs,s)}]:[]]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:pt(Gs,s)},{keyCode:Q.DELETE,ctrlKey:!0,action:pt(Gs,s)}]],i)),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{var a;r.keyCode===Q.ENTER&&(YT&&(a=>{if(!a.collapsed)return!1;const s=a.startContainer;if(H(s)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=s.data.charAt(a.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=C.some((a=n).selection.getBookmark()),a.undoManager.add()):Xw(n,r))}),n.on("keyup",r=>{r.keyCode===Q.ENTER&&o.each(()=>{return s=r,(a=n).undoManager.undo(),o.fold(xt,i=>a.selection.moveToBookmark(i)),Xw(a,s),void(o=C.none());var a,s})})})(t),(n=>{n.on("keydown",o=>{var r,a;o.isDefaultPrevented()||(a=o,$1([{keyCode:Q.SPACEBAR,action:pt(XT,r=n)},{keyCode:Q.SPACEBAR,action:pt(QT,r)}],a).each(s=>{a.preventDefault(),Xl(r,"insertText",{data:" "}).isDefaultPrevented()||(s(),ei(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const a=k(r.getBody());r.selection.isCollapsed()&&((t,e,n)=>{const o=e.container();if(!H(o))return C.none();if((r=>{const a=r.container();return H(a)&&Be(a.data,he)})(e)){const r=Yv(t,o,!1,n)||(a=>{const s=a.data,i=(l=>{const d=l.split("");return At(d,(c,u)=>nl(c)&&u>0&&u<d.length-1&&Hc(d[u-1])&&Hc(d[u+1])?" ":c).join("")})(s);return i!==s&&(a.data=i,!0)})(o)||Gv(t,o,!1,n);return Wr(r,e)}if(Nu(t,e,n)){const r=Yv(t,o,!0,n)||Gv(t,o,!0,n);return Wr(r,e)}return C.none()})(a,L.fromRangeStart(r.selection.getRng()),r.schema).each(s=>{r.selection.setRng(s.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var a;o.isDefaultPrevented()||(a=o,Xs([...JT(n)],a).each(s=>{a.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((a,s,i)=>{const l=Ot.os.isMacOS()||Ot.os.isiOS();Xs([{keyCode:Q.END,action:pt(F1,a,!0)},{keyCode:Q.HOME,action:pt(F1,a,!1)},...l?[]:[{keyCode:Q.HOME,action:pt(Hl,a,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Q.END,action:pt(Hl,a,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Q.END,action:pt(W1,a,!0)},{keyCode:Q.HOME,action:pt(W1,a,!1)},{keyCode:Q.END,action:pt(jl,a,!0,s)},{keyCode:Q.HOME,action:pt(jl,a,!1,s)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(GT.os.isMacOS())return;const r=ve(!1);n.on("keydown",a=>{Jw(a)&&Zw(r,n,!0)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(l=a,Xs([{keyCode:Q.PAGE_UP,action:pt(jl,s=n,!1,i=o)},{keyCode:Q.PAGE_DOWN,action:pt(jl,s,!0,i)}],l)),Jw(a)&&r.get()&&(Zw(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class tO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const a=e.selection.getRng(),s={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!==r.type&&su(s,n)||e.dispatch("SelectionChange"),n=s}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&ol(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&ol(e)&&("IMG"===e.selection.getNode().nodeName?sn.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!Gk(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const a=[];this.editor.dom.getParent(o,s=>s===r||(a.push(s),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:a})}}isSameElementPath(e){let n;const o=this.editor,r=Xo(o.dom.getParents(e,Zt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const r_=fs("image"),Cf=fs("event"),nd=t=>e=>{e[Cf]=t},a_=nd(0),eO=nd(2),nO=nd(1),wf=fs("mode"),od=t=>e=>{e[wf]=t},s_=(t,e)=>od(e)(t),i_=od(0),_f=od(2),rO=od(1),l_=t=>e=>C.from(e[wf]).exists(o=>o===t),ka=l_(0),d_=l_(1),aO=["none","copy","link","move"],sO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xf=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){Mt(aO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>C.from(t[Cf]).exists(n=>0===n))(o)&&Mt(sO,r)&&(n=r)},get items(){return r=o,a=t.items,{...a,get length(){return a.length},add:(s,i)=>{if(ka(r)){if(!it(s))return a.add(s);if(!ge(i))return a.add(s,i)}return null},remove:s=>{ka(r)&&a.remove(s)},clear:()=>{ka(r)&&a.clear()}};var r,a},get files(){return d_(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,a,s)=>{ka(o)&&(o[r_]={image:r,x:a,y:s},t.setDragImage(r,a,s))},getData:r=>d_(o)?"":t.getData(r),setData:(r,a)=>{ka(o)&&t.setData(r,a)},clearData:r=>{ka(o)&&t.clearData(r)}};return i_(o),o},c_=(t,e)=>t.setData("text/html",e),u_="x-tinymce/html",rd=Y(u_),Ef="\x3c!-- "+u_+" --\x3e",iO=t=>Ef+t,m_=t=>-1!==t.indexOf(Ef),f_="%MCEPASTEBIN%",kf=t=>t.dom.get("mcepastebin"),lO=t=>W(t)&&"mcepastebin"===t.id,g_=t=>t===f_,p_=(t,e)=>($.each(e,n=>{t=Eo(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),h_=t=>p_(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?he:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),b_=(t,e)=>({content:t,cancelled:e}),Sf=(t,e)=>(t.insertContent(e,{merge:gS(t),paste:!0}),!0),Nf=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),dO=(t,e,n)=>{return!(t.selection.isCollapsed()||!Nf(e)||(o=t,r=e,a=n,o.undoManager.extra(()=>{a(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,a},cO=(t,e,n)=>{return o=t,!(!Nf(r=e)||!Xt(Dh(o),a=>Nd(r.toLowerCase(),`.${a.toLowerCase()}`)))&&((o,r,a)=>(o.undoManager.extra(()=>{a(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},uO=(t=>{let e=0;return()=>"mceclip"+e++})(),mO=t=>{const e=xf();return c_(e,t),_f(e),e},v_=(t,e,n,o,r)=>{const a=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=ba({sanitize:Bc(f),sandbox_iframes:Pc(f)},f.schema);g.addNodeFilter("meta",v=>{$.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return Uo({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return b_(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):b_(p,m.isDefaultPrevented())})(t,e,n);if(!a.cancelled){const s=a.content,i=()=>{return l=t,d=s,void(o||!pS(l)?Sf(l,d):(u=l,m=d,$.each([dO,cO,Sf],p=>!p(u,m,Sf))));var l,d,u,m};r?Xl(t,"insertFromPaste",{dataTransfer:mO(s)}).isDefaultPrevented()||(i(),ei(t,"insertFromPaste")):i()}},ad=(t,e,n,o)=>{const r=n||m_(e);v_(t,e.replace(Ef,""),r,!1,o)},Rf=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((a,s,i)=>{const l=a.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=vi(p,(g,b)=>b+'="'+mr.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(s,i),c="</"+s+">",u=At(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:At(u,m=>d+m+c).join("")})(dp(o,bS(t)),Le(t),vs(t));v_(t,r,!1,!0,n)},y_=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},Vo=(t,e)=>e in t&&t[e].length>0,C_=t=>Vo(t,"text/html")||Vo(t,"text/plain"),w_=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(Xi(t)&&o){const a=((s,i)=>{const l=i.items?je(bt(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?bt(i.files):[];return vt(l.length>0?l:d,(c=>{const u=Dh(c);return m=>we(m.type,"image/")&&Xt(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(s))})(t,o);if(a.length>0)return e.preventDefault(),(r=a,Promise.all(At(r,s=>gy(s).then(i=>({file:s,uri:i}))))).then(s=>{n&&t.selection.setRng(n),F(s,i=>{var l,d;l=t,im((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,g=h.getByData(p,u),b=null!=g?g:((v,y,_,w)=>{const x=uO(),N=xh(v)&&W(_.name),T=N?((E,R)=>{const B=R.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return W(B)?E.dom.encode(B[1]):void 0})(v,_.name):x,P=y.create(x,_,w,T,N?_.name:void 0);return y.add(P),P})(l,h,f,p);ad(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},Af=(t,e,n,o,r)=>{let a=h_(n);const s=Vo(e,rd())||m_(n),i=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),l=Nf(a);(g_(a)||!a.length||i&&!l)&&(o=!0),(o||l)&&(a=Vo(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=Po(),u=ba({},c);let m="";const p=c.getVoidElements(),f=$.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let _=b.firstChild;if(_)do{g(_)}while(_=_.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=p_(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(a)),g_(a)||(o?Rf(t,a,r):ad(t,a,s,r))},__=(t,e,n,o)=>{((r,a,s)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",a),r.setData("text/plain",s),r.setData(rd(),a),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},x_=t=>(e,n)=>{const{dom:o,selection:r}=t,a=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=o.create("div",{contenteditable:"true"},e);o.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),o.add(t.getBody(),a);const i=r.getRng();s.focus();const l=o.createRng();l.selectNodeContents(s),r.setRng(l),sn.setEditorTimeout(t,()=>{r.setRng(i),o.remove(a),n()},0)},E_=t=>({html:iO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),k_=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},S_=(t,e)=>{var n,o;return Er.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},N_=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},gO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,R_=t=>$.trim(t).replace(gO,as).toLowerCase(),pO=(t,e,n)=>{const o=mS(t);if(n||"all"===o||!fS(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const a=t.dom,s=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=a.parseStyle(a.decode(d)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=a.getStyle(s,r[f],!0);/color/.test(r[f])&&(g=R_(g),b=R_(b)),b!==g&&(m[r[f]]=h)}const p=a.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(a,s,i,l)=>s+' style="'+i+'"'+l)},bO=te,A_=H,vO=t=>qt(t.dom),T_=t=>e=>Dt(k(t),e),O_=(t,e)=>nr(k(t),vO,T_(e)),B_=(t,e,n)=>{const o=new ue(t,e),r=n?o.next.bind(o):o.prev.bind(o);let a=t;for(let s=n?t:r();s&&!bO(s);s=r())wn(s)&&(a=s);return a};var Sa;!function(t){t.Before="before",t.After="after"}(Sa||(Sa={}));const CO=(t,e)=>Math.abs(t.left-e),wO=(t,e)=>Math.abs(t.right-e),xO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Tf=(t,e,n,o)=>{const r=c=>wn(c.node)?C.some(c):nt(c.node)?Tf(bt(c.node.childNodes),e,n,!1):C.none(),a=(c,u)=>{const m=M(c,(p,f)=>u(p,e,n)-u(f,e,n));return se(m,r).map(p=>{return o&&!H(p.node)&&m.length>1?(f=p,h=m[1],g=u,r(h).filter(b=>Math.abs(g(f,e,n)-g(b,e,n))<2&&H(b.node))).getOr(p):p;var f,h,g})},[s,i]=((t,e)=>{return(n=vt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Oe(n,(o,r)=>o.fold(()=>C.some(r),a=>{const s=Math.min(r.left,a.left),i=Math.min(r.top,a.top),l=Math.max(r.right,a.right),d=Math.max(r.bottom,a.bottom);return C.some({top:i,right:l,bottom:d,left:s,width:l-s,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Ze(t,a=>((s,i)=>{const l=(d=s,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(s.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(s,i)&&l>.5})(a,n));return[o,r]});var n})(o1(t),n),{pass:l,fail:d}=Ze(i,c=>c.top<n);return a(s,xO).orThunk(()=>a(d,Wp)).orThunk(()=>a(l,Wp))},P_=(t,e,n)=>((o,r,a)=>{const s=k(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(qa))(uo(s),r,a).filter(d=>co(s,d)).getOr(s);return((d,c,u,m)=>{const p=(f,h)=>{const g=vt(f.dom.childNodes,So(b=>nt(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Tf(g,u,m,!0),b=>{const v=vt(g,y=>y!==b.dom);return Tf(v,u,m,!0)}).orThunk(()=>(Dt(f,d)?C.none():ki(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(s,l,r,a)})(t,e,n).filter(o=>ws(o.node)).map(o=>{return{node:(r=o).node,position:CO(r,a=e)<wO(r,a)?Sa.Before:Sa.After};var r,a}),D_=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,a=r.documentElement,s=r.defaultView;return{top:o.top+(null!==(e=null==s?void 0:s.scrollY)&&void 0!==e?e:0)-a.clientTop,left:o.left+(null!==(n=null==s?void 0:s.scrollX)&&void 0!==n?n:0)-a.clientLeft}},L_=t=>({target:t,srcElement:t}),M_=qt,kO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(M_,Cn),SO=(t,e,n,o)=>{const r=t.dom,a=e.cloneNode(!0);r.setStyles(a,{width:n,height:o}),r.setAttrib(a,"data-mce-selected",null);const s=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(a,{margin:0,boxSizing:"border-box"}),s.appendChild(a),s},sd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},I_=sd("left",-32),F_=sd("left",32),U_=sd("top",-32),z_=sd("top",32),j_=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},ai=(t,e,n,o,r)=>{"dragstart"===e&&c_(o,t.dom.getOuterHTML(n));const a=((t,e,n,o)=>{const r=((a,s)=>{const i=(l=>{const d=xf(),c=C.from(l[wf]);return _f(l),a_(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[r_])).each(u=>d.setDragImage(u.image,u.x,u.y)),F(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),F(l.files,u=>d.items.add(u)),(u=>C.from(u[Cf]))(l).each(u=>{var m;m=d,nd(u)(m)}),c.each(u=>{s_(l,u),s_(d,u)}),d;var u})(a);return"dragstart"===s?(a_(i),i_(i)):"drop"===s?(eO(i),_f(i)):(nO(i),rO(i)),i})(n,t);return ge(o)?((a,s,i)=>{const l=La("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:a,composedPath:l,initEvent:l,preventDefault:xt,stopImmediatePropagation:xt,stopPropagation:xt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...L_(s)}})(t,e,r):(a=t,s=o,i=e,l=r,{...s,dataTransfer:l,type:a,...L_(i)});var a,s,i,l})(e,n,o,r);return t.dispatch(e,a)},H_=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>ai(e,"dragend",o.element,o.dataTransfer),r=>ai(e,"dragend",o.element,o.dataTransfer,r))}),$_(t)},$_=t=>{t.on(e=>{e.intervalId.clear(),j_(e.ghost)}),t.clear()},si=qt,V_=(t,e)=>Rr(t.getBody(),e),AO=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=Do();let a,s;const i=Le(t),l=t.dom,d=()=>{(c=>{var u,m;const p=De(k(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(Ii(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,Mi(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),s&&(yr(s),s=null),r.on(c=>{l.remove(c.caret),r.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(c,u)=>{let m;if(d(),DS(u))return null;if(!n(u))return s=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(be),b=p.parentNode;if(f){const v=p.previousSibling;if(ta(v)){if(en(v))return v;if(Ii(v))return v.splitText(v.data.length-1)}null==b||b.insertBefore(g,p)}else{const v=p.nextSibling;if(ta(v)){if(en(v))return v;if(Mi(v))return v.splitText(1),v}p.nextSibling?null==b||b.insertBefore(g,p.nextSibling):null==b||b.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),Cs(s.nextSibling)?(m.setStart(s,0),m.setEnd(s,0)):(m.setStart(s,1),m.setEnd(s,1)),m;{const p=((g,b,v)=>{var y;const _=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);_.setAttribute("data-mce-caret",v?"before":"after"),_.setAttribute("data-mce-bogus","all"),_.appendChild(os().dom);const w=b.parentNode;return v?null==w||w.insertBefore(_,b):b.nextSibling?null==w||w.insertBefore(_,b.nextSibling):null==w||w.appendChild(_),_})(i,u,c),f=zh(e,u,c);l.setStyle(p,"top",f.top),s=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),a=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=zh(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(a)}})(t,o,n.isBlock,()=>kr(t)),a="sel-"+n.uniqueId(),s="data-mce-selected";let i;const l=g=>g!==o&&(si(g)||$n(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),r.show(v,b)),c=g=>en(g)||Mi(g)||Ii(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,x=ks(w,o,g),N=x.getNode(!b);if(W(N)){if(ws(N))return d(w,N,!!b&&!x.isAtEnd(),!1);if(Oo(N)&&qt(N.nextSibling)){const O=n.createRng();return O.setStart(N,0),O.setEnd(N,0),O}}const T=x.getNode(b);if(W(T)){if(ws(T))return d(w,T,!b&&!x.isAtEnd(),!1);if(Oo(T)&&qt(T.previousSibling)){const O=n.createRng();return O.setStart(T,1),O.setEnd(T,1),O}}}return null}let v=g.startContainer,y=g.startOffset;const _=g.endOffset;if(H(v)&&0===y&&si(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!nt(v))return null;if(_===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(x=>{const N=x.cloneNode(!0),T=t.dispatch("ObjectSelected",{target:x,targetClone:N});if(T.isDefaultPrevented())return null;const O=((E,R)=>{const B=k(t.getBody()),I=t.getDoc(),G=Xa(B,"#"+a).getOrThunk(()=>{const rt=Wa('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',I);return _e(rt,"id",a),ie(B,rt),rt}),V=n.createRng();Qr(G),ar(G,[Yr(he,I),k(R),Yr(he,I)]),V.setStart(G.dom.firstChild,1),V.setEnd(G.dom.lastChild,0),Si(G,{top:n.getPos(E,t.getBody()).y+"px"}),ev(G);const dt=e.getSel();return dt&&(dt.removeAllRanges(),dt.addRange(V)),V})(x,T.targetClone),P=k(x);return F(De(k(t.getBody()),`*[${s}]`),E=>{Dt(P,E)||xe(E,s)}),n.getAttrib(x,s)||x.setAttribute(s,"1"),i=x,h(),O})(w)}return null},f=()=>{i&&i.removeAttribute(s),Xa(k(t.getBody()),"#"+a).each(Vt),i=null},h=()=>{r.hide()};return Xn(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=V_(t,b);si(v)?(g.preventDefault(),qs(t,v).each(p)):l(b)&&qs(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,_,w)=>{const x=k(y.getBody()),N=y.inline?x:k(uo(x).dom.documentElement),T=((O,P,E,R)=>{const B=P.dom.getBoundingClientRect();return{x:E-(O?B.left+P.dom.clientLeft+oA(P):0),y:R-(O?B.top+P.dom.clientTop+nA(P):0)}})(y.inline,N,_,w);return((O,P,E)=>{const R=tA(O),B=eA(O);return P>=0&&E>=0&&P<=R&&E<=B})(N,T.x,T.y)})(t,g.clientX,g.clientY))return;f(),h();const v=V_(t,b);si(v)?(g.preventDefault(),qs(t,v).each(p)):P_(o,g.clientX,g.clientY).each(y=>{var _;g.preventDefault(),(_=d(1,y.node,y.position===Sa.Before,!1))&&e.setRng(_),po(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{Q.modifierPressed(g)||si(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,_=g.startOffset,w=g.endContainer,x=g.endOffset;return _t(b,y.nodeName.toLowerCase())?0===_?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,_),_t(b,w.nodeName.toLowerCase())?0===x?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,x),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,_;u(b)||nt(y=v)&&"mcepastebin"===y.id||h(),W(_=v)&&n.hasClass(_,"mce-offscreen-selection")||f()}),(t=>{const e=Do(),n=jt.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const u=ae(d.dom.getParents(c.target),kO).getOr(null);if(W(u)&&(m=d.dom,p=d.getBody(),M_(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:xf(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:SO(d,u,u.offsetWidth,u.offsetHeight),intervalId:ek(100)})}}var m,p,f}),a=((t,e)=>{const n=Vi((r,a)=>{return i=r,l=a,(s=e)._selectionOverrides.hideFakeCaret(),void P_(s.getBody(),i,l).fold(()=>s.selection.placeCaretAt(i,l),d=>{const c=s._selectionOverrides.showCaret(1,d.node,d.position===Sa.Before,!1);c?s.selection.setRng(c):s.selection.placeCaretAt(i,l)});var s,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(a=>{const s=Math.max(Math.abs(r.screenX-a.screenX),Math.abs(r.screenY-a.screenY));if(!a.dragging&&s>10){const d=ai(e,"dragstart",a.element,a.dataTransfer,r);if(W(d.dataTransfer)&&(a.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;a.dragging=!0,e.focus()}if(a.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(a,(m=r,p=(g=u=e).inline?D_(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=D_(g.getContentAreaContainer()),y=(_=>{const w=_.getBody(),x=_.getDoc().documentElement;return _.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||x.scrollLeft,top:w.scrollTop||x.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=a.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,_,w,x)=>{let N=0,T=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(N=m.pageX+p-h),m.pageY+f>g&&(T=m.pageY+f-g),u.style.width=p-N+"px",u.style.height=f-T+"px";const O=y.clientHeight,P=y.clientWidth,E=b+y.getBoundingClientRect().top,R=v+y.getBoundingClientRect().left;w.on(B=>{B.intervalId.clear(),B.dragging&&x&&(b+8>=O?B.intervalId.set(z_(_)):b-8<=0?B.intervalId.set(U_(_)):v+8>=P?B.intervalId.set(F_(_)):v-8<=0?B.intervalId.set(I_(_)):E+16>=window.innerHeight?B.intervalId.set(z_(window)):E-16<=0?B.intervalId.set(U_(window)):R+16>=window.innerWidth?B.intervalId.set(F_(window)):R-16<=0&&B.intervalId.set(I_(window)))})})(a.ghost,c,a.width,a.height,a.maxX,a.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var u,m,g,p,f,h,i,l})})(e,t),s=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(W(f)){const h=f.getRangeAt(0).startContainer;return H(h)?h.parentNode:h}return null})(d.selection),h=u.element,!ne(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();ai(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);j_(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&To(k(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}ai(d,"dragend",d.getBody(),u.dataTransfer,c)}}),$_(l)})(e,t),i=((l,d)=>c=>H_(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",a),t.on("mouseup",s),n.bind(o,"mousemove",a),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Q.ESC&&H_(e,t,C.none())})})(g=t),Jk(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const x=w.dataTransfer;x&&(Mt(x.types,"Files")||x.files.length>0)&&(w.preventDefault(),"drop"===w.type&&Pl(b,"Dropped file type is not supported"))}},y=w=>{fl(b,w.target)&&v(w)},_=()=>{const w=jt.DOM,x=b.dom,N=document,T=b.inline?b.getBody():b.getDoc(),O=["drop","dragover"];F(O,P=>{w.bind(N,P,y),x.bind(T,P,v)}),b.on("remove",()=>{F(O,P=>{w.unbind(N,P,y),x.unbind(T,P,v)})})};b.on("init",()=>{sn.setEditorTimeout(b,_,0)})})(g),(g=>{const b=Vi(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=Om(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if($n(v)){const y=Rr(g.getBody(),v),_=qt(y)?y:v;g.selection.getNode()!==_&&qs(g,_).each(w=>g.selection.setRng(w))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Qd(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var g},TO=(t,e)=>{let n=e;for(let o=t.previousSibling;H(o);o=o.previousSibling)n+=o.data.length;return n},q_=(t,e,n,o,r)=>{if(H(n)&&(o<0||o>n.data.length))return[];const a=r&&H(n)?[TO(n,o)]:[o];let s=n;for(;s!==e&&s.parentNode;)a.push(t.nodeIndex(s,r)),s=s.parentNode;return s===e?a.reverse():[]},Of=(t,e,n,o,r,a,s=!1)=>({start:q_(t,e,n,o,s),end:q_(t,e,r,a,s)}),W_=(t,e)=>{const n=e.slice(),o=n.pop();return Je(o)?Oe(n,(r,a)=>r.bind(s=>C.from(s.childNodes[a])),C.some(t)).bind(r=>H(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},K_=(t,e)=>W_(t,e.start).bind(({node:n,offset:o})=>W_(t,e.end).map(({node:r,offset:a})=>{const s=document.createRange();return s.setStart(n,o),s.setEnd(r,a),s})),Na=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,H(e.firstChild)&&Bo(e.firstChild.data)),Na(t,o,n)}},id=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,a=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(H(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),H(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Na(t,r,n),r!==a&&Na(t,a,n))},Bf=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Y_=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:ph(o).concat(t.blockPatterns),inlinePatterns:hh(o).concat(t.inlinePatterns)}},G_=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},X_=(t,e,n)=>{((o,r,a)=>{if(H(o)&&0>=o.length)return C.some(Ln(o,0));{const s=hr($l);return C.from(s.forwards(o,0,Vl(o),a)).map(i=>Ln(i.container,0))}})(e,0,e).each(o=>{const r=o.container;aw(r,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(r,0),l.setEnd(i.container,i.offset),id(t,l,d=>d===e)});const a=k(r),s=Pi(a);var i,l;/^\s[^\s]/.test(s)&&(i=a,l=s.slice(1),Kd.set(i,l))})},Q_=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),ld=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},J_=(t,e,n)=>{const o=K_(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,a=o.endContainer,s=0===o.endOffset?a:a.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:s.parentNode.insertBefore(Q_(t,e+"-end"),s),start:l.insertBefore(Q_(t,e+"-start"),i)}},Z_=(t,e,n)=>{Na(t,t.get(e.prefix+"-end"),n),Na(t,t.get(e.prefix+"-start"),n)},Pf=t=>0===t.start.length,tx=(t,e,n,o)=>{const r=e.start;var a;return tf(t,o.container,o.offset,(a=r,(s,i)=>{const l=s.data.substring(0,i),d=l.lastIndexOf(a.charAt(a.length-1)),c=l.lastIndexOf(a);return-1!==c?c+a.length:-1!==d?d+1:-1}),n).bind(s=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==d&&s.offset>=d+r.length){const c=t.createRng();return c.setStart(s.container,s.offset-r.length),c.setEnd(s.container,s.offset),C.some(c)}return Zm(s.container,s.offset-r.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(s.container,s.offset),m}).filter(u=>u.toString()===r).orThunk(()=>tx(t,e,n,Ln(s.container,0)))})},OO=(t,e,n,o)=>{const r=t.dom,a=r.getRoot(),s=n.pattern,i=n.position.container,l=n.position.offset;return Zm(i,l-n.pattern.end.length,e).bind(d=>{const c=Of(r,a,d.container,d.offset,i,l,o);if(Pf(s))return C.some({matches:[{pattern:s,startRng:c,endRng:c}],position:d});{const u=dd(t,n.remainingPatterns,d.container,d.offset,e,o),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,_=!1)=>{if(0===g.start.length&&!_){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return Jm(b,v,y).bind(w=>tx(h,g,y,w).bind(x=>{var N;return _&&(x.endContainer===w.container&&x.endOffset===w.offset||0===w.offset&&(null===(N=x.endContainer.textContent)||void 0===N?void 0:N.length)===x.endOffset)?C.none():C.some(x)}))})(r,s,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,_=!1)=>Of(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,_))(r,a,h,o);return{matches:m.matches.concat([{pattern:s,startRng:g,endRng:c}]),position:Ln(h.startContainer,h.startOffset)}})}})},dd=(t,e,n,o,r,a)=>{const s=t.dom;return Jm(n,o,s.getRoot()).bind(i=>{const l=G_(s,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!Nd(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=OO(t,r,{pattern:c,remainingPatterns:u,position:i},a);if(m.isNone()&&o>0)return dd(t,e,n,o-1,r,a);if(m.isSome())return m}return C.none()})},ex=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?F(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},nx=(t,e,n,o,r,a)=>{var s;return((i,l)=>{const d=Nn(i,c=>Xt(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(dd(t,r.inlinePatterns,n,o,e,a).fold(()=>[],i=>i.matches),dd(t,(s=r.inlinePatterns,M(s,(i,l)=>l.end.length-i.end.length)),n,o,e,a).fold(()=>[],i=>i.matches))},ox=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((a,s)=>{const i=fs("mce_textpattern"),l=Yo(s,(d,c)=>{const u=J_(a,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return Yo(l,(d,c)=>{const u=l.length-d.length-1,m=Pf(c.pattern)?c.endMarker:J_(a,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);F(r,a=>{const s=n.getParent(a.startMarker.start,n.isBlock),i=l=>l===s;Pf(a.pattern)?((l,d,c,u)=>{const m=ld(l.dom,c);id(l.dom,m,u),ex(l,d,m)})(t,a.pattern,a.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=ld(p,u),h=ld(p,c);id(p,h,m),id(p,f,m);const b=ld(p,{prefix:c.prefix,start:c.end,end:u.start});ex(l,d,b)})(t,a.pattern,a.startMarker,a.endMarker,i),Z_(n,a.endMarker,i),Z_(n,a.startMarker,i)}),t.selection.moveToBookmark(o)},rx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},Df=jt.DOM,DO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Lf=t=>Fa(t,e=>!1===ge(e)),ax=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Lf({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:DO(t),sandbox_iframes:e("sandbox_iframes"),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},sx=t=>{const e=t.options.get;return Lf({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Mf=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,ix=t=>{const e=Mf(t),n=Nh(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},a=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";$.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const s=Promise.all(((l,d,c)=>{const{pass:u,fail:m}=Ze(d,h=>tinymce.Resource.has(Sm(h))),f=[...u.map(h=>{const g=tinymce.Resource.get(Sm(h));return it(g)?Promise.resolve(Mf(l).loadRawCss(h,g)):Promise.resolve()}),Mf(l).loadAll(m)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(a).catch(a),i=Ok(t);return i&&((l,d)=>{const c=k(l.getBody()),u=Id(Ro(c)),m=pe("style");_e(m,"type","text/css"),ie(m,Yr(d)),ie(u,m),l.on("remove",()=>{Vt(m)})})(t,i),s},If=t=>{var e;!0!==t.removed&&(Xn(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||ol(o)&&o.selection.getStart(!0)!==r||Me(r).each(a=>{const s=a.getNode(),i=ho(s)?Me(s).getOr(a):a;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=oS(e);Bt(n)&&n.call(e,e),(o=>{const r=aS(o);r&&sn.setEditorTimeout(o,()=>{let a;a=!0===r?o:o.editorManager.get(r),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)})(e)})(t))},lx=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Df.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var s,i;o.disabled=!0,t.readonly=Th(t),t._editableRoot=Xk(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===Df.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const _=y.id||"blobid"+aA+++(()=>{const T=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+T()+T()+T()})(),w=y.name||_,x=y.blob;var N;return{id:Y(_),name:Y(w),filename:Y(y.filename||w+"."+(N=x.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[N.toLowerCase()]||"dat")),blob:Y(x),base64:Y(y.base64),blobUri:Y(y.blobUri||URL.createObjectURL(x)),uri:Y(y.uri)}},b=y=>ae(h,y).getOrUndefined(),v=y=>b(_=>_.id()===y);return{create:(y,_,w,x,N)=>{if(it(y))return g({id:y,name:x,filename:N,blob:_,base64:w});if(Se(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(_=>_.blobUri()===y),getByData:(y,_)=>b(w=>w.base64()===y&&w.blob().type===_),findFirst:b,removeByUri:y=>{h=vt(h,_=>_.blobUri()!==y||(URL.revokeObjectURL(_.blobUri()),!1))},destroy:()=>{F(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=pC(),a=[],s=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===Ot.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{F(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=At(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=bC(t,r)),p().then(s(h=>{const g=At(h,b=>b.blobInfo);return n.upload(g,hC(t)).then(s(b=>{const v=[];let y=!1;const _=At(b,(w,x)=>{const{blobInfo:N,image:T}=h[x];let O=!1;return w.status&&wk(t)?(w.url&&!Be(T.src,w.url)&&(y=!0),e.removeByUri(T.src),Xn(t)||((P,E)=>{const R=t.convertURL(E,"src");var B;d(P.src,E),io(k(P),{src:xh(t)?(B=E,B+(-1===B.indexOf("?")?"?":"&")+(new Date).getTime()):E,"data-mce-src":R})})(T,w.url)):w.error&&(w.error.remove&&(d(T.src,Ot.transparentSrc),v.push(T),O=!0),Pl(t,On.translate(["Failed to upload image: {0}",w.error.message]))),{element:T,status:w.status,uploadUri:w.url,blobInfo:N,removed:O}});return v.length>0&&!Xn(t)?t.undoManager.transact(()=>{F(zd(v),w=>{const x=yn(w);var N;Vt(w),x.each((N=t,T=>{var O,P;(O=N).dom.isEmpty((P=T).dom)&&W(O.schema.getTextBlockElements()[Tt(P)])&&ie(T,Wa('<br data-mce-bogus="1" />'))})),e.removeByUri(w.dom.src)})}):y&&t.undoManager.dispatchChange(),_}))}))),u=()=>_h(t)?c():Promise.resolve([]),m=h=>Nn(a,g=>g(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Zt)=>{const a=vt((i=o)?bt(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===Ot.transparentSrc)&&(we(l,"blob:")?!t.isUploaded(l)&&r(i):!!we(l,"data:")&&r(i))}),s=At(a,i=>{const l=i.src;if(_t(n,l))return n[l].then(d=>it(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(we(u,"blob:")){const h=c.getByUri(u);return W(h)?Promise.resolve(h):(p=u,we(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):we(p,"data:")?(f=p,new Promise((g,b)=>{im(f).bind(({type:v,data:y,base64Encoded:_})=>fy(v,y,_)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>gy(g).then(b=>py(b,!1,v=>C.some(hy(c,g,v))).getOrThunk(m)))}var g,p,f;return we(u,"data:")?by(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(s)}}})(r,e)),o.findAll(t.getBody(),m).then(s(h=>{const g=vt(h,b=>it(b)?(Pl(t,b),!1):"blob"!==b.uriType);return Xn(t)||F(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Oe(t.editorManager.get(),(_,w)=>_||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{_h(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{F(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{a.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=Po(sx(t)),t.dom=jt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Nk(t),referrerPolicy:Ac(t),onSetAttrib:s=>{t.dispatch("SetAttrib",s)},force_hex_color:AS(t)}),t.parser=(s=>{const i=ba(ax(s),s.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=s.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,s.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),xS(s)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+s.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=s.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new Fe("br",1))}}),i})(t),t.serializer=aC((s=>{const i=s.options.get;return{...ax(s),...sx(s),...Lf({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=rC(t.dom,t.getWin(),t.serializer,t),t.annotator=Rb(t),t.formatter=CC(t),t.undoManager=_C(t),t._nodeChangeDispatcher=new tO(t),t._selectionOverrides=AO(t),(s=>{const i=Do(),l=ve(!1),d=vc(c=>{s.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);s.on("touchstart",c=>{A1(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),s.on("touchmove",c=>{d.cancel(),A1(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():s.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(i=s=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const d=NS(i);F(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const d=RS(i);F(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})})})(s),(s=>{const i="contenteditable",l=" "+$.trim(wS(s))+" ",d=" "+$.trim(Ph(s))+" ",c=B1(l),u=B1(d),m=_S(s);m.length>0&&s.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],XA(f,v,Ph(f)));g.content=v}})(s,m,p)}),s.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),s.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];if(!c(h)&&!u(h))continue;const g=h.attr("data-mce-content");m.length>0&&g?QA(m,g)?(h.name="#text",h.type=3,h.raw=!0,h.value=g):h.remove():h.attr(i,null)}})})(t),Xn(t)||((s=>{s.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o,r)=>{const a=L.fromRangeStart(n).getNode(),s=(u=o,m=r,nr(k(a),p=>Cn(p.dom)||m.isBlock(Tt(p)),T_(u)).getOr(k(u)).dom),i=B_(a,s,!1),l=B_(a,s,!0),d=document.createRange();var u,m;return O_(i,s).fold(()=>{A_(i)?d.setStart(i,0):d.setStartBefore(i)},c=>d.setStartBefore(c.dom)),O_(l,s).fold(()=>{A_(l)?d.setEnd(l,l.data.length):d.setEndAfter(l)},c=>d.setEndAfter(c.dom)),d})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(qu(e))})(s))})})(t),(s=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=yS(i),f=CS(i),{inlinePatterns:hh(p),blockPatterns:ph(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!Q.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return Bf(t,n).map(o=>{var r;const a=Math.max(0,n.startOffset),s=Y_(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=nx(t,o,n.startContainer,a,s,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=Le(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=M(b,(x,N)=>N.start.length-x.start.length),_=v.replace(he," ");return ae(y,w=>0===v.indexOf(w.start)||0===_.indexOf(w.start))})(u.blockPatterns,g).map(b=>$.trim(g).length===b.start.length?[]:[{pattern:b,range:Of(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,s);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(be,{preserve_zwsp:!0}),ox(t,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();F(m,f=>((h,g)=>{const v=g.pattern,y=K_(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return Bf(h,y).each(_=>{"block-format"===v.type?((w,x)=>{const N=x.get(w);return Jt(N)&&K(N).exists(T=>_t(T,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{X_(h.dom,_,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{X_(h.dom,_,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=Jm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),Na(t.dom,m.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();Bf(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=G_(f.dom,b,g.startContainer,v),_=Y_(h,b,y),w=nx(f,b,g.startContainer,v,_,!1);w.length>0&&f.undoManager.transact(()=>{ox(f,w)})})})(i,p)}};i.on("keyup",p=>{rx(d,p,(f,h)=>f===h.keyCode&&!Q.modifierPressed(h))&&m()}),i.on("keypress",p=>{rx(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&sn.setEditorTimeout(i,m)})})(s)})(t));const r=ZT(t);((t,e)=>{t.addCommand("delete",()=>{var n;R1(n=t,e,!1).fold(()=>{n.selection.isEditable()&&(Tu(n),Ou(n))},No)}),t.addCommand("forwardDelete",()=>{var n;R1(n=t,e,!0).fold(()=>{n.selection.isEditable()&&o0(n,"ForwardDelete")},No)})})(t,r),(s=>{s.on("NodeChange",Z(GA,s))})(t),(s=>{var i;const l=s.dom,d=Le(s),c=null!==(i=Lk(s))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(EC(g)){const b=g.keyCode;return!kC(g)&&(Q.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Mt(mA,b))}return!1})(m))return;const f=s.getBody(),h=!(EC(g=m)&&!(kC(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(oe(k(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,xC)!==h||p)&&(l.setAttrib(f,xC,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(s,h),s.on(h?"keydown":"keyup",u),s.off(h?"keyup":"keydown",u))};Fn(c)&&s.on("init",m=>{u(m,!0),s.on("change SetContent ExecCommand",u),s.on("paste",p=>sn.setEditorTimeout(s,()=>u(p)))})})(t),(t=>{const e=ve(!1),n=ve(hS(t)?"text":"html"),o=(r=>{const a=ve(null);return{create:()=>((s,i)=>{const{dom:l,selection:d}=s,c=s.getBody();i.set(d.getRng());const u=l.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},f_);Ot.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(r,a),remove:()=>((s,i)=>{const l=s.dom;if(kf(s)){let d;const c=i.get();for(;d=kf(s);)l.remove(d),l.unbind(d);c&&s.selection.setRng(c)}i.set(null)})(r,a),getEl:()=>kf(r),getHtml:()=>(s=>{const i=s.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=vt(s.getBody().childNodes,lO);F(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(r),getLastRng:a.get}})(t);var r,a,s;r=t,(Ot.browser.isChromium()||Ot.browser.isSafari())&&(s=pO,(a=r).on("PastePreProcess",i=>{i.content=s(a,i.content,i.internal)})),((r,a)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((s,i)=>{"text"===i.get()?(i.set("html"),Lb(s,!1)):(i.set("text"),Lb(s,!0)),s.focus()})(r,a)}),r.addCommand("mceInsertClipboardContent",(s,i)=>{i.html&&ad(r,i.html,i.internal,!1),i.text&&Rf(r,i.text,!1)})})(t,n),(r=>{const a=l=>d=>{l(r,d)},s=dS(r);Bt(s)&&r.on("PastePreProcess",a(s));const i=cS(r);Bt(i)&&r.on("PastePostProcess",a(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(a=>s=>{!s.isDefaultPrevented()&&k_(a)&&a.selection.isEditable()&&__(s,E_(a),x_(a),()=>{if(Ot.browser.isChromium()||Ot.browser.isFirefox()){const i=a.selection.getRng();sn.setEditorTimeout(a,()=>{a.selection.setRng(i),a.execCommand("Delete")},0)}else a.execCommand("Delete")})})(r)),r.on("copy",(a=>s=>{!s.isDefaultPrevented()&&k_(a)&&__(s,E_(a),x_(a),xt)})(r))})(t),((r,a)=>{lS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Xi(r)||r.on("drop",s=>{const i=s.dataTransfer;i&&Xt(i.files,d=>/^image\//.test(d.type))&&s.preventDefault()}),r.on("drop",s=>{if(s.isDefaultPrevented())return;const i=S_(r,s);if(ne(i))return;const l=y_(s.dataTransfer),d=Vo(l,rd());if((!C_(l)||(f=>{const h=f["text/plain"];return!!h&&0===h.indexOf("file://")})(l))&&w_(r,s,i))return;const c=l[rd()],u=c||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>cr(h,y));if(!Te(f.getParent(g,"summary")))return!0;if(v&&_t(b,"text/html")){const y=(new DOMParser).parseFromString(b["text/html"],"text/html").body;return!Te(y.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),p=a.get();p&&!m||u&&(s.preventDefault(),sn.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(c||p&&m)&&r.execCommand("Delete"),N_(r,i);const f=h_(u);l["text/html"]?ad(r,f,d,!0):Rf(r,f,!0)})}))}),r.on("dragstart",s=>{a.set(!0)}),r.on("dragover dragend",s=>{Xi(r)&&!a.get()&&(s.preventDefault(),N_(r,S_(r,s))),"dragend"===s.type&&a.set(!1)}),(s=>{s.on("input",i=>{const l=d=>Te(d.querySelector("summary"));if("deleteByDrag"===i.inputType){const d=vt(s.dom.select("details"),l);F(d,c=>{te(c.firstChild)&&c.firstChild.remove();const u=s.dom.create("summary");u.appendChild(os().dom),c.prepend(u)})}})})(r)})(t,e),((t,e,n)=>{((o,r,a)=>{let s;o.on("keydown",i=>{var l;(Q.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(s=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,Ot.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===a.get()||s;s=!1;const d=y_(i.clipboardData);!C_(d)&&w_(o,i,r.getLastRng()||o.selection.getRng())||(Vo(d,"text/html")?(i.preventDefault(),Af(o,d,d["text/html"],l,!0)):Vo(d,"text/plain")&&Vo(d,"text/uri-list")?(i.preventDefault(),Af(o,d,d["text/plain"],l,!0)):(r.create(),sn.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),Af(o,d,c,l,!1)},0)))})})(t,e,n),(o=>{const r=s=>we(s,"webkit-fake-url"),a=s=>we(s,"data:");o.parser.addNodeFilter("img",(s,i,l)=>{if(!Xi(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of s){const c=d.attr("src");it(c)&&!d.attr("data-mce-object")&&c!==Ot.transparentSrc&&(r(c)||!vS(o)&&a(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const a=(s=>{const i=s;return(l=s,$t(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=Jy(s),C.none()),l=>(i.rtcInstance=(()=>{const d=Y(null),c=Y("");return{init:{bindEvents:xt},undoManager:{beforeChange:xt,add:d,undo:d,redo:d,clear:xt,reset:xt,hasUndo:Ht,hasRedo:Ht,transact:d,ignore:xt,extra:xt},formatter:{match:Ht,matchAll:Y([]),matchNode:Y(void 0),canApply:Ht,closest:c,apply:xt,remove:xt,toggle:xt,formatChanged:Y({unbind:xt})},editor:{getContent:c,setContent:Y({content:"",html:""}),insertContent:Y(""),addVisual:xt},selection:{getContent:c},autocompleter:{addDecoration:xt,removeDecoration:xt},raw:{getModel:Y(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>Se(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,_,w)=>p.transact(w),ignore:(y,_)=>p.ignore(_),extra:(y,_,w,x)=>p.extra(w,x)},formatter:{match:(y,_,w,x)=>f.match(y,u(_),x),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,_,w)=>f.apply(y,u(_)),remove:(y,_,w,x)=>f.remove(y,u(_)),toggle:(y,_,w)=>f.toggle(y,u(_)),formatChanged:(y,_,w,x,N)=>f.formatChanged(_,w,x,N)},editor:{getContent:y=>h.getContent(y),setContent:(y,_)=>({content:h.setContent(y,_),html:""}),insertContent:(y,_)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,_)=>g.getContent(_)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(s=>{const i=s.getDoc(),l=s.getBody();s.dispatch("PreInit"),sS(s)||(i.body.spellcheck=!1,Df.setAttrib(l,"spellcheck","false")),s.quirks=(t=>{const e=$.each,n=Q.BACKSPACE,o=Q.DELETE,r=t.dom,a=t.selection,s=t.parser,i=Ot.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=Ot.deviceType.isiPhone()||Ot.deviceType.isiPad(),u=Ot.os.isMacOS()||Ot.os.isiOS(),m=(E,R)=>{try{t.getDoc().execCommand(E,!1,String(R))}catch{}},p=E=>E.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",E=>{let R;if(E.target===t.getDoc().documentElement)if(R=a.getRng(),t.getBody().focus(),"mousedown"===E.type){if(en(R.startContainer))return;a.placeCaretAt(E.clientX,E.clientY)}else a.setRng(R)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",E=>{if(!p(E)&&"HTML"===E.target.nodeName){const R=t.getBody();R.blur(),sn.setEditorTimeout(t,()=>{R.focus()})}})},b=()=>{const E=Bh(t);t.on("click",R=>{const B=R.target;/^(IMG|HR)$/.test(B.nodeName)&&r.isEditable(B)&&(R.preventDefault(),t.selection.select(B),t.nodeChanged()),"A"===B.nodeName&&r.hasClass(B,E)&&0===B.childNodes.length&&r.isEditable(B.parentNode)&&(R.preventDefault(),a.select(B))})},v=()=>{t.on("keydown",E=>{if(!p(E)&&E.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){const R=a.getNode().previousSibling;if(R&&R.nodeName&&"table"===R.nodeName.toLowerCase())return E.preventDefault(),!1}return!0})},y=()=>{Th(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Rh(t)||m("enableObjectResizing",!1)})},_=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",E=>{let R;"HTML"===E.target.nodeName&&(R=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(R),t.selection.normalize(),t.nodeChanged())}))},N=()=>{u&&t.on("keydown",E=>{!Q.metaKeyPressed(E)||E.shiftKey||37!==E.keyCode&&39!==E.keyCode||(E.preventDefault(),t.selection.getSel().modify("move",37===E.keyCode?"backward":"forward","lineboundary"))})},T=()=>{t.on("click",E=>{let R=E.target;do{if("A"===R.tagName)return void E.preventDefault()}while(R=R.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",E=>{E.preventDefault()})})},P=xt;return Xn(t)?(d&&(h(),b(),O(),f(),c&&(w(),x(),T())),l&&(g(),y(),_(),N())):(t.on("keydown",E=>{if(p(E)||E.keyCode!==Q.BACKSPACE)return;let R=a.getRng();const B=R.startContainer,I=R.startOffset,G=r.getRoot();let V=B;if(R.collapsed&&0===I){for(;V.parentNode&&V.parentNode.firstChild===V&&V.parentNode!==G;)V=V.parentNode;"BLOCKQUOTE"===V.nodeName&&(t.formatter.toggle("blockquote",void 0,V),R=r.createRng(),R.setStart(B,0),R.setEnd(B,0),a.setRng(R))}}),(()=>{const E=R=>{const B=r.create("body"),I=R.cloneContents();return B.appendChild(I),a.serializer.serialize(B,{format:"html"})};t.on("keydown",R=>{const B=R.keyCode;if(!p(R)&&(B===o||B===n)&&t.selection.isEditable()){const I=t.selection.isCollapsed(),G=t.getBody();if(I&&!oe(k(G))||!I&&!(V=>{const dt=E(V),rt=r.createRng();return rt.selectNode(t.getBody()),dt===E(rt)})(t.selection.getRng()))return;R.preventDefault(),t.setContent(""),G.firstChild&&r.isBlock(G.firstChild)?t.selection.setCursorLocation(G.firstChild,0):t.selection.setCursorLocation(G,0),t.nodeChanged()}})})(),Ot.windowsPhone||t.on("keyup focusin mouseup",E=>{Q.modifierPressed(E)||(R=>{const B=R.getBody(),I=R.selection.getRng();return I.startContainer===I.endContainer&&I.startContainer===B&&0===I.startOffset&&I.endOffset===B.childNodes.length})(t)||a.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",Le(t))}),O(),v(),s.addNodeFilter("br",E=>{let R=E.length;for(;R--;)"Apple-interchange-newline"===E[R].attr("class")&&E[R].remove()}),c?(w(),x(),T()):f()),l&&(t.on("keydown",E=>{if(!p(E)&&E.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){const R=a.getNode(),B=R.previousSibling;if("HR"===R.nodeName)return r.remove(R),void E.preventDefault();B&&B.nodeName&&"hr"===B.nodeName.toLowerCase()&&(r.remove(B),E.preventDefault())}}}),g(),(()=>{const E=()=>{const B=r.getAttribs(a.getStart().cloneNode(!1));return()=>{const I=a.getStart();I!==t.getBody()&&(r.setAttrib(I,"style",null),e(B,G=>{I.setAttributeNode(G.cloneNode(!0))}))}},R=()=>!a.isCollapsed()&&r.getParent(a.getStart(),r.isBlock)!==r.getParent(a.getEnd(),r.isBlock);t.on("keypress",B=>{let I;return!(!(p(B)||8!==B.keyCode&&46!==B.keyCode)&&R()&&(I=E(),t.getDoc().execCommand("delete",!1),I(),B.preventDefault(),1))}),r.bind(t.getDoc(),"cut",B=>{if(!p(B)&&R()){const I=E();sn.setEditorTimeout(t,()=>{I()})}})})(),y(),t.on("SetContent ExecCommand",E=>{"setcontent"!==E.type&&"mceInsertLink"!==E.command||e(r.select("a:not([data-mce-block])"),R=>{var B;let I=R.parentNode;const G=r.getRoot();if((null==I?void 0:I.lastChild)===R){for(;I&&!r.isBlock(I);){if((null===(B=I.parentNode)||void 0===B?void 0:B.lastChild)!==I||I===G)return;I=I.parentNode}r.add(I,"br",{"data-mce-bogus":1})}})}),_(),N(),v(),t.on("drop",E=>{var R;const B=null===(R=E.dataTransfer)||void 0===R?void 0:R.getData("text/html");it(B)&&/^<img[^>]*>$/.test(B)&&t.dispatch("dragend",new window.DragEvent("dragend",E))}))),{refreshContentEditable:P,isHidden:()=>{if(!l||t.removed)return!1;const E=t.selection.getSel();return!E||!E.rangeCount||0===E.rangeCount}}})(s),s.dispatch("PostRender");const d=Bk(s);void 0!==d&&(l.dir=d);const c=iS(s);c&&s.on("BeforeSetContent",u=>{$.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",u=>{s.composing="compositionstart"===u.type})})(t),a.fold(()=>{const s=(i=>{let l=!1;const d=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(d),l=!0,i.setProgressState(!1)}})(t);ix(t).then(()=>{If(t),s()})},s=>{t.setProgressState(!0),ix(t).then(()=>{s().then(i=>{t.setProgressState(!1),If(t),Zy(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),If(t),Zy(t)})})})},LO=Zt,Ff=jt.DOM,dx=jt.DOM,cx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),ux=t=>{const e=t.getElement();return t.inline?cx(null):(n=>{const o=dx.create("div");return dx.insertAfter(o,n),cx(o,o)})(e)},MO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=$.trim(Eh(n)),r=n.ui.registry.getAll().icons,a={...Bl.get("default").icons,...Bl.get(o).icons};at(a,(s,i)=>{_t(r,i)||n.ui.registry.addIcon(i,s)})})(t),(n=>{const o=aa(n);if(it(o)){const r=Tr.get(o);n.theme=r(n,Tr.urls[o])||{},Bt(n.theme.init)&&n.theme.init(n,Tr.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=Tc(n),r=va.get(o);n.model=r(n,va.urls[o])})(t),(n=>{const o=[];F(Gi(n),r=>{((a,s,i)=>{const l=ya.get(i),d=ya.urls[i]||a.documentBaseUrl.replace(/\/$/,"");if(i=$.trim(i),l&&-1===$.inArray(s,i)){if(a.plugins[i])return;try{const c=l(a,d)||{};a.plugins[i]=c,Bt(c.init)&&(c.init(a,d),s.push(i))}catch(c){((u,m,p)=>{const f=On.translate(["Failed to initialize plugin: {0}",m]);Tb(u,"PluginLoadError",{message:f}),Dl(f,p),Pl(u,f)})(a,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,it(aa(n))?(r=>{const a=r.theme.renderUI;return a?a():ux(r)})(n):Bt(aa(n))?(r=>{const a=r.getElement(),s=aa(r)(r,a);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||r.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||r.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:a.offsetHeight,s})(n):ux(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(xt),hide:C.from(o.hide).getOr(xt),isEnabled:C.from(o.isEnabled).getOr(Zt),setEnabled:a=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(s=>s(a))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(gC(o=n,Tk(o)),(o=>gC(o,Nh(o)))(n)),t.inline?lx(t):((n,o)=>{((r,a)=>{const s=r.translate("Rich Text Area"),i=lo(k(r.getElement()),"tabindex").bind(wi),l=((d,c,u,m)=>{const p=pe("iframe");return m.each(f=>_e(p,"tabindex",f)),io(p,u),io(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),Kr(p,"tox-edit-area__iframe"),p})(r.id,s,uk(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=a.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=mk(d)+"<html><head>";Ch(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=fk(d),m=gk(d),p=d.translate(eS(d));return wh(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+wh(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(r),Ff.add(a.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Ff.isHidden(o.editorContainer)),n.getElement().style.display="none",Ff.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const a=r.iframeElement,s=()=>{r.contentDocument=a.contentDocument,lx(r)};if(kS(r)||Ot.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),s()}else{const l=((t,e,n,o)=>((r,a,s,i,l)=>{const d=(c=s,u=i,m=>{c(m)&&u((p=>{const f=k(Mg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=bn(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return r.dom.addEventListener(a,d,!1),{unbind:Z(pE,r,a,d,!1)}})(t,"load",n,()=>{l.unbind(),s()}))(k(a),0,LO);a.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},Br=jt.DOM,mx=t=>"-"===t.charAt(0),fx=(t,e,n)=>C.from(e).filter(o=>Fn(o)&&!Bl.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),gx=Un().deviceType,px=gx.isPhone(),FO=gx.isTablet(),ii=t=>{if(ne(t))return[];{const e=Jt(t)?t:t.split(/[ ,]/),n=At(e,Vr);return vt(n,Fn)}},Uf=(t,e)=>_t(t.sections(),e),zO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:$t(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),jO=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?$.extend({},t.external_plugins,o):o},VO=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,a,s,i)=>{const l=k(r.getRoot());return s=Ds(l,L.fromRangeStart(a),i)?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),Ls(l,L.fromRangeEnd(a),i)?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e,t.schema):e},cd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const a=$.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:a}}return{content:r,details:{}}})(e);bm(t,{...o,content:VO(t,n),format:"html",set:!1,selection:!0}).each(r=>{const a=(i=r.content,l=o,Em(t).editor.insertContent(i,l));var i,l;vm(t,a,r),t.addVisual()})}},qO={"font-size":"size","font-family":"face"},WO=Ei("font"),hx=t=>(e,n)=>C.from(n).map(k).filter(Ye).bind(o=>{return(r=t,a=e,s=o.dom,Gu(k(s),i=>{return Ni(l=i,r).orThunk(()=>WO(l)?$t(qO,r).bind(d=>lo(l,d)):C.none());var l},i=>Dt(k(a),i))).or(((r,a)=>C.from(jt.DOM.getStyle(a,r,!0)))(t,o.dom));var r,a,s}).getOr(""),KO=hx("font-size"),YO=bn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),hx("font-family")),GO=t=>Me(t.getBody()).bind(e=>{const n=e.container();return C.from(H(n)?n.parentNode:n)}),zf=(t,e)=>{return n=t,o=gi(C.some,e),(r=n,C.from(r.selection.getRng()).bind(a=>{const s=r.getBody();return a.startContainer===s&&0===a.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(Z(GO,n)).map(k).filter(Ye).bind(o);var n,o,r},bx=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=$.explode(t.options.get("font_size_style_values")),r=$.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},XO=t=>{const e=t.split(/\s*,\s*/);return At(e,n=>-1===n.indexOf(" ")||we(n,'"')||we(n,"'")?n:`'${n}'`).join(",")},vx=(t,e)=>{const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),a=e?o.startContainer:o.endContainer,s=ni(n,a);if(!s||!s.isContentEditable)return;const i=e?qe:fo,l=Le(t);((d,c,u,m)=>{const p=d.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(c)?c:p.getParent(m,f,u);return C.from(h).map(k)})(t,r,s,a).each(d=>{const c=Iw(t,a,d.dom,s,!1,l);i(d,k(c)),t.selection.setCursorLocation(c,0),t.dispatch("NewBlock",{newBlock:c}),ei(t,"insertParagraph")})},JO=["toggleview"],yx=t=>Mt(JO,t.toLowerCase());class Cx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const a=this.editor,s=e.toLowerCase(),i=null==r?void 0:r.skip_focus;if(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||i?mu(d=a).each(c=>d.selection.setRng(c)):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[s];return!!Bt(l)&&(l(s,n,o),a.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!yx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Bt(o)&&o(n)}queryCommandValue(e){if(!yx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Bt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;at(e,(r,a)=>{F(a.toLowerCase().split(","),s=>{o[n][s]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(a,s,i)=>n.call(null!=o?o:this.editor,s,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}}const Pr="data-mce-contenteditable",jf=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},ud=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Dr=t=>t.readonly,wx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Dr(t)&&F(e,n=>{n.attr(Pr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Pr,e=>{Dr(t)&&F(e,n=>{n.attr("contenteditable",n.attr(Pr))})}),t.serializer.addTempAttr(Pr)},ZO=["copy"],tB=$.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Hf{static isNative(e){return!!tB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ht}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=fc(o,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const a=this.bindings[o];if(a)for(let s=0,i=a.length;s<i;s++){const l=a[s];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Ht),n){const a={func:n,removed:!1};r&&$.extend(a,r);const s=e.toLowerCase().split(" ");let i=s.length;for(;i--;){const l=s[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[a,...d]:[...d,a],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const a=o[r];let s=this.bindings[a];if(!a)return at(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(s){if(n){const i=Ze(s,l=>l.func===n);s=i.fail,this.bindings[a]=s,F(i.pass,l=>{l.removed=!0})}else s.length=0;s.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}else at(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const li=t=>(t._eventDispatcher||(t._eventDispatcher=new Hf({scope:t,toggleEvent:(e,n)=>{Hf.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),$f={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return fc(t.toLowerCase(),null!=e?e:{},o);const r=li(o).dispatch(t,e);if(!1!==n&&o.parent){let a=o.parent();for(;a&&!r.isPropagationStopped();)a.dispatch(t,r,!1),a=a.parent?a.parent():void 0}return r},on(t,e,n){return li(this).on(t,e,n)},off(t,e){return li(this).off(t,e)},once(t,e){return li(this).once(t,e)},hasEventListeners(t){return li(this).has(t)}},md=jt.DOM;let Lr;const fd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Ah(t);return n?(t.eventRoot||(t.eventRoot=md.select(n)[0]),t.eventRoot):t.getBody()},_x=(t,e,n)=>{var o;(o=t).hidden||Dr(o)?Dr(t)&&((o,r)=>{if("click"!==r.type||Q.metaKeyPressed(r))Mt(ZO,r.type)&&o.dispatch(r.type,r);else{const a=k(r.target);(s=o,i=a,or(i,"a",l=>Dt(l,k(s.getBody()))).bind(l=>lo(l,"href"))).each(s=>{if(r.preventDefault(),/^#/.test(s)){const i=o.dom.select(`${s},[name="${eg(s,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,i})(t,n):t.dispatch(e,n)},xx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=fd(t,e);if(Ah(t)){if(Lr||(Lr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Lr&&(at(Lr,(r,a)=>{t.dom.unbind(fd(t,a))}),Lr=null)})),Lr[e])return;const o=r=>{const a=r.target,s=t.editorManager.get();let i=s.length;for(;i--;){const l=s[i].getBody();(l===a||md.isChildOf(a,l))&&_x(s[i],e,r)}};Lr[e]=o,md.bind(n,e,o)}else{const o=r=>{_x(t,e,r)};md.bind(n,e,o),t.delegates[e]=o}},Ex={...$f,bindPendingEventDelegates(){const t=this;$.each(t._pendingNativeEvents,e=>{xx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?xx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(fd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(at(t.delegates,(o,r)=>{t.dom.unbind(fd(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},eB=t=>it(t)?{value:t.split(/[ ,]/),valid:!0}:ko(t,it)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},kx=(t,e)=>t+(ja(e.message)?"":`. ${e.message}`),Sx=t=>t.valid,Vf=(t,e,n="")=>{const o=e(t);return ao(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},nB=["design","readonly"],Nx=(t,e,n,o)=>{const r=n[e.get()],a=n[o];try{a.activate()}catch(s){return void console.error(`problem while activating editor mode ${o}:`,s)}var s;r.deactivate(),r.editorReadOnly!==a.editorReadOnly&&((s,i)=>{const l=k(s.getBody());var d,c,u;u=i,Bd(d=l,c="mce-content-readonly")&&!u?Va(d,c):u&&Kr(d,c),i?(s.selection.controlSelection.hideResizeRect(),s._selectionOverrides.hideFakeCaret(),(d=>{C.from(d.selection.getNode()).each(c=>{c.removeAttribute("data-mce-selected")})})(s),s.readonly=!0,ud(l,!1),F(De(l,'*[contenteditable="true"]'),d=>{_e(d,Pr,"true"),ud(d,!1)})):(s.readonly=!1,s.hasEditableRoot()&&ud(l,!0),F(De(l,`*[${Pr}="true"]`),d=>{xe(d,Pr),ud(d,!0)}),jf(s,"StyleWithCSS",!1),jf(s,"enableInlineTableEditing",!1),jf(s,"enableObjectResizing",!1),lv(s)&&s.focus(),(d=>{d.selection.setRng(d.selection.getRng())})(s),s.nodeChanged())})(t,a.editorReadOnly),e.set(o),(s=t).dispatch("SwitchMode",{mode:o})},qf=$.each,Wf=$.explode,oB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Rx=$.makeMap("alt,ctrl,shift,meta,access"),rB=t=>{const e={},n=Ot.os.isMacOS()||Ot.os.isiOS();qf(Wf(t.toLowerCase(),"+"),a=>{a in Rx?e[a]=!0:/^[0-9]{2,}$/.test(a)?e.keyCode=parseInt(a,10):(e.charCode=a.charCodeAt(0),e.keyCode=oB[a]||a.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in Rx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class Ax{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(qf(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const a=this,s=a.normalizeCommandFunc(o);return qf(Wf($.trim(e)),i=>{const l=a.createShortcut(i,n,s,r);a.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:$.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const a=$.map(Wf(e,">"),rB);return a[a.length-1]=$.extend(a[a.length-1],{func:o,scope:r||this.editor}),$.extend(a[0],{desc:this.editor.translate(n),subpatterns:a.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const aB=()=>{const t=(()=>{const e={},n={},o={},r={},a={},s={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>r[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:s,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Mr=jt.DOM,Tx=$.extend,sB=$.each;class gd{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Tx(this,Ex);const r=this;this.id=e,this.hidden=!1;const a=((t,e,n,o,r)=>{var a;const s=t?{mobile:zO(null!==(a=r.mobile)&&void 0!==a?a:{},e)}:{},i=((t,e)=>{const n=((a,s)=>{const i={},l={};return Ia(a,(d,c)=>Mt(t,c),vn(i),vn(l)),{t:i,f:l}})(e);return r=n.f,{sections:Y(n.t),options:Y(r)};var r})(["mobile"],rf(s,r)),l=$.extend(n,o,i.options(),t&&Uf(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=$t(m,c).getOr({});return $.extend({},u,p)})(i,"mobile"):{},{external_plugins:jO(o,i.options())});return((d,c,u,m)=>{const p=ii(u.forced_plugins),f=ii(m.plugins),h=Uf(v=c,"mobile")?v.sections().mobile:{},g=((v,y,_,w)=>v&&Uf(y,"mobile")?w:_)(d,c,f,h.plugins?ii(h.plugins):f),b=((v,y)=>[...ii(v),...ii(y)])(p,g);var v;return $.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)})(px||FO,px,f=n,o.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,_,w)=>{const x=Vf(_,w);return Sx(x)?(g[y]=x.value,!0):(console.warn(kx(`Invalid value passed for the ${y} option`,x)),!1)},v=y=>_t(h,y);return{register:(y,_)=>{const w=it(_.processor)?(N=>{const T=(()=>{switch(N){case"array":return Jt;case"boolean":return ao;case"function":return Bt;case"number":return Je;case"object":return Se;case"string":return it;case"string[]":return eB;case"object[]":return O=>ko(O,Se);case"regexp":return O=>Eo(O,RegExp);default:return Zt}})();return O=>Vf(O,T,`The value must be a ${N}.`)})(_.processor):_.processor,x=((N,T,O)=>{if(!ge(T)){const P=Vf(T,O);if(Sx(P))return P.value;console.error(kx(`Invalid default value passed for the "${N}" option`,P))}})(y,_.default,w);h[y]={..._,default:x,processor:w},$t(g,y).orThunk(()=>$t(f,y)).each(N=>b(y,N,w))},isRegistered:v,get:y=>$t(g,y).orThunk(()=>$t(h,y).map(_=>_.default)).getOrUndefined(),set:(y,_)=>{if(v(y)){const w=h[y];return w.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,_,w.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const _=v(y);return _&&delete g[y],_},isSet:y=>_t(g,y)}})(0,a),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:yh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:yh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=it(h)&&Fn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Mt(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>ao(h)||it(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||it(h)||ko(h,it);return g?it(h)?{value:At(h.split(","),Vr),valid:g}:Jt(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Oc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=it(h)||ko(h,it);return g?{value:Jt(h)?h:At(h.split(","),Vr),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=ao(h)||it(h);return g?!1===h||Nc.isiPhone()||Nc.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!dk}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||it(h)||Bt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||it(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:Rc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:Rc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:Rc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>it(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>ko(h,Se)||!1===h?{value:bh(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Bt(h)?{value:(g=h,b=>{const v=g(b);return bh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>ko(h,vh)?{value:h,valid:!0}:vh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Mt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Mt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("force_hex_color",{processor:h=>{const g=["always","rgb_only","off"],b=Mt(g,h);return b?{value:h,valid:b}:{valid:!1,message:`Must be one of: ${g.join(", ")}.`}},default:"off"}),f("sandbox_iframes",{processor:"boolean",default:!1}),f("convert_unsafe_embeds",{processor:"boolean",default:!1}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:On.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:ck.getAttrib(p.getElement(),"placeholder")})})})(r);const s=this.options.get;s("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(t=>{const e=iC(t,WR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),M(e)})(h),v=(t=>lC(t,YR))(g),y=v.length>0,_=b.length>0,w="mobile"===g.theme;if(y||_||w){const x="\n- ",N=w?`\n\nThemes:${x}mobile`:"",T=y?`\n\nPlugins:${x}${v.join(x)}`:"",O=_?`\n\nOptions:${x}${b.join(x)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+N+T+O)}})(p,f),((h,g)=>{const b=(t=>iC(t,KR))(h),v=(t=>lC(t,sC.map(e=>e.name)))(g),y=v.length>0,_=b.length>0;if(y||_){const w="\n- ",x=y?`\n\nPlugins:${w}${v.map(ZR).join(w)}`:"",N=_?`\n\nOptions:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+x+N)}})(p,f)})(n,a);const i=s("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=s("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=Ac(r);d&&(bo.ScriptLoader._setReferrerPolicy(d),jt.DOM.styleSheetLoader._setReferrerPolicy(d));const c=Oh(r);W(c)&&jt.DOM.styleSheetLoader._setContentCssCors(c),Ie.languageLoad=s("language_load"),Ie.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new En(Ch(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Oc(r),this.hasVisual=Zk(r),this.shortcuts=new Ax(this),this.editorCommands=new Cx(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{F("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Xt(a,s=>W(e.formatter.matchNode(s,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ot.os.isMacOS()||Ot.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),s=>!nt(s)||a++!==r||(e.selection.select(s),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Cn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{cd(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{cd(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{cd(e,r)},mceInsertContent:(n,o,r)=>{cd(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(uS(e))}})})(t),(e=>{const n=(o,r,a)=>{const s=it(a)?{href:a}:a,i=e.dom.getParent(e.selection.getNode(),"a");Se(s)&&it(s.href)&&(s.href=s.href.replace(/ /g,"%20"),i&&s.href||e.formatter.remove("link"),s.href&&e.formatter.apply("link",s,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{k1(e,"indent")},Outdent:()=>{S1(e)}}),e.editorCommands.addCommands({Outdent:()=>_1(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{vx(e,!0)},InsertNewBlockAfter:()=>{vx(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{ed(jw,e)},mceInsertNewLine:(n,o,r)=>{Yw(e,r)},InsertLineBreak:(n,o,r)=>{ed(Vw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const a=r.parentNode;if(a&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)){const s=n.selection.getBookmark();n.dom.split(a,r),n.selection.moveToBookmark(s)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,a)=>{n.formatter.toggle(r,a),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,a,s)=>{o(r,{value:s})},BackColor:(r,a,s)=>{o("hilitecolor",{value:s})},FontName:(r,a,s)=>{((i,l)=>{const d=bx(i,l);i.formatter.toggle("fontname",{value:XO(d)}),i.nodeChanged()})(n,s)},FontSize:(r,a,s)=>{var i;(i=n).formatter.toggle("fontsize",{value:bx(i,s)}),i.nodeChanged()},LineHeight:(r,a,s)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(s)}),i.nodeChanged()},Lang:(r,a,s)=>{var i;o(r,{value:s.code,customValue:null!==(i=s.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,a,s)=>{o(it(s)?s:"p")},mceToggleFormat:(r,a,s)=>{o(s)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return zf(r=n,a=>YO(r.getBody(),a.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return zf(r=n,a=>KO(r.getBody(),a.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return zf(r=n,a=>{const s=k(r.getBody());return Gu(a,l=>Ni(l,"line-height"),Z(Dt,s)).getOrThunk(()=>{const l=parseFloat(Hn(a,"line-height")),d=parseFloat(Hn(a,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=null!=r?r:e.selection.getNode();if(a!==e.getBody()){const s=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(s)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var a;(a=e).removed||(!0===r?bu(a):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),W(i.bookmark)&&!kr(i)&&mu(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return hu(u),iv(i,c),void bu(i);i.inline||(Ot.browser.isOpera()||hu(d),i.getWin().focus()),(Ot.browser.isFirefox()||i.inline)&&(hu(d),iv(i,c)),bu(i)})(a))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=s("cache_suffix");u&&(Ot.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:aB(),styleSheetLoader:void 0,show:xt,hide:xt,setEnabled:xt,isEnabled:Zt},this.mode=(p=>{const f=ve("design"),h=ve({design:{activate:xt,deactivate:xt,editorReadOnly:!1},readonly:{activate:xt,deactivate:xt,editorReadOnly:!0}});return(g=p).serializer?wx(g):g.on("PreInit",()=>{wx(g)}),(g=>{g.on("ShowCaret",b=>{Dr(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{Dr(g)&&b.preventDefault()})})(p),{isReadOnly:()=>Dr(p),set:g=>((b,v,y,_)=>{if(_!==y.get()){if(!_t(v,_))throw new Error(`Editor mode '${_}' is invalid`);b.initialized?Nx(b,y,v,_):b.on("init",()=>Nx(b,y,v,_))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,_)=>{if(Mt(nB,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{..._,deactivate:()=>{try{_.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${y}:`,w)}}}}})(h.get(),g,b))}};var g})(r),o.dispatch("SetupEditor",{editor:this});const m=nS(r);Bt(m)&&m.call(r,r)}render(){(e=>{const n=e.id;On.setCode(kh(e));const o=()=>{Br.unbind(window,"ready",o),e.render()};if(!fr.Event.domLoaded)return void Br.bind(window,"ready",o);if(!e.getElement())return;const r=k(e.getElement()),a=Eg(r);var l;e.on("remove",()=>{Ma(r.dom.attributes,i=>xe(r,i.name)),io(r,a)}),e.ui.styleSheetLoader=bp.forElement(r,{contentCssCors:Oh(l=e),referrerPolicy:Ac(l)}),Oc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const s=e.getElement().form||Br.getParent(n,"form");s&&(e.formElement=s,Vk(e)&&!$d(e.getElement())&&(Br.insertAfter(Br.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Br.bind(s,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!qk(e)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)))),e.windowManager=mC(e),e.notificationManager=uC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=Br.encode(i.content))}),Wk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Kk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=bo.ScriptLoader,o=()=>{!t.removed&&(r=>{const a=aa(r);return!it(a)||W(Tr.get(a))})(t)&&(r=>{const a=Tc(r);return W(va.get(a))})(t)&&MO(t)};((r,a)=>{const s=aa(r);if(it(s)&&!mx(s)&&!_t(Tr.urls,s)){const i=Ik(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${s}/theme${a}.js`;Tr.load(s,l).catch(()=>{$s(r,"ThemeLoadError",Vs("theme",l,s))})}})(t,e),((r,a)=>{const s=Tc(r);if("plugin"!==s&&!_t(va.urls,s)){const i=Fk(r),l=it(i)?r.documentBaseURI.toAbsolute(i):`models/${s}/model${a}.js`;va.load(s,l).catch(()=>{$s(r,"ModelLoadError",Vs("model",l,s))})}})(t,e),((r,a)=>{const s=kh(a),i=Rk(a);if(!On.hasCode(s)&&"en"!==s){const l=Fn(i)?i:`${a.editorManager.baseURL}/langs/${s}.js`;r.add(l).catch(()=>{$s(a,"LanguageLoadError",Vs("language",l,s))})}})(n,t),((r,a,s)=>{const i=fx(a,"default",s),l=(d=a,C.from(_k(d)).filter(Fn).map(c=>({url:c,name:C.none()}))).orThunk(()=>fx(a,Eh(a),""));var d;F((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,m;c=a,u=d.url,m=d.name.getOrUndefined(),$s(c,"IconsLoadError",Vs("icons",u,m))})})})(n,t,e),((r,a)=>{const s=(i,l)=>{ya.load(i,l).catch(()=>{$s(r,"PluginLoadError",Vs("plugin",l,i))})};at(Qk(r),(i,l)=>{s(l,i),r.options.set("plugins",Gi(r).concat(l))}),F(Gi(r),i=>{!(i=$.trim(i))||ya.urls[i]||mx(i)||s(i,`plugins/${i}/plugin${a}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return kr(this)}translate(e){return On.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(W(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Zt,default:n})),r.isSet(e)||ge(n)?r.get(e):n}hasPlugin(e,n){return!(!Mt(Gi(this),e)||n&&void 0===ya.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Mr.show(e.getContainer()),Mr.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Mr.hide(e.getContainer()),Mr.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},a=$d(o)?o.value:o.innerHTML,s=n.setContent(a,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),s}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let a=n.getContent(r);const s={...r,content:a};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),a=s.content,$d(o))o.value=a;else{!e.is_removing&&n.inline||(o.innerHTML=a);const i=Mr.getParent(n.id,"form");i&&sB(i.elements,l=>l.name!==n.id||(l.value=a,!1))}return s.element=r.element=o=null,!1!==s.set_dirty&&n.setDirty(!1),a}setContent(e,n){return km(this,e,n)}getContent(e){return((n,o={})=>{const r=(a=o,s=o.format?o.format:"html",{...a,format:s,get:!0,getInner:!0});var a,s;return zy(n,r).fold(ce,a=>{const s=(l=a,Em(n).editor.getContent(l));var l;return jy(n,s,a)})})(this,e)}insertContent(e,n){n&&(e=Tx({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?km(this,this.startContent,{format:"raw"}):km(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Mr.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Mr.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:null==o?void 0:o.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,a=r.options.get,s=rS(r);if(Bt(s))return s.call(r,e,o,!0,n);if(!a("convert_urls")||"link"===o||Se(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new En(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:a("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,a("remove_script_host"))}addVisual(e){((n,o)=>{var a;a=o,re(this).editor.addVisual(a)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&W(null==a?void 0:a.nextSibling)&&Tl.remove(a.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&Tl.setStyle((s=e).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(e),Tl.remove(e.getContainer()),Ol(n),Ol(o),e.destroy()}var s})(this)}destroy(e){((n,o)=>{const{selection:r,dom:a}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Ol(r),Ol(a)),(s=>{const i=s.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),Tl.unbind(i,"submit reset",s.formEventDelegate))})(n),(s=>{const i=s;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=s.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ra=jt.DOM,pd=$.each;let hd,Ox=!1,Ve=[];const bd=t=>{const e=t.type;pd(qo.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Bx=t=>{if(t!==Ox){const e=jt.DOM;t?(e.bind(window,"resize",bd),e.bind(window,"scroll",bd)):(e.unbind(window,"resize",bd),e.unbind(window,"scroll",bd)),Ox=t}},Px=t=>{const e=Ve;return Ve=vt(Ve,n=>t!==n),qo.activeEditor===t&&(qo.activeEditor=Ve.length>0?Ve[0]:null),qo.focusedEditor===t&&(qo.focusedEditor=null),e.length!==Ve.length},iB="CSS1Compat"!==document.compatMode,qo={...$f,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:On,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=En.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const s=document.getElementsByTagName("script");for(let i=0;i<s.length;i++){const l=s[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var a;t.baseURL=new En(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new En(t.baseURL),t.suffix=n,(a=t).on("AddEditor",Z(gN,a)),a.on("RemoveEditor",Z(pN,a))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&at(o,(r,a)=>{Ie.PluginManager.urls[a]=r})},init(t){const e=this;let n;const o=$.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=s=>{n=s};const a=()=>{let s=0;const i=[];let l;var d;Ra.unbind(window,"ready",a),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],m=Bt(c)?p=>Xt(u,f=>c(f,p)):p=>Mt(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=t,Ot.browser.isIE()||Ot.browser.isEdge()?(Dl("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):iB?(Dl("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):it(d.selector)?Ra.select(d.selector):W(d.target)?[d.target]:[])),$.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(Px(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=$.grep(l,d=>!e.get(d.id)),0===l.length?r([]):pd(l,d=>{t.inline&&d.tagName.toLowerCase()in o?Dl("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new gd(c,u,e);i.push(p),p.on("init",()=>{++s===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=$t(c,"name").filter(m=>!Ra.get(m)).getOrThunk(Ra.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return Ra.bind(window,"ready",a),new Promise(s=>{n?s(n):r=i=>{s(i)}})},get(t){return 0===arguments.length?Ve.slice(0):it(t)?ae(Ve,e=>e.id===t).getOr(null):Je(t)&&Ve[t]?Ve[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Ve.push(t),Bx(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),hd||(hd=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",hd))),t},createEditor(t,e){return this.add(new gd(t,e,this))},remove(t){const e=this;let n;if(t){if(!it(t))return n=t,Te(e.get(n.id))?null:(Px(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Ve.length&&window.removeEventListener("beforeunload",hd),n.remove(),Bx(Ve.length>0),n);pd(Ra.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Ve.length-1;o>=0;o--)e.remove(Ve[o])},execCommand(t,e,n){var o;const r=this,a=Se(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(a)||new gd(a,n.options,r).render(),!0;case"mceRemoveEditor":{const s=r.get(a);return s&&s.remove(),!0}case"mceToggleEditor":{const s=r.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{pd(Ve,t=>{t.save()})},addI18n:(t,e)=>{On.add(t,e)},translate:t=>On.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new En(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new En(this.baseURL)}};qo.setup();const lB=(()=>{const t=Do();return{FakeClipboardItem:e=>({items:e,types:Et(e),getType:n=>$t(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Dx=Math.min,Aa=Math.max,vd=Math.round,Lx=(t,e,n)=>{let o=e.x,r=e.y;const a=t.w,s=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=vd(l/2)),"c"===d[1]&&(o+=vd(i/2)),"b"===d[3]&&(r-=s),"r"===d[4]&&(o-=a),"c"===d[3]&&(r-=vd(s/2)),"c"===d[4]&&(o-=vd(a/2)),Ta(o,r,a,s)},Ta=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),dB={inflate:(t,e,n)=>Ta(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:Lx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const a=Lx(t,e,o[r]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=Aa(t.x,e.x),o=Aa(t.y,e.y),r=Dx(t.x+t.w,e.x+e.w),a=Dx(t.y+t.h,e.y+e.h);return r-n<0||a-o<0?null:Ta(n,o,r-n,a-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,a=t.x+t.w,s=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=Aa(0,e.x-o),c=Aa(0,e.y-r),u=Aa(0,a-i),m=Aa(0,s-l);return o+=d,r+=c,n&&(a+=d,s+=c,o-=u,r-=m),a-=u,s-=m,Ta(o,r,a-o,s-r)},create:Ta,fromClientRect:t=>Ta(t.left,t.top,t.width,t.height)},cB=(()=>{const t={},e={},n={};return{load:(o,r)=>{const a=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(void 0!==t[o])return t[o];{const i=new Promise((l,d)=>{const c=((u,m,p=1e3)=>{let f=!1,h=null;const g=y=>(..._)=>{f||(f=!0,null!==h&&(clearTimeout(h),h=null),y.apply(null,_))},b=g(u),v=g(m);return{start:(...y)=>{f||null!==h||(h=setTimeout(()=>v.apply(null,y),p))},resolve:b,reject:v}})(l,d);e[o]=c.resolve,bo.ScriptLoader.loadScript(r).then(()=>c.start(s),()=>c.reject(a))});return t[o]=i,i}},add:(o,r)=>{void 0!==e[o]&&(e[o](r),delete e[o]),t[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete t[o]}}})();let di;try{const t="__storage_test__";di=window.localStorage,di.setItem(t,t),di.removeItem(t)}catch{di=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const uB={geom:{Rect:dB},util:{Delay:sn,Tools:$,VK:Q,URI:En,EventDispatcher:Hf,Observable:$f,I18n:On,LocalStorage:di,ImageUploader:t=>{const e=pC(),n=bC(t,e);return{upload:(o,r=!0)=>n.upload(o,r?hC(t):void 0)}}},dom:{EventUtils:fr,TreeWalker:ue,TextSeeker:hr,DOMUtils:jt,ScriptLoader:bo,RangeUtils:Er,Serializer:aC,StyleSheetLoader:hp,ControlSelection:Ib,BookmarkManager:As,Selection:rC,Event:fr.Event},html:{Styles:mc,Entities:mr,Node:Fe,Schema:Po,DomParser:ba,Writer:Nv,Serializer:Uo},Env:Ot,AddOnManager:Ie,Annotator:Rb,Formatter:CC,UndoManager:_C,EditorCommands:Cx,WindowManager:mC,NotificationManager:uC,EditorObservable:Ex,Shortcuts:Ax,Editor:gd,FocusManager:sv,EditorManager:qo,DOM:jt.DOM,ScriptLoader:bo.ScriptLoader,PluginManager:ya,ThemeManager:Tr,ModelManager:va,IconManager:Bl,Resource:cB,FakeClipboard:lB,trim:$.trim,isArray:$.isArray,is:$.is,toArray:$.toArray,makeMap:$.makeMap,each:$.each,map:$.map,grep:$.grep,inArray:$.inArray,extend:$.extend,walk:$.walk,resolve:$.resolve,explode:$.explode,_addCacheSuffix:$._addCacheSuffix},Mx=$.extend(qo,uB);(t=>{window.tinymce=t,window.tinyMCE=t})(Mx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(Mx)}();