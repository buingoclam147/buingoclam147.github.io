"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[2228],{62228:(X,m,c)=>{c.r(m),c.d(m,{DiscountPolicyComponent:()=>z,FarePolicyComponent:()=>W});var f=c(77296),v=c(67460),d=c(48373),y=c(83700),p=c(72506),g=c(36895),_=c(28746),x=c(25650),T=c(94327),t=c(94650),Z=c(80529),D=c(88001),S=c(54004),l=c(97582),u=c(87067),F=c(43429);let b=(()=>{class n{}return(0,l.gn)([(0,u.C)()],n.prototype,"status",void 0),(0,l.gn)([(0,F.D)(()=>U),(0,u.C)()],n.prototype,"data",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"objectError",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"success",void 0),n})(),U=(()=>{class n{}return(0,l.gn)([(0,u.C)()],n.prototype,"airline",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"airlineName",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"description",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"timeUpdate",void 0),(0,l.gn)([(0,u.C)()],n.prototype,"url",void 0),n})();var N=c(50494);const w={headers:new Z.WM({"Content-Type":"application/json"})};let C=(()=>{class n{constructor(i,e){this.http=i,this.appConfig=e}getPolicyDiscount(i){return this.http.post(this.appConfig.apiUrl+"policy/get-policy",JSON.stringify(i),w).pipe((0,S.U)(e=>(0,N.yE)(b,e,{excludeExtraneousValues:!0})))}getHeadFile(i){return this.http.head(i,{observe:"response"})}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(Z.eN),t.LFG(D.qB))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=c(62733),E=c(62331);function L(n,a){if(1&n&&(t.TgZ(0,"tr",19)(1,"td",20),t._UZ(2,"img",21),t.qZA(),t.TgZ(3,"td",22),t._uU(4),t.qZA(),t.TgZ(5,"td",22),t._uU(6),t.qZA(),t.TgZ(7,"td",22),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td",23)(11,"a",24),t._uU(12," M\u1edf file "),t.qZA()()()),2&n){const i=a.$implicit;t.xp6(2),t.Q6J("src",i.airlineLogo,t.LSH),t.xp6(2),t.hij(" ",i.airlineName," "),t.xp6(2),t.hij(" ",i.description," "),t.xp6(2),t.hij(" ",t.xi3(9,6,i.timeUpdate,"dd/MM/yyyy HH:mm")," "),t.xp6(2),t.Q6J("sticky","right"),t.xp6(1),t.s9C("href",i.url,t.LSH)}}function O(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",26),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onOpenFile(o.url))}),t.TgZ(1,"div",27)(2,"div",28),t._uU(3,"H\xe3ng bay"),t.qZA(),t.TgZ(4,"div",29),t._UZ(5,"img",30),t.qZA()(),t.TgZ(6,"div",27)(7,"div",28),t._uU(8,"T\xean h\xe3ng bay"),t.qZA(),t.TgZ(9,"div",31),t._uU(10),t.qZA()(),t.TgZ(11,"div",27)(12,"div",28),t._uU(13,"Ng\xe0y c\u1eadp nh\u1eadt"),t.qZA(),t.TgZ(14,"div",32),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"div",27)(18,"div",28),t._uU(19,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(20,"div",32),t._uU(21),t.qZA()()()}if(2&n){const i=t.oxw().$implicit;t.xp6(5),t.Q6J("src",i.airlineLogo,t.LSH),t.xp6(5),t.Oqu(i.airlineName),t.xp6(5),t.Oqu(t.xi3(16,4,i.timeUpdate,"dd/MM/yyyy HH:mm")),t.xp6(6),t.Oqu(i.description)}}function I(n,a){if(1&n&&(t.ynx(0),t.YNc(1,O,22,7,"div",25),t.BQk()),2&n){const i=a.index,e=t.oxw();t.xp6(1),t.Q6J("ngIf",i<e.infiniteScrollCount)}}function q(n,a){1&n&&t._UZ(0,"cf-spinner")}const P=function(){return{num:25}},k=function(){return{num:50}},J=function(){return{num:75}},Q=function(){return{num:100}},M=function(n,a,i,e){return[n,a,i,e]};let z=(()=>{class n{constructor(i,e,o,r){this._policyService=e,this._flightDataService=o,this._toastService=r,this.listOfData=[],this.pageSize=25,this.isLoading=!1,this.INFINITE_SCROLL_DEFAULT=10,this.INFINITE_OFSET_INCREASE=10,this.infiniteScrollCount=this.INFINITE_SCROLL_DEFAULT,this.sortChange=(h,s)=>s,this.searchChange=(h,s)=>s,i.registerIcons([p.HTW]),this.getPolicyDiscount()}ngOnInit(){}getPolicyDiscount(){this.isLoading=!0,this._policyService.getPolicyDiscount({type:"DISCOUNT"}).pipe((0,_.x)(()=>this.isLoading=!1)).subscribe({next:e=>{console.log(e),e.success&&e.data&&(this.listOfData=e.data.map(o=>{const r={airline:o.airline,airlineName:o.airlineName,airlineLogo:this._flightDataService.getAirlineLogoByCode(o.airline),description:o.description,timeUpdate:0,url:o.url};return this._policyService.getHeadFile(o.url).subscribe({next:h=>{const s=h.headers.get("Last-Modified")||new Date;r.timeUpdate=new Date(s).getTime()}}),r}))}})}ticketTrackByFn(i,e){return e.airline}onScrollDown(){this.infiniteScrollCount+=this.INFINITE_OFSET_INCREASE}onOpenFile(i){i&&window.open(i)}onDownloadAll(){this.isLoading=!0;const i=new x;this.listOfData.forEach(e=>{i.file(`ChinhSachChietKhau${e.airline}.pdf`,e.url)}),i.generateAsync({type:"blob"}).then(e=>{this._toastService.add({severity:"success",summary:"T\u1ea3i v\u1ec1 th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea3i v\u1ec1 to\xe0n b\u1ed9 file th\xe0nh c\xf4ng. Vui l\xf2ng l\u01b0u v\u1ec1 thi\u1ebft b\u1ecb.",sticky:!1}),T.saveAs(e,"ChinhSachChietKhau.zip"),this.isLoading=!1}).catch(()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Kh\xf4ng th\u1ec3 t\u1ea3i v\u1ec1 to\xe0n b\u1ed9 file. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0}),this.isLoading=!1})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(p.KNP),t.Y36(C),t.Y36(A.G),t.Y36(E.BX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["discount-policy"]],standalone:!0,features:[t.jDz],decls:31,vars:29,consts:[[1,"py-4","px-[30px]","rounded-lg","md:hidden"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","save","size","small",1,"mr-2"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap",3,"sortName"],["cf-th","",1,"whitespace-nowrap",3,"sticky"],["ngFor","",3,"ngForOf"],[1,"hidden","md:block"],[1,"p-4","bg-white","w-full"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"p-4","flex","flex-col","gap-y-3"],["infinite-scroll","",1,"flex","flex-col","gap-y-3",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],[1,"w-12","h-6","object-contain",3,"src"],[1,"py-2","px-3","text-body-sm"],["cf-td","",1,"py-2","px-3","text-body-sm",3,"sticky"],["target","_blank",1,"text-body-md","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"href"],["class","flex flex-col rounded-lg bg-white p-3 gap-y-2 shadow-cf-sm",3,"click",4,"ngIf"],[1,"flex","flex-col","rounded-lg","bg-white","p-3","gap-y-2","shadow-cf-sm",3,"click"],[1,"flex","justify-start","items-center"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"flex","justify-between","items-center"],[1,"w-9","h-9","object-contain",3,"src"],[1,"text-express-md","text-neutral-gray-6"],[1,"text-body-md","text-neutral-gray-6"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Quy \u0111\u1ecbnh chi\u1ebft kh\u1ea5u"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return e.onDownloadAll()}),t._UZ(6,"cf-icon",5),t._uU(7," T\u1ea3i v\u1ec1 t\u1ea5t c\u1ea3 "),t.qZA()(),t.TgZ(8,"cf-table",6,7)(10,"thead",8)(11,"th",9),t._uU(12,"H\xe3ng bay"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"T\xean h\xe3ng bay"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Ng\xe0y c\u1eadp nh\u1eadt"),t.qZA(),t.TgZ(19,"th",10),t._uU(20,"Ch\u1ee9c n\u0103ng"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,L,13,9,"ng-template",11),t.qZA()()()(),t.TgZ(23,"div",12)(24,"div",13)(25,"div",14),t._uU(26,"Quy \u0111\u1ecbnh chi\u1ebft kh\u1ea5u"),t.qZA()(),t.TgZ(27,"div",15)(28,"div",16),t.NdJ("scrolled",function(){return e.onScrollDown()}),t.YNc(29,I,2,1,"ng-container",17),t.qZA()()(),t.YNc(30,q,1,0,"cf-spinner",18)),2&i){const o=t.MAs(9);t.xp6(8),t.Q6J("fnSort",e.sortChange)("fnSearch",e.searchChange)("pageSizeList",t.l5B(24,M,t.DdM(20,P),t.DdM(21,k),t.DdM(22,J),t.DdM(23,Q)))("listData",e.listOfData)("pageSize",e.pageSize),t.xp6(3),t.Q6J("sortName","airline"),t.xp6(2),t.Q6J("sortName","pnr"),t.xp6(2),t.Q6J("sortName","bookedDate"),t.xp6(2),t.Q6J("sortName","departDate"),t.xp6(2),t.Q6J("sticky","right"),t.xp6(3),t.Q6J("ngForOf",o.partOfdata),t.xp6(6),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),t.xp6(1),t.Q6J("ngForOf",e.listOfData)("ngForTrackBy",e.ticketTrackByFn),t.xp6(1),t.Q6J("ngIf",e.isLoading)}},dependencies:[g.ez,g.sg,g.O5,g.uU,p.AxE,p.Sm8,y.N8,y.Xq,d.rC,d.E_,d.qS,d.zs,v.OR,f.Rq,f.Ry],encapsulation:2}),n})();function H(n,a){if(1&n&&(t.TgZ(0,"tr",19)(1,"td",20),t._UZ(2,"img",21),t.qZA(),t.TgZ(3,"td",22),t._uU(4),t.qZA(),t.TgZ(5,"td",22),t._uU(6),t.qZA(),t.TgZ(7,"td",22),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td",23)(11,"a",24),t._uU(12," M\u1edf file "),t.qZA()()()),2&n){const i=a.$implicit;t.xp6(2),t.Q6J("src",i.airlineLogo,t.LSH),t.xp6(2),t.hij(" ",i.airlineName," "),t.xp6(2),t.hij(" ",i.description," "),t.xp6(2),t.hij(" ",t.xi3(9,6,i.timeUpdate,"dd/MM/yyyy HH:mm")," "),t.xp6(2),t.Q6J("sticky","right"),t.xp6(1),t.s9C("href",i.url,t.LSH)}}function j(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",26),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onOpenFile(o.url))}),t.TgZ(1,"div",27)(2,"div",28),t._uU(3,"H\xe3ng bay"),t.qZA(),t.TgZ(4,"div",29),t._UZ(5,"img",30),t.qZA()(),t.TgZ(6,"div",27)(7,"div",28),t._uU(8,"T\xean h\xe3ng bay"),t.qZA(),t.TgZ(9,"div",31),t._uU(10),t.qZA()(),t.TgZ(11,"div",27)(12,"div",28),t._uU(13,"Ng\xe0y c\u1eadp nh\u1eadt"),t.qZA(),t.TgZ(14,"div",32),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"div",27)(18,"div",28),t._uU(19,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(20,"div",32),t._uU(21),t.qZA()()()}if(2&n){const i=t.oxw().$implicit;t.xp6(5),t.Q6J("src",i.airlineLogo,t.LSH),t.xp6(5),t.Oqu(i.airlineName),t.xp6(5),t.Oqu(t.xi3(16,4,i.timeUpdate,"dd/MM/yyyy HH:mm")),t.xp6(6),t.Oqu(i.description)}}function R(n,a){if(1&n&&(t.ynx(0),t.YNc(1,j,22,7,"div",25),t.BQk()),2&n){const i=a.index,e=t.oxw();t.xp6(1),t.Q6J("ngIf",i<e.infiniteScrollCount)}}function B(n,a){1&n&&t._UZ(0,"cf-spinner")}const Y=function(){return{num:25}},K=function(){return{num:50}},G=function(){return{num:75}},$=function(){return{num:100}},V=function(n,a,i,e){return[n,a,i,e]};let W=(()=>{class n{constructor(i,e,o,r){this._policyService=e,this._flightDataService=o,this._toastService=r,this.listOfData=[],this.pageSize=25,this.isLoading=!1,this.INFINITE_SCROLL_DEFAULT=10,this.INFINITE_OFSET_INCREASE=10,this.infiniteScrollCount=this.INFINITE_SCROLL_DEFAULT,this.sortChange=(h,s)=>s,this.searchChange=(h,s)=>s,i.registerIcons([p.HTW]),this.getPolicyDiscount()}getPolicyDiscount(){this.isLoading=!0,this._policyService.getPolicyDiscount({type:"FARE_RULE"}).pipe((0,_.x)(()=>this.isLoading=!1)).subscribe({next:e=>{e.success&&e.data&&(this.listOfData=e.data.map(o=>{const r={airline:o.airline,airlineName:o.airlineName,airlineLogo:this._flightDataService.getAirlineLogoByCode(o.airline),description:o.description,timeUpdate:o.timeUpdate,url:o.url};return this._policyService.getHeadFile(o.url).subscribe({next:h=>{const s=h.headers.get("Last-Modified")||new Date;r.timeUpdate=new Date(s).getTime()}}),r}),this.listOfData.push({airline:"LCC",airlineName:"Low Cost Carrier (LCC)",airlineLogo:"assets/icons/airline-default.svg",description:"File t\u1ed5ng h\u1ee3p \u0111i\u1ec1u ki\u1ec7n gi\xe1 v\xe9 c\u1ee7a c\xe1c h\xe3ng LCC",timeUpdate:172974315e4,url:"https://docs.google.com/spreadsheets/d/1TPZ4v65FIrmphy_eKmjRhbHmZSlfv4B5/edit?rtpof=true&sd=true&gid=1678229742#gid=1678229742"}))}})}ticketTrackByFn(i,e){return e.airline}onScrollDown(){this.infiniteScrollCount+=this.INFINITE_OFSET_INCREASE}onOpenFile(i){i&&window.open(i)}onDownloadAll(){this.isLoading=!0;const i=new x;this.listOfData.forEach(e=>{i.file(`DieuKienGiaVe${e.airline}.pdf`,e.url)}),i.generateAsync({type:"blob"}).then(e=>{this._toastService.add({severity:"success",summary:"T\u1ea3i v\u1ec1 th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea3i v\u1ec1 to\xe0n b\u1ed9 file th\xe0nh c\xf4ng. Vui l\xf2ng l\u01b0u v\u1ec1 thi\u1ebft b\u1ecb.",sticky:!1}),T.saveAs(e,"DieuKienGiaVe.zip"),this.isLoading=!1}).catch(()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Kh\xf4ng th\u1ec3 t\u1ea3i v\u1ec1 to\xe0n b\u1ed9 file. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0}),this.isLoading=!1})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(p.KNP),t.Y36(C),t.Y36(A.G),t.Y36(E.BX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fare-policy"]],standalone:!0,features:[t.jDz],decls:31,vars:29,consts:[[1,"py-4","px-[30px]","rounded-lg","md:hidden"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","save","size","small",1,"mr-2"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap",3,"sortName"],["cf-th","",1,"whitespace-nowrap",3,"sticky"],["ngFor","",3,"ngForOf"],[1,"hidden","md:block"],[1,"p-4","bg-white","w-full"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"p-4","flex","flex-col","gap-y-3"],["infinite-scroll","",1,"flex","flex-col","gap-y-3",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],[1,"w-12","h-6","object-contain",3,"src"],[1,"py-2","px-3","text-body-sm"],["cf-td","",1,"py-2","px-3","text-body-sm",3,"sticky"],["target","_blank",1,"text-body-md","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"href"],["class","flex flex-col rounded-lg bg-white p-3 gap-y-2 shadow-cf-sm",3,"click",4,"ngIf"],[1,"flex","flex-col","rounded-lg","bg-white","p-3","gap-y-2","shadow-cf-sm",3,"click"],[1,"flex","justify-start","items-center"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"flex","justify-between","items-center"],[1,"w-9","h-9","object-contain",3,"src"],[1,"text-express-md","text-neutral-gray-6"],[1,"text-body-md","text-neutral-gray-6"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"\u0110i\u1ec1u ki\u1ec7n gi\xe1 v\xe9"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return e.onDownloadAll()}),t._UZ(6,"cf-icon",5),t._uU(7," T\u1ea3i v\u1ec1 t\u1ea5t c\u1ea3 "),t.qZA()(),t.TgZ(8,"cf-table",6,7)(10,"thead",8)(11,"th",9),t._uU(12,"H\xe3ng bay"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"T\xean h\xe3ng bay"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Ng\xe0y c\u1eadp nh\u1eadt"),t.qZA(),t.TgZ(19,"th",10),t._uU(20,"Ch\u1ee9c n\u0103ng"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,H,13,9,"ng-template",11),t.qZA()()()(),t.TgZ(23,"div",12)(24,"div",13)(25,"div",14),t._uU(26,"\u0110i\u1ec1u ki\u1ec7n gi\xe1 v\xe9"),t.qZA()(),t.TgZ(27,"div",15)(28,"div",16),t.NdJ("scrolled",function(){return e.onScrollDown()}),t.YNc(29,R,2,1,"ng-container",17),t.qZA()()(),t.YNc(30,B,1,0,"cf-spinner",18)),2&i){const o=t.MAs(9);t.xp6(8),t.Q6J("fnSort",e.sortChange)("fnSearch",e.searchChange)("pageSizeList",t.l5B(24,V,t.DdM(20,Y),t.DdM(21,K),t.DdM(22,G),t.DdM(23,$)))("listData",e.listOfData)("pageSize",e.pageSize),t.xp6(3),t.Q6J("sortName","airline"),t.xp6(2),t.Q6J("sortName","pnr"),t.xp6(2),t.Q6J("sortName","bookedDate"),t.xp6(2),t.Q6J("sortName","departDate"),t.xp6(2),t.Q6J("sticky","right"),t.xp6(3),t.Q6J("ngForOf",o.partOfdata),t.xp6(6),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),t.xp6(1),t.Q6J("ngForOf",e.listOfData)("ngForTrackBy",e.ticketTrackByFn),t.xp6(1),t.Q6J("ngIf",e.isLoading)}},dependencies:[g.ez,g.sg,g.O5,g.uU,p.AxE,p.Sm8,y.N8,y.Xq,d.rC,d.E_,d.qS,d.zs,v.OR,f.Rq,f.Ry],encapsulation:2}),n})()}}]);