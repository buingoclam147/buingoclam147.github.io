"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[3384],{3384:(ae,y,u)=>{u.r(y),u.d(y,{AddJourneyPageComponent:()=>ne});var g=u(36895),_=u(37094),Z=u(83700),d=u(72506),E=u(90602),s=u(67460),J=u(67411),b=u(58276),h=u(15439),T=u(28746),e=u(94650),D=u(27849),U=u(9381),k=u(97579),q=u(82761),P=u(28490),A=u(80529),F=u(88001);const C={headers:new A.WM({"Content-Type":"application/json"})};let N=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}quotationAddJourney(t){return this.http.post(this.appConfig.apiUrl+"ticket/quotation-add-journey",JSON.stringify(t),C)}addJourneyReservation(t){return this.http.post(this.appConfig.apiUrl+"ticket/add-journey-reservation",JSON.stringify(t),C)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A.eN),e.LFG(F.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var w=u(62331);function S(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1," H\xe0nh tr\xecnh m\u1edbi "),e.qZA())}function j(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1," X\xe1c nh\u1eadn "),e.qZA())}function I(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"search-journey-modify",13),e.NdJ("ticketSelected",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onTicketSelected(o))})("valueChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onValueChange(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("searchType",t.searchJourneyModifyType)("reroutingJourneySeleceted",t.reroutingJourneySeleceted)}}function B(n,r){if(1&n&&(e.TgZ(0,"div",84),e._UZ(1,"cf-icon",85),e.TgZ(2,"span",35),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.stopPoint," ")}}function Y(n,r){1&n&&e._UZ(0,"div",86)}function L(n,r){if(1&n&&(e.TgZ(0,"div",87)(1,"div",62),e._uU(2),e.qZA(),e.TgZ(3,"div",88),e._uU(4),e.qZA()()),2&n){const t=r.$implicit;e.xp6(2),e.hij("",t.name,":\xa0"),e.xp6(2),e.Oqu(t.value)}}const v=function(){return[]};function O(n,r){if(1&n&&(e.ynx(0),e.YNc(1,B,4,1,"div",53),e.TgZ(2,"div",54)(3,"div",55),e.YNc(4,Y,1,0,"div",56),e.qZA(),e.TgZ(5,"div",57)(6,"div",58)(7,"div"),e._UZ(8,"img",59),e.qZA(),e.TgZ(9,"div",60)(10,"div",61),e._uU(11),e.qZA(),e.TgZ(12,"div",62),e._uU(13),e.qZA()(),e.TgZ(14,"div",63),e._uU(15),e.qZA()(),e.TgZ(16,"div",64)(17,"div",65)(18,"div",66)(19,"div",67),e._UZ(20,"cf-icon",68),e.TgZ(21,"div"),e._uU(22),e.qZA()(),e.TgZ(23,"div",69),e._UZ(24,"div",70)(25,"div",71)(26,"cf-icon",72),e.qZA()(),e.TgZ(27,"div",73),e._UZ(28,"cf-icon",74),e.TgZ(29,"div",75),e._uU(30),e.qZA()(),e.TgZ(31,"div",76),e._UZ(32,"cf-icon",77),e.TgZ(33,"div",78)(34,"span",79),e._uU(35),e.qZA(),e.TgZ(36,"span",80),e._uU(37),e.qZA()()()(),e.TgZ(38,"div")(39,"div",81),e._UZ(40,"cf-icon",68),e.TgZ(41,"div"),e._uU(42),e.qZA()(),e.TgZ(43,"div",73),e._UZ(44,"cf-icon",74),e.TgZ(45,"div",75),e._uU(46),e.qZA()(),e.TgZ(47,"div",76),e._UZ(48,"cf-icon",77),e.TgZ(49,"div",78)(50,"span",79),e._uU(51),e.qZA(),e.TgZ(52,"span",80),e._uU(53),e.qZA()()()()()(),e.TgZ(54,"div",82),e.YNc(55,L,5,2,"div",83),e.qZA()(),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.stopPoint),e.xp6(3),e.Q6J("ngForOf",e.DdM(15,v).constructor(6)),e.xp6(4),e.Q6J("src","assets/airline-logo/"+t.operating+".png",e.LSH),e.xp6(3),e.hij("",t.operating," - "),e.xp6(2),e.hij("\xa0",t.operatingName,""),e.xp6(2),e.hij(" ",t.flightNumber," "),e.xp6(7),e.Oqu(t.startTime),e.xp6(8),e.Oqu(t.startDate),e.xp6(5),e.hij("",t.startPoint," - "),e.xp6(2),e.Oqu(t.startPointName),e.xp6(5),e.hij(" ",t.endTime," "),e.xp6(4),e.Oqu(t.endDate),e.xp6(5),e.hij("",t.endPoint," - "),e.xp6(2),e.Oqu(t.endPointName),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.rules)}}function R(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td",89),e._uU(2),e.qZA(),e.TgZ(3,"td",89),e._uU(4),e.qZA(),e.TgZ(5,"td",89),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",89),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",90),e._uU(12),e.ALo(13,"number"),e.qZA()()),2&n){const t=r.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.typeDisplay),e.xp6(2),e.Oqu(e.lcZ(7,5,t.baseFare)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.taxFee)),e.xp6(3),e.Oqu(e.lcZ(13,9,t.totalPrice))}}function M(n,r){if(1&n&&(e.TgZ(0,"div",30)(1,"div",31),e._uU(2,"Ho\xe0n b\u1ea3o l\u01b0u \u0111ang c\xf3"),e.qZA(),e.TgZ(3,"div",91),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" (",e.lcZ(5,1,t.addJourneyCharge.totalRefund)," \u0111) ")}}function H(n,r){1&n&&(e.TgZ(0,"div",92),e._UZ(1,"div",93),e.qZA())}function Q(n,r){if(1&n&&(e.TgZ(0,"div",30)(1,"div",31),e._uU(2,"Ho\xe0n b\u1ea3o l\u01b0u c\xf2n l\u1ea1i"),e.qZA(),e.TgZ(3,"div",91),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" (",e.lcZ(5,1,t.addJourneyCharge.remainingCredit)," \u0111) ")}}function K(n,r){if(1&n&&(e.TgZ(0,"div",94)(1,"div",95)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"div",96)(8,"div"),e._uU(9,"Gi\xe1 v\xe9 m\xe1y bay"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.TgZ(13,"div",96)(14,"div"),e._uU(15,"Thu\u1ebf & ph\xed"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"number"),e.qZA()()()),2&n){const t=r.$implicit;e.xp6(3),e.AsE("",t.name," (",t.typeDisplay,")"),e.xp6(2),e.Oqu(e.lcZ(6,5,t.totalPrice)),e.xp6(6),e.Oqu(e.lcZ(12,7,t.baseFare)),e.xp6(6),e.Oqu(e.lcZ(18,9,t.taxFee))}}function z(n,r){if(1&n&&(e.TgZ(0,"div",45)(1,"div",46),e._uU(2,"Ho\xe0n b\u1ea3o l\u01b0u \u0111ang c\xf3"),e.qZA(),e.TgZ(3,"div",97),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" (",e.lcZ(5,1,t.addJourneyCharge.totalRefund||0)," \u0111) ")}}function V(n,r){1&n&&(e.TgZ(0,"div",92),e._UZ(1,"div",93),e.qZA())}function $(n,r){if(1&n&&(e.TgZ(0,"div",45)(1,"div",46),e._uU(2,"Ho\xe0n b\u1ea3o l\u01b0u c\xf2n l\u1ea1i"),e.qZA(),e.TgZ(3,"div",97),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" (",e.lcZ(5,1,t.addJourneyCharge.remainingCredit||0)," \u0111) ")}}function G(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"div",14),e._UZ(3,"cf-icon",15),e.TgZ(4,"span",16),e._uU(5),e.qZA()(),e.TgZ(6,"div",17),e.YNc(7,O,56,16,"ng-container",18),e.qZA()(),e.TgZ(8,"div",19)(9,"div",20)(10,"div",21)(11,"div",22),e._UZ(12,"cf-icon",23),e.TgZ(13,"div"),e._uU(14,"Chi ph\xed h\xe0nh tr\xecnh m\u1edbi"),e.qZA()()(),e.TgZ(15,"div",24)(16,"table",25)(17,"thead")(18,"tr",26)(19,"th",27),e._uU(20,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(21,"th",27),e._uU(22,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(23,"th",27),e._uU(24,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(25,"th",27),e._uU(26,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(27,"th",28),e._uU(28,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,R,14,11,"tr",18),e.qZA()(),e.TgZ(31,"div",29)(32,"div",30)(33,"div",31),e._uU(34,"T\u1ed5ng gi\xe1"),e.qZA(),e.TgZ(35,"div",32),e._uU(36),e.ALo(37,"number"),e.qZA()(),e.TgZ(38,"div",30)(39,"div",31),e._uU(40,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(41,"div",32),e._uU(42),e.ALo(43,"number"),e.qZA()(),e.YNc(44,M,6,3,"div",33),e.YNc(45,H,2,0,"div",34),e.TgZ(46,"div",30)(47,"div",35),e._uU(48,"T\u1ed5ng ph\xed"),e.qZA(),e.TgZ(49,"div",36),e._uU(50),e.ALo(51,"number"),e.qZA()(),e.YNc(52,Q,6,3,"div",33),e.qZA(),e.TgZ(53,"div",37),e._UZ(54,"cf-icon",38),e.TgZ(55,"span",39),e._uU(56," L\u01b0u \xfd: N\u1ebfu th\xeam h\xe0nh tr\xecnh tr\xean v\xe9 \u0111\xe3 xu\u1ea5t, chi ph\xed s\u1ebd \u0111\u01b0\u1ee3c thanh to\xe1n ngay v\xe0 c\u1eadp nh\u1eadt v\xe0o c\xf4ng n\u1ee3 "),e.qZA()()()()(),e.TgZ(57,"div",40)(58,"div",20)(59,"div",21)(60,"div",22),e._UZ(61,"cf-icon",23),e.TgZ(62,"div"),e._uU(63,"Chi ph\xed h\xe0nh tr\xecnh m\u1edbi"),e.qZA()()(),e.TgZ(64,"div",41)(65,"div",42),e.YNc(66,K,19,11,"div",43),e.qZA(),e.TgZ(67,"div",44)(68,"div",45)(69,"div",46),e._uU(70,"T\u1ed5ng gi\xe1"),e.qZA(),e.TgZ(71,"div",47),e._uU(72),e.ALo(73,"number"),e.qZA()(),e.TgZ(74,"div",45)(75,"div",46),e._uU(76,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(77,"div",47),e._uU(78),e.ALo(79,"number"),e.qZA()(),e.YNc(80,z,6,3,"div",48),e.YNc(81,V,2,0,"div",34),e.TgZ(82,"div",45)(83,"div",49),e._uU(84,"T\u1ed5ng ph\xed"),e.qZA(),e.TgZ(85,"div",36),e._uU(86),e.ALo(87,"number"),e.qZA()(),e.YNc(88,$,6,3,"div",48),e.TgZ(89,"div",37),e._UZ(90,"cf-icon",38),e.TgZ(91,"span",39),e._uU(92," L\u01b0u \xfd: N\u1ebfu th\xeam h\xe0nh tr\xecnh tr\xean v\xe9 \u0111\xe3 xu\u1ea5t, chi ph\xed s\u1ebd \u0111\u01b0\u1ee3c thanh to\xe1n ngay v\xe0 c\u1eadp nh\u1eadt v\xe0o c\xf4ng n\u1ee3 "),e.qZA()(),e.TgZ(93,"div",50)(94,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showJourneyModify())}),e._UZ(95,"cf-icon",52),e._uU(96," Xem chi ti\u1ebft "),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.lnq("Th\xf4ng tin chuy\u1ebfn bay ",t.flightInfo.startPoint," - ",t.flightInfo.endPoint,", ",t.flightInfo.departureDate,""),e.xp6(2),e.Q6J("ngForOf",t.flightInfo.segments),e.xp6(23),e.Q6J("ngForOf",t.bookingDetailReroutingData.passengers||e.DdM(30,v)),e.xp6(6),e.hij(" ",e.lcZ(37,18,t.addJourneyCharge.addJourney||0)," \u0111 "),e.xp6(6),e.hij(" ",e.lcZ(43,20,t.addJourneyCharge.serviceFee||0)," \u0111 "),e.xp6(2),e.Q6J("ngIf",t.addJourneyCharge.totalRefund),e.xp6(1),e.Q6J("ngIf",t.addJourneyCharge.totalRefund),e.xp6(5),e.hij(" ",e.lcZ(51,22,t.addJourneyCharge.totalCharge||0)," \u0111 "),e.xp6(2),e.Q6J("ngIf",t.addJourneyCharge.remainingCredit),e.xp6(14),e.Q6J("ngForOf",t.bookingDetailReroutingData.passengers||e.DdM(31,v)),e.xp6(6),e.hij(" ",e.lcZ(73,24,t.addJourneyCharge.addJourney||0)," \u0111 "),e.xp6(6),e.hij(" ",e.lcZ(79,26,t.addJourneyCharge.serviceFee||0)," \u0111 "),e.xp6(2),e.Q6J("ngIf",t.addJourneyCharge.totalRefund),e.xp6(1),e.Q6J("ngIf",t.addJourneyCharge.totalRefund),e.xp6(5),e.hij(" ",e.lcZ(87,28,t.addJourneyCharge.totalCharge||0)," \u0111 "),e.xp6(2),e.Q6J("ngIf",t.addJourneyCharge.remainingCredit)}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",98)(1,"div")(2,"button",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancel())}),e._UZ(3,"cf-icon",100),e._uU(4," H\u1ee7y d\u1ecbch v\u1ee5 "),e.qZA()()()}}function W(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",105),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onNextStep(2))}),e._uU(1," X\xe1c nh\u1eadn "),e._UZ(2,"cf-icon",106),e.qZA()}}function ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",98)(1,"div")(2,"button",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancel())}),e._UZ(3,"cf-icon",100),e._uU(4," H\u1ee7y d\u1ecbch v\u1ee5 "),e.qZA()(),e.TgZ(5,"div",101)(6,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBack())}),e._UZ(7,"cf-icon",103),e._uU(8," Quay l\u1ea1i "),e.qZA(),e.YNc(9,W,3,0,"button",104),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",2===t.step)}}function te(n,r){1&n&&e._UZ(0,"cf-spinner")}const ie=function(n){return{"!w-full":n}};let ne=(()=>{class n{constructor(t,i,o,a,l,c,p,f,x){this._requestReroutingService=i,this._detectMobileService=o,this._bottomSheetService=a,this._modal=l,this._router=c,this._locationDataService=p,this._addJourneyService=f,this._toastService=x,this.step=1,this.isLoading=!1,this.listTicketSelected=[],this.addJourneyCharge={addJourney:0,refund:0,remainingCredit:0,serviceFee:0,totalRefund:0,totalCharge:0},this.searchJourneyModifyType=E.Io.ADD_JOURNEY,t.registerIcons([d.gW0,d.s5C,d.Ffn,d.rks,d.wvd,d.okA,d.toh,d.UNF,d.QkI,d.ILM,d.o1t,d.B2I,d.NNX,d.Lxr,d.Xlt,d.a04]),this.bookingDetailReroutingData=this._requestReroutingService.getBookingDetailReroutingData()}onNextStep(t){var i;switch(t){case 1:if(!this.listTicketSelected.length){if(this._detectMobileService.isMobile()){const a=this._bottomSheetService.open(s.Q4,{headerTitle:"Kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"Vui l\xf2ng l\u1ef1a ch\u1ecdn h\xe0nh tr\xecnh m\u1edbi tr\u01b0\u1edbc khi \u0111i ti\u1ebfp",okText:"\u0110\xf3ng",cancelText:"",hasIcon:!0,hasCancel:!1,status:"info"}});a.containerInstance._rightButtonClick.subscribe(()=>{a.dismiss()})}else this._modal.open(s.V0,{title:"Kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c",body:"Vui l\xf2ng l\u1ef1a ch\u1ecdn h\xe0nh tr\xecnh m\u1edbi tr\u01b0\u1edbc khi \u0111i ti\u1ebfp",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""});return}const o=null===(i=this.listTicketSelected[0].ticketPrice)||void 0===i?void 0:i.details;this.bookingDetailReroutingData.passengers.forEach(a=>{if("ADULT"===a.type){const l=null==o?void 0:o.find(c=>c.type.includes("ADT"));l&&(a.baseFare=l.baseFare,a.taxFee=l.surCharge,a.totalPrice=l.baseFare+l.surCharge)}if("CHILD"===a.type){const l=null==o?void 0:o.find(c=>c.type.includes("CHD"));l&&(a.baseFare=l.baseFare,a.taxFee=l.surCharge,a.totalPrice=l.baseFare+l.surCharge)}if("INFANT"===a.type){const l=null==o?void 0:o.find(c=>c.type.includes("INF"));l&&(a.baseFare=l.baseFare,a.taxFee=l.surCharge,a.totalPrice=l.baseFare+l.surCharge)}}),this.quotationAddJourney(),this.initFlightInfo();break;case 2:this.addJourneyReservation()}}onBack(){this.step=this.step>1?this.step-1:1}onCancel(){if(this._detectMobileService.isMobile()){const t=this._bottomSheetService.open(s.Q4,{headerTitle:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 Th\xeam h\xe0nh tr\xecnh?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng",hasIcon:!1,status:"info"}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(i=>{i&&this._router.navigate([`admin/booking-detail/${this.bookingDetailReroutingData.airline}/${this.bookingDetailReroutingData.bookingCode}`]),t.dismiss()})}else this._modal.open(s.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 Th\xeam h\xe0nh tr\xecnh?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:i=>{i.data&&this._router.navigate([`admin/booking-detail/${this.bookingDetailReroutingData.airline}/${this.bookingDetailReroutingData.bookingCode}`])}})}onValueChange(t){this.listTicketSelected=t}onTicketSelected(t){this.listTicketSelected=t,this.listTicketSelected.length&&this.onNextStep(1)}initFlightInfo(){const t=this.listTicketSelected[0];this.flightInfo={airline:t.airline,airlineName:t.airlineName,airlineLogo:t.airlineLogo,provider:t.provider,journeyKey:t.journeyKey,operating:t.operating,operatingName:t.operatingName,flightNumber:t.flight,journeyName:`Chuy\u1ebfn bay: ${t.startPoint} - ${t.endPoint}`,numOfStop:t.numOfStop,departureDate:h(t.startTime).format("HH:mm DD/MM/YYYY"),startPoint:t.startPoint,startPointName:t.startPoint,endPoint:t.endPoint,endPointName:t.endPoint,price:t.totalPrice,handBag:"Kh\xf4ng",segments:t.segments.map((i,o)=>({airline:i.airline,airlineSystem:i.airline,airlineName:i.airlineName,airlineLogo:i.airlineLogo,operating:i.operating,operatingName:i.operatingName,mobileAirlineLogo:["VJ","VN","QH"].includes(i.airline)?"assets/airline-logo/"+i.airline+"_small.png":"assets/airline-logo/"+i.airline+".png",flightNumber:i.airline+i.flightNumber,startTime:h(i.departDate).format("HH:mm"),startDate:h(i.departDate).format("DD/MM/YYYY"),startPoint:i.startCode,startPointName:i.startPoint,startAirport:this._locationDataService.getAirportNameByCode(i.startPoint),endTime:h(i.arrivalDate).format("HH:mm"),endDate:h(i.arrivalDate).format("DD/MM/YYYY"),endPoint:i.endCode,endPointName:i.endPoint,endAirport:this._locationDataService.getAirportNameByCode(i.endPoint),stopPoint:i.stopPoint,modelAirplane:i.modelAirplane,rules:[{name:"Th\u1eddi gian bay",value:i.duration},{name:"Lo\u1ea1i m\xe1y bay",value:i.modelAirplane},{name:"H\u1ea1ng ch\u1ed7",value:i.fareType+(i.fareClass?`(${i.fareClass})`:"N/A")},{name:"H\xe0nh l\xfd k\xfd g\u1eedi",value:t.checkedBag||"N/A"},{name:"H\xe0nh l\xfd x\xe1ch tay",value:t.handBag||"N/A"}]})),ticketPrice:t.ticketPrice,fareRule:t.fareRule}}showJourneyModify(){if(this._detectMobileService.isMobile()){const t=this._bottomSheetService.open(b.G,{headerTitle:"Chi ti\u1ebft h\xe0nh tr\xecnh m\u1edbi",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!0,data:{type:"JOURNEY_DETAIL",flightInfo:this.flightInfo,passengers:this.bookingDetailReroutingData.passengers}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()})}else this._modal.open(b.G,{type:"JOURNEY_DETAIL",flightInfo:this.flightInfo,passengers:this.bookingDetailReroutingData.passengers})}quotationAddJourney(){const t={airline:this.bookingDetailReroutingData.airline,bookingCode:this.bookingDetailReroutingData.bookingCode,newFareOptionKey:this.listTicketSelected[0].fareOptionKey||"",flightUpdate:{departDate:h(this.listTicketSelected[0].startTime).format("YYYY-MM-DD"),startPoint:this.listTicketSelected[0].startCode,endPoint:this.listTicketSelected[0].endCode}};this.isLoading=!0,this._addJourneyService.quotationAddJourney(t).pipe((0,T.x)(()=>this.isLoading=!1)).subscribe({next:i=>{var o,a,l,c,p,f,x,m;if(console.log(i),"OK"===i.status)this.addJourneyData=i.data,this.addJourneyCharge={addJourney:(null===(o=i.data.addJourney)||void 0===o?void 0:o.charge.total)||0,refund:(null===(a=i.data.refund)||void 0===a?void 0:a.total)||0,serviceFee:(null===(l=i.data.serviceFeeInfo)||void 0===l?void 0:l.totalService)||0,totalRefund:(null===(c=i.data.totalRefund)||void 0===c?void 0:c.total)||0,get remainingCredit(){return this.totalRefund?this.totalRefund-this.refund:0},totalCharge:((null===(p=i.data.totalCharge)||void 0===p?void 0:p.total)||0)+((null===(f=i.data.serviceFeeInfo)||void 0===f?void 0:f.totalService)||0)},this.step=2;else{const oe=(null===(m=null===(x=i.objectError)||void 0===x?void 0:x.errorDescription)||void 0===m?void 0:m.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh t\xednh gi\xe1 h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.";this._modal.open(s.V0,{title:"T\xednh gi\xe1 h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:oe,okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}},error:()=>{this._modal.open(s.V0,{title:"T\xednh gi\xe1 h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh t\xednh gi\xe1 h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}})}addJourneyReservation(){var t;const i={airline:this.bookingDetailReroutingData.airline,bookingCode:this.bookingDetailReroutingData.bookingCode,confirmCharge:null===(t=this.addJourneyData.totalCharge)||void 0===t?void 0:t.total,newFareOptionKey:this.listTicketSelected[0].fareOptionKey||"",sessionKey:this.listTicketSelected[0].sessionKey||""};this.isLoading=!0,this._addJourneyService.addJourneyReservation(i).pipe((0,T.x)(()=>this.isLoading=!1)).subscribe({next:o=>{var a,l;if(console.log(o),"OK"===o.status)this._toastService.add({severity:"success",summary:"Th\xeam h\xe0nh tr\xecnh th\xe0nh c\xf4ng",detail:"",sticky:!1}),this._router.navigate([`admin/booking-detail/${i.airline}/${i.bookingCode}`]);else{const c=(null===(l=null===(a=o.objectError)||void 0===a?void 0:a.errorDescription)||void 0===l?void 0:l.vi)||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.";this._modal.open(s.V0,{title:"Th\xeam h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:c,okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}},error:()=>{this._modal.open(s.V0,{title:"Th\xeam h\xe0nh tr\xecnh th\u1ea5t b\u1ea1i",body:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh Th\xeam h\xe0nh tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.",okText:"\u0110\xf3ng",hasCancel:!1,cancelText:""})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.KNP),e.Y36(D.h),e.Y36(U.L),e.Y36(_.a2),e.Y36(k.oE),e.Y36(q.F0),e.Y36(P._),e.Y36(N),e.Y36(w.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["add-journey-page"]],hostAttrs:[1,"h-full"],standalone:!0,features:[e.jDz],decls:18,vars:10,consts:[[1,"flex","flex-col","gap-y-6","h-full"],[1,"w-full","h-full","flex","justify-center","py-8","px-6"],[1,"w-[970px]","h-full","flex","flex-col","justify-between","gap-y-6",3,"ngClass"],[1,"w-full","flex","gap-x-5"],[1,"w-1","h-full","bg-primary-2-4"],[1,"text-heading-md","text-black","flex","items-center","gap-x-2"],["icon","chevron_right","size","small"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"flex-1"],[4,"ngIf"],["class","w-full flex justify-between items-center",4,"ngIf"],[3,"searchType","reroutingJourneySeleceted","ticketSelected","valueChange"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small",1,"cf-icon-small"],[1,"text-heading-sm","text-neutral-black"],[1,"md:hidden","mb-6"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-6","md:hidden"],[1,"py-6","flex","flex-col","gap-y-4","bg-neutral-white"],[1,"px-6","gap-x-2","flex","justify-between"],[1,"flex","items-center","gap-x-2","text-heading-sm"],["icon","money","size","small"],[1,"px-6","flex","flex-col","gap-y-2"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"flex","flex-col","gap-y-2"],[1,"flex","justify-end","gap-x-4","items-center"],[1,"text-express-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-body-md-short","text-neutral-gray-6","text-right"],["class","flex justify-end gap-x-4 items-center",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[1,"text-express-md","text-neutral-gray-6"],[1,"min-w-[120px]","text-heading-md","text-primary-1-4","text-right"],[1,"w-full","py-1.5","px-3","bg-functional-1-1","rounded","flex","items-center","gap-x-3"],["icon","info","size","small",1,"text-functional-1-3"],[1,"text-body-md-short"],[1,"hidden","md:flex","flex-col","gap-y-6"],[1,"px-3","flex","flex-col","gap-y-4"],[1,"flex","flex-col","gap-y-4"],["class","flex flex-col gap-y-1",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2","border-t","border-t-neutral-gray-1","pt-2"],[1,"w-full","flex","justify-between","gap-x-4","items-center"],[1,"text-body-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-express-md","text-right"],["class","w-full flex justify-between gap-x-4 items-center",4,"ngIf"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"w-full"],["cf-button","","type","secondary",1,"!w-full","!max-w-full","justify-center","bg-neutral-white",3,"click"],["icon","external_link","size","small",1,"mr-2.5"],["class","w-full bg-[#F0EAF4] rounded flex items-center gap-x-2 py-1.5 px-3 my-3",4,"ngIf"],[1,"flex","justify-between","items-center","bg-neutral-white","border","border-neutral-gray-2","rounded","shadow-cf-journey-booking-success","relative"],[1,"absolute","-translate-x-[18%]","top-0","h-full","flex","flex-col","justify-between","py-3.5"],["class","w-1.5 h-3 border border-l-0 bg-neutral-gray-1 border-neutral-gray-2 rounded-r-full",4,"ngFor","ngForOf"],[1,"px-8","pt-6","pb-8","flex","flex-1","gap-x-10"],[1,"flex","flex-col","items-center","justify-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"flex","items-center","mt-1.5"],[1,"text-espressive-sm"],[1,"text-body-sm"],[1,"py-[2px]","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black","mt-2"],[1,"flex","justify-between","gap-x-3"],[1,""],[1,"flex","items-center","gap-x-[20px]","mb-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],["icon","clock","size","small"],[1,"flex","items-center","w-[50px]","py-1","px-2.5"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"flex","items-center","gap-x-2","mb-2"],["icon","calendar","size","small"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],["icon","location","size","small"],[1,"text-neutral-black"],[1,"text-espressive-md"],[1,"text-body-md"],[1,"text-heading-lg","text-neutral-black","mb-3","flex","gap-x-2","items-center"],[1,"py-6","px-[18px]","border-l","border-dashed","border-neutral-gray-2","flex","flex-col","justify-between","gap-y-2"],["class","flex flex-nowrap items-center",4,"ngFor","ngForOf"],[1,"w-full","bg-[#F0EAF4]","rounded","flex","items-center","gap-x-2","py-1.5","px-3","my-3"],["icon","circle_information","size","small",1,"text-secondary-2-4"],[1,"w-1.5","h-3","border","border-l-0","bg-neutral-gray-1","border-neutral-gray-2","rounded-r-full"],[1,"flex","flex-nowrap","items-center"],[1,"text-espressive-sm","text-neutral-black"],[1,"text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"min-w-[120px]","text-body-md-short","text-functional-2-3","text-right"],[1,"flex","justify-end"],[1,"w-[120px]","border-t-2","border-neutral-gray-1"],[1,"flex","flex-col","gap-y-1"],[1,"flex","justify-between","items-center","text-heading-xs"],[1,"flex","justify-between","items-center","text-body-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-express-md","text-right","text-secondary-5-3"],[1,"w-full","flex","justify-between","items-center"],["cf-button","","type","border",1,"min-w-[100px]","justify-center","bg-neutral-white",3,"click"],["icon","close","size","small",1,"mr-2.5"],[1,"flex","gap-x-4"],["cf-button","","type","secondary",1,"min-w-[100px]","justify-center","bg-neutral-white",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],["class","min-w-[100px] justify-center","cf-button","",3,"click",4,"ngIf"],["cf-button","",1,"min-w-[100px]","justify-center",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"div",4),e.TgZ(5,"div",5)(6,"div"),e._uU(7,"Th\xeam h\xe0nh tr\xecnh"),e.qZA(),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7),e.YNc(10,S,2,0,"p",8),e.YNc(11,j,2,0,"p",9),e.qZA()()(),e.TgZ(12,"div",10),e.YNc(13,I,2,2,"div",11),e.YNc(14,G,97,32,"div",11),e.qZA(),e.YNc(15,X,5,0,"div",12),e.YNc(16,ee,10,1,"div",12),e.qZA()()(),e.YNc(17,te,1,0,"cf-spinner",11)),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(8,ie,1===i.step)),e.xp6(7),e.Q6J("ngSwitch",i.step),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(3),e.Q6J("ngIf",1===i.step),e.xp6(1),e.Q6J("ngIf",2===i.step),e.xp6(1),e.Q6J("ngIf",1===i.step),e.xp6(1),e.Q6J("ngIf",2===i.step),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[g.ez,g.mk,g.sg,g.O5,g.RF,g.n9,g.ED,g.JJ,d.AxE,d.Sm8,J.r,_.DW,Z.N8,Z.Xq,s.OR],encapsulation:2}),n})()}}]);