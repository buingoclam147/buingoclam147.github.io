var Reflect;(function(Da){!function(we){var Xn="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),Qn=qr(Da);function qr(bn,Wr){return function(Jn,Zn){"function"!=typeof bn[Jn]&&Object.defineProperty(bn,Jn,{configurable:!0,writable:!0,value:Zn}),Wr&&Wr(Jn,Zn)}}typeof Xn.Reflect>"u"?Xn.Reflect=Da:Qn=qr(Xn.Reflect,Qn),function(we){var Xn=Object.prototype.hasOwnProperty,Qn="function"==typeof Symbol,qr=Qn&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",bn=Qn&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",Wr="function"==typeof Object.create,Jn={__proto__:[]}instanceof Array,Zn=!Wr&&!Jn,tr={create:Wr?function(){return Qr(Object.create(null))}:Jn?function(){return Qr({__proto__:null})}:function(){return Qr({})},has:Zn?function(F,q){return Xn.call(F,q)}:function(F,q){return q in F},get:Zn?function(F,q){return Xn.call(F,q)?F[q]:void 0}:function(F,q){return F[q]}},Pa=Object.getPrototypeOf(Function),vr="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,ut=vr||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function On(){var F={},q=[],Y=function(){function _t(At,lt,Dt){this._index=0,this._keys=At,this._values=lt,this._selector=Dt}return _t.prototype["@@iterator"]=function(){return this},_t.prototype[bn]=function(){return this},_t.prototype.next=function(){var At=this._index;if(At>=0&&At<this._keys.length){var lt=this._selector(this._keys[At],this._values[At]);return At+1>=this._keys.length?(this._index=-1,this._keys=q,this._values=q):this._index++,{value:lt,done:!1}}return{value:void 0,done:!0}},_t.prototype.throw=function(At){throw this._index>=0&&(this._index=-1,this._keys=q,this._values=q),At},_t.prototype.return=function(At){return this._index>=0&&(this._index=-1,this._keys=q,this._values=q),{value:At,done:!0}},_t}();return function(){function _t(){this._keys=[],this._values=[],this._cacheKey=F,this._cacheIndex=-2}return Object.defineProperty(_t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_t.prototype.has=function(At){return this._find(At,!1)>=0},_t.prototype.get=function(At){var lt=this._find(At,!1);return lt>=0?this._values[lt]:void 0},_t.prototype.set=function(At,lt){var Dt=this._find(At,!0);return this._values[Dt]=lt,this},_t.prototype.delete=function(At){var lt=this._find(At,!1);if(lt>=0){for(var Dt=this._keys.length,Pt=lt+1;Pt<Dt;Pt++)this._keys[Pt-1]=this._keys[Pt],this._values[Pt-1]=this._values[Pt];return this._keys.length--,this._values.length--,At===this._cacheKey&&(this._cacheKey=F,this._cacheIndex=-2),!0}return!1},_t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=F,this._cacheIndex=-2},_t.prototype.keys=function(){return new Y(this._keys,this._values,dt)},_t.prototype.values=function(){return new Y(this._keys,this._values,ft)},_t.prototype.entries=function(){return new Y(this._keys,this._values,Qt)},_t.prototype["@@iterator"]=function(){return this.entries()},_t.prototype[bn]=function(){return this.entries()},_t.prototype._find=function(At,lt){return this._cacheKey!==At&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=At)),this._cacheIndex<0&&lt&&(this._cacheIndex=this._keys.length,this._keys.push(At),this._values.push(void 0)),this._cacheIndex},_t}();function dt(_t,At){return _t}function ft(_t,At){return At}function Qt(_t,At){return[_t,At]}}():Map,he=vr||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function Xr(){return function(){function F(){this._map=new ut}return Object.defineProperty(F.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),F.prototype.has=function(q){return this._map.has(q)},F.prototype.add=function(q){return this._map.set(q,q),this},F.prototype.delete=function(q){return this._map.delete(q)},F.prototype.clear=function(){this._map.clear()},F.prototype.keys=function(){return this._map.keys()},F.prototype.values=function(){return this._map.values()},F.prototype.entries=function(){return this._map.entries()},F.prototype["@@iterator"]=function(){return this.keys()},F.prototype[bn]=function(){return this.keys()},F}()}():Set,$t=new(vr||"function"!=typeof WeakMap?function zo(){var F=16,q=tr.create(),Y=dt();return function(){function lt(){this._key=dt()}return lt.prototype.has=function(Dt){var Pt=ft(Dt,!1);return void 0!==Pt&&tr.has(Pt,this._key)},lt.prototype.get=function(Dt){var Pt=ft(Dt,!1);return void 0!==Pt?tr.get(Pt,this._key):void 0},lt.prototype.set=function(Dt,Pt){return ft(Dt,!0)[this._key]=Pt,this},lt.prototype.delete=function(Dt){var Pt=ft(Dt,!1);return void 0!==Pt&&delete Pt[this._key]},lt.prototype.clear=function(){this._key=dt()},lt}();function dt(){var lt;do{lt="@@WeakMap@@"+At()}while(tr.has(q,lt));return q[lt]=!0,lt}function ft(lt,Dt){if(!Xn.call(lt,Y)){if(!Dt)return;Object.defineProperty(lt,Y,{value:tr.create()})}return lt[Y]}function Qt(lt,Dt){for(var Pt=0;Pt<Dt;++Pt)lt[Pt]=255*Math.random()|0;return lt}function At(){var lt=function _t(lt){return"function"==typeof Uint8Array?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(lt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(lt)):Qt(new Uint8Array(lt),lt):Qt(new Array(lt),lt)}(F);lt[6]=79&lt[6]|64,lt[8]=191&lt[8]|128;for(var Dt="",Pt=0;Pt<F;++Pt){var un=lt[Pt];(4===Pt||6===Pt||8===Pt)&&(Dt+="-"),un<16&&(Dt+="0"),Dt+=un.toString(16).toLowerCase()}return Dt}}():WeakMap);function ne(F,q,Y){var dt=$t.get(F);if(C(dt)){if(!Y)return;dt=new ut,$t.set(F,dt)}var ft=dt.get(q);if(C(ft)){if(!Y)return;ft=new ut,dt.set(q,ft)}return ft}function si(F,q,Y){if(at(F,q,Y))return!0;var ft=qe(q);return!An(ft)&&si(F,ft,Y)}function at(F,q,Y){var dt=ne(q,Y,!1);return!C(dt)&&function qt(F){return!!F}(dt.has(F))}function Kr(F,q,Y){if(at(F,q,Y))return Ma(F,q,Y);var ft=qe(q);return An(ft)?void 0:Kr(F,ft,Y)}function Ma(F,q,Y){var dt=ne(q,Y,!1);if(!C(dt))return dt.get(F)}function jo(F,q,Y,dt){ne(Y,dt,!0).set(F,q)}function Cr(F,q){var Y=It(F,q),dt=qe(F);if(null===dt)return Y;var ft=Cr(dt,q);if(ft.length<=0)return Y;if(Y.length<=0)return ft;for(var Qt=new he,_t=[],At=0,lt=Y;At<lt.length;At++)Qt.has(Dt=lt[At])||(Qt.add(Dt),_t.push(Dt));for(var un=0,Ia=ft;un<Ia.length;un++){var Dt;Qt.has(Dt=Ia[un])||(Qt.add(Dt),_t.push(Dt))}return _t}function It(F,q){var Y=[],dt=ne(F,q,!1);if(C(dt))return Y;for(var Qt=function li(F){var q=Re(F,bn);if(!cn(q))throw new TypeError;var Y=q.call(F);if(!me(Y))throw new TypeError;return Y}(dt.keys()),_t=0;;){var At=Yr(Qt);if(!At)return Y.length=_t,Y;var lt=Xt(At);try{Y[_t]=lt}catch(Dt){try{di(Qt)}finally{throw Dt}}_t++}}function Vt(F){if(null===F)return 1;switch(typeof F){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===F?1:6;default:return 6}}function C(F){return void 0===F}function An(F){return null===F}function me(F){return"object"==typeof F?null!==F:"function"==typeof F}function ii(F,q){switch(Vt(F)){case 0:case 1:case 2:case 3:case 4:case 5:return F}var Y=3===q?"string":5===q?"number":"default",dt=Re(F,qr);if(void 0!==dt){var ft=dt.call(F,Y);if(me(ft))throw new TypeError;return ft}return function Ot(F,q){if("string"===q){var Y=F.toString;if(cn(Y)&&!me(dt=Y.call(F)))return dt;if(cn(ft=F.valueOf)&&!me(dt=ft.call(F)))return dt}else{var ft;if(cn(ft=F.valueOf)&&!me(dt=ft.call(F)))return dt;var dt,Qt=F.toString;if(cn(Qt)&&!me(dt=Qt.call(F)))return dt}throw new TypeError}(F,"default"===Y?"number":Y)}function H(F){var q=ii(F,3);return function bd(F){return"symbol"==typeof F}(q)?q:function Nt(F){return""+F}(q)}function La(F){return Array.isArray?Array.isArray(F):F instanceof Object?F instanceof Array:"[object Array]"===Object.prototype.toString.call(F)}function cn(F){return"function"==typeof F}function bt(F){return"function"==typeof F}function Re(F,q){var Y=F[q];if(null!=Y){if(!cn(Y))throw new TypeError;return Y}}function Xt(F){return F.value}function Yr(F){var q=F.next();return!q.done&&q}function di(F){var q=F.return;q&&q.call(F)}function qe(F){var q=Object.getPrototypeOf(F);if("function"!=typeof F||F===Pa||q!==Pa)return q;var Y=F.prototype,dt=Y&&Object.getPrototypeOf(Y);if(null==dt||dt===Object.prototype)return q;var ft=dt.constructor;return"function"!=typeof ft||ft===F?q:ft}function Qr(F){return F.__=void 0,delete F.__,F}we("decorate",function Ne(F,q,Y,dt){if(C(Y)){if(!La(F))throw new TypeError;if(!bt(q))throw new TypeError;return function ai(F,q){for(var Y=F.length-1;Y>=0;--Y){var ft=(0,F[Y])(q);if(!C(ft)&&!An(ft)){if(!bt(ft))throw new TypeError;q=ft}}return q}(F,q)}if(!La(F))throw new TypeError;if(!me(q))throw new TypeError;if(!me(dt)&&!C(dt)&&!An(dt))throw new TypeError;return An(dt)&&(dt=void 0),function J(F,q,Y,dt){for(var ft=F.length-1;ft>=0;--ft){var _t=(0,F[ft])(q,Y,dt);if(!C(_t)&&!An(_t)){if(!me(_t))throw new TypeError;dt=_t}}return dt}(F,q,Y=H(Y),dt)}),we("metadata",function er(F,q){return function Y(dt,ft){if(!me(dt))throw new TypeError;if(!C(ft)&&!function Gr(F){switch(Vt(F)){case 3:case 4:return!0;default:return!1}}(ft))throw new TypeError;jo(F,q,dt,ft)}}),we("defineMetadata",function ae(F,q,Y,dt){if(!me(Y))throw new TypeError;return C(dt)||(dt=H(dt)),jo(F,q,Y,dt)}),we("hasMetadata",function Gt(F,q,Y){if(!me(q))throw new TypeError;return C(Y)||(Y=H(Y)),si(F,q,Y)}),we("hasOwnMetadata",function X(F,q,Y){if(!me(q))throw new TypeError;return C(Y)||(Y=H(Y)),at(F,q,Y)}),we("getMetadata",function Rt(F,q,Y){if(!me(q))throw new TypeError;return C(Y)||(Y=H(Y)),Kr(F,q,Y)}),we("getOwnMetadata",function Xe(F,q,Y){if(!me(q))throw new TypeError;return C(Y)||(Y=H(Y)),Ma(F,q,Y)}),we("getMetadataKeys",function yr(F,q){if(!me(F))throw new TypeError;return C(q)||(q=H(q)),Cr(F,q)}),we("getOwnMetadataKeys",function Et(F,q){if(!me(F))throw new TypeError;return C(q)||(q=H(q)),It(F,q)}),we("deleteMetadata",function nr(F,q,Y){if(!me(q))throw new TypeError;C(Y)||(Y=H(Y));var dt=ne(q,Y,!1);if(C(dt)||!dt.delete(F))return!1;if(dt.size>0)return!0;var ft=$t.get(q);return ft.delete(Y),ft.size>0||$t.delete(q),!0})}(Qn)}()})(Reflect||(Reflect={})),function(){"use strict";var Da=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},we=function(t){return{eq:t}},Xn=we(function(t,e){return t===e}),Qn=function(t){return we(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},qr=function(t){return we(function(e,n){var l,c,u,r=Object.keys(e),o=Object.keys(n);if(!(l=Xn,c=Qn(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},we(function(m,p){return c.eq(u(m),u(p))})).eq(r,o))return!1;for(var a=r.length,s=0;s<a;s++){var i=r[s];if(!t.eq(e[i],n[i]))return!1}return!0})},bn=we(function(t,e){if(t===e)return!0;var n=Da(t);return n===Da(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Qn(bn).eq(t,e):"object"===n&&qr(bn).eq(t,e))});const Wr=Object.getPrototypeOf,Jn=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Zn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Jn(n,String,(o,a)=>a.isPrototypeOf(o))?"string":r})(e)===t,tr=t=>e=>typeof e===t,Pa=t=>e=>t===e,vr=(t,e)=>he(t)&&Jn(t,e,(n,r)=>Wr(n)===r),ut=Zn("string"),he=Zn("object"),oi=t=>vr(t,Object),$t=Zn("array"),Ne=Pa(null),er=tr("boolean"),ae=Pa(void 0),Gt=t=>null==t,X=t=>!Gt(t),Rt=tr("function"),Xe=tr("number"),yr=(t,e)=>{if($t(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},Et=()=>{},nr=(t,e)=>(...n)=>t(e.apply(null,n)),ai=(t,e)=>n=>t(e(n)),J=t=>()=>t,ne=t=>t,si=(t,e)=>t===e;function at(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const Kr=t=>e=>!t(e),Ma=t=>()=>{throw new Error(t)},jo=t=>t(),Cr=t=>{t()},It=J(!1),Vt=J(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return X(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const An=Array.prototype.slice,bd=Array.prototype.indexOf,me=Array.prototype.push,ii=(t,e)=>bd.call(t,e),Ot=(t,e)=>ii(t,e)>-1,qt=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},Nt=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},H=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},La=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},cn=(t,e)=>{const n=[],r=[];for(let o=0,a=t.length;o<a;o++){const s=t[o];(e(s,o)?n:r).push(s)}return{pass:n,fail:r}},bt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];e(a,r)&&n.push(a)}return n},Gr=(t,e,n)=>(La(t,(r,o)=>{n=e(n,r,o)}),n),Re=(t,e,n)=>(H(t,(r,o)=>{n=e(n,r,o)}),n),li=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const a=t[r];if(e(a,r))return C.some(a);if(n(a,r))break}return C.none()},Xt=(t,e)=>li(t,e,It),Yr=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return C.some(n);return C.none()},di=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!$t(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);me.apply(e,t[n])}return e},qe=(t,e)=>di(Nt(t,e)),On=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Xr=t=>{const e=An.call(t,0);return e.reverse(),e},zo=(t,e)=>bt(t,n=>!Ot(e,n)),Qr=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const a=t[r];n[String(a)]=e(a,r)}return n},F=(t,e)=>{const n=An.call(t,0);return n.sort(e),n},q=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Y=t=>q(t,0),dt=t=>q(t,t.length-1),ft=Rt(Array.from)?Array.from:t=>An.call(t),Qt=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return C.none()},_t=Object.keys,At=Object.hasOwnProperty,lt=(t,e)=>{const n=_t(t);for(let r=0,o=n.length;r<o;r++){const a=n[r];e(t[a],a)}},Dt=(t,e)=>Pt(t,(n,r)=>({k:r,v:e(n,r)})),Pt=(t,e)=>{const n={};return lt(t,(r,o)=>{const a=e(r,o);n[a.k]=a.v}),n},un=t=>(e,n)=>{t[n]=e},Ia=(t,e,n,r)=>{lt(t,(o,a)=>{(e(o,a)?n:r)(o,a)})},Fa=(t,e)=>{const n={};return Ia(t,e,un(n),Et),n},vd=(t,e)=>{const n=[];return lt(t,(r,o)=>{n.push(e(r,o))}),n},yd=t=>vd(t,ne),jt=(t,e)=>kt(t,e)?C.from(t[e]):C.none(),kt=(t,e)=>At.call(t,e),Ho=(t,e)=>kt(t,e)&&null!=t[e],If=t=>{const e={};return H(t,n=>{e[n]={}}),_t(e)},Ff=t=>void 0!==t.length,Cd=Array.isArray,ci=(t,e,n)=>{if(!t)return!1;if(n=n||t,Ff(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(kt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},wd=(t,e)=>{const n=[];return ci(t,(r,o)=>{n.push(e(r,o,t))}),n},Ua=(t,e)=>{const n=[];return ci(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},ui=(t,e,n,r)=>{let o=ae(n)?t[0]:n;for(let a=0;a<t.length;a++)o=e.call(r,o,t[a],a);return o},Uf=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Jr=t=>t[t.length-1],Zr=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},jf=()=>xd(0,0),xd=(t,e)=>({major:t,minor:e}),ja={nu:xd,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?jf():((r,o)=>{const a=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(r,o);if(!a)return{major:0,minor:0};const s=i=>Number(o.replace(a,"$"+i));return xd(s(1),s(2))})(t,n)},unknown:jf},zf=(t,e)=>{const n=String(e).toLowerCase();return Xt(t,r=>r.search(n))},Hf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,$f=(t,e)=>be(t,e)?t.substring(e.length):t,xe=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!ae(r)||o+e.length<=r)},be=(t,e)=>Hf(t,e,0),kd=(t,e)=>Hf(t,e,t.length-e.length),_d=t=>e=>e.replace(t,""),$o=_d(/^\s+|\s+$/g),bk=_d(/^\s+/g),Vf=_d(/\s+$/g),Tn=t=>t.length>0,za=t=>!Tn(t),mi=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},Ed=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rr=t=>e=>xe(e,t),vk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>xe(t,"edge/")&&xe(t,"chrome")&&xe(t,"safari")&&xe(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ed],search:t=>xe(t,"chrome")&&!xe(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>xe(t,"msie")||xe(t,"trident")},{name:"Opera",versionRegexes:[Ed,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rr("firefox")},{name:"Safari",versionRegexes:[Ed,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(xe(t,"safari")||xe(t,"mobile/"))&&xe(t,"applewebkit")}],yk=[{name:"Windows",search:rr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>xe(t,"iphone")||xe(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rr("linux"),versionRegexes:[]},{name:"Solaris",search:rr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],qf={browsers:J(vk),oses:J(yk)},Kf="Chromium",Yf="Firefox",Qf=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(Kf),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Yf),isSafari:r("Safari")}},Ck=()=>Qf({current:void 0,version:ja.unknown()}),wk=Qf,Jf=(J("Edge"),J(Kf),J("IE"),J("Opera"),J(Yf),J("Safari"),"Windows"),Zf="Android",ng="Solaris",rg="FreeBSD",og="ChromeOS",ag=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(Jf),isiOS:r("iOS"),isAndroid:r(Zf),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(ng),isFreeBSD:r(rg),isChromeOS:r(og)}},xk=()=>ag({current:void 0,version:ja.unknown()}),kk=ag,_k=(J(Jf),J("iOS"),J(Zf),J("Linux"),J("macOS"),J(ng),J(rg),J(og),t=>window.matchMedia(t).matches);let Ek=Zr(()=>((t,e,n)=>{const r=qf.browsers(),o=qf.oses(),a=e.bind(l=>{return d=r,Qt(l.brands,u=>{const m=u.brand.toLowerCase();return Xt(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:ja.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return zf(r,d=t).map(c=>{const u=ja.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Ck,wk),s=(l=o,d=t,zf(l,d).map(c=>{const u=ja.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(xk,kk),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:J(m),isiPhone:J(p),isTablet:J(g),isPhone:J(b),isTouch:J(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:J(v),isDesktop:J(y)}})(s,a,t,n);var l,d;return{browser:a,os:s,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),_k));const Bn=()=>Ek(),Sk=navigator.userAgent,Sd=Bn(),Dn=Sd.browser,Pn=Sd.os,to=Sd.deviceType,Nk=-1!==Sk.indexOf("Windows Phone"),St={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Dn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Dn.isIE(),windowsPhone:Nk,browser:{current:Dn.current,version:Dn.version,isChromium:Dn.isChromium,isEdge:Dn.isEdge,isFirefox:Dn.isFirefox,isIE:Dn.isIE,isOpera:Dn.isOpera,isSafari:Dn.isSafari},os:{current:Pn.current,version:Pn.version,isAndroid:Pn.isAndroid,isChromeOS:Pn.isChromeOS,isFreeBSD:Pn.isFreeBSD,isiOS:Pn.isiOS,isLinux:Pn.isLinux,isMacOS:Pn.isMacOS,isSolaris:Pn.isSolaris,isWindows:Pn.isWindows},deviceType:{isDesktop:to.isDesktop,isiPad:to.isiPad,isiPhone:to.isiPhone,isPhone:to.isPhone,isTablet:to.isTablet,isTouch:to.isTouch,isWebView:to.isWebView}},Rk=/^\s*|\s*$/g,sg=t=>Gt(t)?"":(""+t).replace(Rk,""),ig=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),ci(t,(o,a)=>!1!==e.call(r,o,a,n)&&(ig(o,e,n,r),!0)))},W={trim:sg,isArray:Cd,is:(t,e)=>e?!("array"!==e||!Cd(t))||typeof t===e:void 0!==t,toArray:t=>{if(Cd(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=ut(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:ci,map:wd,grep:Ua,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:kt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(kt(r,o)){const a=r[o];void 0!==a&&(t[o]=a)}}return t},walk:ig,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>$t(t)?t:""===t?[]:wd(t.split(e||","),sg),_addCacheSuffix:t=>{const e=St.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Vo=(t,e,n=si)=>t.exists(r=>n(r,e)),De=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),qo=(t,e)=>t?C.some(e):C.none(),Ak=typeof window<"u"?window:Function("return this;")(),lg=(t,e)=>((n,r)=>{let o=null!=r?r:Ak;for(let a=0;a<n.length&&null!=o;++a)o=o[n[a]];return o})(t.split("."),e),Ok=Object.getPrototypeOf,Ft=t=>t.dom.nodeName.toLowerCase(),dg=t=>t.dom.nodeType,fi=t=>e=>dg(e)===t,Nd=t=>ze(t)&&(t=>{const e=lg("ownerDocument.defaultView",t);return he(t)&&((n=e,((r,o)=>{const a=lg(r,o);if(null==a)throw new Error(r+" not available on this browser");return a})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ok(t).constructor.name));var n})(t.dom),ze=fi(1),Qe=fi(3),Bk=fi(9),Dk=fi(11),Rd=t=>e=>ze(e)&&Ft(e)===t,cg=(t,e,n)=>{if(!(ut(n)||er(n)||Xe(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},fe=(t,e,n)=>{cg(t.dom,e,n)},wr=(t,e)=>{const n=t.dom;lt(e,(r,o)=>{cg(n,o,r)})},Je=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},or=(t,e)=>C.from(Je(t,e)),gi=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ve=(t,e)=>{t.dom.removeAttribute(e)},ug=t=>Re(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Ad=(t,e)=>{const n=Je(t,e);return void 0===n||""===n?[]:n.split(" ")},Ha=t=>void 0!==t.dom.classList,mg=t=>Ad(t,"class"),fg=(t,e)=>((n,r,o)=>{const a=Ad(n,r).concat([o]);return fe(n,r,a.join(" ")),!0})(t,"class",e),gg=(t,e)=>((n,r,o)=>{const a=bt(Ad(n,r),s=>s!==o);return a.length>0?fe(n,r,a.join(" ")):ve(n,r),!1})(t,"class",e),Wo=(t,e)=>{Ha(t)?t.dom.classList.add(e):fg(t,e)},pg=t=>{0===(Ha(t)?t.dom.classList:mg(t)).length&&ve(t,"class")},Ko=(t,e)=>{Ha(t)?t.dom.classList.remove(e):gg(t,e),pg(t)},Od=(t,e)=>Ha(t)&&t.dom.classList.contains(e),$a=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Va=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return $a(n.childNodes[0])},ge=(t,e)=>{const n=(e||document).createElement(t);return $a(n)},Go=(t,e)=>{const n=(e||document).createTextNode(t);return $a(n)},E=$a,hg=(t,e)=>{const n=[],r=a=>(n.push(a),e(a));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},vn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},bg=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Tt=(t,e)=>t.dom===e.dom,ar=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},vg=t=>E(t.dom.ownerDocument),sr=t=>Bk(t)?t:vg(t),qa=t=>E(sr(t).dom.defaultView),mn=t=>C.from(t.dom.parentNode).map(E),Td=t=>C.from(t.dom.parentElement).map(E),yg=(t,e)=>{const n=Rt(e)?e:It;let r=t.dom;const o=[];for(;null!=r.parentNode;){const a=r.parentNode,s=E(a);if(o.push(s),!0===n(s))break;r=a}return o},eo=t=>C.from(t.dom.previousSibling).map(E),Wa=t=>C.from(t.dom.nextSibling).map(E),Cg=t=>Xr(hg(t,eo)),wg=t=>hg(t,Wa),ye=t=>Nt(t.dom.childNodes,E),Yo=(t,e)=>C.from(t.dom.childNodes[e]).map(E),Bd=t=>Yo(t,0),Dd=t=>Yo(t,t.dom.childNodes.length-1),Pd=t=>t.dom.childNodes.length,Md=t=>Dk(t)&&X(t.dom.host),xg=Rt(Element.prototype.attachShadow)&&Rt(Node.prototype.getRootNode),Mk=J(xg),xr=xg?t=>E(t.dom.getRootNode()):sr,Ld=t=>Md(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return E(n)})(sr(t)),Lk=t=>E(t.dom.host),kg=t=>{if(Mk()&&X(t.target)){const e=E(t.target);if(ze(e)&&Ik(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Y(n)}}return C.from(t.target)},Ik=t=>X(t.dom.shadowRoot),Xo=t=>{const e=Qe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=xr(r);return Md(o)?C.some(o):C.none()})(E(e)).fold(()=>n.body.contains(e),ai(Xo,Lk))};var _g=(t,e,n,r,o)=>t(n,r)?C.some(n):Rt(o)&&o(n)?C.none():e(n,r,o);const ir=(t,e,n)=>{let r=t.dom;const o=Rt(n)?n:It;for(;r.parentNode;){r=r.parentNode;const a=E(r);if(e(a))return C.some(a);if(o(a))break}return C.none()},no=(t,e,n)=>_g((r,o)=>o(r),ir,t,e,n),Ka=(t,e,n)=>ir(t,r=>vn(r,e),n),Ga=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return bg(o)?C.none():C.from(o.querySelector(n)).map(E)})(e,t),ro=(t,e,n)=>_g((r,o)=>vn(r,o),Ka,t,e,n),Qo=(t,e=!1)=>{return Xo(t)?t.dom.isContentEditable:(n=t,ro(n,"[contenteditable]")).fold(J(e),r=>"true"===Fk(r));var n},Fk=t=>t.dom.contentEditable,Ya=t=>void 0!==t.style&&Rt(t.style.getPropertyValue),Eg=(t,e,n)=>{if(!ut(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ya(t)&&t.style.setProperty(e,n)},Sg=(t,e,n)=>{Eg(t.dom,e,n)},pi=(t,e)=>{const n=t.dom;lt(e,(r,o)=>{Eg(n,o,r)})},Mn=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||Xo(t)?r:Ng(n,e)},Ng=(t,e)=>Ya(t)?t.style.getPropertyValue(e):"",hi=(t,e)=>{const r=Ng(t.dom,e);return C.from(r).filter(o=>o.length>0)},Rg=t=>{const e={},n=t.dom;if(Ya(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},Ag=(t,e)=>{var n,r;r=e,Ya(n=t.dom)&&n.style.removeProperty(r),Vo(or(t,"style").map($o),"")&&ve(t,"style")},We=(t,e)=>{mn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},kr=(t,e)=>{Wa(t).fold(()=>{mn(t).each(n=>{Jt(n,e)})},n=>{We(n,e)})},Og=(t,e)=>{Bd(t).fold(()=>{Jt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Jt=(t,e)=>{t.dom.appendChild(e.dom)},Tg=(t,e)=>{We(t,e),Jt(e,t)},oo=(t,e)=>{H(e,n=>{Jt(t,n)})},Jo=t=>{t.dom.textContent="",H(ye(t),e=>{zt(e)})},zt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},lr=t=>{const e=ye(t);var n,r;e.length>0&&(n=t,H(r=e,(o,a)=>{kr(0===a?n:r[a-1],o)})),zt(t)},Id=t=>Nt(t,E),Bg=t=>t.dom.innerHTML,bi=(t,e)=>{const n=vg(t).dom,r=E(n.createDocumentFragment()),o=((a,s)=>{const i=(s||document).createElement("div");return i.innerHTML=a,ye(E(i))})(e,n);oo(r,o),Jo(t),Jt(t,r)},jk=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Dg=(t,e)=>({left:t,top:e,translate:(n,r)=>Dg(t+n,e+r)}),Zo=Dg,vi=(t,e)=>void 0!==t?t:void 0!==e?e:0,Fd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Zo(n.offsetLeft,n.offsetTop):Xo(t)?(r=>{const o=r.getBoundingClientRect();return Zo(o.left,o.top)})(e):Zo(0,0)},Ud=t=>{const e=void 0!==t?t.dom:document;return Zo(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Pg=(t,e)=>{Bn().browser.isSafari()&&Rt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Mg=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Lg=t=>{const e=void 0===t?window:t,r=Ud(E(e.document));return(o=>{const a=void 0===o?window:o;return Bn().browser.isFirefox()?C.none():C.from(a.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return Mg(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Mg(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Ig=(t,e)=>{let n=[];return H(ye(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(Ig(r,e))}),n},ke=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return bg(o)?[]:Nt(o.querySelectorAll(n),E)})(e,t),Fg=(t,e,n)=>Ka(t,e,n).isSome();class re{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let a=e[r];if(a)return a;for(let s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(a=s[r],a)return a}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let a=r.lastChild;a;a=a.lastChild)if(!a.lastChild)return a;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const ao=t=>e=>!!e&&e.nodeType===t,yi=t=>!!t&&!Object.getPrototypeOf(t),nt=ao(1),Xa=t=>{const e=t.toLowerCase();return n=>X(n)&&n.nodeName.toLowerCase()===e},yn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Ot(e,r)}return!1}},Ci=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(nt(r)){const o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){const s=o.getComputedStyle(r,null);if((s?s.getPropertyValue(t):null)===n[a])return!0}}return!1}},Ug=t=>e=>nt(e)&&e.hasAttribute(t),so=t=>nt(t)&&t.hasAttribute("data-mce-bogus"),dr=t=>nt(t)&&"TABLE"===t.tagName,jg=t=>e=>!(!nt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),jd=yn(["textarea","input"]),V=ao(3),zk=ao(4),Hk=ao(7),_r=ao(8),Qa=ao(9),zd=ao(11),Wt=Xa("br"),zg=Xa("img"),Cn=jg("true"),Ut=jg("false"),wi=yn(["td","th"]),$k=yn(["td","th","caption"]),Ln=yn(["video","audio","object","embed"]),Vk=Xa("li"),Hg=Xa("details"),qk=Xa("summary"),se="\xa0",Hd=t=>"\ufeff"===t,$d=((t,e)=>{const n=r=>t(r)?C.from(r.dom.nodeValue):C.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Qe),xi=t=>$d.get(t),$g=t=>$d.getOption(t),Wk=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),Er=t=>{let e;return n=>(e=e||Qr(t,Vt),kt(e,Ft(n)))},Ze=Er(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),ki=t=>ze(t)&&!Ze(t),io=t=>ze(t)&&"br"===Ft(t),Vg=Er(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Vd=Er(["ul","ol","dl"]),Ja=Er(["li","dd","dt"]),Kk=Er(["thead","tbody","tfoot"]),Za=Er(["td","th"]),_i=Er(["pre","script","textarea","style"]),Gk=Er(Wk),Yk=t=>Gk(t)||ki(t),Ei=()=>{const t=ge("br");return fe(t,"data-mce-bogus","1"),t},Sr=t=>{Jo(t),Jt(t,Ei())},Xk=t=>{Dd(t).each(e=>{eo(e).each(n=>{Ze(t)&&io(e)&&Ze(n)&&zt(e)})})},_e="\ufeff",Si=Hd,cr=t=>t.replace(/\uFEFF/g,""),Qk=nt,ea=V,na=t=>(ea(t)&&(t=t.parentNode),Qk(t)&&t.hasAttribute("data-mce-caret")),Nr=t=>ea(t)&&Si(t.data),tn=t=>na(t)||Nr(t),qg=t=>t.firstChild!==t.lastChild||!Wt(t.firstChild),qd=t=>{const e=t.container();return!!V(e)&&(e.data.charAt(t.offset())===_e||t.isAtStart()&&Nr(e.previousSibling))},Wd=t=>{const e=t.container();return!!V(e)&&(e.data.charAt(t.offset()-1)===_e||t.isAtEnd()&&Nr(e.nextSibling))},Ni=t=>ea(t)&&t.data[0]===_e,Ri=t=>ea(t)&&t.data[t.data.length-1]===_e,Kd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];so(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Wg=t=>na(t.startContainer),Kg=Cn,Jk=Ut,Zk=Wt,t_=V,e_=yn(["script","style","textarea"]),Gg=yn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),n_=yn(["table"]),r_=tn,fn=t=>!r_(t)&&(t_(t)?!e_(t.parentNode):Gg(t)||Zk(t)||n_(t)||Gd(t)),Gd=t=>{return!(nt(e=t)&&"true"===e.getAttribute("unselectable"))&&Jk(t);var e},Yg=(t,e)=>fn(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(Gd(o))return!1;if(Kg(o))return!0}return!0})(t,e),o_=/^[ \t\r\n]*$/,lo=t=>o_.test(t),a_=t=>{for(const e of t)if(!Hd(e))return!1;return!0},Xg=t=>"\n"===t||"\r"===t,Qg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),a=t.replace(/\t/g,o);var l;return Re(a,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===se?i.pcIsSpace||""===i.str&&n||i.str.length===a.length-1&&r||(c=i.str.length+1)<(d=a).length&&c>=0&&Xg(d[c])?{pcIsSpace:!1,str:i.str+se}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Xg(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},Ai=(t,e)=>{return fn(t)&&(r=e,!(V(n=t)&&lo(n.data)&&!((o,a)=>{const s=E(a),i=E(o);return Fg(i,"pre,code",at(Tt,s))})(n,r)))||(n=>nt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||s_(t);var n,r},s_=Ug("data-mce-bookmark"),i_=Ug("data-mce-bogus"),l_=t=>nt(t)&&"all"===t.getAttribute("data-mce-bogus"),Zt=(t,e=!0)=>((n,r)=>{let o=0;if(Ai(n,n))return!1;{let a=n.firstChild;if(!a)return!0;const s=new re(a,n);do{if(r){if(l_(a)){a=s.next(!0);continue}if(i_(a)){a=s.next();continue}}if(Wt(a))o++,a=s.next();else{if(Ai(a,n))return!1;a=s.next()}}while(a);return o<=1}})(t.dom,e),ts="data-mce-block",Yd=t=>{return(e=t,bt(_t(e),n=>!/[A-Z]/.test(n))).join(",");var e},Jg=(t,e)=>X(e.querySelector(t))?(e.setAttribute(ts,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(ts),!1),Zg=(t,e)=>{const n=Yd(t.getTransparentElements()),r=Yd(t.getBlockElements());return bt(e.querySelectorAll(n),o=>Jg(r,o))},tp=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if(Zt(E(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},Xd=(t,e)=>{const n=Zg(t,e);var r,o,a;((t,e,n)=>{const r=t.getBlockElements(),o=E(e),a=i=>Ft(i)in r,s=i=>Tt(i,o);H(Id(n),i=>{ir(i,a,s).each(l=>{const d=bt(ye(i),m=>a(m)&&!t.isValidChild(Ft(l),Ft(m)));if(d.length>0){const c=Td(l);H(d,u=>{ir(u,a,s).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();tp(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();tp(v,!1),Zt(E(b))||g.insertBefore(b,p),Zt(E(f))||g.insertBefore(f,p),Zt(E(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>Zg(t,u.dom))}})})})(t,e,n),r=t,o=e,a=n,H([...a,...co(r,o)?[o]:[]],s=>H(ke(E(s),s.nodeName.toLowerCase()),i=>{u_(r,i.dom)&&lr(i)}))},c_=(t,e)=>{if(Jd(t,e)){const n=Yd(t.getBlockElements());Jg(n,e)}},Qd=t=>t.hasAttribute(ts),Oi=(t,e)=>kt(t.getTransparentElements(),e),Jd=(t,e)=>nt(e)&&Oi(t,e.nodeName),co=(t,e)=>Jd(t,e)&&Qd(e),u_=(t,e)=>Jd(t,e)&&!Qd(e),ep=(t,e)=>1===e.type&&Oi(t,e.name)&&ut(e.attr(ts)),m_=Bn().browser,np=t=>Xt(t,ze),rp=(t,e)=>t.children&&Ot(t.children,e),op=(t,e={})=>{let n=0;const r={},o=E(t),a=sr(o),s=l=>new Promise((d,c)=>{let u;const m=W._addCacheSuffix(l),p=jt(r,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[m]=p,p.count++;const f=(y,w)=>{H(y,Cr),p.status=w,p.passed=[],p.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},h=()=>f(p.passed,2),g=()=>f(p.failed,3);if(d&&p.passed.push(d),c&&p.failed.push(c),1===p.status)return;if(2===p.status)return void h();if(3===p.status)return void g();p.status=1;const b=ge("link",a.dom);var v;wr(b,{rel:"stylesheet",type:"text/css",id:p.id}),e.contentCssCors&&fe(b,"crossOrigin","anonymous"),e.referrerPolicy&&fe(b,"referrerpolicy",e.referrerPolicy),u=b.dom,u.onload=h,u.onerror=g,v=b,Jt(Ld(o),v),fe(b,"href",m)}),i=l=>{const d=W._addCacheSuffix(l);jt(r,d).each(c=>{0==--c.count&&(delete r[d],(u=>{const m=Ld(o);Ga(m,"#"+u).each(zt)})(c.id))})};return{load:s,loadAll:l=>Promise.allSettled(Nt(l,d=>s(d).then(J(d)))).then(d=>{const c=cn(d,u=>"fulfilled"===u.status);return c.fail.length>0?Promise.reject(Nt(c.fail,u=>u.reason)):Nt(c.pass,u=>u.value)}),unload:i,unloadAll:l=>{H(l,d=>{i(d)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},ap=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=xr(e).dom;return C.from(t.get(r)).getOrThunk(()=>{const o=op(r,n);return t.set(r,o),o})}}})(),sp=(t,e)=>X(t)&&(Ai(t,e)||ki(E(t))),ip=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Zd=(t,e,n)=>{var r;const o=n||e;if(nt(e)&&ip(e))return e;const a=e.childNodes;for(let s=a.length-1;s>=0;s--)Zd(t,a[s],o);if(nt(e)){const s=e.childNodes;1===s.length&&ip(s[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(s[0],e))}return zd(s=e)||Qa(s)||Ai(e,o)||(s=>!!nt(s)&&s.childNodes.length>0)(e)||((s,i)=>V(s)&&s.data.length>0&&((l,d)=>{const c=new re(l,d).prev(!1),u=new re(l,d).next(!1),m=ae(c)||sp(c,d),p=ae(u)||sp(u,d);return m&&p})(s,i))(e,o)||t.remove(e),e;var s},f_=W.makeMap,Ti=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g_=/[<>&\"\']/g,p_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,h_={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},uo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},b_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},lp=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const a=String.fromCharCode(parseInt(r[o],e));if(!uo[a]){const s="&"+r[o+1]+";";n[a]=s,n[s]=a}}return n}},tc=lp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),dp=(t,e)=>t.replace(e?Ti:Bi,n=>uo[n]||n),cp=(t,e)=>t.replace(e?Ti:Bi,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":uo[n]||"&#"+n.charCodeAt(0)+";"),ec=(t,e,n)=>{const r=n||tc;return t.replace(e?Ti:Bi,o=>uo[o]||r[o]||o)},Rr={encodeRaw:dp,encodeAllRaw:t=>(""+t).replace(g_,e=>uo[e]||e),encodeNumeric:cp,encodeNamed:ec,getEncodeFunc:(t,e)=>{const n=lp(e)||tc,r=f_(t.replace(/\+/g,","));return r.named&&r.numeric?(o,a)=>o.replace(a?Ti:Bi,s=>void 0!==uo[s]?uo[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):r.named?e?(o,a)=>ec(o,a,n):ec:r.numeric?cp:dp},decode:t=>t.replace(p_,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):h_[n]||String.fromCharCode(n):b_[e]||tc[e]||(r=>{const o=ge("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},Di={},Pi={},v_={},ra=W.makeMap,Ee=W.each,nc=W.extend,up=W.explode,y_=W.inArray,Ce=(t,e)=>(t=W.trim(t))?t.split(e||" "):[],mp=(t,e={})=>{const n=ra(t," ",ra(t.toUpperCase()," "));return nc(n,e)},fp=t=>mp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),rc=(t,e)=>{if(t){const n={};return ut(t)&&(t={"*":t}),Ee(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?ra(r,/[, ]/):up(r,/[, ]/)}),n}},Ar=(t={})=>{var e;const n={},r={};let o=[];const a={},s={},i=(j,K,st)=>{const et=t[j];if(et)return ra(et,/[, ]/,ra(et.toUpperCase(),/[, ]/));{let pt=Pi[j];return pt||(pt=mp(K,st),Pi[j]=pt),pt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(j=>{const K={};let st,et,pt,ht;const Z=(te,Ht="",Ue="")=>{const je=Ce(Ue),Nn=Ce(te);let hn=Nn.length;for(;hn--;){const pe=Ce([st,Ht].join(" "));K[Nn[hn]]={attributes:Qr(pe,()=>({})),attributesOrder:pe,children:Qr(je,J(v_))}}},xt=(te,Ht)=>{const Ue=Ce(te),je=Ce(Ht);let Nn=Ue.length;for(;Nn--;){const hn=K[Ue[Nn]];for(let pe=0,Ve=je.length;pe<Ve;pe++)hn.attributes[je[pe]]={},hn.attributesOrder.push(je[pe])}};if(Di[j])return Di[j];if(st="id accesskey class dir lang style tabindex title role",et="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",pt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==j&&(st+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",et+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",pt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==j){st+=" xml:lang";const te="acronym applet basefont big font strike tt";pt=[pt,te].join(" "),Ee(Ce(te),Ue=>{Z(Ue,"",pt)});const Ht="center dir isindex noframes";et=[et,Ht].join(" "),ht=[et,pt].join(" "),Ee(Ce(Ht),Ue=>{Z(Ue,"",ht)})}return ht=ht||[et,pt].join(" "),Z("html","manifest","head body"),Z("head","","base command link meta noscript script style title"),Z("title hr noscript br"),Z("base","href target"),Z("link","href rel media hreflang type sizes hreflang"),Z("meta","name http-equiv content charset"),Z("style","media type scoped"),Z("script","src async defer type charset"),Z("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ht),Z("dd div","",ht),Z("address dt caption","","html4"===j?pt:ht),Z("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",pt),Z("blockquote","cite",ht),Z("ol","reversed start type","li"),Z("ul","","li"),Z("li","value",ht),Z("dl","","dt dd"),Z("a","href target rel media hreflang type","html4"===j?pt:ht),Z("q","cite",pt),Z("ins del","cite datetime",ht),Z("img","src sizes srcset alt usemap ismap width height"),Z("iframe","src name width height",ht),Z("embed","src type width height"),Z("object","data type typemustmatch name usemap form width height",[ht,"param"].join(" ")),Z("param","name value"),Z("map","name",[ht,"area"].join(" ")),Z("area","alt coords shape href target rel media hreflang type"),Z("table","border","caption colgroup thead tfoot tbody tr"+("html4"===j?" col":"")),Z("colgroup","span","col"),Z("col","span"),Z("tbody thead tfoot","","tr"),Z("tr","","td th"),Z("td","colspan rowspan headers",ht),Z("th","colspan rowspan headers scope abbr",ht),Z("form","accept-charset action autocomplete enctype method name novalidate target",ht),Z("fieldset","disabled form name",[ht,"legend"].join(" ")),Z("label","form for",pt),Z("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Z("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===j?ht:pt),Z("select","disabled form multiple name required size","option optgroup"),Z("optgroup","disabled label","option"),Z("option","disabled label selected value"),Z("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Z("menu","type label",[ht,"li"].join(" ")),Z("noscript","",ht),"html4"!==j&&(Z("wbr"),Z("ruby","",[pt,"rt rp"].join(" ")),Z("figcaption","",ht),Z("mark rt rp summary bdi","",pt),Z("canvas","width height",ht),Z("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ht,"track source"].join(" ")),Z("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ht,"track source"].join(" ")),Z("picture","","img source"),Z("source","src srcset type media sizes"),Z("track","kind src srclang label default"),Z("datalist","",[pt,"option"].join(" ")),Z("article section nav aside main header footer","",ht),Z("hgroup","","h1 h2 h3 h4 h5 h6"),Z("figure","",[ht,"figcaption"].join(" ")),Z("time","datetime",pt),Z("dialog","open",ht),Z("command","type label icon disabled checked radiogroup command"),Z("output","for form name",pt),Z("progress","value max",pt),Z("meter","value min max low high optimum",pt),Z("details","open",[ht,"summary"].join(" ")),Z("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==j&&(xt("script","language xml:space"),xt("style","xml:space"),xt("object","declare classid code codebase codetype archive standby align border hspace vspace"),xt("embed","align name hspace vspace"),xt("param","valuetype type"),xt("a","charset name rev shape coords"),xt("br","clear"),xt("applet","codebase archive code object alt name width height align hspace vspace"),xt("img","name longdesc align border hspace vspace"),xt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),xt("font basefont","size color face"),xt("input","usemap align"),xt("select"),xt("textarea"),xt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),xt("ul","type compact"),xt("li","type"),xt("ol dl menu dir","compact"),xt("pre","width xml:space"),xt("hr","align noshade size width"),xt("isindex","prompt"),xt("table","summary width frame rules cellspacing cellpadding align bgcolor"),xt("col","width align char charoff valign"),xt("colgroup","width align char charoff valign"),xt("thead","align char charoff valign"),xt("tr","align char charoff valign bgcolor"),xt("th","axis align char charoff valign nowrap bgcolor width height"),xt("form","accept"),xt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),xt("tfoot","align char charoff valign"),xt("tbody","align char charoff valign"),xt("area","nohref"),xt("body","background bgcolor text link vlink alink")),"html4"!==j&&(xt("input button select textarea","autofocus"),xt("input textarea","placeholder"),xt("a","download"),xt("link script img","crossorigin"),xt("img","loading"),xt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==j&&H([K.video,K.audio],te=>{delete te.children.audio,delete te.children.video}),Ee(Ce("a form meter progress dfn"),te=>{K[te]&&delete K[te].children[te]}),delete K.caption.children.table,delete K.script,Di[j]=K,K})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=rc(t.valid_styles),u=rc(t.invalid_styles,"map"),m=rc(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",h),y=i("move_caret_before_on_enter_elements",b+" table",h),w=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),k=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),_=i("transparent_elements","a ins del canvas map");Ee("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),j=>{s[j]=new RegExp("</"+j+"[^>]*>","gi")});const T=j=>new RegExp("^"+j.replace(/([?+*])/g,".$1")+"$"),L=j=>{const K=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,st=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,et=/[*?+]/;if(j){const pt=Ce(j,",");let ht,Z;n["@"]&&(ht=n["@"].attributes,Z=n["@"].attributesOrder);for(let xt=0,te=pt.length;xt<te;xt++){let Ht=K.exec(pt[xt]);if(Ht){const Ue=Ht[1],je=Ht[2],Nn=Ht[3],hn=Ht[5],pe={},Ve=[],Kt={attributes:pe,attributesOrder:Ve};if("#"===Ue&&(Kt.paddEmpty=!0),"-"===Ue&&(Kt.removeEmpty=!0),"!"===Ht[4]&&(Kt.removeEmptyAttrs=!0),ht&&(lt(ht,(Gn,$r)=>{pe[$r]=Gn}),Z&&Ve.push(...Z)),hn){const Gn=Ce(hn,"|");for(let $r=0,gd=Gn.length;$r<gd;$r++)if(Ht=st.exec(Gn[$r]),Ht){const Yn={},ni=Ht[1],Ge=Ht[2].replace(/[\\:]:/g,":"),Vr=Ht[3],Ye=Ht[4];if("!"===ni&&(Kt.attributesRequired=Kt.attributesRequired||[],Kt.attributesRequired.push(Ge),Yn.required=!0),"-"===ni){delete pe[Ge],Ve.splice(y_(Ve,Ge),1);continue}if(Vr&&("="===Vr&&(Kt.attributesDefault=Kt.attributesDefault||[],Kt.attributesDefault.push({name:Ge,value:Ye}),Yn.defaultValue=Ye),"~"===Vr&&(Kt.attributesForced=Kt.attributesForced||[],Kt.attributesForced.push({name:Ge,value:Ye}),Yn.forcedValue=Ye),"<"===Vr&&(Yn.validValues=ra(Ye,"?"))),et.test(Ge)){const Fo=Yn;Kt.attributePatterns=Kt.attributePatterns||[],Fo.pattern=T(Ge),Kt.attributePatterns.push(Fo)}else pe[Ge]||Ve.push(Ge),pe[Ge]=Yn}}if(ht||"@"!==je||(ht=pe,Z=Ve),Nn&&(Kt.outputName=je,n[Nn]=Kt),et.test(je)){const Gn=Kt;Gn.pattern=T(je),o.push(Gn)}else n[je]=Kt}}}},P=j=>{o=[],H(_t(n),K=>{delete n[K]}),L(j),Ee(d,(K,st)=>{r[st]=K.children})},S=j=>{const K=/^(~)?(.+)$/;j&&(delete Pi.text_block_elements,delete Pi.block_elements,Ee(Ce(j,","),st=>{const et=K.exec(st);if(et){const pt="~"===et[1],ht=pt?"span":"div",Z=et[2];if(r[Z]=r[ht],a[Z]=ht,v[Z.toUpperCase()]={},v[Z]={},pt||(x[Z.toUpperCase()]={},x[Z]={}),!n[Z]){let xt=n[ht];xt=nc({},xt),delete xt.removeEmptyAttrs,delete xt.removeEmpty,n[Z]=xt}Ee(r,(xt,te)=>{xt[ht]&&(r[te]=xt=nc({},r[te]),xt[Z]=xt[ht])})}}))},O=j=>{const K=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Di[l],j&&Ee(Ce(j,","),st=>{const et=K.exec(st);if(et){const pt=et[1];let ht;ht=pt?r[et[2]]:r[et[2]]={"#comment":{}},ht=r[et[2]],Ee(Ce(et[3],"|"),Z=>{"-"===pt?delete ht[Z]:ht[Z]={}})}})},R=j=>{const K=n[j];if(K)return K;let st=o.length;for(;st--;){const et=o[st];if(et.pattern.test(j))return et}};t.valid_elements?P(t.valid_elements):(Ee(d,(j,K)=>{n[K]={attributes:j.attributes,attributesOrder:j.attributesOrder},r[K]=j.children}),Ee(Ce("strong/b em/i"),j=>{const K=Ce(j,"/");n[K[1]].outputName=K[0]}),Ee(k,(j,K)=>{n[K]&&(t.padd_empty_block_inline_children&&(n[K].paddInEmptyBlock=!0),n[K].removeEmpty=!0)}),Ee(Ce("ol ul blockquote a table tbody"),j=>{n[j]&&(n[j].removeEmpty=!0)}),Ee(Ce("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),j=>{n[j]&&(n[j].paddEmpty=!0)}),Ee(Ce("span"),j=>{n[j].removeEmptyAttrs=!0})),S(t.custom_elements),O(t.valid_children),L(t.extended_valid_elements),O("+ol[ul|ol],+ul[ul|ol]"),Ee({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(j,K)=>{n[K]&&(n[K].parentsRequired=Ce(j))}),t.invalid_elements&&Ee(up(t.invalid_elements),j=>{n[j]&&delete n[j]}),R("span")||L("span[!data-mce-type|*]");const B=J(c),G=J(u),$=J(m),ct=J(g),Q=J(x),vt=J(w),Ct=J(k),tt=J(Object.seal(h)),it=J(f),gt=J(v),N=J(y),A=J(p),I=J(_),z=J(Object.seal(s)),U=J(a);return{type:l,children:r,elements:n,getValidStyles:B,getValidClasses:$,getBlockElements:Q,getInvalidStyles:G,getVoidElements:tt,getTextBlockElements:vt,getTextInlineElements:Ct,getBoolAttrs:ct,getElementRule:R,getSelfClosingElements:it,getNonEmptyElements:gt,getMoveCaretBeforeOnEnterElements:N,getWhitespaceElements:A,getTransparentElements:I,getSpecialElements:z,isValidChild:(j,K)=>{const st=r[j.toLowerCase()];return!(!st||!st[K.toLowerCase()])},isValid:(j,K)=>{const st=R(j);if(st){if(!K)return!0;{if(st.attributes[K])return!0;const et=st.attributePatterns;if(et){let pt=et.length;for(;pt--;)if(et[pt].pattern.test(K))return!0}}}return!1},getCustomElements:U,addValidElements:L,setValidElements:P,addCustomElements:S,addValidChildren:O}},oc=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,a={};let s,i;e&&(s=e.getValidStyles(),i=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)a[d[u]]="\ufeff"+u,a["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(P,S,O)=>{const R=m[P+"-top"+S];if(!R)return;const B=m[P+"-right"+S];if(!B)return;const G=m[P+"-bottom"+S];if(!G)return;const $=m[P+"-left"+S];if(!$)return;const ct=[R,B,G,$];let Q=ct.length-1;for(;Q--&&ct[Q]===ct[Q+1];);Q>-1&&O||(m[P+S]=-1===Q?ct[0]:ct.join(" "),delete m[P+"-top"+S],delete m[P+"-right"+S],delete m[P+"-bottom"+S],delete m[P+"-left"+S])},b=P=>{const S=m[P];if(!S)return;const O=S.split(" ");let R=O.length;for(;R--;)if(O[R]!==O[0])return!1;return m[P]=O[0],!0},v=P=>(p=!0,a[P]),y=(P,S)=>(p&&(P=P.replace(/\uFEFF[0-9]/g,O=>a[O])),S||(P=P.replace(/\\([\'\";:])/g,"$1")),P),w=P=>String.fromCharCode(parseInt(P.slice(1),16)),x=P=>P.replace(/\\[0-9a-f]+/gi,w),k=(P,S,O,R,B,G)=>{if(B=B||G)return"'"+(B=y(B)).replace(/\'/g,"\\'")+"'";if(S=y(S||O||R||""),!t.allow_script_urls){const $=S.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test($)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test($))return""}return f&&(S=f.call(h,S,"style")),"url('"+S.replace(/\'/g,"\\'")+"')"};if(u){let P;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,S=>S.replace(/[;:]/g,v));P=r.exec(u);){r.lastIndex=P.index+P[0].length;let S=P[1].replace(o,"").toLowerCase(),O=P[2].replace(o,"");if(S&&O){if(S=x(S),O=x(O),-1!==S.indexOf("\ufeff")||-1!==S.indexOf('"')||!t.allow_script_urls&&("behavior"===S||/expression\s*\(|\/\*|\*\//.test(O)))continue;"font-weight"===S&&"700"===O?O="bold":"color"!==S&&"background-color"!==S||(O=O.toLowerCase()),O=O.replace(n,k),m[S]=p?y(O,!0):O}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),T="border-style",L="border-color",b(_="border-width")&&b(T)&&b(L)&&(m.border=m[_]+" "+m[T]+" "+m[L],delete m[_],delete m[T],delete m[L]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var _,T,L;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const w=b[v],x=u[w];x&&(p+=(p.length>0?" ":"")+w+": "+x+";")}};return m&&s?(f("*",s),f(m,s)):lt(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},C_={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gp=(t,e)=>{const n=null!=e?e:{};for(const r in t)kt(C_,r)||(n[r]=t[r]);return X(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},ac=(t,e,n,r)=>{var o;const a=gp(e,r);return a.type=t,Gt(a.target)&&(a.target=null!==(o=a.srcElement)&&void 0!==o?o:n),(Gt((s=e).preventDefault)||(i=s)instanceof Event||Rt(i.initEvent))&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=Vt,Rt(e.preventDefault)&&e.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=Vt,Rt(e.stopPropagation)&&e.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=Vt,a.stopPropagation()},(s=>s.isDefaultPrevented===Vt||s.isDefaultPrevented===It)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?Vt:It,a.isPropagationStopped=!0===a.cancelBubble?Vt:It,a.isImmediatePropagationStopped=It)),a;var s,i},w_=/^(?:mouse|contextmenu)|click/,sc=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},Mi=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},es=(t,e)=>{const n=ac(t.type,t,document,e);if(X(r=t)&&w_.test(r.type)&&ae(t.pageX)&&!ae(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,a=r.body,s=n;s.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),s.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}var r;return n},x_=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const a=()=>{Mi(t,"DOMContentLoaded",a),Mi(t,"load",a),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?a():sc(t,"DOMContentLoaded",a),n.domLoaded||sc(t,"load",a)};class mo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const a=this;let s;const i=window,l=m=>{a.executeHandlers(es(m||i.event),d)};if(!e||V(e)||_r(e))return r;let d;e[a.expando]?d=e[a.expando]:(d=a.count++,e[a.expando]=d,a.events[d]={}),o=o||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),a.domLoaded&&"ready"===m&&"complete"===e.readyState?r.call(o,es({type:m})):(a.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=es(g||i.event);b.type="focus"===b.type?"focusin":"focusout",a.executeHandlers(b,d)}),s=a.events[d][m],s?"ready"===m&&a.domLoaded?r(es({type:m})):s.push({func:r,scope:o}):(a.events[d][m]=s=[{func:r,scope:o}],s.fakeName=h,s.capture=f,s.nativeHandler=p,"ready"===m?x_(e,p,a):sc(e,h||m,p,f)))}return e=s=null,r}unbind(e,n,r){if(!e||V(e)||_r(e))return this;const o=e[this.expando];if(o){let a=this.events[o];if(n){const s=n.split(" ");let i=s.length;for(;i--;){const l=s[i],d=a[l];if(d){if(r){let c=d.length;for(;c--;)if(d[c].func===r){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,a[l]=f}}r&&0!==d.length||(delete a[l],Mi(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else lt(a,(s,i)=>{Mi(e,s.fakeName||i,s.nativeHandler,s.capture)}),a={};for(const s in a)if(kt(a,s))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||V(e)||_r(e))return this;const o=es({type:n,target:e},r);do{const a=e[this.expando];a&&this.executeHandlers(o,a),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||V(e)||_r(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let a=0,s=o.length;a<s;a++){const i=o[a];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}mo.Event=new mo;const ic=W.each,k_=W.grep,lc="data-mce-style",__=W.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ns=(t,e,n)=>{Gt(n)||""===n?ve(t,e):fe(t,e,n)},pp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),oa=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const a=o.nodeType;(!e||!V(o)||a!==r&&o.data.length)&&(n++,r=a)}return n},hp=(t,e)=>{const n=Je(e,"style"),r=t.serialize(t.parse(n),Ft(e));ns(e,lc,r)},bp=(t,e,n)=>{const r=pp(e);var o,a;Gt(n)||""===n?Ag(t,r):Sg(t,r,(a=r,Xe(o=n)?kt(__,a)?o+"":o+"px":o))},Mt=(t,e={})=>{const n={},r=window,o={};let a=0;const s=ap.forElement(E(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Ar({}),d=oc({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new mo:mo.Event,u=l.getBlockElements(),m=N=>N&&t&&ut(N)?t.getElementById(N):N,p=N=>{const A=m(N);return X(A)?E(A):null},f=(N,A,I="")=>{let z;const U=p(N);if(X(U)&&ze(U)){const j=gt[A];z=j&&j.get?j.get(U.dom,A):Je(U,A)}return X(z)?z:I},h=N=>{const A=m(N);return Gt(A)?[]:A.attributes},g=(N,A,I)=>{T(N,z=>{if(nt(z)){const U=E(z),j=""===I?null:I,K=Je(U,A),st=gt[A];st&&st.set?st.set(U.dom,j,A):ns(U,A,j),K!==j&&e.onSetAttrib&&e.onSetAttrib({attrElm:U.dom,attrName:A,attrValue:j})}})},b=()=>e.root_element||t.body,v=(N,A)=>((I,z,U)=>{let j=0,K=0;const st=I.ownerDocument;if(U=U||I,z){if(U===I&&z.getBoundingClientRect&&"static"===Mn(E(I),"position")){const pt=z.getBoundingClientRect();return j=pt.left+(st.documentElement.scrollLeft||I.scrollLeft)-st.documentElement.clientLeft,K=pt.top+(st.documentElement.scrollTop||I.scrollTop)-st.documentElement.clientTop,{x:j,y:K}}let et=z;for(;et&&et!==U&&et.nodeType&&!rp(et,U);)j+=et.offsetLeft||0,K+=et.offsetTop||0,et=et.offsetParent;for(et=z.parentNode;et&&et!==U&&et.nodeType&&!rp(et,U);)j-=et.scrollLeft||0,K-=et.scrollTop||0,et=et.parentNode;K+=(pt=E(z),m_.isFirefox()&&"table"===Ft(pt)?np(ye(pt)).filter(ht=>"caption"===Ft(ht)).bind(ht=>np(wg(ht)).map(Z=>Z.dom.offsetTop<=ht.dom.offsetTop?-ht.dom.offsetHeight:0)).getOr(0):0)}var pt;return{x:j,y:K}})(t.body,m(N),A),y=(N,A,I)=>{const z=m(N);if(!Gt(z)&&nt(z))return I?Mn(E(z),pp(A)):("float"===(A=A.replace(/-(\D)/g,(U,j)=>j.toUpperCase()))&&(A="cssFloat"),z.style?z.style[A]:void 0)},w=N=>{const A=m(N);if(!A)return{w:0,h:0};let I=y(A,"width"),z=y(A,"height");return I&&-1!==I.indexOf("px")||(I="0"),z&&-1!==z.indexOf("px")||(z="0"),{w:parseInt(I,10)||A.offsetWidth||A.clientWidth,h:parseInt(z,10)||A.offsetHeight||A.clientHeight}},x=(N,A)=>{if(!N)return!1;const I=$t(N)?N:[N];return qt(I,z=>vn(E(z),A))},k=(N,A,I,z)=>{const U=[];let j=m(N);z=void 0===z;const K=I||("BODY"!==b().nodeName?b().parentNode:null);if(ut(A))if("*"===A)A=nt;else{const st=A;A=et=>x(et,st)}for(;j&&!(j===K||Gt(j.nodeType)||Qa(j)||zd(j));){if(!A||A(j)){if(!z)return[j];U.push(j)}j=j.parentNode}return z?U:null},_=(N,A,I)=>{let z=A;if(N){ut(A)&&(z=U=>x(U,A));for(let U=N[I];U;U=U[I])if(Rt(z)&&z(U))return U}return null},T=function(N,A,I){const z=null!=I?I:this;if($t(N)){const U=[];return ic(N,(j,K)=>{const st=m(j);st&&U.push(A.call(z,st,K))}),U}{const U=m(N);return!!U&&A.call(z,U)}},L=(N,A)=>{T(N,I=>{lt(A,(z,U)=>{g(I,U,z)})})},P=(N,A)=>{T(N,I=>{const z=E(I);bi(z,A)})},S=(N,A,I,z,U)=>T(N,j=>{const K=ut(A)?t.createElement(A):A;return X(I)&&L(K,I),z&&(!ut(z)&&z.nodeType?K.appendChild(z):ut(z)&&P(K,z)),U?K:j.appendChild(K)}),O=(N,A,I)=>S(t.createElement(N),N,A,I,!0),R=Rr.encodeAllRaw,B=(N,A)=>T(N,I=>{const z=E(I);return A&&H(ye(z),U=>{Qe(U)&&0===U.dom.length?zt(U):We(z,U)}),zt(z),z.dom}),G=(N,A,I)=>{T(N,z=>{if(nt(z)){const U=E(z),j=A.split(" ");H(j,K=>{var st,et,ht,Z;X(I)?(I?Wo:Ko)(U,K):(et=K,Ha(st=U)?st.dom.classList.toggle(et):(Z=et,Ot(mg(ht=st),Z)?gg(ht,Z):fg(ht,Z)),pg(st))})}})},$=(N,A,I)=>T(A,z=>{var U;const j=$t(A)?N.cloneNode(!0):N;return I&&ic(k_(z.childNodes),K=>{j.appendChild(K)}),null===(U=z.parentNode)||void 0===U||U.replaceChild(j,z),z}),ct=N=>{if(nt(N)){const A="a"===N.nodeName.toLowerCase()&&!f(N,"href")&&f(N,"id");if(f(N,"name")||f(N,"data-mce-bookmark")||A)return!0}return!1},Q=()=>t.createRange(),vt=(N,A,I,z)=>{if($t(N)){let U=N.length;const j=[];for(;U--;)j[U]=vt(N[U],A,I,z);return j}return!e.collect||N!==t&&N!==r||i.push([N,A,I,z]),c.bind(N,A,I,z||it)},Ct=(N,A,I)=>{if($t(N)){let z=N.length;const U=[];for(;z--;)U[z]=Ct(N[z],A,I);return U}if(i.length>0&&(N===t||N===r)){let z=i.length;for(;z--;){const[U,j,K]=i[z];N!==U||A&&A!==j||I&&I!==K||c.unbind(U,j,K)}}return c.unbind(N,A,I)},tt=N=>{if(N&&nt(N)){const A=N.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==N.contentEditable?N.contentEditable:null}return null},it={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:i,styles:d,schema:l,events:c,isBlock:N=>ut(N)?kt(u,N):nt(N)&&(kt(u,N.nodeName)||co(l,N)),root:null,clone:(N,A)=>N.cloneNode(A),getRoot:b,getViewPort:N=>{const A=Lg(N);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:N=>{const A=m(N),I=v(A),z=w(A);return{x:I.x,y:I.y,w:z.w,h:z.h}},getSize:w,getParent:(N,A,I)=>{const z=k(N,A,I,!1);return z&&z.length>0?z[0]:null},getParents:k,get:m,getNext:(N,A)=>_(N,A,"nextSibling"),getPrev:(N,A)=>_(N,A,"previousSibling"),select:(N,A)=>{var I,z;const U=null!==(z=null!==(I=m(A))&&void 0!==I?I:e.root_element)&&void 0!==z?z:t;return Rt(U.querySelectorAll)?ft(U.querySelectorAll(N)):[]},is:x,add:S,create:O,createHTML:(N,A,I="")=>{let z="<"+N;for(const U in A)Ho(A,U)&&(z+=" "+U+'="'+R(A[U])+'"');return za(I)&&kt(l.getVoidElements(),N)?z+" />":z+">"+I+"</"+N+">"},createFragment:N=>{const A=t.createElement("div"),I=t.createDocumentFragment();let z;for(I.appendChild(A),N&&(A.innerHTML=N);z=A.firstChild;)I.appendChild(z);return I.removeChild(A),I},remove:B,setStyle:(N,A,I)=>{T(N,z=>{const U=E(z);bp(U,A,I),e.update_styles&&hp(d,U)})},getStyle:y,setStyles:(N,A)=>{T(N,I=>{const z=E(I);lt(A,(U,j)=>{bp(z,j,U)}),e.update_styles&&hp(d,z)})},removeAllAttribs:N=>T(N,A=>{const I=A.attributes;for(let z=I.length-1;z>=0;z--)A.removeAttributeNode(I.item(z))}),setAttrib:g,setAttribs:L,getAttrib:f,getPos:v,parseStyle:N=>d.parse(N),serializeStyle:(N,A)=>d.serialize(N,A),addStyle:N=>{if(it!==Mt.DOM&&t===document){if(n[N])return;n[N]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const I=t.head;I.firstChild?I.insertBefore(A,I.firstChild):I.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=N:A.appendChild(t.createTextNode(N))},loadCSS:N=>{N||(N=""),H(N.split(","),A=>{o[A]=!0,s.load(A).catch(Et)})},addClass:(N,A)=>{G(N,A,!0)},removeClass:(N,A)=>{G(N,A,!1)},hasClass:(N,A)=>{const I=p(N),z=A.split(" ");return X(I)&&On(z,U=>Od(I,U))},toggleClass:G,show:N=>{T(N,A=>Ag(E(A),"display"))},hide:N=>{T(N,A=>Sg(E(A),"display","none"))},isHidden:N=>{const A=p(N);return X(A)&&Vo(hi(A,"display"),"none")},uniqueId:N=>(N||"mce_")+a++,setHTML:P,getOuterHTML:N=>{const A=p(N);return X(A)?nt(A.dom)?A.dom.outerHTML:(I=>{const z=ge("div"),U=E(I.dom.cloneNode(!0));return Jt(z,U),Bg(z)})(A):""},setOuterHTML:(N,A)=>{T(N,I=>{nt(I)&&(I.outerHTML=A)})},decode:Rr.decode,encode:R,insertAfter:(N,A)=>{const I=m(A);return T(N,z=>{const U=null==I?void 0:I.parentNode,j=null==I?void 0:I.nextSibling;return U&&(j?U.insertBefore(z,j):U.appendChild(z)),z})},replace:$,rename:(N,A)=>{if(N.nodeName!==A.toUpperCase()){const I=O(A);return ic(h(N),z=>{g(I,z.nodeName,f(N,z.nodeName))}),$(I,N,!0),I}return N},findCommonAncestor:(N,A)=>{let I=N;for(;I;){let z=A;for(;z&&I!==z;)z=z.parentNode;if(I===z)break;I=I.parentNode}return!I&&N.ownerDocument?N.ownerDocument.documentElement:I},run:T,getAttribs:h,isEmpty:(N,A,I)=>{let z=0;if(ct(N))return!1;const U=N.firstChild;if(U){const j=new re(U,N),K=l?l.getWhitespaceElements():{},st=A||(l?l.getNonEmptyElements():null);let et=U;do{if(nt(et)){const pt=et.getAttribute("data-mce-bogus");if(pt){et=j.next("all"===pt);continue}const ht=et.nodeName.toLowerCase();if(st&&st[ht]){if("br"===ht){z++,et=j.next();continue}return!1}if(ct(et))return!1}if(_r(et)||V(et)&&!lo(et.data)&&(null==I||!I.includeZwsp||!a_(et.data))||V(et)&&et.parentNode&&K[et.parentNode.nodeName]&&lo(et.data))return!1;et=j.next()}while(et)}return z<=1},createRng:Q,nodeIndex:oa,split:(N,A,I)=>{let z,U,j=Q();if(N&&A&&N.parentNode&&A.parentNode){const K=N.parentNode;return j.setStart(K,oa(N)),j.setEnd(A.parentNode,oa(A)),z=j.extractContents(),j=Q(),j.setStart(A.parentNode,oa(A)+1),j.setEnd(K,oa(N)+1),U=j.extractContents(),K.insertBefore(Zd(it,z),N),K.insertBefore(I||A,N),K.insertBefore(Zd(it,U),N),B(N),I||A}},bind:vt,unbind:Ct,fire:(N,A,I)=>c.dispatch(N,A,I),dispatch:(N,A,I)=>c.dispatch(N,A,I),getContentEditable:tt,getContentEditableParent:N=>{const A=b();let I=null;for(let z=N;z&&z!==A&&(I=tt(z),null===I);z=z.parentNode);return I},isEditable:N=>{if(X(N)){const A=nt(N)?N:N.parentElement;return X(A)&&Qo(E(A))}return!1},destroy:()=>{if(i.length>0){let N=i.length;for(;N--;){const[A,I,z]=i[N];c.unbind(A,I,z)}}lt(o,(N,A)=>{s.unload(A),delete o[A]})},isChildOf:(N,A)=>N===A||A.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},gt=((N,A,I)=>{const z=A.keep_values,j={style:{set:(K,st)=>{const et=E(K);z&&ns(et,lc,st),ve(et,"style"),ut(st)&&pi(et,N.parse(st))},get:K=>{const st=E(K),et=Je(st,lc)||Je(st,"style");return N.serialize(N.parse(et),Ft(st))}}};return z&&(j.href=j.src={set:(K,st,et)=>{const pt=E(K);Rt(A.url_converter)&&X(st)&&(st=A.url_converter.call(A.url_converter_scope||I(),String(st),et,K)),ns(pt,"data-mce-"+et,st),ns(pt,et,st)},get:(K,st)=>{const et=E(K);return Je(et,"data-mce-"+st)||Je(et,st)}}),j})(d,e,J(it));return it};Mt.DOM=Mt(document),Mt.nodeIndex=oa;const E_=Mt.DOM;class ur{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=E_;let a;const s=()=>{o.remove(i),a&&(a.onerror=a.onload=a=null)},i=o.uniqueId();a=document.createElement("script"),a.id=i,a.type="text/javascript",a.src=W._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{s(),n()},a.onerror=()=>{s(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,d)=>{jt(n.scriptLoadedCallbacks,d).each(c=>{H(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},o=l=>{const d=bt(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(qe(d,({reason:c})=>$t(c)?c:[c])):Promise.resolve()},a=l=>Promise.allSettled(Nt(l,d=>2===n.states[d]?(r("resolve",d),Promise.resolve()):3===n.states[d]?(r("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,r("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],a(c).then(o)):Promise.resolve()},()=>(n.states[d]=3,r("reject",d),Promise.reject(d)))))),s=l=>(n.loading=!0,a(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(Cr),o(d)})),i=If(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(l,d)})}):s(i)}}ur.ScriptLoader=new ur;const ie=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},rs={},dc=ie("en"),vp=()=>jt(rs,dc.get()),wn={getData:()=>Dt(rs,t=>({...t})),setCode:t=>{t&&dc.set(t)},getCode:()=>dc.get(),add:(t,e)=>{let n=rs[t];n||(rs[t]=n={}),lt(e,(r,o)=>{n[o.toLowerCase()]=r})},translate:t=>{const e=vp().getOr({}),n=i=>Rt(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return jt(e,l.toLowerCase()).map(n).getOr(l)},a=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(he(s=t)&&kt(s,"raw"))return n(t.raw);var s,i;if($t(i=t)&&i.length>1){const i=t.slice(1);return a(o(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>kt(i,d)?n(i[d]):l))}return a(o(t))},isRtl:()=>vp().bind(t=>jt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>kt(rs,t)},Ae=()=>{const t=[],e={},n={},r=[],o=(l,d)=>{const c=bt(r,u=>u.name===l&&u.state===d);H(c,u=>u.resolve())},a=l=>kt(e,l),s=(l,d)=>{const c=wn.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||ur.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&kt(n,l)||"loaded"===d&&a(l)?Promise.resolve():new Promise(c=>{r.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==Ae.languageLoad&&(a(l)?s(l,d):i(l,"loaded").then(()=>s(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},o(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>ut(d)?ut(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=ut(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=Ae.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(o(l,"loaded"),Promise.resolve());return n[l]?u():ur.ScriptLoader.add(c).then(u)},waitFor:i}};Ae.languageLoad=!0,Ae.baseURL="",Ae.PluginManager=Ae(),Ae.ThemeManager=Ae(),Ae.ModelManager=Ae();const S_=t=>{const e=ie(C.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(C.some(setInterval(r,t)))}}},Or=()=>{const t=(e=>{const n=ie(C.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(C.some(o))}}})(Et);return{...t,on:e=>t.get().each(e)}},Li=(t,e)=>{let n=null;return{cancel:()=>{Ne(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Ne(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},cc=(t,e)=>{let n=null;const r=()=>{Ne(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},os=J("mce-annotation"),fo=J("data-mce-annotation"),aa=J("data-mce-annotation-uid"),as=J("data-mce-annotation-active"),ss=J("data-mce-annotation-classes"),is=J("data-mce-annotation-attrs"),yp=t=>e=>Tt(e,t),Cp=(t,e)=>{const n=t.selection.getRng(),r=E(n.startContainer),o=E(t.getBody()),a=e.fold(()=>"."+os(),i=>`[${fo()}="${i}"]`),s=Yo(r,n.startOffset).getOr(r);return ro(s,a,yp(o)).bind(i=>or(i,`${aa()}`).bind(l=>or(i,`${fo()}`).map(d=>{const c=xp(t,l);return{uid:l,name:d,elements:c}})))},wp=(t,e)=>gi(t,"data-mce-bogus")||Fg(t,'[data-mce-bogus="all"]',yp(e)),xp=(t,e)=>{const n=E(t.getBody()),r=ke(n,`[${aa()}="${e}"]`);return bt(r,o=>!wp(o,n))},kp=(t,e)=>{const n=E(t.getBody()),r=ke(n,`[${fo()}="${e}"]`),o={};return H(r,a=>{if(!wp(a,n)){const s=Je(a,aa()),i=jt(o,s).getOr([]);o[s]=i.concat([a])}}),o};let _p=0;const ls=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return _p++,t+"_"+n+_p+String(e)},Ep=(t,e)=>E(t.dom.cloneNode(e)),go=t=>Ep(t,!1),Sp=t=>Ep(t,!0),Np=(t,e)=>{const n=((o,a)=>{const s=ge(a),i=ug(o);return wr(s,i),s})(t,e);kr(t,n);const r=ye(t);return oo(n,r),zt(t),n},Rp=(t,e,n=It)=>{const r=new re(t,e),o=a=>{let s;do{s=r[a]()}while(s&&!V(s)&&!n(s));return C.from(s).filter(V)};return{current:()=>C.from(r.current()).filter(V),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},po=(t,e)=>{const n=e||(o=>t.isBlock(o)||Wt(o)||Ut(o)),r=(o,a,s,i)=>{if(V(o)){const l=i(o,a,o.data);if(-1!==l)return C.some({container:o,offset:l})}return s().bind(l=>r(l.container,l.offset,s,i))};return{backwards:(o,a,s,i)=>{const l=Rp(o,null!=i?i:t.getRoot(),n);return r(o,a,()=>l.prev().map(d=>({container:d,offset:d.length})),s).getOrNull()},forwards:(o,a,s,i)=>{const l=Rp(o,null!=i?i:t.getRoot(),n);return r(o,a,()=>l.next().map(d=>({container:d,offset:0})),s).getOrNull()}}},sa=Math.round,ho=t=>t?{left:sa(t.left),top:sa(t.top),bottom:sa(t.bottom),right:sa(t.right),width:sa(t.width),height:sa(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ap=(t,e)=>(t=ho(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Op=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,ds=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Op(e.top-t.bottom,t,e)},cs=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Op(e.bottom-t.top,t,e),Tp=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Ii=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Tr=(t,e)=>{if(nt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(s=n.length-1,Math.min(Math.max(e,0),s))]}var s;return t},N_=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Bp=t=>ut(t)&&t.charCodeAt(0)>=768&&N_.test(t),Dp=nt,R_=fn,Pp=Ci("display","block table"),A_=Ci("float","left right"),us=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Dp,R_,Kr(A_)),O_=Kr(Ci("white-space","pre pre-line pre-wrap")),ms=V,uc=Wt,Mp=Mt.nodeIndex,Fi=(t,e)=>e<0&&nt(t)&&t.hasChildNodes()?void 0:Tr(t,e),mc=t=>t?t.createRange():Mt.DOM.createRng(),fc=t=>ut(t)&&/[\r\n\t ]/.test(t),Lp=t=>!!t.setStart&&!!t.setEnd,gc=t=>{const e=t.startContainer,n=t.startOffset;if(fc(t.toString())&&O_(e.parentNode)&&V(e)){const r=e.data;if(fc(r[n-1])||fc(r[n+1]))return!0}return!1},Ip=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Br=t=>{var e;let n;const r=t.getClientRects();return n=ho(r.length>0?r[0]:t.getBoundingClientRect()),!Lp(t)&&uc(t)&&Ip(n)?(o=>{const a=o.ownerDocument,s=mc(a),i=a.createTextNode(se),l=o.parentNode;l.insertBefore(i,o),s.setStart(i,0),s.setEnd(i,1);const d=ho(s.getBoundingClientRect());return l.removeChild(i),d})(t):Ip(n)&&Lp(t)&&null!==(e=(o=>{const s=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===s&&V(s)&&0===i&&1===l){const d=o.cloneRange();return d.setEndAfter(s),Br(d)}return null})(t))&&void 0!==e?e:n},bo=(t,e)=>{const n=Ap(t,e);return n.width=1,n.right=n.left+1,n},M=(t,e,n)=>{const r=()=>(n||(n=(o=>{const a=[],s=c=>{var u,m;0!==c.height&&(a.length>0&&(u=c).left===(m=a[a.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||a.push(c))},i=(c,u)=>{const m=mc(c.ownerDocument);if(u<c.data.length){if(Bp(c.data[u]))return;if(Bp(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!gc(m)))return void s(bo(Br(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),gc(m)||s(bo(Br(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),gc(m)||s(bo(Br(m),!0)))},l=o.container(),d=o.offset();if(ms(l))return i(l,d),a;if(Dp(l))if(o.isAtEnd()){const c=Fi(l,d);ms(c)&&i(c,c.data.length),us(c)&&!uc(c)&&s(bo(Br(c),!1))}else{const c=Fi(l,d);if(ms(c)&&i(c,0),us(c)&&o.isAtEnd())return s(bo(Br(c),!1)),a;const u=Fi(o.container(),o.offset()-1);us(u)&&!uc(u)&&(Pp(u)||Pp(c)||!us(c))&&s(bo(Br(u),!1)),us(c)&&s(bo(Br(c),!0))}return a})(M(t,e))),n);return{container:J(t),offset:J(e),toRange:()=>{const o=mc(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(ms(t),0===e),isAtEnd:()=>ms(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Fi(t,o?e-1:e)}};M.fromRangeStart=t=>M(t.startContainer,t.startOffset),M.fromRangeEnd=t=>M(t.endContainer,t.endOffset),M.after=t=>M(t.parentNode,Mp(t)+1),M.before=t=>M(t.parentNode,Mp(t)),M.isAbove=(t,e)=>De(Y(e.getClientRects()),dt(t.getClientRects()),ds).getOr(!1),M.isBelow=(t,e)=>De(dt(e.getClientRects()),Y(t.getClientRects()),cs).getOr(!1),M.isAtStart=t=>!!t&&t.isAtStart(),M.isAtEnd=t=>!!t&&t.isAtEnd(),M.isTextPosition=t=>!!t&&V(t.container()),M.isElementPosition=t=>!M.isTextPosition(t);const Ui=(t,e)=>{V(e)&&0===e.data.length&&t.remove(e)},pc=(t,e,n)=>{var r,a;zd(n)?((r,o,a)=>{const s=C.from(a.firstChild),i=C.from(a.lastChild);o.insertNode(a),s.each(l=>Ui(r,l.previousSibling)),i.each(l=>Ui(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(a=n),Ui(r,a.previousSibling),Ui(r,a.nextSibling))},xn=V,Fp=so,Up=Mt.nodeIndex,jp=t=>{const e=t.parentNode;return Fp(e)?jp(e):e},hc=t=>t?ui(t.childNodes,(e,n)=>(Fp(n)&&"BR"!==n.nodeName?e=e.concat(hc(n)):e.push(n),e),[]):[],zp=t=>e=>t===e,Hp=t=>(xn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=hc(jp(e)),r=Uf(n,zp(e),e),n=n.slice(0,r+1);const o=ui(n,(a,s,i)=>(xn(s)&&xn(n[i-1])&&a++,a),0);return n=Ua(n,yn([e.nodeName])),r=Uf(n,zp(e),e),r-o})(t)+"]",$p=(t,e)=>{let n,r=[],o=e.container(),a=e.offset();if(xn(o))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&xn(d);)l+=d.data.length;return l})(o,a);else{const i=o.childNodes;a>=i.length?(n="after",a=i.length-1):n="before",o=i[a]}r.push(Hp(o));let s=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,o);return s=Ua(s,Kr(so)),r=r.concat(wd(s,i=>Hp(i))),r.reverse().join("/")+","+n},Vp=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",a=ui(r,(s,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=hc(d);return m=Ua(m,(p,f)=>!xn(p)||!xn(m[f-1])),m=Ua(m,yn([c])),m[u]})(s,l[1],parseInt(l[2],10))):null},t);if(!a)return null;if(!xn(a)&&a.parentNode){let s;return s="after"===o?Up(a)+1:Up(a),M(a.parentNode,s)}return((s,i)=>{let l=s,d=0;for(;xn(l);){const c=l.data.length;if(i>=d&&i<=d+c){s=l,i-=d;break}if(!xn(l.nextSibling)){s=l,i=c;break}d+=c,l=l.nextSibling}return xn(s)&&i>s.data.length&&(i=s.data.length),M(s,i)})(a,parseInt(o,10))},ji=Ut,qp=(t,e,n,r,o)=>{const a=o?r.startContainer:r.endContainer;let s=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(V(a))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&V(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,a,s):s);else{let d=0;const c=a.childNodes;s>=c.length&&c.length&&(d=1,s=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[s],n)+d)}for(let d=a;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},bc=(t,e,n)=>{let r=0;return W.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Wp=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(nt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},Kp=t=>(Wp(t,!0),Wp(t,!1),t),Gp=(t,e)=>{if(nt(t)&&(t=Tr(t,e),ji(t)))return t;if(tn(t)){V(t)&&na(t)&&(t=t.parentNode);let n=t.previousSibling;if(ji(n)||(n=t.nextSibling,ji(n)))return n}},Yp=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||ji(r)){const s=r.nodeName;return{name:s,index:bc(n.dom,s,r)}}const a=Gp((s=o).startContainer,s.startOffset)||Gp(s.endContainer,s.endOffset);var s;if(a){const s=a.tagName;return{name:s,index:bc(n.dom,s,a)}}return((s,i,l,d)=>{const c=i.dom,u=qp(c,s,l,d,!0),m=i.isForward(),p=Wg(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:qp(c,s,l,d,!1),forward:m,...p}})(t,n,e,o)},Xp=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Qp=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),a=t.isCollapsed(),s=t.getNode(),i=s.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:bc(n,i,s)};const d=Kp(r.cloneRange());if(!a){d.collapse(!1);const u=Xp(n,o+"_end",e);pc(n,d,u)}r=Kp(r),r.collapse(!0);const c=Xp(n,o+"_start",e);return pc(n,r,c),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},vc=at(Yp,ne,!0),Jp=t=>{const e=a=>a(t),n=J(t),r=()=>o,o={tag:!0,inner:t,fold:(a,s)=>s(t),isValue:Vt,isError:It,map:a=>Pe.value(a(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:a=>{a(t)},toOptional:()=>C.some(t)};return o},Zp=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:It,isError:Vt,map:e,mapError:r=>Pe.error(r(t)),bind:e,exists:It,forall:Vt,getOr:ne,or:ne,getOrThunk:jo,orThunk:jo,getOrDie:Ma(String(t)),each:Et,toOptional:C.none};return n},Pe={value:Jp,error:Zp,fromOption:(t,e)=>t.fold(()=>Zp(e),Jp)},In=t=>{if(!$t(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return H(t,(r,o)=>{const a=_t(r);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],i=r[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!$t(i))throw new Error("case arguments must be an array");e.push(s),n[s]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[o].apply(null,l)},match:c=>{const u=_t(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!On(e,m=>Ot(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[s].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:s,params:l})}}}}),n};In([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const T_=t=>"inline-command"===t.type||"inline-format"===t.type,B_=t=>"block-command"===t.type||"block-format"===t.type,D_=t=>{const e=r=>Pe.error({message:r,pattern:t}),n=(r,o,a)=>{if(void 0!==t.format){let s;if($t(t.format)){if(!On(t.format,ut))return e(r+" pattern has non-string items in the `format` array");s=t.format}else{if(!ut(t.format))return e(r+" pattern has non-string `format` parameter");s=[t.format]}return Pe.value(o(s))}return void 0!==t.cmd?ut(t.cmd)?Pe.value(a(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!he(t))return e("Raw pattern is not an object");if(!ut(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!ut(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",a=>({type:"inline-format",start:r,end:o,format:a}),(a,s)=>({type:"inline-command",start:r,end:o,cmd:a,value:s}))}return void 0!==t.replacement?ut(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Pe.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},th=t=>bt(t,B_),eh=t=>bt(t,T_),nh=t=>{const e=(n=>{const r=[],o=[];return H(n,a=>{a.fold(s=>{r.push(s)},s=>{o.push(s)})}),{errors:r,values:o}})(Nt(t,D_));return H(e.errors,n=>console.error(n.message,n.pattern)),e.values},yc=Bn().deviceType,P_=yc.isTouch(),M_=Mt.DOM,rh=t=>vr(t,RegExp),rt=t=>e=>e.options.get(t),Cc=t=>ut(t)||he(t),oh=(t,e="")=>n=>{const r=ut(n);if(r){if(-1!==n.indexOf("=")){const o=(a=>{const s=a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(",");return Re(s,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[$o(c)]=$o(u),i},{})})(n);return{value:jt(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},L_=rt("iframe_attrs"),I_=rt("doctype"),ah=rt("document_base_url"),F_=rt("body_id"),U_=rt("body_class"),sh=rt("content_security_policy"),j_=rt("br_in_pre"),Me=rt("forced_root_block"),fs=rt("forced_root_block_attrs"),z_=rt("newline_behavior"),H_=rt("br_newline_selector"),$_=rt("no_newline_selector"),V_=rt("keep_styles"),q_=rt("end_container_on_empty_block"),ih=rt("automatic_uploads"),lh=rt("images_reuse_filename"),W_=rt("images_replace_blob_uris"),dh=rt("icons"),K_=rt("icons_url"),G_=rt("images_upload_url"),Y_=rt("images_upload_base_path"),X_=rt("images_upload_credentials"),Q_=rt("images_upload_handler"),J_=rt("content_css_cors"),wc=rt("referrer_policy"),ch=rt("language"),Z_=rt("language_url"),uh=rt("indent_use_margin"),tE=rt("indentation"),eE=rt("content_css"),nE=rt("content_style"),mh=rt("font_css"),rE=rt("directionality"),oE=rt("inline_boundaries_selector"),fh=rt("object_resizing"),aE=rt("resize_img_proportional"),sE=rt("placeholder"),gh=rt("event_root"),iE=rt("service_message"),ia=rt("theme"),lE=rt("theme_url"),xc=rt("model"),dE=rt("model_url"),gs=rt("inline_boundaries"),cE=rt("formats"),uE=rt("preview_styles"),mE=rt("format_empty_lines"),fE=rt("format_noneditable_selector"),gE=rt("custom_ui_selector"),kc=rt("inline"),pE=rt("hidden_input"),hE=rt("submit_patch"),bE=rt("add_form_submit_trigger"),vE=rt("add_unload_trigger"),yE=rt("custom_undo_redo_levels"),CE=rt("disable_nodechange"),ph=rt("readonly"),wE=rt("editable_root"),hh=rt("content_css_cors"),zi=rt("plugins"),xE=rt("external_plugins"),kE=rt("block_unsupported_drop"),_E=rt("visual"),EE=rt("visual_table_class"),bh=rt("visual_anchor_class"),SE=rt("iframe_aria_text"),NE=rt("setup"),RE=rt("init_instance_callback"),AE=rt("urlconverter_callback"),OE=rt("auto_focus"),TE=rt("browser_spellcheck"),BE=rt("protect"),DE=rt("paste_block_drop"),Hi=rt("paste_data_images"),PE=rt("paste_preprocess"),ME=rt("paste_postprocess"),LE=rt("newdocument_content"),IE=rt("paste_webkit_styles"),FE=rt("paste_remove_styles_if_webkit"),UE=rt("paste_merge_formats"),jE=rt("smart_paste"),zE=rt("paste_as_text"),HE=rt("paste_tab_spaces"),$E=rt("allow_html_data_urls"),VE=rt("text_patterns"),qE=rt("text_patterns_lookup"),vh=rt("noneditable_class"),WE=rt("editable_class"),KE=rt("noneditable_regexp"),GE=rt("preserve_cdata"),YE=rt("highlight_on_focus"),_c=rt("xss_sanitization"),XE=rt("init_content_sync"),yh=t=>W.explode(t.options.get("images_file_types")),QE=rt("table_tab_navigation"),JE=rt("details_initial_state"),ZE=rt("details_serialized_state"),tS=nt,Ch=V,wh=t=>{const e=t.parentNode;e&&e.removeChild(t)},xh=t=>{const e=cr(t);return{count:t.length-e.length,text:e}},kh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(_e));)t.deleteData(e,1)},_h=(t,e)=>(vo(t),e),vo=t=>{tS(t)&&tn(t)&&(qg(t)?t.removeAttribute("data-mce-caret"):wh(t)),Ch(t)&&(kh(t),0===t.data.length&&wh(t))},nS=Ut,rS=Ln,oS=wi,Eh=(t,e,n)=>{const r=Ap(e.getBoundingClientRect(),n);let o,a;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,a=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,a=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=a,r.bottom+=a,r.width=1;let s=e.offsetWidth-e.clientWidth;return s>0&&(n&&(s*=-1),r.left+=s,r.right+=s),r},Sh=()=>St.browser.isFirefox(),ps=t=>nS(t)||rS(t),hs=t=>(ps(t)||dr(t)&&Sh())&&Td(E(t)).exists(Qo),sS=Cn,Ec=Ut,iS=Ln,Nh=Ci("display","block table table-cell table-caption list-item"),Rh=tn,Ah=na,lS=nt,dS=V,cS=fn,la=t=>t>0,yo=t=>t<0,$i=(t,e)=>{let n;for(;n=t(e);)if(!Ah(n))return n;return null},bs=(t,e,n,r,o)=>{const a=new re(t,r),s=Ec(t)||Ah(t);let i;if(yo(e)){if(s&&(i=$i(a.prev.bind(a),!0),n(i)))return i;for(;i=$i(a.prev.bind(a),o);)if(n(i))return i}if(la(e)){if(s&&(i=$i(a.next.bind(a),!0),n(i)))return i;for(;i=$i(a.next.bind(a),o);)if(n(i))return i}return null},Dr=(t,e)=>{for(;t&&t!==e;){if(Nh(t))return t;t=t.parentNode}return null},Fn=(t,e,n)=>Dr(t.container(),n)===Dr(e.container(),n),Sc=(t,e)=>{if(!e)return C.none();const n=e.container(),r=e.offset();return lS(n)?C.from(n.childNodes[r+t]):C.none()},Oh=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},uS=(t,e,n)=>Dr(e,t)===Dr(n,t),Th=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let a=o[r];if(a&&Rh(a)&&(a=a[r]),Ec(a)||iS(a)){if(uS(e,a,o))return a;break}if(cS(a))break;o=o.parentNode}return null},vs=at(Oh,!0),ys=at(Oh,!1),Nc=(t,e,n)=>{let r;const o=at(Th,!0,e),a=at(Th,!1,e),s=n.startContainer,i=n.startOffset;if(na(s)){const l=dS(s)?s.parentNode:s,d=l.getAttribute("data-mce-caret");if("before"===d&&(r=l.nextSibling,hs(r)))return vs(r);if("after"===d&&(r=l.previousSibling,hs(r)))return ys(r)}if(!n.collapsed)return n;if(V(s)){if(Rh(s)){if(1===t){if(r=a(s),r)return vs(r);if(r=o(s),r)return ys(r)}if(-1===t){if(r=o(s),r)return ys(r);if(r=a(s),r)return vs(r)}return n}if(Ri(s)&&i>=s.data.length-1)return 1===t&&(r=a(s),r)?vs(r):n;if(Ni(s)&&i<=1)return-1===t&&(r=o(s),r)?ys(r):n;if(i===s.data.length)return r=a(s),r?vs(r):n;if(0===i)return r=o(s),r?ys(r):n}return n},Bh=(t,e)=>Sc(t?0:-1,e).filter(Ec),Cs=(t,e,n)=>{const r=Nc(t,e,n);return-1===t?M.fromRangeStart(r):M.fromRangeEnd(r)},Vi=t=>C.from(t.getNode()).map(E),Rc=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},qi=(t,e)=>{const n=Fn(t,e);return!(n||!Wt(t.getNode()))||n};var le,t;(t=le||(le={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const mS=Ut,Un=V,Dh=nt,Ac=Wt,da=fn,Ph=t=>{return Gg(t)||!!Gd(e=t)&&!Re(ft(e.getElementsByTagName("*")),(n,r)=>n||Kg(r),!1);var e},Wi=Yg,Mh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Lh=(t,e)=>{if(la(t)){if(da(e.previousSibling)&&!Un(e.previousSibling))return M.before(e);if(Un(e))return M(e,0)}if(yo(t)){if(da(e.nextSibling)&&!Un(e.nextSibling))return M.after(e);if(Un(e))return M(e,e.data.length)}return yo(t)?Ac(e)?M.before(e):M.after(e):M.before(e)},Oc=(t,e,n)=>{let r,o,a,s;if(!Dh(n)||!e)return null;if(e.isEqual(M.after(n))&&n.lastChild){if(s=M.after(n.lastChild),yo(t)&&da(n.lastChild)&&Dh(n.lastChild))return Ac(n.lastChild)?M.before(n.lastChild):s}else s=e;const i=s.container();let l=s.offset();if(Un(i)){if(yo(t)&&l>0)return M(i,--l);if(la(t)&&l<i.length)return M(i,++l);r=i}else{if(yo(t)&&l>0&&(o=Mh(i,l-1),da(o)))return!Ph(o)&&(a=bs(o,t,Wi,o),a)?Un(a)?M(a,a.data.length):M.after(a):Un(o)?M(o,o.data.length):M.before(o);if(la(t)&&l<i.childNodes.length&&(o=Mh(i,l),da(o)))return Ac(o)?((c,u)=>{const m=u.nextSibling;return m&&da(m)?Un(m)?M(m,0):M.before(m):Oc(le.Forwards,M.after(u),c)})(n,o):!Ph(o)&&(a=bs(o,t,Wi,o),a)?Un(a)?M(a,0):M.before(a):Un(o)?M(o,0):M.after(o);r=o||s.getNode()}if(r&&(la(t)&&s.isAtEnd()||yo(t)&&s.isAtStart())&&(r=bs(r,t,Vt,n,!0),Wi(r,n)))return Lh(t,r);o=r&&bs(r,t,Wi,n);const d=Jr(bt(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),mS));return!d||o&&d.contains(o)?o?Lh(t,o):null:(s=la(t)?M.after(d):M.before(d),s)},jn=t=>({next:e=>Oc(le.Forwards,e,t),prev:e=>Oc(le.Backwards,e,t)}),Ih=t=>M.isTextPosition(t)?0===t.offset():fn(t.getNode()),Fh=t=>{if(M.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return fn(t.getNode(!0))},Uh=(t,e)=>!M.isTextPosition(t)&&!M.isTextPosition(e)&&t.getNode()===e.getNode(!0),en=(t,e,n)=>{const r=jn(e);return C.from(t?r.next(n):r.prev(n))},ws=(t,e,n)=>en(t,e,n).bind(r=>{return Fn(n,r,e)&&(a=n,s=r,t?!Uh(a,s)&&(M.isTextPosition(i=a)||!Wt(i.getNode()))&&Fh(a)&&Ih(s):!Uh(s,a)&&Ih(a)&&Fh(s))?en(t,e,r):C.some(r);var a,s,i}),jh=(t,e,n,r)=>ws(t,e,n).bind(o=>r(o)?jh(t,e,o,r):C.some(o)),ca=(t,e)=>{const n=t?e.firstChild:e.lastChild;return V(n)?C.some(M(n,t?0:n.data.length)):n?fn(n)?C.some(t?M.before(n):Wt(r=n)?M.before(r):M.after(r)):((o,a,s)=>{const i=o?M.before(s):M.after(s);return en(o,a,i)})(t,e,n):C.none();var r},Oe=at(en,!0),Le=at(en,!1),Te=at(ca,!0),gn=at(ca,!1),Tc="_mce_caret",pn=t=>nt(t)&&t.id===Tc,Co=(t,e)=>{let n=e;for(;n&&n!==t;){if(pn(n))return n;n=n.parentNode}return null},zh=t=>kt(t,"name"),Hh=t=>W.isArray(t.start),Ki=t=>!(!zh(t)&&er(t.forward))||t.forward,$h=(t,e)=>(nt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),fS=(t,e)=>gn(t).fold(It,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Vh=(t,e,n)=>!(e.hasChildNodes()||!Co(t,e)||(((r,o)=>{var a;const s=(null!==(a=r.ownerDocument)&&void 0!==a?a:document).createTextNode(_e);r.appendChild(s),o.setStart(s,0),o.setEnd(s,0)})(e,n),0)),qh=(t,e,n,r)=>{const o=n[e?"start":"end"],a=t.getRoot();if(o){let s=a,i=o[0];for(let l=o.length-1;s&&l>=1;l--){const d=s.childNodes;if(Vh(a,s,r))return!0;if(o[l]>d.length-1)return!!Vh(a,s,r)||fS(s,r);s=d[o[l]]}V(s)&&(i=Math.min(o[0],s.data.length)),nt(s)&&(i=Math.min(o[0],s.childNodes.length)),e?r.setStart(s,i):r.setEnd(s,i)}return!0},Bc=t=>V(t)&&t.data.length>0,Wh=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=null==r?void 0:r.parentNode,a=n.keep;if(r&&o){let s,i;if("start"===e?a?r.hasChildNodes()?(s=r.firstChild,i=1):Bc(r.nextSibling)?(s=r.nextSibling,i=0):Bc(r.previousSibling)?(s=r.previousSibling,i=r.previousSibling.data.length):(s=o,i=t.nodeIndex(r)+1):(s=o,i=t.nodeIndex(r)):a?r.hasChildNodes()?(s=r.firstChild,i=1):Bc(r.previousSibling)?(s=r.previousSibling,i=r.previousSibling.data.length):(s=o,i=t.nodeIndex(r)):(s=o,i=t.nodeIndex(r)),!a){const l=r.previousSibling,d=r.nextSibling;let c;for(W.each(W.grep(r.childNodes),u=>{V(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(V(d)&&V(l)&&!St.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),s=l,i=u}}return C.some(M(s,i))}return C.none()},gS=(t,e,n)=>((r,o,a=!1)=>{return 2===o?Yp(cr,a,r):3===o?(s=>{const i=s.getRng();return{start:$p(s.dom.getRoot(),M.fromRangeStart(i)),end:$p(s.dom.getRoot(),M.fromRangeEnd(i)),forward:s.isForward()}})(r):o?{rng:(s=r).getRng(),forward:s.isForward()}:Qp(r,!1);var s})(t,e,n),pS=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(Hh(r))return((a,s)=>{const i=a.createRng();return qh(a,!0,s,i)&&qh(a,!1,s,i)?C.some({range:i,forward:Ki(s)}):C.none()})(o,r);if(ut(r.start))return((a,s)=>{const i=C.from(Vp(a.getRoot(),s.start)),l=C.from(Vp(a.getRoot(),s.end));return De(i,l,(d,c)=>{const u=a.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:Ki(s)}})})(o,r);if(kt(r,"id"))return((a,s)=>{const i=Wh(a,"start",s),l=Wh(a,"end",s);return De(i,l.or(i),(d,c)=>{const u=a.createRng();return u.setStart($h(a,d.container()),d.offset()),u.setEnd($h(a,c.container()),c.offset()),{range:u,forward:Ki(s)}})})(o,r);if(zh(r))return((a,s)=>C.from(a.select(s.name)[s.index]).map(i=>{const l=a.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((a=>kt(a,"rng"))(r))return C.some({range:r.rng,forward:Ki(r)})}return C.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},nn=t=>nt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Gi=(Kh=se,t=>Kh===t);var Kh;const ua=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Dc=t=>!ua(t)&&!Gi(t)&&!Hd(t),Pc=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},hS=t=>{return{value:(n=Pc(t.red)+Pc(t.green)+Pc(t.blue),$f(n,"#").toUpperCase())};var n},bS=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,vS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Gh=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),Yh=(t,e,n,r)=>{const o=parseInt(t,10),a=parseInt(e,10),s=parseInt(n,10),i=parseFloat(r);return Gh(o,a,s,i)},Yi=t=>(e=>{if("transparent"===e)return C.some(Gh(0,0,0,0));const n=bS.exec(e);if(null!==n)return C.some(Yh(n[1],n[2],n[3],"1"));const r=vS.exec(e);return null!==r?C.some(Yh(r[1],r[2],r[3],r[4])):C.none()})(t).map(hS).map(e=>"#"+e.value).getOr(t),Mc=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Xh=(t,e)=>{const n=ke(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:bt(qe(t,a=>{const s=Ii(a);return s?[E(s)]:[]}),Za)},ma=t=>Xh(Mc(t.selection.getSel()),E(t.getBody())),xs=(t,e)=>Ka(t,"table",e),Qh=t=>Bd(t).fold(J([t]),e=>[t].concat(Qh(e))),Lc=t=>Dd(t).fold(J([t]),e=>"br"===Ft(e)?eo(e).map(n=>[t].concat(Lc(n))).getOr([]):[t].concat(Lc(e))),Ic=(t,e)=>De((n=>{const r=n.startContainer,o=n.startOffset;return V(r)?0===o?C.some(E(r)):C.none():C.from(r.childNodes[o]).map(E)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return V(r)?o===r.data.length?C.some(E(r)):C.none():C.from(r.childNodes[o-1]).map(E)})(e),(n,r)=>{const o=Xt(Qh(t),at(Tt,n)),a=Xt(Lc(t),at(Tt,r));return o.isSome()&&a.isSome()}).getOr(!1),Fc=(t,e,n,r)=>{const o=n,a=new re(n,o),s=Fa(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Ot(["td","th","table"],d.toLowerCase()));let i=n;do{if(V(i)&&0!==W.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(s[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?a.next():a.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},Xi=t=>{const e=t.selection.getSel();return X(e)&&e.rangeCount>0},Uc=(t,e)=>{const n=ma(t);n.length>0?H(n,r=>{const o=r.dom,a=t.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),e(a,!0)}):e(t.selection.getRng(),!1)},Jh=(t,e,n)=>{const r=Qp(t,e);n(r),t.moveToBookmark(r)},ks=t=>Xe(null==t?void 0:t.nodeType),jc=t=>nt(t)&&!nn(t)&&!pn(t)&&!so(t),wo=t=>!0===t.isContentEditable,Zh=(t,e,n)=>{const{selection:r,dom:o}=t,a=r.getNode(),s=Ut(a);Jh(r,!0,()=>{e()}),s&&Ut(a)&&o.isChildOf(a,t.getBody())?t.selection.select(a):n(r.getStart())&&yS(o,r)},yS=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:a,startOffset:s}=o;if(!((i,l)=>{if(jc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&nt(a)){const i=a.childNodes,l=t.getRoot();let d;if(s<i.length){const c=i[s];d=new re(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new re(c,null!==(r=t.getParent(c,t.isBlock))&&void 0!==r?r:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if(V(c)&&!Hc(c))return o.setStart(c,0),void e.setRng(o)}}},tb=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(nt(t)||!Hc(t))return t}},zc=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||co(t,e),fa=(t,e,n)=>t.schema.isValidChild(e,n),Hc=(t,e=!1)=>{if(X(t)&&V(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return lo(n)}return!1},eb=(t,e)=>{const n=t.dom;return jc(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const a="[data-mce-cef-wrappable]",s=fE(r),i=za(s)?a:`${a},${s}`;return vn(E(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Pr=(t,e)=>Rt(t)?t(e):(X(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),$c=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Vc=(t,e)=>{if(Gt(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Yi(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Qi=(t,e,n)=>{const r=t.getStyle(e,n);return Vc(r,n)},nb=(t,e)=>{let n;return t.getParent(e,r=>!!nt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Ji=(t,e,n)=>t.getParents(e,n,t.getRoot()),qc=(t,e,n)=>{const r=t.formatter.get(e);return X(r)&&qt(r,n)},zn=t=>Ho(t,"block"),rn=t=>Ho(t,"selector"),oe=t=>Ho(t,"inline"),Wc=t=>rn(t)&&!1!==t.expand&&!oe(t),ga=nn,rb=Ji,ob=Hc,CS=zc,ab=(t,e)=>{let n=e;for(;n;){if(nt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},sb=(t,e,n,r)=>{const o=e.data;if(t){for(let a=n;a>0;a--)if(r(o.charAt(a-1)))return a}else for(let a=n;a<o.length;a++)if(r(o.charAt(a)))return a;return-1},wS=(t,e,n)=>sb(t,e,n,r=>Gi(r)||ua(r)),xS=(t,e,n)=>sb(t,e,n,Dc),ib=(t,e,n,r,o,a)=>{let s;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=po(t);return C.from((o?m.backwards:m.forwards)(d,c,(f,h)=>ga(f.parentNode)?-1:(s=f,u(o,f,h)),i))};return l(n,r,wS).bind(d=>a?l(d.container,d.offset+(o?-1:0),xS):C.some(d)).orThunk(()=>s?C.some({container:s,offset:o?0:s.length}):C.none())},lb=(t,e,n,r,o)=>{const a=r[o];V(r)&&za(r.data)&&a&&(r=a);const s=rb(t,r);for(let i=0;i<s.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!X(d.collapsed)||d.collapsed===n.collapsed)&&rn(d)&&t.is(s[i],d.selector))return s[i]}return r},db=(t,e,n,r)=>{var o;let a=n;const s=t.getRoot(),i=e[0];if(zn(i)&&(a=i.wrapper?null:t.getParent(n,i.block,s)),!a){const l=null!==(o=t.getParent(n,"LI,TD,TH"))&&void 0!==o?o:s;a=t.getParent(V(n)?n.parentNode:n,d=>d!==s&&CS(t.schema,d),l)}if(a&&zn(i)&&i.wrapper&&(a=rb(t,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[r]&&!t.isBlock(a[r])&&(a=a[r],!$c(a,"br")););return a||n},cb=(t,e,n,r)=>{const o=n.parentNode;return!X(n[r])&&(!(o!==e&&!Gt(o)&&!t.isBlock(o))||cb(t,e,o,r))},Zi=(t,e,n,r,o)=>{let a=n;const s=o?"previousSibling":"nextSibling",i=t.getRoot();if(V(n)&&!ob(n)&&(o?r>0:r<n.data.length))return n;for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let d=a[s];d;d=d[s]){const c=V(d)&&!cb(t,i,d,s);if(!ga(d)&&(!Wt(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!ob(d,c))return a}if(a===i||a.parentNode===i){n=a;break}a=a.parentNode}var l;return n},ub=t=>ga(t.parentNode)||ga(t),xo=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:a,endContainer:s,endOffset:i}=e;const l=n[0];return nt(o)&&o.hasChildNodes()&&(o=Tr(o,a),V(o)&&(a=0)),nt(s)&&s.hasChildNodes()&&(s=Tr(s,e.collapsed?i:i-1),V(s)&&(i=s.data.length)),o=ab(t,o),s=ab(t,s),ub(o)&&(o=ga(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,V(o)&&(a=e.collapsed?o.length:0)),ub(s)&&(s=ga(s)?s:s.parentNode,s=e.collapsed?s.nextSibling||s:s.previousSibling||s,V(s)&&(i=e.collapsed?0:s.length)),e.collapsed&&(ib(t,t.getRoot(),o,a,!0,r).each(({container:d,offset:c})=>{o=d,a=c}),ib(t,t.getRoot(),s,i,!1,r).each(({container:d,offset:c})=>{s=d,i=c})),(oe(l)||l.block_expand)&&(oe(l)&&V(o)&&0!==a||(o=Zi(t,n,o,a,!0)),oe(l)&&V(s)&&i!==s.data.length||(s=Zi(t,n,s,i,!1))),Wc(l)&&(o=lb(t,n,e,o,"previousSibling"),s=lb(t,n,e,s,"nextSibling")),(zn(l)||rn(l))&&(o=db(t,n,o,"previousSibling"),s=db(t,n,s,"nextSibling"),zn(l)&&(t.isBlock(o)||(o=Zi(t,n,o,a,!0)),t.isBlock(s)||(s=Zi(t,n,s,i,!1)))),nt(o)&&o.parentNode&&(a=t.nodeIndex(o),o=o.parentNode),nt(s)&&s.parentNode&&(i=t.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:i}},_s=(t,e,n)=>{var r;const o=e.startOffset,a=Tr(e.startContainer,o),s=e.endOffset,i=Tr(e.endContainer,s-1),l=g=>{const b=g[0];V(b)&&b===a&&o>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===s&&g.length>0&&v===i&&V(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let w=g,x=w.parentNode;w&&w!==b;w=x){x=w.parentNode;const k=d(w===g?w:w[y],y);k.length&&(v||k.reverse(),n(l(k)))}};if(a===i)return n(l([a]));const m=null!==(r=t.findCommonAncestor(a,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(a,i))return u(a,m,!0);if(t.isChildOf(i,a))return u(i,m);const p=c(a,m)||a,f=c(i,m)||i;u(a,p,!0);const h=d(p===a?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},kS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],mb=(t,e,n,r,o,a)=>{const{uid:s=e,...i}=n;Wo(t,os()),fe(t,`${aa()}`,s),fe(t,`${fo()}`,r);const{attributes:l={},classes:d=[]}=o(s,i);if(wr(t,l),c=t,H(d,m=>{Wo(c,m)}),a){d.length>0&&fe(t,`${ss()}`,d.join(","));const c=_t(l);c.length>0&&fe(t,`${is()}`,c.join(","))}var c},fb=(t,e,n,r,o)=>{const a=ge("span",t);return mb(a,e,n,r,o,!1),a},gb=t=>{const e=(()=>{const a={};return{register:(s,i)=>{a[s]={name:s,settings:i}},lookup:s=>jt(a,s).map(i=>i.settings),getNames:()=>_t(a)}})();((a,s)=>{const i=fo(),l=c=>C.from(c.attr(i)).bind(s.lookup),d=c=>{var u,m;c.attr(aa(),null),c.attr(fo(),null),c.attr(as(),null);const p=C.from(c.attr(is())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(ss())).map(b=>b.split(",")).getOr([]);H(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=zo(h,[os()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(ss(),null),c.attr(is(),null)};a.serializer.addTempAttr(as()),a.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((a,s)=>{const i=ie({}),l=()=>({listeners:[],previous:Or()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(jt(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{H(xp(a,p),h=>{f?fe(h,as(),"true"):ve(h,as())})},m=cc(()=>{const p=F(s.getNames());H(p,f=>{c(f,h=>{const g=h.previous.get();return Cp(a,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{H(y.listeners,w=>w(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var w,x,k;Vo(g,b)||(g.each(w=>u(w,!1)),x=b,k=y,d(w=v,_=>{H(_.listeners,T=>T(!0,w,{uid:x,nodes:Nt(k,L=>L.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return a.on("remove",()=>{m.cancel()}),a.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),r=Rd("span"),o=a=>{H(a,s=>{r(s)?lr(s):(i=>{Ko(i,os()),ve(i,`${aa()}`),ve(i,`${fo()}`),ve(i,`${as()}`);const l=or(i,`${is()}`).map(u=>u.split(",")).getOr([]),d=or(i,`${ss()}`).map(u=>u.split(",")).getOr([]);var c;H(l,u=>ve(i,u)),c=i,H(d,u=>{Ko(c,u)}),ve(i,`${ss()}`),ve(i,`${is()}`)})(s)})};return{register:(a,s)=>{e.register(a,s)},annotate:(a,s)=>{e.lookup(a).each(i=>{var l,d,c,u;d=a,c=i,u=s,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=ma(l).length>0,h=ls("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=xo(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=fb(l.getDoc(),h,u,d,c.decorate);bi(g,se),m.getRng().insertNode(g.dom),m.select(g.dom)}else Jh(m,!1,()=>{Uc(l,g=>{((t,e,n,r,o,a)=>{const s=[],i=fb(t.getDoc(),n,a,r,o),l=Or(),d=()=>{l.clear()},c=m=>{H(m,u)},u=m=>{switch(p=t,f=m,h="span",g=Ft(m),mn(f).fold(()=>"skipping",b=>{return"br"===g||Qe(v=f)&&xi(v)===_e?"valid":(v=>ze(v)&&Od(v,os()))(f)?"existing":pn(f.dom)?"caret":qt(kS,v=>vn(f,v))?"valid-block":fa(p,h,g)&&fa(p,Ft(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=ye(m);c(p),d();break}case"valid-block":d(),mb(m,n,a,r,o,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=go(i);return s.push(f),l.set(f),f});Tg(m,p);break}}var p,f,h,g};_s(t.dom,e,m=>{d(),(p=>{const f=Nt(p,E);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(a,s)=>{n.addListener(a,s)},remove:a=>{Cp(t,C.some(a)).each(({elements:s})=>{const i=t.selection.getBookmark();o(s),t.selection.moveToBookmark(i)})},removeAll:a=>{const s=t.selection.getBookmark();lt(kp(t,a),(i,l)=>{o(i)}),t.selection.moveToBookmark(s)},getAll:a=>{const s=kp(t,a);return Dt(s,i=>Nt(i,l=>l.dom))}}},Es=t=>({getBookmark:at(gS,t),moveToBookmark:at(pS,t)});Es.isBookmarkNode=nn;const pb=(t,e,n)=>!n.collapsed&&qt(n.getClientRects(),r=>{return s=e,(a=t)>=(o=r).left&&a<=o.right&&s>=o.top&&s<=o.bottom;var o,a,s}),hb=(t,e,n)=>{t.dispatch(e,n)},bb=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},vb=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},yb=(t,e)=>t.dispatch("SetContent",e),Cb=(t,e)=>t.dispatch("GetContent",e),wb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),ot={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||ot.metaKeyPressed(t),metaKeyPressed:t=>St.os.isMacOS()||St.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ko="data-mce-selected",xb=Math.abs,tl=Math.round,Kc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},kb=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,a=e.getBody();let s,i,l,d,c,u,m,p,f,h,g,b,v,y,w;const x=tt=>X(tt)&&(zg(tt)||n.is(tt,"figure.image")),k=tt=>Ln(tt)||n.hasClass(tt,"mce-preview-object"),_=tt=>{const it=tt.target;((gt,N)=>{if("longpress"===(A=gt).type||0===A.type.indexOf("touch")){const A=gt.touches[0];return x(gt.target)&&!pb(A.clientX,A.clientY,N)}var A;return x(gt.target)&&!pb(gt.clientX,gt.clientY,N)})(tt,e.selection.getRng())&&!tt.isDefaultPrevented()&&e.selection.select(it)},T=tt=>n.hasClass(tt,"mce-preview-object")&&X(tt.firstElementChild)?[tt,tt.firstElementChild]:n.is(tt,"figure.image")?[tt.querySelector("img")]:[tt],L=tt=>{const it=fh(e);return!!it&&"false"!==tt.getAttribute("data-mce-resize")&&tt!==e.getBody()&&(n.hasClass(tt,"mce-preview-object")&&X(tt.firstElementChild)?vn(E(tt.firstElementChild),it):vn(E(tt),it))},P=(tt,it,gt)=>{if(X(gt)){const N=T(tt);H(N,A=>{A.style[it]||!e.schema.isValid(A.nodeName.toLowerCase(),it)?n.setStyle(A,it,gt):n.setAttrib(A,it,""+gt)})}},S=(tt,it,gt)=>{P(tt,"width",it),P(tt,"height",gt)},O=tt=>{let it,gt,N,A,I;it=tt.screenX-u,gt=tt.screenY-m,b=it*d[2]+p,v=gt*d[3]+f,b=b<5?5:b,v=v<5?5:v,N=(x(s)||k(s))&&!1!==aE(e)?!ot.modifierPressed(tt):ot.modifierPressed(tt),N&&(xb(it)>xb(gt)?(v=tl(b*h),b=tl(v/h)):(b=tl(v/h),v=tl(b*h))),S(i,b,v),A=d.startPos.x+it,I=d.startPos.y+gt,A=A>0?A:0,I=I>0?I:0,n.setStyles(l,{left:A,top:I,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),it=a.scrollWidth-y,gt=a.scrollHeight-w,it+gt!==0&&n.setStyles(l,{left:A-it,top:I-gt}),g||(e.dispatch("ObjectResizeStart",{target:s,width:p,height:f,origin:"corner-"+d.name}),g=!0)},R=()=>{const tt=g;g=!1,tt&&(P(s,"width",b),P(s,"height",v)),n.unbind(r,"mousemove",O),n.unbind(r,"mouseup",R),o!==r&&(n.unbind(o,"mousemove",O),n.unbind(o,"mouseup",R)),n.remove(i),n.remove(l),n.remove(c),B(s),tt&&(e.dispatch("ObjectResized",{target:s,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),e.nodeChanged()},B=tt=>{vt();const it=n.getPos(tt,a),gt=it.x,N=it.y,A=tt.getBoundingClientRect(),I=A.width||A.right-A.left,z=A.height||A.bottom-A.top;s!==tt&&($(),s=tt,b=v=0);const U=e.dispatch("ObjectSelected",{target:tt});L(tt)&&!U.isDefaultPrevented()?lt(Kc,(j,K)=>{let st=n.get("mceResizeHandle"+K);st&&n.remove(st),st=n.add(a,"div",{id:"mceResizeHandle"+K,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+K+"-resize; margin:0; padding:0"}),n.bind(st,"mousedown",et=>{et.stopImmediatePropagation(),et.preventDefault(),(pt=>{const ht=T(s)[0];var Z;u=pt.screenX,m=pt.screenY,p=ht.clientWidth,f=ht.clientHeight,h=f/p,d=j,d.name=K,d.startPos={x:I*j[0]+gt,y:z*j[1]+N},y=a.scrollWidth,w=a.scrollHeight,c=n.add(a,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=k(Z=s)?n.create("img",{src:St.transparentSrc}):Z.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:gt,top:N,margin:0}),S(i,I,z),i.removeAttribute(ko),a.appendChild(i),n.bind(r,"mousemove",O),n.bind(r,"mouseup",R),o!==r&&(n.bind(o,"mousemove",O),n.bind(o,"mouseup",R)),l=n.add(a,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(et)}),j.elm=st,n.setStyles(st,{left:I*j[0]+gt-st.offsetWidth/2,top:z*j[1]+N-st.offsetHeight/2})}):$(!1)},G=Li(B,0),$=(tt=!0)=>{G.cancel(),vt(),s&&tt&&s.removeAttribute(ko),lt(Kc,(it,gt)=>{const N=n.get("mceResizeHandle"+gt);N&&(n.unbind(N),n.remove(N))})},ct=(tt,it)=>n.isChildOf(tt,it),Q=tt=>{if(g||e.removed||e.composing)return;const it="mousedown"===tt.type?tt.target:t.getNode(),gt=ro(E(it),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(A=>A.dom).filter(A=>n.isEditable(A.parentElement)).getOrUndefined(),N=X(gt)?n.getAttrib(gt,ko,"1"):"1";if(H(n.select(`img[${ko}],hr[${ko}]`),A=>{A.removeAttribute(ko)}),X(gt)&&ct(gt,a)&&e.hasFocus()){Ct();const A=t.getStart(!0);if(ct(A,gt)&&ct(t.getEnd(!0),gt))return n.setAttrib(gt,ko,N),void G.throttle(gt)}$()},vt=()=>{lt(Kc,tt=>{tt.elm&&(n.unbind(tt.elm),delete tt.elm)})},Ct=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Ct(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Q),e.on("keyup compositionend",tt=>{s&&"TABLE"===s.nodeName&&Q(tt)}),e.on("hide blur",$),e.on("contextmenu longpress",_,!0)}),e.on("remove",vt),{isResizable:L,showResizeRect:B,hideResizeRect:$,updateResizeRect:Q,destroy:()=>{G.cancel(),s=i=c=null}}},_b=(t,e,n)=>{const r=t.document.createRange();var o,a;return o=r,e.fold(a=>{o.setStartBefore(a.dom)},(a,s)=>{o.setStart(a.dom,s)},a=>{o.setStartAfter(a.dom)}),a=r,n.fold(i=>{a.setEndBefore(i.dom)},(i,l)=>{a.setEnd(i.dom,l)},i=>{a.setEndAfter(i.dom)}),r},Gc=(t,e,n,r,o)=>{const a=t.document.createRange();return a.setStart(e.dom,n),a.setEnd(r.dom,o),a},Ss=In([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Eb=(t,e,n)=>e(E(n.startContainer),n.startOffset,E(n.endContainer),n.endOffset),Sb=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),ES=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return C.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(a=>{if(null===a.offsetNode)return C.none();const s=t.dom.createRange();return s.setStart(a.offsetNode,a.offset),s.collapse(),C.some(s)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return C.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:C.none,Yc=In([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),mr={before:Yc.before,on:Yc.on,after:Yc.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(ne,ne,ne)},el=In([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pa={domRange:el.domRange,relative:el.relative,exact:el.exact,exactFromRange:t=>el.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>E(r.startContainer),relative:(r,o)=>mr.getStart(r),exact:(r,o,a,s)=>r});return qa(e)},range:Sb},nl=(t,e)=>{const n=Ft(t);return"input"===n?mr.after(t):Ot(["br","img"],n)?0===e?mr.before(t):mr.after(t):mr.on(t,e)},SS=(t,e)=>{const n=t.fold(mr.before,nl,mr.after),r=e.fold(mr.before,nl,mr.after);return pa.relative(n,r)},Nb=(t,e,n,r)=>{const o=nl(t,e),a=nl(n,r);return pa.relative(o,a)},Xc=(t,e)=>{const n=(e||document).createDocumentFragment();return H(t,r=>{n.appendChild(r.dom)}),E(n)},Rb=(t,e,n)=>{return(r=qa(E(n)).dom,o=t,a=e,((s,i,l)=>{const d=E(s.document);return ES(d,i,l).map(c=>Sb(E(c.startContainer),c.startOffset,E(c.endContainer),c.endOffset))})(r,o,a)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,a},Qc=(t,e)=>X(t)&&X(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Ab=(t,e,n)=>null!==((r,o,a)=>{let s=r;for(;s&&s!==o;){if(a(s))return s;s=s.parentNode}return null})(t,e,n),RS=(t,e,n)=>Ab(t,e,r=>r.nodeName===n),AS=(t,e)=>tn(t)&&!Ab(t,e,pn),Ob=(t,e,n)=>{const r=e.parentNode;if(r){const o=new re(e,t.getParent(r,t.isBlock)||t.getRoot());let a;for(;a=o[n?"prev":"next"]();)if(Wt(a))return!0}return!1},Jc=(t,e,n,r,o)=>{const a=t.getRoot(),s=t.schema.getNonEmptyElements(),i=o.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||a;if(r&&Wt(o)&&e&&t.isEmpty(c))return C.some(M(i,t.nodeIndex(o)));const u=new re(o,c);for(;d=u[r?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||AS(d,a))return C.none();if(V(d)&&d.data.length>0)return RS(d,a,"A")?C.none():C.some(M(d,r?d.data.length:0));if(t.isBlock(d)||s[d.nodeName.toLowerCase()])return C.none();l=d}return _r(l)?C.none():n&&l?C.some(M(l,0)):C.none()},Tb=(t,e,n,r)=>{const o=t.getRoot();let a,s=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const d=nt(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(tn(i))return C.none();if(nt(i)&&l>i.childNodes.length-1&&(u=!1),Qa(i)&&(i=o,l=0),i===o){if(u&&(a=i.childNodes[l>0?l-1:0],a)&&(tn(a)||c[a.nodeName]||dr(a)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=V(i)&&d?i.data.length:0,!e&&i===o.lastChild&&dr(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(Ut(f))return!0;f=f.parentNode}return!1})(o,i)||tn(i))return C.none();if(i.hasChildNodes()&&!dr(i)){a=i;const m=new re(i,o);do{if(Ut(a)||tn(a)){s=!1;break}if(V(a)&&a.data.length>0){l=u?0:a.data.length,i=a,s=!0;break}if(c[a.nodeName.toLowerCase()]&&!$k(a)){l=t.nodeIndex(a),i=a.parentNode,u||l++,s=!0;break}}while(a=u?m.next():m.prev())}}}return e&&(V(i)&&0===l&&Jc(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),nt(i)&&(a=i.childNodes[l],a||(a=i.childNodes[l-1]),!a||!Wt(a)||"A"===(null===(f=a.previousSibling)||void 0===f?void 0:f.nodeName)||Ob(t,a,!1)||Ob(t,a,!0)||Jc(t,d,e,!0,a).each(m=>{i=m.container(),l=m.offset(),s=!0}))),u&&!e&&V(i)&&l===i.data.length&&Jc(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),s&&i?C.some(M(i,l)):C.none();var f},rl=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=M.fromRangeStart(e);return Tb(t,n,!0,r).each(a=>{n&&M.isAbove(o,a)||r.setStart(a.container(),a.offset())}),n||Tb(t,n,!1,r).each(a=>{r.setEnd(a.container(),a.offset())}),n&&r.collapse(!0),Qc(e,r)?C.none():C.some(r)},ol=(t,e)=>t.splitText(e),al=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&V(e)){if(n>0&&n<e.data.length)if(r=ol(e,n),e=r.previousSibling,o>n){o-=n;const a=ol(r,o).previousSibling;e=r=a,o=a.data.length,n=0}else o=0}else if(V(e)&&n>0&&n<e.data.length&&(e=ol(e,n),n=0),V(r)&&o>0&&o<r.data.length){const a=ol(r,o).previousSibling;r=a,o=a.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},_o=t=>({walk:(e,n)=>_s(t,e,n),split:al,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=xo(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>rl(t,e).fold(It,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});_o.compareRanges=Qc,_o.getCaretRangeFromPoint=Rb,_o.getSelectedNode=Ii,_o.getNode=Tr;const OS=((t,e)=>{const n=o=>{const a=(s=>{const i=s.dom;return Xo(s)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(a<=0||null===a){const s=Mn(o,t);return parseFloat(s)||0}return a},r=(o,a)=>Re(a,(s,i)=>{const l=Mn(o,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?s:s+d},0);return{set:(o,a)=>{if(!Xe(a)&&!a.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+a);const s=o.dom;Ya(s)&&(s.style[t]=a+"px")},get:n,getOuter:n,aggregate:r,max:(o,a,s)=>{const i=r(o,s);return a>i?a-i:0}}})("height"),Bb=()=>E(document),Db=(t,e)=>t.view(e).fold(J([]),n=>{const r=t.owner(n),o=Db(t,r);return[n].concat(o)});var TS=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(E)},owner:t=>sr(t)});const Zc=t=>"textarea"===Ft(t),Pb=(t,e)=>{const n=(o=>{const a=o.dom.ownerDocument,s=a.body,i=a.defaultView,l=a.documentElement;if(s===o.dom)return Zo(s.offsetLeft,s.offsetTop);const d=vi(null==i?void 0:i.pageYOffset,l.scrollTop),c=vi(null==i?void 0:i.pageXOffset,l.scrollLeft),u=vi(l.clientTop,s.clientTop),m=vi(l.clientLeft,s.clientLeft);return Fd(o).translate(c-m,d-u)})(t),r=OS.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},Mb=(t,e,n,r)=>{DS(t,(o,a)=>BS(t,e,n,r),n)},Lb=(t,e,n,r,o)=>{const a={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",a).isDefaultPrevented()||(n(e,Ud(e).top,r,o),t.dispatch("AfterScrollIntoView",a))},BS=(t,e,n,r)=>{E(t.getBody());const a=E(t.getDoc()),s=((i,l)=>{const d=((u,m)=>{const p=ye(u);if(0===p.length||Zc(u))return{element:u,offset:m};if(m<p.length&&!Zc(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return Zc(f)?{element:u,offset:m}:"img"===Ft(f)?{element:f,offset:1}:Qe(f)?{element:f,offset:xi(f).length}:{element:f,offset:ye(f).length}}})(i,l),c=Va('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return We(d.element,c),Pb(c,()=>zt(c))})(E(n.startContainer),n.startOffset);Lb(t,a,e,s,r),s.cleanup()},Ib=(t,e,n,r)=>{const o=E(t.getDoc());Lb(t,o,n,Pb(E(e),Et),r)},DS=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,a=n.endContainer,s=n.endOffset;e(E(r),E(a));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(a,s),t.selection.setRng(n)},tu=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),Fb=(t,e,n,r)=>{const o=e+t,a=n.pos.top,s=n.bottom,i=s-a>=e;a<t?tu(n,!1!==r):a>o?tu(n,i?!1!==r:!0===r):s>o&&!i&&tu(n,!0===r)},Ub=(t,e,n,r)=>{const o=qa(t).dom.innerHeight;Fb(e,o,n,r)},jb=(t,e,n,r)=>{const o=qa(t).dom.innerHeight;Fb(e,o,n,r);const a=(i=>{const l=Bb(),d=Ud(l),c=((p,f)=>{const h=f.owner(p);return Db(f,h)})(i,TS),u=Fd(i),m=Gr(c,(p,f)=>{const h=Fd(f);return{left:p.left+h.left,top:p.top+h.top}},{left:0,top:0});return Zo(m.left+u.left+d.left,m.top+u.top+d.top)})(n.element),s=Lg(window);a.top<s.y?Pg(n.element,!1!==r):a.top>s.bottom&&Pg(n.element,!0===r)},PS=(t,e,n)=>Mb(t,Ub,e,n),MS=(t,e,n)=>Ib(t,e,Ub,n),LS=(t,e,n)=>Mb(t,jb,e,n),IS=(t,e,n)=>Ib(t,e,jb,n),Ns=(t,e,n)=>{(t.inline?PS:LS)(t,e,n)},zb=t=>t.dom.focus(),Hb=t=>{const e=xr(t).dom;return t.dom===e.activeElement},eu=(t=Bb())=>C.from(t.dom.activeElement).map(E),$b=(t,e)=>{const n=Qe(e)?xi(e).length:ye(e).length+1;return t>n?n:t<0?0:t},FS=t=>pa.range(t.start,$b(t.soffset,t.start),t.finish,$b(t.foffset,t.finish)),Vb=(t,e)=>!yi(e.dom)&&(ar(t,e)||Tt(t,e)),qb=t=>e=>Vb(t,e.start)&&Vb(t,e.finish),US=t=>pa.range(E(t.startContainer),t.startOffset,E(t.endContainer),t.endOffset),jS=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},nu=t=>{const e=t.inline||St.browser.isFirefox()?(n=E(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?C.from(o.getRangeAt(0)):C.none()).map(US)})(qa(n).dom).filter(qb(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},ru=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=E(t.getBody()),C.from(e).filter(qb(n)).map(FS);var n}).bind(jS),Wb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},on={setEditorTimeout:(t,e,n)=>{return Xe(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(Xe(a=n)||(a=0),setInterval(()=>{t.removed?clearInterval(r):e()},a));var a;return r}};let ha;const ou=Mt.DOM,au=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},sl=(t,e)=>{const n=gE(t);return null!==ou.getParent(e,o=>{return nt(a=o)&&Wb.isEditorUIElement(a)||!!n&&t.dom.is(o,n);var a})},su=t=>{try{const e=xr(E(t.getElement()));return eu(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},zS=(t,e)=>{const n=e.editor;(o=>{const a=Li(()=>{nu(o)},0);o.on("init",()=>{var s,d;o.inline&&((s,i)=>{const l=()=>{i.throttle()};Mt.DOM.bind(document,"mouseup",l),s.on("remove",()=>{Mt.DOM.unbind(document,"mouseup",l)})})(o,a),d=a,(s=o).on("mouseup touchend",c=>{d.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||nu(s)})}),o.on("remove",()=>{a.cancel()})})(n);const r=(o,a)=>{YE(o)&&!0!==o.inline&&a(E(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;au(su(n))&&r(n,Wo),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{on.setEditorTimeout(n,()=>{const o=t.focusedEditor;au(su(n))&&o===n||r(n,Ko),sl(n,su(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ha||(ha=o=>{const a=t.activeEditor;a&&kg(o).each(s=>{s.ownerDocument===document&&(s===document.body||sl(a,s)||t.focusedEditor!==a||(a.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},ou.bind(document,"focusin",ha))},HS=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ha&&(ou.unbind(document,"focusin",ha),ha=null)},Kb=(t,e)=>{var n,r,o;(n=E(t.getBody()),r=e,(o=r,o.collapsed?C.from(Tr(o.startContainer,o.startOffset)).map(E):C.none()).bind(o=>Kk(o)?C.some(o):ar(n,o)?C.none():C.some(n))).bind(n=>Te(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},iu=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Eo=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=E(n),Hb(r)||(o=r,eu(xr(o)).filter(a=>o.dom.contains(a.dom))).isSome());var r,o})(t):X((e=t).iframeElement)&&Hb(E(e.iframeElement));var e},lu=t=>t.editorManager.setActive(t),Gb=(t,e,n,r,o)=>{const s=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(E).map(i=>r&&e.collapsed?i:Yo(i,o(i,s)).getOr(i)).bind(i=>ze(i)?C.some(i):mn(i).filter(ze)).map(i=>i.dom).getOr(t)},Yb=(t,e,n=!1)=>Gb(t,e,!0,n,(r,o)=>Math.min(Pd(r),o)),Xb=(t,e,n=!1)=>Gb(t,e,!1,n,(r,o)=>o>0?o-1:o),Qb=(t,e)=>{const n=t;for(;t&&V(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},du=(t,e)=>Nt(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),$S=["img","br"],Jb=t=>{return $g(t).filter(n=>0!==n.trim().length||n.indexOf(se)>-1).isSome()||Ot($S,Ft(t))||Nd(n=t)&&"false"===Je(n,"contenteditable");var n},Zb="[data-mce-autocompleter]",tv=t=>Ga(t,Zb),qS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},il=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let a=t[o];if(a)return a;for(let s=t.parent;s&&s!==e;s=s.parent)if(a=s[o],a)return a}},WS=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!lo(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},ev=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Ie{static create(e,n){const r=new Ie(e,qS[e]||1);return n&&lt(n,(o,a)=>{r.attr(a,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!ut(e))return X(e)&&lt(e,(a,s)=>{r.attr(s,a)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let a=o.length;for(;a--;)if(o[a].name===e)return o.splice(a,1),r}return r}if(e in o.map){let a=o.length;for(;a--;)if(o[a].name===e){o[a].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Ie(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let a=0,s=r.length;a<s;a++){const i=r[a];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=il(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=il(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const a=this;let s=a.firstChild;if(ev(a))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name]||ev(s))return!1}if(8===s.type||3===s.type&&!WS(s)||3===s.type&&s.parent&&n[s.parent.name]&&lo(null!==(o=s.value)&&void 0!==o?o:"")||r&&r(s))return!1}while(s=il(s,a));return!0}walk(e){return il(this,null,e)}}const nv=(t,e,n=0)=>{const r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(e){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const a=o.exec(t);return a?a.index+a[0].length:r.length}},KS=(t,e,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=t.getVoidElements();let s=1,i=n;for(;0!==s;)for(r.lastIndex=i;;){const l=r.exec(e);if(null===l)return i;if("!"===l[1]){i=be(l[2],"--")?nv(e,!1,l.index+3):nv(e,!0,l.index+1);break}{o.lastIndex=r.lastIndex;const d=o.exec(e);if(Ne(d)||d.index!==r.lastIndex)continue;"/"===l[1]?s-=1:kt(a,l[2])||(s+=1),i=r.lastIndex+d[0].length;break}}return i},rv=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=t.schema;let o=((i,l)=>{const d=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(d,"")})(t.getTempAttrs(),e);const a=r.getVoidElements();let s;for(;s=n.exec(o);){const i=n.lastIndex,l=s[0].length;let d;d=a[s[1]]?i:KS(r,o,i),o=o.substring(0,i-l)+o.substring(d),n.lastIndex=i-l}return cr(o)},GS=rv,ov=t=>{const e=ke(t,"[data-mce-bogus]");H(e,n=>{"all"===Je(n,"data-mce-bogus")?zt(n):io(n)?(We(n,Go("\ufeff")),zt(n)):lr(n)})},av=t=>{const e=ke(t,"input");H(e,n=>{ve(n,"name")})},sv=W.makeMap,iv=t=>{const e=[],n=(t=t||{}).indent,r=sv(t.indent_before||""),o=sv(t.indent_after||""),a=Rr.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',a(m.value,!0),'"')}if(e[e.length]=!d||s?">":" />",d&&n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:a(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",a(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Mr=(t={},e=Ar())=>{const n=iv(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,a={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{s(l)}while(l=l.next)}};n.reset();const s=i=>{var l;const d=a[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(o&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{s(p)}while(p=p.next)}n.end(c)}}};return 1!==r.type||t.inner?3===r.type?a[3](r):a[11](r):s(r),n.getContent()}}},lv=new Set;H(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{lv.add(t)});const dv=["font","text-decoration","text-emphasis"],cu=(t,e)=>_t(t.parseStyle(t.getAttrib(e,"style"))),XS=(t,e,n)=>{const r=cu(t,e),o=cu(t,n),a=s=>{var i,l;const d=null!==(i=t.getStyle(e,s))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,s))&&void 0!==l?l:"";return Tn(d)&&Tn(c)&&d!==c};return qt(r,s=>{const i=l=>qt(l,d=>d===s);if(!i(o)&&i(dv)){const l=bt(o,d=>qt(dv,c=>be(d,c)));return qt(l,a)}return a(s)})},cv=(t,e,n)=>C.from(n.container()).filter(V).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),uu=at(cv,!0,ua),mu=at(cv,!1,ua),QS=t=>{const e=t.container();return V(e)&&(0===e.data.length||Si(e.data)&&Es.isBookmarkNode(e.parentNode))},Lr=(t,e)=>n=>Sc(t?0:-1,n).filter(e).isSome(),uv=t=>zg(t)&&"block"===Mn(E(t),"display"),mv=t=>{return Ut(t)&&!(nt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},JS=Lr(!0,uv),ZS=Lr(!1,uv),Rs=Lr(!0,Ln),As=Lr(!1,Ln),fv=Lr(!0,dr),gv=Lr(!1,dr),Ir=Lr(!0,mv),Fr=Lr(!1,mv),pv=(t,e)=>{return o=It,ar(r=e,n=t)?yg(n,a=>o(a)||Tt(a,r)).slice(0,-1):[];var n,r,o},fr=(t,e)=>[t].concat(pv(t,e)),fu=(t,e,n)=>jh(t,e,n,QS),hv=(t,e)=>Xt(fr(E(e.container()),t),Ze),bv=(t,e,n)=>fu(t,e.dom,n).forall(r=>hv(e,n).fold(()=>!Fn(r,n,e.dom),o=>!Fn(r,n,e.dom)&&ar(o,E(r.container())))),vv=(t,e,n)=>hv(e,n).fold(()=>fu(t,e.dom,n).forall(r=>!Fn(r,n,e.dom)),r=>fu(t,r.dom,n).isNone()),gu=at(vv,!1),yv=at(vv,!0),tN=at(bv,!1),eN=at(bv,!0),nN=t=>Vi(t).exists(io),ll=(t,e,n)=>{const r=bt(fr(E(n.container()),e),Ze),o=Y(r).getOr(e);return en(t,o.dom,n).filter(nN)},pu=(t,e)=>Vi(e).exists(io)||ll(!0,t,e).isSome(),hu=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(E)).exists(io)||ll(!1,t,e).isSome();var n},rN=at(ll,!1),oN=at(ll,!0),Cv=t=>M.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),wv=(t,e)=>{const n=bt(fr(E(e.container()),t),Ze);return Y(n).getOr(t)},xv=(t,e)=>Cv(e)?mu(e):mu(e)||Le(wv(t,e).dom,e).exists(mu),kv=(t,e)=>Cv(e)?uu(e):uu(e)||Oe(wv(t,e).dom,e).exists(uu),bu=t=>Vi(t).bind(e=>no(e,ze)).exists(e=>{return n=Mn(e,"white-space"),Ot(["pre","pre-wrap"],n);var n}),_v=(t,e)=>n=>{return r=new re(n,t)[e](),X(r)&&Ut(r)&&Nh(r);var r},Ev=(t,e)=>{return!bu(e)&&(Le((n=t).dom,r=e).isNone()||Oe(n.dom,r).isNone()||gu(n,r)||yv(n,r)||hu(n,r)||pu(n,r)||xv(t,e)||kv(t,e));var n,r},Os=(t,e)=>!bu(e)&&(gu(t,e)||tN(t,e)||hu(t,e)||xv(t,e)||((n,r)=>{const o=Le(n.dom,r).getOr(r),a=_v(n.dom,"prev");return r.isAtStart()&&(a(r.container())||a(o.container()))})(t,e)),Ts=(t,e)=>!bu(e)&&(yv(t,e)||eN(t,e)||pu(t,e)||kv(t,e)||((n,r)=>{const o=Oe(n.dom,r).getOr(r),a=_v(n.dom,"next");return r.isAtEnd()&&(a(r.container())||a(o.container()))})(t,e)),vu=(t,e)=>Os(t,e)||Ts(t,(n=>{const r=n.container(),o=n.offset();return V(r)&&o<r.data.length?M(r,o+1):n})(e)),Sv=(t,e)=>Gi(t.charAt(e)),Nv=(t,e)=>ua(t.charAt(e)),Rv=(t,e,n)=>{const r=e.data,o=M(e,0);return n||!Sv(r,0)||vu(t,o)?!!(n&&Nv(r,0)&&Os(t,o))&&(e.data=se+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},Av=(t,e,n)=>{const r=e.data,o=M(e,r.length-1);return n||!Sv(r,r.length-1)||vu(t,o)?!!(n&&Nv(r,r.length-1)&&Ts(t,o))&&(e.data=r.slice(0,-1)+se,!0):(e.data=r.slice(0,-1)+" ",!0)},Ov=(t,e,n)=>{if(0===n)return;const r=E(t),o=ir(r,Ze).getOr(r),a=t.data.slice(e,e+n),s=e+n>=t.data.length&&Ts(o,M(t,t.data.length)),i=0===e&&Os(o,M(t,0));t.replaceData(e,n,Qg(a,4,i,s))},dl=(t,e)=>{const n=t.data.slice(e),r=n.length-bk(n).length;Ov(t,e,r)},yu=(t,e)=>{const n=t.data.slice(0,e),r=n.length-Vf(n).length;Ov(t,e-r,r)},Cu=(t,e,n,r=!0)=>{const o=Vf(t.data).length,a=r?t:e,s=r?e:t;return r?a.appendData(s.data):a.insertData(0,s.data),zt(E(s)),n&&dl(a,o),a},sN=(t,e)=>((n,r)=>{const o=n.container(),a=n.offset();return!M.isTextPosition(n)&&o===r.parentNode&&a>M.before(r).offset()})(e,t)?M(e.container(),e.offset()-1):e,Tv=t=>{return fn(t.previousSibling)?C.some(V(e=t.previousSibling)?M(e,e.data.length):M.after(e)):t.previousSibling?gn(t.previousSibling):C.none();var e},Bv=t=>{return fn(t.nextSibling)?C.some(V(e=t.nextSibling)?M(e,0):M.before(e)):t.nextSibling?Te(t.nextSibling):C.none();var e},Dv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},lN=(t,e)=>e&&kt(t.schema.getBlockElements(),Ft(e)),dN=t=>{if(Zt(t)){const e=Va('<br data-mce-bogus="1">');return Jo(t),Jt(t,e),C.some(M.before(e.dom))}return C.none()},So=(t,e,n,r=!0)=>{const o=((t,e,n)=>{return(r=t,o=e,a=n,r?(s=o,Bv(i=a).orThunk(()=>Tv(i)).orThunk(()=>{return Oe(l=s,M.after(d=i)).orThunk(()=>Le(l,M.before(d)));var l,d})):((s,i)=>Tv(i).orThunk(()=>Bv(i)).orThunk(()=>{return l=s,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>Le(l,M.before(c))).orThunk(()=>Oe(l,M.after(d)));var l,d}))(o,a)).map(at(sN,n));var r,o,a,s,i})(e,t.getBody(),n.dom),a=ir(n,at(lN,t),(s=t.getBody(),l=>l.dom===s));var s;const i=((l,d,c)=>{const u=eo(l).filter(Qe),m=Wa(l).filter(Qe);return zt(l),(p=u,f=m,h=d,g=(b,v,y)=>{const w=b.dom,x=v.dom,k=w.data.length;return Cu(w,x,c),y.container()===x?M(w,k):y},p.isSome()&&f.isSome()&&h.isSome()?C.some(g(p.getOrDie(),f.getOrDie(),h.getOrDie())):C.none()).orThunk(()=>(c&&(u.each(b=>yu(b.dom,b.dom.length)),m.each(b=>dl(b.dom,0))),d));var p,f,h,g})(n,o,(d=n,kt(t.schema.getTextInlineElements(),Ft(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(dN).fold(()=>{r&&Dv(t,e,i)},l=>{r&&Dv(t,e,C.some(l))})},cN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,No=(t,e)=>vn(E(e),oE(t))&&!co(t.schema,e)&&t.dom.isEditable(e),Pv=t=>{var e,n;return"rtl"===Mt.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",cN.test(n))},Ur=(t,e,n)=>{const r=(o=t,a=e,bt(Mt.DOM.getParents(n.container(),"*",a),o));var o,a;return C.from(r[r.length-1])},an=(t,e)=>{const n=e.container(),r=e.offset();return t?Nr(n)?V(n.nextSibling)?M(n.nextSibling,0):M.after(n):qd(e)?M(n,r+1):e:Nr(n)?V(n.previousSibling)?M(n.previousSibling,n.previousSibling.data.length):M.before(n):Wd(e)?M(n,r-1):e},Mv=at(an,!0),Lv=at(an,!1),Iv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},wu=t=>Iv(t,"Delete"),uN=t=>Vg(t)||Ja(t),cl=(t,e)=>{return ar(t,e)?no(e,uN,(n=t,r=>Vo(mn(r),n,Tt))):C.none();var n},xu=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Fv=(t,e,n)=>De(Te(n),gn(n),(r,o)=>{const a=an(!0,r),s=an(!1,o),i=an(!1,e);return t?Oe(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a)):Le(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s))}).getOr(!0),Uv=t=>{var e;return(8===dg(e=t)||"#comment"===Ft(e)?eo(t):Dd(t)).bind(Uv).orThunk(()=>C.some(t))},jv=(t,e,n,r=!0)=>{var o;e.deleteContents();const a=Uv(n).getOr(n),s=E(null!==(o=t.dom.getParent(a.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(s.dom===t.getBody()?xu(t,r):Zt(s)&&(Sr(s),r&&t.selection.setCursorLocation(s.dom,0)),!Tt(n,s)){const l=Vo(mn(s),n)?[]:mn(i=s).map(ye).map(d=>bt(d,c=>!Tt(i,c))).getOr([]);H(l.concat(ye(n)),d=>{Tt(d,s)||ar(d,s)||!Zt(d)||zt(d)})}var i},ku=t=>ke(t,"td,th"),_u=(t,e)=>({start:t,end:e}),Bs=In([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ul=(t,e)=>ro(E(t),"td,th",e),zv=t=>!Tt(t.start,t.end),Hv=(t,e)=>xs(t.start,e).bind(n=>xs(t.end,e).bind(r=>qo(Tt(n,r),n))),Eu=t=>e=>Hv(e,t).map(n=>({rng:e,table:n,cells:ku(n)})),$v=(t,e,n,r)=>{if(n.collapsed||!t.forall(zv))return C.none();if(e.isSameTable){const o=t.bind(Eu(r));return C.some({start:o,end:o})}{const o=ul(n.startContainer,r),a=ul(n.endContainer,r),s=o.bind((l=r,d=>xs(d,l).bind(c=>dt(ku(c)).map(u=>_u(d,u))))).bind(Eu(r)),i=a.bind((l=>d=>xs(d,l).bind(c=>Y(ku(c)).map(u=>_u(u,d))))(r)).bind(Eu(r));return C.some({start:s,end:i})}var l},Vv=(t,e)=>Yr(t,n=>Tt(n,e)),Su=t=>De(Vv(t.cells,t.rng.start),Vv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),qv=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(a=>o.setStartAfter(a.dom)),r.each(a=>o.setEndBefore(a.dom)),o},Wv=t=>H(t,e=>{ve(e,"contenteditable"),Sr(e)}),Nu=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Ru(t,o,e,!1).each(a=>a())},Kv=t=>{const e=ma(t),n=E(t.selection.getNode());wi(n.dom)&&Zt(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&qt(e,r=>Tt(r,n))&&fe(n,"data-mce-selected","1")},Gv=(t,e,n)=>C.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:a,isStartInTable:s})=>{const i=C.from((d=t).dom.getParent(s?a.endContainer:a.startContainer,d.dom.isBlock)).map(E);var d;a.deleteContents(),((d,c,u)=>{u.each(m=>{c?zt(m):(Sr(m),d.selection.setCursorLocation(m.dom,0))})})(t,s,i.filter(Zt));const l=s?e[0]:e[e.length-1];return Nu(t,l,r,s),Zt(l)?C.none():C.some(s?e.slice(1):e.slice(0,-1))}).getOr(e);Wv(o),Kv(t)}),fN=(t,e,n,r)=>C.some(()=>{const o=t.selection.getRng(),a=e[0],s=n[n.length-1];Nu(t,a,o,!0),Nu(t,s,o,!1);const i=Zt(a)?e:e.slice(1),l=Zt(s)?n:n.slice(0,-1);Wv(i.concat(l)),r.deleteContents(),Kv(t)}),Ru=(t,e,n,r=!0)=>C.some(()=>{jv(t,e,n,r)}),gN=(t,e)=>C.some(()=>So(t,!1,e)),Yv=(t,e)=>Xt(fr(e,t),Za),Au=(t,e)=>Xt(fr(e,t),Rd("caption")),ml=(t,e)=>C.some(()=>{Sr(e),t.selection.setCursorLocation(e.dom,0)}),Xv=(t,e)=>t?fv(e):gv(e),Ou=(t,e)=>{const n=E(t.selection.getStart(!0)),r=ma(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=E(t.getBody());return Au(r,n).fold(()=>((o,a,s,i)=>{const l=M.fromRangeStart(o.selection.getRng());return Yv(s,i).bind(d=>{return Zt(d)?ml(o,d):(u=s,p=d,f=l,ws(a,o.getBody(),f).bind(h=>Yv(u,E(h.getNode())).bind(g=>Tt(g,p)?C.none():C.some(Et))));var u,p,f})})(t,e,r,n).orThunk(()=>qo(((o,a)=>{const s=M.fromRangeStart(o.selection.getRng());return Xv(a,s)||en(a,o.getBody(),s).exists(i=>Xv(a,i))})(t,e),Et)),o=>((a,s,i,l)=>{const d=M.fromRangeStart(a.selection.getRng());return Zt(l)?ml(a,l):(u=i,p=l,f=d,ws(m=s,(c=a).getBody(),f).fold(()=>C.some(Et),h=>{return b=m,v=f,y=h,Te((g=p).dom).bind(w=>gn(g.dom).map(x=>b?v.isEqual(w)&&y.isEqual(x):v.isEqual(x)&&y.isEqual(w))).getOr(!0)?((g,b)=>ml(g,b))(c,p):((g,b,v)=>Au(g,E(v.getNode())).fold(()=>C.some(Et),y=>qo(!Tt(y,b),Et)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(t,e,r,o))})(t,e,n):((o,a,s)=>{const i=E(o.getBody()),l=o.selection.getRng();return 0!==s.length?Gv(o,s,C.none()):(d=o,u=l,Au(c=i,a).fold(()=>{return p=d,((t,e)=>{const n=(a=t,s=>Tt(a,s)),r=((a,s)=>{const i=ul(a.startContainer,s),l=ul(a.endContainer,s);return De(i,l,_u)})(e,n),o=((a,s)=>{const i=p=>xs(E(p),s),l=i(a.startContainer),d=i(a.endContainer),c=l.isSome(),u=d.isSome(),m=De(l,d,Tt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:m,isMultiTable:!m&&c&&u}})(e,n);var a;return((a,s,i)=>a.exists(l=>{return c=i,!zv(d=l)&&Hv(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&Ic(l.start,s);var d,c}))(r,e,n)?r.map(a=>Bs.singleCellTable(e,a.start)):o.isMultiTable?((a,s,i,l)=>$v(a,s,i,l).bind(({start:d,end:c})=>{const u=d.bind(Su).getOr([]),m=c.bind(Su).getOr([]);if(u.length>0&&m.length>0){const p=qv(i,s);return C.some(Bs.multiTable(u,m,p))}return C.none()}))(r,o,e,n):((a,s,i,l)=>$v(a,s,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=s,u=Su(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Bs.fullTable(d.table));if(u.length>0){if(c)return C.some(Bs.partialTable(u,C.none()));{const m=qv(i,s);return C.some(Bs.partialTable(u,C.some({...s,rng:m})))}}return C.none()}))(r,o,e,n)})(c,u).bind(g=>g.fold(at(Ru,p),at(gN,p),at(Gv,p),at(fN,p)));var p},p=>ml(d,p)));var d,c,u})(t,n,r)},Ro=(t,e)=>{let n=e;for(;n&&n!==t;){if(Cn(n)||Ut(n))return n;n=n.parentNode}return null},hN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],bN=W.each,Tu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>qt(hN,a=>be(o,a))||n.has(o);return{compare:(o,a)=>{if(o.nodeName!==a.nodeName||o.nodeType!==a.nodeType)return!1;const s=l=>{const d={};return bN(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||r(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(kt(l,c)){const u=d[c];if(ae(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(kt(d,c))return!1;return!0};return!(nt(o)&&nt(a)&&(!i(s(o),s(a))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(a,"style"))))||nn(o)||nn(a))},isAttributeInternal:r}},Qv=(t,e,n,r)=>{const o=n.name;for(let a=0,s=t.length;a<s;a++){const i=t[a];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let a=0,s=e.length;a<s;a++){const i=e[a],l=i.name;if(l in n.attributes.map){const d=r.attributes[l];d?d.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},Jv=(t,e)=>{const n=(r,o)=>{lt(r,a=>{const s=ft(a.nodes);H(a.filter.callbacks,i=>{for(let l=s.length-1;l>=0;l--){const d=s[l];(o?void 0!==d.attr(a.filter.name):d.name===a.filter.name)&&!Gt(d.parent)||s.splice(l,1)}s.length>0&&i(s,a.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},Zv=(t,e,n,r={})=>{const o=((a,s,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)Qv(a,s,u,l)})(i),l})(t,e,n);Jv(o,r)},Bu=(t,e,n)=>{if(t.insert&&e(n)){const r=new Ie("br",1);r.attr("data-mce-bogus","1"),n.empty().append(r)}else n.empty().append(new Ie("#text",3)).value=se},t0=(t,e)=>{const n=null==t?void 0:t.firstChild;return X(n)&&n===t.lastChild&&n.name===e},Ds=(t,e,n,r)=>r.isEmpty(e,n,o=>((a,s)=>{const i=a.getElementRule(s.name);return!0===(null==i?void 0:i.paddEmpty)})(t,o)),vN=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return C.from(e)},Du=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&Du(o,e,n);t.unwrap()}},Pu=(t,e,n,r=Et)=>{const o=e.getTextBlockElements(),a=e.getNonEmptyElements(),s=e.getWhitespaceElements(),i=W.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(o[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&o[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(e.isValidChild(m.name,u.name)){h.reverse(),p=h[0].clone(),r(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),r(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}Ds(e,a,s,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(Ds(e,a,s,m)||t0(m,"br"))&&m.empty().remove()}else Du(u,e);else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new Ie("ul",1);r(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new Ie("div",1);r(g),u.wrap(g)}else Du(u,e)}}},e0=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((r,o)=>{let a=r;for(;a;){if("a"===a.name)return!0;a=a.parent}return!1})(n)),Mu=t=>t.collapsed?t:(e=>{const n=M.fromRangeStart(e),r=M.fromRangeEnd(e),o=e.commonAncestorContainer;return en(!1,o,r).map(a=>!Fn(n,r,o)&&Fn(n,a,o)?((s,i,l,d)=>{const c=document.createRange();return c.setStart(s,i),c.setEnd(l,d),c})(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)})(t),Lu=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},n0=(t,e)=>{const n=M.after(t),r=jn(e).prev(n);return r?r.toRange():null},xN=["pre"],Iu=wi,kN=(t,e,n)=>{var r,o;const a=t.selection,s=t.dom,i=t.parser,l=n.merge,d=Mr({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=a.getRng();const m=u.startContainer,p=t.getBody();var y,w;m===p&&a.isCollapsed()&&s.isBlock(p.firstChild)&&(y=t,X(w=p.firstChild)&&!y.schema.getVoidElements()[w.nodeName])&&s.isEmpty(p.firstChild)&&(u=s.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),a.setRng(u)),a.isCollapsed()||(y=>{const w=y.dom,x=Mu(y.selection.getRng());y.selection.setRng(x);const k=w.getParent(x.startContainer,Iu);var _,T,L;_=w,T=x,X(L=k)&&L===_.getParent(T.endContainer,Iu)&&Ic(E(L),T)?Ru(y,x,E(k)):x.startContainer===x.endContainer&&x.endOffset-x.startOffset==1&&V(x.startContainer.childNodes[x.startOffset])?x.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=a.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,a)=>{const s=o.getNonEmptyElements();return X(a)&&(a.isEmpty(s)||(l=a,o.getBlockElements()[l.name]&&X((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===se)(l.firstChild)));var l,d})(t,r)&&(r=null==r?void 0:r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,w)=>!!Lu(y,w))(s,f))return u=((t,e,n,r)=>{const o=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,r),a=Lu(e,n.startContainer),s=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||X(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===se||Wt(r)))?t.slice(0,-1):t;var r,e,n})(bt(null!==(l=null==(i=o.firstChild)?void 0:i.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var i,l;const d=e.getRoot(),c=u=>{const m=M.fromRangeStart(n),p=jn(e.getRoot()),f=1===u?p.prev(m):p.next(m),h=null==f?void 0:f.getNode();return!h||Lu(e,h)!==a};return a?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&W.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=M.before(h),v=jn(g).next(b);return v?v.toRange():null})(u,p)})(a,s,d):c(2)?(u=a,p=d,e.insertAfter((m=s).reverse(),u),n0(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),w=v.cloneRange();return y.setStartBefore(b),w.setEndAfter(b),[y.cloneContents(),w.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),W.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),n0(m[m.length-1],p)})(a,s,d,n):null;var u,m,p})(d,s,a.getRng(),g),u&&a.setRng(u),e;!0===n.paste&&((y,w,x,k)=>{var _;const T=w.firstChild,L=w.lastChild,P=T===("bookmark"===L.attr("data-mce-type")?L.prev:L),S=Ot(xN,T.name);if(P&&S){const O="false"!==T.attr("contenteditable"),R=(null===(_=y.getParent(x,y.isBlock))||void 0===_?void 0:_.nodeName.toLowerCase())===T.name,B=C.from(Ro(k,x)).forall(Cn);return O&&R&&B}return!1})(s,g,f,t.getBody())&&(null===(r=g.firstChild)||void 0===r||r.unwrap()),(y=>{let w=y;for(;w=w.walk();)1===w.type&&w.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!s.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid){t.selection.setContent(c);let y,w=a.getNode();const x=t.getBody();for(Qa(w)?w=y=x:y=w;y&&y!==x;)w=y,y=y.parentNode;e=w===x?x.innerHTML:s.getOuterHTML(w);const k=i.parse(e),_=(O=>{for(let R=O;R;R=R.walk())if("mce_marker"===R.attr("id"))return C.some(R);return C.none()})(k),T=_.bind(vN).getOr(k);_.each(O=>O.replace(g));const L=g.children(),P=null!==(o=g.parent)&&void 0!==o?o:k;g.unwrap();const S=bt(L,O=>e0(t.schema,O,P));Pu(S,t.schema,T),Zv(i.getNodeFilters(),i.getAttributeFilters(),k),e=d.serialize(k),w===x?s.setHTML(x,e):s.setOuterHTML(w,e)}else e=d.serialize(g),((y,w,x)=>{var k;if("all"===x.getAttribute("data-mce-bogus"))null===(k=x.parentNode)||void 0===k||k.insertBefore(y.dom.createFragment(w),x);else{const _=x.firstChild;!_||_===x.lastChild&&"BR"===_.nodeName?y.dom.setHTML(x,w):y.selection.setContent(w,{no_events:!0})}})(t,e,f);var v;return((y,w)=>{const x=y.schema.getTextInlineElements(),k=y.dom;if(w){const _=y.getBody(),T=Tu(y);W.each(k.select("*[data-mce-fragment]"),L=>{if(X(x[L.nodeName.toLowerCase()])&&On(cu(k,L),O=>!lv.has(O)))for(let P=L.parentElement;X(P)&&P!==_&&!XS(k,L,P);P=P.parentElement)if(T.compare(P,L)){k.remove(L,!0);break}})}})(t,l),((y,w)=>{var x,k,_;let T;const L=y.dom,P=y.selection;if(!w)return;P.scrollIntoView(w);const S=Ro(y.getBody(),w);if(S&&"false"===L.getContentEditable(S))return L.remove(w),void P.select(S);let O=L.createRng();const R=w.previousSibling;if(V(R)){O.setStart(R,null!==(k=null===(x=R.nodeValue)||void 0===x?void 0:x.length)&&void 0!==k?k:0);const G=w.nextSibling;V(G)&&(R.appendData(G.data),null===(_=G.parentNode)||void 0===_||_.removeChild(G))}else O.setStartBefore(w),O.setEndBefore(w);const B=L.getParent(w,L.isBlock);L.remove(w),B&&L.isEmpty(B)&&(Jo(E(B)),O.setStart(B,0),O.setEnd(B,0),Iu(B)||B.getAttribute("data-mce-fragment")||!(T=(G=>{let $=M.fromRangeStart(G);return $=jn(y.getBody()).next($),null==$?void 0:$.toRange()})(O))?L.add(B,L.create("br",{"data-mce-bogus":"1"})):(O=T,L.remove(B))),P.setRng(O)})(t,s.get("mce_marker")),v=t.getBody(),W.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,w)=>{C.from(y.getParent(w,"td,th")).map(E).each(Xk)})(s,a.getStart()),(y=>{H(ft(y.getBody().querySelectorAll("details")),w=>{const x=bt(ft(w.children),k=>"SUMMARY"===k.nodeName);x.length>1&&H(x.slice(1),k=>{const _=E(k);Ko(_,"mce-accordion-summary"),Np(_,"p")})})})(t),((y,w,x)=>{const k=yg(E(x),_=>Tt(_,E(w)));q(k,k.length-2).filter(ze).fold(()=>Xd(y,w),_=>Xd(y,_.dom))})(t.schema,t.getBody(),a.getStart()),e},fl=t=>t instanceof Ie,Fu=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&Eo(r=t)&&Te(r.getBody()).each(o=>{const a=o.getNode(),s=dr(a)?Te(a).getOr(o):o;r.selection.setRng(s.toRange())})},r0=t=>Rt(t)?t:It,Uu=(t,e,n)=>{const r=e(t),o=r0(n);return r.orThunk(()=>o(t)?C.none():((a,s,i)=>{let l=a.dom;const d=r0(i);for(;l.parentNode;){l=l.parentNode;const c=E(l),u=s(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,o))},ju=$c,o0=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const a=r[o];if(rn(a)&&!1===a.inherit&&t.dom.is(e,a.selector))return!0}return!1},zu=(t,e,n,r,o)=>{const a=t.dom.getRoot();if(e===a)return!1;const s=t.dom.getParent(e,i=>!!o0(t,i,n)||i.parentNode===a||!!Hn(t,i,n,r,!0));return!!Hn(t,s,n,r,o)},gl=(t,e,n)=>!(!oe(n)||!ju(e,n.inline))||!(!zn(n)||!ju(e,n.block))||!!rn(n)&&nt(e)&&t.is(e,n.selector),a0=(t,e,n,r,o,a)=>{const s=n[r],i="attributes"===r;if(Rt(n.onmatch))return n.onmatch(e,n,r);if(s)if(Ff(s)){for(let l=0;l<s.length;l++)if(i?t.getAttrib(e,s[l]):Qi(t,e,s[l]))return!0}else for(const l in s)if(kt(s,l)){const d=i?t.getAttrib(e,l):Qi(t,e,l),c=Pr(s[l],a),u=Gt(d)||za(d);if(u&&Gt(c))continue;if(o&&u&&!n.exact||(!o||n.exact)&&!ju(d,Vc(c,l)))return!1}return!0},Hn=(t,e,n,r,o)=>{const a=t.formatter.get(n),s=t.dom;if(a&&nt(e))for(let i=0;i<a.length;i++){const l=a[i];if(gl(t.dom,e,l)&&a0(s,e,l,"attributes",o,r)&&a0(s,e,l,"styles",o,r)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,Pr(d[c],r)))return;return l}}},Hu=(t,e,n,r,o)=>{if(r)return zu(t,r,e,n,o);if(r=t.selection.getNode(),zu(t,r,e,n,o))return!0;const a=t.selection.getStart();return!(a===r||!zu(t,a,e,n,o))},ba=_e,s0=t=>(e=>{const n=[];let r=e;for(;r;){if(V(r)&&r.data!==ba||r.childNodes.length>1)return[];nt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,i0=t=>{if(t){const e=new re(t,t);for(let n=e.current();n;n=e.next())if(V(n))return n}return null},$u=t=>{const e=ge("span");return wr(e,{id:Tc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Jt(e,Go(ba)),e},Vu=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(s0(e))So(t,!1,E(e),n);else{const a=o.getRng(),s=r.getParent(e,r.isBlock),i=a.startContainer,l=a.startOffset,d=a.endContainer,c=a.endOffset,u=(m=>{const p=i0(m);return p&&p.data.charAt(0)===ba&&p.deleteData(0,1),p})(e);r.remove(e,!0),i===u&&l>0&&a.setStart(u,l-1),d===u&&c>0&&a.setEnd(u,c-1),s&&r.isEmpty(s)&&Sr(E(s)),o.setRng(a)}},qu=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(e)Vu(t,e,n);else if(!(e=Co(t.getBody(),o.getStart())))for(;e=r.get(Tc);)Vu(t,e,n)},l0=(t,e)=>(t.appendChild(e),e),d0=(t,e)=>{var n;const r=Gr(t,(a,s)=>l0(a,s.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return l0(r,o.createTextNode(ba))},c0=t=>{const e=$u(!1),n=d0(t,e.dom);return{caretContainer:e,caretPosition:M(n,0)}},u0=(t,e)=>{const{caretContainer:n,caretPosition:r}=c0(e);return We(E(t),n),zt(E(t)),r},m0=(t,e)=>{const n=t.schema.getTextInlineElements();return kt(n,Ft(e))&&!pn(e.dom)&&!so(e.dom)},f0=t=>pn(t.dom)&&s0(t.dom),Ps={},g0=yn(["pre"]);((t,e)=>{Ps[t]||(Ps[t]=[]),Ps[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=bt(bt(r,g0),(a=r,s=>{const i=s.previousSibling;return g0(i)&&Ot(a,i)}));H(o,a=>{((s,i)=>{const l=E(i),d=sr(l).dom;zt(l),oo(E(s),[ge("br",d),ge("br",d),...ye(l)])})(a.previousSibling,a)})}var a})})("pre");const p0=["fontWeight","fontStyle","color","fontSize","fontFamily"],h0=(t,e)=>{const n=t.get(e);return $t(n)?Xt(n,r=>{return oe(r)&&"span"===r.inline&&he((o=r).styles)&&qt(_t(o.styles),a=>Ot(p0,a));var o}):C.none()},b0=(t,e)=>Le(e,M.fromRangeStart(t)).isNone(),v0=(t,e)=>!1===Oe(e,M.fromRangeEnd(t)).exists(n=>!Wt(n.getNode())||Oe(e,n).isSome()),y0=t=>e=>Vk(e)&&t.isEditable(e),C0=t=>bt(t.getSelectedBlocks(),y0(t.dom)),Wu=W.each,Ku=t=>nt(t)&&!nn(t)&&!pn(t)&&!so(t),w0=(t,e)=>{for(let n=t;n;n=n[e]){if(V(n)&&Tn(n.data))return t;if(nt(n)&&!nn(n))return n}return t},x0=(t,e,n)=>{const r=Tu(t),o=nt(e)&&wo(e),a=nt(n)&&wo(n);if(o&&a){const s=w0(e,"previousSibling"),i=w0(n,"nextSibling");if(r.compare(s,i)){for(let l=s.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,s.appendChild(d)}return t.dom.remove(i),W.each(W.grep(i.childNodes),l=>{s.appendChild(l)}),s}}return n},k0=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const a=null!==(o=x0(t,tb(r),r))&&void 0!==o?o:r;x0(t,a,tb(a,!0))}},Gu=(t,e,n)=>{Wu(t.childNodes,r=>{Ku(r)&&(e(r)&&n(r),r.hasChildNodes()&&Gu(r,e,n))})},_0=(t,e)=>n=>!(!n||!Qi(t,n,e)),E0=(t,e,n)=>r=>{var o,a;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(a=r).nodeName&&0===o.getAttribs(a).length&&o.remove(a,!0)},Ao=In([{keep:[]},{rename:["name"]},{removed:[]}]),SN=/^(src|href|style)$/,Yu=W.each,pl=$c,S0=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),N0=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(nt(r)){const a=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>a?a:o]}return V(r)&&n&&o>=r.data.length&&(r=new re(r,t.getBody()).next()||r),V(r)&&!n&&0===o&&(r=new re(r,t.getBody()).prev()||r),r},R0=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Xu=(t,e,n,r)=>{var o;const a=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(a,e),a.appendChild(e),a},A0=(t,e,n,r,o)=>{const a=E(e),s=E(t.create(r,o)),i=n?wg(a):Cg(a);return oo(s,i),n?(We(a,s),Og(s,a)):(kr(a,s),Jt(s,a)),s.dom},O0=(t,e,n)=>{const r=e.parentNode;let o;const a=t.dom,s=Me(t);var i;zn(n)&&r===a.getRoot()&&(n.list_block&&pl(e,n.list_block)||H(ft(e.childNodes),i=>{fa(t,s,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Xu(a,i,s),a.setAttribs(o,fs(t))):o=null})),rn(i=n)&&oe(i)&&Vo(jt(i,"mixed"),!0)&&!pl(n.inline,e)||a.remove(e,!0)},T0=(t,e,n)=>Xe(t)?{name:e,value:null}:{name:t,value:Pr(e,n)},B0=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},D0=(t,e,n,r,o)=>{let a=!1;Yu(n.styles,(s,i)=>{const{name:l,value:d}=T0(i,s,r),c=Vc(d,l);(n.remove_similar||Ne(d)||!nt(o)||pl(Qi(t,o,l),c))&&t.setStyle(e,l,""),a=!0}),a&&B0(t,e)},P0=(t,e,n,r,o)=>{const a=t.dom,s=Tu(t),i=t.schema;if(oe(e)&&Oi(i,e.inline)&&co(i,r)&&r.parentElement===t.getBody())return O0(t,r,e),Ao.removed();if(!e.ceFalseOverride&&r&&"false"===a.getContentEditableParent(r)||r&&!gl(a,r,e)&&(!e.links||"A"!==r.nodeName))return Ao.keep();const l=r,d=e.preserve_attributes;if(oe(e)&&"all"===e.remove&&$t(d)){const c=bt(a.getAttribs(l),u=>Ot(d,u.name.toLowerCase()));if(a.removeAllAttribs(l),H(c,u=>a.setAttrib(l,u.name,u.value)),c.length>0)return Ao.rename("span")}if("all"!==e.remove){D0(a,l,e,n,o),Yu(e.attributes,(u,m)=>{const{name:p,value:f}=T0(m,u,n);if(e.remove_similar||Ne(f)||!nt(o)||pl(a.getAttrib(o,p),f)){if("class"===p){const h=a.getAttrib(l,p);if(h){let g="";if(H(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void a.setAttrib(l,p,g)}}if(SN.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&yn(["li"])(l)&&"none"===a.getStyle(l,"list-style-type"))return l.removeAttribute(p),void a.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),Yu(e.classes,u=>{u=Pr(u,n),nt(o)&&!a.hasClass(o,u)||a.removeClass(l,u)});const c=a.getAttribs(l);for(let u=0;u<c.length;u++)if(!s.isAttributeInternal(c[u].nodeName))return Ao.keep()}return"none"!==e.remove?(O0(t,l,e),Ao.removed()):Ao.keep()},NN=(t,e,n,r)=>P0(t,e,n,r,r).fold(J(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),J(null)),M0=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((a,s,i,l,d)=>{const c=a.formatter.get(s),u=c[0],m=a.dom,p=a.selection,f=y=>{const w=((x,k,_,T,L)=>{let P;return k.parentNode&&H(Ji(x.dom,k.parentNode).reverse(),S=>{if(!P&&nt(S)&&"_start"!==S.id&&"_end"!==S.id){const O=Hn(x,S,_,T,L);O&&!1!==O.split&&(P=S)}}),P})(a,y,s,i,d);return((x,k,_,T,L,P,S,O)=>{var R,B;let G,$;const ct=x.dom;if(_){const Q=_.parentNode;for(let vt=T.parentNode;vt&&vt!==Q;vt=vt.parentNode){let Ct=ct.clone(vt,!1);for(let tt=0;tt<k.length&&(Ct=NN(x,k[tt],O,Ct),null!==Ct);tt++);Ct&&(G&&Ct.appendChild(G),$||($=Ct),G=Ct)}S.mixed&&ct.isBlock(_)||(T=null!==(R=ct.split(_,T))&&void 0!==R?R:T),G&&$&&(null===(B=L.parentNode)||void 0===B||B.insertBefore(G,L),$.appendChild(L),oe(S)&&k0(x,S,0,G))}return T})(a,c,w,y,y,0,u,i)},h=y=>qt(c,w=>Ms(a,w,i,y,y)),g=y=>{const w=ft(y.childNodes),x=h(y)||qt(c,_=>gl(m,y,_)),k=y.parentNode;if(!x&&X(k)&&Wc(u)&&h(k),u.deep&&w.length)for(let _=0;_<w.length;_++)g(w[_]);H(["underline","line-through","overline"],_=>{nt(y)&&a.dom.getStyle(y,"text-decoration")===_&&y.parentNode&&nb(m,y.parentNode)===_&&Ms(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:_}},void 0,y)})},b=y=>{const w=m.get(y?"_start":"_end");if(w){let x=w[y?"firstChild":"lastChild"];return nn(k=x)&&nt(k)&&("_start"===k.id||"_end"===k.id)&&(x=x[y?"firstChild":"lastChild"]),V(x)&&0===x.data.length&&(x=y?w.previousSibling||w.nextSibling:w.nextSibling||w.previousSibling),m.remove(w,!0),x}var k;return null},v=y=>{let w,x,k=xo(m,y,c,y.collapsed);if(u.split){if(k=al(k),w=N0(a,k,!0),x=N0(a,k),w!==x){if(w=R0(w,!0),x=R0(x,!1),S0(m,w,x)){const T=C.from(w.firstChild).getOr(w);return f(A0(m,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(S0(m,x,w)){const T=C.from(x.lastChild).getOr(x);return f(A0(m,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}w=Xu(m,w,"span",{id:"_start","data-mce-type":"bookmark"}),x=Xu(m,x,"span",{id:"_end","data-mce-type":"bookmark"});const _=m.createRng();_.setStartAfter(w),_.setEndBefore(x),_s(m,_,T=>{H(T,L=>{nn(L)||nn(L.parentNode)||f(L)})}),f(w),f(x),w=b(!0),x=b()}else w=x=f(w);k.startContainer=w.parentNode?w.parentNode:w,k.startOffset=m.nodeIndex(w),k.endContainer=x.parentNode?x.parentNode:x,k.endOffset=m.nodeIndex(x)+1}_s(m,k,_=>{H(_,g)})};if(l){if(ks(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);vb(a,s,l,i)}else p.isCollapsed()&&oe(u)&&!ma(a).length?((t,e,n,r)=>{const o=t.dom,a=t.selection;let s=!1;const i=t.formatter.get(e);if(!i)return;const l=a.getRng(),d=l.startContainer,c=l.startOffset;let u=d;V(d)&&(c!==d.data.length&&(s=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Hn(t,u,e,n,r)){p=u;break}u.nextSibling&&(s=!0),m.push(u),u=u.parentNode}if(p)if(s){const f=a.getBookmark();l.collapse(!0);let h=xo(o,l,i,!0);h=al(h),t.formatter.remove(e,n,h,r),a.moveToBookmark(f)}else{const f=Co(t.getBody(),p),h=$u(!1).dom;((v,y,w)=>{var x,k;const _=v.dom,T=_.getParent(w,at(zc,v.schema));T&&_.isEmpty(T)?null===(x=w.parentNode)||void 0===x||x.replaceChild(y,w):((L=>{const P=ke(L,"br"),S=bt((O=>{const R=[];let B=O.dom;for(;B;)R.push(E(B)),B=B.lastChild;return R})(L).slice(-1),io);P.length===S.length&&H(S,zt)})(E(w)),_.isEmpty(w)?null===(k=w.parentNode)||void 0===k||k.replaceChild(y,w):_.insertAfter(y,w))})(t,h,null!=f?f:p);const g=((v,y,w,x,k,_)=>{const T=v.formatter,L=v.dom,P=bt(_t(T.get()),O=>O!==x&&!xe(O,"removeformat")),S=(O=v,R=w,Re(P,(G,$)=>{const ct=qc(O,$,Ct=>{const tt=it=>Rt(it)||it.length>1&&"%"===it.charAt(0);return qt(["styles","attributes"],it=>jt(Ct,it).exists(gt=>{const N=$t(gt)?gt:yd(gt);return qt(N,tt)}))});return O.formatter.matchNode(R,$,{},ct)?G.concat([$]):G},[]));var O,R;if(bt(S,O=>!((R,B,G)=>{const $=["inline","block","selector","attributes","styles","classes"],ct=Q=>Fa(Q,(vt,Ct)=>qt($,tt=>tt===Ct));return qc(R,B,Q=>{const vt=ct(Q);return qc(R,G,Ct=>{const tt=ct(Ct);return((it,gt,N=bn)=>qr(N).eq(it,gt))(vt,tt)})})})(v,O,x)).length>0){const O=w.cloneNode(!1);return L.add(y,O),T.remove(x,k,O,_),L.remove(O),C.some(O)}return C.none()})(t,h,p,e,n,r),b=d0(m.concat(g.toArray()),h);f&&Vu(t,f,!1),a.setCursorLocation(b,1),o.isEmpty(p)&&o.remove(p)}})(a,s,i,d):(Zh(a,()=>Uc(a,v),y=>oe(u)&&Hu(a,s,i,y)),a.nodeChanged()),y=a,x=i,"removeformat"===(w=s)?H(C0(y.selection),k=>{H(p0,_=>y.dom.setStyle(k,_,"")),B0(y.dom,k)}):h0(y.formatter,w).each(k=>{H(C0(y.selection),_=>D0(y.dom,_,k,x,null))}),vb(a,s,l,i);var y,w,x})(t,e,n,r,o)},Ms=(t,e,n,r,o)=>P0(t,e,n,r,o).fold(It,a=>(t.dom.rename(r,a),!0),Vt),L0=W.each,hl=W.each,I0=(t,e,n,r)=>{if(hl(n.styles,(o,a)=>{t.setStyle(e,a,Pr(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},RN=(t,e,n,r)=>{const o=t.formatter.get(e),a=o[0],s=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=a)=>{Rt(h.onformat)&&h.onformat(f,h,n,r),I0(i,f,h,n),hl(h.attributes,(g,b)=>{i.setAttrib(f,b,Pr(g,n))}),hl(h.classes,g=>{const b=Pr(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return hl(f,b=>!(!rn(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!X(b.collapsed)||b.collapsed===s)&&i.is(h,b.selector)&&!pn(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=a.inline||a.block,w=(f=>{if(ut(f)){const h=i.create(f);return d(h),h}return null})(y);_s(f,h,x=>{let k;const _=T=>{let L=!1,P=v,S=!1;const O=T.parentNode,R=O.nodeName.toLowerCase(),B=f.getContentEditable(T);X(B)&&(P=v,v="true"===B,L=!0,S=eb(t,T));const G=v&&!L;if(Wt(T)&&!(($,ct,Q,vt)=>{if(mE($)&&oe(ct)&&Q.parentNode){const Ct=fp($.schema),tt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(a=E(o.parentNode),Xt(a.dom.childNodes,i=>(a=>!Tt(n,a)&&r(a))(E(i))).map(E)):C.none();var a})(t,e).isSome())(E(Q),it=>pn(it.dom));return Ho(Ct,vt)&&Zt(E(Q.parentNode),!1)&&!tt}return!1})(t,a,T,R))return k=null,void(zn(a)&&f.remove(T));if($=T,zn(ct=a)&&!0===ct.wrapper&&Hn(t,$,e,n))k=null;else{if((($,ct,Q)=>{const vt=zn(Ct=a)&&!0!==Ct.wrapper&&zc(t.schema,$)&&fa(t,ct,y);var Ct;return Q&&vt})(T,R,G)){const $=f.rename(T,y);return d($),b.push($),void(k=null)}if(rn(a)){let $=c(o,T);if(!$&&X(O)&&Wc(a)&&($=c(o,O)),!oe(a)||$)return void(k=null)}X(w)&&(($,ct,Q,vt)=>{const Ct=$.nodeName.toLowerCase(),tt=fa(t,y,Ct)&&fa(t,ct,y),it=!g&&V($)&&Si($.data),gt=pn($),N=!oe(a)||!f.isBlock($);return(Q||vt)&&tt&&!it&&!gt&&N})(T,R,G,S)?(k||(k=f.clone(w,!1),O.insertBefore(k,T),b.push(k)),S&&L&&(v=P),k.appendChild(T)):(k=null,H(ft(T.childNodes),_),L&&(v=P),k=null)}var $,ct};H(x,_)}),!0===a.links&&H(b,x=>{const k=_=>{"A"===_.nodeName&&d(_,a),H(ft(_.childNodes),k)};k(x)}),H(b,x=>{const k=(_=>{let T=0;return H(_.childNodes,L=>{var P;X(P=L)&&V(P)&&0===P.length||nn(L)||T++}),T})(x);var _;!(b.length>1)&&f.isBlock(x)||0!==k?(oe(a)||zn(a)&&a.wrapper)&&(a.exact||1!==k||(x=Xt((_=x).childNodes,jc).filter(L=>"false"!==f.getContentEditable(L)&&gl(f,L,a)).map(L=>{const P=f.clone(L,!1);return d(P),f.replace(P,_,!0),f.remove(L,!0),P}).getOr(_)),((_,T,L,P)=>{L0(T,S=>{var O,R,B;oe(S)&&L0(_.dom.select(S.inline,P),O=>{Ku(O)&&Ms(_,S,L,O,S.exact?O:null)}),O=_.dom,B=P,(R=S).clear_child_styles&&Wu(O.select(R.links?"*:not(a)":"*",B),$=>{Ku($)&&wo($)&&Wu(R.styles,(ct,Q)=>{O.setStyle($,Q,"")})})})})(t,o,n,x),((_,T,L,P,S)=>{const O=S.parentNode;Hn(_,O,L,P)&&Ms(_,T,P,S)||T.merge_with_parents&&O&&_.dom.getParent(O,R=>!!Hn(_,R,L,P)&&(Ms(_,T,P,S),!0))})(t,a,e,n,x),((_,T,L,P)=>{if(T.styles&&T.styles.backgroundColor){const S=_0(_,"fontSize");Gu(P,O=>S(O)&&wo(O),E0(_,"backgroundColor",Pr(T.styles.backgroundColor,L)))}})(f,a,n,x),((_,T,L,P)=>{const S=O=>{if(nt(O)&&nt(O.parentNode)&&wo(O)){const R=nb(_,O.parentNode);_.getStyle(O,"color")&&R?_.setStyle(O,"text-decoration",R):_.getStyle(O,"text-decoration")===R&&_.setStyle(O,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&(W.walk(P,S,"childNodes"),S(P))})(f,a,0,x),((_,T,L,P)=>{if(oe(T)&&("sub"===T.inline||"sup"===T.inline)){const S=_0(_,"fontSize");Gu(P,R=>S(R)&&wo(R),E0(_,"fontSize",""));const O=bt(_.select("sup"===T.inline?"sub":"sup",P),wo);_.remove(O,!0)}})(f,a,0,x),k0(t,a,0,x)):f.remove(x,!0)})},p=ks(r)?r:l.getNode();if("false"===i.getContentEditable(p)&&!eb(t,p))return c(o,r=p),void bb(t,e,r,n);if(a){if(r)if(ks(r)){if(!c(o,r)){const f=i.createRng();f.setStartBefore(r),f.setEndAfter(r),m(i,xo(i,f,o),!0)}}else m(i,r,!0);else s&&oe(a)&&!ma(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const w=v.getRng();let x=w.startOffset;const k=w.startContainer.nodeValue;b=Co(f.getBody(),v.getStart());const _=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&x>0&&x<k.length&&_.test(k.charAt(x))&&_.test(k.charAt(x-1))){const P=v.getBookmark();w.collapse(!0);let S=xo(f.dom,w,y);S=al(S),f.formatter.apply(h,g,S),v.moveToBookmark(P)}else{let P=b?i0(b):null;b&&(null==P?void 0:P.data)===ba||(T=f.getDoc(),L=$u(!0).dom,b=T.importNode(L,!0),P=b.firstChild,w.insertNode(b),x=1),f.formatter.apply(h,g,b),v.setCursorLocation(P,x)}var T,L})(t,e,n):(l.setRng(Mu(l.getRng())),Zh(t,()=>{Uc(t,(f,h)=>{const g=h?f:xo(i,f,o);m(i,g,!1)})},Vt),t.nodeChanged()),h0(t.formatter,e).each(f=>{var h;H(bt((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return b0(v,b[0])&&v0(v,b[0])?b:[];{const y=Y(b).filter(k=>b0(v,k)).toArray(),w=dt(b).filter(k=>v0(v,k)).toArray(),x=b.slice(1,-1);return y.concat(x).concat(w)}})(h=t.selection),y0(h.dom)),h=>I0(i,h,f,n))});h=t,kt(Ps,f=e)&&H(Ps[f],g=>{g(h)})}var f,h;bb(t,e,r,n)},F0=(t,e,n,r)=>{(r||t.selection.isEditable())&&RN(t,e,n,r)},U0=t=>kt(t,"vars"),j0=t=>t.selection.getStart(),z0=(t,e,n,r,o)=>li(e,a=>{const s=t.formatter.matchNode(a,n,null!=o?o:{},r);return!ae(s)},a=>!!o0(t,a,n)||!r&&X(t.formatter.matchNode(a,n,o,!0))),H0=(t,e)=>{const n=null!=e?e:j0(t);return bt(Ji(t.dom,n),r=>nt(r)&&!so(r))},$0=(t,e,n)=>{const r=H0(t,e);lt(n,(o,a)=>{const s=i=>{const l=z0(t,r,a,i.similar,U0(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);U0(i)?i.callback(d,{node:c,format:a,parents:r}):H(i.callbacks,u=>u(d,{node:c,format:a,parents:r}))}};H([o.withSimilar,o.withoutSimilar],s),H(o.withVars,s)})},V0=W.explode,q0=()=>{const t={};return{addFilter:(e,n)=>{H(V0(e),r=>{kt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>yd(t),removeFilter:(e,n)=>{H(V0(e),r=>{if(kt(t,r))if(X(n)){const o=t[r],a=bt(o.callbacks,s=>s!==n);a.length>0?o.callbacks=a:delete t[r]}else delete t[r]})}}},W0=(t,e)=>{t.addNodeFilter("br",(n,r,o)=>{const a=W.extend({},e.getBlockElements()),s=e.getNonEmptyElements(),i=e.getWhitespaceElements();a.body=1;const l=d=>{return d.name in a&&(1===(u=d).type&&Oi(e,u.name)&&ae(u.attr(ts)));var u};for(let d=0,c=n.length;d<c;d++){let u=n[d],m=u.parent;if(m&&a[m.name]&&u===m.lastChild){let p=u.prev;for(;p;){const f=p.name;if("span"!==f||"bookmark"!==p.attr("data-mce-type")){"br"===f&&(u=null);break}p=p.prev}if(u&&(u.remove(),Ds(e,s,i,m))){const f=e.getElementRule(m.name);f&&(f.removeEmpty?m.remove():f.paddEmpty&&Bu(o,l,m))}}else{let p=u;for(;m&&m.firstChild===p&&m.lastChild===p&&(p=m,!a[m.name]);)m=m.parent;if(p===m){const f=new Ie("#text",3);f.value=se,u.replace(f)}}}})},Qu=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const a=";base64"===o[2],s=a?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return C.some({type:o[1],data:s,base64Encoded:a})}return C.none()},K0=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return C.none()}const o=new Uint8Array(r.length);for(let a=0;a<o.length;a++)o[a]=r.charCodeAt(a);return C.some(new Blob([o],{type:t}))},G0=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let ON=0;const Y0=(t,e,n)=>Qu(t).bind(({data:r,type:o,base64Encoded:a})=>{if(e&&!a)return C.none();{const s=a?r:btoa(r);return n(s,o)}}),X0=(t,e,n)=>{const r=t.create("blobid"+ON++,e,n);return t.add(r),r},Q0=(t,e,n=!1)=>Y0(e,n,(r,o)=>C.from(t.getByData(r,o)).orThunk(()=>K0(o,r).map(a=>X0(t,a,r))));function Oo(t){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Ju(t,e){return(Ju=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function Zu(t,e,n){return(Zu=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,a){var s=[null];s.push.apply(s,o);var i=new(Function.bind.apply(r,s));return a&&Ju(i,a.prototype),i}).apply(null,arguments)}function kn(t){return function(e){if(Array.isArray(e))return tm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return tm(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var BN=Object.hasOwnProperty,J0=Object.setPrototypeOf,DN=Object.isFrozen,PN=Object.getPrototypeOf,MN=Object.getOwnPropertyDescriptor,He=Object.freeze,$n=Object.seal,LN=Object.create,Z0=typeof Reflect<"u"&&Reflect,bl=Z0.apply,em=Z0.construct;bl||(bl=function(t,e,n){return t.apply(e,n)}),He||(He=function(t){return t}),$n||($n=function(t){return t}),em||(em=function(t,e){return Zu(t,kn(e))});var ty,IN=_n(Array.prototype.forEach),FN=_n(Array.prototype.pop),Ls=_n(Array.prototype.push),vl=_n(String.prototype.toLowerCase),UN=_n(String.prototype.match),jr=_n(String.prototype.replace),jN=_n(String.prototype.indexOf),zN=_n(String.prototype.trim),$e=_n(RegExp.prototype.test),nm=(ty=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return em(ty,e)});function _n(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return bl(t,e,r)}}function Bt(t,e){J0&&J0(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=vl(r);o!==r&&(DN(e)||(e[n]=o),r=o)}t[r]=!0}return t}function To(t){var e,n=LN(null);for(e in t)bl(BN,t,[e])&&(n[e]=t[e]);return n}function yl(t,e){for(;null!==t;){var n=MN(t,e);if(n){if(n.get)return _n(n.get);if("function"==typeof n.value)return _n(n.value)}t=PN(t)}return function(r){return console.warn("fallback value for",r),null}}var ey=He(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rm=He(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),om=He(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HN=He(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),am=He(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$N=He(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ny=He(["#text"]),ry=He(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sm=He(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oy=He(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Cl=He(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VN=$n(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qN=$n(/<%[\w\W]*|[\w\W]*%>/gm),WN=$n(/^data-[\-\w.\u00B7-\uFFFF]/),KN=$n(/^aria-[\-\w]+$/),GN=$n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YN=$n(/^(?:\w+script|data):/i),XN=$n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QN=$n(/^html$/i),JN=function(){return typeof window>"u"?null:window},ZN=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JN(),n=function(D){return t(D)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,a=e.DocumentFragment,s=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,m=e.HTMLFormElement,p=e.DOMParser,f=e.trustedTypes,h=l.prototype,g=yl(h,"cloneNode"),b=yl(h,"nextSibling"),v=yl(h,"childNodes"),y=yl(h,"parentNode");if("function"==typeof s){var w=o.createElement("template");w.content&&w.content.ownerDocument&&(o=w.content.ownerDocument)}var x=function(D,yt){if("object"!==Oo(D)||"function"!=typeof D.createPolicy)return null;var mt=null,Lt="data-tt-policy-suffix";yt.currentScript&&yt.currentScript.hasAttribute(Lt)&&(mt=yt.currentScript.getAttribute(Lt));var ee="dompurify"+(mt?"#"+mt:"");try{return D.createPolicy(ee,{createHTML:function(Se){return Se}})}catch{return console.warn("TrustedTypes policy "+ee+" could not be created."),null}}(f,r),k=x?x.createHTML(""):"",T=o.implementation,L=o.createNodeIterator,P=o.createDocumentFragment,S=o.getElementsByTagName,O=r.importNode,R={};try{R=To(o).documentMode?o.documentMode:{}}catch{}var B={};n.isSupported="function"==typeof y&&T&&void 0!==T.createHTMLDocument&&9!==R;var G,$,ct=VN,Q=qN,vt=WN,Ct=KN,tt=YN,it=XN,gt=GN,N=null,A=Bt({},[].concat(kn(ey),kn(rm),kn(om),kn(am),kn(ny))),I=null,z=Bt({},[].concat(kn(ry),kn(sm),kn(oy),kn(Cl))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,K=null,st=!0,et=!0,pt=!1,ht=!1,Z=!1,xt=!1,te=!1,Ht=!1,Ue=!1,je=!1,Nn=!0,hn=!0,pe=!1,Ve={},Kt=null,Gn=Bt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),$r=null,gd=Bt({},["audio","video","img","source","image","track"]),Yn=null,ni=Bt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Vr="http://www.w3.org/2000/svg",Ye="http://www.w3.org/1999/xhtml",Fo=Ye,ik=!1,UT=["application/xhtml+xml","text/html"],Ba=null,jT=o.createElement("form"),lk=function(D){return D instanceof RegExp||D instanceof Function},Mf=function(D){Ba&&Ba===D||(D&&"object"===Oo(D)||(D={}),D=To(D),N="ALLOWED_TAGS"in D?Bt({},D.ALLOWED_TAGS):A,I="ALLOWED_ATTR"in D?Bt({},D.ALLOWED_ATTR):z,Yn="ADD_URI_SAFE_ATTR"in D?Bt(To(ni),D.ADD_URI_SAFE_ATTR):ni,$r="ADD_DATA_URI_TAGS"in D?Bt(To(gd),D.ADD_DATA_URI_TAGS):gd,Kt="FORBID_CONTENTS"in D?Bt({},D.FORBID_CONTENTS):Gn,j="FORBID_TAGS"in D?Bt({},D.FORBID_TAGS):{},K="FORBID_ATTR"in D?Bt({},D.FORBID_ATTR):{},Ve="USE_PROFILES"in D&&D.USE_PROFILES,st=!1!==D.ALLOW_ARIA_ATTR,et=!1!==D.ALLOW_DATA_ATTR,pt=D.ALLOW_UNKNOWN_PROTOCOLS||!1,ht=D.SAFE_FOR_TEMPLATES||!1,Z=D.WHOLE_DOCUMENT||!1,Ht=D.RETURN_DOM||!1,Ue=D.RETURN_DOM_FRAGMENT||!1,je=D.RETURN_TRUSTED_TYPE||!1,te=D.FORCE_BODY||!1,Nn=!1!==D.SANITIZE_DOM,hn=!1!==D.KEEP_CONTENT,pe=D.IN_PLACE||!1,gt=D.ALLOWED_URI_REGEXP||gt,Fo=D.NAMESPACE||Ye,D.CUSTOM_ELEMENT_HANDLING&&lk(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&lk(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G=G=-1===UT.indexOf(D.PARSER_MEDIA_TYPE)?"text/html":D.PARSER_MEDIA_TYPE,$="application/xhtml+xml"===G?function(yt){return yt}:vl,ht&&(et=!1),Ue&&(Ht=!0),Ve&&(N=Bt({},kn(ny)),I=[],!0===Ve.html&&(Bt(N,ey),Bt(I,ry)),!0===Ve.svg&&(Bt(N,rm),Bt(I,sm),Bt(I,Cl)),!0===Ve.svgFilters&&(Bt(N,om),Bt(I,sm),Bt(I,Cl)),!0===Ve.mathMl&&(Bt(N,am),Bt(I,oy),Bt(I,Cl))),D.ADD_TAGS&&(N===A&&(N=To(N)),Bt(N,D.ADD_TAGS)),D.ADD_ATTR&&(I===z&&(I=To(I)),Bt(I,D.ADD_ATTR)),D.ADD_URI_SAFE_ATTR&&Bt(Yn,D.ADD_URI_SAFE_ATTR),D.FORBID_CONTENTS&&(Kt===Gn&&(Kt=To(Kt)),Bt(Kt,D.FORBID_CONTENTS)),hn&&(N["#text"]=!0),Z&&Bt(N,["html","head","body"]),N.table&&(Bt(N,["tbody"]),delete j.tbody),He&&He(D),Ba=D)},dk=Bt({},["mi","mo","mn","ms","mtext"]),ck=Bt({},["foreignobject","desc","title","annotation-xml"]),zT=Bt({},["title","style","font","a","script"]),pd=Bt({},rm);Bt(pd,om),Bt(pd,HN);var Lf=Bt({},am);Bt(Lf,$N);var hr=function(D){Ls(n.removed,{element:D});try{D.parentNode.removeChild(D)}catch{try{D.outerHTML=k}catch{D.remove()}}},hd=function(D,yt){try{Ls(n.removed,{attribute:yt.getAttributeNode(D),from:yt})}catch{Ls(n.removed,{attribute:null,from:yt})}if(yt.removeAttribute(D),"is"===D&&!I[D])if(Ht||Ue)try{hr(yt)}catch{}else try{yt.setAttribute(D,"")}catch{}},uk=function(D){var yt,mt;if(te)D="<remove></remove>"+D;else{var Lt=UN(D,/^[\r\n\t ]+/);mt=Lt&&Lt[0]}"application/xhtml+xml"===G&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");var ee=x?x.createHTML(D):D;if(Fo===Ye)try{yt=(new p).parseFromString(ee,G)}catch{}if(!yt||!yt.documentElement){yt=T.createDocument(Fo,"template",null);try{yt.documentElement.innerHTML=ik?"":ee}catch{}}var Se=yt.body||yt.documentElement;return D&&mt&&Se.insertBefore(o.createTextNode(mt),Se.childNodes[0]||null),Fo===Ye?S.call(yt,Z?"html":"body")[0]:Z?yt.documentElement:Se},mk=function(D){return L.call(D.ownerDocument||D,D,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},ri=function(D){return"object"===Oo(i)?D instanceof i:D&&"object"===Oo(D)&&"number"==typeof D.nodeType&&"string"==typeof D.nodeName},br=function(D,yt,mt){B[D]&&IN(B[D],function(Lt){Lt.call(n,yt,mt,Ba)})},fk=function(D){var yt,mt;if(br("beforeSanitizeElements",D,null),(mt=D)instanceof m&&("string"!=typeof mt.nodeName||"string"!=typeof mt.textContent||"function"!=typeof mt.removeChild||!(mt.attributes instanceof u)||"function"!=typeof mt.removeAttribute||"function"!=typeof mt.setAttribute||"string"!=typeof mt.namespaceURI||"function"!=typeof mt.insertBefore)||$e(/[\u0080-\uFFFF]/,D.nodeName))return hr(D),!0;var Lt=$(D.nodeName);if(br("uponSanitizeElement",D,{tagName:Lt,allowedTags:N}),D.hasChildNodes()&&!ri(D.firstElementChild)&&(!ri(D.content)||!ri(D.content.firstElementChild))&&$e(/<[/\w]/g,D.innerHTML)&&$e(/<[/\w]/g,D.textContent)||"select"===Lt&&$e(/<template/i,D.innerHTML))return hr(D),!0;if(!N[Lt]||j[Lt]){if(!j[Lt]&&pk(Lt)&&(U.tagNameCheck instanceof RegExp&&$e(U.tagNameCheck,Lt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(Lt)))return!1;if(hn&&!Kt[Lt]){var ee=y(D)||D.parentNode,Se=v(D)||D.childNodes;if(Se&&ee)for(var de=Se.length-1;de>=0;--de)ee.insertBefore(g(Se[de],!0),b(D))}return hr(D),!0}return D instanceof l&&!function(Rn){var ce=y(Rn);ce&&ce.tagName||(ce={namespaceURI:Ye,tagName:"template"});var ue=vl(Rn.tagName),Uo=vl(ce.tagName);return Rn.namespaceURI===Vr?ce.namespaceURI===Ye?"svg"===ue:ce.namespaceURI===Ge?"svg"===ue&&("annotation-xml"===Uo||dk[Uo]):Boolean(pd[ue]):Rn.namespaceURI===Ge?ce.namespaceURI===Ye?"math"===ue:ce.namespaceURI===Vr?"math"===ue&&ck[Uo]:Boolean(Lf[ue]):Rn.namespaceURI===Ye&&!(ce.namespaceURI===Vr&&!ck[Uo])&&!(ce.namespaceURI===Ge&&!dk[Uo])&&!Lf[ue]&&(zT[ue]||!pd[ue])}(D)?(hr(D),!0):"noscript"!==Lt&&"noembed"!==Lt||!$e(/<\/no(script|embed)/i,D.innerHTML)?(ht&&3===D.nodeType&&(yt=jr(yt=D.textContent,ct," "),yt=jr(yt,Q," "),D.textContent!==yt&&(Ls(n.removed,{element:D.cloneNode()}),D.textContent=yt)),br("afterSanitizeElements",D,null),!1):(hr(D),!0)},gk=function(D,yt,mt){if(Nn&&("id"===yt||"name"===yt)&&(mt in o||mt in jT))return!1;if((!et||K[yt]||!$e(vt,yt))&&(!st||!$e(Ct,yt)))if(!I[yt]||K[yt]){if(!(pk(D)&&(U.tagNameCheck instanceof RegExp&&$e(U.tagNameCheck,D)||U.tagNameCheck instanceof Function&&U.tagNameCheck(D))&&(U.attributeNameCheck instanceof RegExp&&$e(U.attributeNameCheck,yt)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(yt))||"is"===yt&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&$e(U.tagNameCheck,mt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(mt))))return!1}else if(!Yn[yt]&&!$e(gt,jr(mt,it,""))&&("src"!==yt&&"xlink:href"!==yt&&"href"!==yt||"script"===D||0!==jN(mt,"data:")||!$r[D])&&(!pt||$e(tt,jr(mt,it,"")))&&mt)return!1;return!0},pk=function(D){return D.indexOf("-")>0},hk=function(D){var yt,mt,Lt,ee;br("beforeSanitizeAttributes",D,null);var Se=D.attributes;if(Se){var de={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I};for(ee=Se.length;ee--;){var Rn=yt=Se[ee],ce=Rn.name,ue=Rn.namespaceURI;mt="value"===ce?yt.value:zN(yt.value),Lt=$(ce);var Uo=mt;if(de.attrName=Lt,de.attrValue=mt,de.keepAttr=!0,de.forceKeepAttr=void 0,br("uponSanitizeAttribute",D,de),mt=de.attrValue,!de.forceKeepAttr)if(de.keepAttr)if($e(/\/>/i,mt))hd(ce,D);else{ht&&(mt=jr(mt,ct," "),mt=jr(mt,Q," "));var $T=$(D.nodeName);if(gk($T,Lt,mt)){if(mt!==Uo)try{ue?D.setAttributeNS(ue,ce,mt):D.setAttribute(ce,mt)}catch{hd(ce,D)}}else hd(ce,D)}else hd(ce,D)}br("afterSanitizeAttributes",D,null)}},HT=function D(yt){var mt,Lt=mk(yt);for(br("beforeSanitizeShadowDOM",yt,null);mt=Lt.nextNode();)br("uponSanitizeShadowNode",mt,null),fk(mt)||(mt.content instanceof a&&D(mt.content),hk(mt));br("afterSanitizeShadowDOM",yt,null)};return n.sanitize=function(D,yt){var mt,Lt,ee,Se,de;if((ik=!D)&&(D="\x3c!--\x3e"),"string"!=typeof D&&!ri(D)){if("function"!=typeof D.toString)throw nm("toString is not a function");if("string"!=typeof(D=D.toString()))throw nm("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Oo(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof D)return e.toStaticHTML(D);if(ri(D))return e.toStaticHTML(D.outerHTML)}return D}if(xt||Mf(yt),n.removed=[],"string"==typeof D&&(pe=!1),pe){if(D.nodeName){var Rn=$(D.nodeName);if(!N[Rn]||j[Rn])throw nm("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof i)1===(Lt=(mt=uk("\x3c!----\x3e")).ownerDocument.importNode(D,!0)).nodeType&&"BODY"===Lt.nodeName||"HTML"===Lt.nodeName?mt=Lt:mt.appendChild(Lt);else{if(!Ht&&!ht&&!Z&&-1===D.indexOf("<"))return x&&je?x.createHTML(D):D;if(!(mt=uk(D)))return Ht?null:je?k:""}mt&&te&&hr(mt.firstChild);for(var ce=mk(pe?D:mt);ee=ce.nextNode();)3===ee.nodeType&&ee===Se||fk(ee)||(ee.content instanceof a&&HT(ee.content),hk(ee),Se=ee);if(Se=null,pe)return D;if(Ht){if(Ue)for(de=P.call(mt.ownerDocument);mt.firstChild;)de.appendChild(mt.firstChild);else de=mt;return I.shadowroot&&(de=O.call(r,de,!0)),de}var ue=Z?mt.outerHTML:mt.innerHTML;return Z&&N["!doctype"]&&mt.ownerDocument&&mt.ownerDocument.doctype&&mt.ownerDocument.doctype.name&&$e(QN,mt.ownerDocument.doctype.name)&&(ue="<!DOCTYPE "+mt.ownerDocument.doctype.name+">\n"+ue),ht&&(ue=jr(ue,ct," "),ue=jr(ue,Q," ")),x&&je?x.createHTML(ue):ue},n.setConfig=function(D){Mf(D),xt=!0},n.clearConfig=function(){Ba=null,xt=!1},n.isValidAttribute=function(D,yt,mt){Ba||Mf({});var Lt=$(D),ee=$(yt);return gk(Lt,ee,mt)},n.addHook=function(D,yt){"function"==typeof yt&&(B[D]=B[D]||[],Ls(B[D],yt))},n.removeHook=function(D){if(B[D])return FN(B[D])},n.removeHooks=function(D){B[D]&&(B[D]=[])},n.removeAllHooks=function(){B={}},n}();const ay=W.each,tR=W.trim,eR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],nR={ftp:21,http:80,https:443,mailto:25},rR=["img","video"],sy=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(a=n,(X(o=t.allow_svg_data_urls)?!o:!X(a)||!Ot(rR,a))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,a};class En{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=Rr.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!sy(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=tR(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const a=0===e.indexOf("//");if(0!==e.indexOf("/")||a||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new En(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&ay(eR,(i,l)=>{let d=s[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),o[i]=d}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),a&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new En(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let a=this.toRelPath(this.path,n.path);return n.query&&(a+="?"+n.query),n.anchor&&(a+="#"+n.anchor),a}toAbsolute(e,n){const r=new En(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?nR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,a=0,s="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){a=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){a=r+1;break}if(1===a)return n;for(r=0,o=i.length-(a-1);r<o;r++)s+="../";for(r=a-1,o=l.length;r<o;r++)s+=r!==a-1?"/"+l[r]:l[r];return s}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",a=e.split("/"),s=n.split("/"),i=[];ay(a,u=>{u&&i.push(u)});const l=[];for(let u=s.length-1;u>=0;u--)0!==s[u].length&&"."!==s[u]&&(".."!==s[u]?r>0?r--:l.push(s[u]):r++);const d=i.length-r;let c;return c=d<=0?Xr(l).join("/"):i.slice(0,d).join("/")+"/"+Xr(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),o&&c.lastIndexOf("/")!==c.length-1&&(c+=o),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const oR=W.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),im="data-mce-type";let iy=0;const ly=(t,e,n,r)=>{var o,a,s,i;const l=e.validate,d=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const c=null!==(a=null==r?void 0:r.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===c)return;const u=E(t),m=gi(u,im),p=Je(u,"data-mce-bogus");if(!m&&ut(p))return void("all"===p?zt(u):lr(u));const f=n.getElementRule(c);if(!l||f){if(X(r)&&(r.allowedTags[c]=!0),l&&f&&!m){if(H(null!==(s=f.attributesForced)&&void 0!==s?s:[],h=>{fe(u,h.name,"{$uid}"===h.value?"mce_"+iy++:h.value)}),H(null!==(i=f.attributesDefault)&&void 0!==i?i:[],h=>{gi(u,h.name)||fe(u,h.name,"{$uid}"===h.value?"mce_"+iy++:h.value)}),f.attributesRequired&&!qt(f.attributesRequired,h=>gi(u,h))||f.removeEmptyAttrs&&(h=>{const g=h.dom.attributes;return null==g||0===g.length})(u))return void lr(u);f.outputName&&f.outputName!==c&&Np(u,f.outputName)}}else kt(d,c)?zt(u):lr(u)},dy=(t,e,n,r,o)=>!(r in oR&&sy(t,o,n))&&(!t.validate||e.isValid(n,r)||be(r,"data-")||be(r,"aria-")),cy=(t,e)=>t.hasAttribute(im)&&("id"===e||"class"===e||"style"===e),uy=(t,e)=>t in e.getBoolAttrs(),aR=(t,e,n)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const a=r[o],s=a.name,i=a.value;dy(e,n,t.tagName.toLowerCase(),s,i)||cy(t,s)?uy(s,n)&&t.setAttribute(s,s):t.removeAttribute(s)}},my=W.makeMap,fy=W.extend,gy=(t,e,n)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,a=e.childNodes;for(let s=0,i=a.length;s<i;s++){const l=a[s],d=new Ie(l.nodeName.toLowerCase(),l.nodeType);if(nt(l)){const c=l.attributes;for(let u=0,m=c.length;u<m;u++){const p=c[u];d.attr(p.name,p.value)}}else V(l)?(d.value=l.data,o&&(d.raw=!0)):(_r(l)||zk(l)||Hk(l))&&(d.value=l.data);gy(d,l,n),t.append(d)}},va=(t={},e=Ar())=>{const n=q0(),r=q0(),o={validate:!0,root_name:"body",sanitize:!0,...t},a=new DOMParser,s=((h,g)=>{if(h.sanitize){const b=((t,e)=>{const n=ZN();return n.addHook("uponSanitizeElement",(r,o)=>{ly(r,t,e,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const a=r.tagName.toLowerCase(),{attrName:s,attrValue:i}=o;o.keepAttr=dy(t,e,a,s,i),o.keepAttr?(o.allowedAttributes[s]=!0,uy(s,e)&&(o.attrValue=s),t.allow_svg_data_urls&&be(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):cy(r,s)&&(o.forceKeepAttr=!0)}),n})(h,g);return(v,y)=>{b.sanitize(v,((w,x)=>{const k={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return k.PARSER_MEDIA_TYPE=x,w.allow_script_urls?k.ALLOWED_URI_REGEXP=/.*/:w.allow_html_data_urls&&(k.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),k})(h,y)),b.removed=[]}}return(b,v)=>{const y=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=y.nextNode();)ly(w,h,g),nt(w)&&aR(w,h,g)}})(o,e),l=n.getFilters,u=r.getFilters,p=(h,g)=>{const b=ut(g.attr(im)),v=1===g.type&&!kt(h,g.name)&&!ep(e,g);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:u,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=o.validate,y=null!==(b=g.context)&&void 0!==b?b:o.root_name,w=((R,B,G="html")=>{const $="xhtml"===G?"application/xhtml+xml":"text/html",ct=kt(e.getSpecialElements(),B.toLowerCase()),Q=ct?`<${B}>${R}</${B}>`:R,Ct=a.parseFromString("xhtml"===G?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Q}</body></html>`:`<body>${Q}</body>`,$).body;return s(Ct,$),ct?Ct.firstChild:Ct})(h,y,g.format);Xd(e,w);const x=new Ie(y,11);gy(x,w,e.getSpecialElements()),w.innerHTML="";const[k,_]=((R,B,G,$)=>{const ct=G.validate,Q=B.getNonEmptyElements(),vt=B.getWhitespaceElements(),Ct=fy(my("script,style,head,html,body,title,meta,param"),B.getBlockElements()),tt=fp(B),it=/[ \t\r\n]+/g,gt=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,A=U=>{let j=U.parent;for(;X(j);){if(j.name in vt)return!0;j=j.parent}return!1},I=U=>U.name in Ct||ep(B,U),z=(U,j)=>!X(j?U.prev:U.next)&&!Gt(U.parent)&&I(U.parent)&&(U.parent!==R||!0===$.isRootContent);return[U=>{var j,st,et;if(3===U.type&&!A(U)){let K=null!==(j=U.value)&&void 0!==j?j:"";K=K.replace(it," "),et=I,(X(st=U.prev)&&(et(st)||"br"===st.name)||z(U,!0))&&(K=K.replace(gt,"")),0===K.length?U.remove():U.value=K}},U=>{var j,et,pt;if(1===U.type){const K=B.getElementRule(U.name);if(ct&&K){const st=Ds(B,Q,vt,U);K.paddInEmptyBlock&&st&&(et=>{let pt=et;for(;X(pt);){if(pt.name in tt)return Ds(B,Q,vt,pt);pt=pt.parent}return!1})(U)?Bu($,I,U):K.removeEmpty&&st?I(U)?U.remove():U.unwrap():K.paddEmpty&&(st||t0(et=U,"#text")&&(null===(pt=null==et?void 0:et.firstChild)||void 0===pt?void 0:pt.value)===se)&&Bu($,I,U)}}else if(3===U.type&&!A(U)){let K=null!==(j=U.value)&&void 0!==j?j:"";(U.next&&I(U.next)||z(U,!1))&&(K=K.replace(N,"")),0===K.length?U.remove():U.value=K}}]})(x,e,o,g),T=[],P={nodes:{},attributes:{}},S=R=>Qv(l(),u(),R,P);if(((R,B,G)=>{const $=[];for(let ct=R,Q=ct;ct;Q=ct,ct=ct.walk()){const vt=ct;H(B,Ct=>Ct(vt)),Gt(vt.parent)&&vt!==R?ct=Q:$.push(vt)}for(let ct=$.length-1;ct>=0;ct--){const Q=$[ct];H(G,vt=>vt(Q))}})(x,[k,S],[_,v?R=>{return G=T,void(e0(e,B=R)&&G.push(B));var B,G}:Et]),T.reverse(),v&&T.length>0)if(g.context){const{pass:R,fail:B}=cn(T,G=>G.parent===x);Pu(B,e,x,S),g.invalid=R.length>0}else Pu(T,e,x,S);const O=((R,B)=>{var G;const $=null!==(G=B.forced_root_block)&&void 0!==G?G:R.forced_root_block;return!1===$?"":!0===$?"p":$})(o,g);return O&&("body"===x.name||g.isRootContent)&&((R,B)=>{const G=fy(my("script,style,head,html,body,title,meta,param"),e.getBlockElements()),$=/^[ \t\r\n]+/,ct=/[ \t\r\n]+$/;let Q=R.firstChild,vt=null;const Ct=tt=>{var it,gt;tt&&(Q=tt.firstChild,Q&&3===Q.type&&(Q.value=null===(it=Q.value)||void 0===it?void 0:it.replace($,"")),Q=tt.lastChild,Q&&3===Q.type&&(Q.value=null===(gt=Q.value)||void 0===gt?void 0:gt.replace(ct,"")))};if(e.isValidChild(R.name,B.toLowerCase())){for(;Q;){const tt=Q.next;p(G,Q)?(vt||(vt=new Ie(B,1),vt.attr(o.forced_root_block_attrs),R.insert(vt,Q)),vt.append(Q)):(Ct(vt),vt=null),Q=tt}Ct(vt)}})(x,O),g.invalid||Jv(P,g),x}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&W0(t,n),t.addAttributeFilter("href",o=>{let a=o.length;const s=i=>{const l=i?W.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;a--;){const i=o[a];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",s(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",o=>{let a,s,i,l,d=o.length;for(;d--;)if(l=o[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,a=l.lastChild;a&&i;)s=a.prev,i.insert(a,l),a=s}),e.fix_list_elements&&t.addNodeFilter("ul,ol",o=>{let a,s,i=o.length;for(;i--;)if(a=o[i],s=a.parent,s&&("ul"===s.name||"ol"===s.name))if(a.prev&&"li"===a.prev.name)a.prev.append(a);else{const l=new Ie("li",1);l.attr("style","list-style-type: none"),a.wrap(l)}});const r=n.getValidClasses();e.validate&&r&&t.addAttributeFilter("class",o=>{var a;let s=o.length;for(;s--;){const i=o[s],l=null!==(a=i.attr("class"))&&void 0!==a?a:"",d=W.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=r["*"];f&&f[m]&&(p=!0),f=r[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((o,a)=>{const{blob_cache:s}=a;if(s){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===St.transparentSrc||X(c.attr("data-mce-placeholder"))||(c=>X(c.attr("data-mce-bogus")))(l)||Gt(d)||Q0(s,d,!0).each(c=>{l.attr("src",c.blobUri())})};o.addAttributeFilter("src",l=>H(l,i))}})(t,e)})(f,o),(g=o).inline_styles&&((t,e,n)=>{var r;const o=oc();var a,s,i;e.convert_fonts_to_spans&&(a=t,s=o,i=W.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),a.addNodeFilter("font",l=>{H(l,d=>{const c=s.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&mi(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",s.serialize(c)),f=d,H(["color","face","size"],g=>{f.attr(g,null)})})})),((a,s,i)=>{a.addNodeFilter("strike",l=>{const d="html4"!==s.type;H(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,o)})(f,g,e),f;var g},py=(t,e,n)=>{const r=fl(a=t)?Mr({validate:!1}).serialize(a):a,o=e(r);var a;if(o.isDefaultPrevented())return o;if(fl(t)){if(o.content!==r){const a=va({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:t.name});return{...o,content:a}}return{...o,content:t}}return o},hy=(t,e)=>{if(e.no_events)return Pe.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Pe.error(Cb(t,{content:"",...n}).content):Pe.value(n)}},by=(t,e,n)=>n.no_events?e:py(e,o=>Cb(t,{...n,content:o}),_c(t)).content,lm=(t,e)=>{if(e.no_events)return Pe.value(e);{const n=py(e.content,r=>{return o=t,a={...e,content:r},o.dispatch("BeforeSetContent",a);var o,a},_c(t));return n.isDefaultPrevented()?(yb(t,n),Pe.error(void 0)):Pe.value(n)}},dm=(t,e,n)=>{n.no_events||yb(t,{...n,content:e})},cm=(t,e,n)=>({element:t,width:e,rows:n}),vy=(t,e)=>({element:t,cells:e}),iR=(t,e)=>({x:t,y:e}),yy=(t,e)=>or(t,e).bind(mi).getOr(1),lR=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},Cy=t=>Re(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),wy=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let a=0;a<o.length;a++)if(Tt(o[a],e))return C.some(iR(a,r))}return C.none()},xy=(t,e,n,r,o)=>{const a=[],s=t.rows;for(let i=n;i<=o;i++){const l=s[i].cells,d=e<r?l.slice(e,r+1):l.slice(r,e+1);a.push(vy(s[i].element,d))}return a},dR=t=>((e,n)=>{const r=go(e.element),o=ge("tbody");return oo(o,n),Jt(r,o),r})(t,Nt(t.rows,n=>{const r=Nt(n.cells,a=>{const s=Sp(a);return ve(s,"colspan"),ve(s,"rowspan"),s}),o=go(n.element);return oo(o,r),o})),ky=()=>Xc([]),wl=(t,e)=>e>=0&&e<t.length&&ua(t.charAt(e)),_y=t=>cr(t.innerText),Ey=t=>nt(t)?t.outerHTML:V(t)?Rr.encodeRaw(t.data,!1):_r(t)?"\x3c!--"+t.data+"--\x3e":"",gR=Zr(()=>document.implementation.createHTMLDocument("undo")),xl=t=>{const e=(n=t.getBody(),bt(Nt(ft(n.childNodes),Ey),a=>a.length>0));var n;const r=qe(e,a=>{const s=rv(t.serializer,a);return s.length>0?[s]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(a=>({type:"complete",fragments:null,content:a,bookmark:null,beforeBookmark:null}))(o)},um=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;H(n,a=>{var s,i;0===a[0]?o++:1===a[0]?(((s,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);s.hasChildNodes()&&l<s.childNodes.length?s.insertBefore(d,s.childNodes[l]):s.appendChild(d)})(r,a[1],o),o++):2===a[0]&&(i=o,(s=r).hasChildNodes()&&i<s.childNodes.length&&s.removeChild(s.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,a=new Array(o),s=new Array(o),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===r[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,r[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===r[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let w,x,k,_,T;for(a[1+y]=u,s[1+y]=m+1,w=0;w<=y;++w){for(x=-w;x<=w;x+=2){for(k=x+y,a[k]=x===-w||x!==w&&a[k-1]<a[k+1]?a[k+1]:a[k-1]+1,_=a[k],T=_-u+p-x;_<m&&T<f&&n[_]===r[T];)a[k]=++_,++T;if(b%2!=0&&b-w<=x&&x<=b+w&&s[k-b]<=a[k])return l(s[k-b],x+u-p,m,f)}for(x=b-w;x<=b+w;x+=2){for(k=x+y-b,s[k]=x===b-w||x!==b+w&&s[k+1]<=s[k-1]?s[k+1]-1:s[k-1],_=s[k]-1,T=_-u+p-x;_>=u&&T>=p&&n[_]===r[T];)s[k]=_--,T--;if(b%2==0&&-w<=x&&x<=w&&s[k]<=a[k+b])return l(s[k],x+u-p,m,f)}}return null},c=[];return i(0,n.length,0,r.length,c),c})(Nt(ft(e.childNodes),Ey),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!X(r)||!Hh(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},mm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Sy=t=>{const e=ge("body",gR());return bi(e,mm(t)),H(ke(e,"*[data-mce-bogus]"),lr),Bg(e)},fm=(t,e)=>{return!(!t||!e)&&(r=e,!(mm(t)!==mm(r))||((n,r)=>Sy(n)===Sy(r))(t,e));var r},gm=t=>0===t.get(),kl=(t,e,n)=>{gm(n)&&(t.typing=e)},Ny=(t,e)=>{t.typing&&(kl(t,!1,e),t.add())},Ry=t=>({init:{bindEvents:Et},undoManager:{beforeChange:(e,n)=>{return r=t,a=n,void(gm(e)&&a.set(vc(r.selection)));var r,a},add:(e,n,r,o,a,s)=>((i,l,d,c,u,m,p)=>{const f=xl(i),h=W.extend(m||{},f);if(!gm(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&fm(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=yE(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=vc(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,r,o,a,s),undo:(e,n,r)=>((o,a,s,i)=>{let l;return a.typing&&(a.add(),a.typing=!1,kl(a,!1,s)),i.get()>0&&(i.set(i.get()-1),l=a.data[i.get()],um(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,a)=>{let s;return o.get()<a.length-1&&(o.set(o.get()+1),s=a[o.get()],um(r,s,!1),r.setDirty(!0),r.dispatch("Redo",{level:s})),s})(t,e,n),clear:(e,n)=>{return r=t,a=n,(o=e).data=[],a.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,a},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!fm(xl(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return s=r,Ny(o=e,n),o.beforeChange(),o.ignore(s),o.add();var o,s},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((a,s,i,l,d)=>{if(s.transact(l)){const c=s.data[i.get()].bookmark,u=s.data[i.get()-1];um(a,u,!0),s.transact(d)&&(s.data[i.get()-1].beforeBookmark=c)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>Hu(t,e,n,r,o),matchAll:(e,n)=>((r,o,a)=>{const s=[],i={},l=r.selection.getStart();return r.dom.getParent(l,d=>{for(let c=0;c<o.length;c++){const u=o[c];!i[u]&&Hn(r,d,u,a)&&(i[u]=!0,s.push(u))}},r.dom.getRoot()),s})(t,e,n),matchNode:(e,n,r,o)=>Hn(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),a=n.dom;if(o&&n.selection.isEditable()){const s=n.selection.getStart(),i=Ji(a,s);for(let l=o.length-1;l>=0;l--){const d=o[l];if(!rn(d))return!0;for(let c=i.length-1;c>=0;c--)if(a.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=a=>Tt(a,E(n.getBody()));return C.from(n.selection.getStart(!0)).bind(a=>Uu(E(a),s=>Qt(r,i=>{return Hn(n,s.dom,d=i)?C.some(d):C.none();var d}),o)).getOrNull()})(t,e),apply:(e,n,r)=>F0(t,e,n,r),remove:(e,n,r,o)=>M0(t,e,n,r,o),toggle:(e,n,r)=>((o,a,s,i)=>{const l=o.formatter.get(a);l&&(!Hu(o,a,s,i)||"toggle"in l[0]&&!l[0].toggle?F0(o,a,s,i):M0(o,a,s,i))})(t,e,n,r),formatChanged:(e,n,r,o,a)=>{return((m,p,f,h,g,b)=>{const v=p.get();H(f.split(","),y=>{const w=jt(v,y).getOrThunk(()=>{const k={withSimilar:{state:ie(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ie(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=k,k}),x=()=>{const k=H0(m);return z0(m,k,y,g,b).isSome()};if(ae(b)){const k=g?w.withSimilar:w.withoutSimilar;k.callbacks.push(h),1===k.callbacks.length&&k.state.set(x())}else w.withVars.push({state:ie(x()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=r,o,a),{unbind:()=>((m,p,f)=>{const h=m.get();H(p.split(","),g=>jt(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:bt(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:bt(b.withoutSimilar.callbacks,v=>v!==f)},withVars:bt(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return r=e,C.from((n=t).getBody()).fold(J("tree"===r.format?new Ie("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?W.trim(GS(t.serializer,n.innerHTML)):"text"===e.format?((o,a)=>{const s=o.getDoc(),i=xr(E(o.getBody())),l=ge("div",s);fe(l,"data-mce-bogus","all"),pi(l,{position:"fixed",left:"-9999999px",top:"0"}),bi(l,a.innerHTML),ov(l),av(l);const d=Md(u=i)?u:E(sr(u).dom.body);var u;Jt(d,l);const c=cr(l.dom.innerText);return zt(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,a)=>{const s=Me(o),i=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return a.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!_i(E(n))&&ut(r)?W.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,a=n,C.from((r=t).getBody()).map(s=>fl(o)?((i,l,d,c)=>{Zv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=Mr({validate:!1},i.schema).serialize(d),m=_i(E(l))?u:W.trim(u);return Fu(i,m,c.no_selection),{content:d,html:m}})(r,s,o,a):((i,l,d,c)=>{if(0===d.length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=Me(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,fs(i),d)):d||(d=u),Fu(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=Mr({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=_i(E(l))?d:W.trim(d);return Fu(i,u,c.no_selection),{content:u,html:u}}})(r,s,o,a)).getOr({content:o,html:fl(a.content)?"":a.content});var r,o,a},insertContent:(e,n)=>kN(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,a=X(r)?r:n.getBody();H(o.select("table,a",a),s=>{switch(s.nodeName){case"TABLE":const i=EE(n),l=o.getAttrib(s,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(s,i):o.addClass(s,i);break;case"A":if(!o.getAttrib(s,"href")){const d=o.getAttrib(s,"name")||s.id,c=bh(n);d&&n.hasVisual?o.addClass(s,c):o.removeClass(s,c)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,a={})=>{const s=(i=a,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return hy(r,s).fold(ne,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(k=>k.nodeName).getOr("div").toLowerCase(),b=E(m.cloneContents());ov(b),av(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=_y(v),w=cr(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),wl(w,0)||wl(w,w.length-1)){const x=f.getOr(h),k=_y(x),_=k.indexOf(y);return-1===_?y:(wl(k,_-1)?" ":"")+y+(wl(k,_+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=du(m,Mc(g)),v=p.contextual?((t,e)=>{const n=Xh(e,t);return n.length>0?((t,e)=>{return(n=t,r=e[0],Ka(r,"table",at(Tt,n))).bind(n=>{const r=e[0],o=e[e.length-1],a=(s=>{const i=cm(go(s),0,[]);return H(ke(s,"tr"),(l,d)=>{H(ke(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=yy(g,"rowspan"),v=yy(g,"colspan"),y=m.rows;for(let w=f;w<f+b;w++){y[w]||(y[w]=vy(Sp(h),[]));for(let x=p;x<p+v;x++)y[w].cells[x]=w===f&&x===p?g:go(g)}})(i,((m,p,f)=>{for(;lR(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),cm(i.element,Cy(i.rows),i.rows)})(n);return(s=a,i=r,l=o,wy(s,i).bind(d=>wy(s,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?xy(u,f,h,g,b):xy(u,f,b,g,h);return cm(u.element,Cy(v),v)})(s,d,c)))).map(s=>Xc([dR(s)]));var s,i,l}).getOrThunk(ky);var n,r})(t,n):(r=t,(o=e).length>0&&o[0].collapsed?ky():(a=r,((i,l)=>{const d=Re(l,(c,u)=>(Jt(u,c),u),i);return l.length>0?Xc([d]):d})(E((s=o[0]).cloneContents()),((t,e)=>{const n=E(e.commonAncestorContainer),r=fr(n,t),o=bt(r,Yk),a=(l=e,Xt(i=r,d=>"li"===Ft(d)&&Ic(d,l)).fold(J([]),d=>{return(c=i,Xt(c,u=>"ul"===Ft(u)||"ol"===Ft(u))).map(c=>{const u=ge(Ft(c)),m=Fa(Rg(c),(p,f)=>be(f,"list-style"));return pi(u,m),[ge("li"),u]}).getOr([]);var c})),s=o.concat(a.length?a:(i=>Ja(i)?mn(i).filter(Vd).fold(J([]),l=>[i,l]):Vd(i)?[i]:[])(n));var i,l;return Nt(s,go)})(a,s))));var r,o,a,s})(E(m.getBody()),b).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(r,i);return by(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(tv(E(t.getBody())).isNone()){const r=Va('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Jt(r,E(e.extractContents())),e.insertNode(r.dom),mn(r).each(o=>o.dom.normalize()),(n=r,((o,a)=>{const s=i=>{const l=ye(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(a(c))return C.some(c);const u=s(c);if(u.isSome())return u}return C.none()};return s(o)})(n,Jb)).map(o=>{var a;t.selection.setCursorLocation(o.dom,"img"===Ft(a=o)?1:$g(a).fold(()=>ye(a).length,s=>s.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=E(t.getBody()),tv(n).each(r=>{const o=e.selection.getBookmark();lr(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>C.none()}}),Vn=t=>kt(t.plugins,"rtc"),pm=t=>t.rtcInstance?t.rtcInstance:Ry(t),Yt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Ay=t=>Yt(t).init.bindEvents(),Oy=t=>0===t.dom.length?(zt(t),C.none()):C.some(t),Ty=(t,e,n,r)=>{t.bind(o=>((r?yu:dl)(o.dom,r?o.dom.length:0),e.filter(Qe).map(a=>((s,i,l,d)=>{const c=s.dom,u=i.dom,m=d?c.length:u.length;d?(Cu(c,u,!1,!d),l.setStart(u,m)):(Cu(u,c,!1,!d),l.setEnd(u,m))})(o,a,n,r)))).orThunk(()=>{return(a=e,s=r,a.filter(i=>Es.isBookmarkNode(i.dom)).bind(s?Wa:eo)).or(e).filter(Qe).map(a=>((s,i)=>{mn(s).each(l=>{const d=s.dom;i&&Os(l,M(d,0))?dl(d,0):!i&&Ts(l,M(d,d.length))&&yu(d,d.length)})})(a,r));var a,s})},By=(t,e,n)=>{if(kt(t,e)){const r=bt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},Dy=t=>!(!t||!t.ownerDocument)&&ar(E(t.ownerDocument),E(t)),Py=(t,e,n,r)=>{let o,a;const{selectorChangedWithUnbind:s}=((g,b)=>{let v,y;const w=(k,_)=>Xt(_,T=>g.is(T,k)),x=k=>g.getParents(k,void 0,g.getRoot());return{selectorChangedWithUnbind:(k,_)=>(v||(v={},y={},b.on("NodeChange",T=>{const L=T.element,P=x(L),S={};lt(v,(O,R)=>{w(R,P).each(B=>{y[R]||(H(O,G=>{G(!0,{node:B,selector:R,parents:P})}),y[R]=O),S[R]=O})}),lt(y,(O,R)=>{S[R]||(delete y[R],H(O,B=>{B(!1,{node:L,selector:R,parents:P})}))})})),v[k]||(v[k]=[]),v[k].push(_),w(k,x(b.selection.getStart())).each(()=>{y[k]=v[k]}),{unbind:()=>{By(v,k,_),By(y,k,_)}})}})(t,r),i=(g,b)=>((v,y,w={})=>{const x=(k=w,_=y,{format:"html",...k,set:!0,selection:!0,content:_});var k,_;lm(v,x).each(k=>{const _=((L,P)=>{if("raw"!==P.format){const S=L.selection.getRng(),O=L.dom.getParent(S.commonAncestorContainer,L.dom.isBlock),R=O?{context:O.nodeName.toLowerCase()}:{},B=L.parser.parse(P.content,{forced_root_block:!1,...R,...P});return Mr({validate:!1},L.schema).serialize(B)}return P.content})(v,k),T=v.selection.getRng();((L,P)=>{const S=C.from(P.firstChild).map(E),O=C.from(P.lastChild).map(E);L.deleteContents(),L.insertNode(P);const R=S.bind(eo).filter(Qe).bind(Oy),B=O.bind(Wa).filter(Qe).bind(Oy);Ty(R,S,L,!0),Ty(B,O,L,!1),L.collapse(!1)})(T,T.createContextualFragment(_)),v.selection.setRng(T),Ns(v,T),dm(v,_,k)})})(r,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,w,x)=>{try{return w.compareBoundaryPoints(y,x)}catch{return-1}},v=e.document;if(X(r.bookmark)&&!Eo(r)){const y=ru(r);if(y.isSome())return y.map(w=>du(r,[w])[0]).getOr(v.createRange())}try{const y=d();y&&!yi(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=du(r,[g])[0])}catch{}if(g||(g=v.createRange()),Qa(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return o&&a&&(0===b(g.START_TO_START,g,o)&&0===b(g.END_TO_END,g,o)?g=a:(o=null,a=null)),g},u=(g,b)=>{if(!((y=g)&&Dy(y.startContainer)&&Dy(y.endContainer)))return;var y;const v=d();if(g=r.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){a=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),o=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&null!=v&&v.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}r.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=null==g?void 0:g.anchorNode,v=null==g?void 0:g.focusNode;if(!g||!b||!v||yi(b)||yi(v))return!0;const y=t.createRng(),w=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),w.setStart(v,g.focusOffset),w.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,w)<=0},p={dom:t,win:e,serializer:n,editor:r,expand:(g={type:"word"})=>u(_o(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();X(g)&&X(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(Fc(t,v,r.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return w=v.format?v.format:"html",x=v,Yt(b).selection.getContent(w,x);var w,x})(r,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,w=b,C.from(y).bind(x=>C.from(x.parentNode).map(k=>{const _=v.nodeIndex(x),T=v.createRng();return T.setStart(k,_),T.setEnd(k,_+1),w&&(Fc(v,T,x,!0),Fc(v,T,x,!1)),T}))).each(u),g;var v,y,w},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=r.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?On(b,v=>t.isEditable(v.parentElement)):g.startContainer===g.endContainer?t.isEditable(g.startContainer):t.isEditable(g.startContainer)&&t.isEditable(g.endContainer)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const w=b.startOffset,x=b.endOffset;let k=b.commonAncestorContainer;b.collapsed||(v===y&&x-w<2&&v.hasChildNodes()&&(k=v.childNodes[w]),V(v)&&V(y)&&(v=v.length===w?Qb(v.nextSibling,!0):v.parentNode,y=0===x?Qb(y.previousSibling,!1):y.parentNode,v&&v===y&&(k=v)));const _=V(k)?k.parentNode:k;return nt(_)?_:g})(r.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>Yb(r.getBody(),c(),g),getEnd:g=>Xb(r.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,w,x)=>{const k=[],_=v.getRoot(),T=v.getParent(w||Yb(_,y,y.collapsed),v.isBlock),L=v.getParent(x||Xb(_,y,y.collapsed),v.isBlock);if(T&&T!==_&&k.push(T),T&&L&&T!==L){let P;const S=new re(T,_);for(;(P=S.next())&&P!==L;)v.isBlock(P)&&k.push(P)}return L&&T!==L&&L!==_&&k.push(L),k})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(Mc(b).length>1)&&Xi(r)){const v=rl(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(s(g,b),p),selectorChangedWithUnbind:s,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;X(g)?((v=r).inline?MS:IS)(v,g,b):Ns(r,c(),b)},placeCaretAt:(g,b)=>u(Rb(g,b,r.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?M.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=o=a=null,h.destroy()}},f=Es(p),h=kb(p,r);return p.bookmarkManager=f,p.controlSelection=h,p},pR=(t,e,n)=>{-1===W.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let a=r.length;for(;a--;)r[a].attr(o,null)}),e.push(n))},My=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,...t},o=e&&e.dom?e.dom:Mt.DOM,a=e&&e.schema?e.schema:Ar(r),s=va(r,a);return l=r,d=o,(i=s).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!Si(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("noscript",c=>{var u;let m=c.length;for(;m--;){const p=c[m].firstChild;p&&(p.value=Rr.decode(null!==(u=p.value)&&void 0!==u?u:""))}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=null==g?void 0:g.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===(null==p?void 0:p.indexOf("[CDATA["))?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==p?void 0:p.indexOf("mce:protected "))&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{H(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&W0(i,i.schema),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,X(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const w=g.dom;let x=b.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const _=k.createHTMLDocument("");W.each("BODY"===x.nodeName?x.childNodes:[x],T=>{_.body.appendChild(_.importNode(T,!0))}),x="BODY"!==x.nodeName?_.body.firstChild:_.body,y=w.doc,w.doc=_}return T={...v,node:x},g.dispatch("PreProcess",T),y&&(w.doc=y),x;var T})(p,f,h):f),u=((p,f,h)=>{const g=cr(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||_i(E(f))?g:W.trim(g)})(o,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=x=>"br"===(null==x?void 0:x.name),w=v.lastChild;if(y(w)){const x=w.prev;y(x)&&(w.remove(),x.remove())}})(b),b})(s,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var x;return((y,w,x)=>{return!w.no_events&&y?(_=y,T={...w,content:x},_.dispatch("PostProcess",T)).content:x;var _,T})(p,b,(x=g,Mr(f,h).serialize(x)))})(e,r,a,m,d)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:at(pR,s,n),getTempAttrs:J(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var i,l,d})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},hm=(t,e,n={})=>{const r=(o=n,a=e,{format:"html",...o,set:!0,content:a});var o,a;return lm(t,r).map(o=>{const a=(i=o.content,l=o,pm(t).editor.setContent(i,l));var i,l;return dm(t,a.html,o),a.content}).getOr(e)},bR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Ly=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Iy=(t,e)=>{const n=bt(e,r=>kt(t,r));return F(n)},Fy=(t,e)=>{const n=W.makeMap(t.plugins," "),r=bt(e,o=>kt(n,o));return F(r)},_R=t=>Xt(Ly,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),_l=Mt.DOM,El=t=>C.from(t).each(e=>e.destroy()),Sl=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>kt(t,e)}})(),ya=Ae.ModelManager,Uy=(t,e)=>e.dom[t],jy=(t,e)=>parseInt(Mn(e,t),10),ER=at(Uy,"clientWidth"),SR=at(Uy,"clientHeight"),NR=at(jy,"margin-top"),RR=at(jy,"margin-left"),zy=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},r=()=>C.from(e[0]),o=()=>{H(e,l=>{l.reposition()})},a=l=>{Yr(e,d=>d===l).each(d=>{e.splice(d,1)})},s=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(E)).map(Xo).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),Xt(e,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{a(c),o(),r().fold(()=>t.focus(),u=>zb(E(u.getEl())))});return(u=>{e.push(u)})(c),o(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=J(e);return(l=t).on("SkinLoaded",()=>{const d=iE(l);d&&s({text:d,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{H(e.slice(),d=>{n().close(d)})}),{open:s,close:()=>{r().each(l=>{n().close(l),a(l),o()})},getNotifications:i};var l},Ca=Ae.PluginManager,Bo=Ae.ThemeManager,Hy=t=>{let e=[];const n=()=>{const s=t.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(s,i)=>(...l)=>i?i.apply(s,l):void 0,o=s=>{t.dispatch("CloseWindow",{dialog:s}),e=bt(e,i=>i!==s),0===e.length&&t.focus()},a=s=>{t.editorManager.setActive(t),nu(t),t.ui.show();const i=s();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{H(e,s=>{n().close(s)})}),{open:(s,i)=>a(()=>n().open(s,i,o)),openUrl:s=>a(()=>n().openUrl(s,o)),alert:(s,i,l)=>{const d=n();d.alert(s,r(l||d,i))},confirm:(s,i,l)=>{const d=n();d.confirm(s,r(l||d,i))},close:()=>{C.from(e[e.length-1]).each(s=>{n().close(s),o(s)})}}},$y=(t,e)=>{t.notificationManager.open({type:"error",text:e})},Nl=(t,e)=>{t._skinLoaded?$y(t,e):t.on("SkinLoaded",()=>{$y(t,e)})},Is=(t,e,n)=>{hb(t,e,{message:n}),console.error(n)},Fs=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Rl=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Vy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return Nt(e,o=>/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},qy=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let OR=0;const Wy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ky=(t,e)=>((t,e)=>{const n={},r=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&ut(f.location)?c((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),o=Rt(e.handler)?e.handler:r,a=(l,d)=>({url:d,blobInfo:l,status:!0}),s=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{W.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||o!==r?(u=d,c=W.grep(c=l,m=>!t.isUploaded(m.blobUri())),Promise.all(W.map(c,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=o,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=Et)},w=k=>{y(),t.markUploaded(p.blobUri(),k),i(p.blobUri(),a(p,k)),g(a(p,k))},x=k=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),s(p,k)),g(s(p,k))};v=k=>{k<0||k>100||C.from(b).orThunk(()=>C.from(h).map(jo)).each(_=>{b=_,_.progressBar.value(k)})},f(p,v).then(w,k=>{x(ut(k)?{message:k}:k)})}catch(y){g(s(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:G_(t),basePath:Y_(t),credentials:X_(t),handler:Q_(t)}),Gy={remove_similar:!0,inherit:!1},wa={selector:"td,th",...Gy},DR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...wa},tablecellverticalalign:{styles:{"vertical-align":"%value"},...wa},tablecellbordercolor:{styles:{borderColor:"%value"},...wa},tablecellclass:{classes:["%value"],...wa},tableclass:{selector:"table",classes:["%value"],...Gy},tablecellborderstyle:{styles:{borderStyle:"%value"},...wa},tablecellborderwidth:{styles:{borderWidth:"%value"},...wa}},PR=J(DR),Al=W.each,sn=Mt.DOM,bm=t=>X(t)&&he(t),Yy=(t,e)=>{const n=e&&e.schema||Ar({}),r=s=>{const i=ut(s)?{name:s,classes:[],attrs:{}}:s,l=sn.create(i.name);return d=l,(c=i).classes.length>0&&sn.addClass(d,c.classes.join(" ")),sn.setAttribs(d,c.attrs),l;var d,c},o=(s,i,l)=>{let d;const c=i[0],u=bm(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=null==b?void 0:b.parentsRequired;return!(!v||!v.length)&&(g&&Ot(v,g)?g:v[0])})(s,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return s;const p=d?r(d):sn.create("div");p.appendChild(s),l&&W.each(l,h=>{const g=r(h);p.insertBefore(g,s)});const f=bm(d)?d.siblings:void 0;return o(p,i,f)},a=sn.create("div");if(t.length>0){const s=t[0],i=r(s),l=bm(s)?s.siblings:void 0;a.appendChild(o(i,t.slice(1),l))}return a},MR=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=W.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,a,s,i)=>{switch(o){case"#":n.attrs.id=a;break;case".":n.classes.push(a);break;case":":-1!==W.inArray("checked disabled enabled read-only required".split(" "),a)&&(n.attrs[a]=a)}if("["===s){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},LR=(t,e)=>{let n="",r=uE(t);if(""===r)return"";const o=p=>ut(p)?p.replace(/%(\w+)/g,""):"",a=(p,f)=>sn.getStyle(null!=f?f:t.getBody(),p,!0);if(ut(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";r=p||r}let s,i=e.block||e.inline||"span";const l=ut(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),W.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=W.map(p.split(/(?:~\+|~|\+)/),MR),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,s=Yy(l,t)):s=Yy([i],t);const c=sn.select(i,s)[0]||s.firstChild;Al(e.styles,(p,f)=>{const h=o(p);h&&sn.setStyle(c,f,h)}),Al(e.attributes,(p,f)=>{const h=o(p);h&&sn.setAttrib(c,f,h)}),Al(e.classes,p=>{const f=o(p);sn.hasClass(c,f)||sn.addClass(c,f)}),t.dispatch("PreviewFormats"),sn.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);const u=a("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return Al(r.split(" "),p=>{let f=a(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=a(p),"#ffffff"===Yi(f).toLowerCase())||"color"===p&&"#000000"===Yi(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),sn.remove(s),n},Xy=t=>{const e=(r=>{const o={},a=(s,i)=>{s&&(ut(s)?($t(i)||(i=[i]),H(i,l=>{ae(l.deep)&&(l.deep=!rn(l)),ae(l.split)&&(l.split=!rn(l)||oe(l)),ae(l.remove)&&rn(l)&&!oe(l)&&(l.remove="none"),rn(l)&&oe(l)&&(l.mixed=!0,l.block_expand=!0),ut(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[s]=i):lt(s,(l,d)=>{a(d,l)}))};return a((s=>{const i=s.dom,l=s.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>nt(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{W.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=null==c?void 0:c.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return W.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(r)),a(PR()),a(cE(r)),{get:s=>X(s)?o[s]:o,has:s=>kt(o,s),register:a,unregister:s=>(s&&o[s]&&delete o[s],o)}})(t),n=ie({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var a;((s,i,l)=>{const d=s.selection,c=s.getBody();qu(s,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==ba||qu(s,Co(c,d.getStart())),37!==i&&39!==i||qu(s,Co(c,d.getStart()))})(r,o.keyCode,(a=r.selection.getRng().endContainer,V(a)&&kd(a.data,se)))}),Vn(t)||((r,o)=>{r.set({}),o.on("NodeChange",a=>{$0(o,a.element,r.get())}),o.on("FormatApply FormatRemove",a=>{const s=C.from(a.node).map(i=>ks(i)?i:i.startContainer).bind(i=>nt(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>j0(o));$0(o,s,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,a)=>{var i,l,d;i=r,l=o,d=a,Yt(t).formatter.apply(i,l,d)},remove:(r,o,a,s)=>{var l,d,c,u;l=r,d=o,c=a,u=s,Yt(t).formatter.remove(l,d,c,u)},toggle:(r,o,a)=>{var i,l,d;i=r,l=o,d=a,Yt(t).formatter.toggle(i,l,d)},match:(r,o,a,s)=>{return l=r,d=o,c=a,u=s,Yt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:r=>{return a=r,Yt(t).formatter.closest(a);var a},matchAll:(r,o)=>{return s=r,i=o,Yt(t).formatter.matchAll(s,i);var s,i},matchNode:(r,o,a,s)=>{return l=r,d=o,c=a,u=s,Yt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:r=>{return a=r,Yt(t).formatter.canApply(a);var a},formatChanged:(r,o,a,s)=>{return l=n,d=r,c=o,u=a,m=s,Yt(t).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:at(LR,t)};var r},Qy=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Jy=t=>{const e=Or(),n=ie(0),r=ie(0),o={data:[],typing:!1,beforeChange:()=>{var s,i;s=n,i=e,Yt(t).undoManager.beforeChange(s,i)},add:(a,s)=>{return l=o,d=r,c=n,u=e,m=a,p=s,Yt(t).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{t.setDirty(!0);const a=xl(t);a.bookmark=vc(t.selection),t.dispatch("change",{level:a,lastLevel:q(o.data,r.get()).getOrUndefined()})},undo:()=>{return s=o,i=n,l=r,Yt(t).undoManager.undo(s,i,l);var s,i,l},redo:()=>{return s=r,i=o.data,Yt(t).undoManager.redo(s,i);var s,i},clear:()=>{var s,i;s=o,i=r,Yt(t).undoManager.clear(s,i)},reset:()=>{var s;s=o,Yt(t).undoManager.reset(s)},hasUndo:()=>{return s=o,i=r,Yt(t).undoManager.hasUndo(s,i);var s,i},hasRedo:()=>{return s=o,i=r,Yt(t).undoManager.hasRedo(s,i);var s,i},transact:a=>{return i=o,l=n,d=a,Yt(t).undoManager.transact(i,l,d);var i,l,d},ignore:a=>{var i,l;i=n,l=a,Yt(t).undoManager.ignore(i,l)},extra:(a,s)=>{var l,d,c,u;l=o,d=r,c=a,u=s,Yt(t).undoManager.extra(l,d,c,u)}};return Vn(t)||((a,s,i)=>{const l=ie(!1),d=c=>{kl(s,!1,i),s.add({},c)};a.on("init",()=>{s.add()}),a.on("BeforeExecCommand",c=>{Qy(c.command)||(Ny(s,i),s.beforeChange())}),a.on("ExecCommand",c=>{Qy(c.command)||d(c)}),a.on("ObjectResizeStart cut",()=>{s.beforeChange()}),a.on("SaveContent ObjectResized blur",d),a.on("dragend",d),a.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=St.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),a.nodeChanged()),46!==u&&8!==u||a.nodeChanged(),l.get()&&s.typing&&!fm(xl(a),s.data[0])&&(a.isDirty()||a.setDirty(!0),a.dispatch("TypingUndo"),l.set(!1),a.nodeChanged())}),a.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||s.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((St.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&s.beforeChange()):(s.beforeChange(),kl(s,!0,i),s.add({},c),void l.set(!0));s.typing&&d(c)}}),a.on("mousedown",c=>{s.typing&&d(c)}),a.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),a.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||a.nodeChanged()})})(t,o,n),(a=t).addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),o;var a},IR=[9,27,ot.HOME,ot.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ot.DOWN,ot.UP,ot.LEFT,ot.RIGHT].concat(St.browser.isFirefox()?[224]:[]),Zy="data-mce-placeholder",tC=t=>"keydown"===t.type||"keyup"===t.type,eC=t=>{const e=t.keyCode;return e===ot.BACKSPACE||e===ot.DELETE},FR=(t,e)=>({from:t,to:e}),vm=(t,e)=>{const n=E(t),r=E(e.container());return cl(n,r).map(o=>({block:o,position:e}))},nC=(t,e)=>no(e,n=>Za(n)||Cn(n.dom),n=>Tt(n,t)).filter(ze).getOr(t),rC=t=>{const e=(n=>{const r=ye(n);return Yr(r,Ze).fold(J(r),o=>r.slice(0,o))})(t);return H(e,zt),e},oC=(t,e)=>{const n=fr(e,t);return Xt(n.reverse(),r=>Zt(r)).each(zt)},UR=(t,e,n,r)=>{if(Zt(n))return Sr(n),Te(n.dom);0===bt(Cg(r),a=>!Zt(a)).length&&Zt(e)&&We(r,ge("br"));const o=Le(n.dom,M.before(r.dom));return H(rC(e),a=>{We(r,a)}),oC(t,e),o},jR=(t,e,n)=>{if(Zt(n)){if(Zt(e)){const a=Gr((s=>{const i=(l,d)=>Bd(l).fold(()=>d,c=>ki(c)?i(c,d.concat(go(c))):d);return i(s,[])})(n),(s,i)=>(Tg(s,i),i),Ei());Jo(e),Jt(e,a)}return zt(n),Te(e.dom)}const r=gn(n.dom);return H(rC(e),o=>{Jt(n,o)}),oC(t,e),r},aC=(t,e)=>{ca(t,e.dom).bind(n=>C.from(n.getNode())).map(E).filter(io).each(zt)},sC=(t,e,n)=>{return aC(!0,e),aC(!1,n),(r=e,o=n,ar(o,r)?((a,s)=>{const i=fr(s,a);return C.from(i[i.length-1])})(o,r):C.none()).fold(at(jR,t,e,n),at(UR,t,e,n));var r,o},iC=(t,e,n,r)=>e?sC(t,r,n):sC(t,n,r),ym=(t,e)=>{const n=E(t.getBody());return(o=n.dom,a=e,s=t.selection.getRng(),s.collapsed?((i,l,d)=>{const c=vm(i,M.fromRangeStart(d)),u=c.bind(m=>en(l,i,m.position).bind(p=>vm(i,p).map(f=>{return h=i,g=l,Wt((b=f).position.getNode())&&!Zt(b.block)?ca(!1,b.block.dom).bind(v=>v.isEqual(b.position)?en(g,h,v).bind(y=>vm(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return De(c,u,FR).filter(m=>{return!Tt((p=m).from.block,p.to.block)&&((p,f)=>{const h=E(p);return Tt(nC(h,f.from.block),nC(h,f.to.block))})(i,m)&&(p=>!1===Ut(p.from.block.dom)&&!1===Ut(p.to.block.dom))(m)&&(p=>{const f=h=>Vg(h)||Qd(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(o,a,s):C.none()).map(o=>()=>{iC(n,e,o.from.block,o.to.block).each(a=>{t.selection.setRng(a.toRange())})});var o,a,s},lC=(t,e)=>{const n=E(e),r=at(Tt,t);return ir(n,Za,r).isSome()},Cm=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=E(t.getBody());return((n,r)=>{const o=Le(n.dom,M.fromRangeStart(r)).isNone(),a=Oe(n.dom,M.fromRangeEnd(r)).isNone();return!(lC(s=n,(i=r).startContainer)||lC(s,i.endContainer))&&o&&a;var s,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return De(cl(n,E(o.startContainer)),cl(n,E(o.endContainer)),(a,s)=>Tt(a,s)?C.none():C.some(()=>{o.deleteContents(),iC(n,!0,a,s).each(i=>{r.setRng(i.toRange())})})).getOr(C.none())})(e,t.selection);var n})(t),gr=(t,e,n,r,o)=>C.from(e._selectionOverrides.showCaret(t,n,r,o)),Us=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),wm=(t,e,n)=>e.collapsed?((r,o,a)=>{const s=Nc(1,r.getBody(),o),i=M.fromRangeStart(s),l=i.getNode();if(ps(l))return gr(1,r,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(ps(d))return gr(1,r,d,!1,!1);const c=Ro(r.dom.getRoot(),i.getNode());return ps(c)?gr(1,r,c,!1,a):C.none()})(t,e,n).getOr(e):e,HR=t=>Ir(t)||Rs(t),$R=t=>Fr(t)||As(t),dC=(t,e,n,r,o,a)=>{var s,i;gr(r,t,a.getNode(!o),o,!0).each(s=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(s.startContainer,s.startOffset):i.setStart(s.endContainer,s.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(s)}),s=t.dom,V(i=n)&&0===i.data.length&&s.remove(i)},xm=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!V(o.commonAncestorContainer))return C.none();const a=r?le.Forwards:le.Backwards,s=jn(n.getBody()),i=at(Rc,r?s.next:s.prev),l=r?HR:$R,d=Cs(a,n.getBody(),o),c=i(d),u=c&&an(r,c);if(!u||!qi(d,u))return C.none();if(l(u))return C.some(()=>dC(n,o,d.getNode(),a,r,u));const m=i(u);return m&&l(m)&&qi(u,m)?C.some(()=>dC(n,o,d.getNode(),a,r,m)):C.none()})(t,e),km=(t,e)=>{const n=t.getBody();return e?Te(n).filter(Ir):gn(n).filter(Fr)},_m=t=>{const e=t.selection.getRng();return!e.collapsed&&(km(t,!0).exists(n=>n.isEqual(M.fromRangeStart(e)))||km(t,!1).exists(n=>n.isEqual(M.fromRangeEnd(e))))},ln=In([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),cC=(t,e,n)=>en(e,t,n).bind(r=>{return o=r.getNode(),X(o)&&(Za(E(o))||Ja(E(o)))||((a,s,i,l)=>{const d=c=>ki(E(c))&&!Fn(i,l,a);return Bh(!s,i).fold(()=>Bh(s,l).fold(It,d),d)})(t,e,n,r)?C.none():e&&Ut(r.getNode())||!e&&Ut(r.getNode(!0))?((a,s,i,l)=>{const d=l.getNode(!s);return cl(E(a),E(i.getNode())).map(c=>Zt(c)?ln.remove(c.dom):ln.moveToElement(d)).orThunk(()=>C.some(ln.moveToElement(d)))})(t,e,n,r):e&&Fr(n)||!e&&Ir(n)?C.some(ln.moveToPosition(r)):C.none();var o}),uC=(t,e)=>C.from(Ro(t.getBody(),e)),mC=t=>{const e=t.dom,n=t.selection,r=Ro(t.getBody(),n.getNode());if(Cn(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(M.before(o).toRange())}return!0},Em=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return uC(t,n).filter(Ut).fold(()=>((r,o,a)=>{const s=Nc(o?1:-1,r,a),i=M.fromRangeStart(s),l=E(r);return!o&&Fr(i)?C.some(ln.remove(i.getNode(!0))):o&&Ir(i)?C.some(ln.remove(i.getNode())):!o&&Ir(i)&&hu(l,i)?rN(l,i).map(d=>ln.remove(d.getNode())):o&&Fr(i)&&pu(l,i)?oN(l,i).map(d=>ln.remove(d.getNode())):(d=r,((m,p)=>{const f=p.getNode(!m),h=m?"after":"before";return nt(f)&&f.getAttribute("data-mce-caret")===h})(c=o,u=i)?(m=c,p=u.getNode(!c),Gt(p)?C.none():m&&Ut(p.nextSibling)?C.some(ln.moveToElement(p.nextSibling)):!m&&Ut(p.previousSibling)?C.some(ln.moveToElement(p.previousSibling)):C.none()).orThunk(()=>cC(d,c,u)):cC(d,c,u).bind(m=>((p,f,h)=>h.fold(g=>C.some(ln.remove(g)),g=>C.some(ln.moveToElement(g)),g=>Fn(f,g,p)?C.none():C.some(ln.moveToPosition(g))))(d,u,m)));var d,c,u,m,p})(t.getBody(),e,t.selection.getRng()).map(r=>()=>{return r.fold((o=t,a=e,s=>(o._selectionOverrides.hideFakeCaret(),So(o,a,E(s)),!0)),((o,a)=>s=>{const i=a?M.before(s):M.after(s);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>a=>(o.selection.setRng(a.toRange()),!0))(t));var o,a}),()=>C.some(Et))})(t,e):((n,r)=>{const o=n.selection.getNode();return Ut(o)&&!wi(o)?uC(n,o.parentNode).filter(Ut).fold(()=>C.some(()=>{var a;a=E(n.getBody()),H(ke(a,".mce-offscreen-selection"),zt),So(n,r,E(n.selection.getNode())),xu(n)}),()=>C.some(Et)):_m(n)?C.some(()=>{jv(n,n.selection.getRng(),E(n.getBody()))}):C.none()})(t,e),Sm=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=M.fromRangeStart(n.selection.getRng());return en(r,n.getBody(),o).filter(a=>r?JS(a):ZS(a)).bind(a=>Sc(r?0:-1,a)).map(a=>()=>n.selection.select(a))})(t,e):C.none(),xa=V,fC=t=>xa(t)&&t.data[0]===_e,gC=t=>xa(t)&&t.data[t.data.length-1]===_e,pC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(_e)},Ol=(t,e)=>t?(n=>{var r;if(xa(n.previousSibling))return gC(n.previousSibling)||n.previousSibling.appendData(_e),n.previousSibling;if(xa(n))return fC(n)||n.insertData(0,_e),n;{const o=pC(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(xa(n.nextSibling))return fC(n.nextSibling)||n.nextSibling.insertData(0,_e),n.nextSibling;if(xa(n))return gC(n)||n.appendData(_e),n;{const a=pC(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(a,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(a),a}})(e),qR=at(Ol,!0),WR=at(Ol,!1),hC=(t,e)=>V(t.container())?Ol(e,t.container()):Ol(e,t.getNode()),bC=(t,e)=>{const n=e.get();return n&&t.container()===n&&Nr(n)},Nm=(t,e)=>e.fold(n=>{vo(t.get());const r=qR(n);return t.set(r),C.some(M(r,r.length-1))},n=>Te(n).map(r=>{if(bC(r,t)){const o=t.get();return M(o,1)}{vo(t.get());const o=hC(r,!0);return t.set(o),M(o,1)}}),n=>gn(n).map(r=>{if(bC(r,t)){const o=t.get();return M(o,o.length-1)}{vo(t.get());const o=hC(r,!1);return t.set(o),M(o,o.length-1)}}),n=>{vo(t.get());const r=WR(n);return t.set(r),C.some(M(r,1))}),vC=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return C.none()},Be=In([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),yC=(t,e)=>Dr(e,t)||t,KR=(t,e,n)=>{const r=Mv(n),o=yC(e,r.container());return Ur(t,o,r).fold(()=>Oe(o,r).bind(at(Ur,t,o)).map(a=>Be.before(a)),C.none)},GR=(t,e)=>null===Co(t,e),CC=(t,e,n)=>Ur(t,e,n).filter(at(GR,e)),YR=(t,e,n)=>{const r=Lv(n);return CC(t,e,r).bind(o=>Le(o,r).isNone()?C.some(Be.start(o)):C.none())},XR=(t,e,n)=>{const r=Mv(n);return CC(t,e,r).bind(o=>Oe(o,r).isNone()?C.some(Be.end(o)):C.none())},QR=(t,e,n)=>{const r=Lv(n),o=yC(e,r.container());return Ur(t,o,r).fold(()=>Le(o,r).bind(at(Ur,t,o)).map(a=>Be.after(a)),C.none)},wC=t=>!Pv(Rm(t)),qn=(t,e,n)=>vC([KR,YR,XR,QR],[t,e,n]).filter(wC),Rm=t=>t.fold(ne,ne,ne,ne),xC=t=>t.fold(J("before"),J("start"),J("end"),J("after")),Tl=t=>t.fold(Be.before,Be.before,Be.after,Be.after),Am=t=>t.fold(Be.start,Be.start,Be.end,Be.end),JR=(t,e,n,r,o,a)=>De(Ur(e,n,r),Ur(e,n,o),(s,i)=>s!==i&&((l,d,c)=>{const u=Dr(d,l),m=Dr(c,l);return X(u)&&u===m})(n,s,i)?Be.after(t?s:i):a).getOr(a),ZR=(t,e)=>t.fold(Vt,n=>{return o=e,!(xC(r=n)===xC(o)&&Rm(r)===Rm(o));var r,o}),tA=(t,e)=>t?e.fold(nr(C.some,Be.start),C.none,nr(C.some,Be.after),C.none):e.fold(C.none,nr(C.some,Be.before),C.none,nr(C.some,Be.end)),kC=(t,e,n)=>{const r=t?1:-1;return e.setRng(M(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Wn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Wn||(Wn={}));const Bl=(t,e)=>t===le.Backwards?Xr(e):e,eA=(t,e,n)=>t===le.Forwards?e.next(n):e.prev(n),nA=(t,e,n,r)=>Wt(r.getNode(e===le.Forwards))?Wn.Br:!1===Fn(n,r)?Wn.Block:Wn.Wrap,_C=(t,e,n,r)=>{const o=jn(n);let a=r;const s=[];for(;a;){const i=eA(e,o,a);if(!i)break;if(Wt(i.getNode(!1)))return e===le.Forwards?{positions:Bl(e,s).concat([i]),breakType:Wn.Br,breakAt:C.some(i)}:{positions:Bl(e,s),breakType:Wn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(a,i)){const l=nA(0,e,a,i);return{positions:Bl(e,s),breakType:l,breakAt:C.some(i)}}s.push(i),a=i}else a=i}return{positions:Bl(e,s),breakType:Wn.Eol,breakAt:C.none()}},EC=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const a=e(n,o).positions;return t===le.Backwards?a.concat(o):[o].concat(a)}).getOr([]),Om=(t,e)=>Re(t,(n,r)=>n.fold(()=>C.some(r),o=>De(Y(o.getClientRects()),Y(r.getClientRects()),(a,s)=>{const i=Math.abs(e-a.left);return Math.abs(e-s.left)<=i?r:o}).or(n)),C.none()),Dl=(t,e)=>Y(e.getClientRects()).bind(n=>Om(t,n.left)),js=at(_C,M.isAbove,-1),zs=at(_C,M.isBelow,1),SC=at(EC,-1,js),NC=at(EC,1,zs),rA=(t,e)=>Dl(SC(t,e),e),oA=(t,e)=>Dl(NC(t,e),e),aA=Ut,RC=(t,e)=>Math.abs(t.left-e),AC=(t,e)=>Math.abs(t.right-e),OC=(t,e)=>ui(t,(n,r)=>{const o=Math.min(RC(n,e),AC(n,e)),a=Math.min(RC(r,e),AC(r,e));return a===o&&Ho(r,"node")&&aA(r.node)||a<o?r:n}),sA=t=>{const e=n=>Nt(n,r=>{const o=ho(r);return o.node=t,o});if(nt(t))return e(t.getClientRects());if(V(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},TC=t=>qe(t,sA);var Hs;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Hs||(Hs={}));const BC=(t,e,n,r,o,a)=>{let s=0;const i=[],l=u=>{let m=TC([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,Jr(i))&&s++,f.line=s,o(f))return!0;i.push(f)}}return!1},d=Jr(a.getClientRects());if(!d)return i;const c=a.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=bs(h,u,Yg,m);)if(p(h))return})(t,r,l,c)),i},iA=at(BC,Hs.Up,ds,cs),lA=at(BC,Hs.Down,cs,ds),DC=t=>Jr(t.getClientRects()),PC=t=>e=>e.line>t,Tm=t=>e=>e.line===t,pr=(t,e)=>{t.selection.setRng(e),Ns(t,t.selection.getRng())},Bm=(t,e,n)=>C.some(wm(t,e,n)),MC=(t,e,n,r,o,a)=>{const s=e===le.Forwards,i=jn(t.getBody()),l=at(Rc,s?i.next:i.prev),d=s?r:o;if(!n.collapsed){const f=Ii(n);if(a(f))return gr(e,t,f,e===le.Backwards,!1);if(_m(t)){const h=n.cloneRange();return h.collapse(e===le.Backwards),C.from(h)}}const c=Cs(e,t.getBody(),n);if(d(c))return Us(t,c.getNode(!s));let u=l(c);const m=Wg(n);if(!u)return m?C.some(n):C.none();if(u=an(s,u),d(u))return gr(e,t,u.getNode(!s),s,!1);const p=l(u);return p&&d(p)&&qi(u,p)?gr(e,t,p.getNode(!s),s,!1):m?Bm(t,u.toRange(),!1):C.none()},LC=(t,e,n,r,o,a)=>{const s=Cs(e,t.getBody(),n),i=Jr(s.getClientRects()),l=e===Hs.Down,d=t.getBody();if(!i)return C.none();if(_m(t)){const h=l?M.fromRangeEnd(n):M.fromRangeStart(n);return(l?oA:rA)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?lA:iA)(d,PC(1),s),u=bt(c,Tm(1)),m=i.left,p=OC(u,m);if(p&&a(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return gr(e,t,p.node,h<g,!1)}let f;if(f=r(s)?s.getNode():o(s)?s.getNode(!0):Ii(n),f){const h=((b,v,y,w)=>{const x=jn(v);let k,_,T,L;const P=[];let S=0;1===b?(k=x.next,_=cs,T=ds,L=M.after(w)):(k=x.prev,_=ds,T=cs,L=M.before(w));const O=DC(L);do{if(!L.isVisible())continue;const R=DC(L);if(T(R,O))continue;P.length>0&&_(R,Jr(P))&&S++;const B=ho(R);if(B.position=L,B.line=S,y(B))return P;P.push(B)}while(L=k(L));return P})(e,d,PC(1),f);let g=OC(bt(h,Tm(1)),m);if(g||(g=Jr(bt(h,Tm(0))),g))return Bm(t,g.position.toRange(),!1)}return 0===u.length?Dm(t,l).filter(l?o:r).map(h=>wm(t,h.toRange(),!1)):C.none()},Dm=(t,e)=>{const n=t.selection.getRng(),r=e?M.fromRangeEnd(n):M.fromRangeStart(n),o=(a=r.container(),s=t.getBody(),ir(E(a),i=>sS(i.dom),i=>i.dom===s).map(i=>i.dom).getOr(s));var a,s;if(e){const i=zs(o,r);return dt(i.positions)}{const i=js(o,r);return Y(i.positions)}},IC=(t,e,n)=>Dm(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Pl=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},FC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},UC=(t,e,n)=>Nm(e,n).map(r=>(Pl(t,r),n)),jC=(t,e,n)=>!!gs(t)&&((t,e,n)=>{const r=t.getBody(),o=((a,s,i)=>{const l=M.fromRangeStart(a);if(a.collapsed)return l;{const d=M.fromRangeEnd(a);return i?Le(s,d).getOr(d):Oe(s,l).getOr(l)}})(t.selection.getRng(),r,n);return((a,s,i,l)=>{const d=an(a,l),c=qn(s,i,d);return qn(s,i,d).bind(at(tA,a)).orThunk(()=>((u,m,p,f,h)=>{const g=an(u,h);return en(u,p,g).map(at(an,u)).fold(()=>f.map(Tl),b=>qn(m,p,b).map(at(JR,u,m,p,g,b)).filter(at(ZR,f))).filter(wC)})(a,s,i,c,l))})(n,at(No,t),r,o).bind(a=>UC(t,e,a))})(t,e,n).isSome(),zC=(t,e,n)=>!!gs(e)&&((r,o)=>{const a=o.selection.getRng(),s=r?M.fromRangeEnd(a):M.fromRangeStart(a);return!!Rt(o.selection.getSel().modify)&&(r&&qd(s)?kC(!0,o.selection,s):!(r||!Wd(s))&&kC(!1,o.selection,s))})(t,e),uA=at(zC,!0),mA=at(zC,!1),Ml=(t,e,n)=>{if(gs(t)){const r=Dm(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?M.fromRangeEnd(o):M.fromRangeStart(o)});return qn(at(No,t),t.getBody(),r).exists(o=>{const a=Tl(o);return Nm(n,a).exists(s=>(Pl(t,s),!0))})}return!1},HC=(t,e)=>n=>Nm(e,n).map(r=>()=>Pl(t,r)),$C=(t,e,n,r)=>{const o=t.getBody(),a=at(No,t);t.undoManager.ignore(()=>{t.selection.setRng(((s,i)=>{const l=document.createRange();return l.setStart(s.container(),s.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),wu(t),qn(a,o,M.fromRangeStart(t.selection.getRng())).map(Am).bind(HC(t,e)).each(Cr)}),t.nodeChanged()},Pm=(t,e,n)=>{if(t.selection.isCollapsed()&&gs(t)){const r=M.fromRangeStart(t.selection.getRng());return((o,a,s,i)=>{const l=(u=o.getBody(),m=i.container(),Dr(m,u)||u),d=at(No,o),c=qn(d,l,i);var u,m;return c.bind(u=>s?u.fold(J(C.some(Am(u))),C.none,J(C.some(Tl(u))),C.none):u.fold(C.none,J(C.some(Tl(u))),C.none,J(C.some(Am(u))))).map(HC(o,a)).getOrThunk(()=>{const u=ws(s,l,i),m=u.bind(p=>qn(d,l,p));return De(c,m,()=>Ur(d,l,i).bind(p=>{return De(Te(f=p),gn(f),(h,g)=>{const b=an(!0,h),v=an(!1,g);return Oe(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{So(o,s,E(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{s?$C(o,a,i,p):$C(o,a,p,i)})))})})(t,e,n,r)}return C.none()},VC=(t,e)=>{const n=E(t.getBody()),r=E(t.selection.getStart()),o=fr(r,n);return Yr(o,e).fold(J(o),a=>o.slice(0,a))},fA=t=>1===Pd(t),qC=(t,e)=>{const n=at(m0,t);return qe(e,r=>n(r)?[r.dom]:[])},WC=t=>{const e=VC(t,Ze);return qC(t,e)},KC=(t,e)=>{const n=t.selection.getStart(),r=((o,a)=>{const s=a.parentElement;return Wt(a)&&!Ne(s)&&o.dom.isEmpty(s)})(t,n)||f0(E(n))?u0(n,e):((o,a)=>{const{caretContainer:s,caretPosition:i}=c0(a);return o.insertNode(s.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},GC=t=>V(t.startContainer),Mm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=bt(VC(t,o=>Ze(o)||Pd(o)>1),fA);return dt(n).bind(r=>{const o=M.fromRangeStart(t.selection.getRng());return Fv(e,o,r.dom)&&!f0(r)?C.some(()=>((a,s,i,l)=>{const d=qC(s,l);if(0===d.length)So(s,a,i);else{const c=u0(i.dom,d);s.selection.setRng(c.toRange())}})(e,t,r,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&GC(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Ne(o)&&m0(n,E(o))})(t,e)&&(n=>{return(o=>{const a=o.startContainer.parentNode,s=o.endContainer.parentNode;return!Ne(a)&&!Ne(s)&&a.isEqualNode(s)})(r=n)&&(o=>{const a=o.endContainer;return o.endOffset===(V(a)?a.length:a.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=WC(n);return C.some(()=>{wu(n),((o,a)=>{const s=zo(a,WC(o));s.length>0&&KC(o,s)})(n,r)})}return C.none()})(t),$s=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(GC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>ir(t,o=>pn(o.dom),Ze).isSome())(E(e.selection.getStart()))})(t)&&KC(t,[]),!0),Lm=(t,e,n)=>X(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),So(t,e,E(n))}):C.none(),Im=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?Rs:As,s=Cs(r?le.Forwards:le.Backwards,n.getBody(),n.selection.getRng());return o(s)?Lm(n,r,s.getNode(!r)):C.from(an(r,s)).filter(i=>o(i)&&qi(s,i)).bind(i=>Lm(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return Ln(o)?Lm(n,r,o):C.none()})(t,e),Fm=t=>mi(null!=t?t:"").getOr(0),YC=(t,e)=>(t||"table"===Ft(e)?"margin":"padding")+("rtl"===Mn(e,"direction")?"-right":"-left"),XC=t=>{const e=JC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,On(e,o=>{const a=YC(uh(n),o),s=hi(o,a).map(Fm).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&s>0})));var n},QC=t=>Vd(t)||Ja(t),JC=t=>bt(Id(t.selection.getSelectedBlocks()),e=>!QC(e)&&!mn(e).exists(QC)&&no(e,n=>Cn(n.dom)||Ut(n.dom)).exists(n=>Cn(n.dom))),ZC=(t,e)=>{var n,r;const{dom:o}=t,a=tE(t),s=null!==(r=null===(n=/[a-z%]+$/i.exec(a))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=Fm(a),l=uh(t);H(JC(t),d=>{((c,u,m,p,f,h)=>{const g=YC(m,E(h)),b=Fm(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(o,e,l,i,s,d.dom)})},t1=t=>ZC(t,"outdent"),e1=t=>{if(t.selection.isCollapsed()&&XC(t)){const e=t.dom,n=t.selection.getRng(),r=M.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&gu(E(o),r))return C.some(()=>t1(t))}return C.none()},n1=(t,e,n)=>Qt([e1,Em,xm,(r,o)=>Pm(r,e,o),ym,Ou,Sm,Im,Cm,Mm],r=>r(t,n)).filter(r=>t.selection.isEditable()),r1=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),Um=(t,e)=>kt(t,e.nodeName),vA=(t,e)=>!!V(e)||!!nt(e)&&!Um(t.getBlockElements(),e)&&!nn(e)&&!co(t,e),yA=(t,e)=>!(!V(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!Um(t,e.nextSibling))),o1=t=>t.dom.create(Me(t),fs(t)),CA=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),a=n.getStart(),s=t.getBody();let i,l,d=!1;const c=Me(t);if(!a||!nt(a))return;const u=s.nodeName.toLowerCase();if(!r.isValidChild(u,c.toLowerCase())||(y=o,w=s,qt(pv(E(a),E(w)),k=>Um(y,k.dom))))return;var y,w;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=Eo(t);let v=s.firstChild;for(;v;)if(nt(v)&&c_(r,v),vA(r,v)){if(yA(o,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=o1(t),s.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),t.nodeChanged())},a1=(t,e,n)=>{const r=E(o1(t)),o=Ei();Jt(r,o),n(e,r);const a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},s1=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),wA=(t,e,n)=>function(r){const o=arguments,a=o[o.length-2],s=a>0?e.charAt(a-1):"";if('"'===s)return r;if(">"===s){const i=e.lastIndexOf("<",a);if(-1!==i&&-1!==e.substring(i,a).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},i1=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Kd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},xA=(t,e)=>{const n=Ga(E(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void i1(t,n)):void(qg(n)&&(i1(t,n),t.undoManager.add()))},l1=Ut,d1=(t,e,n)=>{const r=jn(t.getBody()),o=at(Rc,1===e?r.next:r.prev);if(n.collapsed){const a=t.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!o(M.fromRangeStart(n))){const s=E((i=>{const l=i.dom.create(Me(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?kr(E(a),s):We(E(a),s),t.selection.select(s.dom,!0),t.selection.collapse()}}},c1=(t,e)=>((n,r)=>{const o=r?le.Forwards:le.Backwards,a=n.selection.getRng();return(s=o,i=n,l=a,MC(i,s,l,Ir,Fr,l1)).orThunk(()=>(d1(n,o,a),C.none()));var s,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return Pv(o)?!r:r})(t.selection,e)).exists(n=>(pr(t,n),!0)),u1=(t,e)=>((n,r)=>{const o=r?1:-1,a=n.selection.getRng();return(s=o,i=n,l=a,LC(i,s,l,d=>Ir(d)||fv(d),d=>Fr(d)||gv(d),l1)).orThunk(()=>(d1(n,o,a),C.none()));var s,i,l})(t,e).exists(n=>(pr(t,n),!0)),m1=(t,e)=>IC(t,e,e?Fr:Ir),Ll=(t,e)=>km(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(pr(t,n),!0)),kA=t=>Ot(["figcaption"],Ft(t)),f1=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=E(t.getBody()),r=M.fromRangeStart(t.selection.getRng());return((o,a)=>{const s=at(Tt,a);return no(E(o.container()),Ze,s).filter(kA)})(r,n).exists(()=>{if(o=n,s=r,e?zs(o.dom,s).breakAt.isNone():js(o.dom,s).breakAt.isNone()){const o=a1(t,n,e?Jt:Og);return t.selection.setRng(o),!0}var o,s;return!1})})(t,e),g1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},p1=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,wt=(t,...e)=>()=>t.apply(null,e),Vs=(t,e)=>{return Xt((r=e,qe(Nt(t,a=>({...g1,...a})),o=>p1(o,r)?[o]:[])),n=>n.action());var r},h1=(t,e)=>{return Qt((r=e,qe(Nt(t,a=>({...g1,...a})),o=>p1(o,r)?[o]:[])),n=>n.action());var r},b1=(t,e)=>{const n=e?le.Forwards:le.Backwards,r=t.selection.getRng();return MC(t,n,r,Rs,As,Ln).exists(o=>(pr(t,o),!0))},v1=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return LC(t,n,r,Rs,As,Ln).exists(o=>(pr(t,o),!0))},y1=(t,e)=>IC(t,e,e?As:Rs),C1=In([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),qs={...C1,none:t=>C1.none(t)},w1=(t,e,n)=>qe(ye(t),r=>vn(r,e)?n(r)?[r]:[]:w1(r,e,n)),x1=(t,e)=>ro(t,"table",e),jm=(t,e,n,r,o=Vt)=>{const a=1===r;if(!a&&n<=0)return qs.first(t[0]);if(a&&n>=t.length-1)return qs.last(t[t.length-1]);{const s=n+r,i=t[s];return o(i)?qs.middle(e,i):jm(t,e,s,r,o)}},k1=(t,e)=>x1(t,e).bind(n=>{const r=w1(n,"th,td",Vt);return Yr(r,o=>Tt(t,o)).map(o=>({index:o,all:r}))}),_1=(t,e,n,r,o)=>{const a=ke(E(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Re(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(bt((i=t,qe(a,d=>{const c={left:(u=ho(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,o)),r,o).map(i=>i.cell)},EA=at(_1,t=>t.bottom,(t,e)=>t.y<e),SA=at(_1,t=>t.top,(t,e)=>t.y>e),E1=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Wn.Wrap&&0===o.positions.length||!Wt(n.getNode())&&(o=>o.breakType===Wn.Br&&1===o.positions.length)(r)?!((o,a,s)=>s.breakAt.exists(i=>o(a,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},NA=at(E1,js),RA=at(E1,zs),AA=(t,e,n,r)=>{const o=t.selection.getRng(),a=e?1:-1;return!(!Sh()||!((s,i,l)=>{const d=M.fromRangeStart(i);return ca(!s,l).exists(c=>c.isEqual(d))})(e,o,n)||(gr(a,t,n,!e,!1).each(s=>{pr(t,s)}),0))},S1=(t,e,n)=>{const r=((a,s)=>{const i=s.getNode(a);return dr(i)?C.some(i):C.none()})(!!e,n),o=!1===e;r.fold(()=>pr(t,n.toRange()),a=>ca(o,t.getBody()).filter(s=>s.isEqual(n)).fold(()=>pr(t,n.toRange()),s=>{return i=e,d=a,void(l=t).undoManager.transact(()=>{const c=i?kr:We,u=a1(l,E(d),c);pr(l,u)});var i,l,d}))},OA=(t,e,n,r)=>{const o=t.selection.getRng(),a=M.fromRangeStart(o),s=t.getBody();if(!e&&NA(r,a)){const i=(l=s,(u=d=n,m=c=a,Y(m.getClientRects()).bind(p=>EA(u,p.left,p.top)).bind(p=>{return Dl(gn(f=p).map(h=>js(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>Y(c.getClientRects()).bind(u=>Om(SC(l,M.before(d)),u.left))).getOr(M.before(d)));return S1(t,e,i),!0}var l,d,c,u,m;if(e&&RA(r,a)){const i=((l,d,c)=>((u,m)=>dt(m.getClientRects()).bind(p=>SA(u,p.left,p.top)).bind(p=>{return Dl(Te(f=p).map(h=>[h].concat(zs(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Y(c.getClientRects()).bind(u=>Om(NC(l,M.after(d)),u.left))).getOr(M.after(d)))(s,n,a);return S1(t,e,i),!0}return!1},N1=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>C.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),R1=(t,e)=>N1(t,e,AA),A1=(t,e)=>N1(t,e,OA),O1=(t,e,n)=>n.fold(C.none,C.none,(r,o)=>{return(a=o,((s,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=E(d.childNodes[c]);if(i(u))return C.some(u);const m=l(d.childNodes[c]);if(m.isSome())return m}return C.none()};return l(s.dom)})(a,Jb)).map(s=>{return(t=>{const e=pa.getWin(t).dom,n=(o,a,s,i)=>Gc(e,o,a,s,i),r=t.match({domRange:a=>{const s=E(a.startContainer),i=E(a.endContainer);return Nb(s,a.startOffset,i,a.endOffset)},relative:SS,exact:Nb});return((o,a)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>Ss.rtl(E(c.endContainer),c.endOffset,E(c.startContainer),c.startOffset)).getOrThunk(()=>Eb(0,Ss.ltr,d)):Eb(0,Ss.ltr,d)})(0,(i=o,a.match({domRange:d=>({ltr:J(d),rtl:C.none}),relative:(d,c)=>({ltr:Zr(()=>_b(i,d,c)),rtl:Zr(()=>C.some(_b(i,c,d)))}),exact:(d,c,u,m)=>({ltr:Zr(()=>Gc(i,d,c,u,m)),rtl:Zr(()=>C.some(Gc(i,u,m,d,c)))})})))})(e,r).match({ltr:n,rtl:n})})(pa.exact(i=s,0,i,0));var i});var a},r=>(t.execCommand("mceTableInsertRowAfter"),T1(t,e,r))),T1=(t,e,n)=>{return O1(t,e,(o=Qo,k1(r=n,void 0).fold(()=>qs.none(r),a=>jm(a.all,r,a.index,1,o))));var r,o},TA=(t,e,n)=>{return O1(t,e,(o=Qo,k1(r=n,void 0).fold(()=>qs.none(),a=>jm(a.all,r,a.index,-1,o))));var r,o},B1=(t,e)=>{const n=["table","li","dl"],r=E(t.getBody()),o=s=>{const i=Ft(s);return Tt(s,r)||Ot(n,i)},a=t.selection.getRng();return(s=E(e?a.endContainer:a.startContainer),i=o,((l,d,c=It)=>c(d)?C.none():Ot(l,Ft(d))?C.some(d):Ka(d,l.join(","),u=>vn(u,"table")||c(u)))(["td","th"],s,i)).map(s=>(x1(s,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?T1:TA)(t,o,s).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var s,i},Sn=(t,e)=>({container:t,offset:e}),Il=Mt.DOM,Fl=t=>e=>t===e?-1:0,zm=(t,e,n)=>{if(V(t)&&e>=0)return C.some(Sn(t,e));{const r=po(Il);return C.from(r.backwards(t,e,Fl(t),n)).map(o=>Sn(o.container,o.container.data.length))}},Hm=(t,e,n)=>{if(!V(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(Sn(t,e));{const o=po(Il);return C.from(o.backwards(t,e,Fl(t),n)).bind(a=>Hm(a.container,e+a.container.data.length,n))}},D1=(t,e,n)=>{if(!V(t))return C.none();const r=t.data;if(e<=r.length)return C.some(Sn(t,e));{const o=po(Il);return C.from(o.forwards(t,e,Fl(t),n)).bind(a=>D1(a.container,e-r.length,n))}},$m=(t,e,n,r,o)=>{const a=po(t,(s=t,i=>s.isBlock(i)||Ot(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===s.getContentEditable(i)));var s;return C.from(a.backwards(e,n,r,o))},P1=t=>cr(t.toString().replace(/\u00A0/g," ")),M1=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Vm=(t,e)=>t.substring(e.length),L1=(t,e,n,r=0)=>{return(o=E(e.startContainer),ro(o,Zb)).fold(()=>((a,s,i,l=0)=>{if(!(d=s).collapsed||!V(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=a.getParent(s.startContainer,a.isBlock)||a.getRoot();return $m(a,s.startContainer,s.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const w=h.charAt(v);if(M1(w))return C.none();if(y===w&&xe(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=s.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(s.endContainer,s.endOffset),p.collapsed)return C.none();const f=P1(p);return 0!==f.lastIndexOf(i)||Vm(f,i).length<l?C.none():C.some({text:Vm(f,i),range:p,trigger:i})})})(t,e,n,r),a=>{const s=t.createRng();s.selectNode(a.dom);const i=P1(s);return C.some({range:s,text:Vm(i,n),trigger:n})});var o},I1=t=>{if(3===t.nodeType)return Sn(t,t.data.length);{const e=t.childNodes;return e.length>0?I1(e[e.length-1]):Sn(t,e.length)}},F1=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?F1(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?I1(n[n.length-1]):Sn(t,e)},U1=(t,e,n,r={})=>{var o;const a=e(),s=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=bt(a.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const m=F1(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return $m(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!M1(v)}).isSome()})(c,m)};var c})(n.range,s,n.text));if(0===i.length)return C.none();const l=Promise.all(Nt(i,d=>d.fetch(n.text,d.maxResults,r).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var Kn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Kn||(Kn={}));const qm=(t,e,n)=>t.stype===Kn.Error?e(t.serror):n(t.svalue),ka=t=>({stype:Kn.Value,svalue:t}),Ws=t=>({stype:Kn.Error,serror:t}),BA=qm,Wm=t=>he(t)&&_t(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ul=(t,e)=>Ws([{path:t,getErrorInfo:e}]),j1=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const a in o)kt(o,a)&&(n[a]=t(n[a],o[a]))}return n},Km=j1((t,e)=>oi(t)&&oi(e)?Km(t,e):e),z1=(j1((t,e)=>e),t=>({tag:"defaultedThunk",process:J(t)})),H1=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Gm=t=>({extract:(e,n)=>{return(r=t(n)).stype===Kn.Error?Ul(e,J(r.serror)):r;var r},toString:J("val")}),MA=Gm(ka),$1=(t,e,n,r)=>r(jt(t,e).getOrThunk(()=>n(t))),LA=(t,e,n,r,o)=>{const a=i=>o.extract(e.concat([r]),i),s=i=>i.fold(()=>ka(C.none()),l=>{return(c=o.extract(e.concat([r]),l)).stype===Kn.Value?{stype:Kn.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=a,jt(l=n,d=r).fold(()=>{return m=d,p=l,Ul(i,()=>'Could not find valid *required* value for "'+m+'" in '+Wm(p));var m,p},c);case"defaultedThunk":return $1(n,r,t.process,a);case"option":return((i,l,d)=>d(jt(i,l)))(n,r,s);case"defaultedOptionThunk":return((i,l,d,c)=>c(jt(i,l).map(u=>!0===u?d(i):u)))(n,r,t.process,s);case"mergeWithThunk":return $1(n,r,J({}),i=>{const l=Km(t.process(n),i);return a(l)})}var i,l,d,c},Ym=t=>({extract:(e,n)=>((r,o,a)=>{const s={},i=[];for(const l of a)H1(l,(d,c,u,m)=>{const p=LA(u,r,o,d,m);BA(p,f=>{i.push(...f)},f=>{s[c]=f})},(d,c)=>{s[d]=c(o)});return i.length>0?Ws(i):ka(s)})(e,n,t),toString:()=>"obj{\n"+Nt(t,n=>H1(n,(r,o,a,s)=>r+" -> "+s.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),V1=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],a=[];return H(r,s=>{qm(s,i=>a.push(i),i=>o.push(i))}),{values:o,errors:a}})(t);return e.errors.length>0?(n=e.errors,nr(Ws,di)(n)):ka(e.values);var n})(Nt(n,(o,a)=>t.extract(e.concat(["["+a+"]"]),o))),toString:()=>"array("+t.toString()+")"}),q1=(t,e)=>((t,e)=>({extract:(n,r)=>jt(r,t).fold(()=>{return a=t,Ul(n,()=>'Choice schema did not contain choice key: "'+a+'"');var a},o=>{return a=n,s=r,jt(i=e,l=o).fold(()=>{return c=i,u=l,Ul(a,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Wm(c));var c,u},d=>d.extract(a.concat(["branch: "+l]),s));var a,s,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+_t(e)}))(t,Dt(e,Ym)),FA=J(MA),jl=(t,e)=>Gm(n=>{const r=typeof n;return t(n)?ka(n):Ws(`Expected type: ${e} but got: ${r}`)}),UA=jl(Xe,"number"),zl=jl(ut,"string"),jA=jl(er,"boolean"),Xm=jl(Rt,"function"),Ks=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),W1=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),K1=(t,e)=>Ks(t,t,{tag:"required",process:{}},e),G1=t=>K1(t,zl),Y1=t=>K1(t,Xm),Qm=(t,e)=>Ks(t,t,{tag:"option",process:{}},e),Hl=t=>Qm(t,zl),_a=(t,e,n)=>Ks(t,t,z1(e),n),X1=(t,e)=>_a(t,e,UA),Q1=(t,e,n)=>{return _a(t,e,(r=n,o=a=>Ot(r,a)?Pe.value(a):Pe.error(`Unsupported value: "${a}", choose one of "${r.join(", ")}".`),Gm(a=>o(a).fold(Ws,ka))));var r,o},Jm=(t,e)=>_a(t,e,jA),Zm=(t,e)=>_a(t,e,Xm),zA=G1("type"),HA=Y1("fetch"),tf=Y1("onAction"),$A=Zm("onSetup",()=>Et),VA=Hl("text"),qA=Hl("icon"),WA=Hl("tooltip"),KA=Hl("label"),GA=Jm("active",!1),YA=Jm("enabled",!0),J1=Jm("primary",!1),Gs=t=>_a("type",t,zl),XA=Ym([zA,G1("trigger"),X1("minChars",1),((t,e)=>Ks(t,t,z1(1),FA()))("columns"),X1("maxResults",10),Qm("matches",Xm),HA,tf,(Z1=zl,_a("highlightOn",[],V1(Z1)))]);var Z1;const ef=[YA,WA,qA,VA,$A],tw=[GA].concat(ef),QA=[Zm("predicate",It),Q1("scope","node",["node","editor"]),Q1("position","selection",["node","selection","line"])],JA=ef.concat([Gs("contextformbutton"),J1,tf,W1("original",ne)]),ZA=tw.concat([Gs("contextformbutton"),J1,tf,W1("original",ne)]),tO=ef.concat([Gs("contextformbutton")]),eO=tw.concat([Gs("contextformtogglebutton")]),nO=q1("type",{contextformbutton:JA,contextformtogglebutton:ZA});Ym([Gs("contextform"),Zm("initValue",J("")),KA,((t,e)=>Ks(t,t,{tag:"required",process:{}},V1(e)))("commands",nO),Qm("launch",q1("type",{contextformbutton:tO,contextformtogglebutton:eO}))].concat(QA));const oO=t=>{const e=Or(),n=ie(!1),r=e.isSet,o=()=>{r()&&(Yt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},a=Zr(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Dt(e,a=>{return(s=a,((t,e,n)=>{return r=(i=e.extract([t],s=n)).stype===Kn.Error?{stype:Kn.Error,serror:(i=>({input:s,errors:i}))(i.serror)}:i,qm(r,Pe.error,Pe.value);var s,i,r})("Autocompleter",XA,{trigger:s.ch,...s})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):d;return Nt(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Wm(l.input));var l},ne);var s}),r=If(vd(n,a=>a.trigger)),o=yd(n);return{dataset:n,triggers:r,lookupByTrigger:a=>bt(o,s=>s.trigger===a)}})(t)),s=i=>{var l;(l=i,e.get().map(d=>L1(t.dom,t.selection.getRng(),d.trigger).bind(c=>U1(t,a,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,Qt(h.triggers,g=>L1(p,f,g))).bind(p=>U1(d,c,p));var p,f,h})(t,a))).fold(o,l=>{var d,u;d=l.context,r()||(u=d.range,Yt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?o():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=he(l)?l.fetchOptions:{};s(d)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const d=cc(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:o,load:s})},ew=t=>(e,n,r={})=>{const o=e.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Et,inputType:n},s=gp(new InputEvent(t));return e.dispatch(t,{...s,...a,...r})},$l=ew("input"),Vl=ew("beforeinput"),Ea=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const a=(s=>{for(;s;){if(nt(s)||V(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(e.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&e.insertBefore(n.doc.createTextNode(se),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const a=new re(e,e);let s,i=e;for(;s=a.current();){if(V(s)){o.setStart(s,0),o.setEnd(s,0);break}if(r[s.nodeName.toLowerCase()]){o.setStartBefore(s),o.setEndBefore(s);break}i=s,s=a.next()}s||(o.setStart(i,0),o.setEnd(i,0))}else Wt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),Ns(t,o)},ql=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);)"true"===t.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},nf=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),nw=(t,e)=>{const n=null==t?void 0:t.parentNode;return X(n)&&n.nodeName===e},rw=t=>X(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Wl=t=>{const e=t.parentNode;return X(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},Kl=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!nt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},aO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),rf=t=>{t.innerHTML='<br data-mce-bogus="1">'},of=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,af=(t,e)=>X(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),sf=(t,e,n)=>V(e)?t?1===n&&e.data.charAt(n-1)===_e?0:n:n===e.data.length-1&&e.data.charAt(n)===_e?e.data.length:n:n,Ys=(t,e)=>{Me(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const a=n.dom;C.from(o.style).map(a.parseStyle).each(c=>{const u={...Rg(E(r)),...c};a.setStyles(r,u)});const s=C.from(o.class).map(c=>c.split(/\s+/)),i=C.from(r.className).map(c=>bt(c.split(/\s+/),u=>""!==u));De(s,i,(c,u)=>{const m=bt(u,f=>!Ot(c,f)),p=[...c,...m];a.setAttrib(r,"class",p.join(" "))});const l=["style","class"],d=Fa(o,(c,u)=>!Ot(l,u));a.setAttribs(r,d)})(t,e,fs(t))},ow={insert:(t,e)=>{let n,r,o,a,s=!1;const i=t.dom,l=t.schema,d=l.getNonEmptyElements(),c=t.selection.getRng(),u=Me(t),m=c.collapsed&&c.startContainer===t.dom.getRoot(),p=E(c.startContainer),f=Yo(p,c.startOffset),h=f.exists(S=>Nd(S)&&!Qo(S)),g=m&&h,b=S=>{let O=n;const R=l.getTextInlineElements();let B;B=S||"TABLE"===o||"HR"===o?i.create(S||u):_.cloneNode(!1);let G=B;if(!1===V_(t))i.setAttrib(B,"style",null),i.setAttrib(B,"class",null);else do{if(R[O.nodeName]){if(pn(O)||nn(O))continue;const $=O.cloneNode(!1);i.setAttrib($,"id",""),B.hasChildNodes()?($.appendChild(B.firstChild),B.appendChild($)):(G=$,B.appendChild($))}}while((O=O.parentNode)&&O!==k);return Ys(t,B),rf(G),B},v=S=>{const O=sf(S,n,r);if(V(n)&&(S?O>0:O<n.data.length))return!1;if(n.parentNode===_&&s&&!S||S&&nt(n)&&n===_.firstChild)return!0;if(of(n,"TABLE")||of(n,"HR"))return s&&!S||!s&&S;const R=new re(n,_);let B;for(V(n)&&(S&&0===O?R.prev():S||O!==n.data.length||R.next());B=R.current();){if(nt(B)){if(!B.getAttribute("data-mce-bogus")){const G=B.nodeName.toLowerCase();if(d[G]&&"br"!==G)return!1}}else if(V(B)&&!lo(B.data))return!1;S?R.prev():R.next()}return!0},y=()=>{let S;return S=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==T?b(u):b(),((O,R)=>{const B=q_(O);return!Gt(R)&&(ut(B)?Ot(W.explode(B),R.nodeName.toLowerCase()):B)})(t,a)&&af(i,a)&&i.isEmpty(_,void 0,{includeZwsp:!0})?S=i.split(a,_):i.insertAfter(S,_),Ea(t,S),S};rl(i,c).each(S=>{c.setStart(S.startContainer,S.startOffset),c.setEnd(S.endContainer,S.endOffset)}),n=c.startContainer,r=c.startOffset;const w=!(!e||!e.shiftKey),x=!(!e||!e.ctrlKey);nt(n)&&n.hasChildNodes()&&!g&&(s=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=s&&V(n)?n.data.length:0);const k=ql(i,n);if(!k||((S,O)=>{const R=S.dom.getParent(O,"ol,ul,dl");return null!==R&&"false"===S.dom.getContentEditableParent(R)})(t,n))return;w||(n=((S,O,R,B,G)=>{var $,ct;const Q=S.dom,vt=null!==($=ql(Q,B))&&void 0!==$?$:Q.getRoot();let Ct=Q.getParent(B,Q.isBlock);if(!Ct||!af(Q,Ct)){if(Ct=Ct||vt,!Ct.hasChildNodes()){const N=Q.create(O);return Ys(S,N),Ct.appendChild(N),R.setStart(N,0),R.setEnd(N,0),N}let tt,it=B;for(;it&&it.parentNode!==Ct;)it=it.parentNode;for(;it&&!Q.isBlock(it);)tt=it,it=it.previousSibling;const gt=null===(ct=null==tt?void 0:tt.parentElement)||void 0===ct?void 0:ct.nodeName;if(tt&&gt&&S.schema.isValidChild(gt,O.toLowerCase())){const N=tt.parentNode,A=Q.create(O);for(Ys(S,A),N.insertBefore(A,tt),it=tt;it&&!Q.isBlock(it);){const I=it.nextSibling;A.appendChild(it),it=I}R.setStart(B,G),R.setEnd(B,G)}}return B})(t,u,c,n,r));let _=i.getParent(n,i.isBlock)||i.getRoot();a=X(null==_?void 0:_.parentNode)?i.getParent(_.parentNode,i.isBlock):null,o=_?_.nodeName.toUpperCase():"";const T=a?a.nodeName.toUpperCase():"";if("LI"!==T||x||(_=a,a=a.parentNode,o=T),nt(a)&&(S=t,R=_,!w&&R.nodeName.toLowerCase()===Me(S)&&S.dom.isEmpty(R)&&((B,G,$)=>{let ct=G;for(;ct&&ct!==B&&Ne(ct.nextSibling);){const vt=ct.parentElement;if(!vt||(Q=vt,!kt(S.schema.getTextBlockElements(),Q.nodeName.toLowerCase())))return Hg(vt);ct=vt}var Q;return!1})(S.getBody(),R)))return((S,O,R)=>{var B,G,$;const ct=O(Me(S)),Q=S.dom.getParent(R,Hg);Q&&(S.dom.insertAfter(ct,Q),Ea(S,ct),(null!==($=null===(G=null===(B=R.parentElement)||void 0===B?void 0:B.childNodes)||void 0===G?void 0:G.length)&&void 0!==$?$:0)>1&&S.dom.remove(R))})(t,b,_);var S,R;if(/^(LI|DT|DD)$/.test(o)&&nt(a)&&i.isEmpty(_))return void((S,O,R,B,G)=>{const $=S.dom,ct=S.selection.getRng(),Q=R.parentNode;if(R===S.getBody()||!Q)return;var vt;rw(vt=R)&&rw(vt.parentNode)&&(G="LI");let Ct=O(G);if(Kl(R,B,!0)&&Kl(R,B,!1))if(nw(R,"LI")){const tt=Wl(R);$.insertAfter(Ct,tt),(null===(gt=(it=R).parentNode)||void 0===gt?void 0:gt.firstChild)===it?$.remove(tt):$.remove(R)}else $.replace(Ct,R);else if(Kl(R,B,!0))nw(R,"LI")?($.insertAfter(Ct,Wl(R)),Ct.appendChild($.doc.createTextNode(" ")),Ct.appendChild(R)):Q.insertBefore(Ct,R),$.remove(B);else if(Kl(R,B,!1))$.insertAfter(Ct,Wl(R)),$.remove(B);else{R=Wl(R);const tt=ct.cloneRange();tt.setStartAfter(B),tt.setEndAfter(R);const it=tt.extractContents();"LI"===G&&((gt,N)=>gt.firstChild&&"LI"===gt.firstChild.nodeName)(it)?(Ct=it.firstChild,$.insertAfter(it,R)):($.insertAfter(it,R),$.insertAfter(Ct,R)),$.remove(B)}var it,gt;Ea(S,Ct)})(t,b,a,_,u);if(!(g||_!==t.getBody()&&af(i,_)))return;const L=_.parentNode;let P;if(g)P=b(u),f.fold(()=>{Jt(p,E(P))},S=>{We(S,E(P))}),t.selection.setCursorLocation(P,0);else if(na(_))P=Kd(_),i.isEmpty(_)&&rf(_),Ys(t,P),Ea(t,P);else if(v(!1))P=y();else if(v(!0)&&L){P=L.insertBefore(b(),_);const S=E(c.startContainer).dom.hasChildNodes()&&c.collapsed;Ea(t,of(_,"HR")||S?P:_)}else{const S=(R=>{const B=R.cloneRange();return B.setStart(R.startContainer,sf(!0,R.startContainer,R.startOffset)),B.setEnd(R.endContainer,sf(!1,R.endContainer,R.endOffset)),B})(c).cloneRange();S.setEndAfter(_);const O=S.extractContents();(R=>{H(Ig(E(R),Qe),B=>{const G=B.dom;G.nodeValue=cr(G.data)})})(O),(R=>{let B=R;do{V(B)&&(B.data=B.data.replace(/^[\r\n]+/,"")),B=B.firstChild}while(B)})(O),P=O.firstChild,i.insertAfter(O,_),((R,B,G)=>{var $;const ct=[];if(!G)return;let Q=G;for(;Q=Q.firstChild;){if(R.isBlock(Q))return;nt(Q)&&!B[Q.nodeName.toLowerCase()]&&ct.push(Q)}let vt=ct.length;for(;vt--;)Q=ct[vt],(!Q.hasChildNodes()||Q.firstChild===Q.lastChild&&""===(null===($=Q.firstChild)||void 0===$?void 0:$.nodeValue)||aO(R,Q))&&R.remove(Q)})(i,d,P),((R,B)=>{B.normalize();const G=B.lastChild;(!G||nt(G)&&/^(left|right)$/gi.test(R.getStyle(G,"float",!0)))&&R.add(B,"br")})(i,_),i.isEmpty(_)&&rf(_),P.normalize(),i.isEmpty(P)?(i.remove(P),y()):(Ys(t,P),Ea(t,P))}i.setAttrib(P,"id",""),t.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},aw=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),Ns(t,r)},sO=(t,e)=>{const n=ge("br");We(E(e),n),t.undoManager.add()},iO=(t,e)=>{lO(t.getBody(),e)||kr(E(e),ge("br"));const n=ge("br");kr(E(e),n),aw(t,n.dom,!1),t.undoManager.add()},lO=(t,e)=>{return n=M.after(e),!!Wt(n.getNode())||Oe(t,M.after(e)).map(r=>Wt(r.getNode())).getOr(!1);var n},sw=t=>t&&"A"===t.nodeName&&"href"in t,dO=t=>t.fold(It,sw,sw,It),cO=(t,e)=>{e.fold(Et,at(sO,t),at(iO,t),Et)},iw={insert:(t,e)=>{const n=(r=>{const o=at(No,r),a=M.fromRangeStart(r.selection.getRng());return qn(o,r.getBody(),a).filter(dO)})(t);n.isSome()?n.each(at(cO,t)):((r,o)=>{const s=r.dom,i=r.selection.getRng();let l,d=!1;rl(s,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(nt(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&V(u)?u.data.length:0}let m=s.getParent(u,s.isBlock);const p=m&&m.parentNode?s.getParent(m.parentNode,s.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(m=p),V(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new re(b,v);let w;const x=g.getNonEmptyElements();for(;w=y.next();)if(x[w.nodeName.toLowerCase()]||V(w)&&w.length>0)return!0;return!1})(r.schema,u,m||s.getRoot())||(l=s.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=s.create("br"),pc(s,i,l),aw(r,l,d),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},lw=(t,e)=>nf(t).filter(n=>e.length>0&&vn(E(n),e)).isSome(),Ke=In([{br:[]},{block:[]},{none:[]}]),uO=(t,e)=>{return lw(n=t,$_(n));var n},dw=t=>(e,n)=>nf(e).filter(o=>Ja(E(o))).isSome()===t,cw=(t,e)=>(n,r)=>nf(n).fold(J(""),s=>s.nodeName.toUpperCase())===t.toUpperCase()===e,mO=t=>{const e=ql(t.dom,t.selection.getStart());return Gt(e)},Xs=t=>cw("pre",t),Gl=t=>(e,n)=>j_(e)===t,fO=(t,e)=>{return lw(n=t,H_(n));var n},Yl=(t,e)=>e,gO=t=>{const e=Me(t),n=ql(t.dom,t.selection.getStart());return X(n)&&t.schema.isValidChild(n.nodeName,e)},pO=t=>{const e=t.selection.getRng(),n=e.collapsed&&e.startContainer===t.dom.getRoot(),r=E(e.startContainer),o=Yo(r,e.startOffset).map(a=>Nd(a)&&!Qo(a));return n&&o.getOr(!0)},dn=(t,e)=>(n,r)=>Re(t,(o,a)=>o&&a(n,r),!0)?C.some(e):C.none(),Xl=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),X(n)&&Vl(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),X(n)&&$l(e,t.fakeEventName))},uw=(t,e)=>{const n=()=>Xl(iw,t,e),r=()=>Xl(ow,t,e),o=(a=t,s=e,vC([dn([uO],Ke.none()),dn([Xs(!0),mO],Ke.none()),dn([cw("summary",!0)],Ke.br()),dn([Xs(!0),Gl(!1),Yl],Ke.br()),dn([Xs(!0),Gl(!1)],Ke.block()),dn([Xs(!0),Gl(!0),Yl],Ke.block()),dn([Xs(!0),Gl(!0)],Ke.br()),dn([dw(!0),Yl],Ke.br()),dn([dw(!0)],Ke.block()),dn([fO],Ke.br()),dn([Yl],Ke.br()),dn([gO],Ke.block()),dn([pO],Ke.block())],[a,!(!s||!s.shiftKey)]).getOr(Ke.none()));var a,s;switch(z_(t)){case"linebreak":o.fold(n,n,Et);break;case"block":o.fold(r,r,Et);break;case"invert":o.fold(r,n,Et);break;default:o.fold(n,r,Et)}},mw=Bn(),hO=mw.os.isiOS()&&mw.browser.isSafari(),fw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{uw(t,e)}))},bO=Bn(),gw=t=>t.stopImmediatePropagation(),pw=t=>t.keyCode===ot.PAGE_UP||t.keyCode===ot.PAGE_DOWN,hw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",gw,!0):!n&&t.get()&&e.off("NodeChange",gw),t.set(n)},bw=(t,e)=>{const n=e.container(),r=e.offset();return V(n)?(n.insertData(r,t),C.some(M(n,r+t.length))):Vi(e).map(o=>{const a=Go(t);return e.isAtEnd()?kr(o,a):We(o,a),M(a.dom,t.length)})},vw=at(bw,se),yw=at(bw," "),Cw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},vO=t=>{const e=M.fromRangeStart(t.selection.getRng()),n=E(t.getBody());if(t.selection.isCollapsed()){const r=at(No,t),o=M.fromRangeStart(t.selection.getRng());return qn(r,t.getBody(),o).bind((a=n,s=>s.fold(i=>Le(a.dom,M.before(i)),i=>Te(i),i=>gn(i),i=>Oe(a.dom,M.after(i))))).map(a=>()=>{return(s=n,i=e,l=>Ev(s,l)?vw(i):yw(i))(a).each(Cw(t));var s,i})}var a;return C.none()},yO=t=>{return qo(St.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=E(t.getBody());var o,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,a=M.fromRangeStart(t.selection.getRng()),Ev(o,a)?vw(a):yw(a)).each(Cw(t))});var e,n},CO=t=>QE(t)?[{keyCode:ot.TAB,action:wt(B1,t,!0)},{keyCode:ot.TAB,shiftKey:!0,action:wt(B1,t,!1)}]:[],wO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),oO(t),Vn(t))return ie(null);{const e=(t=>{const e=ie(null),n=at(No,t);return t.on("NodeChange",r=>{gs(t)&&(((o,a,s)=>{const i=Nt(ke(E(a.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=bt(i,o),d=bt(s,o);H(zo(l,d),at(FC,!1)),H(zo(d,l),at(FC,!0))})(n,t.dom,r.parents),((o,a)=>{const s=a.get();if(o.selection.isCollapsed()&&!o.composing&&s){const i=M.fromRangeStart(o.selection.getRng());M.isTextPosition(i)&&!qd(l=i)&&!Wd(l)&&(Pl(o,((t,e)=>{return M.isTextPosition(e)?(r=e,Ch(n=t)&&r.container()===n?((o,a)=>{const s=xh(o.data.substr(0,a.offset())),i=xh(o.data.substr(a.offset()));return(s.text+i.text).length>0?(kh(o),M(o,a.offset()-s.count)):a})(n,r):_h(n,r)):((n,r)=>r.container()===n.parentNode?((o,a)=>{const s=a.container(),i=((l,d)=>{const c=ii(l,d);return-1===c?C.none():C.some(c)})(ft(s.childNodes),o).map(l=>l<a.offset()?M(s,a.offset()-1):a).getOr(a);return vo(o),i})(n,r):_h(n,r))(t,e);var n,r})(s,i)),a.set(null))}var l})(t,e),((o,a,s,i)=>{if(a.selection.isCollapsed()){const l=bt(i,o);H(l,d=>{const c=M.fromRangeStart(a.selection.getRng());qn(o,a.getBody(),c).bind(u=>UC(a,s,u))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("keyup compositionstart",at(xA,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((a,s,i)=>{const l=St.os.isMacOS()||St.os.isiOS();Vs([{keyCode:ot.RIGHT,action:wt(c1,a,!0)},{keyCode:ot.LEFT,action:wt(c1,a,!1)},{keyCode:ot.UP,action:wt(u1,a,!1)},{keyCode:ot.DOWN,action:wt(u1,a,!0)},...l?[{keyCode:ot.UP,action:wt(Ll,a,!1),metaKey:!0,shiftKey:!0},{keyCode:ot.DOWN,action:wt(Ll,a,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ot.RIGHT,action:wt(R1,a,!0)},{keyCode:ot.LEFT,action:wt(R1,a,!1)},{keyCode:ot.UP,action:wt(A1,a,!1)},{keyCode:ot.DOWN,action:wt(A1,a,!0)},{keyCode:ot.RIGHT,action:wt(b1,a,!0)},{keyCode:ot.LEFT,action:wt(b1,a,!1)},{keyCode:ot.UP,action:wt(v1,a,!1)},{keyCode:ot.DOWN,action:wt(v1,a,!0)},{keyCode:ot.RIGHT,action:wt(jC,a,s,!0)},{keyCode:ot.LEFT,action:wt(jC,a,s,!1)},{keyCode:ot.RIGHT,ctrlKey:!l,altKey:l,action:wt(uA,a,s)},{keyCode:ot.LEFT,ctrlKey:!l,altKey:l,action:wt(mA,a,s)},{keyCode:ot.UP,action:wt(f1,a,!1)},{keyCode:ot.DOWN,action:wt(f1,a,!0)}],i).each(d=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",a=>{o=a.keyCode===ot.BACKSPACE,a.isDefaultPrevented()||((s,i,l)=>{const d=l.keyCode===ot.BACKSPACE?"deleteContentBackward":"deleteContentForward";h1([{keyCode:ot.BACKSPACE,action:wt(e1,s)},{keyCode:ot.BACKSPACE,action:wt(Em,s,!1)},{keyCode:ot.DELETE,action:wt(Em,s,!0)},{keyCode:ot.BACKSPACE,action:wt(xm,s,!1)},{keyCode:ot.DELETE,action:wt(xm,s,!0)},{keyCode:ot.BACKSPACE,action:wt(Pm,s,i,!1)},{keyCode:ot.DELETE,action:wt(Pm,s,i,!0)},{keyCode:ot.BACKSPACE,action:wt(Ou,s,!1)},{keyCode:ot.DELETE,action:wt(Ou,s,!0)},{keyCode:ot.BACKSPACE,action:wt(Sm,s,!1)},{keyCode:ot.DELETE,action:wt(Sm,s,!0)},{keyCode:ot.BACKSPACE,action:wt(Im,s,!1)},{keyCode:ot.DELETE,action:wt(Im,s,!0)},{keyCode:ot.BACKSPACE,action:wt(Cm,s,!1)},{keyCode:ot.DELETE,action:wt(Cm,s,!0)},{keyCode:ot.BACKSPACE,action:wt(ym,s,!1)},{keyCode:ot.DELETE,action:wt(ym,s,!0)},{keyCode:ot.BACKSPACE,action:wt(Mm,s,!1)},{keyCode:ot.DELETE,action:wt(Mm,s,!0)}],l).filter(c=>s.selection.isEditable()).each(c=>{l.preventDefault(),Vl(s,d).isDefaultPrevented()||(c(),$l(s,d))})})(n,r,a)}),n.on("keyup",a=>{a.isDefaultPrevented()||((s,i,l)=>{const d=Bn(),c=d.os,u=d.browser,m=c.isMacOS()?[{keyCode:ot.BACKSPACE,altKey:!0,action:wt($s,s)},{keyCode:ot.DELETE,altKey:!0,action:wt($s,s)}]:[{keyCode:ot.BACKSPACE,ctrlKey:!0,action:wt($s,s)},{keyCode:ot.DELETE,ctrlKey:!0,action:wt($s,s)}];c.isMacOS()&&l&&m.push({keyCode:u.isFirefox()?224:91,action:wt($s,s)}),Vs([{keyCode:ot.BACKSPACE,action:wt(mC,s)},{keyCode:ot.DELETE,action:wt(mC,s)},...m],i)})(n,a,o),o=!1})})(t,e),(n=>{let r=C.none();n.on("keydown",o=>{var a;o.keyCode===ot.ENTER&&(hO&&(a=>{if(!a.collapsed)return!1;const s=a.startContainer;if(V(s)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=s.data.charAt(a.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=C.some((a=n).selection.getBookmark()),a.undoManager.add()):fw(n,o))}),n.on("keyup",o=>{o.keyCode===ot.ENTER&&r.each(()=>{return s=o,(a=n).undoManager.undo(),r.fold(Et,i=>a.selection.moveToBookmark(i)),fw(a,s),void(r=C.none());var a,s})})})(t),(n=>{n.on("keydown",r=>{var o,a;r.isDefaultPrevented()||(a=r,h1([{keyCode:ot.SPACEBAR,action:wt(vO,o=n)},{keyCode:ot.SPACEBAR,action:wt(yO,o)}],a).each(s=>{a.preventDefault(),Vl(o,"insertText",{data:" "}).isDefaultPrevented()||(s(),$l(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const a=E(o.getBody());o.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!V(n))return C.none();if((r=>{const o=r.container();return V(o)&&xe(o.data,se)})(e)){const r=Rv(t,n,!1)||(o=>{const a=o.data,s=(i=>{const l=i.split("");return Nt(l,(d,c)=>Gi(d)&&c>0&&c<l.length-1&&Dc(l[c-1])&&Dc(l[c+1])?" ":d).join("")})(a);return s!==a&&(o.data=s,!0)})(n)||Av(t,n,!1);return qo(r,e)}if(vu(t,e)){const r=Rv(t,n,!0)||Av(t,n,!0);return qo(r,e)}return C.none()})(a,M.fromRangeStart(o.selection.getRng())).each(s=>{o.selection.setRng(s.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var a;r.isDefaultPrevented()||(a=r,Vs([...CO(n)],a).each(s=>{a.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((a,s,i)=>{const l=St.os.isMacOS()||St.os.isiOS();Vs([{keyCode:ot.END,action:wt(m1,a,!0)},{keyCode:ot.HOME,action:wt(m1,a,!1)},...l?[]:[{keyCode:ot.HOME,action:wt(Ll,a,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ot.END,action:wt(Ll,a,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ot.END,action:wt(y1,a,!0)},{keyCode:ot.HOME,action:wt(y1,a,!1)},{keyCode:ot.END,action:wt(Ml,a,!0,s)},{keyCode:ot.HOME,action:wt(Ml,a,!1,s)}],i).each(d=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(bO.os.isMacOS())return;const o=ie(!1);n.on("keydown",a=>{pw(a)&&hw(o,n,!0)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(l=a,Vs([{keyCode:ot.PAGE_UP,action:wt(Ml,s=n,!1,i=r)},{keyCode:ot.PAGE_DOWN,action:wt(Ml,s,!0,i)}],l)),pw(a)&&o.get()&&(hw(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class xO{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const a=e.selection.getRng(),s={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!==o.type&&Qc(s,n)||e.dispatch("SelectionChange"),n=s}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&Xi(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&Xi(e)&&("IMG"===e.selection.getNode().nodeName?on.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!CE(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const a=[];this.editor.dom.getParent(r,s=>s===o||(a.push(s),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:a})}}isSameElementPath(e){let n;const r=this.editor,o=Xr(r.dom.getParents(e,Vt,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const ww=ls("image"),lf=ls("event"),Ql=t=>e=>{e[lf]=t},xw=Ql(0),kO=Ql(2),_O=Ql(1),df=ls("mode"),Jl=t=>e=>{e[df]=t},kw=(t,e)=>Jl(e)(t),_w=Jl(0),cf=Jl(2),SO=Jl(1),Ew=t=>e=>C.from(e[df]).exists(r=>r===t),Sa=Ew(0),Sw=Ew(1),NO=["none","copy","link","move"],RO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],uf=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Ot(NO,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>C.from(t[lf]).exists(n=>0===n))(r)&&Ot(RO,o)&&(n=o)},get items(){return o=r,a=t.items,{...a,get length(){return a.length},add:(s,i)=>{if(Sa(o)){if(!ut(s))return a.add(s);if(!ae(i))return a.add(s,i)}return null},remove:s=>{Sa(o)&&a.remove(s)},clear:()=>{Sa(o)&&a.clear()}};var o,a},get files(){return Sw(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,a,s)=>{Sa(r)&&(r[ww]={image:o,x:a,y:s},t.setDragImage(o,a,s))},getData:o=>Sw(r)?"":t.getData(o),setData:(o,a)=>{Sa(r)&&t.setData(o,a)},clearData:o=>{Sa(r)&&t.clearData(o)}};return _w(r),r},Nw=(t,e)=>t.setData("text/html",e),Rw="x-tinymce/html",Zl=J(Rw),mf="\x3c!-- "+Rw+" --\x3e",AO=t=>mf+t,Aw=t=>-1!==t.indexOf(mf),Ow="%MCEPASTEBIN%",ff=t=>t.dom.get("mcepastebin"),OO=t=>X(t)&&"mcepastebin"===t.id,Tw=t=>t===Ow,Bw=(t,e)=>(W.each(e,n=>{t=vr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Dw=t=>Bw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?se:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Pw=(t,e)=>({content:t,cancelled:e}),gf=(t,e)=>(t.insertContent(e,{merge:UE(t),paste:!0}),!0),pf=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),TO=(t,e,n)=>{return!(t.selection.isCollapsed()||!pf(e)||(r=t,o=e,a=n,r.undoManager.extra(()=>{a(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,a},BO=(t,e,n)=>{return r=t,!(!pf(o=e)||!qt(yh(r),a=>kd(o.toLowerCase(),`.${a.toLowerCase()}`)))&&((r,o,a)=>(r.undoManager.extra(()=>{a(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},DO=(t=>{let e=0;return()=>"mceclip"+e++})(),PO=t=>{const e=uf();return Nw(e,t),cf(e),e},Mw=(t,e,n,r,o)=>{const a=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=va({sanitize:_c(f)},f.schema);g.addNodeFilter("meta",v=>{W.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return Mr({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return Pw(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):Pw(p,m.isDefaultPrevented())})(t,e,n);if(!a.cancelled){const s=a.content,i=()=>{return l=t,d=s,void(r||!jE(l)?gf(l,d):(u=l,m=d,W.each([TO,BO,gf],p=>!p(u,m,gf))));var l,d,u,m};o?Vl(t,"insertFromPaste",{dataTransfer:PO(s)}).isDefaultPrevented()||(i(),$l(t,"insertFromPaste")):i()}},td=(t,e,n,r)=>{const o=n||Aw(e);Mw(t,e.replace(mf,""),o,!1,r)},hf=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((a,s,i)=>{const l=a.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=vd(p,(g,b)=>b+'="'+Rr.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(s,i),c="</"+s+">",u=Nt(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:Nt(u,m=>d+m+c).join("")})(Qg(r,HE(t)),Me(t),fs(t));Mw(t,o,!1,!0,n)},Lw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},zr=(t,e)=>e in t&&t[e].length>0,Iw=t=>zr(t,"text/html")||zr(t,"text/plain"),Fw=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Hi(t)&&r){const a=((s,i)=>{const l=i.items?qe(ft(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?ft(i.files):[];return bt(l.length>0?l:d,(c=>{const u=yh(c);return m=>be(m.type,"image/")&&qt(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return W.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(s))})(t,r);if(a.length>0)return e.preventDefault(),(o=a,Promise.all(Nt(o,s=>G0(s).then(i=>({file:s,uri:i}))))).then(s=>{n&&t.selection.setRng(n),H(s,i=>{var l,d;l=t,Qu((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,g=h.getByData(p,u),b=null!=g?g:((v,y,w,x)=>{const k=DO(),_=lh(v)&&X(w.name),T=_?((S,O)=>{const R=O.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return X(R)?S.dom.encode(R[1]):void 0})(v,w.name):k,P=y.create(k,w,x,T,_?w.name:void 0);return y.add(P),P})(l,h,f,p);td(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},bf=(t,e,n,r,o)=>{let a=Dw(n);const s=zr(e,Zl())||Aw(n),i=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),l=pf(a);(Tw(a)||!a.length||i&&!l)&&(r=!0),(r||l)&&(a=zr(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=Ar(),u=va({},c);let m="";const p=c.getVoidElements(),f=W.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let w=b.firstChild;if(w)do{g(w)}while(w=w.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=Bw(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(a)),Tw(a)||(r?hf(t,a,o):td(t,a,s,o))},Uw=(t,e,n,r)=>{((o,a,s)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",a),o.setData("text/plain",s),o.setData(Zl(),a),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},jw=t=>(e,n)=>{const{dom:r,selection:o}=t,a=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=r.create("div",{contenteditable:"true"},e);r.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),r.add(t.getBody(),a);const i=o.getRng();s.focus();const l=r.createRng();l.selectNodeContents(s),o.setRng(l),on.setEditorTimeout(t,()=>{o.setRng(i),r.remove(a),n()},0)},zw=t=>({html:AO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Hw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},$w=(t,e)=>{var n,r;return _o.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},Vw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},LO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,qw=t=>W.trim(t).replace(LO,Yi).toLowerCase(),IO=(t,e,n)=>{const r=IE(t);if(n||"all"===r||!FE(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const a=t.dom,s=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=a.parseStyle(a.decode(d)),m={};for(let f=0;f<o.length;f++){const h=u[o[f]];let g=h,b=a.getStyle(s,o[f],!0);/color/.test(o[f])&&(g=qw(g),b=qw(b)),b!==g&&(m[o[f]]=h)}const p=a.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(a,s,i,l)=>s+' style="'+i+'"'+l)},Ww=t=>Sr(E(t)),Kw=(t,e)=>{const n=e.getNode();ae(n)||t.selection.setCursorLocation(n,e.offset())},Gw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Yw=Bn(),Xw=Yw.os,jO=Yw.browser.isSafari(),Qw=Xw.isMacOS()||Xw.isiOS(),vf=(t,e)=>X(t.getParent(e.container(),"details")),Jw=(t,e)=>{const n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const r=t.dom.select("summary",n)[0];r&&gn(r).each(o=>Kw(t,o))}else Kw(t,e)},$O=Wt,Zw=V,VO=t=>Ut(t.dom),tx=t=>e=>Tt(E(t),e),ex=(t,e)=>no(E(t),VO,tx(e)),nx=(t,e,n)=>{const r=new re(t,e),o=n?r.next.bind(r):r.prev.bind(r);let a=t;for(let s=n?t:o();s&&!$O(s);s=o())fn(s)&&(a=s);return a};var Na;!function(t){t.Before="before",t.After="after"}(Na||(Na={}));const WO=(t,e)=>Math.abs(t.left-e),KO=(t,e)=>Math.abs(t.right-e),YO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),yf=(t,e,n)=>{const r=d=>fn(d.node)?C.some(d):nt(d.node)?yf(ft(d.node.childNodes),e,n):C.none(),o=(d,c)=>{const u=F(d,(m,p)=>c(m,e,n)-c(p,e,n));return((m,p)=>{if(m.length>=2){const f=r(m[0]).getOr(m[0]),h=r(m[1]).getOr(m[1]);if(Math.abs(p(f,e,n)-p(h,e,n))<2){if(V(f.node))return C.some(f);if(V(h.node))return C.some(h)}}return C.none()})(u,c).orThunk(()=>Qt(u,r))},[a,s]=((t,e)=>{return(n=bt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),Re(n,(r,o)=>r.fold(()=>C.some(o),a=>{const s=Math.min(o.left,a.left),i=Math.min(o.top,a.top),l=Math.max(o.right,a.right),d=Math.max(o.bottom,a.bottom);return C.some({top:i,right:l,bottom:d,left:s,width:l-s,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=cn(t,a=>((s,i)=>{const l=(d=s,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(s.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(s,i)&&l>.5})(a,n));return[r,o]});var n})(TC(t),n),{pass:i,fail:l}=cn(s,d=>d.top<n);return o(a,YO).orThunk(()=>o(l,Tp)).orThunk(()=>o(i,Tp))},rx=(t,e,n)=>((r,o,a)=>{const s=E(r),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map($a))(sr(s),o,a).filter(d=>ar(s,d)).getOr(s);return((d,c,u,m)=>{const p=(f,h)=>{const g=bt(f.dom.childNodes,Kr(b=>nt(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>yf(g,u,m),b=>{const v=bt(g,y=>y!==b.dom);return yf(v,u,m)}).orThunk(()=>(Tt(f,d)?C.none():Td(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(s,l,o,a)})(t,e,n).filter(r=>hs(r.node)).map(r=>{return{node:(o=r).node,position:WO(o,a=e)<KO(o,a)?Na.Before:Na.After};var o,a}),ox=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,a=o.documentElement,s=o.defaultView;return{top:r.top+(null!==(e=null==s?void 0:s.scrollY)&&void 0!==e?e:0)-a.clientTop,left:r.left+(null!==(n=null==s?void 0:s.scrollX)&&void 0!==n?n:0)-a.clientLeft}},ax=t=>({target:t,srcElement:t}),sx=Ut,QO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(sx,Cn),JO=(t,e,n,r)=>{const o=t.dom,a=e.cloneNode(!0);o.setStyles(a,{width:n,height:r}),o.setAttrib(a,"data-mce-selected",null);const s=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),s.appendChild(a),s},ed=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},ix=ed("left",-32),lx=ed("left",32),dx=ed("top",-32),cx=ed("top",32),ux=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Qs=(t,e,n,r,o)=>{"dragstart"===e&&Nw(r,t.dom.getOuterHTML(n));const a=((t,e,n,r)=>{const o=((a,s)=>{const i=(l=>{const d=uf(),c=C.from(l[df]);return cf(l),xw(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[ww])).each(u=>d.setDragImage(u.image,u.x,u.y)),H(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),H(l.files,u=>d.items.add(u)),(u=>C.from(u[lf]))(l).each(u=>{var m;m=d,Ql(u)(m)}),c.each(u=>{kw(l,u),kw(d,u)}),d;var u})(a);return"dragstart"===s?(xw(i),_w(i)):"drop"===s?(kO(i),cf(i)):(_O(i),SO(i)),i})(n,t);return ae(r)?((a,s,i)=>{const l=Ma("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:a,composedPath:l,initEvent:l,preventDefault:Et,stopImmediatePropagation:Et,stopPropagation:Et,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...ax(s)}})(t,e,o):(a=t,s=r,i=e,l=o,{...s,dataTransfer:l,type:a,...ax(i)});var a,s,i,l})(e,n,r,o);return t.dispatch(e,a)},mx=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Qs(e,"dragend",r.element,r.dataTransfer),o=>Qs(e,"dragend",r.element,r.dataTransfer,o))}),fx(t)},fx=t=>{t.on(e=>{e.intervalId.clear(),ux(e.ghost)}),t.clear()},Js=Ut,gx=(t,e)=>Ro(t.getBody(),e),eT=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=Or();let a,s;const i=Me(t),l=t.dom,d=()=>{(c=>{var u,m;const p=ke(E(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(Ri(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,Ni(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),s&&(vo(s),s=null),o.on(c=>{l.remove(c.caret),o.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(c,u)=>{let m;if(d(),oS(u))return null;if(!n(u))return s=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(_e),b=p.parentNode;if(f){const v=p.previousSibling;if(ea(v)){if(tn(v))return v;if(Ri(v))return v.splitText(v.data.length-1)}null==b||b.insertBefore(g,p)}else{const v=p.nextSibling;if(ea(v)){if(tn(v))return v;if(Ni(v))return v.splitText(1),v}p.nextSibling?null==b||b.insertBefore(g,p.nextSibling):null==b||b.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),ps(s.nextSibling)?(m.setStart(s,0),m.setEnd(s,0)):(m.setStart(s,1),m.setEnd(s,1)),m;{const p=((g,b,v)=>{var y;const w=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);w.setAttribute("data-mce-caret",v?"before":"after"),w.setAttribute("data-mce-bogus","all"),w.appendChild(Ei().dom);const x=b.parentNode;return v?null==x||x.insertBefore(w,b):b.nextSibling?null==x||x.insertBefore(w,b.nextSibling):null==x||x.appendChild(w),w})(i,u,c),f=Eh(e,u,c);l.setStyle(p,"top",f.top),s=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),o.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),a=setInterval(()=>{o.on(g=>{r()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(c=>{const u=Eh(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(a)}})(t,r,n.isBlock,()=>Eo(t)),a="sel-"+n.uniqueId(),s="data-mce-selected";let i;const l=g=>g!==r&&(Js(g)||Ln(g))&&n.isChildOf(g,r)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),o.show(v,b)),c=g=>tn(g)||Ni(g)||Ri(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const x=b?1:-1,k=Cs(x,r,g),_=k.getNode(!b);if(X(_)){if(hs(_))return d(x,_,!!b&&!k.isAtEnd(),!1);if(Nr(_)&&Ut(_.nextSibling)){const L=n.createRng();return L.setStart(_,0),L.setEnd(_,0),L}}const T=k.getNode(b);if(X(T)){if(hs(T))return d(x,T,!b&&!k.isAtEnd(),!1);if(Nr(T)&&Ut(T.previousSibling)){const L=n.createRng();return L.setStart(T,1),L.setEnd(T,1),L}}}return null}let v=g.startContainer,y=g.startOffset;const w=g.endOffset;if(V(v)&&0===y&&Js(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!nt(v))return null;if(w===y+1&&v===g.endContainer){const x=v.childNodes[y];if(l(x))return(k=>{const _=k.cloneNode(!0),T=t.dispatch("ObjectSelected",{target:k,targetClone:_});if(T.isDefaultPrevented())return null;const L=((S,O)=>{const R=E(t.getBody()),B=t.getDoc(),G=Ga(R,"#"+a).getOrThunk(()=>{const Q=Va('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',B);return fe(Q,"id",a),Jt(R,Q),Q}),$=n.createRng();Jo(G),oo(G,[Go(se,B),E(O),Go(se,B)]),$.setStart(G.dom.firstChild,1),$.setEnd(G.dom.lastChild,0),pi(G,{top:n.getPos(S,t.getBody()).y+"px"}),zb(G);const ct=e.getSel();return ct&&(ct.removeAllRanges(),ct.addRange($)),$})(k,T.targetClone),P=E(k);return H(ke(E(t.getBody()),`*[${s}]`),S=>{Tt(P,S)||ve(S,s)}),n.getAttrib(k,s)||k.setAttribute(s,"1"),i=k,h(),L})(x)}return null},f=()=>{i&&i.removeAttribute(s),Ga(E(t.getBody()),"#"+a).each(zt),i=null},h=()=>{o.hide()};return Vn(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",g=>{const b=g.target,v=gx(t,b);Js(v)?(g.preventDefault(),Us(t,v).each(p)):l(b)&&Us(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==r&&"HTML"!==b.nodeName&&!n.isChildOf(b,r)||!((y,w,x)=>{const k=E(y.getBody()),_=y.inline?k:E(sr(k).dom.documentElement),T=((L,P,S,O)=>{const R=P.dom.getBoundingClientRect();return{x:S-(L?R.left+P.dom.clientLeft+RR(P):0),y:O-(L?R.top+P.dom.clientTop+NR(P):0)}})(y.inline,_,w,x);return((L,P,S)=>{const O=ER(L),R=SR(L);return P>=0&&S>=0&&P<=O&&S<=R})(_,T.x,T.y)})(t,g.clientX,g.clientY))return;f(),h();const v=gx(t,b);Js(v)?(g.preventDefault(),Us(t,v).each(p)):rx(r,g.clientX,g.clientY).each(y=>{var w;g.preventDefault(),(w=d(1,y.node,y.position===Na.Before,!1))&&e.setRng(w),nt(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{ot.modifierPressed(g)||Js(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,w=g.startOffset,x=g.endContainer,k=g.endOffset;return kt(b,y.nodeName.toLowerCase())?0===w?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,w),kt(b,x.nodeName.toLowerCase())?0===k?v.setEndBefore(x):v.setEndAfter(x):v.setEnd(x,k),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,w;u(b)||nt(y=v)&&"mcepastebin"===y.id||h(),X(w=v)&&n.hasClass(w,"mce-offscreen-selection")||f()}),(t=>{const e=Or(),n=Mt.DOM,r=document,o=(l=e,d=t,c=>{if(0===c.button){const u=Xt(d.dom.getParents(c.target),QO).getOr(null);if(X(u)&&(m=d.dom,p=d.getBody(),sx(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:uf(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:JO(d,u,u.offsetWidth,u.offsetHeight),intervalId:S_(100)})}}var m,p,f}),a=((t,e)=>{const n=Li((o,a)=>{return i=o,l=a,(s=e)._selectionOverrides.hideFakeCaret(),void rx(s.getBody(),i,l).fold(()=>s.selection.placeCaretAt(i,l),d=>{const c=s._selectionOverrides.showCaret(1,d.node,d.position===Na.Before,!1);c?s.selection.setRng(c):s.selection.placeCaretAt(i,l)});var s,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(a=>{const s=Math.max(Math.abs(o.screenX-a.screenX),Math.abs(o.screenY-a.screenY));if(!a.dragging&&s>10){const d=Qs(e,"dragstart",a.element,a.dataTransfer,o);if(X(d.dataTransfer)&&(a.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;a.dragging=!0,e.focus()}if(a.dragging){const d=o.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(a,(m=o,p=(g=u=e).inline?ox(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=ox(g.getContentAreaContainer()),y=(w=>{const x=w.getBody(),k=w.getDoc().documentElement;return w.inline?{left:x.scrollLeft,top:x.scrollTop}:{left:x.scrollLeft||k.scrollLeft,top:x.scrollTop||k.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=a.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,w,x,k)=>{let _=0,T=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(_=m.pageX+p-h),m.pageY+f>g&&(T=m.pageY+f-g),u.style.width=p-_+"px",u.style.height=f-T+"px";const L=y.clientHeight,P=y.clientWidth,S=b+y.getBoundingClientRect().top,O=v+y.getBoundingClientRect().left;x.on(R=>{R.intervalId.clear(),R.dragging&&k&&(b+8>=L?R.intervalId.set(cx(w)):b-8<=0?R.intervalId.set(dx(w)):v+8>=P?R.intervalId.set(lx(w)):v-8<=0?R.intervalId.set(ix(w)):S+16>=window.innerHeight?R.intervalId.set(cx(window)):S-16<=0?R.intervalId.set(dx(window)):O+16>=window.innerWidth?R.intervalId.set(lx(window)):O-16<=0&&R.intervalId.set(ix(window)))})})(a.ghost,c,a.width,a.height,a.maxX,a.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,d),n.throttle(o.clientX,o.clientY)}var u,m,g,p,f,h,i,l})})(e,t),s=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(X(f)){const h=f.getRangeAt(0).startContainer;return V(h)?h.parentNode:h}return null})(d.selection),h=u.element,!Gt(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();Qs(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);ux(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&Sr(E(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}Qs(d,"dragend",d.getBody(),u.dataTransfer,c)}}),fx(l)})(e,t),i=((l,d)=>c=>mx(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",o),t.on("mousemove",a),t.on("mouseup",s),n.bind(r,"mousemove",a),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",a),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===ot.ESC&&mx(e,t,C.none())})})(g=t),kE(g)&&(b=>{const v=x=>{if(!x.isDefaultPrevented()){const k=x.dataTransfer;k&&(Ot(k.types,"Files")||k.files.length>0)&&(x.preventDefault(),"drop"===x.type&&Nl(b,"Dropped file type is not supported"))}},y=x=>{sl(b,x.target)&&v(x)},w=()=>{const x=Mt.DOM,k=b.dom,_=document,T=b.inline?b.getBody():b.getDoc(),L=["drop","dragover"];H(L,P=>{x.bind(_,P,y),k.bind(T,P,v)}),b.on("remove",()=>{H(L,P=>{x.unbind(_,P,y),k.unbind(T,P,v)})})};b.on("init",()=>{on.setEditorTimeout(b,w,0)})})(g),(g=>{const b=Li(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=wm(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(Ln(v)){const y=Ro(g.getBody(),v),w=Ut(y)?y:v;g.selection.getNode()!==w&&Us(g,w).each(x=>g.selection.setRng(x))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Kd(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{o.destroy(),i=null}};var g},nT=(t,e)=>{let n=e;for(let r=t.previousSibling;V(r);r=r.previousSibling)n+=r.data.length;return n},px=(t,e,n,r,o)=>{if(V(n)&&(r<0||r>n.data.length))return[];const a=o&&V(n)?[nT(n,r)]:[r];let s=n;for(;s!==e&&s.parentNode;)a.push(t.nodeIndex(s,o)),s=s.parentNode;return s===e?a.reverse():[]},Cf=(t,e,n,r,o,a,s=!1)=>({start:px(t,e,n,r,s),end:px(t,e,o,a,s)}),hx=(t,e)=>{const n=e.slice(),r=n.pop();return Xe(r)?Re(n,(o,a)=>o.bind(s=>C.from(s.childNodes[a])),C.some(t)).bind(o=>V(o)&&(r<0||r>o.data.length)?C.none():C.some({node:o,offset:r})):C.none()},bx=(t,e)=>hx(t,e.start).bind(({node:n,offset:r})=>hx(t,e.end).map(({node:o,offset:a})=>{const s=document.createRange();return s.setStart(n,r),s.setEnd(o,a),s})),Ra=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e),Ra(t,r,n)}},nd=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,a=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(V(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),V(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Ra(t,o,n),o!==a&&Ra(t,a,n))},wf=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),vx=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:th(r).concat(t.blockPatterns),inlinePatterns:eh(r).concat(t.inlinePatterns)}},yx=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},Cx=(t,e,n)=>{((r,o,a)=>{if(V(r)&&0>=r.length)return C.some(Sn(r,0));{const s=po(Il);return C.from(s.forwards(r,0,Fl(r),a)).map(i=>Sn(i.container,0))}})(e,0,e).each(r=>{const o=r.container;D1(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),nd(t,l,d=>d===e)});const a=E(o),s=xi(a);var i,l;/^\s[^\s]/.test(s)&&(i=a,l=s.slice(1),$d.set(i,l))})},wx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),rd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},xx=(t,e,n)=>{const r=bx(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,a=r.endContainer,s=0===r.endOffset?a:a.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:s.parentNode.insertBefore(wx(t,e+"-end"),s),start:l.insertBefore(wx(t,e+"-start"),i)}},kx=(t,e,n)=>{Ra(t,t.get(e.prefix+"-end"),n),Ra(t,t.get(e.prefix+"-start"),n)},xf=t=>0===t.start.length,_x=(t,e,n,r)=>{const o=e.start;var a;return $m(t,r.container,r.offset,(a=o,(s,i)=>{const l=s.data.substring(0,i),d=l.lastIndexOf(a.charAt(a.length-1)),c=l.lastIndexOf(a);return-1!==c?c+a.length:-1!==d?d+1:-1}),n).bind(s=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==d&&s.offset>=d+o.length){const c=t.createRng();return c.setStart(s.container,s.offset-o.length),c.setEnd(s.container,s.offset),C.some(c)}return Hm(s.container,s.offset-o.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(s.container,s.offset),m}).filter(u=>u.toString()===o).orThunk(()=>_x(t,e,n,Sn(s.container,0)))})},rT=(t,e,n,r)=>{const o=t.dom,a=o.getRoot(),s=n.pattern,i=n.position.container,l=n.position.offset;return Hm(i,l-n.pattern.end.length,e).bind(d=>{const c=Cf(o,a,d.container,d.offset,i,l,r);if(xf(s))return C.some({matches:[{pattern:s,startRng:c,endRng:c}],position:d});{const u=od(t,n.remainingPatterns,d.container,d.offset,e,r),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,w=!1)=>{if(0===g.start.length&&!w){const x=h.createRng();return x.setStart(b,v),x.setEnd(b,v),C.some(x)}return zm(b,v,y).bind(x=>_x(h,g,y,x).bind(k=>{var _;return w&&(k.endContainer===x.container&&k.endOffset===x.offset||0===x.offset&&(null===(_=k.endContainer.textContent)||void 0===_?void 0:_.length)===k.endOffset)?C.none():C.some(k)}))})(o,s,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,w=!1)=>Cf(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,w))(o,a,h,r);return{matches:m.matches.concat([{pattern:s,startRng:g,endRng:c}]),position:Sn(h.startContainer,h.startOffset)}})}})},od=(t,e,n,r,o,a)=>{const s=t.dom;return zm(n,r,s.getRoot()).bind(i=>{const l=yx(s,o,n,r);for(let d=0;d<e.length;d++){const c=e[d];if(!kd(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=rT(t,o,{pattern:c,remainingPatterns:u,position:i},a);if(m.isNone()&&r>0)return od(t,e,n,r-1,o,a);if(m.isSome())return m}return C.none()})},Ex=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?H(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},Sx=(t,e,n,r,o,a)=>{var s;return((i,l)=>{const d=On(i,c=>qt(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(od(t,o.inlinePatterns,n,r,e,a).fold(()=>[],i=>i.matches),od(t,(s=o.inlinePatterns,F(s,(i,l)=>l.end.length-i.end.length)),n,r,e,a).fold(()=>[],i=>i.matches))},Nx=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((a,s)=>{const i=ls("mce_textpattern"),l=Gr(s,(d,c)=>{const u=xx(a,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return Gr(l,(d,c)=>{const u=l.length-d.length-1,m=xf(c.pattern)?c.endMarker:xx(a,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);H(o,a=>{const s=n.getParent(a.startMarker.start,n.isBlock),i=l=>l===s;xf(a.pattern)?((l,d,c,u)=>{const m=rd(l.dom,c);nd(l.dom,m,u),Ex(l,d,m)})(t,a.pattern,a.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=rd(p,u),h=rd(p,c);nd(p,h,m),nd(p,f,m);const b=rd(p,{prefix:c.prefix,start:c.end,end:u.start});Ex(l,d,b)})(t,a.pattern,a.startMarker,a.endMarker,i),kx(n,a.endMarker,i),kx(n,a.startMarker,i)}),t.selection.moveToBookmark(r)},Rx=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},kf=Mt.DOM,sT=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,_f=t=>Fa(t,e=>!1===ae(e)),Ax=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return _f({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:sT(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},Ox=t=>{const e=t.options.get;return _f({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Tx=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Bx=t=>{const e=Tx(t),n=mh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},a=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";W.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const s=Promise.all(((l,d,c)=>{const u=[Tx(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,r,n)).then(a).catch(a),i=nE(t);return i&&((l,d)=>{const c=E(l.getBody()),u=Ld(xr(c)),m=ge("style");fe(m,"type","text/css"),Jt(m,Go(d)),Jt(u,m),l.on("remove",()=>{zt(m)})})(t,i),s},Ef=t=>{var e;!0!==t.removed&&(Vn(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Xi(r)&&r.selection.getStart(!0)!==o||Te(o).each(a=>{const s=a.getNode(),i=dr(s)?Te(s).getOr(a):a;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=RE(e);Rt(n)&&n.call(e,e),(r=>{const o=OE(r);o&&on.setEditorTimeout(r,()=>{let a;a=!0===o?r:r.editorManager.get(o),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)})(e)})(t))},Dx=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(kf.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var s;r.disabled=!0,t.readonly=ph(t),t._editableRoot=wE(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===kf.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=y.id||"blobid"+OR+++(()=>{const T=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+T()+T()+T()})(),x=y.name||w,k=y.blob;var _;return{id:J(w),name:J(x),filename:J(y.filename||x+"."+(_=k.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[_.toLowerCase()]||"dat")),blob:J(k),base64:J(y.base64),blobUri:J(y.blobUri||URL.createObjectURL(k)),uri:J(y.uri)}},b=y=>Xt(h,y).getOrUndefined(),v=y=>b(w=>w.id()===y);return{create:(y,w,x,k,_)=>{if(ut(y))return g({id:y,name:k,filename:_,blob:w,base64:x});if(he(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(w=>w.blobUri()===y),getByData:(y,w)=>b(x=>x.base64()===y&&x.blob().type===w),findFirst:b,removeByUri:y=>{h=bt(h,w=>w.blobUri()!==y||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{H(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,r;const o=qy(),a=[],s=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===St.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{H(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=Nt(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=Ky(t,o)),p().then(s(h=>{const g=Nt(h,b=>b.blobInfo);return n.upload(g,Wy(t)).then(s(b=>{const v=[];let y=!1;const w=Nt(b,(x,k)=>{const{blobInfo:_,image:T}=h[k];let L=!1;return x.status&&W_(t)?(x.url&&!xe(T.src,x.url)&&(y=!0),e.removeByUri(T.src),Vn(t)||((P,S)=>{const O=t.convertURL(S,"src");var R;d(P.src,S),wr(E(P),{src:lh(t)?(R=S,R+(-1===R.indexOf("?")?"?":"&")+(new Date).getTime()):S,"data-mce-src":O})})(T,x.url)):x.error&&(x.error.remove&&(d(T.src,St.transparentSrc),v.push(T),L=!0),Nl(t,wn.translate(["Failed to upload image: {0}",x.error.message]))),{element:T,status:x.status,uploadUri:x.url,blobInfo:_,removed:L}});return v.length>0&&!Vn(t)?t.undoManager.transact(()=>{H(Id(v),x=>{const k=mn(x);var _;zt(x),k.each((_=t,T=>{var L,P;(L=_).dom.isEmpty((P=T).dom)&&X(L.schema.getTextBlockElements()[Ft(P)])&&Jt(T,Va('<br data-mce-bogus="1" />'))})),e.removeByUri(x.dom.src)})}):y&&t.undoManager.dispatchChange(),w}))}))),u=()=>ih(t)?c():Promise.resolve([]),m=h=>On(a,g=>g(h)),p=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Vt)=>{const a=bt((i=r)?ft(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===St.transparentSrc)&&(be(l,"blob:")?!t.isUploaded(l)&&o(i):!!be(l,"data:")&&o(i))}),s=Nt(a,i=>{const l=i.src;if(kt(n,l))return n[l].then(d=>ut(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(be(u,"blob:")){const h=c.getByUri(u);return X(h)?Promise.resolve(h):(p=u,be(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):be(p,"data:")?(f=p,new Promise((g,b)=>{Qu(f).bind(({type:v,data:y,base64Encoded:w})=>K0(v,y,w)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>G0(g).then(b=>Y0(b,!1,v=>C.some(X0(c,g,v))).getOrThunk(m)))}var g,p,f;return be(u,"data:")?Q0(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(s)}}})(o,e)),r.findAll(t.getBody(),m).then(s(h=>{const g=bt(h,b=>ut(b)?(Nl(t,b),!1):"blob"!==b.uriType);return Vn(t)||H(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=o.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Re(t.editorManager.get(),(w,x)=>w||x.editorUpload&&x.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{ih(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{H(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=o.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{a.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=Ar(Ox(t)),t.dom=Mt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:J_(t),referrerPolicy:wc(t),onSetAttrib:s=>{t.dispatch("SetAttrib",s)}}),t.parser=(s=>{const i=va(Ax(s),s.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=s.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,s.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),GE(s)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+s.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=s.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new Ie("br",1))}}),i})(t),t.serializer=My((s=>{const i=s.options.get;return{...Ax(s),...Ox(s),..._f({remove_trailing_brs:i("remove_trailing_brs"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=Py(t.dom,t.getWin(),t.serializer,t),t.annotator=gb(t),t.formatter=Xy(t),t.undoManager=Jy(t),t._nodeChangeDispatcher=new xO(t),t._selectionOverrides=eT(t),(s=>{const i=Or(),l=ie(!1),d=cc(c=>{s.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);s.on("touchstart",c=>{r1(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),s.on("touchmove",c=>{d.cancel(),r1(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():s.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(t=>{var e;(e=t).on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()}),(e=>{e.parser.addNodeFilter("details",n=>{const r=JE(e);H(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const r=ZE(e);H(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==ot.BACKSPACE&&n.keyCode!==ot.DELETE||((r,o)=>{const a=C.from(r.getParent(o.startContainer,"details")),s=C.from(r.getParent(o.endContainer,"details"));if(a.isSome()||s.isSome()){const i=a.bind(l=>C.from(r.select("summary",l)[0]));return C.some({startSummary:i,startDetails:a,endDetails:s})}return C.none()})(e.dom,e.selection.getRng()).fold(()=>{((r,o)=>{const{dom:a,selection:s}=r,i=r.getBody();if(r.selection.isCollapsed()){const l=M.fromRangeStart(s.getRng()),d=a.getParent(l.container(),a.isBlock);if(d&&a.isEmpty(d))if(Ne(d.nextSibling)){const c=Le(i,l).filter(u=>vf(a,u));if(c.isSome())return c.each(u=>{o||Jw(r,u)}),!0}else if(Ne(d.previousSibling)&&Oe(i,l).filter(c=>vf(a,c)))return!0;return ws(o,i,l).fold(It,c=>!!vf(a,c)&&(d&&a.isEmpty(d)&&r.dom.remove(d),o||Jw(r,c),!0))}return!1})(e,n.keyCode===ot.DELETE)&&n.preventDefault()},r=>{((t,e,n)=>{const r=t.selection,o=r.getNode(),a=r.getRng(),s=n.keyCode===ot.BACKSPACE,i=n.keyCode===ot.DELETE,l=t.selection.isCollapsed(),d=M.fromRangeStart(a),c=t.getBody();return!((l||!((u,m)=>{const p=m.startSummary.exists(g=>g.contains(u.startContainer)),f=m.startSummary.exists(g=>g.contains(u.endContainer)),h=m.startDetails.forall(g=>m.endDetails.forall(b=>g!==b));return(p||f)&&!(p&&f)||h})(a,e))&&!(l&&s&&(u=d,m=e,m.startSummary.exists(p=>{return f=u,Te(p).exists(g=>g.isEqual(f));var f})))&&!(l&&i&&((u,m)=>m.startSummary.exists(p=>{return f=u,gn(h=p).exists(g=>Wt(g.getNode())&&Le(h,g).exists(b=>b.isEqual(f))||g.isEqual(f));var f,h}))(d,e))&&!(l&&s&&((u,m)=>m.startDetails.exists(p=>Le(p,u).forall(f=>m.startSummary.exists(h=>!h.contains(u.container())&&h.contains(f.container())))))(d,e))&&!(l&&i&&((u,m,p)=>p.startDetails.exists(f=>Oe(u,m).forall(h=>!f.contains(h.container()))))(c,d,e))&&(!jO||!qk(o)||(!l&&Gw(a,o)||Fv(i,d,o)?Ww(o):t.undoManager.transact(()=>{const u=r.getSel();let{anchorNode:m,anchorOffset:p,focusNode:f,focusOffset:h}=null!=u?u:{};const g=()=>{X(m)&&X(p)&&X(f)&&X(h)&&(null==u||u.setBaseAndExtent(m,p,f,h))},b=(y,w)=>{H(y.childNodes,x=>{ks(x)&&w.appendChild(x)})},v=t.dom.create("span",{"data-mce-bogus":"all"});b(o,v),o.appendChild(v),g(),l&&(Qw&&(n.altKey||s&&n.metaKey)||!Qw&&n.ctrlKey)&&(null==u||u.modify("extend",s?"left":"right",n.metaKey?"line":"word")),!r.isCollapsed()&&Gw(r.getRng(),v)?Ww(o):(t.execCommand(s?"Delete":"ForwardDelete"),m=null==u?void 0:u.anchorNode,p=null==u?void 0:u.anchorOffset,f=null==u?void 0:u.focusNode,h=null==u?void 0:u.focusOffset,b(v,o),g()),t.dom.remove(v)}),0)));var u,m})(e,r,n)&&n.preventDefault()})})})(t)})(t),(s=>{const i="contenteditable",l=" "+W.trim(WE(s))+" ",d=" "+W.trim(vh(s))+" ",c=s1(l),u=s1(d),m=KE(s);m.length>0&&s.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],wA(f,v,vh(f)));g.content=v}})(s,m,p)}),s.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),s.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];(c(h)||u(h))&&(m.length>0&&h.attr("data-mce-content")?(h.name="#text",h.type=3,h.raw=!0,h.value=h.attr("data-mce-content")):h.attr(i,null))}})})(t),Vn(t)||((s=t).on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r)=>{const o=M.fromRangeStart(n).getNode(),a=(c=r,no(E(o),u=>Cn(u.dom)||Ze(u),tx(c)).getOr(E(c)).dom),s=nx(o,a,!1),i=nx(o,a,!0),l=document.createRange();var c;return ex(s,a).fold(()=>{Zw(s)?l.setStart(s,0):l.setStartBefore(s)},d=>l.setStartBefore(d.dom)),ex(i,a).fold(()=>{Zw(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},d=>l.setEndAfter(d.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(Mu(e))})(s))}),(s=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=VE(i),f=qE(i),{inlinePatterns:eh(p),blockPatterns:th(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!ot.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return wf(t,n).map(r=>{var o;const a=Math.max(0,n.startOffset),s=vx(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=Sx(t,r,n.startContainer,a,s,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=Me(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=F(b,(k,_)=>_.start.length-k.start.length),w=v.replace(se," ");return Xt(y,x=>0===v.indexOf(x.start)||0===w.indexOf(x.start))})(u.blockPatterns,g).map(b=>W.trim(g).length===b.start.length?[]:[{pattern:b,range:Cf(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,r,s);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Nx(t,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();H(m,f=>((h,g)=>{const v=g.pattern,y=bx(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return wf(h,y).each(w=>{"block-format"===v.type?((x,k)=>{const _=k.get(x);return $t(_)&&Y(_).exists(T=>kt(T,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{Cx(h.dom,w,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{Cx(h.dom,w,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=zm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),Ra(t.dom,m.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();wf(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=yx(f.dom,b,g.startContainer,v),w=vx(h,b,y),x=Sx(f,b,g.startContainer,v,w,!1);x.length>0&&f.undoManager.transact(()=>{Nx(f,x)})})})(i,p)}};i.on("keyup",p=>{Rx(d,p,(f,h)=>f===h.keyCode&&!ot.modifierPressed(h))&&m()}),i.on("keypress",p=>{Rx(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&on.setEditorTimeout(i,m)})})(s)})(t));const o=wO(t);((t,e)=>{t.addCommand("delete",()=>{var n;n1(n=t,e,!1).fold(()=>{wu(n),xu(n)},Cr)}),t.addCommand("forwardDelete",()=>{var n;n1(n=t,e,!0).fold(()=>Iv(n,"ForwardDelete"),Cr)})})(t,o),(s=>{s.on("NodeChange",at(CA,s))})(t),(s=>{var i;const l=s.dom,d=Me(s),c=null!==(i=sE(s))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(tC(g)){const b=g.keyCode;return!eC(g)&&(ot.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Ot(IR,b))}return!1})(m))return;const f=s.getBody(),h=!(tC(g=m)&&!(eC(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(Zt(E(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,Zy)!==h||p)&&(l.setAttrib(f,Zy,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(s,h),s.on(h?"keydown":"keyup",u),s.off(h?"keyup":"keydown",u))};Tn(c)&&s.on("init",m=>{u(m,!0),s.on("change SetContent ExecCommand",u),s.on("paste",p=>on.setEditorTimeout(s,()=>u(p)))})})(t),(t=>{const e=ie(!1),n=ie(zE(t)?"text":"html"),r=(o=>{const a=ie(null);return{create:()=>((s,i)=>{const{dom:l,selection:d}=s,c=s.getBody();i.set(d.getRng());const u=l.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Ow);St.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(o,a),remove:()=>((s,i)=>{const l=s.dom;if(ff(s)){let d;const c=i.get();for(;d=ff(s);)l.remove(d),l.unbind(d);c&&s.selection.setRng(c)}i.set(null)})(o,a),getEl:()=>ff(o),getHtml:()=>(s=>{const i=s.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=bt(s.getBody().childNodes,OO);H(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(o),getLastRng:a.get}})(t);var o,a,s;o=t,(St.browser.isChromium()||St.browser.isSafari())&&(s=IO,(a=o).on("PastePreProcess",i=>{i.content=s(a,i.content,i.internal)})),((o,a)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((s,i)=>{"text"===i.get()?(i.set("html"),wb(s,!1)):(i.set("text"),wb(s,!0)),s.focus()})(o,a)}),o.addCommand("mceInsertClipboardContent",(s,i)=>{i.html&&td(o,i.html,i.internal,!1),i.text&&hf(o,i.text,!1)})})(t,n),(o=>{const a=l=>d=>{l(o,d)},s=PE(o);Rt(s)&&o.on("PastePreProcess",a(s));const i=ME(o);Rt(i)&&o.on("PastePostProcess",a(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(a=>s=>{!s.isDefaultPrevented()&&Hw(a)&&Uw(s,zw(a),jw(a),()=>{if(St.browser.isChromium()||St.browser.isFirefox()){const i=a.selection.getRng();on.setEditorTimeout(a,()=>{a.selection.setRng(i),a.execCommand("Delete")},0)}else a.execCommand("Delete")})})(o)),o.on("copy",(a=>s=>{!s.isDefaultPrevented()&&Hw(a)&&Uw(s,zw(a),jw(a),Et)})(o))})(t),((o,a)=>{DE(o)&&o.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Hi(o)||o.on("drop",s=>{const i=s.dataTransfer;i&&qt(i.files,d=>/^image\//.test(d.type))&&s.preventDefault()}),o.on("drop",s=>{if(s.isDefaultPrevented())return;const i=$w(o,s);if(Gt(i))return;const l=Lw(s.dataTransfer),d=zr(l,Zl());if((!Iw(l)||(p=>{const f=p["text/plain"];return!!f&&0===f.indexOf("file://")})(l))&&Fw(o,s,i))return;const c=l[Zl()],u=c||l["text/html"]||l["text/plain"],m=((p,f,h,g)=>{const b=p.getParent(h,v=>co(f,v));if(b&&kt(g,"text/html")){const v=(new DOMParser).parseFromString(g["text/html"],"text/html").body;return!Ne(v.querySelector(b.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l);a.get()&&!m||u&&(s.preventDefault(),on.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{c&&o.execCommand("Delete"),Vw(o,i);const p=Dw(u);l["text/html"]?td(o,p,d,!0):hf(o,p,!0)})}))}),o.on("dragstart",s=>{a.set(!0)}),o.on("dragover dragend",s=>{Hi(o)&&!a.get()&&(s.preventDefault(),Vw(o,$w(o,s))),"dragend"===s.type&&a.set(!1)})})(t,e),((t,e,n)=>{((r,o,a)=>{let s;r.on("keydown",i=>{var l;(ot.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(s=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,St.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===a.get()||s;s=!1;const d=Lw(i.clipboardData);!Iw(d)&&Fw(r,i,o.getLastRng()||r.selection.getRng())||(zr(d,"text/html")?(i.preventDefault(),bf(r,d,d["text/html"],l,!0)):zr(d,"text/plain")&&zr(d,"text/uri-list")?(i.preventDefault(),bf(r,d,d["text/plain"],l,!0)):(o.create(),on.setEditorTimeout(r,()=>{const c=o.getHtml();o.remove(),bf(r,d,c,l,!1)},0)))})})(t,e,n),(r=>{const o=s=>be(s,"webkit-fake-url"),a=s=>be(s,"data:");r.parser.addNodeFilter("img",(s,i,l)=>{if(!Hi(r)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of s){const c=d.attr("src");ut(c)&&!d.attr("data-mce-object")&&c!==St.transparentSrc&&(o(c)||!$E(r)&&a(c))&&d.remove()}var c})})(t)})(t,r,n)})})(t);const a=(s=>{const i=s;return(l=s,jt(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=Ry(s),C.none()),l=>(i.rtcInstance=(()=>{const d=J(null),c=J("");return{init:{bindEvents:Et},undoManager:{beforeChange:Et,add:d,undo:d,redo:d,clear:Et,reset:Et,hasUndo:It,hasRedo:It,transact:d,ignore:Et,extra:Et},formatter:{match:It,matchAll:J([]),matchNode:J(void 0),canApply:It,closest:c,apply:Et,remove:Et,toggle:Et,formatChanged:J({unbind:Et})},editor:{getContent:c,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:Et},selection:{getContent:c},autocompleter:{addDecoration:Et,removeDecoration:Et},raw:{getModel:J(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>he(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,w,x)=>p.transact(x),ignore:(y,w)=>p.ignore(w),extra:(y,w,x,k)=>p.extra(x,k)},formatter:{match:(y,w,x,k)=>f.match(y,u(w),k),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,w,x)=>f.apply(y,u(w)),remove:(y,w,x,k)=>f.remove(y,u(w)),toggle:(y,w,x)=>f.toggle(y,u(w)),formatChanged:(y,w,x,k,_)=>f.formatChanged(w,x,k,_)},editor:{getContent:y=>h.getContent(y),setContent:(y,w)=>({content:h.setContent(y,w),html:""}),insertContent:(y,w)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,w)=>g.getContent(w)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(s=>{const i=s.getDoc(),l=s.getBody();s.dispatch("PreInit"),TE(s)||(i.body.spellcheck=!1,kf.setAttrib(l,"spellcheck","false")),s.quirks=(t=>{const e=W.each,n=ot.BACKSPACE,r=ot.DELETE,o=t.dom,a=t.selection,s=t.parser,i=St.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=St.deviceType.isiPhone()||St.deviceType.isiPad(),u=St.os.isMacOS()||St.os.isiOS(),m=(S,O)=>{try{t.getDoc().execCommand(S,!1,String(O))}catch{}},p=S=>S.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",S=>{let O;if(S.target===t.getDoc().documentElement)if(O=a.getRng(),t.getBody().focus(),"mousedown"===S.type){if(tn(O.startContainer))return;a.placeCaretAt(S.clientX,S.clientY)}else a.setRng(O)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",S=>{if(!p(S)&&"HTML"===S.target.nodeName){const O=t.getBody();O.blur(),on.setEditorTimeout(t,()=>{O.focus()})}})},b=()=>{const S=bh(t);t.on("click",O=>{const R=O.target;/^(IMG|HR)$/.test(R.nodeName)&&o.isEditable(R.parentNode)&&(O.preventDefault(),t.selection.select(R),t.nodeChanged()),"A"===R.nodeName&&o.hasClass(R,S)&&0===R.childNodes.length&&o.isEditable(R.parentNode)&&(O.preventDefault(),a.select(R))})},v=()=>{t.on("keydown",S=>{if(!p(S)&&S.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){const O=a.getNode().previousSibling;if(O&&O.nodeName&&"table"===O.nodeName.toLowerCase())return S.preventDefault(),!1}return!0})},y=()=>{ph(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),fh(t)||m("enableObjectResizing",!1)})},w=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},k=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",S=>{let O;"HTML"===S.target.nodeName&&(O=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(O),t.selection.normalize(),t.nodeChanged())}))},_=()=>{u&&t.on("keydown",S=>{!ot.metaKeyPressed(S)||S.shiftKey||37!==S.keyCode&&39!==S.keyCode||(S.preventDefault(),t.selection.getSel().modify("move",37===S.keyCode?"backward":"forward","lineboundary"))})},T=()=>{t.on("click",S=>{let O=S.target;do{if("A"===O.tagName)return void S.preventDefault()}while(O=O.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",S=>{S.preventDefault()})})},P=Et;return Vn(t)?(d&&(h(),b(),L(),f(),c&&(x(),k(),T())),l&&(g(),y(),w(),_())):(t.on("keydown",S=>{if(p(S)||S.keyCode!==ot.BACKSPACE)return;let O=a.getRng();const R=O.startContainer,B=O.startOffset,G=o.getRoot();let $=R;if(O.collapsed&&0===B){for(;$.parentNode&&$.parentNode.firstChild===$&&$.parentNode!==G;)$=$.parentNode;"BLOCKQUOTE"===$.nodeName&&(t.formatter.toggle("blockquote",void 0,$),O=o.createRng(),O.setStart(R,0),O.setEnd(R,0),a.setRng(O))}}),(()=>{const S=O=>{const R=o.create("body"),B=O.cloneContents();return R.appendChild(B),a.serializer.serialize(R,{format:"html"})};t.on("keydown",O=>{const R=O.keyCode;if(!p(O)&&(R===r||R===n)&&t.selection.isEditable()){const B=t.selection.isCollapsed(),G=t.getBody();if(B&&!o.isEmpty(G)||!B&&!($=>{const ct=S($),Q=o.createRng();return Q.selectNode(t.getBody()),ct===S(Q)})(t.selection.getRng()))return;O.preventDefault(),t.setContent(""),G.firstChild&&o.isBlock(G.firstChild)?t.selection.setCursorLocation(G.firstChild,0):t.selection.setCursorLocation(G,0),t.nodeChanged()}})})(),St.windowsPhone||t.on("keyup focusin mouseup",S=>{ot.modifierPressed(S)||(O=>{const R=O.getBody(),B=O.selection.getRng();return B.startContainer===B.endContainer&&B.startContainer===R&&0===B.startOffset&&B.endOffset===R.childNodes.length})(t)||a.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",Me(t))}),L(),v(),s.addNodeFilter("br",S=>{let O=S.length;for(;O--;)"Apple-interchange-newline"===S[O].attr("class")&&S[O].remove()}),c?(x(),k(),T()):f()),l&&(t.on("keydown",S=>{if(!p(S)&&S.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){const O=a.getNode(),R=O.previousSibling;if("HR"===O.nodeName)return o.remove(O),void S.preventDefault();R&&R.nodeName&&"hr"===R.nodeName.toLowerCase()&&(o.remove(R),S.preventDefault())}}}),g(),(()=>{const S=()=>{const R=o.getAttribs(a.getStart().cloneNode(!1));return()=>{const B=a.getStart();B!==t.getBody()&&(o.setAttrib(B,"style",null),e(R,G=>{B.setAttributeNode(G.cloneNode(!0))}))}},O=()=>!a.isCollapsed()&&o.getParent(a.getStart(),o.isBlock)!==o.getParent(a.getEnd(),o.isBlock);t.on("keypress",R=>{let B;return!(!(p(R)||8!==R.keyCode&&46!==R.keyCode)&&O()&&(B=S(),t.getDoc().execCommand("delete",!1),B(),R.preventDefault(),1))}),o.bind(t.getDoc(),"cut",R=>{if(!p(R)&&O()){const B=S();on.setEditorTimeout(t,()=>{B()})}})})(),y(),t.on("SetContent ExecCommand",S=>{"setcontent"!==S.type&&"mceInsertLink"!==S.command||e(o.select("a:not([data-mce-block])"),O=>{var R;let B=O.parentNode;const G=o.getRoot();if((null==B?void 0:B.lastChild)===O){for(;B&&!o.isBlock(B);){if((null===(R=B.parentNode)||void 0===R?void 0:R.lastChild)!==B||B===G)return;B=B.parentNode}o.add(B,"br",{"data-mce-bogus":1})}})}),w(),_(),v(),t.on("drop",S=>{var O;const R=null===(O=S.dataTransfer)||void 0===O?void 0:O.getData("text/html");ut(R)&&/^<img[^>]*>$/.test(R)&&t.dispatch("dragend",new window.DragEvent("dragend",S))}))),{refreshContentEditable:P,isHidden:()=>{if(!l||t.removed)return!1;const S=t.selection.getSel();return!S||!S.rangeCount||0===S.rangeCount}}})(s),s.dispatch("PostRender");const d=rE(s);void 0!==d&&(l.dir=d);const c=BE(s);c&&s.on("BeforeSetContent",u=>{W.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",u=>{s.composing="compositionstart"===u.type})})(t),a.fold(()=>{Bx(t).then(()=>Ef(t))},s=>{t.setProgressState(!0),Bx(t).then(()=>{s().then(i=>{t.setProgressState(!1),Ef(t),Ay(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Ef(t),Ay(t)})})})},iT=Vt,Sf=Mt.DOM,Px=Mt.DOM,Mx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),Lx=t=>{const e=t.getElement();return t.inline?Mx(null):(n=>{const r=Px.create("div");return Px.insertAfter(r,n),Mx(r,r)})(e)},lT=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=W.trim(dh(n)),o=n.ui.registry.getAll().icons,a={...Sl.get("default").icons,...Sl.get(r).icons};lt(a,(s,i)=>{kt(o,i)||n.ui.registry.addIcon(i,s)})})(t),(n=>{const r=ia(n);if(ut(r)){const o=Bo.get(r);n.theme=o(n,Bo.urls[r])||{},Rt(n.theme.init)&&n.theme.init(n,Bo.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=xc(n),o=ya.get(r);n.model=o(n,ya.urls[r])})(t),(n=>{const r=[];H(zi(n),o=>{((a,s,i)=>{const l=Ca.get(i),d=Ca.urls[i]||a.documentBaseUrl.replace(/\/$/,"");if(i=W.trim(i),l&&-1===W.inArray(s,i)){if(a.plugins[i])return;try{const c=l(a,d)||{};a.plugins[i]=c,Rt(c.init)&&(c.init(a,d),s.push(i))}catch(c){((u,m,p)=>{const f=wn.translate(["Failed to initialize plugin: {0}",m]);hb(u,"PluginLoadError",{message:f}),Rl(f,p),Nl(u,f)})(a,i,c)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,ut(ia(n))?(o=>{const a=o.theme.renderUI;return a?a():Lx(o)})(n):Rt(ia(n))?(o=>{const a=o.getElement(),s=ia(o)(o,a);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||o.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||o.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:a.offsetHeight,s})(n):Lx(n)})(t);var n,r;((n,r)=>{const o={show:C.from(r.show).getOr(Et),hide:C.from(r.hide).getOr(Et),isEnabled:C.from(r.isEnabled).getOr(Vt),setEnabled:a=>{n.mode.isReadOnly()||C.from(r.setEnabled).each(s=>s(a))}};n.ui={...n.ui,...o}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Vy(r=n,eE(r)),(r=>Vy(r,mh(r)))(n)),t.inline?Dx(t):((n,r)=>{((o,a)=>{const s=o.translate("Rich Text Area"),i=or(E(o.getElement()),"tabindex").bind(mi),l=((d,c,u,m)=>{const p=ge("iframe");return m.each(f=>fe(p,"tabindex",f)),wr(p,u),wr(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),Wo(p,"tox-edit-area__iframe"),p})(o.id,s,L_(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=a.iframeContainer,o.iframeElement=l,o.iframeHTML=(d=>{let c=I_(d)+"<html><head>";ah(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=F_(d),m=U_(d),p=d.translate(SE(d));return sh(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+sh(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(o),Sf.add(a.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=Sf.isHidden(r.editorContainer)),n.getElement().style.display="none",Sf.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const a=o.iframeElement,s=()=>{o.contentDocument=a.contentDocument,Dx(o)};if(XE(o)||St.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),s()}else{const l=((t,e,n,r)=>((o,a,s,i,l)=>{const d=(c=s,u=i,m=>{c(m)&&u((p=>{const f=E(kg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=nr(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return o.dom.addEventListener(a,d,!1),{unbind:at(jk,o,a,d,!1)}})(t,"load",n,()=>{l.unbind(),s()}))(E(a),0,iT);a.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},Do=Mt.DOM,Ix=t=>"-"===t.charAt(0),Fx=(t,e,n)=>C.from(e).filter(r=>Tn(r)&&!Sl.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:C.some(r)})),Ux=Bn().deviceType,jx=Ux.isPhone(),cT=Ux.isTablet(),Zs=t=>{if(Gt(t))return[];{const e=$t(t)?t:t.split(/[ ,]/),n=Nt(e,$o);return bt(n,Tn)}},Nf=(t,e)=>kt(t.sections(),e),mT=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:jt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),fT=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?W.extend({},t.external_plugins,r):r},hT=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,a,s)=>{const i=E(o.getRoot());return s=Os(i,M.fromRangeStart(a))?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),Ts(i,M.fromRangeEnd(a))?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e):e},ad=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const a=W.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:a}}return{content:o,details:{}}})(e);lm(t,{...r,content:hT(t,n),format:"html",set:!1,selection:!0}).each(o=>{const a=(i=o.content,l=r,pm(t).editor.insertContent(i,l));var i,l;dm(t,a,o),t.addVisual()})}},bT={"font-size":"size","font-family":"face"},vT=Rd("font"),zx=t=>(e,n)=>C.from(n).map(E).filter(ze).bind(r=>{return(o=t,a=e,s=r.dom,Uu(E(s),i=>{return hi(l=i,o).orThunk(()=>vT(l)?jt(bT,o).bind(d=>or(l,d)):C.none());var l},i=>Tt(E(a),i))).or(((o,a)=>C.from(Mt.DOM.getStyle(a,o,!0)))(t,r.dom));var o,a,s}).getOr(""),yT=zx("font-size"),CT=nr(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),zx("font-family")),wT=t=>Te(t.getBody()).bind(e=>{const n=e.container();return C.from(V(n)?n.parentNode:n)}),Rf=(t,e)=>{return n=t,r=ai(C.some,e),(o=n,C.from(o.selection.getRng()).bind(a=>{const s=o.getBody();return a.startContainer===s&&0===a.startOffset?C.none():C.from(o.selection.getStart(!0))})).orThunk(at(wT,n)).map(E).filter(ze).bind(r);var n,r,o},Hx=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=W.explode(t.options.get("font_size_style_values")),o=W.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},xT=t=>{const e=t.split(/\s*,\s*/);return Nt(e,n=>-1===n.indexOf(" ")||be(n,'"')||be(n,"'")?n:`'${n}'`).join(",")},_T=["toggleview"],$x=t=>Ot(_T,t.toLowerCase());class Vx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const a=this.editor,s=e.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||i?ru(d=a).each(c=>d.selection.setRng(c)):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[s];return!!Rt(l)&&(l(s,n,r),a.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!$x(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!Rt(r)&&r(n)}queryCommandValue(e){if(!$x(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return Rt(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;lt(e,(o,a)=>{H(a.toLowerCase().split(","),s=>{r[n][s]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(a,s,i)=>n.call(null!=r?r:this.editor,s,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}}const Po="data-mce-contenteditable",Af=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},sd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Mo=t=>t.readonly,qx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Mo(t)&&H(e,n=>{n.attr(Po,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Po,e=>{Mo(t)&&H(e,n=>{n.attr("contenteditable",n.attr(Po))})}),t.serializer.addTempAttr(Po)},ST=["copy"],NT=W.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Of{static isNative(e){return!!NT[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||It}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=ac(r,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const a=this.bindings[r];if(a)for(let s=0,i=a.length;s<i;s++){const l=a[s];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=It),n){const a={func:n,removed:!1};o&&W.extend(a,o);const s=e.toLowerCase().split(" ");let i=s.length;for(;i--;){const l=s[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=r?[a,...d]:[...d,a],this.bindings[l]=d}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const a=r[o];let s=this.bindings[a];if(!a)return lt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(s){if(n){const i=cn(s,l=>l.func===n);s=i.fail,this.bindings[a]=s,H(i.pass,l=>{l.removed=!0})}else s.length=0;s.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}else lt(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const ti=t=>(t._eventDispatcher||(t._eventDispatcher=new Of({scope:t,toggleEvent:(e,n)=>{Of.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Tf={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return ac(t.toLowerCase(),null!=e?e:{},r);const o=ti(r).dispatch(t,e);if(!1!==n&&r.parent){let a=r.parent();for(;a&&!o.isPropagationStopped();)a.dispatch(t,o,!1),a=a.parent?a.parent():void 0}return o},on(t,e,n){return ti(this).on(t,e,n)},off(t,e){return ti(this).off(t,e)},once(t,e){return ti(this).once(t,e)},hasEventListeners(t){return ti(this).has(t)}},id=Mt.DOM;let Lo;const ld=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=gh(t);return n?(t.eventRoot||(t.eventRoot=id.select(n)[0]),t.eventRoot):t.getBody()},Wx=(t,e,n)=>{var r;(r=t).hidden||Mo(r)?Mo(t)&&((r,o)=>{if("click"!==o.type||ot.metaKeyPressed(o))Ot(ST,o.type)&&r.dispatch(o.type,o);else{const a=E(o.target);(s=r,i=a,ro(i,"a",l=>Tt(l,E(s.getBody()))).bind(l=>or(l,"href"))).each(s=>{if(o.preventDefault(),/^#/.test(s)){const i=r.dom.select(`${s},[name="${$f(s,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,i})(t,n):t.dispatch(e,n)},Kx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=ld(t,e);if(gh(t)){if(Lo||(Lo={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Lo&&(lt(Lo,(o,a)=>{t.dom.unbind(ld(t,a))}),Lo=null)})),Lo[e])return;const r=o=>{const a=o.target,s=t.editorManager.get();let i=s.length;for(;i--;){const l=s[i].getBody();(l===a||id.isChildOf(a,l))&&Wx(s[i],e,o)}};Lo[e]=r,id.bind(n,e,r)}else{const r=o=>{Wx(t,e,o)};id.bind(n,e,r),t.delegates[e]=r}},Gx={...Tf,bindPendingEventDelegates(){const t=this;W.each(t._pendingNativeEvents,e=>{Kx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?Kx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(ld(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(lt(t.delegates,(r,o)=>{t.dom.unbind(ld(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},RT=t=>ut(t)?{value:t.split(/[ ,]/),valid:!0}:yr(t,ut)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Yx=(t,e)=>t+(za(e.message)?"":`. ${e.message}`),Xx=t=>t.valid,Bf=(t,e,n="")=>{const r=e(t);return er(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},AT=["design","readonly"],Qx=(t,e,n,r)=>{const o=n[e.get()],a=n[r];try{a.activate()}catch(s){return void console.error(`problem while activating editor mode ${r}:`,s)}var s;o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&((t,e)=>{const n=E(t.getBody());var r,o,a;a=e,Od(r=n,o="mce-content-readonly")&&!a?Ko(r,o):a&&Wo(r,o),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(r=>{C.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,sd(n,!1),H(ke(n,'*[contenteditable="true"]'),r=>{fe(r,Po,"true"),sd(r,!1)})):(t.readonly=!1,t.hasEditableRoot()&&sd(n,!0),H(ke(n,`*[${Po}="true"]`),r=>{ve(r,Po),sd(r,!0)}),Af(t,"StyleWithCSS",!1),Af(t,"enableInlineTableEditing",!1),Af(t,"enableObjectResizing",!1),(r=>Eo(r)||(o=>{const a=xr(E(o.getElement()));return eu(a).filter(s=>!au(s.dom)&&sl(o,s.dom)).isSome()})(r))(t)&&t.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(t),t.nodeChanged())})(t,a.editorReadOnly),e.set(r),(s=t).dispatch("SwitchMode",{mode:r})},Df=W.each,Pf=W.explode,OT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Jx=W.makeMap("alt,ctrl,shift,meta,access"),TT=t=>{const e={},n=St.os.isMacOS()||St.os.isiOS();Df(Pf(t.toLowerCase(),"+"),a=>{a in Jx?e[a]=!0:/^[0-9]{2,}$/.test(a)?e.keyCode=parseInt(a,10):(e.charCode=a.charCodeAt(0),e.keyCode=OT[a]||a.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in Jx)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class Zx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Df(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const a=this,s=a.normalizeCommandFunc(r);return Df(Pf(W.trim(e)),i=>{const l=a.createShortcut(i,n,s,o);a.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:W.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const a=W.map(Pf(e,">"),TT);return a[a.length-1]=W.extend(a[a.length-1],{func:r,scope:o||this.editor}),W.extend(a[0],{desc:this.editor.translate(n),subpatterns:a.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const BT=()=>{const t=(()=>{const e={},n={},r={},o={},a={},s={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>o[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:a,contextToolbars:s,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Io=Mt.DOM,tk=W.extend,DT=W.each;class dd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,tk(this,Gx);const o=this;this.id=e,this.hidden=!1;const a=((t,e,n,r,o)=>{var a;const s=t?{mobile:mT(null!==(a=o.mobile)&&void 0!==a?a:{},e)}:{},i=((t,e)=>{const n=((a,s)=>{const i={},l={};return Ia(a,(d,c)=>Ot(t,c),un(i),un(l)),{t:i,f:l}})(e);return o=n.f,{sections:J(n.t),options:J(o)};var o})(["mobile"],Km(s,o)),l=W.extend(n,r,i.options(),t&&Nf(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=jt(m,c).getOr({});return W.extend({},u,p)})(i,"mobile"):{},{external_plugins:fT(r,i.options())});return((d,c,u,m)=>{const p=Zs(u.forced_plugins),f=Zs(m.plugins),h=Nf(v=c,"mobile")?v.sections().mobile:{},g=((v,y,w,x)=>v&&Nf(y,"mobile")?x:w)(d,c,f,h.plugins?Zs(h.plugins):f),b=((v,y)=>[...Zs(v),...Zs(y)])(p,g);var v;return W.extend(m,{forced_plugins:p,plugins:b})})(t,i,r,l)})(jx||cT,jx,f=n,r.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,w,x)=>{const k=Bf(w,x);return Xx(k)?(g[y]=k.value,!0):(console.warn(Yx(`Invalid value passed for the ${y} option`,k)),!1)},v=y=>kt(h,y);return{register:(y,w)=>{const x=ut(w.processor)?(_=>{const T=(()=>{switch(_){case"array":return $t;case"boolean":return er;case"function":return Rt;case"number":return Xe;case"object":return he;case"string":return ut;case"string[]":return RT;case"object[]":return L=>yr(L,he);case"regexp":return L=>vr(L,RegExp);default:return Vt}})();return L=>Bf(L,T,`The value must be a ${_}.`)})(w.processor):w.processor,k=((_,T,L)=>{if(!ae(T)){const P=Bf(T,L);if(Xx(P))return P.value;console.error(Yx(`Invalid default value passed for the "${_}" option`,P))}})(y,w.default,x);h[y]={...w,default:k,processor:x},jt(g,y).orThunk(()=>jt(f,y)).each(_=>b(y,_,x))},isRegistered:v,get:y=>jt(g,y).orThunk(()=>jt(h,y).map(w=>w.default)).getOrUndefined(),set:(y,w)=>{if(v(y)){const x=h[y];return x.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,w,x.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const w=v(y);return w&&delete g[y],w},isSet:y=>kt(g,y)}})(0,a),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:oh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:oh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=ut(h)&&Tn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Ot(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>er(h)||ut(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||ut(h)||yr(h,ut);return g?ut(h)?{value:Nt(h.split(","),$o),valid:g}:$t(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:kc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=ut(h)||yr(h,ut);return g?{value:$t(h)?h:Nt(h.split(","),$o),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=er(h)||ut(h);return g?!1===h||yc.isiPhone()||yc.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!P_}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||ut(h)||Rt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||ut(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:Cc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:Cc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:Cc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>ut(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>yr(h,he)||!1===h?{value:nh(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Rt(h)?{value:(g=h,b=>{const v=g(b);return nh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>yr(h,rh)?{value:h,valid:!0}:rh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Ot(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Ot(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:wn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:M_.getAttrib(p.getElement(),"placeholder")})})})(o);const s=this.options.get;s("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(t=>{const e=Iy(t,bR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),F(e)})(h),v=(t=>Fy(t,yR))(g),y=v.length>0,w=b.length>0,x="mobile"===g.theme;if(y||w||x){const k="\n- ",_=x?`\n\nThemes:${k}mobile`:"",T=y?`\n\nPlugins:${k}${v.join(k)}`:"",L=w?`\n\nOptions:${k}${b.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+_+T+L)}})(p,f),((h,g)=>{const b=(t=>Iy(t,vR))(h),v=(t=>Fy(t,Ly.map(e=>e.name)))(g),y=v.length>0,w=b.length>0;if(y||w){const x="\n- ",k=y?`\n\nPlugins:${x}${v.map(_R).join(x)}`:"",_=w?`\n\nOptions:${x}${b.join(x)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+k+_)}})(p,f)})(n,a);const i=s("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=s("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const d=wc(o);d&&(ur.ScriptLoader._setReferrerPolicy(d),Mt.DOM.styleSheetLoader._setReferrerPolicy(d));const c=hh(o);X(c)&&Mt.DOM.styleSheetLoader._setContentCssCors(c),Ae.languageLoad=s("language_load"),Ae.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new En(ah(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=kc(o),this.hasVisual=_E(o),this.shortcuts=new Zx(this),this.editorCommands=new Vx(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{H("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,a=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return qt(a,s=>X(e.formatter.matchNode(s,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(St.os.isMacOS()||St.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let a=0;e.dom.getParent(e.selection.getNode(),s=>!nt(s)||a++!==o||(e.selection.select(s),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Cn);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{ad(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{ad(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{ad(e,o)},mceInsertContent:(n,r,o)=>{ad(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(LE(e))}})})(t),(e=>{const n=(r,o,a)=>{const s=ut(a)?{href:a}:a,i=e.dom.getParent(e.selection.getNode(),"a");he(s)&&ut(s.href)&&(s.href=s.href.replace(/ /g,"%20"),i&&s.href||e.formatter.remove("link"),s.href&&e.formatter.apply("link",s,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{ZC(e,"indent")},Outdent:()=>{t1(e)}}),e.editorCommands.addCommands({Outdent:()=>XC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Xl(ow,e)},mceInsertNewLine:(n,r,o)=>{uw(e,o)},InsertLineBreak:(n,r,o)=>{Xl(iw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const a=o.parentNode;if(a&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)){const s=n.selection.getBookmark();n.dom.split(a,o),n.selection.moveToBookmark(s)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,a)=>{n.formatter.toggle(o,a),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,a,s)=>{r(o,{value:s})},BackColor:(o,a,s)=>{r("hilitecolor",{value:s})},FontName:(o,a,s)=>{((i,l)=>{const d=Hx(i,l);i.formatter.toggle("fontname",{value:xT(d)}),i.nodeChanged()})(n,s)},FontSize:(o,a,s)=>{var i;(i=n).formatter.toggle("fontsize",{value:Hx(i,s)}),i.nodeChanged()},LineHeight:(o,a,s)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(s)}),i.nodeChanged()},Lang:(o,a,s)=>{var i;r(o,{value:s.code,customValue:null!==(i=s.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,a,s)=>{r(ut(s)?s:"p")},mceToggleFormat:(o,a,s)=>{r(s)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Rf(o=n,a=>CT(o.getBody(),a.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Rf(o=n,a=>yT(o.getBody(),a.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Rf(o=n,a=>{const s=E(o.getBody());return Uu(a,l=>hi(l,"line-height"),at(Tt,s)).getOrThunk(()=>{const l=parseFloat(Mn(a,"line-height")),d=parseFloat(Mn(a,"font-size"));return String(l/d)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const a=null!=o?o:e.selection.getNode();if(a!==e.getBody()){const s=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(s)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var a;(a=e).removed||(!0===o?lu(a):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),X(i.bookmark)&&!Eo(i)&&ru(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return iu(u),Kb(i,c),void lu(i);i.inline||(St.browser.isOpera()||iu(d),i.getWin().focus()),(St.browser.isFirefox()||i.inline)&&(iu(d),Kb(i,c)),lu(i)})(a))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=s("cache_suffix");u&&(St.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:BT(),styleSheetLoader:void 0,show:Et,hide:Et,setEnabled:Et,isEnabled:Vt},this.mode=(p=>{const f=ie("design"),h=ie({design:{activate:Et,deactivate:Et,editorReadOnly:!1},readonly:{activate:Et,deactivate:Et,editorReadOnly:!0}});return(g=p).serializer?qx(g):g.on("PreInit",()=>{qx(g)}),(g=>{g.on("ShowCaret",b=>{Mo(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{Mo(g)&&b.preventDefault()})})(p),{isReadOnly:()=>Mo(p),set:g=>((b,v,y,w)=>{if(w!==y.get()){if(!kt(v,w))throw new Error(`Editor mode '${w}' is invalid`);b.initialized?Qx(b,y,v,w):b.on("init",()=>Qx(b,y,v,w))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,w)=>{if(Ot(AT,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...w,deactivate:()=>{try{w.deactivate()}catch(x){console.error(`problem while deactivating editor mode ${y}:`,x)}}}}})(h.get(),g,b))}};var g})(o),r.dispatch("SetupEditor",{editor:this});const m=NE(o);Rt(m)&&m.call(o,o)}render(){(e=>{const n=e.id;wn.setCode(ch(e));const r=()=>{Do.unbind(window,"ready",r),e.render()};if(!mo.Event.domLoaded)return void Do.bind(window,"ready",r);if(!e.getElement())return;const o=E(e.getElement()),a=ug(o);var l;e.on("remove",()=>{La(o.dom.attributes,i=>ve(o,i.name)),wr(o,a)}),e.ui.styleSheetLoader=ap.forElement(o,{contentCssCors:hh(l=e),referrerPolicy:wc(l)}),kc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const s=e.getElement().form||Do.getParent(n,"form");s&&(e.formElement=s,pE(e)&&!jd(e.getElement())&&(Do.insertAfter(Do.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Do.bind(s,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!hE(e)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)))),e.windowManager=Hy(e),e.notificationManager=zy(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=Do.encode(i.content))}),bE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),vE(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=ur.ScriptLoader,r=()=>{!t.removed&&(o=>{const a=ia(o);return!ut(a)||X(Bo.get(a))})(t)&&(o=>{const a=xc(o);return X(ya.get(a))})(t)&&lT(t)};((o,a)=>{const s=ia(o);if(ut(s)&&!Ix(s)&&!kt(Bo.urls,s)){const i=lE(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${s}/theme${a}.js`;Bo.load(s,l).catch(()=>{Is(o,"ThemeLoadError",Fs("theme",l,s))})}})(t,e),((o,a)=>{const s=xc(o);if("plugin"!==s&&!kt(ya.urls,s)){const i=dE(o),l=ut(i)?o.documentBaseURI.toAbsolute(i):`models/${s}/model${a}.js`;ya.load(s,l).catch(()=>{Is(o,"ModelLoadError",Fs("model",l,s))})}})(t,e),((o,a)=>{const s=ch(a),i=Z_(a);if(!wn.hasCode(s)&&"en"!==s){const l=Tn(i)?i:`${a.editorManager.baseURL}/langs/${s}.js`;o.add(l).catch(()=>{Is(a,"LanguageLoadError",Fs("language",l,s))})}})(n,t),((o,a,s)=>{const i=Fx(a,"default",s),l=(d=a,C.from(K_(d)).filter(Tn).map(c=>({url:c,name:C.none()}))).orThunk(()=>Fx(a,dh(a),""));var d;H((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{o.add(d.url).catch(()=>{var c,u,m;c=a,u=d.url,m=d.name.getOrUndefined(),Is(c,"IconsLoadError",Fs("icons",u,m))})})})(n,t,e),((o,a)=>{const s=(i,l)=>{Ca.load(i,l).catch(()=>{Is(o,"PluginLoadError",Fs("plugin",l,i))})};lt(xE(o),(i,l)=>{s(l,i),o.options.set("plugins",zi(o).concat(l))}),H(zi(o),i=>{!(i=W.trim(i))||Ca.urls[i]||Ix(i)||s(i,`plugins/${i}/plugin${a}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Eo(this)}translate(e){return wn.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(X(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Vt,default:n})),o.isSet(e)||ae(n)?o.get(e):n}hasPlugin(e,n){return!(!Ot(zi(this),e)||n&&void 0===Ca.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Io.show(e.getContainer()),Io.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Io.hide(e.getContainer()),Io.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},a=jd(r)?r.value:r.innerHTML,s=n.setContent(a,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),s}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let a=n.getContent(o);const s={...o,content:a};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),a=s.content,jd(r))r.value=a;else{!e.is_removing&&n.inline||(r.innerHTML=a);const i=Io.getParent(n.id,"form");i&&DT(i.elements,l=>l.name!==n.id||(l.value=a,!1))}return s.element=o.element=r=null,!1!==s.set_dirty&&n.setDirty(!1),a}setContent(e,n){return hm(this,e,n)}getContent(e){return((n,r={})=>{const o=(a=r,s=r.format?r.format:"html",{...a,format:s,get:!0,getInner:!0});var a,s;return hy(n,o).fold(ne,a=>{const s=(l=a,pm(n).editor.getContent(l));var l;return by(n,s,a)})})(this,e)}insertContent(e,n){n&&(e=tk({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?hm(this,this.startContent,{format:"raw"}):hm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Io.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Io.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,a=o.options.get,s=AE(o);return Rt(s)?s.call(o,e,r,!0,n):!a("convert_urls")||"link"===r||he(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:a("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,a("remove_script_host"))}addVisual(e){((n,r)=>{var a;a=r,Yt(this).editor.addVisual(a)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),a=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&X(null==a?void 0:a.nextSibling)&&_l.remove(a.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&_l.setStyle((s=e).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(e),_l.remove(e.getContainer()),El(n),El(r),e.destroy()}var s})(this)}destroy(e){((n,r)=>{const{selection:o,dom:a}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),El(o),El(a)),(s=>{const i=s.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),_l.unbind(i,"submit reset",s.formEventDelegate))})(n),(s=>{const i=s;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=s.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Aa=Mt.DOM,cd=W.each;let ud,ek=!1,Fe=[];const md=t=>{const e=t.type;cd(Hr.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},nk=t=>{if(t!==ek){const e=Mt.DOM;t?(e.bind(window,"resize",md),e.bind(window,"scroll",md)):(e.unbind(window,"resize",md),e.unbind(window,"scroll",md)),ek=t}},rk=t=>{const e=Fe;return Fe=bt(Fe,n=>t!==n),Hr.activeEditor===t&&(Hr.activeEditor=Fe.length>0?Fe[0]:null),Hr.focusedEditor===t&&(Hr.focusedEditor=null),e.length!==Fe.length},PT="CSS1Compat"!==document.compatMode,Hr={...Tf,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.0",releaseDate:"2023-07-12",i18n:wn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=En.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const s=document.getElementsByTagName("script");for(let i=0;i<s.length;i++){const l=s[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var a;t.baseURL=new En(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new En(t.baseURL),t.suffix=n,(a=t).on("AddEditor",at(zS,a)),a.on("RemoveEditor",at(HS,a))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&lt(r,(o,a)=>{Ae.PluginManager.urls[a]=o})},init(t){const e=this;let n;const r=W.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=s=>{n=s};const a=()=>{let s=0;const i=[];let l;var d;Aa.unbind(window,"ready",a),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],m=Rt(c)?p=>qt(u,f=>c(f,p)):p=>Ot(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=t,St.browser.isIE()||St.browser.isEdge()?(Rl("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):PT?(Rl("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ut(d.selector)?Aa.select(d.selector):X(d.target)?[d.target]:[])),W.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(rk(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=W.grep(l,d=>!e.get(d.id)),0===l.length?o([]):cd(l,d=>{t.inline&&d.tagName.toLowerCase()in r?Rl("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new dd(c,u,e);i.push(p),p.on("init",()=>{++s===l.length&&o(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=jt(c,"name").filter(m=>!Aa.get(m)).getOrThunk(Aa.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return Aa.bind(window,"ready",a),new Promise(s=>{n?s(n):o=i=>{s(i)}})},get(t){return 0===arguments.length?Fe.slice(0):ut(t)?Xt(Fe,e=>e.id===t).getOr(null):Xe(t)&&Fe[t]?Fe[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Fe.push(t),nk(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ud||(ud=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",ud))),t},createEditor(t,e){return this.add(new dd(t,e,this))},remove(t){const e=this;let n;if(t){if(!ut(t))return n=t,Ne(e.get(n.id))?null:(rk(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Fe.length&&window.removeEventListener("beforeunload",ud),n.remove(),nk(Fe.length>0),n);cd(Aa.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=Fe.length-1;r>=0;r--)e.remove(Fe[r])},execCommand(t,e,n){var r;const o=this,a=he(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(a)||new dd(a,n.options,o).render(),!0;case"mceRemoveEditor":{const s=o.get(a);return s&&s.remove(),!0}case"mceToggleEditor":{const s=o.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{cd(Fe,t=>{t.save()})},addI18n:(t,e)=>{wn.add(t,e)},translate:t=>wn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new En(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new En(this.baseURL)}};Hr.setup();const MT=(()=>{const t=Or();return{FakeClipboardItem:e=>({items:e,types:_t(e),getType:n=>jt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),ok=Math.min,Oa=Math.max,fd=Math.round,ak=(t,e,n)=>{let r=e.x,o=e.y;const a=t.w,s=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(o+=l),"r"===d[1]&&(r+=i),"c"===d[0]&&(o+=fd(l/2)),"c"===d[1]&&(r+=fd(i/2)),"b"===d[3]&&(o-=s),"r"===d[4]&&(r-=a),"c"===d[3]&&(o-=fd(s/2)),"c"===d[4]&&(r-=fd(a/2)),Ta(r,o,a,s)},Ta=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),LT={inflate:(t,e,n)=>Ta(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:ak,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const a=ak(t,e,r[o]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=Oa(t.x,e.x),r=Oa(t.y,e.y),o=ok(t.x+t.w,e.x+e.w),a=ok(t.y+t.h,e.y+e.h);return o-n<0||a-r<0?null:Ta(n,r,o-n,a-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,a=t.x+t.w,s=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=Oa(0,e.x-r),c=Oa(0,e.y-o),u=Oa(0,a-i),m=Oa(0,s-l);return r+=d,o+=c,n&&(a+=d,s+=c,r-=u,o-=m),a-=u,s-=m,Ta(r,o,a-r,s-o)},create:Ta,fromClientRect:t=>Ta(t.left,t.top,t.width,t.height)},IT=(()=>{const t={},e={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const s=new Promise((i,l)=>{const d=((c,u,m=1e3)=>{let p=!1,f=null;const h=v=>(...y)=>{p||(p=!0,null!==f&&(clearTimeout(f),f=null),v.apply(null,y))},g=h(c),b=h(u);return{start:(...v)=>{p||null!==f||(f=setTimeout(()=>b.apply(null,v),m))},resolve:g,reject:b}})(i,l);e[n]=d.resolve,ur.ScriptLoader.loadScript(r).then(()=>d.start(a),()=>d.reject(o))});return t[n]=s,s}},add:(n,r)=>{void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=Promise.resolve(r)},unload:n=>{delete t[n]}}})();let ei;try{const t="__storage_test__";ei=window.localStorage,ei.setItem(t,t),ei.removeItem(t)}catch{ei=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,a)=>{n.push(o),e[o]=String(a)},key:o=>n[o],removeItem:o=>{n=n.filter(a=>a===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const FT={geom:{Rect:LT},util:{Delay:on,Tools:W,VK:ot,URI:En,EventDispatcher:Of,Observable:Tf,I18n:wn,LocalStorage:ei,ImageUploader:t=>{const e=qy(),n=Ky(t,e);return{upload:(r,o=!0)=>n.upload(r,o?Wy(t):void 0)}}},dom:{EventUtils:mo,TreeWalker:re,TextSeeker:po,DOMUtils:Mt,ScriptLoader:ur,RangeUtils:_o,Serializer:My,StyleSheetLoader:op,ControlSelection:kb,BookmarkManager:Es,Selection:Py,Event:mo.Event},html:{Styles:oc,Entities:Rr,Node:Ie,Schema:Ar,DomParser:va,Writer:iv,Serializer:Mr},Env:St,AddOnManager:Ae,Annotator:gb,Formatter:Xy,UndoManager:Jy,EditorCommands:Vx,WindowManager:Hy,NotificationManager:zy,EditorObservable:Gx,Shortcuts:Zx,Editor:dd,FocusManager:Wb,EditorManager:Hr,DOM:Mt.DOM,ScriptLoader:ur.ScriptLoader,PluginManager:Ca,ThemeManager:Bo,ModelManager:ya,IconManager:Sl,Resource:IT,FakeClipboard:MT,trim:W.trim,isArray:W.isArray,is:W.is,toArray:W.toArray,makeMap:W.makeMap,each:W.each,map:W.map,grep:W.grep,inArray:W.inArray,extend:W.extend,walk:W.walk,resolve:W.resolve,explode:W.explode,_addCacheSuffix:W._addCacheSuffix},sk=W.extend(Hr,FT);(t=>{window.tinymce=t,window.tinyMCE=t})(sk),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(sk)}();