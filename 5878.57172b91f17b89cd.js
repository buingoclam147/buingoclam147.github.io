"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[5878],{45878:(Ae,$,f)=>{f.r($),f.d($,{StatisticEndOfDayPageComponent:()=>Ht,StatisticManagementPageComponent:()=>lt});var A=f(36895),S=f(24006),I=f(83700),m=f(88516),b=f(72506),P=f(44143),H=f(74713),q=f(48373),U=f(39840),L=f(40899),ae=f(35119),Ze=f(81664),Te=f(80992),re=f(28746),e=f(94650);let De=(()=>{class a{transform(t,n,o){return t}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"replace",type:a,pure:!0,standalone:!0}),a})();var ce=f(80750),le=f(37094),me=f(19123),se=f(77296),Q=f(15439),fe=f(80529),be=f(88001),ue=f(54004),pe=f(50494),p=f(97582),d=f(87067),G=f(43429);class y{}(0,p.gn)([(0,d.C)()],y.prototype,"timeIssue",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"ticketNum",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"bookingCode",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"airline",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"description",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"account",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"ticketPrice",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"serviceFee",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"discountNow",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"discountAfter",void 0),(0,p.gn)([(0,G.D)(()=>W),(0,d.C)()],y.prototype,"discountReceiverDetail",void 0),(0,p.gn)([(0,G.D)(()=>Y),(0,d.C)()],y.prototype,"serviceFeeReceiverDetail",void 0),(0,p.gn)([(0,G.D)(()=>z),(0,d.C)()],y.prototype,"otherFeeDetail",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"finalPrice",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"depositAmount",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"balance",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"orderNum",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"userAction",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"bookerProfit",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"totalProfit",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"baseFee",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"vatFee",void 0),(0,p.gn)([(0,d.C)()],y.prototype,"taxFee",void 0);class k{}(0,p.gn)([(0,d.C)()],k.prototype,"totalTicketPrice",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalServiceFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalDiscountNow",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalDiscountAfter",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalFinalPrice",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalDepositAmount",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalBalance",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalBookerProfit",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalProfit",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalBaseFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalVatFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalTaxFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalBookerServiceFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalAgentServiceFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalRefServiceFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalBookerOtherFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalAgentOtherFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalAirlineOtherFee",void 0),(0,p.gn)([(0,d.C)()],k.prototype,"totalOtherFee",void 0);class de{}(0,p.gn)([(0,G.D)(()=>y),(0,d.C)()],de.prototype,"listStatistics",void 0),(0,p.gn)([(0,d.C)()],de.prototype,"total",void 0);class V{}(0,p.gn)([(0,d.C)()],V.prototype,"status",void 0),(0,p.gn)([(0,G.D)(()=>de),(0,d.C)()],V.prototype,"data",void 0),(0,p.gn)([(0,d.C)()],V.prototype,"objectError",void 0),(0,p.gn)([(0,d.C)()],V.prototype,"success",void 0);class W{}(0,p.gn)([(0,d.C)()],W.prototype,"discountAgent1",void 0),(0,p.gn)([(0,d.C)()],W.prototype,"discountAgent2",void 0),(0,p.gn)([(0,d.C)()],W.prototype,"totalDiscountFee",void 0);class Y{}(0,p.gn)([(0,d.C)()],Y.prototype,"serviceFeeAgent1",void 0),(0,p.gn)([(0,d.C)()],Y.prototype,"serviceFeeAgent2",void 0),(0,p.gn)([(0,d.C)()],Y.prototype,"serviceFeeBooker",void 0),(0,p.gn)([(0,d.C)()],Y.prototype,"serviceFeeReference",void 0);class z{}(0,p.gn)([(0,d.C)()],z.prototype,"agentOtherFee",void 0),(0,p.gn)([(0,d.C)()],z.prototype,"airlineOtherFee",void 0),(0,p.gn)([(0,d.C)()],z.prototype,"bookerOtherFee",void 0),(0,p.gn)([(0,d.C)()],z.prototype,"totalOtherFee",void 0);class R{}(0,p.gn)([(0,d.C)()],R.prototype,"status",void 0),(0,p.gn)([(0,G.D)(()=>ge),(0,d.C)()],R.prototype,"data",void 0),(0,p.gn)([(0,d.C)()],R.prototype,"objectError",void 0),(0,p.gn)([(0,d.C)()],R.prototype,"errorCode",void 0),(0,p.gn)([(0,d.C)()],R.prototype,"success",void 0);class ge{}(0,p.gn)([(0,d.C)()],ge.prototype,"titleDateList",void 0),(0,p.gn)([(0,G.D)(()=>B),(0,d.C)()],ge.prototype,"detail",void 0);class B{}(0,p.gn)([(0,d.C)()],B.prototype,"userId",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"userName",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"displayName",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"agentState",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"currentAvailable",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"maxNegative",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"endOfDateAvailable",void 0),(0,p.gn)([(0,d.C)()],B.prototype,"agentDescription",void 0);const _e={headers:new fe.WM({"Content-Type":"application/json"})};let ve=(()=>{class a{constructor(t,n){this.http=t,this.appConfig=n}getStatisticBalance(t){return this.http.post(this.appConfig.apiUrl+"balance/statistics",JSON.stringify(t),_e).pipe((0,ue.U)(n=>(0,pe.yE)(V,n,{excludeExtraneousValues:!0})))}getStatisticBalanceV2(t){return this.http.post(this.appConfig.apiUrl+"balance/statistics-v2",JSON.stringify(t),_e).pipe((0,ue.U)(n=>(0,pe.yE)(V,n,{excludeExtraneousValues:!0})))}getStatisticOffEndDay(t){return this.http.post(this.appConfig.apiUrl+"balance/statistic-end-of-day",JSON.stringify(t),_e).pipe((0,ue.U)(n=>(0,pe.yE)(R,n,{excludeExtraneousValues:!0})))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(fe.eN),e.LFG(be.qB))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var he=f(16039),xe=f(62733),Fe=f(2225),X=f(97579),Ce=f(9381),Se=f(82761);function Ne(a,u){1&a&&e._UZ(0,"cf-input-hint",33),2&a&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng h\u1ee3p l\u1ec7")}function ye(a,u){if(1&a&&e._UZ(0,"img",89),2&a){const t=e.oxw().$implicit;e.Q6J("src",t.airlineLogo,e.LSH)}}function Me(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const _=function(a){return{"text-primary-1-4":a}};function Ee(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td",81),e._uU(2),e.qZA(),e.TgZ(3,"td",82)(4,"div",83),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.gotoBookingDetail(i.airline,i.bookingCode))}),e._uU(5),e.qZA()(),e.TgZ(6,"td",82),e.YNc(7,ye,1,1,"img",84),e.YNc(8,Me,2,0,"span",32),e.qZA(),e.TgZ(9,"td",82),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",85)(13,"div",86),e._uU(14),e.qZA(),e.TgZ(15,"cf-icon",87),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onExpand(i.description))}),e.qZA()(),e.TgZ(16,"td",82),e._uU(17),e.qZA(),e.TgZ(18,"td",82),e._uU(19),e.qZA(),e.TgZ(20,"td",88),e._uU(21),e.ALo(22,"replace"),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",88),e._uU(25),e.ALo(26,"replace"),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",88),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA(),e.TgZ(32,"td",88),e._uU(33),e.ALo(34,"replace"),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td",88),e._uU(37),e.ALo(38,"replace"),e.ALo(39,"number"),e.qZA(),e.TgZ(40,"td",88),e._uU(41),e.ALo(42,"replace"),e.ALo(43,"number"),e.qZA(),e.TgZ(44,"td",88),e._uU(45),e.ALo(46,"replace"),e.ALo(47,"number"),e.qZA(),e.TgZ(48,"td",88),e._uU(49),e.ALo(50,"replace"),e.ALo(51,"number"),e.qZA(),e.TgZ(52,"td",88),e._uU(53),e.ALo(54,"replace"),e.ALo(55,"number"),e.qZA(),e.TgZ(56,"td",88),e._uU(57),e.ALo(58,"replace"),e.ALo(59,"number"),e.qZA(),e.TgZ(60,"td",88),e._uU(61),e.ALo(62,"replace"),e.ALo(63,"number"),e.qZA(),e.TgZ(64,"td",88),e._uU(65),e.ALo(66,"replace"),e.ALo(67,"number"),e.qZA(),e.TgZ(68,"td",88),e._uU(69),e.ALo(70,"replace"),e.ALo(71,"number"),e.qZA(),e.TgZ(72,"td",88),e._uU(73),e.ALo(74,"replace"),e.ALo(75,"number"),e.qZA(),e.TgZ(76,"td",88),e._uU(77),e.ALo(78,"replace"),e.ALo(79,"number"),e.qZA()()}if(2&a){const t=u.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(1),e.Oqu(t.ticketNum),e.xp6(3),e.hij(" ",t.bookingCode,""),e.xp6(2),e.Q6J("ngIf",t.airline),e.xp6(1),e.Q6J("ngIf",!t.airline),e.xp6(2),e.Oqu(e.xi3(11,39,t.timeIssue,"dd/MM/yyyy HH:mm")),e.xp6(4),e.hij(" ",t.description," "),e.xp6(3),e.Oqu(t.userAction),e.xp6(2),e.Oqu(t.account),e.xp6(1),e.Q6J("ngClass",e.VKq(132,_,t.baseFee<0)),e.xp6(1),e.hij("",e.Dn7(22,42,e.lcZ(23,46,t.baseFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(134,_,t.vatFee<0)),e.xp6(1),e.Oqu(e.Dn7(26,48,e.lcZ(27,52,t.vatFee),",",".")),e.xp6(3),e.Q6J("ngClass",e.VKq(136,_,t.taxFee<0)),e.xp6(1),e.Oqu(e.Dn7(30,54,e.lcZ(31,58,t.taxFee),",",".")),e.xp6(3),e.Q6J("ngClass",e.VKq(138,_,t.ticketPrice<0)),e.xp6(1),e.hij("",e.Dn7(34,60,e.lcZ(35,64,t.ticketPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(140,_,t.serviceFeeBooker<0)),e.xp6(1),e.hij(" ",e.Dn7(38,66,e.lcZ(39,70,t.serviceFeeReceiverDetail.serviceFeeBooker),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(142,_,t.serviceFeeAgent1<0)),e.xp6(1),e.hij(" ",e.Dn7(42,72,e.lcZ(43,76,t.serviceFeeReceiverDetail.serviceFeeAgent1),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(144,_,t.serviceFeeReference<0)),e.xp6(1),e.hij(" ",e.Dn7(46,78,e.lcZ(47,82,t.serviceFeeReceiverDetail.serviceFeeReference),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(146,_,t.serviceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(50,84,e.lcZ(51,88,t.serviceFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(148,_,t.bookerOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(54,90,e.lcZ(55,94,t.otherFeeDetail.bookerOtherFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(150,_,t.airlineOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(58,96,e.lcZ(59,100,t.otherFeeDetail.airlineOtherFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(152,_,t.agentOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(62,102,e.lcZ(63,106,t.otherFeeDetail.agentOtherFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(154,_,t.totalOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(66,108,e.lcZ(67,112,t.otherFeeDetail.totalOtherFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(156,_,t.discountNow<0)),e.xp6(1),e.hij(" ",e.Dn7(70,114,e.lcZ(71,118,t.discountNow),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(158,_,t.discountAfter<0)),e.xp6(1),e.hij(" ",e.Dn7(74,120,e.lcZ(75,124,t.discountAfter),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(160,_,t.finalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(78,126,e.lcZ(79,130,t.finalPrice),",",".")," ")}}function ke(a,u){if(1&a&&(e.TgZ(0,"tfoot")(1,"tr"),e._UZ(2,"td",90)(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td"),e.TgZ(9,"td",91),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",91),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",91),e._uU(18),e.ALo(19,"replace"),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td",91),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",91),e._uU(26),e.ALo(27,"replace"),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"td",91),e._uU(30),e.ALo(31,"replace"),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td",91),e._uU(34),e.ALo(35,"replace"),e.ALo(36,"number"),e.qZA(),e.TgZ(37,"td",91),e._uU(38),e.ALo(39,"replace"),e.ALo(40,"number"),e.qZA(),e.TgZ(41,"td",91),e._uU(42),e.ALo(43,"replace"),e.ALo(44,"number"),e.qZA(),e.TgZ(45,"td",91),e._uU(46),e.ALo(47,"replace"),e.ALo(48,"number"),e.qZA(),e.TgZ(49,"td",91),e._uU(50),e.ALo(51,"replace"),e.ALo(52,"number"),e.qZA(),e.TgZ(53,"td",91),e._uU(54),e.ALo(55,"replace"),e.ALo(56,"number"),e.qZA(),e.TgZ(57,"td",91),e._uU(58),e.ALo(59,"replace"),e.ALo(60,"number"),e.qZA(),e.TgZ(61,"td",91),e._uU(62),e.ALo(63,"replace"),e.ALo(64,"number"),e.qZA(),e.TgZ(65,"td",91),e._uU(66),e.ALo(67,"replace"),e.ALo(68,"number"),e.qZA()()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("sticky",t.isMobile?null:"left"),e.xp6(7),e.Q6J("ngClass",e.VKq(121,_,t.totalOfData.totalBaseFee<0)),e.xp6(1),e.hij(" ",e.Dn7(11,31,e.lcZ(12,35,(null==t.totalOfData?null:t.totalOfData.totalBaseFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(123,_,t.totalOfData.totalVatFee<0)),e.xp6(1),e.hij(" ",e.Dn7(15,37,e.lcZ(16,41,(null==t.totalOfData?null:t.totalOfData.totalVatFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(125,_,t.totalOfData.totalTaxFee<0)),e.xp6(1),e.hij(" ",e.Dn7(19,43,e.lcZ(20,47,(null==t.totalOfData?null:t.totalOfData.totalTaxFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(127,_,t.totalOfData.totalTicketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(23,49,e.lcZ(24,53,(null==t.totalOfData?null:t.totalOfData.totalTicketPrice)||0),",","."),""),e.xp6(3),e.Q6J("ngClass",e.VKq(129,_,t.totalOfData.totalBookerServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(27,55,e.lcZ(28,59,(null==t.totalOfData?null:t.totalOfData.totalBookerServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(131,_,t.totalOfData.totalAgentServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(31,61,e.lcZ(32,65,(null==t.totalOfData?null:t.totalOfData.totalAgentServiceFee)||0),",","."),""),e.xp6(3),e.Q6J("ngClass",e.VKq(133,_,t.totalOfData.totalRefServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(35,67,e.lcZ(36,71,(null==t.totalOfData?null:t.totalOfData.totalRefServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(135,_,t.totalOfData.totalServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(39,73,e.lcZ(40,77,(null==t.totalOfData?null:t.totalOfData.totalServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(137,_,t.totalOfData.totalBookerOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(43,79,e.lcZ(44,83,(null==t.totalOfData?null:t.totalOfData.totalBookerOtherFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(139,_,t.totalOfData.totalAirlineOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(47,85,e.lcZ(48,89,(null==t.totalOfData?null:t.totalOfData.totalAirlineOtherFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(141,_,t.totalOfData.totalAgentOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(51,91,e.lcZ(52,95,(null==t.totalOfData?null:t.totalOfData.totalAgentOtherFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(143,_,t.totalOfData.totalOtherFee<0)),e.xp6(1),e.hij(" ",e.Dn7(55,97,e.lcZ(56,101,(null==t.totalOfData?null:t.totalOfData.totalOtherFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(145,_,t.totalOfData.totalDiscountNow<0)),e.xp6(1),e.hij(" ",e.Dn7(59,103,e.lcZ(60,107,(null==t.totalOfData?null:t.totalOfData.totalDiscountNow)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(147,_,t.totalOfData.totalDiscountAfter<0)),e.xp6(1),e.hij(" ",e.Dn7(63,109,e.lcZ(64,113,(null==t.totalOfData?null:t.totalOfData.totalDiscountAfter)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(149,_,t.totalOfData.totalFinalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(67,115,e.lcZ(68,119,(null==t.totalOfData?null:t.totalOfData.totalFinalPrice)||0),",",".")," ")}}const ee=function(){return{num:25}},te=function(){return{num:50}},ne=function(){return{num:75}},ie=function(){return{num:100}},oe=function(a,u,t,n){return[a,u,t,n]};function we(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",42)(1,"cf-table",43,44)(3,"thead",45)(4,"th",46)(5,"div",47),e._uU(6," S\u1ed1 v\xe9 "),e.qZA()(),e.TgZ(7,"th",48),e._uU(8,"Code"),e.qZA(),e.TgZ(9,"th",48),e._uU(10,"H\xe3ng"),e.qZA(),e.TgZ(11,"th",48),e._uU(12,"Ng\xe0y xu\u1ea5t"),e.qZA(),e.TgZ(13,"th",49),e._uU(14,"Di\u1ec5n gi\u1ea3i"),e.qZA(),e.TgZ(15,"th",48),e._uU(16,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n "),e.qZA(),e.TgZ(17,"th",48),e._uU(18,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(19,"th",50)(20,"div",51)(21,"div"),e._uU(22,"Gi\xe1 v\xe9 Net"),e.qZA(),e.TgZ(23,"span"),e._uU(24,"(1)"),e.qZA()()(),e.TgZ(25,"th",50)(26,"div",51)(27,"div"),e._uU(28,"VAT"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"(2)"),e.qZA()()(),e.TgZ(31,"th",50)(32,"div",51)(33,"div"),e._uU(34,"Thu\u1ebf"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"(3)"),e.qZA()()(),e.TgZ(37,"th",52)(38,"div",51)(39,"div"),e._uU(40,"Gi\xe1 v\xe9 full"),e.qZA(),e.TgZ(41,"span"),e._uU(42,"(4) = (1) + (2) + (3)"),e.qZA()()(),e.TgZ(43,"th",52)(44,"div",51)(45,"div"),e._uU(46,"Ph\xed d\u1ecbch v\u1ee5 - Booker"),e.qZA(),e.TgZ(47,"span"),e._uU(48,"(5)"),e.qZA()()(),e.TgZ(49,"th",52)(50,"div",51)(51,"div"),e._uU(52,"Ph\xed d\u1ecbch v\u1ee5 - \u0110\u1ea1i l\xfd"),e.qZA(),e.TgZ(53,"span"),e._uU(54,"(6)"),e.qZA()()(),e.TgZ(55,"th",52)(56,"div",51)(57,"div"),e._uU(58,"Ph\xed d\u1ecbch v\u1ee5 - Ref"),e.qZA(),e.TgZ(59,"span"),e._uU(60,"(7)"),e.qZA()()(),e.TgZ(61,"th",52)(62,"div",51)(63,"div"),e._uU(64,"T\u1ed5ng ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(65,"span"),e._uU(66,"(8) = (5) + (6) + (7)"),e.qZA()()(),e.TgZ(67,"th",52)(68,"div",51)(69,"div"),e._uU(70,"Ph\xed kh\xe1c - Booker"),e.qZA(),e.TgZ(71,"span"),e._uU(72,"(9)"),e.qZA()()(),e.TgZ(73,"th",52)(74,"div",51)(75,"div"),e._uU(76,"Ph\xed kh\xe1c - H\xe3ng"),e.qZA(),e.TgZ(77,"span"),e._uU(78,"(10)"),e.qZA()()(),e.TgZ(79,"th",52)(80,"div",51)(81,"div"),e._uU(82,"Ph\xed kh\xe1c - \u0110\u1ea1i l\xfd"),e.qZA(),e.TgZ(83,"span"),e._uU(84,"(11)"),e.qZA()()(),e.TgZ(85,"th",52)(86,"div",51)(87,"div"),e._uU(88,"T\u1ed5ng ph\xed kh\xe1c"),e.qZA(),e.TgZ(89,"span"),e._uU(90,"(12) = (9) + (10) + (11)"),e.qZA()()(),e.TgZ(91,"th",52)(92,"div",51)(93,"div"),e._uU(94,"Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay"),e.qZA(),e.TgZ(95,"span"),e._uU(96,"(13)"),e.qZA()()(),e.TgZ(97,"th",52)(98,"div",51)(99,"div"),e._uU(100,"Chi\u1ebft kh\u1ea5u tr\u1ea3 sau"),e.qZA(),e.TgZ(101,"span"),e._uU(102,"(14)"),e.qZA()()(),e.TgZ(103,"th",52)(104,"div",51)(105,"div"),e._uU(106,"Gi\xe1 cu\u1ed1i"),e.qZA(),e.TgZ(107,"span"),e._uU(108,"(15) = (4) + (8) + (12) + (13)"),e.qZA()()()(),e.TgZ(109,"tbody")(110,"tr",53)(111,"td",54)(112,"cf-input-group",55)(113,"input",56),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(114,"td",57)(115,"cf-input-group",55)(116,"input",58),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(117,"td",57)(118,"cf-input-group",55)(119,"input",59),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(120,"td",57)(121,"cf-input-group",55)(122,"input",60),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(123,"td",57)(124,"cf-input-group",55)(125,"input",61),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(126,"td",57)(127,"cf-input-group",55)(128,"input",62),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(129,"td",57)(130,"cf-input-group",55)(131,"input",63),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(132,"td",57)(133,"cf-input-group",55)(134,"input",64),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(135,"td",57)(136,"cf-input-group",55)(137,"input",65),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(138,"td",57)(139,"cf-input-group",55)(140,"input",66),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(141,"td",57)(142,"cf-input-group",55)(143,"input",67),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(144,"td",57)(145,"cf-input-group",55)(146,"input",68),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(147,"td",57)(148,"cf-input-group",55)(149,"input",69),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(150,"td",57)(151,"cf-input-group",55)(152,"input",70),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(153,"td",57)(154,"cf-input-group",55)(155,"input",71),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(156,"td",57)(157,"cf-input-group",55)(158,"input",72),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(159,"td",57)(160,"cf-input-group",55)(161,"input",73),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(162,"td",57)(163,"cf-input-group",55)(164,"input",74),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(165,"td",57)(166,"cf-input-group",55)(167,"input",75),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(168,"td",57)(169,"cf-input-group",55)(170,"input",76),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(171,"td",57)(172,"cf-input-group",55)(173,"input",77),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(174,"td",57)(175,"cf-input-group",55)(176,"input",78),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()()(),e.YNc(177,Ee,80,162,"ng-template",79),e.qZA(),e.YNc(178,ke,69,151,"tfoot",32),e.qZA()()}if(2&a){const t=e.MAs(2),n=e.oxw(2);e.xp6(1),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("hidePaginationInfo",n.isMobile)("hidePageSize",n.isMobile)("pageSizeList",e.l5B(33,oe,e.DdM(29,ee),e.DdM(30,te),e.DdM(31,ne),e.DdM(32,ie)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky",n.isMobile?null:"left")("sortName","ticketNum"),e.xp6(3),e.Q6J("sortName","bookingCode"),e.xp6(2),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","timeIssue"),e.xp6(4),e.Q6J("sortName","userAction"),e.xp6(2),e.Q6J("sortName","account"),e.xp6(20),e.Q6J("sortName","ticketPrice"),e.xp6(6),e.Q6J("sortName","serviceFeeBooker"),e.xp6(6),e.Q6J("sortName","serviceFeeAgent1"),e.xp6(6),e.Q6J("sortName","serviceFeeReference"),e.xp6(6),e.Q6J("sortName","serviceFee"),e.xp6(6),e.Q6J("sortName","bookerOtherFee"),e.xp6(6),e.Q6J("sortName","airlineOtherFee"),e.xp6(6),e.Q6J("sortName","agentOtherFee"),e.xp6(6),e.Q6J("sortName","totalOtherFee"),e.xp6(6),e.Q6J("sortName","discountNow"),e.xp6(6),e.Q6J("sortName","discountAfter"),e.xp6(6),e.Q6J("sortName","finalPrice"),e.xp6(8),e.Q6J("sticky","left"),e.xp6(66),e.Q6J("ngForOf",t.partOfdata),e.xp6(1),e.Q6J("ngIf",n.listOfData.length)}}function qe(a,u){if(1&a&&e._UZ(0,"img",89),2&a){const t=e.oxw().$implicit;e.Q6J("src",t.airlineLogo,e.LSH)}}function Pe(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Oe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td",81),e._uU(2),e.qZA(),e.TgZ(3,"td",82)(4,"div",83),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.gotoBookingDetail(i.airline,i.bookingCode))}),e._uU(5),e.qZA()(),e.TgZ(6,"td",82),e.YNc(7,qe,1,1,"img",84),e.YNc(8,Pe,2,0,"span",32),e.qZA(),e.TgZ(9,"td",82),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",85)(13,"div",86),e._uU(14),e.qZA(),e.TgZ(15,"cf-icon",87),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onExpand(i.description))}),e.qZA()(),e.TgZ(16,"td",82),e._uU(17),e.qZA(),e.TgZ(18,"td",82),e._uU(19),e.qZA(),e.TgZ(20,"td",88),e._uU(21),e.ALo(22,"replace"),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",88),e._uU(25),e.ALo(26,"replace"),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",88),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA(),e.TgZ(32,"td",88),e._uU(33),e.ALo(34,"replace"),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td",88),e._uU(37),e.ALo(38,"replace"),e.ALo(39,"number"),e.qZA()()}if(2&a){const t=u.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(1),e.hij(" ",t.ticketNum," "),e.xp6(3),e.hij(" ",t.bookingCode,""),e.xp6(2),e.Q6J("ngIf",t.airline),e.xp6(1),e.Q6J("ngIf",!t.airline),e.xp6(2),e.Oqu(e.xi3(11,19,t.timeIssue,"dd/MM/yyyy HH:mm")),e.xp6(4),e.hij(" ",t.description," "),e.xp6(3),e.Oqu(t.userAction),e.xp6(2),e.Oqu(t.account),e.xp6(1),e.Q6J("ngClass",e.VKq(52,_,t.ticketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(22,22,e.lcZ(23,26,t.ticketPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(54,_,t.serviceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(26,28,e.lcZ(27,32,t.serviceFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(56,_,t.finalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(30,34,e.lcZ(31,38,t.finalPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(58,_,t.bookerProfit<0)),e.xp6(1),e.hij(" ",e.Dn7(34,40,e.lcZ(35,44,t.bookerProfit),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(60,_,t.totalProfit<0)),e.xp6(1),e.hij(" ",e.Dn7(38,46,e.lcZ(39,50,t.totalProfit),",",".")," ")}}function Je(a,u){if(1&a&&(e.TgZ(0,"tfoot")(1,"tr"),e._UZ(2,"td",90)(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td"),e.TgZ(9,"td",91),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",91),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",91),e._uU(18),e.ALo(19,"replace"),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td",91),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",91),e._uU(26),e.ALo(27,"replace"),e.ALo(28,"number"),e.qZA()()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("sticky",t.isMobile?null:"left"),e.xp6(7),e.Q6J("ngClass",e.VKq(41,_,t.totalOfData.totalTicketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(11,11,e.lcZ(12,15,(null==t.totalOfData?null:t.totalOfData.totalTicketPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(43,_,t.totalOfData.totalServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(15,17,e.lcZ(16,21,(null==t.totalOfData?null:t.totalOfData.totalServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(45,_,t.totalOfData.totalFinalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(19,23,e.lcZ(20,27,(null==t.totalOfData?null:t.totalOfData.totalFinalPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(47,_,t.totalOfData.totalBookerProfit<0)),e.xp6(1),e.hij(" ",e.Dn7(23,29,e.lcZ(24,33,(null==t.totalOfData?null:t.totalOfData.totalBookerProfit)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(49,_,t.totalOfData.totalProfit<0)),e.xp6(1),e.hij(" ",e.Dn7(27,35,e.lcZ(28,39,(null==t.totalOfData?null:t.totalOfData.totalProfit)||0),",",".")," ")}}function Ue(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",42)(1,"cf-table",43,44)(3,"thead",45)(4,"th",46)(5,"div",47),e._uU(6," S\u1ed1 v\xe9 "),e.qZA()(),e.TgZ(7,"th",48),e._uU(8,"Code"),e.qZA(),e.TgZ(9,"th",48),e._uU(10,"H\xe3ng"),e.qZA(),e.TgZ(11,"th",48),e._uU(12,"Ng\xe0y xu\u1ea5t"),e.qZA(),e.TgZ(13,"th",49),e._uU(14,"Di\u1ec5n gi\u1ea3i"),e.qZA(),e.TgZ(15,"th",48),e._uU(16,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n "),e.qZA(),e.TgZ(17,"th",48),e._uU(18,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(19,"th",52)(20,"div",51)(21,"div"),e._uU(22,"Gi\xe1"),e.qZA(),e.TgZ(23,"span"),e._uU(24,"(1)"),e.qZA()()(),e.TgZ(25,"th",52)(26,"div",51)(27,"div"),e._uU(28,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"(2)"),e.qZA()()(),e.TgZ(31,"th",52)(32,"div",51)(33,"div"),e._uU(34,"Gi\xe1 cu\u1ed1i"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"(3) = (1) + (2)"),e.qZA()()(),e.TgZ(37,"th",52),e._uU(38," L\u1ee3i nhu\u1eadn "),e.qZA(),e.TgZ(39,"th",50),e._uU(40," T\u1ed5ng l\u1ee3i nhu\u1eadn "),e.qZA()(),e.TgZ(41,"tbody")(42,"tr",53)(43,"td",54)(44,"cf-input-group",55)(45,"input",56),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(46,"td",57)(47,"cf-input-group",55)(48,"input",58),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(49,"td",57)(50,"cf-input-group",55)(51,"input",59),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(52,"td",57)(53,"cf-input-group",55)(54,"input",60),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(55,"td",57)(56,"cf-input-group",55)(57,"input",61),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(58,"td",57)(59,"cf-input-group",55)(60,"input",62),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(61,"td",57)(62,"cf-input-group",55)(63,"input",63),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(64,"td",57)(65,"cf-input-group",55)(66,"input",67),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(67,"td",57)(68,"cf-input-group",55)(69,"input",71),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(70,"td",57)(71,"cf-input-group",55)(72,"input",78),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(73,"td",57)(74,"cf-input-group",55)(75,"input",92),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(76,"td",57)(77,"cf-input-group",55)(78,"input",93),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()()(),e.YNc(79,Oe,40,62,"ng-template",79),e.qZA(),e.YNc(80,Je,29,51,"tfoot",32),e.qZA()()}if(2&a){const t=e.MAs(2),n=e.oxw(2);e.xp6(1),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("hidePaginationInfo",n.isMobile)("hidePageSize",n.isMobile)("pageSizeList",e.l5B(25,oe,e.DdM(21,ee),e.DdM(22,te),e.DdM(23,ne),e.DdM(24,ie)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky","left")("sortName","ticketNum"),e.xp6(3),e.Q6J("sortName","bookingCode"),e.xp6(2),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","timeIssue"),e.xp6(4),e.Q6J("sortName","userAction"),e.xp6(2),e.Q6J("sortName","account"),e.xp6(2),e.Q6J("sortName","ticketPrice"),e.xp6(6),e.Q6J("sortName","serviceFee"),e.xp6(6),e.Q6J("sortName","finalPrice"),e.xp6(6),e.Q6J("sortName","bookerProfit"),e.xp6(6),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(36),e.Q6J("ngForOf",t.partOfdata),e.xp6(1),e.Q6J("ngIf",n.listOfData.length)}}function Le(a,u){if(1&a&&e._UZ(0,"img",89),2&a){const t=e.oxw().$implicit;e.Q6J("src",t.airlineLogo,e.LSH)}}function Qe(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Ke(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td",81),e._uU(2),e.qZA(),e.TgZ(3,"td",82)(4,"div",83),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.gotoBookingDetail(i.airline,i.bookingCode))}),e._uU(5),e.qZA()(),e.TgZ(6,"td",82),e.YNc(7,Le,1,1,"img",84),e.YNc(8,Qe,2,0,"span",32),e.qZA(),e.TgZ(9,"td",82),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",85)(13,"div",86),e._uU(14),e.qZA(),e.TgZ(15,"cf-icon",87),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onExpand(i.description))}),e.qZA()(),e.TgZ(16,"td",82),e._uU(17),e.qZA(),e.TgZ(18,"td",82),e._uU(19),e.qZA(),e.TgZ(20,"td",88),e._uU(21),e.ALo(22,"replace"),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",88),e._uU(25),e.ALo(26,"replace"),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",88),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA(),e.TgZ(32,"td",88),e._uU(33),e.ALo(34,"replace"),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td",88),e._uU(37),e.ALo(38,"replace"),e.ALo(39,"number"),e.qZA(),e.TgZ(40,"td",88),e._uU(41),e.ALo(42,"replace"),e.ALo(43,"number"),e.qZA(),e.TgZ(44,"td",88),e._uU(45),e.ALo(46,"replace"),e.ALo(47,"number"),e.qZA()()}if(2&a){const t=u.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(1),e.Oqu(t.ticketNum),e.xp6(3),e.hij(" ",t.bookingCode,""),e.xp6(2),e.Q6J("ngIf",t.airline),e.xp6(1),e.Q6J("ngIf",!t.airline),e.xp6(2),e.Oqu(e.xi3(11,23,t.timeIssue,"dd/MM/yyyy HH:mm")),e.xp6(4),e.hij(" ",t.description," "),e.xp6(3),e.Oqu(t.userAction),e.xp6(2),e.Oqu(t.account),e.xp6(1),e.Q6J("ngClass",e.VKq(68,_,t.ticketPrice<0)),e.xp6(1),e.hij("",e.Dn7(22,26,e.lcZ(23,30,t.ticketPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(70,_,t.serviceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(26,32,e.lcZ(27,36,t.serviceFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(72,_,t.discountNow<0)),e.xp6(1),e.hij("",e.Dn7(30,38,e.lcZ(31,42,t.discountNow),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(74,_,t.discountAfter<0)),e.xp6(1),e.hij("",e.Dn7(34,44,e.lcZ(35,48,t.discountAfter),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(76,_,t.finalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(38,50,e.lcZ(39,54,t.finalPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(78,_,t.depositAmount<0)),e.xp6(1),e.hij("",e.Dn7(42,56,e.lcZ(43,60,t.depositAmount),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(80,_,t.balance<0)),e.xp6(1),e.hij("",e.Dn7(46,62,e.lcZ(47,66,t.balance),",",".")," ")}}function Be(a,u){if(1&a&&(e.TgZ(0,"tfoot")(1,"tr"),e._UZ(2,"td",90)(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td"),e.TgZ(9,"td",91),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",91),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",91),e._uU(18),e.ALo(19,"replace"),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td",91),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",91),e._uU(26),e.ALo(27,"replace"),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"td",91),e._uU(30),e.ALo(31,"replace"),e.ALo(32,"number"),e.qZA(),e._UZ(33,"td"),e.qZA()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("sticky",t.isMobile?null:"left"),e.xp6(7),e.Q6J("ngClass",e.VKq(49,_,t.totalOfData.totalTicketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(11,13,e.lcZ(12,17,(null==t.totalOfData?null:t.totalOfData.totalTicketPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(51,_,t.totalOfData.totalServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(15,19,e.lcZ(16,23,(null==t.totalOfData?null:t.totalOfData.totalServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(53,_,t.totalOfData.totalDiscountNow<0)),e.xp6(1),e.hij(" ",e.Dn7(19,25,e.lcZ(20,29,(null==t.totalOfData?null:t.totalOfData.totalDiscountNow)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(55,_,t.totalOfData.totalDiscountAfter<0)),e.xp6(1),e.hij(" ",e.Dn7(23,31,e.lcZ(24,35,(null==t.totalOfData?null:t.totalOfData.totalDiscountAfter)||0),",","."),""),e.xp6(3),e.Q6J("ngClass",e.VKq(57,_,t.totalOfData.totalFinalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(27,37,e.lcZ(28,41,(null==t.totalOfData?null:t.totalOfData.totalFinalPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(59,_,t.totalOfData.totalDepositAmount<0)),e.xp6(1),e.hij(" ",e.Dn7(31,43,e.lcZ(32,47,(null==t.totalOfData?null:t.totalOfData.totalDepositAmount)||0),",","."),"")}}function Ie(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",42)(1,"cf-table",43,44)(3,"thead",45)(4,"th",46)(5,"div",47),e._uU(6," S\u1ed1 v\xe9 "),e.qZA()(),e.TgZ(7,"th",48),e._uU(8,"Code"),e.qZA(),e.TgZ(9,"th",48),e._uU(10,"H\xe3ng"),e.qZA(),e.TgZ(11,"th",48),e._uU(12,"Ng\xe0y xu\u1ea5t"),e.qZA(),e.TgZ(13,"th",49),e._uU(14,"Di\u1ec5n gi\u1ea3i"),e.qZA(),e.TgZ(15,"th",48),e._uU(16,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n "),e.qZA(),e.TgZ(17,"th",48),e._uU(18,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(19,"th",52)(20,"div",51)(21,"div"),e._uU(22,"Gi\xe1"),e.qZA(),e.TgZ(23,"span"),e._uU(24,"(1)"),e.qZA()()(),e.TgZ(25,"th",52)(26,"div",51)(27,"div"),e._uU(28,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"(2)"),e.qZA()()(),e.TgZ(31,"th",52)(32,"div",51)(33,"div"),e._uU(34,"Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"(3)"),e.qZA()()(),e.TgZ(37,"th",52)(38,"div",51)(39,"div"),e._uU(40,"Chi\u1ebft kh\u1ea5u tr\u1ea3 sau"),e.qZA(),e.TgZ(41,"span"),e._uU(42,"(4)"),e.qZA()()(),e.TgZ(43,"th",52)(44,"div",51)(45,"div"),e._uU(46,"Gi\xe1 cu\u1ed1i"),e.qZA(),e.TgZ(47,"span"),e._uU(48,"(5) = (1) + (2) - (3)"),e.qZA()()(),e.TgZ(49,"th",52)(50,"div",51)(51,"div"),e._uU(52,"Ti\u1ec1n n\u1ea1p"),e.qZA(),e.TgZ(53,"span"),e._uU(54,"(6)"),e.qZA()()(),e.TgZ(55,"th",52)(56,"div",51)(57,"div"),e._uU(58,"S\u1ed1 d\u01b0"),e.qZA(),e.TgZ(59,"span"),e._uU(60,"(7) = Tr\u01b0\u1edbc - (5) + (6)"),e.qZA()()()(),e.TgZ(61,"tbody")(62,"tr")(63,"td",54)(64,"cf-input-group",55)(65,"input",56),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(66,"td",57)(67,"cf-input-group",55)(68,"input",58),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(69,"td",57)(70,"cf-input-group",55)(71,"input",59),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(72,"td",57)(73,"cf-input-group",55)(74,"input",60),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(75,"td",57)(76,"cf-input-group",55)(77,"input",61),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(78,"td",57)(79,"cf-input-group",55)(80,"input",62),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(81,"td",57)(82,"cf-input-group",55)(83,"input",63),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(84,"td",57)(85,"cf-input-group",55)(86,"input",67),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(87,"td",57)(88,"cf-input-group",55)(89,"input",71),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(90,"td",57)(91,"cf-input-group",55)(92,"input",76),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(93,"td",57)(94,"cf-input-group",55)(95,"input",77),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(96,"td",57)(97,"cf-input-group",55)(98,"input",78),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(99,"td",57)(100,"cf-input-group",55)(101,"input",94),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(102,"td",57)(103,"cf-input-group",55)(104,"input",95),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()()(),e.YNc(105,Ke,48,82,"ng-template",79),e.qZA(),e.YNc(106,Be,34,61,"tfoot",32),e.qZA()()}if(2&a){const t=e.MAs(2),n=e.oxw(2);e.xp6(1),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("hidePaginationInfo",n.isMobile)("hidePageSize",n.isMobile)("pageSizeList",e.l5B(28,oe,e.DdM(24,ee),e.DdM(25,te),e.DdM(26,ne),e.DdM(27,ie)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky",n.isMobile?null:"left")("sortName","ticketNum"),e.xp6(3),e.Q6J("sortName","bookingCode"),e.xp6(2),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","timeIssue"),e.xp6(4),e.Q6J("sortName","userAction"),e.xp6(2),e.Q6J("sortName","account"),e.xp6(2),e.Q6J("sortName","ticketPrice"),e.xp6(6),e.Q6J("sortName","serviceFee"),e.xp6(6),e.Q6J("sortName","discountNow"),e.xp6(6),e.Q6J("sortName","discountAfter"),e.xp6(6),e.Q6J("sortName","finalPrice"),e.xp6(6),e.Q6J("sortName","depositAmount"),e.xp6(6),e.Q6J("sortName","balance"),e.xp6(8),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(42),e.Q6J("ngForOf",t.partOfdata),e.xp6(1),e.Q6J("ngIf",n.listOfData.length)}}function He(a,u){if(1&a&&e._UZ(0,"img",89),2&a){const t=e.oxw().$implicit;e.Q6J("src",t.airlineLogo,e.LSH)}}function Ge(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function je(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td",81),e._uU(2),e.qZA(),e.TgZ(3,"td",82)(4,"div",83),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.gotoBookingDetail(i.airline,i.bookingCode))}),e._uU(5),e.qZA()(),e.TgZ(6,"td",82),e.YNc(7,He,1,1,"img",84),e.YNc(8,Ge,2,0,"span",32),e.qZA(),e.TgZ(9,"td",82),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",85)(13,"div",86),e._uU(14),e.qZA(),e.TgZ(15,"cf-icon",87),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onExpand(i.description))}),e.qZA()(),e.TgZ(16,"td",82),e._uU(17),e.qZA(),e.TgZ(18,"td",82),e._uU(19),e.qZA(),e.TgZ(20,"td",88),e._uU(21),e.ALo(22,"replace"),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",88),e._uU(25),e.ALo(26,"replace"),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",88),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA(),e.TgZ(32,"td",88),e._uU(33),e.ALo(34,"replace"),e.ALo(35,"number"),e.qZA()()}if(2&a){const t=u.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("sticky",n.isMobile?null:"left"),e.xp6(1),e.Oqu(t.ticketNum),e.xp6(3),e.hij(" ",t.bookingCode,""),e.xp6(2),e.Q6J("ngIf",t.airline),e.xp6(1),e.Q6J("ngIf",!t.airline),e.xp6(2),e.Oqu(e.xi3(11,17,t.timeIssue,"dd/MM/yyyy HH:mm")),e.xp6(4),e.hij(" ",t.description," "),e.xp6(3),e.Oqu(t.userAction),e.xp6(2),e.Oqu(t.account),e.xp6(1),e.Q6J("ngClass",e.VKq(44,_,t.ticketPrice<0)),e.xp6(1),e.hij("",e.Dn7(22,20,e.lcZ(23,24,t.ticketPrice),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(46,_,t.serviceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(26,26,e.lcZ(27,30,t.serviceFee),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(48,_,t.finalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(30,32,e.lcZ(31,36,t.finalPrice),",","."),""),e.xp6(3),e.Q6J("ngClass",e.VKq(50,_,t.balance<0)),e.xp6(1),e.hij("",e.Dn7(34,38,e.lcZ(35,42,t.balance),",",".")," ")}}function Ve(a,u){if(1&a&&(e.TgZ(0,"tfoot")(1,"tr"),e._UZ(2,"td",90)(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td"),e.TgZ(9,"td",91),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",91),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",91),e._uU(18),e.ALo(19,"replace"),e.ALo(20,"number"),e.qZA(),e._UZ(21,"td",91),e.qZA()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("sticky",t.isMobile?null:"left"),e.xp6(7),e.Q6J("ngClass",e.VKq(26,_,t.totalOfData.totalTicketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(11,8,e.lcZ(12,12,(null==t.totalOfData?null:t.totalOfData.totalTicketPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(28,_,t.totalOfData.totalServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(15,14,e.lcZ(16,18,(null==t.totalOfData?null:t.totalOfData.totalServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(30,_,t.totalOfData.totalFinalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(19,20,e.lcZ(20,24,(null==t.totalOfData?null:t.totalOfData.totalFinalPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(32,_,t.totalOfData.totalBalance<0))}}function Re(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",42)(1,"cf-table",43,44)(3,"thead",45)(4,"th",46)(5,"div",47),e._uU(6," S\u1ed1 v\xe9 "),e.qZA()(),e.TgZ(7,"th",48),e._uU(8,"Code"),e.qZA(),e.TgZ(9,"th",48),e._uU(10,"H\xe3ng"),e.qZA(),e.TgZ(11,"th",48),e._uU(12,"Ng\xe0y xu\u1ea5t"),e.qZA(),e.TgZ(13,"th",49),e._uU(14,"Di\u1ec5n gi\u1ea3i"),e.qZA(),e.TgZ(15,"th",48),e._uU(16,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n "),e.qZA(),e.TgZ(17,"th",48),e._uU(18,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(19,"th",52)(20,"div",51)(21,"div"),e._uU(22,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(23,"span"),e._uU(24,"(1)"),e.qZA()()(),e.TgZ(25,"th",52)(26,"div",51)(27,"div"),e._uU(28,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"(2)"),e.qZA()()(),e.TgZ(31,"th",52)(32,"div",51)(33,"div"),e._uU(34,"Gi\xe1 cu\u1ed1i"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"(3) = (1) + (2)"),e.qZA()()(),e.TgZ(37,"th",52)(38,"div",51)(39,"div"),e._uU(40,"S\u1ed1 d\u01b0"),e.qZA(),e.TgZ(41,"span"),e._uU(42,"(4) = Tr\u01b0\u1edbc - (3)"),e.qZA()()()(),e.TgZ(43,"tbody")(44,"tr")(45,"td",54)(46,"cf-input-group",55)(47,"input",56),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(48,"td",57)(49,"cf-input-group",55)(50,"input",58),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(51,"td",57)(52,"cf-input-group",55)(53,"input",59),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(54,"td",57)(55,"cf-input-group",55)(56,"input",60),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(57,"td",57)(58,"cf-input-group",55)(59,"input",61),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(60,"td",57)(61,"cf-input-group",55)(62,"input",62),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(63,"td",57)(64,"cf-input-group",55)(65,"input",63),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(66,"td",57)(67,"cf-input-group",55)(68,"input",67),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(69,"td",57)(70,"cf-input-group",55)(71,"input",71),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(72,"td",57)(73,"cf-input-group",55)(74,"input",78),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()(),e.TgZ(75,"td",57)(76,"cf-input-group",55)(77,"input",95),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.filterChange(o))}),e.qZA()()()(),e.YNc(78,je,36,52,"ng-template",79),e.qZA(),e.YNc(79,Ve,22,34,"tfoot",32),e.qZA()()}if(2&a){const t=e.MAs(2),n=e.oxw(2);e.xp6(1),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("hidePaginationInfo",n.isMobile)("hidePageSize",n.isMobile)("pageSizeList",e.l5B(25,oe,e.DdM(21,ee),e.DdM(22,te),e.DdM(23,ne),e.DdM(24,ie)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky",n.isMobile?null:"left")("sortName","ticketNum"),e.xp6(3),e.Q6J("sortName","bookingCode"),e.xp6(2),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","timeIssue"),e.xp6(4),e.Q6J("sortName","userAction"),e.xp6(2),e.Q6J("sortName","account"),e.xp6(2),e.Q6J("sortName","ticketPrice"),e.xp6(6),e.Q6J("sortName","serviceFee"),e.xp6(6),e.Q6J("sortName","finalPrice"),e.xp6(6),e.Q6J("sortName","balance"),e.xp6(8),e.Q6J("sticky","left"),e.xp6(33),e.Q6J("ngForOf",t.partOfdata),e.xp6(1),e.Q6J("ngIf",n.listOfData.length)}}function Ye(a,u){1&a&&e._UZ(0,"div")}function ze(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"div",36),e._uU(3,"Th\u1ed1ng k\xea c\xf4ng n\u1ee3"),e.qZA(),e.TgZ(4,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.exportExcel())}),e._UZ(5,"cf-icon",38),e._uU(6," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(7,"div",39),e.YNc(8,we,179,38,"div",40),e.YNc(9,Ue,81,30,"div",40),e.YNc(10,Ie,107,33,"div",40),e.YNc(11,Re,80,30,"div",40),e.YNc(12,Ye,1,0,"div",41),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngSwitch",t.view),e.xp6(1),e.Q6J("ngSwitchCase","Admin_Accountant"),e.xp6(1),e.Q6J("ngSwitchCase","Booker"),e.xp6(1),e.Q6J("ngSwitchCase","Agent"),e.xp6(1),e.Q6J("ngSwitchCase","SubAgent")}}function $e(a,u){1&a&&(e.TgZ(0,"div",96)(1,"div",97)(2,"div"),e._UZ(3,"img",98),e.qZA(),e.TgZ(4,"div",99)(5,"div",100),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",101)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u0111i\u1ec1u ki\u1ec7n t\xecm ki\u1ebfm."),e.qZA()()()()())}function We(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"div"),e._UZ(3,"img",102),e.qZA(),e.TgZ(4,"div",99)(5,"div",100),e._uU(6,"C\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",103),e._uU(8,"Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb danh s\xe1ch c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!"),e.qZA()(),e.TgZ(9,"button",104),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSearch())}),e._UZ(10,"cf-icon",105),e._uU(11," Th\u1eed l\u1ea1i "),e.qZA()()()}}function Xe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",106)(1,"div",107)(2,"cf-select",108),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.mobileAccountChange(o))}),e.TgZ(3,"label",5),e._uU(4,"T\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(5,"div",109)(6,"label",110),e._uU(7,"Kho\u1ea3ng th\u1eddi gian"),e.qZA(),e.TgZ(8,"div",111),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=e.MAs(44);return e.KtG(o.mobileDateOptionClick(i))}),e.TgZ(9,"div",112),e._UZ(10,"cf-icon",113),e.TgZ(11,"div",114),e._uU(12,"T\xf9y ch\u1ec9nh"),e.qZA(),e._UZ(13,"cf-icon",115),e.qZA(),e.TgZ(14,"div",116),e._uU(15),e.qZA()()()(),e.TgZ(16,"div")(17,"button",117),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onReSearch())}),e._UZ(18,"cf-icon",118),e.TgZ(19,"div"),e._uU(20,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.searchForm.controls.userId.value)("data",t.accountOptions)("allowSearch",!1),e.xp6(13),e.Oqu(t.dateOptionStr)}}function et(a,u){if(1&a&&(e.TgZ(0,"cf-radio",125),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function tt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",119)(1,"div",120)(2,"cf-radio-group",121),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.tempMobileOptionSelected=o)}),e.YNc(3,et,2,2,"cf-radio",122),e.qZA()(),e.TgZ(4,"div",123)(5,"button",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=e.MAs(48);return e.KtG(o.dateOptionChange(i))}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.mobileOptionSelected),e.xp6(1),e.Q6J("ngForOf",t.dateMobileOption)}}function nt(a,u){if(1&a&&(e.TgZ(0,"cf-radio",125),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function it(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",119)(1,"div",120)(2,"cf-radio-group",121),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.mobileAccountChange(o))}),e.YNc(3,nt,2,2,"cf-radio",122),e.qZA()(),e.TgZ(4,"div",123)(5,"button",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.accountOptionChange())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.searchForm.controls.userId.value),e.xp6(1),e.Q6J("ngForOf",t.accountOptions)}}function ot(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",126)(1,"div",127)(2,"div",128),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.scrollDown())})("scrolledUp",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.scrollUp())}),e.TgZ(3,"cf-datepicker-inline",129),e.NdJ("dateSelect",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onMobileDateSelection(o,i.searchForm.controls.fromDate,i.searchForm.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",130)(5,"button",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("displayMonths",t.numOfMonth)("displayMonthsOffset",t.displayMonthsOffset)("rangeSelection",!0)("fromDate",t.searchForm.controls.fromDate.value)("startDate",t.startDate)("toDate",t.searchForm.controls.toDate.value)}}function at(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"cf-input-group",134)(1,"label",135)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"input",136),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit,h=e.oxw(2);return e.KtG(h.mobileFilterInputChange(o,r.fieldName))}),e.qZA()()}if(2&a){const t=u.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(1),e.s9C("placeholder",t.placeholder),e.Q6J("ngModel",n.filterData[t.fieldName])}}function rt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",131)(1,"div",132),e.YNc(2,at,5,3,"cf-input-group",133),e.qZA(),e.TgZ(3,"div")(4,"button",117),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.mobileFilterOk())}),e._UZ(5,"cf-icon",118),e.TgZ(6,"div"),e._uU(7,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.filterList)}}function ct(a,u){1&a&&e._UZ(0,"cf-spinner")}let lt=(()=>{class a{constructor(t,n,o,i,r,h,M,c,v,x,C,Z){this.calendar=t,this._statisticService=i,this._excelService=r,this._flightDataService=h,this._permissionService=M,this._userService=c,this._modal=v,this._bottomSheetService=x,this._detectMobileService=C,this._route=Z,this.accountOptions=[],this.dateType="TODAY",this.listOfData=[],this.pageSize=25,this.currentPage=1,this.filterData={ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",account:"",ticketPrice:"",serviceFee:"",discountNow:"",discountAfter:"",finalPrice:"",depositAmount:"",balance:"",orderNum:"",userAction:"",bookerProfit:"",totalProfit:"",baseFee:"",vatFee:"",taxFee:"",serviceFeeBooker:"",serviceFeeAgent1:"",serviceFeeReference:"",bookerOtherFee:"",airlineOtherFee:"",agentOtherFee:"",totalOtherFee:""},this.tempFilterData={ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",account:"",ticketPrice:"",serviceFee:"",discountNow:"",discountAfter:"",finalPrice:"",depositAmount:"",balance:"",orderNum:"",userAction:"",bookerProfit:"",totalProfit:"",baseFee:"",vatFee:"",taxFee:"",serviceFeeBooker:"",serviceFeeAgent1:"",serviceFeeReference:"",bookerOtherFee:"",airlineOtherFee:"",agentOtherFee:"",totalOtherFee:""},this.dataSource=[],this.state="SUCCESS",this.isLoading=!1,this.dateRangeStr="",this.isMobile=!1,this.mobileOptionSelected="today",this.tempMobileOptionSelected="today",this.tempMobileAccountSelected="",this.dateOptionStr="H\xf4m nay",this.dateMobileOption=[{value:"today",name:"H\xf4m nay"},{value:"7day",name:"7 ng\xe0y g\u1ea7n nh\u1ea5t"},{value:"90day",name:"90 ng\xe0y g\u1ea7n nh\u1ea5t"},{value:"current_month",name:"Th\xe1ng n\xe0y"},{value:"current_quarter",name:"Qu\xfd n\xe0y"},{value:"current_year",name:"N\u0103m"},{value:"custom",name:"T\xf9y ch\u1ec9nh"}],this.filterListAdmin=[{name:"S\u1ed1 v\xe9",placeholder:"Nh\u1eadp s\u1ed1 v\xe9",fieldName:"ticketNum"},{name:"Code",placeholder:"Nh\u1eadp code",fieldName:"bookingCode"},{name:"H\xe3ng",placeholder:"Nh\u1eadp h\xe3ng",fieldName:"airline"},{name:"Ng\xe0y xu\u1ea5t",placeholder:"Nh\u1eadp ng\xe0y xu\u1ea5t",fieldName:"timeIssue"},{name:"Di\u1ec5n gi\u1ea3i",placeholder:"Nh\u1eadp di\u1ec5n gi\u1ea3i",fieldName:"description"},{name:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",placeholder:"Nh\u1eadp ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",fieldName:"userAction"},{name:"Thu\u1ed9c \u0111\u1ea1i l\xfd",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"account"},{name:"Gi\xe1 v\xe9 Net",placeholder:"Nh\u1eadp gi\xe1 net",fieldName:"baseFee"},{name:"VAT",placeholder:"Nh\u1eadp vat",fieldName:"vatFee"},{name:"Thu\u1ebf",placeholder:"Nh\u1eadp vat",fieldName:"taxFee"},{name:"Gi\xe1 v\xe9 full",placeholder:"Nh\u1eadp gi\xe1 v\xe9 full",fieldName:"ticketPrice"},{name:"Ph\xed d\u1ecbch v\u1ee5 - Booker",placeholder:"Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 - Booker",fieldName:"serviceFeeBooker"},{name:"Ph\xed d\u1ecbch v\u1ee5 - \u0110\u1ea1i l\xfd",placeholder:"Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 - \u0110\u1ea1i l\xfd",fieldName:"serviceFeeAgent1"},{name:"Ph\xed d\u1ecbch v\u1ee5 - Ref",placeholder:"Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 - Ref",fieldName:"serviceFeeReference"},{name:"T\u1ed5ng ph\xed d\u1ecbch v\u1ee5",placeholder:"Nh\u1eadp t\u1ed5ng ph\xed d\u1ecbch v\u1ee5",fieldName:"serviceFee"},{name:"Ph\xed kh\xe1c - Booker",placeholder:"Nh\u1eadp ph\xed kh\xe1c - Booker",fieldName:"bookerOtherFee"},{name:"Ph\xed d\u1ecbch v\u1ee5 - H\xe3ng",placeholder:"Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 - H\xe3ng",fieldName:"airlineOtherFee"},{name:"Ph\xed kh\xe1c - \u0110\u1ea1i l\xfd",placeholder:"Nh\u1eadp ph\xed kh\xe1c - \u0110\u1ea1i l\xfd",fieldName:"agentOtherFee"},{name:"T\u1ed5ng ph\xed kh\xe1c",placeholder:"Nh\u1eadp t\u1ed5ng ph\xed kh\xe1c",fieldName:"totalOtherFee"},{name:"Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay",placeholder:"Nh\u1eadp CK tr\u1ea3 tr\u01b0\u1edbc",fieldName:"discountNow"},{name:"Chi\u1ebft kh\u1ea5u tr\u1ea3 sau",placeholder:"Nh\u1eadp CK tr\u1ea3 sau",fieldName:"discountAfter"},{name:"Gi\xe1 cu\u1ed1i",placeholder:"Nh\u1eadp gi\xe1 cu\u1ed1i",fieldName:"finalPrice"}],this.filterListBooker=[{name:"S\u1ed1 v\xe9",placeholder:"Nh\u1eadp s\u1ed1 v\xe9",fieldName:"ticketNum"},{name:"Code",placeholder:"Nh\u1eadp code",fieldName:"bookingCode"},{name:"H\xe3ng",placeholder:"Nh\u1eadp h\xe3ng",fieldName:"airline"},{name:"Ng\xe0y xu\u1ea5t",placeholder:"Nh\u1eadp ng\xe0y xu\u1ea5t",fieldName:"timeIssue"},{name:"Di\u1ec5n gi\u1ea3i",placeholder:"Nh\u1eadp di\u1ec5n gi\u1ea3i",fieldName:"description"},{name:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",placeholder:"Nh\u1eadp ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",fieldName:"userAction"},{name:"Thu\u1ed9c \u0111\u1ea1i l\xfd",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"account"},{name:"Gi\xe1",placeholder:"Nh\u1eadp gi\xe1",fieldName:"ticketPrice"},{name:"Ph\xed d\u1ecbch v\u1ee5",placeholder:"Nh\u1eadp ph\xed d\u1ecbch v\u1ee5",fieldName:"serviceFee"},{name:"Gi\xe1 cu\u1ed1i",placeholder:"Nh\u1eadp gi\xe1 cu\u1ed1i",fieldName:"finalPrice"},{name:"L\u1ee3i nhu\u1eadn",placeholder:"Nh\u1eadp l\u1ee3i nhu\u1eadn",fieldName:"bookerProfit"},{name:"T\u1ed5ng l\u1ee3i nhu\u1eadn",placeholder:"Nh\u1eadp t\u1ed5ng l\u1ee3i nhu\u1eadn",fieldName:"totalProfit"}],this.filterListAgent=[{name:"S\u1ed1 v\xe9",placeholder:"Nh\u1eadp s\u1ed1 v\xe9",fieldName:"ticketNum"},{name:"Code",placeholder:"Nh\u1eadp code",fieldName:"bookingCode"},{name:"H\xe3ng",placeholder:"Nh\u1eadp h\xe3ng",fieldName:"airline"},{name:"Ng\xe0y xu\u1ea5t",placeholder:"Nh\u1eadp ng\xe0y xu\u1ea5t",fieldName:"timeIssue"},{name:"Di\u1ec5n gi\u1ea3i",placeholder:"Nh\u1eadp di\u1ec5n gi\u1ea3i",fieldName:"description"},{name:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",placeholder:"Nh\u1eadp ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",fieldName:"userAction"},{name:"Thu\u1ed9c \u0111\u1ea1i l\xfd",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"account"},{name:"Gi\xe1",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"ticketPrice"},{name:"Ph\xed d\u1ecbch v\u1ee5",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"serviceFee"},{name:"Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"discountNow"},{name:"Chi\u1ebft kh\u1ea5u tr\u1ea3 sau",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"discountAfter"},{name:"Gi\xe1 cu\u1ed1i",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"finalPrice"},{name:"Ti\u1ec1n n\u1ea1p",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"depositAmount"},{name:"S\u1ed1 d\u01b0",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"balance"}],this.filterListSubAgent=[{name:"S\u1ed1 v\xe9",placeholder:"Nh\u1eadp s\u1ed1 v\xe9",fieldName:"ticketNum"},{name:"Code",placeholder:"Nh\u1eadp code",fieldName:"bookingCode"},{name:"H\xe3ng",placeholder:"Nh\u1eadp h\xe3ng",fieldName:"airline"},{name:"Ng\xe0y xu\u1ea5t",placeholder:"Nh\u1eadp ng\xe0y xu\u1ea5t",fieldName:"timeIssue"},{name:"Di\u1ec5n gi\u1ea3i",placeholder:"Nh\u1eadp di\u1ec5n gi\u1ea3i",fieldName:"description"},{name:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",placeholder:"Nh\u1eadp ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",fieldName:"userAction"},{name:"Thu\u1ed9c \u0111\u1ea1i l\xfd",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"account"},{name:"Gi\xe1 v\xe9",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"ticketPrice"},{name:"Ph\xed d\u1ecbch v\u1ee5",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"serviceFee"},{name:"Gi\xe1 cu\u1ed1i",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"finalPrice"},{name:"S\u1ed1 d\u01b0",placeholder:"Nh\u1eadp \u0111\u1ea1i l\xfd",fieldName:"balance"}],this.filterList=[],this.dataExportExcel=[],this.currentURL="",this.urlStatisticV2="/admin/statistic-balance-v2",this.sortChange=(F,D)=>{let g=D.map(j=>j);for(let j=0;j<F.length;j++){const E=F[j];switch(E.key){case"ticketNum":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(Number(l.ticketNum),Number(s.ticketNum)):(l,s)=>this.decreaseNumberSort(Number(l.ticketNum),Number(s.ticketNum)));break;case"bookingCode":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseAlphabetSort(l.bookingCode,s.bookingCode):(l,s)=>this.decreaseAlphabetSort(l.bookingCode,s.bookingCode));break;case"airline":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseAlphabetSort(l.airline,s.airline):(l,s)=>this.decreaseAlphabetSort(l.airline,s.airline));break;case"timeIssue":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseDateSort(l.timeIssue,s.timeIssue):(l,s)=>this.decreaseDateSort(l.timeIssue,s.timeIssue));break;case"userAction":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseAlphabetSort(l.userAction,s.userAction):(l,s)=>this.decreaseAlphabetSort(l.userAction,s.userAction));break;case"account":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseAlphabetSort(l.account,s.account):(l,s)=>this.decreaseAlphabetSort(l.account,s.account));break;case"ticketPrice":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.ticketPrice,s.ticketPrice):(l,s)=>this.decreaseNumberSort(l.ticketPrice,s.ticketPrice));break;case"serviceFeeBooker":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeBooker,s.serviceFeeReceiverDetail.serviceFeeBooker):(l,s)=>this.decreaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeBooker,s.serviceFeeReceiverDetail.serviceFeeBooker));break;case"serviceFeeAgent1":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeAgent1,s.serviceFeeReceiverDetail.serviceFeeAgent1):(l,s)=>this.decreaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeAgent1,s.serviceFeeReceiverDetail.serviceFeeAgent1));break;case"serviceFeeReference":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeReference,s.serviceFeeReceiverDetail.serviceFeeReference):(l,s)=>this.decreaseNumberSort(l.serviceFeeReceiverDetail.serviceFeeReference,s.serviceFeeReceiverDetail.serviceFeeReference));break;case"serviceFee":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.serviceFee,s.serviceFee):(l,s)=>this.decreaseNumberSort(l.serviceFee,s.serviceFee));break;case"bookerOtherFee":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.otherFeeDetail.bookerOtherFee,s.otherFeeDetail.bookerOtherFee):(l,s)=>this.decreaseNumberSort(l.otherFeeDetail.bookerOtherFee,s.otherFeeDetail.bookerOtherFee));break;case"airlineOtherFee":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.otherFeeDetail.airlineOtherFee,s.otherFeeDetail.airlineOtherFee):(l,s)=>this.decreaseNumberSort(l.otherFeeDetail.airlineOtherFee,s.otherFeeDetail.airlineOtherFee));break;case"agentOtherFee":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.otherFeeDetail.agentOtherFee,s.otherFeeDetail.agentOtherFee):(l,s)=>this.decreaseNumberSort(l.otherFeeDetail.agentOtherFee,s.otherFeeDetail.agentOtherFee));break;case"totalOtherFee":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.otherFeeDetail.totalOtherFee,s.otherFeeDetail.totalOtherFee):(l,s)=>this.decreaseNumberSort(l.otherFeeDetail.totalOtherFee,s.otherFeeDetail.totalOtherFee));break;case"discountNow":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.discountNow,s.discountNow):(l,s)=>this.decreaseNumberSort(l.discountNow,s.discountNow));break;case"discountAfter":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.discountAfter,s.discountAfter):(l,s)=>this.decreaseNumberSort(l.discountAfter,s.discountAfter));break;case"finalPrice":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.finalPrice,s.finalPrice):(l,s)=>this.decreaseNumberSort(l.finalPrice,s.finalPrice));break;case"bookerProfit":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.bookerProfit,s.bookerProfit):(l,s)=>this.decreaseNumberSort(l.bookerProfit,s.bookerProfit));break;case"totalProfit":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.totalProfit,s.totalProfit):(l,s)=>this.decreaseNumberSort(l.totalProfit,s.totalProfit));break;case"depositAmount":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.depositAmount,s.depositAmount):(l,s)=>this.decreaseNumberSort(l.depositAmount,s.depositAmount));break;case"balance":g=g.sort("ascend"===E.sort?(l,s)=>this.increaseNumberSort(l.balance,s.balance):(l,s)=>this.decreaseNumberSort(l.balance,s.balance))}}return this.dataExportExcel=g,g},this.searchChange=(F,D)=>D,this.increaseAlphabetSort=(F,D)=>F<D?-1:F>D?1:0,this.decreaseAlphabetSort=(F,D)=>F>D?-1:F<D?1:0,this.increaseNumberSort=(F,D)=>(F||(F=0),D||(D=0),F-D),this.decreaseNumberSort=(F,D)=>(F||(F=0),D||(D=0),D-F),this.increaseDateSort=(F,D)=>F.getTime()-D.getTime(),this.decreaseDateSort=(F,D)=>D.getTime()-F.getTime(),this.DEFAULT_NUM_OF_MONTH=4,this.INCREASE_OFFSET=4,this.numOfMonth=this.DEFAULT_NUM_OF_MONTH,this.displayMonthsOffset=0,this.currentDate=t.getToday(),this.isMobile=C.isMobile(),n.registerIcons([b.wvd,b.esH,b.iYu,b.$S,b.Tdu,b.jKM,b.n78,b.iK7]);const T=new Date,N=(0,ae.Z)(new Date),w=(0,Ze.Z)(new Date),K=(0,A.p6)(this.isMobile?T:N,"dd/MM/yyyy","vi-VN"),J=(0,A.p6)(this.isMobile?T:w,"dd/MM/yyyy","vi-VN");this.dateRangeStr=K+" - "+J,this.searchForm=o.group({fromDate:[this.isMobile?T:N,S.kI.required],toDate:[this.isMobile?T:w,S.kI.required],userId:[""]}),this.currentURL=Z.url,this.onSearch()}ngOnInit(){this.initAccount(),this.setView()}setView(){const t=this._permissionService.hasPermission(L.or.ViewStatisticByAdminOrAccountant),n=this._permissionService.hasPermission(L.or.ViewStatisticByBooker),o=this._permissionService.hasPermission(L.or.ViewStatisticByAgent),i=this._permissionService.hasPermission(L.or.ViewStatisticBySubAgent);t?(this.view="Admin_Accountant",this.filterList=this.filterListAdmin):n?(this.view="Booker",this.filterList=this.filterListBooker):o?(this.view="Agent",this.filterList=this.filterListAgent):i?(this.view="SubAgent",this.filterList=this.filterListSubAgent):this.view=""}initAccount(){this.accountOptions=[{name:"T\u1ea5t c\u1ea3",value:""}],this._userService.getAllAgentStatistic().subscribe({next:t=>{var n;const o=(null===(n=t.data)||void 0===n?void 0:n.map(i=>({name:i.userName,value:i.userId})))||[];this.accountOptions=o,this.accountOptions.unshift({name:"T\u1ea5t c\u1ea3",value:""})}})}onDateSelection(t,n,o,i){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),i.close(),this.startDate=n.value;const r=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=r}else{o.setValue(null),n.setValue(t);const r=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}else{n.setValue(t),o.setValue(null);const r=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}}changeValue(){this.searchForm.controls.fromDate.setValue(null),this.searchForm.controls.toDate.setValue(null)}onSearch(){if(this.searchForm.valid){this._detectMobileService.isMobile()&&this.mobileSearchBts&&this.mobileSearchBts.dismiss();const t={startDate:(0,A.p6)(this.searchForm.controls.fromDate.value,"yyyy-MM-dd","vi-VN"),endDate:(0,A.p6)(this.searchForm.controls.toDate.value,"yyyy-MM-dd","vi-VN"),userId:this.searchForm.controls.userId.value};this.isLoading=!0,(this.currentURL===this.urlStatisticV2?this._statisticService.getStatisticBalanceV2(t):this._statisticService.getStatisticBalance(t)).pipe((0,re.x)(()=>this.isLoading=!1)).subscribe({next:n=>{var o;n.data&&n.data.listStatistics.length?(this.dataSource=(null===(o=n.data.listStatistics)||void 0===o?void 0:o.map(i=>{var r,h,M,c,v,x,C,Z,T,N,w;return{timeIssue:new Date(1e3*i.timeIssue),ticketNum:i.ticketNum||"-",bookingCode:i.bookingCode||"-",airline:i.airline||"",airlineLogo:i.airline?this._flightDataService.getAirlineLogoDefault(i.airline):"",description:i.description||"-",account:i.account||"-",ticketPrice:(null==i?void 0:i.ticketPrice)||0,serviceFee:(null==i?void 0:i.serviceFee)||0,discountNow:(null==i?void 0:i.discountNow)||0,discountAfter:(null==i?void 0:i.discountAfter)||0,discountReceiverDetail:{discountAgent1:(null===(r=i.discountReceiverDetail)||void 0===r?void 0:r.discountAgent1)||0,discountAgent2:(null===(h=i.discountReceiverDetail)||void 0===h?void 0:h.discountAgent2)||0,totalDiscountFee:(null===(M=i.discountReceiverDetail)||void 0===M?void 0:M.totalDiscountFee)||0},serviceFeeReceiverDetail:{serviceFeeAgent1:(null===(c=i.serviceFeeReceiverDetail)||void 0===c?void 0:c.serviceFeeAgent1)||0,serviceFeeAgent2:(null===(v=i.serviceFeeReceiverDetail)||void 0===v?void 0:v.serviceFeeAgent2)||0,serviceFeeBooker:(null===(x=i.serviceFeeReceiverDetail)||void 0===x?void 0:x.serviceFeeBooker)||0,serviceFeeReference:(null===(C=i.serviceFeeReceiverDetail)||void 0===C?void 0:C.serviceFeeReference)||0},otherFeeDetail:{bookerOtherFee:(null===(Z=i.otherFeeDetail)||void 0===Z?void 0:Z.bookerOtherFee)||0,airlineOtherFee:(null===(T=i.otherFeeDetail)||void 0===T?void 0:T.airlineOtherFee)||0,agentOtherFee:(null===(N=i.otherFeeDetail)||void 0===N?void 0:N.agentOtherFee)||0,totalOtherFee:(null===(w=i.otherFeeDetail)||void 0===w?void 0:w.totalOtherFee)||0},finalPrice:(null==i?void 0:i.finalPrice)||0,depositAmount:(null==i?void 0:i.depositAmount)||0,balance:(null==i?void 0:i.balance)||0,orderNum:i.orderNum,userAction:i.userAction||"-",bookerProfit:i.bookerProfit||0,totalProfit:i.totalProfit||0,baseFee:(null==i?void 0:i.baseFee)||0,vatFee:(null==i?void 0:i.vatFee)||0,taxFee:(null==i?void 0:i.taxFee)||0}}))||[],this.totalOfData=n.data.total,this.state="SUCCESS"):(this.dataSource=[],this.state="EMPTY"),this.listOfData=this.dataSource.map(i=>Object.assign({},i))},error:()=>{this.state="ERROR"}})}this.searchForm.markAllAsTouched()}filterChange(t){var n;this.filterData[t.target.id]=(null===(n=t.target.value.trim())||void 0===n?void 0:n.toUpperCase())||"",this.processFilter()}processFilter(){const t=(n,o)=>this.filterData[o]?n[o]&&(n[o]+"").toUpperCase().includes(this.filterData[o]):n;this.listOfData=this.dataSource.filter(n=>t(n,"ticketNum")).filter(n=>t(n,"bookingCode")).filter(n=>t(n,"airline")).filter(n=>this.filterData.timeIssue?n.ticketNum&&(0,Te.Z)(n.timeIssue,"dd/MM/yyyy").includes(this.filterData.timeIssue):n).filter(n=>t(n,"description")).filter(n=>t(n,"userAction")).filter(n=>t(n,"account")).filter(n=>t(n,"ticketPrice")).filter(n=>t(n,"serviceFee")).filter(n=>t(n,"finalPrice")).filter(n=>t(n,"bookerProfit")).filter(n=>t(n,"totalProfit")).filter(n=>t(n,"serviceFeeBooker")).filter(n=>t(n,"serviceFeeAgent1")).filter(n=>t(n,"serviceFeeReference")).filter(n=>t(n,"bookerOtherFee")).filter(n=>t(n,"airlineOtherFee")).filter(n=>t(n,"agentOtherFee")).filter(n=>t(n,"totalOtherFee"))}checkChange(t){this.pageSize=parseInt(t)}exportExcel(){var t;const n=this.dataExportExcel.reduce((c,v)=>{var x,C,Z,T,N,w,K;return{baseFee:c.baseFee+v.baseFee,vatFee:c.vatFee+v.vatFee,taxFee:c.taxFee+v.taxFee,ticketPrice:c.ticketPrice+v.ticketPrice,serviceFeeBooker:c.serviceFeeBooker+(null===(x=v.serviceFeeReceiverDetail)||void 0===x?void 0:x.serviceFeeBooker),serviceFeeAgent1:c.serviceFeeAgent1+(null===(C=v.serviceFeeReceiverDetail)||void 0===C?void 0:C.serviceFeeAgent1)||0,serviceFeeReference:c.serviceFeeReference+(null===(Z=v.serviceFeeReceiverDetail)||void 0===Z?void 0:Z.serviceFeeReference)||0,serviceFee:c.serviceFee+v.serviceFee,bookerOtherFee:c.bookerOtherFee+(null===(T=v.otherFeeDetail)||void 0===T?void 0:T.bookerOtherFee)||0,airlineOtherFee:c.airlineOtherFee+(null===(N=v.otherFeeDetail)||void 0===N?void 0:N.airlineOtherFee)||0,agentOtherFee:c.agentOtherFee+(null===(w=v.otherFeeDetail)||void 0===w?void 0:w.agentOtherFee)||0,totalOtherFee:c.totalOtherFee+(null===(K=v.otherFeeDetail)||void 0===K?void 0:K.totalOtherFee)||0,discountNow:c.discountNow+v.discountNow,discountAfter:c.discountAfter+v.discountAfter,finalPrice:c.finalPrice+v.finalPrice}},{baseFee:0,vatFee:0,taxFee:0,ticketPrice:0,serviceFeeBooker:0,serviceFeeAgent1:0,serviceFeeReference:0,serviceFee:0,bookerOtherFee:0,airlineOtherFee:0,agentOtherFee:0,totalOtherFee:0,discountNow:0,discountAfter:0,finalPrice:0});console.log(n);const i=`ThongKeCongNo_${JSON.parse(null!==(t=localStorage.getItem("currentUser"))&&void 0!==t?t:"").data.username}`;let r=[],h=[],M=[];switch(this.view){case"Admin_Accountant":r=this.dataExportExcel.map(c=>{var v,x,C,Z,T,N,w,K,J,F;let D="";return D="vn"===(null===(v=c.airline)||void 0===v?void 0:v.toLocaleLowerCase())?c.ticketNum:"vj"===(null===(x=c.airline)||void 0===x?void 0:x.toLocaleLowerCase())?`VJA${c.bookingCode}`:"qh"===(null===(C=c.airline)||void 0===C?void 0:C.toLocaleLowerCase())?c.ticketNum:`UNT${Q(c.timeIssue).format("MMDD")}`,{ticketNum:c.ticketNum,bookingCode:c.bookingCode,airline:c.airline,nbr:D,timeIssue:(0,A.p6)(c.timeIssue,"dd/MM/yyyy","vi-VN"),description:c.description,userAction:c.userAction,account:c.account,baseFee:c.baseFee,vatFee:c.vatFee,taxFee:c.taxFee,ticketPrice:c.ticketPrice,serviceFeeBooker:null===(Z=c.serviceFeeReceiverDetail)||void 0===Z?void 0:Z.serviceFeeBooker,serviceFeeAgent1:null===(T=c.serviceFeeReceiverDetail)||void 0===T?void 0:T.serviceFeeAgent1,serviceFeeReference:null===(N=c.serviceFeeReceiverDetail)||void 0===N?void 0:N.serviceFeeReference,serviceFee:c.serviceFee,bookerOtherFee:null===(w=c.otherFeeDetail)||void 0===w?void 0:w.bookerOtherFee,airlineOtherFee:null===(K=c.otherFeeDetail)||void 0===K?void 0:K.airlineOtherFee,agentOtherFee:null===(J=c.otherFeeDetail)||void 0===J?void 0:J.agentOtherFee,totalOtherFee:null===(F=c.otherFeeDetail)||void 0===F?void 0:F.totalOtherFee,discountNow:c.discountNow,discountAfter:c.discountAfter,finalPrice:c.finalPrice}}).concat([{ticketNum:"",bookingCode:"",airline:"",nbr:"",timeIssue:"",description:"",userAction:"",account:"",baseFee:n.baseFee,vatFee:n.vatFee,taxFee:n.taxFee,ticketPrice:n.ticketPrice,serviceFeeBooker:n.serviceFeeBooker,serviceFeeAgent1:n.serviceFeeAgent1,serviceFeeReference:n.serviceFeeReference,serviceFee:n.serviceFee,bookerOtherFee:n.bookerOtherFee,airlineOtherFee:n.airlineOtherFee,agentOtherFee:n.agentOtherFee,totalOtherFee:n.totalOtherFee,discountNow:n.discountNow,discountAfter:n.discountAfter,finalPrice:n.finalPrice}]),h=["S\u1ed1 v\xe9","Code","H\xe3ng","S\u1ed1 CT","Ng\xe0y xu\u1ea5t","Di\u1ec5n gi\u1ea3i","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n","Thu\u1ed9c \u0111\u1ea1i l\xfd","Gi\xe1 v\xe9 Net \n(1)","VAT \n(2)","Thu\u1ebf \n(3)","Gi\xe1 v\xe9 full \n(4)=(1)+(2)+(3)","Ph\xed d\u1ecbch v\u1ee5 - Booker \n(5)","Ph\xed d\u1ecbch v\u1ee5 - \u0110\u1ea1i l\xfd \n(6)","Ph\xed d\u1ecbch v\u1ee5 - Ref \n(7)","T\u1ed5ng ph\xed d\u1ecbch v\u1ee5 \n(8)=(5)+(6)+(7)","Ph\xed kh\xe1c - Booker \n(9)","Ph\xed d\u1ecbch v\u1ee5 - H\xe3ng \n(10)","Ph\xed kh\xe1c - \u0110\u1ea1i l\xfd \n(11)","T\u1ed5ng ph\xed kh\xe1c \n(12)=(9)+(10)+(11)","Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay \n(13)","Chi\u1ebft kh\u1ea5u tr\u1ea3 sau \n(14)","Gi\xe1 cu\u1ed1i \n(15)=(4)+(8)+(12)+(13)"],M=[{wch:20},{wch:10},{wch:10},{wch:15},{wch:15},{wch:30},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];break;case"Booker":r=this.dataExportExcel.map(c=>({ticketNum:c.ticketNum,bookingCode:c.bookingCode,airline:c.airline,timeIssue:(0,A.p6)(c.timeIssue,"dd/MM/yyyy","vi-VN"),description:c.description,userAction:c.userAction,account:c.account,ticketPrice:c.ticketPrice,serviceFee:c.serviceFee,finalPrice:c.finalPrice,bookerProfit:c.bookerProfit,totalProfit:c.totalProfit})).concat([{ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",userAction:"",account:"",ticketPrice:n.ticketPrice,serviceFee:n.serviceFee,finalPrice:n.finalPrice,bookerProfit:n.bookerProfit,totalProfit:n.totalProfit}]),h=["S\u1ed1 v\xe9","Code","H\xe3ng","Ng\xe0y xu\u1ea5t","Di\u1ec5n gi\u1ea3i","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n","Thu\u1ed9c \u0111\u1ea1i l\xfd","Gi\xe1 \n(1)","Ph\xed d\u1ecbch v\u1ee5 \n(2)","Gi\xe1 cu\u1ed1i \n(3)=(1)+(2)","L\u1ee3i nhu\u1eadn","T\u1ed5ng l\u1ee3i nhu\u1eadn"],M=[{wch:20},{wch:10},{wch:10},{wch:15},{wch:30},{wch:20},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];break;case"Agent":r=this.dataExportExcel.map(c=>({ticketNum:c.ticketNum,bookingCode:c.bookingCode,airline:c.airline,timeIssue:(0,A.p6)(c.timeIssue,"dd/MM/yyyy","vi-VN"),description:c.description,userAction:c.userAction,account:c.account,ticketPrice:c.ticketPrice,serviceFee:c.serviceFee,discountNow:c.discountNow,discountAfter:c.discountAfter,finalPrice:c.finalPrice,depositAmount:c.depositAmount,balance:c.balance})).concat([{ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",userAction:"",account:"",ticketPrice:n.ticketPrice,serviceFee:n.serviceFee,discountNow:n.discountNow,discountAfter:n.discountAfter,finalPrice:n.finalPrice,depositAmount:n.depositAmount,balance:n.balance}]),h=["S\u1ed1 v\xe9","Code","H\xe3ng","Ng\xe0y xu\u1ea5t","Di\u1ec5n gi\u1ea3i","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n","Thu\u1ed9c \u0111\u1ea1i l\xfd","Gi\xe1 \n(1)","Ph\xed d\u1ecbch v\u1ee5 \n(2)","Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay \n(3)","Chi\u1ebft kh\u1ea5u tr\u1ea3 sau \n(4)","Gi\xe1 cu\u1ed1i \n(5)=(1)+(2)-(3)","Ti\u1ec1n n\u1ea1p \n(6)","S\u1ed1 d\u01b0 \n(7)=Tr\u01b0\u1edbc-(5)+(6)"],M=[{wch:20},{wch:10},{wch:10},{wch:15},{wch:30},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];break;case"SubAgent":r=this.dataExportExcel.map(c=>({ticketNum:c.ticketNum,bookingCode:c.bookingCode,airline:c.airline,timeIssue:(0,A.p6)(c.timeIssue,"dd/MM/yyyy","vi-VN"),description:c.description,userAction:c.userAction,account:c.account,ticketPrice:c.ticketPrice,serviceFee:c.serviceFee,finalPrice:c.finalPrice,balance:c.balance})).concat([{ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",userAction:"",account:"",ticketPrice:n.ticketPrice,serviceFee:n.serviceFee,finalPrice:n.finalPrice,balance:n.balance}]),h=["S\u1ed1 v\xe9","Code","H\xe3ng","Ng\xe0y xu\u1ea5t","Di\u1ec5n gi\u1ea3i","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n","Thu\u1ed9c \u0111\u1ea1i l\xfd","Gi\xe1 v\xe9 \n(1)","Ph\xed d\u1ecbch v\u1ee5 \n(2)","Gi\xe1 cu\u1ed1i \n(3)=(1)+(2)","S\u1ed1 d\u01b0 \n(4)=Tr\u01b0\u1edbc-(3)"],M=[{wch:20},{wch:10},{wch:10},{wch:15},{wch:30},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}]}this._excelService.exportToExcel(r,h,i,M)}onExpand(t){this._modal.open(ce.G,{description:t,title:"Di\u1ec5n gi\u1ea3i"})}onReSearch(){console.log(this.tempMobileAccountSelected),this.searchForm.controls.userId.setValue(this.tempMobileAccountSelected),this.onSearch()}openSearchBts(t){this.mobileSearchBts=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.mobileSearchBts.containerInstance._leftButtonClick.subscribe(()=>this.mobileSearchBts.dismiss())}mobileDateOptionClick(t){this.dateOptionBts=this._bottomSheetService.open(t,{headerTitle:"Kho\u1ea3ng th\u1eddi gian",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.dateOptionBts.containerInstance._leftButtonClick.subscribe(()=>this.dateOptionBts.dismiss())}openAccountBts(t){this.accountOptionBts=this._bottomSheetService.open(t,{headerTitle:"T\xe0i kho\u1ea3n",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.accountOptionBts.containerInstance._leftButtonClick.subscribe(()=>this.accountOptionBts.dismiss())}openDateOptionBts(t){this.mobileDateOptionClick(t),this.dateOptionBts.afterDismissed().subscribe(n=>{n&&this.onSearch()})}accountOptionChange(){this.accountOptionBts.dismiss(),this.onReSearch()}mobileAccountChange(t){this.tempMobileAccountSelected=t}dateOptionChange(t){var n;this.mobileOptionSelected=this.tempMobileOptionSelected;let o=new Date,i=new Date;const r=this.calendar.getToday();switch(this.tempMobileOptionSelected){case"today":o=new Date,i=new Date;break;case"7day":i=new Date,o=(0,m.we)(this.calendar.getPrev((0,m.jy)(i),"d",7));break;case"90day":i=new Date,o=(0,m.we)(this.calendar.getPrev((0,m.jy)(i),"d",90));break;case"current_month":o=new Date,o.setDate(1),i=(0,m.we)(this.calendar.getNext((0,m.jy)(o),"m",1)),i=(0,m.we)(this.calendar.getPrev((0,m.jy)(i),"d",1));break;case"current_quarter":const h=r.month;h>=1&&h<=3?(o=(0,m.we)(m.Ao.from({year:r.year,month:1,day:1})),i=(0,m.we)(m.Ao.from({year:r.year,month:3,day:31}))):h>=4&&h<=6?(o=(0,m.we)(m.Ao.from({year:r.year,month:4,day:1})),i=(0,m.we)(m.Ao.from({year:r.year,month:6,day:30}))):h>=7&&h<=9?(o=(0,m.we)(m.Ao.from({year:r.year,month:7,day:1})),i=(0,m.we)(m.Ao.from({year:r.year,month:9,day:30}))):h>=10&&h<=12&&(o=(0,m.we)(m.Ao.from({year:r.year,month:10,day:1})),i=(0,m.we)(m.Ao.from({year:r.year,month:12,day:31})));break;case"current_year":o=(0,m.we)(m.Ao.from({year:r.year,month:1,day:1})),i=(0,m.we)(m.Ao.from({year:r.year,month:12,day:31}));break;case"custom":const M=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1});M.afterDismissed().subscribe(c=>{this.displayMonthsOffset=0,this.numOfMonth=0}),M.containerInstance._leftButtonClick.subscribe(c=>{M.dismiss()}),setTimeout(()=>{this.displayMonthsOffset=this.DEFAULT_NUM_OF_MONTH})}this.searchForm.controls.fromDate.setValue(o),this.searchForm.controls.toDate.setValue(i),"custom"!=this.tempMobileOptionSelected&&(this.dateOptionStr=null===(n=this.dateMobileOption.find(h=>h.value===this.tempMobileOptionSelected))||void 0===n?void 0:n.name,this._bottomSheetService.dismiss(this.tempMobileOptionSelected))}scrollDown(){this.numOfMonth=this.numOfMonth+this.INCREASE_OFFSET}scrollUp(){this.displayMonthsOffset=this.displayMonthsOffset+this.INCREASE_OFFSET}onMobileDateSelection(t,n,o){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),this.startDate=n.value;const i=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=i}else if(n.value&&o.value&&t&&t.getTime()>o.value.getTime()){o.setValue(null),n.setValue(t);const i=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=i+" - "}else{n.setValue(t);const i=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=i+" - "}else{n.setValue(t);const i=(0,A.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=i+" - "}}onMobileDatePickerOK(){this._bottomSheetService.dismiss(),this.dateOptionBts.dismiss(this.tempMobileOptionSelected),this.dateOptionStr=this.dateRangeStr}openFilterBts(t){this.tempFilterData={ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",account:"",ticketPrice:"",serviceFee:"",discountNow:"",discountAfter:"",finalPrice:"",depositAmount:"",balance:"",orderNum:"",userAction:"",bookerProfit:"",totalProfit:"",baseFee:"",vatFee:"",taxFee:"",serviceFeeBooker:"",serviceFeeAgent1:"",serviceFeeReference:"",bookerOtherFee:"",airlineOtherFee:"",agentOtherFee:"",totalOtherFee:""};const n=this._bottomSheetService.open(t,{headerTitle:"B\u1ed9 l\u1ecdc",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});n.containerInstance._leftButtonClick.subscribe(()=>n.dismiss())}mobileFilterInputChange(t,n){this.tempFilterData[n]=t}mobileFilterOk(){this.filterData=Object.assign({},this.tempFilterData),this.processFilter(),this._bottomSheetService.dismiss()}gotoBookingDetail(t,n){this._route.navigate([`admin/booking-detail/${t}/${n}`])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.jH),e.Y36(b.KNP),e.Y36(S.qu),e.Y36(ve),e.Y36(he.x),e.Y36(xe.G),e.Y36(L.$A),e.Y36(Fe.KD),e.Y36(X.oE),e.Y36(le.a2),e.Y36(Ce.L),e.Y36(Se.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["statistic-management-page"]],hostAttrs:[1,"md:h-full","md:flex","md:flex-col","md:justify-start","md:items-stretch","!block"],standalone:!0,features:[e.jDz],decls:52,vars:20,consts:[[1,"py-4","px-[30px]","bg-white","w-full","md:hidden"],[1,"flex"],[1,"flex","mr-2"],[1,"grow",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["tabindex","-1","cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn kho\u1ea3ng th\u1eddi gian",1,"py-[7px]",3,"ngModel","click","input","ngModelChange"],["cfHint","",3,"hint",4,"ngIf"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],[1,"flex","flex-col","justify-end","w-[168px]","shrink-0"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"disabled","click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"hidden","md:flex","flex-col","py-3","px-4","gap-y-3","pr-0","bg-neutral-white","min-h-[140px]"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"hidden","!w-full","md:pr-4","md:block"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm t\xe0i kho\u1ea3n...",3,"focus"],[1,"flex","gap-x-3","overflow-x-auto","mx-1"],[1,"gap-x-1.5","items-center","border","border-neutral-gray-3","rounded-full","px-4","py-[5px]","hidden","md:flex",3,"click"],[1,"text-body-md","whitespace-nowrap"],["icon","filter_alt","size","small",1,"text-neutral-gray-5"],["icon","chevron_down","size","small",1,"text-neutral-gray-5"],[1,"py-4","px-[30px]","rounded-lg","md:py-4","md:pr-0","md:pl-4","md:flex-auto","md:overflow-y-hidden"],["class","bg-neutral-white rounded-lg shadow-cf-md md:h-full",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-md md:mr-4",4,"ngIf"],["searchBts",""],["dateOptionMobile",""],["accountOptionMobile",""],["timeDatepickerBottomSheet",""],["filterBts",""],[4,"ngIf"],["cfHint","",3,"hint"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:h-full"],[1,"p-4","flex","justify-between","items-center","md:hidden"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","export","size","small",1,"mr-2.5"],[1,"md:h-full",3,"ngSwitch"],["class","md:h-full",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"md:h-full"],[1,"",3,"fnSort","fnSearch","hidePaginationInfo","hidePageSize","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap","z-[11]","top-0",3,"sticky","sortName"],[1,"min-w-[80px]"],["cf-th","",1,"whitespace-nowrap","top-0","sticky","bg-neutral-gray-1",3,"sortName"],["cf-th","",1,"whitespace-nowrap","z-10","top-0","sticky","bg-neutral-gray-1"],["cf-th","",1,"whitespace-nowrap","top-0","sticky","bg-neutral-gray-1","flex-col"],[1,"flex-col"],["cf-th","",1,"whitespace-nowrap","top-0","sticky","bg-neutral-gray-1","flex-col",3,"sortName"],[1,"md:hidden"],["cf-td","",1,"py-2","px-1","!bg-neutral-white",3,"sticky"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","ticketNum",3,"input"],[1,"py-2","px-1"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","bookingCode",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","airline",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","timeIssue",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","description",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","userAction",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","account",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","baseFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","vatFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","taxFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","ticketPrice",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","serviceFeeBooker",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","serviceFeeAgent1",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","serviceFeeReference",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","serviceFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","bookerOtherFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","airlineOtherFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","agentOtherFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","totalOtherFee",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","discountNow",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","discountAfter",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","finalPrice",3,"input"],["ngFor","",3,"ngForOf"],[1,"border-b","border-neutral-gray-1"],["cf-td","",1,"py-2","px-3","text-body-sm","!bg-neutral-white","whitespace-nowrap",3,"sticky"],["cf-td","",1,"py-2","px-3","text-body-sm"],[1,"text-espressive-sm","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"click"],["class","w-12 h-6 object-contain",3,"src",4,"ngIf"],["cf-td","",1,"py-2","px-3","text-body-sm","group","relative"],[1,"w-[170px]","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],["icon","expand","size","small",1,"group-hover:block","hidden","text-body-sm","absolute","right-0","top-0","cursor-pointer",3,"click"],["cf-td","",1,"py-2","px-3","text-body-sm","text-right",3,"ngClass"],[1,"w-12","h-6","object-contain",3,"src"],["cf-td","",1,"!bg-neutral-white",3,"sticky"],[1,"py-2","px-3","text-espressive-semibold-sm","text-right",3,"ngClass"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","bookerProfit",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","totalProfit",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","depositAmount",3,"input"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc","id","balance",3,"input"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:mr-4"],[1,"flex","flex-col","gap-y-8","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"],["src","assets/images/error.svg","alt",""],[1,"text-body-md-short"],["cf-button","","size","medium",3,"click"],["cfHeadIcon","","icon","refresh","size","small",1,"mr-2"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn t\xe0i kho\u1ea3n",1,"w-full","max-w-none","mr-4",3,"ngModel","data","allowSearch","ngModelChange"],[1,"flex","flex-col"],[1,"text-espressive-md","text-neutral-gray-5","mb-1.5"],[1,"border","border-neutral-gray-3","rounded","flex",3,"click"],[1,"py-2.5","px-3","flex","items-center","gap-x-2","border-r","border-r-neutral-gray-3"],["icon","circle_add","size","small"],[1,"text-body-md-short","text-neutral-gray-6"],["icon","chevron_down","size","small"],[1,"py-2.5","px-3","text-body-md-short","text-neutral-gray-6"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"],[1,"flex","flex-col","justify-between","w-full"],[1,"p-4","pb-2"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],[1,"p-4"],["cf-button","",1,"justify-center","w-full",3,"click"],["size","medium",3,"value"],[1,"flex","w-full","h-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled","scrolledUp"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"displayMonths","displayMonthsOffset","rangeSelection","fromDate","startDate","toDate","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],[1,"p-4","w-full","flex","flex-col","justify-between","gap-y-4"],[1,"flex","flex-col","gap-y-4","overflow-y-auto"],["class","!w-full",4,"ngFor","ngForOf"],[1,"!w-full"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["size","medium","cf-input","",3,"placeholder","ngModel","ngModelChange"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-input-group",3),e._UZ(4,"cf-icon",4),e.TgZ(5,"label",5),e._uU(6,"Kho\u1ea3ng th\u1eddi gian"),e.qZA(),e.TgZ(7,"input",6),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(10);return e.KtG(r.open())})("input",function(){return n.changeValue()})("ngModelChange",function(r){return n.dateRangeStr=r}),e.qZA(),e.YNc(8,Ne,1,1,"cf-input-hint",7),e.qZA(),e.TgZ(9,"input",8,9),e.NdJ("dateSelect",function(r){e.CHM(o);const h=e.MAs(10);return e.KtG(n.onDateSelection(r,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,h))}),e.qZA()(),e.TgZ(11,"cf-select",10)(12,"label",5),e._uU(13,"T\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return n.onSearch()}),e._UZ(16,"cf-icon",13),e._uU(17," T\xecm ki\u1ebfm "),e.qZA()()()(),e.TgZ(18,"div",14)(19,"div",15),e._uU(20,"Th\u1ed1ng k\xea c\xf4ng n\u1ee3"),e.qZA(),e.TgZ(21,"cf-input-group",16),e._UZ(22,"cf-icon",17),e.TgZ(23,"input",18),e.NdJ("focus",function(){e.CHM(o);const r=e.MAs(42);return e.KtG(n.openSearchBts(r))}),e.qZA()(),e.TgZ(24,"div",19)(25,"div",20),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(50);return e.KtG(n.openFilterBts(r))}),e.TgZ(26,"div",21),e._uU(27,"B\u1ed9 l\u1ecdc"),e.qZA(),e._UZ(28,"cf-icon",22),e.qZA(),e.TgZ(29,"div",20),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(44);return e.KtG(n.openDateOptionBts(r))}),e.TgZ(30,"div",21),e._uU(31),e.qZA(),e._UZ(32,"cf-icon",23),e.qZA(),e.TgZ(33,"div",20),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(46);return e.KtG(n.openAccountBts(r))}),e.TgZ(34,"div",21),e._uU(35,"T\xe0i kho\u1ea3n"),e.qZA(),e._UZ(36,"cf-icon",23),e.qZA()()(),e.TgZ(37,"div",24),e.YNc(38,ze,13,5,"div",25),e.YNc(39,$e,12,0,"div",26),e.YNc(40,We,12,0,"div",26),e.qZA(),e.YNc(41,Xe,21,4,"ng-template",null,27,e.W1O),e.YNc(43,tt,7,2,"ng-template",null,28,e.W1O),e.YNc(45,it,7,2,"ng-template",null,29,e.W1O),e.YNc(47,ot,7,13,"ng-template",null,30,e.W1O),e.YNc(49,rt,8,1,"ng-template",null,31,e.W1O),e.YNc(51,ct,1,0,"cf-spinner",32)}2&t&&(e.xp6(3),e.Q6J("status",n.searchForm.invalid?"error":"default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(1),e.Q6J("ngIf",n.searchForm.invalid),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.userId)("data",n.accountOptions)("allowSearch",!0),e.xp6(4),e.Q6J("disabled",n.searchForm.invalid),e.xp6(16),e.Oqu(n.dateOptionStr),e.xp6(7),e.Q6J("ngIf","SUCCESS"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(1),e.Q6J("ngIf","ERROR"===n.state),e.xp6(11),e.Q6J("ngIf",n.isLoading))},dependencies:[S.u5,S.Fj,S.JJ,S.On,S.UX,S.oH,P.j$,P.ND,P.BN,P.v2,H.q,A.ez,A.mk,A.sg,A.O5,A.RF,A.n9,A.ED,A.JJ,A.uU,b.AxE,b.Sm8,m.Cs,I.N8,I.Xq,q.rC,q.E_,q.zs,q.qS,De,U.OR,le.DW,me.T,me.o,se.Rq,se.Ry,m._o],encapsulation:2}),a})();var st=f(24513),ut=f(31387),pt=f(64287),dt=f(62331);function gt(a,u){1&a&&e._UZ(0,"cf-input-hint",20),2&a&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function _t(a,u){if(1&a&&e._UZ(0,"img",49),2&a){const t=e.oxw().$implicit;e.Q6J("src",t.airlineLogo,e.LSH)}}function ht(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const O=function(a){return{"text-primary-1-4":a}};function mt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",41)(1,"td",42),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e.YNc(6,_t,1,1,"img",44),e.YNc(7,ht,2,0,"span",19),e.qZA(),e.TgZ(8,"td",43),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td",45)(12,"div",46),e._uU(13),e.qZA(),e.TgZ(14,"cf-icon",47),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onExpand(i.description))}),e.qZA()(),e.TgZ(15,"td",43),e._uU(16),e.qZA(),e.TgZ(17,"td",43),e._uU(18),e.qZA(),e.TgZ(19,"td",48),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"td",48),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",48),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",48),e._uU(29),e.ALo(30,"number"),e.qZA(),e.TgZ(31,"td",48),e._uU(32),e.ALo(33,"number"),e.qZA(),e.TgZ(34,"td",48),e._uU(35),e.ALo(36,"number"),e.qZA(),e.TgZ(37,"td",48),e._uU(38),e.ALo(39,"number"),e.qZA()()}if(2&a){const t=u.$implicit;e.xp6(1),e.Q6J("sticky","left"),e.xp6(1),e.hij(" ",t.ticketNum||"-"," "),e.xp6(2),e.Oqu(t.bookingCode||"-"),e.xp6(2),e.Q6J("ngIf",t.airline),e.xp6(1),e.Q6J("ngIf",!t.airline),e.xp6(2),e.hij(" ",t.timeIssue?e.xi3(10,23,t.timeIssue,"dd/MM/yyyy HH:mm"):"-"," "),e.xp6(4),e.hij(" ",t.description||"-"," "),e.xp6(3),e.Oqu(t.userAction||"-"),e.xp6(2),e.Oqu(t.account||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(40,O,t.ticketPrice<0)),e.xp6(1),e.hij(" ",e.lcZ(21,26,t.ticketPrice)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(42,O,t.serviceFee<0)),e.xp6(1),e.hij(" ",e.lcZ(24,28,t.serviceFee)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(44,O,t.discountNow<0)),e.xp6(1),e.hij(" ",e.lcZ(27,30,t.discountNow)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(46,O,t.discountAfter<0)),e.xp6(1),e.hij("",e.lcZ(30,32,t.discountAfter)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(48,O,t.finalPrice<0)),e.xp6(1),e.hij(" ",e.lcZ(33,34,t.finalPrice)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(50,O,t.depositAmount<0)),e.xp6(1),e.hij("",e.lcZ(36,36,t.depositAmount)," "),e.xp6(2),e.Q6J("ngClass",e.VKq(52,O,t.balance<0)),e.xp6(1),e.hij("",e.lcZ(39,38,t.balance)," ")}}function ft(a,u){if(1&a&&(e.TgZ(0,"tfoot")(1,"tr"),e._UZ(2,"td",50)(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td"),e.TgZ(9,"td",51),e._uU(10),e.ALo(11,"replace"),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",51),e._uU(14),e.ALo(15,"replace"),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",51),e._uU(18),e.ALo(19,"replace"),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td",51),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",51),e._uU(26),e.ALo(27,"replace"),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"td",51),e._uU(30),e.ALo(31,"replace"),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td",51),e._uU(34),e.ALo(35,"replace"),e.ALo(36,"number"),e.qZA()()()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("sticky","left"),e.xp6(7),e.Q6J("ngClass",e.VKq(57,O,t.totalOfData.totalTicketPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(11,15,e.lcZ(12,19,(null==t.totalOfData?null:t.totalOfData.totalTicketPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(59,O,t.totalOfData.totalServiceFee<0)),e.xp6(1),e.hij(" ",e.Dn7(15,21,e.lcZ(16,25,(null==t.totalOfData?null:t.totalOfData.totalServiceFee)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(61,O,t.totalOfData.totalDiscountNow<0)),e.xp6(1),e.hij(" ",e.Dn7(19,27,e.lcZ(20,31,(null==t.totalOfData?null:t.totalOfData.totalDiscountNow)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(63,O,t.totalOfData.totalDiscountAfter<0)),e.xp6(1),e.hij(" ",e.Dn7(23,33,e.lcZ(24,37,(null==t.totalOfData?null:t.totalOfData.totalDiscountAfter)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(65,O,t.totalOfData.totalFinalPrice<0)),e.xp6(1),e.hij(" ",e.Dn7(27,39,e.lcZ(28,43,(null==t.totalOfData?null:t.totalOfData.totalFinalPrice)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(67,O,t.totalOfData.totalDepositAmount<0)),e.xp6(1),e.hij(" ",e.Dn7(31,45,e.lcZ(32,49,(null==t.totalOfData?null:t.totalOfData.totalDepositAmount)||0),",",".")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(69,O,t.totalOfData.totalBalance<0)),e.xp6(1),e.hij(" ",e.Dn7(35,51,e.lcZ(36,55,(null==t.totalOfData?null:t.totalOfData.totalBalance)||0),",",".")," ")}}const vt=function(){return{num:10}},xt=function(a){return[a]};function Ct(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._uU(3),e.qZA(),e.TgZ(4,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(9),i=e.oxw();return e.KtG(i.exportExcel(o.data))}),e._UZ(5,"cf-icon",25),e._uU(6," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(7,"div",26)(8,"cf-table",27,28)(10,"thead",29)(11,"th",30)(12,"div",31),e._uU(13," S\u1ed1 v\xe9 "),e.qZA()(),e.TgZ(14,"th",32),e._uU(15,"Code"),e.qZA(),e.TgZ(16,"th",32),e._uU(17,"H\xe3ng"),e.qZA(),e.TgZ(18,"th",32),e._uU(19,"Ng\xe0y xu\u1ea5t"),e.qZA(),e.TgZ(20,"th",33),e._uU(21,"Di\u1ec5n gi\u1ea3i"),e.qZA(),e.TgZ(22,"th",32),e._uU(23,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n "),e.qZA(),e.TgZ(24,"th",32),e._uU(25,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(26,"th",34)(27,"div",35)(28,"div"),e._uU(29,"Gi\xe1"),e.qZA(),e.TgZ(30,"span"),e._uU(31,"(1)"),e.qZA()()(),e.TgZ(32,"th",34)(33,"div",35)(34,"div"),e._uU(35,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(36,"span"),e._uU(37,"(2)"),e.qZA()()(),e.TgZ(38,"th",34)(39,"div",35)(40,"div"),e._uU(41,"Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay"),e.qZA(),e.TgZ(42,"span"),e._uU(43,"(3)"),e.qZA()()(),e.TgZ(44,"th",34)(45,"div",35)(46,"div"),e._uU(47,"Chi\u1ebft kh\u1ea5u tr\u1ea3 sau"),e.qZA(),e.TgZ(48,"span"),e._uU(49,"(4)"),e.qZA()()(),e.TgZ(50,"th",34)(51,"div",35)(52,"div"),e._uU(53,"Gi\xe1 cu\u1ed1i"),e.qZA(),e.TgZ(54,"span"),e._uU(55,"(5) = (1) + (2) - (3)"),e.qZA()()(),e.TgZ(56,"th",34)(57,"div",35)(58,"div"),e._uU(59,"Ti\u1ec1n n\u1ea1p"),e.qZA(),e.TgZ(60,"span"),e._uU(61,"(6)"),e.qZA()()(),e.TgZ(62,"th",34)(63,"div",35)(64,"div"),e._uU(65,"S\u1ed1 d\u01b0"),e.qZA(),e.TgZ(66,"span"),e._uU(67,"(7) = Tr\u01b0\u1edbc - (5) + (6)"),e.qZA()()()(),e.TgZ(68,"tbody")(69,"tr")(70,"td",36)(71,"cf-input-group",37)(72,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.ticketNum=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(73,"td",39)(74,"cf-input-group",37)(75,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.bookingCode=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(76,"td",39)(77,"cf-input-group",37)(78,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.airline=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(79,"td",39)(80,"cf-input-group",37)(81,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.timeIssue=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(82,"td",39)(83,"cf-input-group",37)(84,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.description=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(85,"td",39)(86,"cf-input-group",37)(87,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.userAction=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(88,"td",39)(89,"cf-input-group",37)(90,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.account=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(91,"td",39)(92,"cf-input-group",37)(93,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.ticketPrice=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(94,"td",39)(95,"cf-input-group",37)(96,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.serviceFee=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(97,"td",39)(98,"cf-input-group",37)(99,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.discountNow=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(100,"td",39)(101,"cf-input-group",37)(102,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.discountAfter=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(103,"td",39)(104,"cf-input-group",37)(105,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.finalPrice=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(106,"td",39)(107,"cf-input-group",37)(108,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.depositAmount=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(109,"td",39)(110,"cf-input-group",37)(111,"input",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()()(),e.YNc(112,mt,40,54,"ng-template",40),e.qZA(),e.YNc(113,ft,37,71,"tfoot",19),e.qZA()()()}if(2&a){const t=e.MAs(9),n=e.oxw();e.xp6(3),e.hij(" Th\u1ed1ng k\xea c\xf4ng n\u1ee3 \u0111\u1ea1i l\xfd ",null==n.agentInfo?null:n.agentInfo.username," "),e.xp6(5),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("pageSizeList",e.VKq(31,xt,e.DdM(30,vt)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky","left")("sortName","ticketNum"),e.xp6(3),e.Q6J("sortName","bookingCode"),e.xp6(2),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","timeIssue"),e.xp6(4),e.Q6J("sortName","userAction"),e.xp6(2),e.Q6J("sortName","account"),e.xp6(46),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.ticketNum),e.xp6(3),e.Q6J("ngModel",n.filterData.bookingCode),e.xp6(3),e.Q6J("ngModel",n.filterData.airline),e.xp6(3),e.Q6J("ngModel",n.filterData.timeIssue),e.xp6(3),e.Q6J("ngModel",n.filterData.description),e.xp6(3),e.Q6J("ngModel",n.filterData.userAction),e.xp6(3),e.Q6J("ngModel",n.filterData.account),e.xp6(3),e.Q6J("ngModel",n.filterData.ticketPrice),e.xp6(3),e.Q6J("ngModel",n.filterData.serviceFee),e.xp6(3),e.Q6J("ngModel",n.filterData.discountNow),e.xp6(3),e.Q6J("ngModel",n.filterData.discountAfter),e.xp6(3),e.Q6J("ngModel",n.filterData.finalPrice),e.xp6(3),e.Q6J("ngModel",n.filterData.depositAmount),e.xp6(3),e.Q6J("ngModel",n.filterData.balance),e.xp6(1),e.Q6J("ngForOf",t.partOfdata),e.xp6(1),e.Q6J("ngIf",n.listOfData.length)}}function At(a,u){1&a&&(e.TgZ(0,"div",52)(1,"div",53)(2,"div"),e._UZ(3,"img",54),e.qZA(),e.TgZ(4,"div",55)(5,"div",56),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",57)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u0111i\u1ec1u ki\u1ec7n t\xecm ki\u1ebfm."),e.qZA()()()()())}function Zt(a,u){1&a&&e._UZ(0,"cf-spinner")}let Tt=(()=>{class a{constructor(t,n,o,i,r,h,M){this.ref=t,this._modal=o,this._balanceService=i,this._flightDataService=r,this._excelService=h,this._toastService=M,this.dataSource=[],this.listOfData=[],this.invalidTimeFilter=!1,this.dateRangeStr="",this.pageSize=10,this.isLoading=!1,this.filterData={ticketNum:"",bookingCode:"",airline:"",timeIssue:"",description:"",userAction:"",account:"",ticketPrice:"",serviceFee:"",discountNow:"",discountAfter:"",finalPrice:"",depositAmount:"",balance:""},this.isEmpty=!1,this.sortChange=(x,C)=>{let Z=C.map(T=>T);for(let T=0;T<x.length;T++){const N=x[T];switch(N.key){case"ticketNum":Z=this.stringSort(Z,N,"ticketNum");break;case"timeIssue":Z=this.numberSort(Z,N,"timeIssue");break;case"bookingCode":Z=this.stringSort(Z,N,"bookingCode");break;case"airline":Z=this.stringSort(Z,N,"airline");break;case"account":Z=this.stringSort(Z,N,"account")}}return Z},this.searchChange=(x,C)=>C,this.increaseAlphabetSort=(x,C)=>x<C?-1:x>C?1:0,this.decreaseAlphabetSort=(x,C)=>x>C?-1:x<C?1:0,this.increaseNumberSort=(x,C)=>x-C,this.decreaseNumberSort=(x,C)=>C-x,n.registerIcons([b.UNF,b.esH]),this.agentInfo=t.data.agentInfo,this.startTime=t.data.startTime,this.endTime=t.data.endTime;const c=Q(this.startTime).format("DD/MM/YYYY"),v=Q(this.endTime).format("DD/MM/YYYY");this.dateRangeStr=c+" - "+v,this.getTracingBalance()}getTracingBalance(){if(this.invalidTimeFilter)return;const t={agentId:this.agentInfo.userId||"",startDate:this.startTime?Q(this.startTime).format("DD/MM/YYYY"):"",endDate:this.endTime?Q(this.endTime).format("DD/MM/YYYY"):""};this.isLoading=!0,this._balanceService.tracingBalance(t).pipe((0,re.x)(()=>this.isLoading=!1)).subscribe({next:n=>{var o,i,r;if("OK"===n.status)this.dataSource=(null===(o=n.data.listStatistics)||void 0===o?void 0:o.map(h=>Object.assign(Object.assign({},h),{ticketNum:h.ticketNum||"",bookingCode:h.bookingCode||"",airline:h.airline||"",airlineLogo:this._flightDataService.getAirlineLogoByCode(h.airline),timeIssue:1e3*h.timeIssue,description:h.description||"",userAction:h.userAction||"",account:h.account||"",ticketPrice:h.ticketPrice||0,serviceFee:h.serviceFee||0,discountNow:h.discountNow||0,discountAfter:h.discountAfter||0,finalPrice:h.finalPrice||0,depositAmount:h.depositAmount||0,balance:h.balance||0,orderNum:h.orderNum||0,subOrderNum:h.subOrderNum||0})))||[],this.totalOfData=n.data.total,this.listOfData=this.dataSource.map(h=>h),this.isEmpty=!this.listOfData.length;else{const h=(null===(r=null===(i=n.objectError)||void 0===i?void 0:i.errorDescription)||void 0===r?void 0:r.vi)||"Kh\xf4ng th\u1ec3 l\u1ea5y th\xf4ng tin c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!";this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:h,sticky:!1}),this.ref.close(!1)}},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Kh\xf4ng th\u1ec3 l\u1ea5y th\xf4ng tin c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!1}),this.ref.close(!1)}})}close(){this.ref.close(!1)}onDateSelection(t,n,o,i){if(n||o)if(n&&!o&&t&&t.getTime()>=n.getTime()){this.endTime=t,i.close(),this.startDate=n;const r=Q(t).format("DD/MM/YYYY");this.dateRangeStr+=r}else{this.startTime=t,this.endTime=null;const r=Q(t).format("DD/MM/YYYY");this.dateRangeStr=r+" - "}else{this.startTime=t,this.endTime=null;const r=Q(t).format("DD/MM/YYYY");this.dateRangeStr=r+" - "}this.invalidTimeFilter=!(this.startTime&&this.endTime)}onExpand(t){this._modal.open(ce.G,{description:t,title:"Di\u1ec5n gi\u1ea3i"})}exportExcel(t){const n=`ThongKeCongNo_${this.agentInfo.username}`;this._excelService.exportToExcel(t.map(o=>({ticketNum:o.ticketNum,bookingCode:o.bookingCode,airline:o.airline,timeIssue:o.timeIssue?Q(o.timeIssue).format("DD/MM/YYYY HH:mm"):"-",description:o.description,userAction:o.userAction,account:o.account,ticketPrice:o.ticketPrice,serviceFee:o.serviceFee,discountNow:o.discountNow,discountAfter:o.discountAfter,finalPrice:o.finalPrice,depositAmount:o.depositAmount,balance:o.balance})),["S\u1ed1 v\xe9","Code","H\xe3ng","Ng\xe0y xu\u1ea5t","Di\u1ec5n gi\u1ea3i","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n","Thu\u1ed9c \u0111\u1ea1i l\xfd","Gi\xe1","Ph\xed d\u1ecbch v\u1ee5","Chi\u1ebft kh\u1ea5u tr\u1ea3 ngay","Chi\u1ebft kh\u1ea5u tr\u1ea3 sau","Gi\xe1 cu\u1ed1i","Ti\u1ec1n n\u1ea1p","S\u1ed1 d\u01b0"],n,[{wch:20},{wch:10},{wch:10},{wch:15},{wch:30},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}])}filterChange(){this.listOfData=this.dataSource.filter(t=>{var n,o,i,r,h,M,c;const v=this.removeAccents(this.filterData.ticketNum.toLowerCase());if(!this.removeAccents(t.ticketNum.toLowerCase()).includes(v))return!1;const C=this.removeAccents(this.filterData.bookingCode.toLowerCase());if(!this.removeAccents(t.bookingCode.toLowerCase()).includes(C))return!1;const T=this.removeAccents(this.filterData.airline.toLowerCase());if(!this.removeAccents(t.airline.toLowerCase()).includes(T))return!1;const w=this.removeAccents(this.filterData.timeIssue.toLowerCase());if(!this.removeAccents(Q(t.timeIssue).format("DD/MM/YYYY").toLowerCase()).includes(w))return!1;const J=this.removeAccents(this.filterData.description.toLowerCase());if(!this.removeAccents(t.description.toLowerCase()).includes(J))return!1;const D=this.removeAccents(this.filterData.userAction.toLowerCase());if(!this.removeAccents(t.userAction.toLowerCase()).includes(D))return!1;const j=this.removeAccents(this.filterData.account.toLowerCase());if(!this.removeAccents(t.account.toLowerCase()).includes(j))return!1;const l=this.removeAccents(this.filterData.ticketPrice.toLowerCase());if(!this.removeAccents(null===(n=t.ticketPrice)||void 0===n?void 0:n.toString().toLowerCase()).includes(l))return!1;const Gt=this.removeAccents(this.filterData.serviceFee.toLowerCase());if(!this.removeAccents(null===(o=t.serviceFee)||void 0===o?void 0:o.toString().toLowerCase()).includes(Gt))return!1;const jt=this.removeAccents(this.filterData.discountNow.toLowerCase());if(!this.removeAccents(null===(i=t.discountNow)||void 0===i?void 0:i.toString().toLowerCase()).includes(jt))return!1;const Vt=this.removeAccents(this.filterData.discountAfter.toLowerCase());if(!this.removeAccents(null===(r=t.discountAfter)||void 0===r?void 0:r.toString().toLowerCase()).includes(Vt))return!1;const Rt=this.removeAccents(this.filterData.finalPrice.toLowerCase());if(!this.removeAccents(null===(h=t.finalPrice)||void 0===h?void 0:h.toString().toLowerCase()).includes(Rt))return!1;const Yt=this.removeAccents(this.filterData.depositAmount.toLowerCase());if(!this.removeAccents(null===(M=t.depositAmount)||void 0===M?void 0:M.toString().toLowerCase()).includes(Yt))return!1;const zt=this.removeAccents(this.filterData.balance.toLowerCase());return!!this.removeAccents(null===(c=t.balance)||void 0===c?void 0:c.toString().toLowerCase()).includes(zt)})}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}stringSort(t,n,o){return t.sort("ascend"===n.sort?(i,r)=>this.increaseAlphabetSort(i[o],r[o]):(i,r)=>this.decreaseAlphabetSort(i[o],r[o]))}numberSort(t,n,o){return t.sort("ascend"===n.sort?(i,r)=>this.increaseNumberSort(i[o],r[o]):(i,r)=>this.decreaseNumberSort(i[o],r[o]))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(X.gb),e.Y36(b.KNP),e.Y36(X.oE),e.Y36(pt.mO),e.Y36(xe.G),e.Y36(he.x),e.Y36(dt.BX))},a.\u0275cmp=e.Xpm({type:a,selectors:[["tracing-balance-page"]],standalone:!0,features:[e.jDz],decls:24,vars:15,consts:[[1,"w-[1200px]","max-h-[746px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"bg-white","px-[30px]","py-4","flex"],[1,"flex","gap-x-2"],[1,"grow","w-[388px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],[1,"hidden"],["cfHint","",3,"hint",4,"ngIf"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["cf-button","",1,"mt-7",3,"disabled","click"],["icon","search",1,"mr-2"],[1,"flex-auto","h-full","flex","flex-col","bg-neutral-gray-2","px-[30px]","py-5","overflow-auto"],["class","bg-white h-full flex flex-col rounded-lg overflow-hidden",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-md",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"bg-white","h-full","flex","flex-col","rounded-lg","overflow-hidden"],[1,"flex","justify-between","items-center","p-4"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","export","size","small",1,"mr-2"],[1,"flex","flex-col","h-full","overflow-auto"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap","z-[11]","top-0",3,"sticky","sortName"],[1,"min-w-[80px]"],["cf-th","",1,"whitespace-nowrap","top-0","sticky","bg-neutral-gray-1",3,"sortName"],["cf-th","",1,"whitespace-nowrap","z-10","top-0","sticky","bg-neutral-gray-1"],["cf-th","",1,"whitespace-nowrap","top-0","sticky","bg-neutral-gray-1","flex-col"],[1,"flex-col"],["cf-td","",1,"py-2","px-1","!bg-neutral-white",3,"sticky"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc",3,"ngModel","ngModelChange","input"],[1,"py-2","px-1"],["ngFor","",3,"ngForOf"],[1,"border-b","border-neutral-gray-1"],["cf-td","",1,"py-2","px-3","text-body-sm","!bg-neutral-white","whitespace-nowrap",3,"sticky"],["cf-td","",1,"py-2","px-3","text-body-sm"],["class","w-12 h-6 object-contain",3,"src",4,"ngIf"],["cf-td","",1,"py-2","px-3","text-body-sm","group","relative"],[1,"w-[170px]","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],["icon","expand","size","small",1,"group-hover:block","hidden","text-body-sm","absolute","right-0","top-0","cursor-pointer",3,"click"],["cf-td","",1,"py-2","px-3","text-body-sm","text-right",3,"ngClass"],[1,"w-12","h-6","object-contain",3,"src"],["cf-td","",1,"!bg-neutral-white",3,"sticky"],[1,"py-2","px-3","text-espressive-semibold-sm","text-right",3,"ngClass"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"flex","flex-col","gap-y-8","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2),e._uU(4,"Tra so\xe1t c\xf4ng n\u1ee3"),e.qZA(),e.TgZ(5,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"cf-input-group",6),e._UZ(9,"cf-icon",7),e.TgZ(10,"label",8),e._uU(11," Kho\u1ea3ng th\u1eddi gian "),e.qZA(),e.TgZ(12,"input",9),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(16);return e.KtG(r.open())})("ngModelChange",function(r){return n.dateRangeStr=r}),e.qZA(),e.TgZ(13,"div",10),e.YNc(14,gt,1,1,"cf-input-hint",11),e.qZA()(),e.TgZ(15,"input",12,13),e.NdJ("dateSelect",function(r){e.CHM(o);const h=e.MAs(16);return e.KtG(n.onDateSelection(r,n.startTime,n.endTime,h))}),e.qZA()(),e.TgZ(17,"button",14),e.NdJ("click",function(){return n.getTracingBalance()}),e._UZ(18,"cf-icon",15),e._uU(19," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(20,"div",16),e.YNc(21,Ct,114,33,"div",17),e.YNc(22,At,12,0,"div",18),e.qZA()(),e.YNc(23,Zt,1,0,"cf-spinner",19)}2&t&&(e.xp6(8),e.Q6J("status",n.invalidTimeFilter?"error":"default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(2),e.Q6J("ngIf",n.invalidTimeFilter),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.startTime)("toDate",n.endTime),e.xp6(2),e.Q6J("disabled",n.invalidTimeFilter),e.xp6(4),e.Q6J("ngIf",!n.isEmpty),e.xp6(1),e.Q6J("ngIf",n.isEmpty),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[A.ez,A.mk,A.sg,A.O5,A.JJ,A.uU,S.u5,S.Fj,S.JJ,S.On,b.AxE,b.Sm8,I.N8,I.Xq,P.j$,P.ND,P.BN,P.v2,m.Cs,q.rC,q.E_,q.zs,q.qS,U.OR,ut.AS],encapsulation:2}),a})();function Dt(a,u){1&a&&e._UZ(0,"cf-input-hint",16),2&a&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function bt(a,u){1&a&&e._UZ(0,"cf-input-hint",16),2&a&&e.Q6J("hint","Ch\u1ec9 h\u1ed7 tr\u1ee3 xem th\xf4ng tin trong kho\u1ea3ng 1 n\u0103m tr\u1edf v\u1ec1 tr\u01b0\u1edbc")}function Ft(a,u){1&a&&e._UZ(0,"cf-input-hint",16),2&a&&e.Q6J("hint","Ch\u1ec9 h\u1ed7 tr\u1ee3 xem th\xf4ng tin trong kho\u1ea3ng 1 n\u0103m tr\u1edf v\u1ec1 tr\u01b0\u1edbc")}function St(a,u){1&a&&e._UZ(0,"cf-input-hint",16),2&a&&e.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function Nt(a,u){if(1&a&&(e.TgZ(0,"th",38),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.xp6(1),e.Oqu(t)}}function yt(a,u){1&a&&(e.TgZ(0,"th",39),e._uU(1,"Ch\u1ee9c n\u0103ng"),e.qZA())}function Mt(a,u){1&a&&e._UZ(0,"td",40),2&a&&e.Q6J("sticky","right")}function Et(a,u){1&a&&(e.TgZ(0,"div",51),e._UZ(1,"cf-icon",52),e._uU(2," Ho\u1ea1t \u0111\u1ed9ng "),e.qZA())}function kt(a,u){1&a&&(e.TgZ(0,"div",51),e._UZ(1,"cf-icon",53),e._uU(2," Ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng "),e.qZA())}function wt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"td",54)(1,"div",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.onTracing(o))}),e._uU(2," Tra so\xe1t"),e.qZA()()}2&a&&e.Q6J("sticky","right")}function qt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",41)(1,"td",42),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43)(6,"div",44),e.YNc(7,Et,3,0,"div",45),e.YNc(8,kt,3,0,"div",45),e.qZA()(),e.TgZ(9,"td",46),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",46),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td",46),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td",46),e._uU(19),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td",46),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",46),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td",47)(28,"div",48),e._uU(29),e.qZA(),e.TgZ(30,"cf-icon",49),e.NdJ("click",function(){const i=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onExpand(i.note))}),e.qZA()(),e.YNc(31,wt,3,1,"td",50),e.qZA()}if(2&a){const t=u.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("sticky","left"),e.xp6(1),e.hij(" ",t.username," "),e.xp6(2),e.hij(" ",t.agentName," "),e.xp6(3),e.Q6J("ngIf","ACTIVE"===t.agentState),e.xp6(1),e.Q6J("ngIf","BLOCK"===t.agentState),e.xp6(2),e.hij(" ",e.lcZ(11,13,t.balance||"0")," "),e.xp6(3),e.hij(" ",e.lcZ(14,15,t.negativeFundLimit||"")," "),e.xp6(3),e.hij(" ",e.lcZ(17,17,t.balance1||"0")," "),e.xp6(3),e.hij(" ",e.lcZ(20,19,t.balance2||"0")," "),e.xp6(3),e.hij(" ",e.lcZ(23,21,t.balance3||"0")," "),e.xp6(3),e.hij(" ",e.lcZ(26,23,t.balance4||"0")," "),e.xp6(4),e.hij(" ",t.note||""," "),e.xp6(2),e.Q6J("ngIf",n.isShowTracingBalance)}}const Pt=function(){return{num:25}},Ot=function(){return{num:50}},Jt=function(){return{num:75}},Ut=function(){return{num:100}},Lt=function(a,u,t,n){return[a,u,t,n]};function Qt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19),e._uU(3,"C\xf4ng n\u1ee3 \u0111\u1ea1i l\xfd con"),e.qZA(),e.TgZ(4,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(8),i=e.oxw();return e.KtG(i.exportExcel(o.data))}),e._UZ(5,"cf-icon",21),e._uU(6," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(7,"cf-table",22,23)(9,"thead",24)(10,"th",25),e._uU(11,"M\xe3 \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(12,"th",26),e._uU(13,"T\xean \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(14,"th",26),e._uU(15,"Tr\u1ea1ng th\xe1i \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(16,"th",27),e._uU(17,"C\xf4ng n\u1ee3 hi\u1ec7n t\u1ea1i"),e.qZA(),e.TgZ(18,"th",28),e._uU(19,"H\u1ea1n m\u1ee9c \xe2m qu\u1ef9"),e.qZA(),e.YNc(20,Nt,2,1,"th",29),e.TgZ(21,"th",30),e._uU(22,"M\xf4 t\u1ea3 \u0111\u1ea1i l\xfd"),e.qZA(),e.YNc(23,yt,2,0,"th",31),e.qZA(),e.TgZ(24,"tbody")(25,"tr")(26,"td",32)(27,"cf-input-group",33)(28,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.username=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(29,"td",35)(30,"cf-input-group",33)(31,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.agentName=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(32,"td",35)(33,"cf-input-group",33)(34,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.agentState=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(35,"td",35)(36,"cf-input-group",33)(37,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(38,"td",35)(39,"cf-input-group",33)(40,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.negativeFundLimit=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(41,"td",35)(42,"cf-input-group",33)(43,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance1=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(44,"td",35)(45,"cf-input-group",33)(46,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance2=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(47,"td",35)(48,"cf-input-group",33)(49,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance3=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(50,"td",35)(51,"cf-input-group",33)(52,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance4=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(53,"td",35)(54,"cf-input-group",33)(55,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.balance5=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.TgZ(56,"td",35)(57,"cf-input-group",33)(58,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterData.note=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterChange())}),e.qZA()()(),e.YNc(59,Mt,1,1,"td",36),e.qZA(),e.YNc(60,qt,32,25,"ng-template",37),e.qZA()()()}if(2&a){const t=e.MAs(8),n=e.oxw();e.xp6(7),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("pageSizeList",e.l5B(31,Lt,e.DdM(27,Pt),e.DdM(28,Ot),e.DdM(29,Jt),e.DdM(30,Ut)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sticky","left")("sortName","username"),e.xp6(2),e.Q6J("sortName","agentName"),e.xp6(2),e.Q6J("sortName","agentState"),e.xp6(2),e.Q6J("sortName","balance"),e.xp6(2),e.Q6J("sortName","negativeFundLimit"),e.xp6(2),e.Q6J("ngForOf",n.balanceTitle),e.xp6(3),e.Q6J("ngIf",n.isShowTracingBalance),e.xp6(3),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.username),e.xp6(3),e.Q6J("ngModel",n.filterData.agentName),e.xp6(3),e.Q6J("ngModel",n.filterData.agentState),e.xp6(3),e.Q6J("ngModel",n.filterData.balance),e.xp6(3),e.Q6J("ngModel",n.filterData.negativeFundLimit),e.xp6(3),e.Q6J("ngModel",n.filterData.balance1),e.xp6(3),e.Q6J("ngModel",n.filterData.balance2),e.xp6(3),e.Q6J("ngModel",n.filterData.balance3),e.xp6(3),e.Q6J("ngModel",n.filterData.balance4),e.xp6(3),e.Q6J("ngModel",n.filterData.balance5),e.xp6(3),e.Q6J("ngModel",n.filterData.note),e.xp6(1),e.Q6J("ngIf",n.isShowTracingBalance),e.xp6(1),e.Q6J("ngForOf",t.partOfdata)}}function Kt(a,u){1&a&&(e.TgZ(0,"div",17)(1,"div",56)(2,"div"),e._UZ(3,"img",57),e.qZA(),e.TgZ(4,"div",58)(5,"div",59),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",60)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i t\xecm ki\u1ebfm."),e.qZA()()()()())}function Bt(a,u){if(1&a&&(e.TgZ(0,"div",61)(1,"div",62)(2,"div"),e._UZ(3,"img",63),e.qZA(),e.TgZ(4,"div",64)(5,"div",65),e._uU(6,"R\u1ea5t ti\u1ebfc, \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",66)(8,"p"),e._uU(9,"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra khi th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i v\xe0 th\u1eed l\u1ea1i sau. "),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()()()),2&a){const t=e.oxw();e.xp6(11),e.hij("(M\xe3 l\u1ed7i: ",t.errorCode,")")}}function It(a,u){1&a&&e._UZ(0,"cf-spinner")}let Ht=(()=>{class a{constructor(t,n,o,i,r,h,M,c){this._excelService=n,this._statisticService=o,this._cfIconRegister=i,this._calendar=r,this._modal=h,this._permissionService=M,this._mobileDetectService=c,this.errorCode="",this.agentStateOption=[{name:"T\u1ea5t c\u1ea3",value:"ALL_STATE"},{name:"Ho\u1ea1t \u0111\u1ed9ng",value:"ACTIVE"},{name:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng",value:"BLOCK"}],this.pageSize=25,this.currentPage=1,this.listOfData=[],this.dataSource=[],this.filterData={username:"",agentName:"",agentState:"",balance:"",negativeFundLimit:"",balance1:"",balance2:"",balance3:"",balance4:"",balance5:"",note:""},this.isLoading=!1,this.balanceTitle=["N/A","N/A","N/A","N/A"],this.numberOfDateTracing=2,this.isShowTracingBalance=this._permissionService.hasPermission(L.or.TracingBalance)&&!this._mobileDetectService.isMobile(),this.searchChange=(v,x)=>x,this.sortChange=(v,x)=>{let C=x.map(Z=>Z);for(let Z=0;Z<v.length;Z++){const T=v[Z];switch(T.key){case"username":C=this.stringSort(C,T,"username");break;case"agentName":C=this.stringSort(C,T,"agentName");break;case"agentState":C=this.stringSort(C,T,"agentState");break;case"balance":C=this.numberSort(C,T,"balance");break;case"negativeFundLimit":C=this.numberSort(C,T,"negativeFundLimit")}}return C},this.increaseAlphabetSort=(v,x)=>v<x?-1:v>x?1:0,this.decreaseAlphabetSort=(v,x)=>v>x?-1:v<x?1:0,this.increaseNumberSort=(v,x)=>v-x,this.decreaseNumberSort=(v,x)=>x-v,i.registerIcons([b.iYu,b.esH,b.PcQ,b.whL,b.Tdu]),this.searchForm=t.group({endDate:[new Date,S.kI.required],agentState:["ALL_STATE",S.kI.required]}),this.currentDate=r.getToday(),this.minDate=r.getPrev(this.currentDate,"y",1)}ngOnInit(){this.search()}search(){if(this.searchForm.valid){const t={endDate:(0,A.p6)(this.searchForm.controls.endDate.value,"dd/MM/yyyy","vi-VN"),agentState:this.searchForm.controls.agentState.value};this.isLoading=!0,this._statisticService.getStatisticOffEndDay(t).pipe((0,re.x)(()=>this.isLoading=!1)).subscribe({next:n=>{n.success?(this.state="SUCCESS",n.data.titleDateList.slice(0,n.data.titleDateList.length-1).forEach((i,r)=>{this.balanceTitle[r]=Q(i,"DD/MM/YYYY").format("DD/MM")}),this.dataSource=n.data.detail.map(i=>({userId:i.userId,username:i.userName,agentName:i.displayName,agentState:i.agentState,agentStateStr:"ACTIVE"===i.agentState?"Ho\u1ea1t \u0111\u1ed9ng":"Ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng",balance:i.currentAvailable,negativeFundLimit:i.maxNegative,balance1:i.endOfDateAvailable[0]?i.endOfDateAvailable[0]:void 0,balance2:i.endOfDateAvailable[1]?i.endOfDateAvailable[1]:void 0,balance3:i.endOfDateAvailable[2]?i.endOfDateAvailable[2]:void 0,balance4:i.endOfDateAvailable[3]?i.endOfDateAvailable[3]:void 0,balance5:i.endOfDateAvailable[4]?i.endOfDateAvailable[4]:void 0,note:i.agentDescription?i.agentDescription:""})),0===this.dataSource.length&&(this.state="EMPTY"),this.listOfData=this.dataSource.map(i=>i)):(this.state="ERROR",this.errorCode=n.errorCode)},error:n=>{this.state="ERROR"}})}this.searchForm.markAllAsTouched()}exportExcel(t){const n="thong_ke_"+(0,A.p6)(new Date,"yyyy-MM-dd","vi-VN"),o=["M\xe3 \u0111\u1ea1i l\xfd","T\xean \u0111\u1ea1i l\xfd","Tr\u1ea1ng th\xe1i \u0111\u1ea1i l\xfd","C\xf4ng n\u1ee3 hi\u1ec7n t\u1ea1i","H\u1ea1n m\u1ee9c \xe2m qu\u1ef9"];o.push(...this.balanceTitle),o.push("M\xf4 t\u1ea3 \u0111\u1ea1i l\xfd"),this._excelService.exportToExcel(t.map(i=>({username:i.username,agentName:i.agentName,agentState:i.agentState,balance:i.balance,negativeFundLimit:i.negativeFundLimit,balance1:i.balance1||"0",balance2:i.balance2||"0",balance3:i.balance3||"0",balance4:i.balance4||"0",balance5:i.balance5||"0",note:i.note})),o,n,[{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}])}onExpand(t){this._modal.open(ce.G,{description:t,title:"M\xf4 t\u1ea3 \u0111\u1ea1i l\xfd"})}filterChange(){this.listOfData=this.dataSource.filter(t=>{const n=this.removeAccents(this.filterData.username.toLowerCase());if(!this.removeAccents(t.username.toLowerCase()).includes(n))return!1;const i=this.removeAccents(this.filterData.agentName.toLowerCase());if(!this.removeAccents(t.agentName.toLowerCase()).includes(i))return!1;const h=this.removeAccents(this.filterData.agentState.toLowerCase());if(!this.removeAccents(t.agentStateStr.toLowerCase()).includes(h))return!1;const c=this.removeAccents(this.filterData.balance.toLowerCase());if(c&&!this.removeAccents(t.balance.toString().toLowerCase()).includes(c))return!1;const v=this.removeAccents(this.filterData.negativeFundLimit.toLowerCase());if(v&&!this.removeAccents(t.negativeFundLimit.toString().toLowerCase()).includes(v))return!1;const x=this.removeAccents(this.filterData.balance1.toLowerCase());if(x&&!this.removeAccents(t.balance1.toString().toLowerCase()).includes(x))return!1;const C=this.removeAccents(this.filterData.balance2.toLowerCase());if(C&&!this.removeAccents(t.balance2.toString().toLowerCase()).includes(C))return!1;const Z=this.removeAccents(this.filterData.balance3.toLowerCase());if(Z&&!this.removeAccents(t.balance3.toString().toLowerCase()).includes(Z))return!1;const T=this.removeAccents(this.filterData.balance4.toLowerCase());if(T&&!this.removeAccents(t.balance4.toString().toLowerCase()).includes(T))return!1;const N=this.removeAccents(this.filterData.balance5.toLowerCase());if(N&&!this.removeAccents(t.balance5.toString().toLowerCase()).includes(N))return!1;const w=this.removeAccents(this.filterData.note.toLowerCase());return!!this.removeAccents(t.note.toLowerCase()).includes(w)})}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}stringSort(t,n,o){return t.sort("ascend"===n.sort?(i,r)=>this.increaseAlphabetSort(i[o],r[o]):(i,r)=>this.decreaseAlphabetSort(i[o],r[o]))}numberSort(t,n,o){return t.sort("ascend"===n.sort?(i,r)=>this.increaseNumberSort(i[o],r[o]):(i,r)=>this.decreaseNumberSort(i[o],r[o]))}onTracing(t){const n=this.searchForm.controls.endDate.value,o=new Date(n);o.setDate(o.getDate()-this.numberOfDateTracing),this._modal.open(Tt,{agentInfo:{userId:t.userId,username:t.username},startTime:o,endTime:n})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(S.qu),e.Y36(he.x),e.Y36(ve),e.Y36(b.KNP),e.Y36(m.jH),e.Y36(X.oE),e.Y36(L.$A),e.Y36(Ce.L))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-statistic-end-of-day-page"]],standalone:!0,features:[e.jDz],decls:24,vars:18,consts:[[1,"flex","flex-col","py-4","px-[30px]","w-full","md:py-3","md:pl-4","md:pr-0","bg-neutral-white"],[1,"flex","gap-x-[17px]","md:flex-col"],[1,"flex","grow","gap-x-4","items-start"],[1,"w-[260px]","md:flex-grow-0","md:w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"cfTooltip","placement","maxDate","minDate","displayMonths","formControl","input"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["textField","name","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch"],["cf-button","","type","secondary",1,"mt-7",3,"click"],["icon","search",1,"mr-2"],[1,"py-4","px-[30px]","rounded-lg"],["class","bg-neutral-white rounded-lg shadow-cf-md",4,"ngIf"],["class","w-full h-full",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","export",1,"mr-2"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap",3,"sticky","sortName"],["cf-th","",1,"whitespace-nowrap",3,"sortName"],["cf-th","",1,"whitespace-nowrap","!text-right",3,"sortName"],["cf-th","",1,"whitespace-nowrap","text-right",3,"sortName"],["cf-th","","class","whitespace-nowrap text-right",4,"ngFor","ngForOf"],["cf-th","",1,"whitespace-nowrap"],["cf-th","","sticky","right","class","whitespace-nowrap",4,"ngIf"],["cf-td","",1,"py-2","px-1","!bg-neutral-white",3,"sticky"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc",3,"ngModel","ngModelChange","input"],["cf-td","",1,"py-2","px-1","!bg-neutral-white"],["cf-td","",3,"sticky",4,"ngIf"],["ngFor","",3,"ngForOf"],["cf-th","",1,"whitespace-nowrap","text-right"],["cf-th","","sticky","right",1,"whitespace-nowrap"],["cf-td","",3,"sticky"],[1,"border-b","border-neutral-gray-1"],["cf-td","",1,"py-2","px-3","text-body-sm","whitespace-nowrap",3,"sticky"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap"],[1,"rounded","py-1","px-3","border","border-neutral-gray-2"],["class","text-body-md flex items-center",4,"ngIf"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap","text-right"],[1,"py-2","px-3","text-body-sm","group","relative"],[1,"w-full","line-clamp-1"],["icon","expand","size","small",1,"group-hover:block","hidden","text-body-sm","absolute","right-0","top-0","cursor-pointer",3,"click"],["cf-td","","class","py-2 px-3",3,"sticky",4,"ngIf"],[1,"text-body-md","flex","items-center"],["icon","circle_check","size","small",1,"text-secondary-1-4","mr-2.5"],["icon","circle_remove","size","small",1,"mr-2.5"],["cf-td","",1,"py-2","px-3",3,"sticky"],[1,"text-espressive-sm","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"click"],[1,"flex","flex-col","gap-y-3","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"],[1,"w-full","h-full"],[1,"py-[120px]","shadow-cf-info-card","bg-neutral-white","rounded-lg","flex","flex-col","items-center","gap-y-3"],["src","assets/images/error.svg","alt",""],[1,"text-center","flex","flex-col","gap-y-2"],[1,"text-heading-lg"],[1,"text-body-md-short"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-input-group",3),e._UZ(4,"cf-icon",4),e.TgZ(5,"label",5),e._uU(6,"Ng\xe0y k\u1ebft th\xfac"),e.qZA(),e.TgZ(7,"input",6,7),e.NdJ("input",function(){e.CHM(o);const r=e.MAs(8);return e.KtG(r.close())}),e.qZA(),e.YNc(9,Dt,1,1,"cf-input-hint",8),e.YNc(10,bt,1,1,"cf-input-hint",8),e.YNc(11,Ft,1,1,"cf-input-hint",8),e.YNc(12,St,1,1,"cf-input-hint",8),e.qZA(),e.TgZ(13,"cf-select",9)(14,"label",5),e._uU(15,"Tr\u1ea1ng th\xe1i \u0111\u1ea1i l\xfd"),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.search()}),e._UZ(17,"cf-icon",11),e._uU(18," T\xecm ki\u1ebfm "),e.qZA()()()(),e.TgZ(19,"div",12),e.YNc(20,Qt,61,36,"div",13),e.YNc(21,Kt,12,0,"div",13),e.YNc(22,Bt,12,1,"div",14),e.qZA(),e.YNc(23,It,1,0,"cf-spinner",15)}2&t&&(e.xp6(3),e.Q6J("status",n.searchForm.controls.endDate.invalid&&(n.searchForm.controls.endDate.dirty||n.searchForm.controls.endDate.touched)?"error":"default"),e.xp6(4),e.Q6J("cfTooltip","Th\u1ed1ng k\xea 5 ng\xe0y k\u1ec3 t\u1eeb ng\xe0y n\xe0y tr\u1edf v\u1ec1 tr\u01b0\u1edbc")("placement","bottom")("maxDate",n.currentDate)("minDate",n.minDate)("displayMonths",1)("formControl",n.searchForm.controls.endDate),e.xp6(2),e.Q6J("ngIf",(null==n.searchForm.controls.endDate.errors?null:n.searchForm.controls.endDate.errors.required)&&(n.searchForm.controls.endDate.dirty||n.searchForm.controls.endDate.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.searchForm.controls.endDate.errors||null==n.searchForm.controls.endDate.errors.ngbDate?null:n.searchForm.controls.endDate.errors.ngbDate.minDate)&&(n.searchForm.controls.endDate.dirty||n.searchForm.controls.endDate.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.searchForm.controls.endDate.errors||null==n.searchForm.controls.endDate.errors.ngbDate?null:n.searchForm.controls.endDate.errors.ngbDate.maxDate)&&(n.searchForm.controls.endDate.dirty||n.searchForm.controls.endDate.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.searchForm.controls.endDate.errors||null==n.searchForm.controls.endDate.errors.ngbDate?null:n.searchForm.controls.endDate.errors.ngbDate.invalid)&&(n.searchForm.controls.endDate.dirty||n.searchForm.controls.endDate.touched)),e.xp6(1),e.Q6J("formControl",n.searchForm.controls.agentState)("data",n.agentStateOption)("allowSearch",!1),e.xp6(7),e.Q6J("ngIf","SUCCESS"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(1),e.Q6J("ngIf","ERROR"===n.state),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[H.q,S.u5,S.Fj,S.JJ,S.On,S.UX,S.oH,P.j$,P.ND,P.BN,P.v2,A.ez,A.sg,A.O5,A.JJ,b.AxE,b.Sm8,m.Cs,I.N8,I.Xq,q.rC,q.E_,q.qS,q.zs,se.Rq,U.OR,le.DW,st.Lk],encapsulation:2}),a})()},80750:(Ae,$,f)=>{f.d($,{G:()=>P});var A=f(83700),S=f(72506),I=f(36895),m=f(94650),b=f(97579);let P=(()=>{class H{constructor(U){this.ref=U,this.description=U.data.description,this.title=U.data.title}close(){this.ref.close(!1)}}return H.\u0275fac=function(U){return new(U||H)(m.Y36(b.gb))},H.\u0275cmp=m.Xpm({type:H,selectors:[["popup-expand"]],standalone:!0,features:[m.jDz],decls:11,vars:2,consts:[[1,"w-[344px]","min-h-[300px]","rounded-lg","bg-neutral-white","flex","flex-col"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex-1","w-full","h-full"],[1,"text-body-md","break-words"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6"],["cf-button","","size","medium","type","secondary",3,"click"]],template:function(U,L){1&U&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m._uU(3),m.qZA(),m.TgZ(4,"cf-icon",3),m.NdJ("click",function(){return L.close()}),m.qZA()(),m.TgZ(5,"div",4)(6,"div",5),m._uU(7),m.qZA()(),m.TgZ(8,"div",6)(9,"button",7),m.NdJ("click",function(){return L.close()}),m._uU(10," \u0110\xf3ng "),m.qZA()()()),2&U&&(m.xp6(3),m.Oqu(L.title),m.xp6(4),m.hij(" ",L.description," "))},dependencies:[I.ez,S.AxE,S.Sm8,A.N8,A.Xq],encapsulation:2}),H})()}}]);