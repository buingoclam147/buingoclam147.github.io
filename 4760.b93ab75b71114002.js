"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[4760],{14760:(vt,k,l)=>{l.r(k),l.d(k,{PromotionManagePageComponent:()=>Zt});var c=l(36895),g=l(72506),y=l(83700),F=l(48373),u=l(24006),h=l(44143),b=l(27898),q=l(74713),f=l(88516),N=l(19123),x=l(72853),v=l(39840),t=l(94650),C=l(97579),B=l(28490),J=l(72725);function O(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Nh\u1eadp m\xe3 khuy\u1ebfn m\xe3i")}function V(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u1ecdn h\xe3ng bay")}function Y(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Nh\u1eadp m\xf4 t\u1ea3")}function H(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function L(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function z(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function j(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n ng\xe0y \u0111i")}function K(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function G(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function R(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function $(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function X(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n ng\xe0y \u0111i")}function W(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function tt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"cf-checkbox",19),t.NdJ("checkChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.issuedTimeSameDepartureTime(r))}),t.TgZ(1,"div",20),t._uU(2," L\u1ea5y th\u1eddi gian xu\u1ea5t v\xe9 l\xe0m th\u1eddi gian bay? "),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("checked",e.isIssuedTimeSameDepartureTime)}}function ot(n,s){1&n&&t._UZ(0,"cf-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111i")}function et(n,s){1&n&&t._UZ(0,"cf-hint",50),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function nt(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Ch\u1ecdn h\xe3ng bay")}function rt(n,s){1&n&&t._UZ(0,"cf-input-hint",50),2&n&&t.Q6J("hint","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng h\xe0nh kh\xe1ch")}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.ok())}),t._uU(1," X\xe1c nh\u1eadn "),t.qZA()}}const U=function(n){return[n]},S=function(){return[]};let Q=(()=>{class n{constructor(e,o,r,a,i,p){this._iconRegister=e,this.ref=o,this._fb=r,this._locationService=a,this._promotionService=i,this._modal=p,this.isIssuedTimeSameDepartureTime=!1,this.isEditMode=!1,this.optionsAirline=[{code:"VJ",name:"VJ-Vietjet Air"},{code:"QH",name:"QH-Bamboo Airways"},{code:"VN",name:"VN-Vietnam Airline"}],this.optionsPassengerTypes=[{code:"ALL",name:"T\u1ea5t c\u1ea3"},{code:"ADT",name:"ADT-Ng\u01b0\u1eddi l\u1edbn"},{code:"CHD",name:"CHD-Tr\u1ebb em"}],this.dataLocation=[],this.positionSearchCustom=(E,M)=>{const T=this.removeAccents(E.Code.toLowerCase()),_=this.removeAccents(E.CityName.toLowerCase()),d=this.removeAccents(E.AirportName.toLowerCase()),m=this.removeAccents(M.toLowerCase());return T.includes(m)||_.includes(m)||d.includes(m)},e.registerIcons([g.UNF]),o.data&&o.data.promotion?(this.isEditMode=!0,this.promotion=o.data.promotion,this.canEdit=o.data.canEdit):this.canCreate=!0,this.initLocation()}ngOnInit(){this.promotionForm=this._fb.group(this.isEditMode?{promotionCode:[this.promotion.promotionCode,u.kI.required],airline:[this.promotion.airline,u.kI.required],description:[this.promotion.description,u.kI.required],startIssuedDate:[this.promotion.startIssuedDate,u.kI.required],endIssuedDate:[this.promotion.endIssuedDate,u.kI.required],startDepartureDate:[this.promotion.startDepartureDate,u.kI.required],endDepartureDate:[this.promotion.endDepartureDate,u.kI.required],startPoint:[this.promotion.startPoint],endPoint:[this.promotion.endPoint],journeyType:[this.promotion.journeyType,u.kI.required],passengerTypes:[this.promotion.passengerTypes],numOfPassenger:[this.promotion.numOfPassenger],priority:[this.promotion.priority,u.kI.required],autoSuggest:[1==this.promotion.autoSuggest?"YES":"NO",u.kI.required],state:[this.promotion.state,u.kI.required]}:{promotionCode:["",u.kI.required],airline:["",u.kI.required],description:["",u.kI.required],startIssuedDate:["",u.kI.required],endIssuedDate:["",u.kI.required],startDepartureDate:["",u.kI.required],endDepartureDate:["",u.kI.required],startPoint:[""],endPoint:[""],journeyType:["ROUND_TRIP",u.kI.required],passengerTypes:["ALL"],numOfPassenger:[0],priority:["NORMAL",u.kI.required],autoSuggest:["YES",u.kI.required],state:["ACTIVE",u.kI.required]})}initLocation(){this.dataLocation=this._locationService.getAllOption(),this.dataLocation=[{Code:"",CityName:"T\u1ea5t c\u1ea3",AirportName:""}].concat(this.dataLocation)}priorityChange(e){this.promotionForm.controls.priority.setValue(e?"HIGH":"NORMAL")}issuedTimeSameDepartureTime(e){this.isIssuedTimeSameDepartureTime=e,e?(this.promotionForm.controls.startDepartureDate.removeValidators(u.kI.required),this.promotionForm.controls.endDepartureDate.removeValidators(u.kI.required)):(this.promotionForm.controls.startDepartureDate.addValidators(u.kI.required),this.promotionForm.controls.endDepartureDate.addValidators(u.kI.required)),this.promotionForm.controls.startDepartureDate.updateValueAndValidity(),this.promotionForm.controls.endDepartureDate.updateValueAndValidity()}journeyTypeChange(e){}suggestChange(e){this.promotionForm.controls.autoSuggest.setValue("YES"===e)}activeChange(e){this.promotionForm.controls.state.setValue(e)}startIssuedDate(e){e&&(this.minEndIssuedDate=new f.Ao(e.getFullYear(),e.getMonth()+1,e.getDate()))}resetRangeDate(e,o){e.setValue(""),o.setValue("")}onDateSelection(e,o,r,a){o.value||r.value?o.value&&!r.value&&e&&e.getTime()>=o.value.getTime()?(r.setValue(e),a.close(),this.startDate=o.value):(r.setValue(null),o.setValue(e)):o.setValue(e)}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}close(){this._modal.open(v.V0,{title:this.isEditMode?"H\u1ee7y vi\u1ec7c ch\u1ec9nh s\u1eeda m\xe3?":"H\u1ee7y vi\u1ec7c th\xeam m\xe3?",body:this.isEditMode?"Th\xf4ng tin m\xe3 khuy\u1ebfn m\xe3i ch\u01b0a \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y vi\u1ec7c ch\u1ec9nh s\u1eeda m\xe3?":"Th\xf4ng tin m\xe3 khuy\u1ebfn m\xe3i ch\u01b0a \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y vi\u1ec7c th\xeam m\xe3?"}).afterClosed$.subscribe({next:o=>{o.data&&this.ref.close(!1)}})}ok(){this.promotionForm.valid?this._modal.open(v.V0,{title:this.isEditMode?"X\xe1c nh\u1eadn ch\u1ec9nh s\u1eeda m\xe3 khuy\u1ebfn m\xe3i":"X\xe1c nh\u1eadn th\xeam m\xe3 khuy\u1ebfn m\xe3i",body:this.isEditMode?"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ch\u1ec9nh s\u1eeda khuy\u1ebfn m\xe3i n\xe0y kh\xf4ng":"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n th\xeam m\xe3 khuy\u1ebfn m\xe3i n\xe0y kh\xf4ng."}).afterClosed$.subscribe({next:o=>{if(o.data){const r=(0,c.p6)(this.isIssuedTimeSameDepartureTime?this.promotionForm.controls.startIssuedDate.value:this.promotionForm.controls.startDepartureDate.value,"dd/MM/yyyy","vi-VN"),a=(0,c.p6)(this.isIssuedTimeSameDepartureTime?this.promotionForm.controls.endIssuedDate.value:this.promotionForm.controls.endDepartureDate.value,"dd/MM/yyyy","vi-VN"),i={promoCode:this.promotionForm.controls.promotionCode.value,airline:this.promotionForm.controls.airline.value,description:this.promotionForm.controls.description.value,startIssuedDay:(0,c.p6)(this.promotionForm.controls.startIssuedDate.value,"dd/MM/yyyy","vi-VN"),endIssuedDay:(0,c.p6)(this.promotionForm.controls.endIssuedDate.value,"dd/MM/yyyy","vi-VN"),startFlyDay:r,endFlyDay:a,startPoint:this.promotionForm.controls.startPoint.value,endPoint:this.promotionForm.controls.endPoint.value,journeyType:this.promotionForm.controls.journeyType.value,paxType:this.promotionForm.controls.passengerTypes.value,paxNum:this.promotionForm.controls.numOfPassenger.value,priority:this.promotionForm.controls.priority.value,autoSuggest:"YES"===this.promotionForm.controls.autoSuggest.value,status:this.promotionForm.controls.state.value};this.isEditMode?this._promotionService.editPromotion(this.promotion.id,i).subscribe({next:p=>{this.ref.close(!0)}}):this._promotionService.createPromotion(i).subscribe({next:p=>{this.ref.close(!0)}})}}}):this.promotionForm.markAllAsTouched()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.KNP),t.Y36(C.gb),t.Y36(u.qu),t.Y36(B._),t.Y36(J.q),t.Y36(C.oE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-promotion-modal"]],standalone:!0,features:[t.jDz],decls:149,vars:88,consts:[[1,"w-[772px]","flex","flex-col","rounded-lg","bg-neutral-white"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","small","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"flex","flex-col","py-4","px-4"],[1,"text-body-sm","overflow-y-auto","h-[70vh]"],[1,"flex","flex-col"],[1,"text-heading-sm"],[1,"text-neutral-gray-3"],[1,"py-4"],[1,"flex","flex-col","gap-y-2"],[1,"flex","gap-x-2"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 khuy\u1ebfn m\xe3i",3,"formControl"],["cfHint","",3,"hint",4,"ngIf"],["textField","name","valueField","code","placeholder","Ch\u1ecdn h\xe3ng bay",1,"grow-[200]",3,"status","data","allowSearch","formControl"],[1,"!w-full",3,"status"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xf4 t\u1ea3",3,"formControl"],["size","medium",3,"checked","checkChange"],[1,"text-espressive-md","text-neutral-gray-5"],[1,"flex","flex-col","mt-2"],[1,"flex","grow-[327]"],[1,"grow","!w-auto",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepickerViewer","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y xu\u1ea5t \u0111\u1ea7u",3,"formControl","input","ngModelChange","click"],["type","text","outsideDays","hidden","cfDatepicker","",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","fromDate","startDate","toDate","reset","dateSelect"],["dateRange","cfDatepicker"],["cfDatepickerViewer","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y xu\u1ea5t cu\u1ed1i",3,"minDate","formControl","input","click"],[1,"py-4","flex","flex-col","gap-y-2"],["cfDatepickerViewer","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y bay \u0111\u1ea7u",3,"formControl","input","ngModelChange","click"],["dateDepartureRange","cfDatepicker"],["cfDatepickerViewer","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y bay cu\u1ed1i",3,"minDate","formControl","input","click"],["size","medium",3,"checked","checkChange",4,"ngIf"],[1,"flex","items-center","gap-x-8",3,"formControl"],["size","medium",3,"value"],["textField","CityName","valueField","Code","placeholder","T\u1eeb?",1,"grow-[293]","!max-w-none",3,"status","customSearch","excludes","formControl","data","selectedChange"],["startPoint",""],["cfHeadIcon","","icon","commute","size","small"],["textField","CityName","valueField","Code","placeholder","\u0110\u1ebfn",1,"grow-[293]","!max-w-none",3,"status","customSearch","excludes","formControl","data"],["endPoint",""],[1,"flex","w-full","gap-x-2"],["textField","name","valueField","code","placeholder","Ch\u1ecdn lo\u1ea1i h\xe0nh kh\xe1ch",1,"!w-1/2","!max-w-none",3,"status","data","allowSearch","formControl"],[1,"!w-1/2",3,"status"],["type","number","cf-input","","size","medium","placeholder","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng h\xe0nh kh\xe1ch",3,"formControl"],[1,"my-4"],[1,"flex","justify-between","items-center","py-4","px-4","border-t","border-t-neutral-gray-1"],[1,"flex","gap-x-4"],["cf-button","","size","medium","type","secondary",3,"click"],["cf-button","","size","medium","type","solid","color","primary-1",3,"click",4,"ngIf"],["cfHint","",3,"hint"],["cf-button","","size","medium","type","solid","color","primary-1",3,"click"]],template:function(e,o){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"T\u1ea1o m\xe3 khuy\u1ec5n m\xe3i"),t.qZA(),t.TgZ(4,"cf-icon",3),t.NdJ("click",function(){return o.close()}),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),t._uU(9,"Th\xf4ng tin m\xe3"),t.qZA(),t.TgZ(10,"div",8),t._uU(11,"Th\xf4ng tin m\xe3 khuy\u1ebfn m\xe3i v\xe0 h\xe3ng bay t\u01b0\u01a1ng \u1ee9ng"),t.qZA()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"cf-input-group",12)(16,"label",13),t._uU(17," M\xe3 khuy\u1ebfn m\xe3i "),t.qZA(),t._UZ(18,"input",14),t.YNc(19,O,1,1,"cf-input-hint",15),t.qZA(),t.TgZ(20,"cf-select",16)(21,"label",13)(22,"span"),t._uU(23,"H\xe3ng bay"),t.qZA()(),t.YNc(24,V,1,1,"cf-input-hint",15),t.qZA()(),t.TgZ(25,"cf-input-group",17)(26,"label",13),t._uU(27," M\xf4 t\u1ea3 "),t.qZA(),t._UZ(28,"input",18),t.YNc(29,Y,1,1,"cf-input-hint",15),t.qZA(),t.TgZ(30,"cf-checkbox",19),t.NdJ("checkChange",function(i){return o.priorityChange(i)}),t.TgZ(31,"div",20),t._uU(32," \u0110\u1eb7t l\xe0m m\xe3 khuy\u1ebfn m\xe3i \u01b0u ti\xean c\u1ee7a h\xe3ng bay? "),t.qZA()()()(),t.TgZ(33,"div",21)(34,"div",7),t._uU(35,"Th\u1eddi gian xu\u1ea5t v\xe9"),t.qZA(),t.TgZ(36,"div",8),t._uU(37,"\u0110i\u1ec1u ki\u1ec7n th\u1eddi gian xu\u1ea5t v\xe9 \u0111\u1ec3 \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng m\xe3 khuy\u1ebfn m\xe3i"),t.qZA()(),t.TgZ(38,"div",9)(39,"div",22)(40,"cf-input-group",23),t._UZ(41,"cf-icon",24),t.TgZ(42,"label",13),t._uU(43,"Ng\xe0y xu\u1ea5t \u0111\u1ea7u"),t.qZA(),t.TgZ(44,"input",25),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(48);return t.KtG(i.close())})("ngModelChange",function(i){return o.startIssuedDate(i)})("click",function(){t.CHM(r);const i=t.MAs(48);return t.KtG(i.open())}),t.qZA(),t.YNc(45,H,1,1,"cf-input-hint",15),t.YNc(46,L,1,1,"cf-input-hint",15),t.qZA(),t.TgZ(47,"input",26,27),t.NdJ("reset",function(){return o.resetRangeDate(o.promotionForm.controls.startIssuedDate,o.promotionForm.controls.endIssuedDate)})("dateSelect",function(i){t.CHM(r);const p=t.MAs(48);return t.KtG(o.onDateSelection(i,o.promotionForm.controls.startIssuedDate,o.promotionForm.controls.endIssuedDate,p))}),t.qZA(),t.TgZ(49,"cf-input-group",23),t._UZ(50,"cf-icon",24),t.TgZ(51,"label",13),t._uU(52,"Ng\xe0y xu\u1ea5t cu\u1ed1i"),t.qZA(),t.TgZ(53,"input",28),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(48);return t.KtG(i.close())})("click",function(){t.CHM(r);const i=t.MAs(48);return t.KtG(i.open())}),t.qZA(),t.YNc(54,z,1,1,"cf-input-hint",15),t.YNc(55,j,1,1,"cf-input-hint",15),t.YNc(56,K,1,1,"cf-input-hint",15),t.qZA()()(),t.TgZ(57,"div",21)(58,"div",7),t._uU(59,"Th\u1eddi gian bay"),t.qZA(),t.TgZ(60,"div",8),t._uU(61,"\u0110i\u1ec1u ki\u1ec7n th\u1eddi gian bay (kh\u1edfi h\xe0nh) \u0111\u1ec3 \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng m\xe3 khuy\u1ebfn m\xe3i"),t.qZA()(),t.TgZ(62,"div",29)(63,"div",22)(64,"cf-input-group",23),t._UZ(65,"cf-icon",24),t.TgZ(66,"label",13),t._uU(67,"Ng\xe0y bay \u0111\u1ea7u"),t.qZA(),t.TgZ(68,"input",30),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(72);return t.KtG(i.close())})("ngModelChange",function(i){return o.startIssuedDate(i)})("click",function(){t.CHM(r);const i=t.MAs(72);return t.KtG(i.open())}),t.qZA(),t.YNc(69,G,1,1,"cf-input-hint",15),t.YNc(70,R,1,1,"cf-input-hint",15),t.qZA(),t.TgZ(71,"input",26,31),t.NdJ("reset",function(){return o.resetRangeDate(o.promotionForm.controls.startDepartureDate,o.promotionForm.controls.endDepartureDate)})("dateSelect",function(i){t.CHM(r);const p=t.MAs(72);return t.KtG(o.onDateSelection(i,o.promotionForm.controls.startDepartureDate,o.promotionForm.controls.endDepartureDate,p))}),t.qZA(),t.TgZ(73,"cf-input-group",23),t._UZ(74,"cf-icon",24),t.TgZ(75,"label",13),t._uU(76,"Ng\xe0y bay cu\u1ed1i"),t.qZA(),t.TgZ(77,"input",32),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(72);return t.KtG(i.close())})("click",function(){t.CHM(r);const i=t.MAs(72);return t.KtG(i.open())}),t.qZA(),t.YNc(78,$,1,1,"cf-input-hint",15),t.YNc(79,X,1,1,"cf-input-hint",15),t.YNc(80,W,1,1,"cf-input-hint",15),t.qZA()(),t.TgZ(81,"div"),t.YNc(82,tt,3,1,"cf-checkbox",33),t.qZA()(),t.TgZ(83,"div",21)(84,"div",7),t._uU(85,"H\xe0nh tr\xecnh"),t.qZA(),t.TgZ(86,"div",8),t._uU(87,"\u0110i\u1ec1u ki\u1ec7n h\xe0nh tr\xecnh v\xe0 h\xe0nh kh\xe1ch \u0111\u1ec3 \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng m\xe3 khuy\u1ebfn m\xe3i"),t.qZA()(),t.TgZ(88,"div",29)(89,"div")(90,"cf-radio-group",34)(91,"cf-radio",35),t._uU(92,"T\u1ea5t c\u1ea3"),t.qZA(),t.TgZ(93,"cf-radio",35),t._uU(94,"M\u1ed9t chi\u1ec1u"),t.qZA(),t.TgZ(95,"cf-radio",35),t._uU(96,"Kh\u1ee9 h\u1ed3i"),t.qZA()()(),t.TgZ(97,"div",11)(98,"cf-select",36,37),t.NdJ("selectedChange",function(){t.CHM(r);const i=t.MAs(105);return t.KtG(i.onFocus())}),t._UZ(100,"cf-icon",38),t.TgZ(101,"label",13),t._uU(102,"\u0110i\u1ec3m \u0111i"),t.qZA(),t.YNc(103,ot,1,1,"cf-hint",15),t.qZA(),t.TgZ(104,"cf-select",39,40),t._UZ(106,"cf-icon",38),t.TgZ(107,"label",13),t._uU(108,"\u0110i\u1ec3m \u0111\u1ebfn"),t.qZA(),t.YNc(109,et,1,1,"cf-hint",15),t.qZA()(),t.TgZ(110,"div",41)(111,"cf-select",42)(112,"label",13)(113,"span"),t._uU(114,"Lo\u1ea1i h\xe0nh kh\xe1ch"),t.qZA()(),t.YNc(115,nt,1,1,"cf-input-hint",15),t.qZA(),t.TgZ(116,"cf-input-group",43)(117,"label",13),t._uU(118," S\u1ed1 l\u01b0\u1ee3ng h\xe0nh kh\xe1ch "),t.qZA(),t._UZ(119,"input",44),t.YNc(120,rt,1,1,"cf-input-hint",15),t.qZA()()(),t.TgZ(121,"div",21)(122,"div",7),t._uU(123,"Cho ph\xe9p t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng m\xe3 khuy\u1ebfn m\xe3i"),t.qZA(),t.TgZ(124,"div",8),t._uU(125,"M\xe3 khuy\u1ebfn m\xe3i s\u1ebd \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng khi t\xecm ki\u1ebfm n\u1ebfu ph\xf9 h\u1ee3p v\xe0 \u0111\u01b0\u1ee3c cho ph\xe9p"),t.qZA()(),t.TgZ(126,"div",45)(127,"cf-radio-group",34)(128,"cf-radio",35),t._uU(129,"Cho ph\xe9p"),t.qZA(),t.TgZ(130,"cf-radio",35),t._uU(131,"Kh\xf4ng cho ph\xe9p"),t.qZA()()(),t.TgZ(132,"div",21)(133,"div",7),t._uU(134,"Cho ph\xe9p ho\u1ea1t \u0111\u1ed9ng"),t.qZA(),t.TgZ(135,"div",8),t._uU(136,"Ch\u1ec9 \u0111\u1ecbnh m\xe3 khuy\u1ebfn m\xe3i c\xf3 hi\u1ec7u l\u1ef1c trong h\u1ec7 th\u1ed1ng hay kh\xf4ng (tr\u1eeb tr\u01b0\u1eddng h\u1ee3p v\u01b0\u1ee3t qu\xe1 th\u1eddi h\u1ea1n xu\u1ea5t v\xe9)"),t.qZA()(),t.TgZ(137,"div",45)(138,"cf-radio-group",34)(139,"cf-radio",35),t._uU(140,"Ho\u1ea1t \u0111\u1ed9ng"),t.qZA(),t.TgZ(141,"cf-radio",35),t._uU(142,"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"),t.qZA()()()()(),t.TgZ(143,"div",46),t._UZ(144,"div"),t.TgZ(145,"div",47)(146,"button",48),t.NdJ("click",function(){return o.close()}),t._uU(147," H\u1ee7y b\u1ecf "),t.qZA(),t.YNc(148,it,2,0,"button",49),t.qZA()()()}2&e&&(t.xp6(15),t.Q6J("status",o.promotionForm.controls.promotionCode.invalid&&(o.promotionForm.controls.promotionCode.dirty||o.promotionForm.controls.promotionCode.touched)?"error":"default"),t.xp6(3),t.Q6J("formControl",o.promotionForm.controls.promotionCode),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.promotionCode.errors?null:o.promotionForm.controls.promotionCode.errors.required)&&(o.promotionForm.controls.promotionCode.dirty||o.promotionForm.controls.promotionCode.touched)),t.xp6(1),t.Q6J("status",o.promotionForm.controls.airline.invalid&&(o.promotionForm.controls.airline.dirty||o.promotionForm.controls.airline.touched)?"error":"default")("data",o.optionsAirline)("allowSearch",!1)("formControl",o.promotionForm.controls.airline)("allowSearch",!0),t.xp6(4),t.Q6J("ngIf",o.promotionForm.controls.airline.hasError("required")&&o.promotionForm.controls.airline.touched),t.xp6(1),t.Q6J("status",o.promotionForm.controls.description.invalid&&(o.promotionForm.controls.description.dirty||o.promotionForm.controls.description.touched)?"error":"default"),t.xp6(3),t.Q6J("formControl",o.promotionForm.controls.description),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.description.errors?null:o.promotionForm.controls.description.errors.required)&&(o.promotionForm.controls.description.dirty||o.promotionForm.controls.description.touched)),t.xp6(1),t.Q6J("checked","HIGH"===o.promotionForm.controls.priority.value),t.xp6(10),t.Q6J("status",o.promotionForm.controls.startIssuedDate.invalid&&(o.promotionForm.controls.startIssuedDate.dirty||o.promotionForm.controls.startIssuedDate.touched)?"error":"default"),t.xp6(4),t.Q6J("formControl",o.promotionForm.controls.startIssuedDate),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.startIssuedDate.errors?null:o.promotionForm.controls.startIssuedDate.errors.required)&&(o.promotionForm.controls.startIssuedDate.dirty||o.promotionForm.controls.startIssuedDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.startIssuedDate.errors||null==o.promotionForm.controls.startIssuedDate.errors.ngbDate?null:o.promotionForm.controls.startIssuedDate.errors.ngbDate.invalid)&&(o.promotionForm.controls.startIssuedDate.dirty||o.promotionForm.controls.startIssuedDate.touched)),t.xp6(1),t.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("fromDate",o.promotionForm.controls.startIssuedDate.value)("startDate",o.startDate)("toDate",o.promotionForm.controls.endIssuedDate.value),t.xp6(2),t.Q6J("status",o.promotionForm.controls.endIssuedDate.invalid&&(o.promotionForm.controls.endIssuedDate.dirty||o.promotionForm.controls.endIssuedDate.touched)?"error":"default"),t.xp6(4),t.Q6J("minDate",o.minEndIssuedDate)("formControl",o.promotionForm.controls.endIssuedDate),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endIssuedDate.errors?null:o.promotionForm.controls.endIssuedDate.errors.required)&&(o.promotionForm.controls.endIssuedDate.dirty||o.promotionForm.controls.endIssuedDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endIssuedDate.errors||null==o.promotionForm.controls.endIssuedDate.errors.ngbDate?null:o.promotionForm.controls.endIssuedDate.errors.ngbDate.minDate)&&(o.promotionForm.controls.endIssuedDate.dirty||o.promotionForm.controls.endIssuedDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endIssuedDate.errors||null==o.promotionForm.controls.endIssuedDate.errors.ngbDate?null:o.promotionForm.controls.endIssuedDate.errors.ngbDate.invalid)&&(o.promotionForm.controls.endIssuedDate.dirty||o.promotionForm.controls.endIssuedDate.touched)),t.xp6(8),t.Q6J("status",o.promotionForm.controls.startDepartureDate.invalid&&(o.promotionForm.controls.startDepartureDate.dirty||o.promotionForm.controls.startDepartureDate.touched)?"error":"default"),t.xp6(4),t.Q6J("formControl",o.promotionForm.controls.startDepartureDate),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.startDepartureDate.errors?null:o.promotionForm.controls.startDepartureDate.errors.required)&&(o.promotionForm.controls.startDepartureDate.dirty||o.promotionForm.controls.startDepartureDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.startDepartureDate.errors||null==o.promotionForm.controls.startDepartureDate.errors.ngbDate?null:o.promotionForm.controls.startDepartureDate.errors.ngbDate.invalid)&&(o.promotionForm.controls.startDepartureDate.dirty||o.promotionForm.controls.startDepartureDate.touched)),t.xp6(1),t.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("fromDate",o.promotionForm.controls.startDepartureDate.value)("startDate",o.startDate)("toDate",o.promotionForm.controls.endDepartureDate.value),t.xp6(2),t.Q6J("status",o.promotionForm.controls.endDepartureDate.invalid&&(o.promotionForm.controls.endDepartureDate.dirty||o.promotionForm.controls.endDepartureDate.touched)?"error":"default"),t.xp6(4),t.Q6J("minDate",o.minEndIssuedDate)("formControl",o.promotionForm.controls.endDepartureDate),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endDepartureDate.errors?null:o.promotionForm.controls.endDepartureDate.errors.required)&&(o.promotionForm.controls.endDepartureDate.dirty||o.promotionForm.controls.endDepartureDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endDepartureDate.errors||null==o.promotionForm.controls.endDepartureDate.errors.ngbDate?null:o.promotionForm.controls.endDepartureDate.errors.ngbDate.minDate)&&(o.promotionForm.controls.endDepartureDate.dirty||o.promotionForm.controls.endDepartureDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.endDepartureDate.errors||null==o.promotionForm.controls.endDepartureDate.errors.ngbDate?null:o.promotionForm.controls.endDepartureDate.errors.ngbDate.invalid)&&(o.promotionForm.controls.endDepartureDate.dirty||o.promotionForm.controls.endDepartureDate.touched)),t.xp6(2),t.Q6J("ngIf",!o.isEditMode),t.xp6(8),t.Q6J("formControl",o.promotionForm.controls.journeyType),t.xp6(1),t.Q6J("value","ALL"),t.xp6(2),t.Q6J("value","ONE_WAY"),t.xp6(2),t.Q6J("value","ROUND_TRIP"),t.xp6(3),t.ekj("!grow-269",o.promotionForm.controls.returnDate),t.Q6J("status",o.promotionForm.controls.startPoint.invalid&&(o.promotionForm.controls.startPoint.dirty||o.promotionForm.controls.startPoint.touched)?"error":"default")("customSearch",o.positionSearchCustom)("excludes",""!==o.promotionForm.controls.endPoint.value?t.VKq(82,U,o.promotionForm.controls.endPoint.value):t.DdM(84,S))("formControl",o.promotionForm.controls.startPoint)("data",o.dataLocation),t.xp6(5),t.Q6J("ngIf",(null==o.promotionForm.controls.startPoint.errors?null:o.promotionForm.controls.startPoint.errors.required)&&(o.promotionForm.controls.startPoint.dirty||o.promotionForm.controls.startPoint.touched)),t.xp6(1),t.ekj("!grow-269",o.promotionForm.controls.returnDate),t.Q6J("status",o.promotionForm.controls.endPoint.invalid&&(o.promotionForm.controls.endPoint.dirty||o.promotionForm.controls.endPoint.touched)?"error":"default")("customSearch",o.positionSearchCustom)("excludes",""!==o.promotionForm.controls.startPoint.value?t.VKq(85,U,o.promotionForm.controls.startPoint.value):t.DdM(87,S))("formControl",o.promotionForm.controls.endPoint)("data",o.dataLocation),t.xp6(5),t.Q6J("ngIf",(null==o.promotionForm.controls.endPoint.errors?null:o.promotionForm.controls.endPoint.errors.required)&&(o.promotionForm.controls.endPoint.dirty||o.promotionForm.controls.endPoint.touched)),t.xp6(2),t.Q6J("status",o.promotionForm.controls.passengerTypes.invalid&&(o.promotionForm.controls.passengerTypes.dirty||o.promotionForm.controls.passengerTypes.touched)?"error":"default")("data",o.optionsPassengerTypes)("allowSearch",!1)("formControl",o.promotionForm.controls.passengerTypes)("allowSearch",!0),t.xp6(4),t.Q6J("ngIf",o.promotionForm.controls.passengerTypes.hasError("required")&&o.promotionForm.controls.passengerTypes.touched),t.xp6(1),t.Q6J("status",o.promotionForm.controls.numOfPassenger.invalid&&(o.promotionForm.controls.numOfPassenger.dirty||o.promotionForm.controls.numOfPassenger.touched)?"error":"default"),t.xp6(3),t.Q6J("formControl",o.promotionForm.controls.numOfPassenger),t.xp6(1),t.Q6J("ngIf",(null==o.promotionForm.controls.numOfPassenger.errors?null:o.promotionForm.controls.numOfPassenger.errors.required)&&(o.promotionForm.controls.numOfPassenger.dirty||o.promotionForm.controls.numOfPassenger.touched)),t.xp6(7),t.Q6J("formControl",o.promotionForm.controls.autoSuggest),t.xp6(1),t.Q6J("value","YES"),t.xp6(2),t.Q6J("value","NO"),t.xp6(8),t.Q6J("formControl",o.promotionForm.controls.state),t.xp6(1),t.Q6J("value","ACTIVE"),t.xp6(2),t.Q6J("value","INACTIVE"),t.xp6(7),t.Q6J("ngIf",o.canEdit||o.canCreate))},dependencies:[c.ez,c.O5,g.AxE,g.Sm8,y.N8,y.Xq,u.u5,u.Fj,u.wV,u.JJ,u.UX,u.oH,h.j$,h.ND,h.BN,h.v2,b.u,q.q,f.Cs,f.hI,N.o,N.T,x.m],styles:["*[_ngcontent-%COMP%]{scrollbar-width:auto;scrollbar-color:#c7c7c7 #ffffff}*[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}*[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#c7c7c7;border-radius:10px;border:3px solid #ffffff}"]}),n})();var A=l(40899),at=l(82761),ut=l(62733);function st(n,s){1&n&&t._UZ(0,"cf-input-hint",36),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function lt(n,s){1&n&&t._UZ(0,"cf-input-hint",36),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function ct(n,s){1&n&&t._UZ(0,"cf-input-hint",36),2&n&&t.Q6J("hint","Ch\u01b0a ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function mt(n,s){1&n&&t._UZ(0,"cf-input-hint",36),2&n&&t.Q6J("hint","Ng\xe0y k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n ng\xe0y \u0111i")}function pt(n,s){1&n&&t._UZ(0,"cf-input-hint",36),2&n&&t.Q6J("hint","Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy")}function dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addPromotion())}),t._uU(1," Th\xeam m\xe3 khuy\u1ebfn m\xe3i "),t.qZA()}}function ht(n,s){1&n&&(t.TgZ(0,"td",46)(1,"div",47),t._uU(2," \u01afu ti\xean "),t.qZA()())}function gt(n,s){1&n&&(t.TgZ(0,"td",46)(1,"div",48),t._uU(2," Th\xf4ng th\u01b0\u1eddng "),t.qZA()())}function ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"cf-select",49),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.state=r)})("selectedChange",function(r){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw();return t.KtG(i.stateChange(r,a))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("data",o.stateOptionToEdit)("ngModel",e.state)("textField","name")("valueField","value")}}function _t(n,s){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.Oqu(e.state)}}function Et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw();return t.KtG(a.edit(r))}),t._uU(1,"Chi ti\u1ebft"),t.qZA()}}function Dt(n,s){if(1&n&&(t.TgZ(0,"tr",38)(1,"td",39),t._uU(2),t.qZA(),t.TgZ(3,"td",39),t._UZ(4,"img",40),t.qZA(),t.TgZ(5,"td",39),t._uU(6),t.qZA(),t.TgZ(7,"td",39),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td",39),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",39),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",39),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"td",39),t._uU(20),t.qZA(),t.TgZ(21,"td",39),t._uU(22),t.qZA(),t.TgZ(23,"td",39),t._uU(24),t.qZA(),t.TgZ(25,"td",39),t._uU(26),t.qZA(),t.TgZ(27,"td",39),t._uU(28),t.qZA(),t.YNc(29,ht,3,0,"td",41),t.YNc(30,gt,3,0,"td",41),t.TgZ(31,"td",39),t._uU(32),t.qZA(),t.TgZ(33,"td",39),t.YNc(34,ft,1,4,"cf-select",42),t.YNc(35,_t,1,1,"ng-template",null,43,t.W1O),t.qZA(),t.TgZ(37,"td",44),t.YNc(38,Et,2,0,"button",45),t.qZA()()),2&n){const e=s.$implicit,o=t.MAs(36),r=t.oxw();t.xp6(2),t.Oqu(e.promotionCode),t.xp6(2),t.s9C("src",e.airlineLogo,t.LSH),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(t.xi3(9,18,e.startIssuedDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(12,21,e.endIssuedDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(15,24,e.startDepartureDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(18,27,e.endDepartureDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(""===e.startPoint?"T\u1ea5t c\u1ea3":e.startPoint),t.xp6(2),t.Oqu(""===e.endPoint?"T\u1ea5t c\u1ea3":e.endPoint),t.xp6(2),t.Oqu(e.journeyText),t.xp6(2),t.Oqu("ALL"===e.passengerTypes?"T\u1ea5t c\u1ea3":e.passengerTypes),t.xp6(2),t.Oqu(e.numOfPassenger),t.xp6(1),t.Q6J("ngIf","HIGH"===e.priority),t.xp6(1),t.Q6J("ngIf","NORMAL"===e.priority),t.xp6(2),t.Oqu(e.autoSuggest?"Cho ph\xe9p":"Kh\xf4ng cho ph\xe9p"),t.xp6(2),t.Q6J("ngIf",r.canEdit)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",r.canEdit)}}const yt=function(){return{num:25}},Ft=function(){return{num:50}},Ct=function(){return{num:75}},At=function(){return{num:100}},Tt=function(n,s,e,o){return[n,s,e,o]};let Zt=(()=>{class n{constructor(e,o,r,a,i,p,E,M){this._router=o,this._modalService=r,this._fb=a,this._promotionSevice=i,this._flightDataService=p,this._modal=E,this._permissionService=M,this.listOfData=[],this.pageSize=25,this.currentPage=1,this.dateSelectOption=[],this.stateOption=[],this.airlineSelectOption=[],this.prioritySelectOption=[],this.stateOptionToEdit=[{name:"Ho\u1ea1t \u0111\u1ed9ng",value:"ACTIVE"},{name:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng",value:"INACTIVE"}],this.showAddPromotion=this._permissionService.hasPermission(A.or.CreateFlightPromotion),this.canEdit=this._permissionService.hasPermission(A.or.EditFlightPromotion),this.sortChange=(d,m)=>{let Z=m.map(D=>D);for(let D=0;D<d.length;D++){const w=d[D];"airline"===w.key&&(Z=Z.sort("ascend"===w.sort?(P,I)=>this.increaseAlphabetSort(P.airline,I.airline):(P,I)=>this.decreaseAlphabetSort(P.airline,I.airline)))}return Z},this.searchChange=(d,m)=>m,this.increaseAlphabetSort=(d,m)=>d<m?-1:d>m?1:0,this.decreaseAlphabetSort=(d,m)=>d>m?-1:d<m?1:0,e.registerIcons([]);const T=new Date;T.setDate(1);const _=new Date;_.setMonth(_.getMonth()+1),_.setDate(0),this.searchForm=a.group({dateType:["ISSUED_DAY",u.kI.required],fromDate:[T,u.kI.required],toDate:[_,u.kI.required],airline:[""],searchText:[""],state:["ALL"],priority:["ALL"],hidePromoExpired:[!1]}),this.dateSelectOption=[{name:"Th\u1eddi gian xu\u1ea5t v\xe9",value:"ISSUED_DAY"},{name:"Th\u1eddi gian bay",value:"FLY_DAY"}],this.airlineSelectOption=[{name:"T\u1ea5t c\u1ea3 h\xe3ng bay",value:""},{name:"Vietnam Airline",value:"VN"},{name:"Bamboo Airways",value:"QH"},{name:"Vietjet Air",value:"VJ"}],this.stateOption=[{name:"T\u1ea5t c\u1ea3",value:"ALL"},{name:"Ho\u1ea1t \u0111\xf4ng",value:"ACTIVE"},{name:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng",value:"INACTIVE"}],this.prioritySelectOption=[{name:"T\u1ea5t c\u1ea3",value:"ALL"},{name:"C\xf3",value:"YES"},{name:"Kh\xf4ng",value:"NO"}]}ngOnInit(){this.search()}hidePromotionChange(e){this.searchForm.controls.hidePromoExpired.setValue(e)}fromDateChange(e){e&&(this.minToDate=new f.Ao(e.getFullYear(),e.getMonth()+1,e.getDate()))}resetRangeDate(e,o){e.setValue(""),o.setValue("")}onDateSelection(e,o,r,a){o.value||r.value?o.value&&!r.value&&e&&e.getTime()>=o.value.getTime()?(r.setValue(e),a.close(),this.startDate=o.value):(r.setValue(null),o.setValue(e)):o.setValue(e)}search(){this._promotionSevice.getAllPromotionForManage({airline:this.searchForm.controls.airline.value,dayType:this.searchForm.controls.dateType.value,fromDay:(0,c.p6)(this.searchForm.controls.fromDate.value,"dd/MM/yyyy","vi-VN"),toDay:(0,c.p6)(this.searchForm.controls.toDate.value,"dd/MM/yyyy","vi-VN"),priority:this.searchForm.controls.priority.value,searchText:this.searchForm.controls.searchText.value,hidePromoExpired:this.searchForm.controls.hidePromoExpired.value,status:this.searchForm.controls.state.value}).subscribe({next:e=>{this.listOfData=e.data.map(o=>{let r="T\u1ea5t c\u1ea3";return"ONE_WAY"===o.journeyType&&(r="M\u1ed9t chi\u1ec1u"),"ROUND_TRIP"===o.journeyType&&(r="Kh\u1ee9 h\u1ed3i"),{id:o.id,promotionCode:o.promoCode,airline:o.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(o.airline),description:o.description,startIssuedDate:new Date(1e3*o.startIssuedDay),endIssuedDate:new Date(1e3*o.endIssuedDay),endDepartureDate:new Date(1e3*o.endFlyDay),startDepartureDate:new Date(1e3*o.startFlyDay),startPoint:o.startPoint,endPoint:o.endPoint,journeyType:o.journeyType,journeyText:r,passengerTypes:o.paxType,numOfPassenger:o.paxNum,priority:o.priority,autoSuggest:o.autoSuggest,state:o.status}})}}),this.listOfData=[]}checkChange(e){this.pageSize=parseInt(e)}addPromotion(){this._modalService.open(Q,null).afterClosed$.subscribe({next:o=>{o.data&&this.search()}})}edit(e){this._modalService.open(Q,{promotion:e,canEdit:this._permissionService.hasPermission(A.or.EditFlightPromotion)}).afterClosed$.subscribe({next:r=>{r.data&&this.search()}})}stateChange(e,o){this._modal.open(v.V0,{title:"ACTIVE"===e.value?"M\u1edf l\u1ea1i m\xe3 khuy\u1ebfn m\xe3i n\xe0y?":"V\xf4 hi\u1ec7u h\xf3a m\xe3 khuy\u1ebfn m\xe3i n\xe0y?",body:"ACTIVE"===e.value?"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n cho ph\xe9p m\xe3 khuy\u1ebfn m\xe3i n\xe0y ho\u1ea1t \u0111\u1ed9ng l\u1ea1i?":"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n v\xf4 hi\u1ec7u h\xf3a m\xe3 khuy\u1ebfn m\xe3i n\xe0y?"}).afterClosed$.subscribe({next:a=>{a.data?this._promotionSevice.editPromotion(o.id,{promoCode:o.promotionCode,airline:o.airline,description:o.description,startIssuedDay:(0,c.p6)(o.startIssuedDate,"dd/MM/yyyy","vi-VN"),endIssuedDay:(0,c.p6)(o.endIssuedDate,"dd/MM/yyyy","vi-VN"),startFlyDay:(0,c.p6)(o.startDepartureDate,"dd/MM/yyyy","vi-VN"),endFlyDay:(0,c.p6)(o.endDepartureDate,"dd/MM/yyyy","vi-VN"),startPoint:o.startPoint,endPoint:o.endPoint,journeyType:o.journeyType,paxType:o.passengerTypes,paxNum:o.numOfPassenger,priority:o.priority,autoSuggest:o.autoSuggest,status:e.value}).subscribe({next:i=>{this.search()}}):o.state="ACTIVE"===e.value?"INACTIVE":"ACTIVE"}})}delete(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.KNP),t.Y36(at.F0),t.Y36(C.oE),t.Y36(u.qu),t.Y36(J.q),t.Y36(ut.G),t.Y36(C.oE),t.Y36(A.$A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["promotion-manage-page"]],standalone:!0,features:[t.jDz],decls:88,vars:46,consts:[[1,"flex","flex-col","py-4","px-[30px]","bg-white","w-full"],[1,"flex","gap-x-[17px]"],[1,"flex","flex-col","grow","gap-y-4"],[1,"flex","w-full","justify-center","gap-x-4"],["size","small","textField","name","valueField","value",1,"grow-[180]",3,"formControl","data","allowSearch"],["cfLabel",""],[1,"flex","grow-[327]"],[1,"grow","!w-auto",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepickerViewer","","type","text","size","small","cf-input","","placeholder","Ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u",3,"formControl","input","ngModelChange","click"],["cfHint","",3,"hint",4,"ngIf"],["type","text","outsideDays","hidden","cfDatepicker","",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","fromDate","startDate","toDate","reset","dateSelect"],["dateRange","cfDatepicker"],["cfDatepickerViewer","","type","text","size","small","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",3,"minDate","formControl","input","click"],["textField","name","valueField","value","size","small",1,"grow-[180]",3,"formControl","data","allowSearch"],[1,"flex","justify-center","gap-x-2","items-center"],[1,"!w-full"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm trong danh s\xe1ch k\u1ebft qu\u1ea3...",3,"formControl"],["tableSearchInput",""],[1,"flex","flex-col","justify-end","w-[168px]","shrink-0"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"flex","justify-start","mt-4"],["size","medium",3,"checkChange"],[1,"py-4","px-[30px]","rounded-lg"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click",4,"ngIf"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap"],["cf-th","",1,"whitespace-nowrap",3,"sortName"],["ngFor","",3,"ngForOf"],["cfHint","",3,"hint"],["cf-button","","type","secondary",3,"click"],[1,"border-b","border-neutral-gray-1"],["cf-td","",1,"py-2","px-3","text-body-sm"],[1,"w-12","h-6","object-contain",3,"src"],["cf-td","","class","py-2 px-3 text-body-sm flex justify-center",4,"ngIf"],["class","w-[170px]",3,"data","ngModel","textField","valueField","ngModelChange","selectedChange",4,"ngIf","ngIfElse"],["statusTemplate",""],["cf-td","",1,"py-2","px-3","flex","justify-end","gap-x-2"],["cf-button","","size","small","type","secondary","class","whitespace-nowrap",3,"click",4,"ngIf"],["cf-td","",1,"py-2","px-3","text-body-sm","flex","justify-center"],[1,"flex","py-1","px-2","w-fit","items-center","justify-center","bg-secondary-6-1","rounded","text-espressive-md","text-secondary-6-4"],[1,"flex","py-1","px-2","w-fit","items-center","justify-center","bg-neutral-gray-2","whitespace-nowrap","rounded","text-espressive-md","text-neutral-gray-6"],[1,"w-[170px]",3,"data","ngModel","textField","valueField","ngModelChange","selectedChange"],["cf-button","","size","small","type","secondary",1,"whitespace-nowrap",3,"click"]],template:function(e,o){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"cf-select",4)(5,"label",5),t._uU(6,"T\xecm theo"),t.qZA()(),t.TgZ(7,"div",6)(8,"cf-input-group",7),t._UZ(9,"cf-icon",8),t.TgZ(10,"label",5),t._uU(11,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),t.qZA(),t.TgZ(12,"input",9),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(16);return t.KtG(i.close())})("ngModelChange",function(i){return o.fromDateChange(i)})("click",function(){t.CHM(r);const i=t.MAs(16);return t.KtG(i.open())}),t.qZA(),t.YNc(13,st,1,1,"cf-input-hint",10),t.YNc(14,lt,1,1,"cf-input-hint",10),t.qZA(),t.TgZ(15,"input",11,12),t.NdJ("reset",function(){return o.resetRangeDate(o.searchForm.controls.fromDate,o.searchForm.controls.toDate)})("dateSelect",function(i){t.CHM(r);const p=t.MAs(16);return t.KtG(o.onDateSelection(i,o.searchForm.controls.fromDate,o.searchForm.controls.toDate,p))}),t.qZA(),t.TgZ(17,"cf-input-group",7),t._UZ(18,"cf-icon",8),t.TgZ(19,"label",5),t._uU(20,"Ng\xe0y k\u1ebft th\xfac"),t.qZA(),t.TgZ(21,"input",13),t.NdJ("input",function(){t.CHM(r);const i=t.MAs(16);return t.KtG(i.close())})("click",function(){t.CHM(r);const i=t.MAs(16);return t.KtG(i.open())}),t.qZA(),t.YNc(22,ct,1,1,"cf-input-hint",10),t.YNc(23,mt,1,1,"cf-input-hint",10),t.YNc(24,pt,1,1,"cf-input-hint",10),t.qZA()(),t.TgZ(25,"cf-select",14)(26,"label",5),t._uU(27,"H\xe3ng bay"),t.qZA()(),t.TgZ(28,"cf-select",14)(29,"label",5),t._uU(30,"\u01afu ti\xean"),t.qZA()(),t.TgZ(31,"cf-select",14)(32,"label",5),t._uU(33,"Tr\u1ea1ng th\xe1i"),t.qZA()()(),t.TgZ(34,"div",15)(35,"cf-input-group",16),t._UZ(36,"cf-icon",17)(37,"input",18,19),t.qZA()()(),t.TgZ(39,"div",20)(40,"button",21),t.NdJ("click",function(){return o.search()}),t._UZ(41,"cf-icon",22),t._uU(42," T\xecm ki\u1ebfm "),t.qZA()()(),t.TgZ(43,"div",23)(44,"cf-checkbox",24),t.NdJ("checkChange",function(i){return o.hidePromotionChange(i)}),t._uU(45,"\u1ea8n m\xe3 khuy\u1ebfn m\xe3i h\u1ebft hi\u1ec7u l\u1ef1c"),t.qZA()()(),t.TgZ(46,"div",25)(47,"div",26)(48,"div",27)(49,"div",28),t._uU(50,"Qu\u1ea3n l\xfd m\xe3 khuy\u1ebfn m\xe3i"),t.qZA(),t.YNc(51,dt,2,0,"button",29),t.qZA(),t.TgZ(52,"cf-table",30,31)(54,"thead",32)(55,"th",33),t._uU(56,"M\xe3 KM"),t.qZA(),t.TgZ(57,"th",34),t._uU(58,"H\xe3ng"),t.qZA(),t.TgZ(59,"th",33),t._uU(60,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(61,"th",33),t._uU(62,"Ng\xe0y xu\u1ea5t \u0111\u1ea7u"),t.qZA(),t.TgZ(63,"th",33),t._uU(64,"Ng\xe0y xu\u1ea5t cu\u1ed5i"),t.qZA(),t.TgZ(65,"th",33),t._uU(66,"Ng\xe0y bay \u0111\u1ea7u"),t.qZA(),t.TgZ(67,"th",33),t._uU(68,"Ng\xe0y bay cu\u1ed1i"),t.qZA(),t.TgZ(69,"th",33),t._uU(70,"\u0110i\u1ec3m \u0111i"),t.qZA(),t.TgZ(71,"th",33),t._uU(72,"\u0110i\u1ec3m \u0111\u1ebfn"),t.qZA(),t.TgZ(73,"th",33),t._uU(74,"Lo\u1ea1i h\xe0nh tr\xecnh"),t.qZA(),t.TgZ(75,"th",33),t._uU(76,"Lo\u1ea1i h\xe0nh kh\xe1ch"),t.qZA(),t.TgZ(77,"th",33),t._uU(78,"S\u1ed1 h\xe0nh kh\xe1ch"),t.qZA(),t.TgZ(79,"th",33),t._uU(80,"\u01afu ti\xean"),t.qZA(),t.TgZ(81,"th",33),t._uU(82,"T\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng"),t.qZA(),t.TgZ(83,"th",33),t._uU(84,"Tr\u1ea1ng th\xe1i"),t.qZA(),t._UZ(85,"th",33),t.qZA(),t.TgZ(86,"tbody"),t.YNc(87,Dt,39,30,"ng-template",35),t.qZA()()()()}if(2&e){const r=t.MAs(53);t.xp6(4),t.Q6J("formControl",o.searchForm.controls.dateType)("data",o.dateSelectOption)("allowSearch",!1),t.xp6(4),t.Q6J("status",o.searchForm.controls.fromDate.invalid&&(o.searchForm.controls.fromDate.dirty||o.searchForm.controls.fromDate.touched)?"error":"default"),t.xp6(4),t.Q6J("formControl",o.searchForm.controls.fromDate),t.xp6(1),t.Q6J("ngIf",(null==o.searchForm.controls.fromDate.errors?null:o.searchForm.controls.fromDate.errors.required)&&(o.searchForm.controls.fromDate.dirty||o.searchForm.controls.fromDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.searchForm.controls.fromDate.errors||null==o.searchForm.controls.fromDate.errors.ngbDate?null:o.searchForm.controls.fromDate.errors.ngbDate.invalid)&&(o.searchForm.controls.fromDate.dirty||o.searchForm.controls.fromDate.touched)),t.xp6(1),t.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("fromDate",o.searchForm.controls.fromDate.value)("startDate",o.startDate)("toDate",o.searchForm.controls.toDate.value),t.xp6(2),t.Q6J("status",o.searchForm.controls.toDate.invalid&&(o.searchForm.controls.toDate.dirty||o.searchForm.controls.toDate.touched)?"error":"default"),t.xp6(4),t.Q6J("minDate",o.minToDate)("formControl",o.searchForm.controls.toDate),t.xp6(1),t.Q6J("ngIf",(null==o.searchForm.controls.toDate.errors?null:o.searchForm.controls.toDate.errors.required)&&(o.searchForm.controls.toDate.dirty||o.searchForm.controls.toDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.searchForm.controls.toDate.errors||null==o.searchForm.controls.toDate.errors.ngbDate?null:o.searchForm.controls.toDate.errors.ngbDate.minDate)&&(o.searchForm.controls.toDate.dirty||o.searchForm.controls.toDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==o.searchForm.controls.toDate.errors||null==o.searchForm.controls.toDate.errors.ngbDate?null:o.searchForm.controls.toDate.errors.ngbDate.invalid)&&(o.searchForm.controls.toDate.dirty||o.searchForm.controls.toDate.touched)),t.xp6(1),t.Q6J("formControl",o.searchForm.controls.airline)("data",o.airlineSelectOption)("allowSearch",!1),t.xp6(3),t.Q6J("formControl",o.searchForm.controls.priority)("data",o.prioritySelectOption)("allowSearch",!1),t.xp6(3),t.Q6J("formControl",o.searchForm.controls.state)("data",o.stateOption)("allowSearch",!1),t.xp6(6),t.Q6J("formControl",o.searchForm.controls.searchText),t.xp6(14),t.Q6J("ngIf",o.showAddPromotion),t.xp6(1),t.Q6J("fnSort",o.sortChange)("fnSearch",o.searchChange)("pageSizeList",t.l5B(41,Tt,t.DdM(37,yt),t.DdM(38,Ft),t.DdM(39,Ct),t.DdM(40,At)))("listData",o.listOfData)("pageSize",o.pageSize),t.xp6(5),t.Q6J("sortName","airline"),t.xp6(30),t.Q6J("ngForOf",r.partOfdata)}},dependencies:[c.ez,c.sg,c.O5,c.uU,g.AxE,g.Sm8,y.N8,y.Xq,F.rC,F.E_,F.zs,F.qS,q.q,h.j$,h.ND,h.BN,h.v2,f.Cs,f.hI,u.u5,u.Fj,u.JJ,u.On,u.UX,u.oH,b.u],encapsulation:2}),n})()}}]);