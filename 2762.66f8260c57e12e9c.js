"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[2762],{52762:(K,w,u)=>{u.r(w),u.d(w,{IssueBookingPageComponent:()=>Xe,ManageBookingPageComponent:()=>Je,OpenBookingComponent:()=>yt,VoidBookingPageComponent:()=>rt});var c=u(36895),l=u(24006),f=u(83700),U=u(27898),M=u(88516),d=u(72506),m=u(44143),I=u(4688),x=u(74713),D=u(48373),A=u(7542),J=u(77296),S=u(28746),e=u(94650);let X=(()=>{class o{transform(t,n){return t.length<n?t:t.slice(0,n)+"..."}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"truncateName",type:o,pure:!0,standalone:!0}),o})();var F=u(37094),P=u(19123),Q=u(35991),W=u(16039),L=u(62733),O=u(82761),V=u(9381);function ee(o,s){1&o&&e._UZ(0,"cf-input-hint",68),2&o&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function te(o,s){1&o&&(e.TgZ(0,"div",26),e._uU(1,"Th\u1eddi gian \u0111\u1eb7t"),e.qZA())}function ne(o,s){1&o&&(e.TgZ(0,"div",26),e._uU(1,"Th\u1eddi gian bay"),e.qZA())}function ie(o,s){if(1&o&&(e.TgZ(0,"td",72)(1,"div",73)(2,"div",83),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",83),e._uU(6),e.ALo(7,"date"),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.xi3(4,2,1e3*t.departureTime,"dd/MM/yyyy HH:mm")," "),e.xp6(3),e.hij(" ",e.xi3(7,5,t.returnTime,"dd/MM/yyyy HH:mm")," ")}}function oe(o,s){if(1&o&&(e.TgZ(0,"td",76),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.departureTime?e.xi3(2,1,1e3*t.departureTime,"dd/MM/yyyy HH:mm"):"-"," ")}}function ae(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",84),e._UZ(2,"cf-icon",85),e._uU(3," \u0110\xe3 xu\u1ea5t v\xe9 "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","green"))}function re(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",84),e._UZ(2,"cf-icon",85),e._uU(3," \u0110\xe3 gi\u1eef ch\u1ed7 "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","yellow"))}function se(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",86),e._UZ(2,"cf-icon",87),e._uU(3," \u0110\xe3 void "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","red"))}function le(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",86),e._UZ(2,"cf-icon",87),e._uU(3," \u0110\xe3 h\u1ee7y "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","red"))}function ce(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",86),e._UZ(2,"cf-icon",87),e._uU(3," \u0110\u1eb7t ch\u1ed7 l\u1ed7i "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","red"))}function ue(o,s){1&o&&(e.ynx(0),e.TgZ(1,"cf-label",86),e._UZ(2,"cf-icon",87),e._uU(3," \u0110ang x\u1eed l\xfd "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("color","red"))}function ge(o,s){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.state)}}function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",88),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw();return e.KtG(a.gotoBookingDetail(i.bookingCode,i.airline))}),e._uU(1,"Chi ti\u1ebft"),e.qZA()}}function pe(o,s){if(1&o&&(e.TgZ(0,"tr",69)(1,"td",70),e._UZ(2,"img",71),e.qZA(),e.TgZ(3,"td",72),e._uU(4),e.qZA(),e.TgZ(5,"td",72)(6,"div",73),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.YNc(9,ie,8,8,"td",74),e.YNc(10,oe,3,4,"td",75),e.TgZ(11,"td",76),e._uU(12),e.ALo(13,"truncateName"),e.qZA(),e.TgZ(14,"td",72)(15,"div",77),e.YNc(16,ae,4,1,"ng-container",78),e.YNc(17,re,4,1,"ng-container",78),e.YNc(18,se,4,1,"ng-container",78),e.YNc(19,le,4,1,"ng-container",78),e.YNc(20,ce,4,1,"ng-container",78),e.YNc(21,ue,4,1,"ng-container",78),e.YNc(22,ge,2,1,"ng-container",79),e.qZA()(),e.TgZ(23,"td",76),e._uU(24),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td",72),e._uU(27),e.qZA(),e.TgZ(28,"td",72),e._uU(29),e.qZA(),e.TgZ(30,"td",80),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td",81),e.YNc(34,de,2,0,"div",82),e.qZA()()),2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij(" ",t.bookingCode||"-"," "),e.xp6(3),e.hij(" ",e.xi3(8,19,t.bookedTime,"dd/MM/yyyy HH:mm")," "),e.xp6(2),e.Q6J("ngIf",t.returnTime),e.xp6(1),e.Q6J("ngIf",!t.returnTime),e.xp6(2),e.Oqu(e.xi3(13,22,t.passengerName,20)),e.xp6(3),e.Q6J("ngSwitch",t.state),e.xp6(1),e.Q6J("ngSwitchCase","ISSUED"),e.xp6(1),e.Q6J("ngSwitchCase","BOOKED"),e.xp6(1),e.Q6J("ngSwitchCase","VOID"),e.xp6(1),e.Q6J("ngSwitchCase","CANCEL"),e.xp6(1),e.Q6J("ngSwitchCase","ERROR"),e.xp6(1),e.Q6J("ngSwitchCase","IN_PROGRESS"),e.xp6(3),e.hij(" ",t.timeKeepHolding?e.xi3(25,25,1e3*t.timeKeepHolding,"dd/MM/yyyy HH:mm"):"-"," "),e.xp6(3),e.Oqu(t.userBooked||"-"),e.xp6(2),e.Oqu(t.agentName||"-"),e.xp6(2),e.hij("",e.lcZ(32,28,t.total)," \u0111"),e.xp6(2),e.Q6J("sticky","right"),e.xp6(1),e.Q6J("ngIf",t.bookingCode)}}function me(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",102),e._UZ(2,"cf-icon",103),e.TgZ(3,"div",104),e._uU(4,"\u0110\xe3 xu\u1ea5t v\xe9"),e.qZA()(),e.BQk())}function he(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",105),e._UZ(2,"cf-icon",106),e.TgZ(3,"div",107),e._uU(4,"\u0110ang gi\u1eef ch\u1ed7"),e.qZA()(),e.BQk())}function fe(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",108),e._UZ(2,"cf-icon",109),e.TgZ(3,"div",110),e._uU(4,"\u0110\xe3 void"),e.qZA()(),e.BQk())}function _e(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",111),e._UZ(2,"cf-icon",112),e.TgZ(3,"div",113),e._uU(4,"\u0110\xe3 h\u1ee7y"),e.qZA()(),e.BQk())}function xe(o,s){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.state)}}function ve(o,s){if(1&o&&(e.TgZ(0,"div",94)(1,"div",95),e._uU(2,"H\u1ea1n gi\u1eef ch\u1ed7"),e.qZA(),e.TgZ(3,"div",96),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&o){const t=e.oxw(2).$implicit;e.xp6(4),e.hij("",e.xi3(5,1,1e3*t.timeKeepHolding,"dd/MM/yyyy HH:mm")," ")}}function ke(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw();return e.KtG(a.gotoBookingDetail(i.bookingCode,i.airline))}),e.TgZ(1,"div",91),e._UZ(2,"img",92),e.TgZ(3,"div",93),e.YNc(4,me,5,0,"ng-container",78),e.YNc(5,he,5,0,"ng-container",78),e.YNc(6,fe,5,0,"ng-container",78),e.YNc(7,_e,5,0,"ng-container",78),e.YNc(8,xe,2,1,"ng-container",79),e.qZA()(),e.TgZ(9,"div",94)(10,"div",95),e._uU(11,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(12,"div",96),e._uU(13),e.qZA()(),e.TgZ(14,"div",94)(15,"div",95),e._uU(16,"Ng\xe0y \u0111\u1eb7t"),e.qZA(),e.TgZ(17,"div",96),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.YNc(20,ve,6,4,"div",97),e.TgZ(21,"div",98)(22,"div",99)(23,"div",100),e._uU(24,"M\xe3 v\xe9"),e.qZA(),e.TgZ(25,"div",101),e._uU(26),e.qZA()(),e.TgZ(27,"div",99)(28,"div",100),e._uU(29,"Ng\xe0y bay"),e.qZA(),e.TgZ(30,"div",101),e._uU(31),e.ALo(32,"date"),e.qZA()(),e.TgZ(33,"div",99)(34,"div",100),e._uU(35,"Ng\xe0y v\u1ec1"),e.qZA(),e.TgZ(36,"div",101),e._uU(37),e.ALo(38,"date"),e.qZA()()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.s9C("src",t.airlineMobileLogo,e.LSH),e.xp6(1),e.Q6J("ngSwitch",t.state),e.xp6(1),e.Q6J("ngSwitchCase","ISSUED"),e.xp6(1),e.Q6J("ngSwitchCase","BOOKED"),e.xp6(1),e.Q6J("ngSwitchCase","VOID"),e.xp6(1),e.Q6J("ngSwitchCase","CANCEL"),e.xp6(6),e.Oqu(t.passengerName),e.xp6(5),e.Oqu(e.xi3(19,12,t.bookedTime,"dd/MM/yyyy HH:mm")),e.xp6(2),e.Q6J("ngIf",t.timeKeepHolding>0),e.xp6(6),e.Oqu(t.bookingCode),e.xp6(5),e.Oqu(e.xi3(32,15,1e3*t.departureTime,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(38,18,t.returnTime,"dd/MM/yyyy"))}}function Ce(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ke,39,21,"div",89),e.BQk()),2&o){const t=s.index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t<n.ticketInfiniteScrollCount)}}function Te(o,s){1&o&&e._UZ(0,"cf-input-hint",68),2&o&&e.Q6J("hint","Th\u1eddi gian kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function be(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",114)(1,"div",115)(2,"cf-input-group",116),e._UZ(3,"cf-icon",19)(4,"input",117,21),e.qZA(),e.TgZ(6,"cf-select",118)(7,"label",119)(8,"span"),e._uU(9,"L\u1ecdc theo"),e.qZA()()(),e.TgZ(10,"cf-input-group",120),e._UZ(11,"cf-icon",9),e.TgZ(12,"label",119),e._uU(13,"Th\u1eddi gian"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(142);return e.KtG(i.openTimeSelectBts(a))})("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.dateRangeStr=i)}),e.qZA(),e.TgZ(15,"div",11),e.YNc(16,Te,1,1,"cf-input-hint",12),e.qZA()(),e.TgZ(17,"cf-select",118)(18,"label",119)(19,"span"),e._uU(20,"H\xe3ng bay"),e.qZA()()(),e.TgZ(21,"cf-select",118)(22,"label",119)(23,"span"),e._uU(24,"Tr\u1ea1ng th\xe1i"),e.qZA()()()(),e.TgZ(25,"div")(26,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search())}),e._UZ(27,"cf-icon",122),e.TgZ(28,"div"),e._uU(29,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.searchForm.controls.searchText),e.xp6(2),e.Q6J("status","default")("data",t.timeSelectOption)("allowSearch",!1)("formControl",t.searchForm.controls.timeType),e.xp6(4),e.Q6J("status",t.invalidTimeFilter?"error":"default"),e.xp6(4),e.Q6J("ngModel",t.dateRangeStr),e.xp6(2),e.Q6J("ngIf",t.invalidTimeFilter),e.xp6(1),e.Q6J("status","default")("data",t.airlineSelectOption)("allowSearch",!1)("formControl",t.searchForm.controls.airline),e.xp6(4),e.Q6J("status","default")("data",t.stateBookingOption)("allowSearch",!1)("formControl",t.searchForm.controls.stateBooking)}}function Ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",123)(1,"div",124)(2,"div",125),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.scrollDown())})("scrolledUp",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.scrollUp())}),e.TgZ(3,"cf-datepicker-inline",126),e.NdJ("dateSelect",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onMobileDateSelection(i,a.searchForm.controls.fromDate,a.searchForm.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",127)(5,"button",128),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("displayMonths",t.numOfMonth)("displayMonthsOffset",t.displayMonthsOffset)("rangeSelection",!0)("fromDate",t.searchForm.controls.fromDate.value)("startDate",t.startDate)("toDate",t.searchForm.controls.toDate.value)}}function ye(o,s){if(1&o&&(e.TgZ(0,"cf-radio",135)(1,"div",136),e._UZ(2,"img",137),e.TgZ(3,"div",138),e._uU(4),e.qZA()()()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(2),e.Q6J("src",t.logo,e.LSH),e.xp6(2),e.AsE(" ",t.name," (",t.value,") ")}}function Ze(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",129)(1,"div",115)(2,"div",130)(3,"cf-radio-group",131),e.YNc(4,ye,5,4,"cf-radio",132),e.qZA()(),e.TgZ(5,"div",133)(6,"button",134),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search())}),e._uU(7,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.searchForm.controls.airline),e.xp6(1),e.Q6J("ngForOf",t.airlineSelectOption)}}function Ae(o,s){if(1&o&&(e.TgZ(0,"cf-radio",135),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function De(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",129)(1,"div",115)(2,"div",130)(3,"cf-radio-group",131),e.YNc(4,Ae,2,2,"cf-radio",132),e.qZA()(),e.TgZ(5,"div",133)(6,"button",134),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search())}),e._uU(7,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.searchForm.controls.timeType),e.xp6(1),e.Q6J("ngForOf",t.timeSelectOption)}}function Be(o,s){if(1&o&&(e.TgZ(0,"cf-radio",135),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function Me(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",129)(1,"div",115)(2,"div",130)(3,"cf-radio-group",131),e.YNc(4,Be,2,2,"cf-radio",132),e.qZA()(),e.TgZ(5,"div",133)(6,"button",134),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search())}),e._uU(7,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.searchForm.controls.stateBooking),e.xp6(1),e.Q6J("ngForOf",t.stateBookingOption)}}function Se(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",114)(1,"div",115)(2,"cf-input-group",116)(3,"label",119)(4,"span"),e._uU(5,"H\xe3ng bay"),e.qZA()(),e.TgZ(6,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.airline=i)}),e.qZA()(),e.TgZ(7,"cf-input-group",116)(8,"label",119)(9,"span"),e._uU(10,"PNR"),e.qZA()(),e.TgZ(11,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.pnr=i)}),e.qZA()(),e.TgZ(12,"cf-input-group",116)(13,"label",119)(14,"span"),e._uU(15,"Ng\xe0y bay"),e.qZA()(),e.TgZ(16,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.departDate=i)}),e.qZA()(),e.TgZ(17,"cf-input-group",116)(18,"label",119)(19,"span"),e._uU(20,"H\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(21,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.passenger=i)}),e.qZA()(),e.TgZ(22,"cf-input-group",116)(23,"label",119)(24,"span"),e._uU(25,"Tr\u1ea1ng th\xe1i"),e.qZA()(),e.TgZ(26,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.state=i)}),e.qZA()(),e.TgZ(27,"cf-input-group",116)(28,"label",119)(29,"span"),e._uU(30,"T\u1ed5ng gi\xe1"),e.qZA()(),e.TgZ(31,"input",139),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.tempFilterData.totalPrice=i)}),e.qZA()()(),e.TgZ(32,"div")(33,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.mobileFilterOk())}),e._UZ(34,"cf-icon",122),e.TgZ(35,"div"),e._uU(36,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.filterData.airline),e.xp6(5),e.Q6J("ngModel",t.filterData.pnr),e.xp6(5),e.Q6J("ngModel",t.filterData.departDate),e.xp6(5),e.Q6J("ngModel",t.filterData.passenger),e.xp6(5),e.Q6J("ngModel",t.filterData.state),e.xp6(5),e.Q6J("ngModel",t.filterData.totalPrice)}}function Ne(o,s){1&o&&e._UZ(0,"cf-spinner")}const Fe=function(){return{num:25}},we=function(){return{num:50}},Ue=function(){return{num:75}},Ie=function(){return{num:100}},qe=function(o,s,t,n){return[o,s,t,n]};let Je=(()=>{class o{constructor(t,n,i,a,r,g,b,C){this._bookingManageService=i,this._excelService=a,this._flightDataService=r,this._route=g,this._bottomSheetService=b,this._mobileDetectService=C,this.timeSelectOption=[],this.airlineSelectOption=[],this.stateBookingOption=[],this.pageSize=25,this.currentPage=1,this.listOfData=[],this.dataSource=[],this.TICKET_INFINITE_SCROLL_DEFAULT=10,this.TICKET_INFINITE_OFSET_INCREASE=10,this.ticketInfiniteScrollCount=this.TICKET_INFINITE_SCROLL_DEFAULT,this.dateRangeStr="",this.isLoading=!1,this.invalidTimeFilter=!1,this.filterData={airline:"",pnr:"",bookedDate:"",departDate:"",passenger:"",state:"",timeKeepHolding:"",user:"",agentName:"",totalPrice:""},this.tempFilterData={airline:"",pnr:"",bookedDate:"",departDate:"",passenger:"",state:"",timeKeepHolding:"",user:"",agentName:"",totalPrice:""},this.numberOfDateFilter=6,this.sortChange=(h,_)=>{let p=_.map(N=>N);for(let N=0;N<h.length;N++){const k=h[N];switch(k.key){case"airline":p=this.airlineSort(p,k);break;case"pnr":p=this.pnrSort(p,k);break;case"bookedDate":p=this.bookedTimeSort(p,k);break;case"departDate":p=this.deaprtDateSort(p,k);break;case"passenger":p=this.passengerSort(p,k);break;case"state":p=this.stateSort(p,k);break;case"user":p=this.userSort(p,k);break;case"totalPrice":p=this.totalPriceSort(p,k);break;case"timeKeepHolding":p=this.timeKeepHoldingSort(p,k);break;case"agentName":p=this.agentNameSort(p,k)}}return this.reloadScroll(),p},this.searchChange=(h,_)=>h?(this.reloadScroll(),_.filter(p=>{const N=this.removeAccents(p.passengerName.toLowerCase()),k=this.removeAccents(p.bookingCode.toLowerCase());return N.includes(h.toLocaleLowerCase())||k.includes(h.toLocaleLowerCase())})):_,this.increaseAlphabetSort=(h,_)=>h<_?-1:h>_?1:0,this.decreaseAlphabetSort=(h,_)=>h>_?-1:h<_?1:0,this.increaseNumberSort=(h,_)=>h-_,this.decreaseNumberSort=(h,_)=>_-h,this.increaseDateSort=(h,_)=>h.getTime()-_.getTime(),this.decreaseDateSort=(h,_)=>_.getTime()-h.getTime(),this.DEFAULT_NUM_OF_MONTH=4,this.INCREASE_OFFSET=4,this.numOfMonth=this.DEFAULT_NUM_OF_MONTH,this.displayMonthsOffset=0,t.registerIcons([d.wvd,d.esH,d.n78,d.PlV,d.iYu,d.LdZ,d.D7,d.xbi,d.fXw,d.poJ,d.iK7]);const E=sessionStorage.getItem("manageBookingFilter"),y=JSON.parse(E||"{}"),v=new Date;v.setDate(v.getDate()-this.numberOfDateFilter);const B=new Date,T=(0,c.p6)(v,"dd/MM/yyyy","vi-VN"),Z=(0,c.p6)(B,"dd/MM/yyyy","vi-VN");this.dateRangeStr=T+" - "+Z,this.searchForm=n.group({timeType:[y.timeType||"BOOKED_TIME",l.kI.required],fromDate:[v,l.kI.required],toDate:[B,l.kI.required],airline:[y.airline||""],searchText:[y.searchText||""],stateBooking:[y.stateBooking||""]}),this.search()}ngOnInit(){this.timeSelectOption=[{name:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7",value:"BOOKED_TIME"},{name:"Th\u1eddi gian bay",value:"DEPART_TIME"}],this.airlineSelectOption=[{name:"T\u1ea5t c\u1ea3 h\xe3ng bay",value:"",logo:this._flightDataService.getAirlineLogoByCode("")},{name:"Vietnam Airline",value:"VN",logo:this._flightDataService.getAirlineLogoByCode("VN")},{name:"Bamboo Airways",value:"QH",logo:this._flightDataService.getAirlineLogoByCode("QH")},{name:"Vietjet Air",value:"VJ",logo:this._flightDataService.getAirlineLogoByCode("VJ")}],this.stateBookingOption=[{name:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i",value:""},{name:"\u0110\xe3 gi\u1eef ch\u1ed7",value:"BOOKED"},{name:"\u0110\xe3 xu\u1ea5t v\xe9",value:"ISSUED"},{name:"\u0110\xe3 h\u1ee7y",value:"CANCEL"},{name:"\u0110\xe3 void",value:"REFUND"},{name:"\u0110ang x\u1eed l\xed",value:"IN_PROGRESS"},{name:"\u0110\u1eb7t ch\u1ed7 l\u1ed7i",value:"INVALID"}]}fromDateChange(t){t&&(this.minToDate=new M.Ao(t.getFullYear(),t.getMonth()+1,t.getDate()))}resetRangeDate(t,n){t.setValue(""),n.setValue("")}onDateSelection(t,n,i,a){if(n.value||i.value)if(n.value&&!i.value&&t&&t.getTime()>=n.value.getTime()){i.setValue(t),a.close(),this.startDate=n.value;const r=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=r}else{i.setValue(null),n.setValue(t);const r=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}else{n.setValue(t),i.setValue(null);const r=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}this.invalidTimeFilter=n.invalid||i.invalid}search(){if(this._mobileDetectService.isMobile()&&this.btsSearchMobile&&this.btsSearchMobile.dismiss(),this.searchForm.valid){const t={airline:this.searchForm.controls.airline.value,bookedTime:"BOOKED_TIME"===this.searchForm.controls.timeType.value?1:0,bookingCodeOrPassName:this.searchForm.controls.searchText.value.trim().toUpperCase(),fromDateTime:(0,c.p6)(this.searchForm.controls.fromDate.value,"yyyy-MM-dd","vi-VN"),toDateTime:(0,c.p6)(this.searchForm.controls.toDate.value,"yyyy-MM-dd","vi-VN"),state:this.searchForm.controls.stateBooking.value};this.isLoading=!0,this._bookingManageService.getBookingTicket(t).pipe((0,S.x)(()=>this.isLoading=!1)).subscribe({next:n=>{this.dataSource=n.data.sort((i,a)=>a.bookedTime-i.bookedTime).map(i=>({airline:i.airline||"",airlineName:i.airlineName||"",airlineLogo:this._flightDataService.getAirlineLogoByCode(i.airline)||"",airlineMobileLogo:this._flightDataService.getSmallAirlineLogoByCode(i.airline)||"",bookingCode:i.bookingCode||"",provider:i.provider||"",passengerName:i.passengerName||"",state:i.state||"",bookedTime:new Date(1e3*i.bookedTime),departureTime:i.departureTime||0,returnTime:i.returnTime?new Date(1e3*i.returnTime):void 0,userBooked:i.userBooked||"",total:i.total||0,timeKeepHolding:i.timeKeepHolding||0,agentName:i.agentName||""})),this.listOfData=this.dataSource.map(i=>i),this.reloadScroll()}}),sessionStorage.setItem("manageBookingFilter",JSON.stringify(this.searchForm.value))}this.searchForm.markAllAsTouched()}reloadScroll(){this.ticketInfiniteScrollCount=this.TICKET_INFINITE_SCROLL_DEFAULT}removeAccents(t){return t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D"):""}airlineSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.airline,a.airline):(i,a)=>this.decreaseAlphabetSort(i.airline,a.airline))}pnrSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.bookingCode,a.bookingCode):(i,a)=>this.decreaseAlphabetSort(i.bookingCode,a.bookingCode))}bookedTimeSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseDateSort(i.bookedTime,a.bookedTime):(i,a)=>this.decreaseDateSort(i.bookedTime,a.bookedTime))}deaprtDateSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>i.departureTime-a.departureTime:(i,a)=>a.departureTime-i.departureTime)}passengerSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.passengerName,a.passengerName):(i,a)=>this.decreaseAlphabetSort(i.passengerName,a.passengerName))}stateSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.state,a.state):(i,a)=>this.decreaseAlphabetSort(i.state,a.state))}userSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.userBooked,a.userBooked):(i,a)=>this.decreaseAlphabetSort(i.userBooked,a.userBooked))}totalPriceSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseNumberSort(i.total,a.total):(i,a)=>this.decreaseNumberSort(i.total,a.total))}timeKeepHoldingSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseNumberSort(i.timeKeepHolding,a.timeKeepHolding):(i,a)=>this.decreaseNumberSort(i.timeKeepHolding,a.timeKeepHolding))}agentNameSort(t,n){return t.sort("ascend"===n.sort?(i,a)=>this.increaseAlphabetSort(i.agentName,a.agentName):(i,a)=>this.decreaseAlphabetSort(i.agentName,a.agentName))}checkChange(t){this.pageSize=parseInt(t)}exportExcel(t){const n="ve_"+(0,c.p6)(new Date,"yyyy-MM-dd","vi-VN");this._excelService.exportToExcel(t.map(i=>({airline:i.airline,bookingCode:i.bookingCode,bookedTime:(0,c.p6)(i.bookedTime,"dd/MM/yyyy HH:mm","vi-VN"),departureTime:i.returnTime?(0,c.p6)(1e3*i.departureTime,"dd/MM/yyyy HH:mm","vi-VN")+" - "+(0,c.p6)(i.returnTime,"dd/MM/yyyy HH:mm","vi-VN"):(0,c.p6)(1e3*i.departureTime,"dd/MM/yyyy HH:mm","vi-VN"),passengerName:i.passengerName,state:i.state,userBooked:i.userBooked,total:i.total})),["H\xe3ng bay","PNR","Ng\xe0y \u0111\u1eb7t","Ng\xe0y bay","H\xe0nh kh\xe1ch","Tr\u1ea1ng th\xe1i","Ng\u01b0\u1eddi \u0111\u1eb7t","T\u1ed5ng gi\xe1"],n,[{wch:10},{wch:10},{wch:20},{wch:25},{wch:25},{wch:10},{wch:20},{wch:20}])}gotoBookingDetail(t,n){this._route.navigate([`admin/booking-detail/${n}/${t}`])}ticketTrackByFn(t,n){return n.bookingCode}onScrollDown(){this.ticketInfiniteScrollCount+=this.TICKET_INFINITE_OFSET_INCREASE}mobileFilterOk(){this.filterData={airline:this.tempFilterData.airline,pnr:this.tempFilterData.pnr,bookedDate:this.tempFilterData.bookedDate,departDate:this.tempFilterData.departDate,passenger:this.tempFilterData.passenger,state:this.tempFilterData.state,timeKeepHolding:this.tempFilterData.timeKeepHolding,user:this.tempFilterData.user,agentName:this.tempFilterData.agentName,totalPrice:this.tempFilterData.totalPrice},this.filterChange(),this._bottomSheetService.dismiss()}filterChange(){this.listOfData=this.dataSource.filter(t=>{const n=this.removeAccents(this.filterData.airline.toLowerCase()),i=this.removeAccents(t.airline.toLowerCase()),a=this.removeAccents(t.provider.toLowerCase());if("gds".includes(n)){if(!a.includes(n))return!1}else if(!i.includes(n))return!1;const r=this.removeAccents(this.filterData.pnr.toLowerCase());if(!this.removeAccents(t.bookingCode.toLowerCase()).includes(r))return!1;const b=this.removeAccents(this.filterData.bookedDate.toLowerCase());if(!this.removeAccents((0,c.p6)(t.bookedTime,"dd/MM/yyyy HH:mm","vi-VN")).includes(b))return!1;const E=this.removeAccents(this.filterData.departDate.toLowerCase());if(!`${this.removeAccents((0,c.p6)(new Date(1e3*t.departureTime),"dd/MM/yyyy HH:mm","vi-VN"))} ${t.returnTime?this.removeAccents((0,c.p6)(t.returnTime,"dd/MM/yyyy HH:mm","vi-VN")):""}`.includes(E))return!1;const B=this.removeAccents(this.filterData.passenger.toLowerCase());if(!this.removeAccents(t.passengerName.toLowerCase()).includes(B))return!1;let Z="";switch(t.state){case"ISSUED":Z="\u0110\xe3 xu\u1ea5t v\xe9";break;case"BOOKED":Z="\u0110\xe3 gi\u1eef ch\u1ed7";break;case"VOID":Z="\u0110\xe3 void";break;case"CANCEL":Z="\u0110\xe3 h\u1ee7y";break;case"ERROR":Z="\u0110\u1eb7t ch\u1ed7 l\u1ed7i";break;case"IN_PROGRESS":Z="\u0110ang x\u1eed l\xfd"}const h=this.removeAccents(this.filterData.state.toLowerCase());if(!this.removeAccents(Z.toLowerCase()).includes(h))return!1;const p=this.removeAccents(this.filterData.timeKeepHolding.toLowerCase());if(!this.removeAccents((0,c.p6)(new Date(1e3*t.timeKeepHolding),"dd/MM/yyyy HH:mm","vi-VN")).includes(p))return!1;const k=this.removeAccents(this.filterData.user.toLowerCase());if(!this.removeAccents(t.userBooked.toLowerCase()).includes(k))return!1;const Zt=this.removeAccents(this.filterData.agentName.toLowerCase());if(!this.removeAccents(t.agentName.toLowerCase()).includes(Zt))return!1;const At=this.removeAccents(this.filterData.totalPrice.toLowerCase());return!!this.removeAccents(t.total.toString().toLowerCase()).includes(At)})}openSearchBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"Danh s\xe1ch \u0111\u1eb7t ch\u1ed7",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._leftButtonClick.subscribe(()=>this.btsSearchMobile.dismiss())}openFilterBts(t){this.tempFilterData={airline:"",pnr:"",bookedDate:"",departDate:"",passenger:"",state:"",timeKeepHolding:"",user:"",agentName:"",totalPrice:""};const n=this._bottomSheetService.open(t,{headerTitle:"B\u1ed9 l\u1ecdc",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});n.containerInstance._leftButtonClick.subscribe(()=>n.dismiss())}openAirlineBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"H\xe3ng bay",rightButtonIcon:"close",leftButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._rightButtonClick.subscribe(()=>this.btsSearchMobile.dismiss())}openTimeTypeBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"Lo\u1ea1i th\u1eddi gian",rightButtonIcon:"close",leftButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._rightButtonClick.subscribe(()=>this.btsSearchMobile.dismiss())}openStatusBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"Tr\u1ea1ng th\xe1i",rightButtonIcon:"close",leftButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._rightButtonClick.subscribe(()=>this.btsSearchMobile.dismiss())}openTimeSelectBts(t,n=""){if(this._mobileDetectService.mobileSubject.value){const i=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1});i.afterDismissed().subscribe(a=>{this.displayMonthsOffset=0,this.numOfMonth=0,"TIME_ONLY"===n&&this.search()}),i.containerInstance._leftButtonClick.subscribe(a=>{i.dismiss()}),setTimeout(()=>{this.displayMonthsOffset=this.DEFAULT_NUM_OF_MONTH})}}scrollDown(){this.numOfMonth=this.numOfMonth+this.INCREASE_OFFSET}scrollUp(){this.displayMonthsOffset=this.displayMonthsOffset+this.INCREASE_OFFSET}onMobileDateSelection(t,n,i){if(n.value||i.value)if(n.value&&!i.value&&t&&t.getTime()>=n.value.getTime()){i.setValue(t),this.startDate=n.value;const a=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=a}else if(n.value&&i.value&&t&&t.getTime()>i.value.getTime()){i.setValue(null),n.setValue(t);const a=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=a+" - "}else if(n.value&&i.value&&t&&t.getTime()<i.value.getTime()){n.setValue(t);const a=(0,c.p6)(t,"dd/MM/yyyy","vi-VN"),r=(0,c.p6)(i.value,"dd/MM/yyyy","vi-VN");this.dateRangeStr=a+" - "+r}else{n.setValue(t);const a=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=a+" - "}else{n.setValue(t);const a=(0,c.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=a+" - "}}onMobileDatePickerOK(){this._bottomSheetService.dismiss()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.KNP),e.Y36(l.qu),e.Y36(Q.fB),e.Y36(W.x),e.Y36(L.G),e.Y36(O.F0),e.Y36(F.a2),e.Y36(V.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["manage-booking-page"]],standalone:!0,features:[e.jDz],decls:152,vars:81,consts:[[1,"flex","flex-col","py-4","px-[30px]","bg-white","w-full","md:py-3","md:pl-4","md:pr-0"],[1,"text-heading-sm","text-neutral-gray-6","mb-3","hidden","md:block"],[1,"flex","gap-x-[17px]","md:flex-col"],[1,"flex","flex-col","grow","gap-y-4"],[1,"flex","w-full","justify-between","items-end","md:hidden"],["size","medium","textField","name","valueField","value",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],["cfLabel",""],[1,"flex","mr-2"],[1,"grow",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],[1,"hidden"],["cfHint","",3,"hint",4,"ngIf"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","name","valueField","value","size","medium",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],["textField","name","valueField","value","size","medium",1,"grow-[180]",3,"formControl","data","allowSearch"],[1,"flex","justify-center","gap-x-2","items-center"],[1,"!w-full","md:mr-4","md:hidden"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm trong danh s\xe1ch k\u1ebft qu\u1ea3...",3,"formControl","keydown.enter"],["tableSearchInput",""],[1,"hidden","!w-full","md:mr-4","md:block"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm trong danh s\xe1ch k\u1ebft qu\u1ea3...",3,"formControl","focus"],[1,"gap-x-2","hidden","md:flex","overflow-x-auto","mt-3","pr-4"],[1,"gap-x-1.5","items-center","border","border-neutral-gray-3","rounded-full","px-4","py-[5px]","hidden","md:flex",3,"click"],[1,"text-body-md","whitespace-nowrap"],["icon","filter_alt","size","small",1,"text-neutral-gray-5"],["class","text-body-md whitespace-nowrap",4,"ngIf"],["icon","chevron_down","size","small",1,"text-neutral-gray-5"],[1,"flex","flex-col","justify-end","w-[168px]","shrink-0","md:hidden"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"disabled","click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"flex","justify-start","mt-4","md:justify-between","md:mr-4"],["size","medium"],[1,"md:flex","hidden","gap-x-1.5",3,"click"],["icon","export","size","small"],[1,"text-body-md"],[1,"py-4","px-[30px]","rounded-lg","md:hidden"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","","type","secondary",3,"click"],["icon","export","size","small",1,"mr-2"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap",3,"sortName"],["cf-th","",3,"sticky"],["cf-td","",1,"py-2","px-1","!bg-neutral-white"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc",3,"ngModel","ngModelChange","input"],["cf-td","",1,"py-2","px-1","!bg-neutral-white",3,"sticky"],["cf-td","",3,"sticky"],["ngFor","",3,"ngForOf"],[1,"hidden","md:flex","p-4","flex-col"],[1,"w-full","flex","items-center","justify-between"],[1,"text-body-md","text-neutral-gray-6"],[1,"flex","gap-x-1.5","text-neutral-gray-6","items-center"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[4,"ngFor","ngForOf","ngForTrackBy"],["searchBts",""],["timeDatepickerBottomSheet",""],["airlineBts",""],["timeTypeBts",""],["statusBts",""],["filterBts",""],[4,"ngIf"],["cfHint","",3,"hint"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],[1,"w-12","h-6","object-contain",3,"src"],[1,"py-2","px-3","text-body-sm"],[1,"w-[120px]"],["class","py-2 px-3 text-body-sm",4,"ngIf"],["class","py-2 px-3 text-body-sm whitespace-nowrap",4,"ngIf"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap"],[1,"w-[120px]",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap","text-right"],["cf-td","",1,"py-2","px-3",3,"sticky"],["class","text-espressive-sm text-secondary-3-4 cursor-pointer whitespace-nowrap",3,"click",4,"ngIf"],[1,"whitespace-nowrap"],["type","inverted",1,"whitespace-nowrap",3,"color"],["icon","document","size","small",1,"mr-2.5"],["type","inverted",3,"color"],["icon","error","size","small",1,"mr-2.5"],[1,"text-espressive-sm","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"click"],["class","flex flex-col rounded-lg bg-white p-3 mt-3 gap-y-2 shadow-cf-sm",3,"click",4,"ngIf"],[1,"flex","flex-col","rounded-lg","bg-white","p-3","mt-3","gap-y-2","shadow-cf-sm",3,"click"],[1,"flex","justify-between","items-center"],[1,"w-9","h-9","object-contain",3,"src"],[3,"ngSwitch"],[1,"flex","justify-start","items-center"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"text-express-md","text-neutral-gray-6"],["class","flex justify-start items-center",4,"ngIf"],[1,"flex","p-2","justify-between","rounded","bg-neutral-gray-1"],[1,"flex","flex-col","gap-y-2","w-[70px]"],[1,"text-body-sm","text-neutral-gray-4"],[1,"text-express-sm","text-neutral-gray-6"],[1,"py-1","px-2","rounded","flex","gap-x-1","bg-secondary-5-1","w-fit"],["icon","document",1,"text-secondary-5-4"],[1,"text-espressive-sm","text-secondary-5-4"],[1,"py-1","px-2","rounded","flex","gap-x-1","bg-secondary-7-1","w-fit"],["icon","document",1,"text-secondary-7-4"],[1,"text-espressive-sm","text-secondary-7-4"],[1,"py-1","px-2","rounded","flex","gap-x-1","bg-[#ffeceb]","w-fit"],["icon","document",1,"text-secondary-6-4"],[1,"text-espressive-sm","text-primary-1-4"],[1,"py-1","px-2","rounded","flex","gap-x-1","bg-neutral-gray-1","w-fit"],["icon","coupon_slash",1,"text-neutral-black"],[1,"text-espressive-sm","text-neutral-black"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"!w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm trong danh s\xe1ch k\u1ebft qu\u1ea3",3,"formControl"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn tr\u1ea1ng th\xe1i",1,"!max-w-none","w-full",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"!w-full",3,"status"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"],[1,"flex","w-full","h-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled","scrolledUp"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"displayMonths","displayMonthsOffset","rangeSelection","fromDate","startDate","toDate","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],["cf-button","",1,"justify-center","w-full",3,"click"],[1,"p-4","shadow-cf-lg","w-[280px]","bg-neutral-white","rounded","md:w-full"],[1,"flex","flex-col","gap-y-[9px]","md:gap-y-4"],[1,"flex","flex-col","gap-x-8","gap-y-4",3,"formControl"],["size","medium",3,"value",4,"ngFor","ngForOf"],[1,"hidden","md:block"],["cf-button","",1,"w-full","justify-center",3,"click"],["size","medium",3,"value"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],["size","medium","cf-input","","placeholder","Nh\u1eadp h\xe3ng bay",3,"ngModel","ngModelChange"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Qu\u1ea3n l\xfd danh s\xe1ch \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"cf-select",5)(7,"label",6),e._uU(8,"L\u1ecdc theo"),e.qZA()(),e.TgZ(9,"div",7)(10,"cf-input-group",8),e._UZ(11,"cf-icon",9),e.TgZ(12,"label",6),e._uU(13,"Th\u1eddi gian"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(18);return e.KtG(r.open())})("ngModelChange",function(r){return n.dateRangeStr=r}),e.qZA(),e.TgZ(15,"div",11),e.YNc(16,ee,1,1,"cf-input-hint",12),e.qZA()(),e.TgZ(17,"input",13,14),e.NdJ("dateSelect",function(r){e.CHM(i);const g=e.MAs(18);return e.KtG(n.onDateSelection(r,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,g))}),e.qZA()(),e.TgZ(19,"cf-select",15)(20,"label",6),e._uU(21,"H\xe3ng bay"),e.qZA()(),e.TgZ(22,"cf-select",16)(23,"label",6),e._uU(24,"Tr\u1ea1ng th\xe1i"),e.qZA()()(),e.TgZ(25,"div",17)(26,"cf-input-group",18),e._UZ(27,"cf-icon",19),e.TgZ(28,"input",20,21),e.NdJ("keydown.enter",function(){return n.search()}),e.qZA()(),e.TgZ(30,"cf-input-group",22),e._UZ(31,"cf-icon",19),e.TgZ(32,"input",23,21),e.NdJ("focus",function(){e.CHM(i);const r=e.MAs(140);return e.KtG(n.openSearchBts(r))}),e.qZA()()()(),e.TgZ(34,"div",24)(35,"div",25),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(150);return e.KtG(n.openFilterBts(r))}),e.TgZ(36,"div",26),e._uU(37,"B\u1ed9 l\u1ecdc"),e.qZA(),e._UZ(38,"cf-icon",27),e.qZA(),e.TgZ(39,"div",25),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(146);return e.KtG(n.openTimeTypeBts(r))}),e.YNc(40,te,2,0,"div",28),e.YNc(41,ne,2,0,"div",28),e._UZ(42,"cf-icon",29),e.qZA(),e.TgZ(43,"div",25),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(142);return e.KtG(n.openTimeSelectBts(r,"TIME_ONLY"))}),e.TgZ(44,"div",26),e._uU(45,"Th\u1eddi gian"),e.qZA(),e._UZ(46,"cf-icon",29),e.qZA(),e.TgZ(47,"div",25),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(144);return e.KtG(n.openAirlineBts(r))}),e.TgZ(48,"div",26),e._uU(49,"H\xe3ng bay"),e.qZA(),e._UZ(50,"cf-icon",29),e.qZA(),e.TgZ(51,"div",25),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(148);return e.KtG(n.openStatusBts(r))}),e.TgZ(52,"div",26),e._uU(53,"Tr\u1ea1ng th\xe1i"),e.qZA(),e._UZ(54,"cf-icon",29),e.qZA()(),e.TgZ(55,"div",30)(56,"button",31),e.NdJ("click",function(){return n.search()}),e._UZ(57,"cf-icon",32),e._uU(58," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(59,"div",33)(60,"cf-checkbox",34),e._uU(61,"\u1ea8n PNR h\u1ebft h\u1ea1n gi\u1eef ch\u1ed7"),e.qZA(),e.TgZ(62,"div",35),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(75);return e.KtG(n.exportExcel(r.data))}),e._UZ(63,"cf-icon",36),e.TgZ(64,"div",37),e._uU(65,"Xu\u1ea5t excel"),e.qZA()()()(),e.TgZ(66,"div",38)(67,"div",39)(68,"div",40)(69,"div",41),e._uU(70,"Qu\u1ea3n l\xfd danh s\xe1ch \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(71,"button",42),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(75);return e.KtG(n.exportExcel(r.data))}),e._UZ(72,"cf-icon",43),e._uU(73," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(74,"cf-table",44,45)(76,"thead",46)(77,"th",47),e._uU(78,"H\xe3ng bay"),e.qZA(),e.TgZ(79,"th",47),e._uU(80,"PNR"),e.qZA(),e.TgZ(81,"th",47),e._uU(82,"Ng\xe0y \u0111\u1eb7t"),e.qZA(),e.TgZ(83,"th",47),e._uU(84,"Ng\xe0y bay"),e.qZA(),e.TgZ(85,"th",47),e._uU(86,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(87,"th",47),e._uU(88,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(89,"th",47),e._uU(90,"H\u1ea1n gi\u1eef ch\u1ed7"),e.qZA(),e.TgZ(91,"th",47),e._uU(92,"Ng\u01b0\u1eddi \u0111\u1eb7t"),e.qZA(),e.TgZ(93,"th",47),e._uU(94,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(95,"th",47),e._uU(96,"T\u1ed5ng gi\xe1"),e.qZA(),e._UZ(97,"th",48),e.qZA(),e.TgZ(98,"tbody")(99,"tr")(100,"td",49)(101,"cf-input-group",50)(102,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.airline=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(103,"td",52)(104,"cf-input-group",50)(105,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.pnr=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(106,"td",52)(107,"cf-input-group",50)(108,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.bookedDate=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(109,"td",52)(110,"cf-input-group",50)(111,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.departDate=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(112,"td",52)(113,"cf-input-group",50)(114,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.passenger=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(115,"td",52)(116,"cf-input-group",50)(117,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.state=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(118,"td",52)(119,"cf-input-group",50)(120,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.timeKeepHolding=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(121,"td",52)(122,"cf-input-group",50)(123,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.user=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(124,"td",52)(125,"cf-input-group",50)(126,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.agentName=r})("input",function(){return n.filterChange()}),e.qZA()()(),e.TgZ(127,"td",52)(128,"cf-input-group",50)(129,"input",51),e.NdJ("ngModelChange",function(r){return n.filterData.totalPrice=r})("input",function(){return n.filterChange()}),e.qZA()()(),e._UZ(130,"td",53),e.qZA(),e.YNc(131,pe,35,30,"ng-template",54),e.qZA()()()(),e.TgZ(132,"div",55)(133,"div",56)(134,"div",57),e._uU(135),e.qZA(),e._UZ(136,"div",58),e.qZA(),e.TgZ(137,"div",59),e.NdJ("scrolled",function(){return n.onScrollDown()}),e.YNc(138,Ce,2,1,"ng-container",60),e.qZA()(),e.YNc(139,be,30,16,"ng-template",null,61,e.W1O),e.YNc(141,Ee,7,13,"ng-template",null,62,e.W1O),e.YNc(143,Ze,8,2,"ng-template",null,63,e.W1O),e.YNc(145,De,8,2,"ng-template",null,64,e.W1O),e.YNc(147,Me,8,2,"ng-template",null,65,e.W1O),e.YNc(149,Se,37,6,"ng-template",null,66,e.W1O),e.YNc(151,Ne,1,0,"cf-spinner",67)}if(2&t){const i=e.MAs(75);e.xp6(6),e.Q6J("formControl",n.searchForm.controls.timeType)("data",n.timeSelectOption)("allowSearch",!1),e.xp6(4),e.Q6J("status",n.invalidTimeFilter?"error":"default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(2),e.Q6J("ngIf",n.invalidTimeFilter),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.airline)("data",n.airlineSelectOption)("allowSearch",!1),e.xp6(3),e.Q6J("formControl",n.searchForm.controls.stateBooking)("data",n.stateBookingOption)("allowSearch",!1),e.xp6(6),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(4),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(8),e.Q6J("ngIf","BOOKED_TIME"===n.searchForm.controls.timeType.value),e.xp6(1),e.Q6J("ngIf","DEPART_TIME"===n.searchForm.controls.timeType.value),e.xp6(15),e.Q6J("disabled",n.invalidTimeFilter),e.xp6(18),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("pageSizeList",e.l5B(76,qe,e.DdM(72,Fe),e.DdM(73,we),e.DdM(74,Ue),e.DdM(75,Ie)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(3),e.Q6J("sortName","airline"),e.xp6(2),e.Q6J("sortName","pnr"),e.xp6(2),e.Q6J("sortName","bookedDate"),e.xp6(2),e.Q6J("sortName","departDate"),e.xp6(2),e.Q6J("sortName","passenger"),e.xp6(2),e.Q6J("sortName","state"),e.xp6(2),e.Q6J("sortName","timeKeepHolding"),e.xp6(2),e.Q6J("sortName","user"),e.xp6(2),e.Q6J("sortName","agentName"),e.xp6(2),e.Q6J("sortName","totalPrice"),e.xp6(2),e.Q6J("sticky","right"),e.xp6(5),e.Q6J("ngModel",n.filterData.airline),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.pnr),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.bookedDate),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.departDate),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.passenger),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.state),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.timeKeepHolding),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.user),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.agentName),e.xp6(1),e.Q6J("sticky","left"),e.xp6(2),e.Q6J("ngModel",n.filterData.totalPrice),e.xp6(1),e.Q6J("sticky","right"),e.xp6(1),e.Q6J("ngForOf",i.partOfdata),e.xp6(4),e.hij("",n.listOfData.length," k\u1ebft qu\u1ea3"),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",n.listOfData)("ngForTrackBy",n.ticketTrackByFn),e.xp6(13),e.Q6J("ngIf",n.isLoading)}},dependencies:[x.q,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,m.j$,m.ND,m.BN,m.v2,c.ez,c.sg,c.O5,c.RF,c.n9,c.ED,c.JJ,c.uU,d.AxE,d.Sm8,M.Cs,f.N8,f.Xq,D.rC,D.E_,D.qS,D.zs,U.u,J.Rq,J.Ry,I.b,X,A.OR,F.DW,M._o,P.T,P.o],encapsulation:2}),o})();var z=u(72853),q=u(20348),Y=u(80296),H=u(15439),G=u(95293),R=u(97579),Pe=u(2225),$=u(22340),j=u(62331);function Oe(o,s){1&o&&e._UZ(0,"cf-hint",26),2&o&&e.Q6J("hint","Ch\u01b0a nh\u1eadp booking code")}function He(o,s){if(1&o&&(e.TgZ(0,"cf-radio",33),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function Qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"cf-radio-group",29),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.mobileAirlineChange(i))}),e.YNc(3,He,2,2,"cf-radio",30),e.qZA()(),e.TgZ(4,"div",31)(5,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.airlineOptionChange())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.searchForm.controls.airline.value),e.xp6(1),e.Q6J("ngForOf",t.airlineSelectOption)}}function Le(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"cf-input-group",18),e._UZ(3,"cf-icon",6)(4,"input",36),e.qZA(),e.TgZ(5,"cf-select",37),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.mobileAirlineChange(i))}),e.TgZ(6,"label",38),e._uU(7,"H\xe3ng bay"),e.qZA()()(),e.TgZ(8,"div")(9,"button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onMobileSearch())}),e._UZ(10,"cf-icon",40),e.TgZ(11,"div"),e._uU(12,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.searchForm.controls.searchText),e.xp6(1),e.Q6J("ngModel",t.searchForm.controls.airline.value)("data",t.airlineSelectOption)("allowSearch",!1)}}function Ye(o,s){1&o&&(e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45),e._UZ(5,"img",46),e.qZA(),e.TgZ(6,"div",47),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 xu\u1ea5t v\xe9 "),e.qZA(),e.TgZ(8,"div",48),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",49),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function je(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",51)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7!"),e.qZA()(),e.BQk())}function Ke(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",52)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Ve(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",52)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function ze(o,s){if(1&o&&(e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45),e._UZ(5,"img",50),e.qZA(),e.YNc(6,je,8,0,"ng-container",25),e.YNc(7,Ke,6,0,"ng-container",25),e.YNc(8,Ve,6,0,"ng-container",25),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function Ge(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",53)(1,"issue-booking-detail",54),e.NdJ("issueBooking",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onIssue())})("gotoBooking",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onGotoBooking())})("selectedAgent",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onSelectedAgent(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("optionAgent",t.optionAgent)("isLoading",t.isLoading)("bookingDetail",t.bookingDetail)("priceDetail",t.priceDetail)}}function Re(o,s){1&o&&(e.TgZ(0,"div",55)(1,"div",56),e._UZ(2,"ticket-item-skeleton",57)(3,"ticket-item-skeleton",57)(4,"ticket-item-skeleton",57)(5,"ticket-item-skeleton",57),e.qZA()())}function $e(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"cf-spinner"),e.qZA())}let Xe=(()=>{class o{constructor(t,n,i,a,r,g,b,C,E,y,v,B,T){this._router=i,this._bookingDetailService=a,this._manageBookingService=r,this._modal=g,this._flightDataService=b,this._route=C,this._userService=E,this._searchFlightService=y,this._toastService=v,this._bottomSheetService=B,this._mobileDetectService=T,this.airlineSelectOption=[],this.stateMode="search_default",this.isLoading=!1,this.isLoadingIssue=!1,this.optionAgent=[],t.registerIcons([d.esH,d.n78]),this.searchForm=n.group({airline:["all",l.kI.required],searchText:["",l.kI.required]})}ngOnInit(){this.airlineSelectOption=[{name:"T\u1ef1 \u0111\u1ed9ng",value:"all"},{name:"Vietnam Airlines",value:"VN"},{name:"Bamboo Airways",value:"QH"},{name:"Vietjet Air",value:"VJ"}]}getAllAgentUser(){this._userService.getAutocompleteUser().subscribe({next:t=>{t.success&&(this.optionAgent=t.data.map(n=>({id:n.id,name:`${n.username} - ${n.name}`})))}})}onSearch(){if(this.searchForm.invalid)return;this.isLoading=!0;const n={airline:"all"===this.searchForm.controls.airline.value?"":this.searchForm.controls.airline.value,bookingCode:this.searchForm.value.searchText.trim().toUpperCase(),globalSearch:!1};this._searchFlightService.searchByPNR(n).pipe((0,S.x)(()=>this.isLoading=!1)).subscribe({next:i=>{i.success&&i.data&&("VN"===i.data.airline&&"CANCEL"!==i.data.state||"BOOKED"===i.data.state)?(this.internal=i.data.internal,this.stateMode="has_value",this.bookingCode=i.data.bookingCode,this.airline=i.data.airline,this.initBookingDetail(i.data),this.initPriceDetail(i.data),this.bookingDetail.internal||this.getAllAgentUser()):this.stateMode=i.success&&i.data&&("CANCEL"===i.data.state||"VOID"===i.data.state)?"cancelled":i.success&&i.data&&"ISSUED"===i.data.state?"issued":"not_found"},error:()=>{this.stateMode="not_found"}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:this._flightDataService.getAirlineSystemNameByCode(t.airline),startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,statusText:t.getStatusText(),internal:t.internal,status:t.state,flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,journeys:t.journeys.map(n=>({startPoint:n.departure.airport.code,endPoint:n.arrival.airport.code,startTime:H(n.departure.localTime).toDate(),flightNumber:n.segments[0].operating+n.segments[0].flightNumber})),passengers:t.passengers.map(n=>({name:n.getName(),type:n.getType()}))}}initPriceDetail(t){const n=t.passengers.map(i=>({name:i.getName(),type:i.type,typeName:i.getType(),key:i.key}));this.priceDetail={provider:t.journeys.map(i=>i.airline||i.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.total,passengers:n.map(i=>({name:i.name,type:i.typeName,base:t.fareCharges.getBaseCharge(i.type),tax:t.fareCharges.getTaxCharge(i.type)+t.fareCharges.getVATCharge(i.type),total:t.fareCharges.getTotalCharge(i.type)}))}}onIssue(){var t;const n={agentId:(null===(t=this.agentSelected)||void 0===t?void 0:t.id)||"",airline:this.airline,bookingCode:this.bookingCode,bookingPrice:0,internal:this.internal},i=`/admin/booking-detail/${this.airline}/${this.bookingCode}`;this._modal.open(A.V0,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xu\u1ea5t v\xe9 cho t\u1ea5t c\u1ea3 h\xe0nh kh\xe1ch kh\xf4ng?",hasIcon:!1}).afterClosed$.subscribe({next:r=>{r.data&&(this.isLoadingIssue=!0,this._manageBookingService.issueTicket(n).pipe((0,S.x)(()=>this.isLoadingIssue=!1)).subscribe({next:g=>{var b,C;if(g.success)this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:"M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this._router.navigate([i]);else if("DS-EL002"===g.objectError.errorCode){const E=g.objectError.errorData.newPrice-g.objectError.errorData.oldPrice,y={newPrice:g.objectError.errorData.newPrice,oldPrice:g.objectError.errorData.oldPrice,priceGap:Math.abs(E),type:E>0?"+":"-"};if(this._mobileDetectService.isMobile()){const v=this._bottomSheetService.open(q.EH,{headerTitle:"Chi ph\xed thay \u0111\u1ed5i",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{priceChangeData:y}});v.containerInstance._leftButtonClick.subscribe(B=>v.dismiss()),v.afterDismissed().subscribe(B=>{B&&(this.isLoadingIssue=!0,this._manageBookingService.issueTicket(n).pipe((0,S.x)(()=>this.isLoadingIssue=!1)).subscribe({next:T=>{T.success?(this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:"M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this._router.navigate([i])):this._toastService.add({severity:"error",summary:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",detail:T.objectError.errorDescription.vi?T.objectError.errorDescription.vi:T.objectError.errorDescription.en,sticky:!1,life:1e4})},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Xu\u1ea5t s\u1ed1 v\xe9 kh\xf4ng th\xe0nh c\xf4ng. Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",sticky:!1,life:1e4})}}))})}else this._modal.open(q.EH,{priceChangeData:y}).afterClosed$.subscribe({next:B=>{B.data&&(this.isLoadingIssue=!0,this._manageBookingService.issueTicket(n).pipe((0,S.x)(()=>this.isLoadingIssue=!1)).subscribe({next:T=>{T.success?(this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:"M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this._router.navigate([i])):this._toastService.add({severity:"error",summary:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",detail:T.objectError.errorDescription.vi?T.objectError.errorDescription.vi:T.objectError.errorDescription.en,sticky:!1,life:1e4})}}))}})}else{const E=(null===(b=g.objectError)||void 0===b?void 0:b.errorDescription.vi)||(null===(C=g.objectError)||void 0===C?void 0:C.errorDescription.en);this._toastService.add({severity:"error",summary:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",detail:E,sticky:!1,life:1e4})}},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Xu\u1ea5t s\u1ed1 v\xe9 kh\xf4ng th\xe0nh c\xf4ng. Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",sticky:!1,life:1e4})}}))}})}onGotoBooking(){const t=this._getCurrentUrl();window.open(t)}onSelectedAgent(t){this.agentSelected=t}_getCurrentUrl(){return`${window.location.origin}/admin/booking-detail/${this.airline}/${this.bookingCode}`}onMobileSearch(){this.tempMobileAirline&&this.searchForm.controls.airline.setValue(this.tempMobileAirline),this._bottomSheetService.dismiss(),this.onSearch()}openSearchBts(t){const n=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",rightButtonIcon:"",leftButtonIcon:"close",containerFullHeigh:!0,leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});n.containerInstance._leftButtonClick.subscribe(()=>n.dismiss())}openAirlineBts(t){const n=this._bottomSheetService.open(t,{headerTitle:"H\xe3ng bay",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});n.containerInstance._leftButtonClick.subscribe(()=>n.dismiss())}mobileAirlineChange(t){this.tempMobileAirline=t}airlineOptionChange(){this.searchForm.controls.airline.setValue(this.tempMobileAirline),this._bottomSheetService.dismiss(),this.onSearch()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.KNP),e.Y36(l.qu),e.Y36(O.F0),e.Y36(G.P),e.Y36(Q.fB),e.Y36(R.oE),e.Y36(L.G),e.Y36(O.F0),e.Y36(Pe.KD),e.Y36($.t7),e.Y36(j.BX),e.Y36(F.a2),e.Y36(V.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["issue-booking-page"]],standalone:!0,features:[e.jDz],decls:34,vars:13,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start","min-h-[60px]"],["textField","name","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp booking code",3,"formControl"],["tableSearchInput",""],["cfHint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"hidden","md:flex","flex-col","py-3","px-4","gap-y-3","pr-0","bg-neutral-white"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"flex","gap-x-3","overflow-x-auto"],[1,"gap-x-1.5","items-center","border","border-neutral-gray-3","rounded-full","px-4","py-[5px]","hidden","md:flex",3,"click"],[1,"text-body-md","whitespace-nowrap"],["icon","chevron_down","size","small",1,"text-neutral-gray-5"],[1,"hidden","!w-full","md:pr-4","md:block"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"formControl","focus"],["airlineOptionMobile",""],["searchBts",""],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"flex","flex-col","justify-between","w-full"],[1,"p-4","pb-2"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],[1,"p-4"],["cf-button","",1,"justify-center","w-full",3,"click"],["size","medium",3,"value"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"formControl"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn h\xe3ng bay",1,"w-full","max-w-none","mr-4",3,"ngModel","data","allowSearch","ngModelChange"],["cfLabel",""],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4"],[1,"w-fit",3,"optionAgent","isLoading","bookingDetail","priceDetail","issueBooking","gotoBooking","selectedAgent"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Xu\u1ea5t v\xe9"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"cf-select",4),e.TgZ(6,"cf-input-group",5),e._UZ(7,"cf-icon",6)(8,"input",7,8),e.YNc(10,Oe,1,1,"cf-hint",9),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){return n.onSearch()}),e._UZ(12,"cf-icon",11),e._uU(13," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(14,"div",12)(15,"div",13),e._uU(16,"Xu\u1ea5t v\xe9"),e.qZA(),e.TgZ(17,"div",14)(18,"div",15),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(26);return e.KtG(n.openAirlineBts(r))}),e.TgZ(19,"div",16),e._uU(20,"Ch\u1ecdn h\xe3ng bay"),e.qZA(),e._UZ(21,"cf-icon",17),e.qZA()(),e.TgZ(22,"cf-input-group",18),e._UZ(23,"cf-icon",6),e.TgZ(24,"input",19),e.NdJ("focus",function(){e.CHM(i);const r=e.MAs(28);return e.KtG(n.openSearchBts(r))}),e.qZA()()(),e.YNc(25,Qe,7,2,"ng-template",null,20,e.W1O),e.YNc(27,Le,13,4,"ng-template",null,21,e.W1O),e.YNc(29,Ye,13,0,"div",22),e.YNc(30,ze,9,3,"div",22),e.YNc(31,Ge,2,4,"div",23),e.YNc(32,Re,6,0,"div",24),e.qZA(),e.YNc(33,$e,2,0,"div",25)}2&t&&(e.xp6(5),e.Q6J("formControl",n.searchForm.controls.airline)("data",n.airlineSelectOption)("allowSearch",!1),e.xp6(1),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(2),e.Q6J("ngIf",(null==n.searchForm.controls.searchText.errors?null:n.searchForm.controls.searchText.errors.required)&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(13),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(5),e.Q6J("ngIf",!n.isLoading&&"search_default"===n.stateMode),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&("not_found"===n.stateMode||"cancelled"===n.stateMode||"issued"===n.stateMode)),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"has_value"===n.stateMode),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoadingIssue))},dependencies:[c.ez,c.sg,c.O5,m.j$,m.ND,m.BN,d.AxE,d.Sm8,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,x.q,f.N8,f.Xq,z.m,q.Wn,Y.IA,A.OR,P.o,P.T,F.DW],encapsulation:2}),o})();function We(o,s){1&o&&e._UZ(0,"cf-hint",21),2&o&&e.Q6J("hint","Ch\u01b0a nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7")}function et(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"cf-input-group",13),e._UZ(3,"cf-icon",5)(4,"input",24),e.qZA()(),e.TgZ(5,"div")(6,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onMobileSearch())}),e._UZ(7,"cf-icon",26),e.TgZ(8,"div"),e._uU(9,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.searchForm.controls.searchText)}}function tt(o,s){1&o&&(e.TgZ(0,"div",27)(1,"div",28),e._UZ(2,"img",29),e.qZA(),e.TgZ(3,"div",30)(4,"div",31),e._uU(5,"Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 ti\u1ebfn h\xe0nh h\u1ee7y v\xe9"),e.qZA(),e.TgZ(6,"div",32),e._uU(7," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat T\xecm ki\u1ebfm \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()())}function nt(o,s){1&o&&(e.TgZ(0,"div",33),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton")(3,"ticket-item-skeleton")(4,"ticket-item-skeleton"),e.qZA())}function it(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",34)(2,"ticket-number",35),e.NdJ("actionChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onActionChange(i))}),e.qZA()(),e.TgZ(3,"div",36)(4,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCancel())}),e._uU(5," \u0110\xf3ng "),e.qZA(),e.TgZ(6,"button",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onVoidBooking())}),e._UZ(7,"cf-icon",39),e._uU(8," Void t\u1ea5t c\u1ea3 "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("bookingCode",t.bookingCode)("listTicketNumber",t.listTicketNumber)("totalCharge",t.totalCharge)}}function ot(o,s){1&o&&(e.TgZ(0,"div",27)(1,"div",28),e._UZ(2,"img",40),e.qZA(),e.TgZ(3,"div",30)(4,"div",41),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(6,"div",32)(7,"div"),e._uU(8,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA()()()())}function at(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"cf-spinner"),e.qZA())}let rt=(()=>{class o{constructor(t,n,i,a,r,g,b){this._modal=i,this._toastService=a,this._bookingDetailService=r,this._manageBookingService=g,this._bottomSheetService=b,this.airline="VN",this.listTicketNumber=[],this.state="SEARCH",this.isLoading=!1,n.registerIcons([d.esH,d.tLH]),this.searchForm=t.group({searchText:["",l.kI.required]})}onSearch(){this.searchForm.invalid||(this.bookingCode=this.searchForm.value.searchText.trim().toUpperCase(),this.loadTicketVoid())}loadTicketVoid(){this.state="LOADING",this._manageBookingService.getTicketVoid(this.bookingCode).subscribe({next:t=>{t.success&&t.data&&t.data.listTicketNumber.length?(this.state="SUCCESS",this.totalCharge=t.data.totalCharge,this.listTicketNumber=t.data.listTicketNumber.map(n=>({ticketNumber:n.ticketNumber,status:n.status,totalCharge:n.totalCharge||0}))):this.state="EMPTY"},error:()=>{this.state="EMPTY"}})}onActionChange(t){if("review"===t.action)return this.onReview(t.ticketNumber)}onVoidBooking(){const t={title:"Void v\xe9 th\xe0nh c\xf4ng",content:`<div>T\u1ea5t c\u1ea3 c\xe1c s\u1ed1 v\xe9 h\u1ee3p l\u1ec7 t\u1eeb m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.bookingCode}</strong> \u0111\xe3 \u0111\u01b0\u1ee3c void th\xe0nh c\xf4ng.</div>`,status:"success"},n={title:"Void v\xe9 th\u1ea5t b\u1ea1i",content:"<div>Void s\u1ed1 v\xe9 kh\xf4ng th\xe0nh c\xf4ng. Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3.</div>",status:"error"};this._modal.open(A.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y v\xe9",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n void c\xe1c s\u1ed1 v\xe9 n\xe0y kh\xf4ng? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."}).afterClosed$.subscribe({next:a=>{var r;if(a.data){const b={agentName:JSON.parse(null!==(r=localStorage.getItem("currentUser"))&&void 0!==r?r:"").data.roleId,airline:this.airline,bookingCode:this.bookingCode,ticketNumber:this.listTicketNumber.map(C=>C.ticketNumber)};this.isLoading=!0,this._manageBookingService.voidTicket(b).pipe((0,S.x)(()=>this.isLoading=!1)).subscribe({next:C=>{C.success&&C.data.filter(v=>v.void).length===C.data.length?this._modal.open(A.z5,t).afterClosed$.subscribe({next:()=>{this.state="SEARCH",this.searchForm.reset()}}):this._modal.open(A.z5,n).afterClosed$.subscribe({next:()=>{this.state="SUCCESS",this.loadTicketVoid()}})},error:()=>{this.state="SUCCESS",this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Void v\xe9 kh\xf4ng th\xe0nh c\xf4ng. Vui l\xf2ng li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",sticky:!1})}})}}})}onReview(t){const n=this._getCurrentUrl();this.isLoading=!0,this._manageBookingService.getTicketDetail(t).pipe((0,S.x)(()=>this.isLoading=!1)).subscribe({next:i=>{const a=this.proccessTicketDetail(i.data);this._modal.open(q.co,{ticketDetail:a,curentUrl:n,isAction:!0,airline:this.airline})}})}onOpenBooking(){const t=this._getCurrentUrl();window.open(t)}_getCurrentUrl(){return`${window.location.origin}/admin/booking-detail/${this.airline}/${this.bookingCode}`}proccessTicketDetail(t){return{ticketNumber:"",passengerName:t.ticketInfo.passengerName,ticketInfo:{numCoupons:t.ticketInfo.numCoupons,issueDate:t.ticketInfo.issueDate,createDate:t.ticketInfo.createDate,bookingCode:t.ticketInfo.prn},segments:t.segment.map(n=>({number:n.number,airline:n.marketingAirline,flightNumber:n.flightNumber,classCode:n.bookingClassCode,date:"15MAR",brdoff:n.originLocation+n.destinationLocation,time:"2200",status:n.segmentStatus,fareBasis:n.fareBasis,statusCode:n.ticketStatus,baggageAllowance:n.baggageAllowance})),pricingInfo:{baseFare:t.pricingInfo.baseFare.currencyCode.concat(" ",t.pricingInfo.baseFare.amount),taxes:t.pricingInfo.taxes.map(n=>n.amount.concat(n.taxCode)).join(" "),totalFare:t.pricingInfo.totalFare.currencyCode.concat(" ",t.pricingInfo.totalFare.amount)},fareCalc:t.pricingInfo.fareCalculation,paymentInfo:{paymentCardNumber:t.paymentInfo.paymentCardNumber,authorizationCode:t.paymentInfo.authorizationCode},ticketData:{issueDate:t.ticketData.issueDate,printStation:t.ticketData.printStation,issuingAgent:t.ticketData.issuingAgent,remarks:t.ticketData.remarks,endorsements:t.ticketData.endorsements.join("")}}}onCancel(){this.searchForm.reset(),this.state="SEARCH"}onMobileSearch(){this._bottomSheetService.dismiss(),this.onSearch()}openSearchBts(t){const n=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",rightButtonIcon:"",leftButtonIcon:"close",containerFullHeigh:!0,leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});n.containerInstance._leftButtonClick.subscribe(()=>n.dismiss())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(d.KNP),e.Y36(R.oE),e.Y36(j.BX),e.Y36(G.P),e.Y36(Q.fB),e.Y36(F.a2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-void-booking-page"]],standalone:!0,features:[e.jDz],decls:29,vars:9,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","items-stretch","gap-x-3"],[1,"!w-full",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 b\u1eaft \u0111\u1ea7u vi\u1ec7c t\xecm s\u1ed1 v\xe9...",3,"formControl"],["tableSearchInput",""],["cfHint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"w-[168px]","justify-center",3,"click"],["icon","search","size","small",1,"pr-3"],[1,"hidden","md:flex","flex-col","py-3","px-4","gap-y-3","pr-0","bg-neutral-white"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"hidden","!w-full","md:pr-4","md:block"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"formControl","focus"],["searchBts",""],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","px-[30px]","py-4","md:p-0","md:h-full"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],["class","h-[500px] p-6 flex flex-col gap-y-8 justify-center items-center",4,"ngIf"],["class","p-6",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"formControl"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"],[1,"h-[500px]","p-6","flex","flex-col","gap-y-8","justify-center","items-center"],[1,"flex","justify-center"],["src","assets/images/web-page.svg","alt",""],[1,"text-center"],[1,"text-heading-md","text-neutral-black","mb-4"],[1,"text-body-md-short","text-neutral-gray-5"],[1,"p-6"],[1,"h-fit","w-full"],[3,"bookingCode","listTicketNumber","totalCharge","actionChange"],[1,"flex","justify-end","gap-x-4","p-4"],["cf-button","","size","medium","type","secondary",1,"bg-white",3,"click"],["cf-button","","size","medium",3,"click"],["icon","coupon","size","small",1,"mr-2.5","text-white"],["src","assets/images/empty-result.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Void v\xe9"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-input-group",4),e._UZ(6,"cf-icon",5)(7,"input",6,7),e.YNc(9,We,1,1,"cf-hint",8),e.qZA(),e.TgZ(10,"button",9),e.NdJ("click",function(){return n.onSearch()}),e._UZ(11,"cf-icon",10),e._uU(12," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(13,"div",11)(14,"div",12),e._uU(15,"Void v\xe9"),e.qZA(),e.TgZ(16,"cf-input-group",13),e._UZ(17,"cf-icon",5),e.TgZ(18,"input",14),e.NdJ("focus",function(){e.CHM(i);const r=e.MAs(20);return e.KtG(n.openSearchBts(r))}),e.qZA()()(),e.YNc(19,et,10,1,"ng-template",null,15,e.W1O),e.TgZ(21,"div",16)(22,"div",17),e.YNc(23,tt,8,0,"div",18),e.YNc(24,nt,5,0,"div",19),e.YNc(25,it,9,3,"div",20),e.YNc(26,ot,11,0,"div",18),e.qZA()()(),e._UZ(27,"cf-toast"),e.YNc(28,at,2,0,"div",20)}2&t&&(e.xp6(5),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(2),e.Q6J("ngIf",(null==n.searchForm.controls.searchText.errors?null:n.searchForm.controls.searchText.errors.required)&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)),e.xp6(9),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(5),e.Q6J("ngIf","SEARCH"===n.state),e.xp6(1),e.Q6J("ngIf","LOADING"===n.state),e.xp6(1),e.Q6J("ngIf","SUCCESS"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(2),e.Q6J("ngIf",n.isLoading))},dependencies:[c.ez,c.O5,m.j$,m.ND,m.BN,d.AxE,d.Sm8,l.u5,l.Fj,l.JJ,l.UX,l.oH,f.N8,f.Xq,z.m,j.hj,q.kP,A.OR,Y.IA,F.DW],encapsulation:2}),o})();var st=u(28490);function lt(o,s){1&o&&e._UZ(0,"cf-input-hint",16),2&o&&e.Q6J("hint","M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function ct(o,s){1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",22),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 tra c\u1ee9u th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",24),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ea7n tra c\u1ee9u v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",25),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function ut(o,s){if(1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",26),e._UZ(5,"img",27),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(8,"div",28)(9,"div"),e._uU(10,"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7 "),e.TgZ(11,"strong"),e._uU(12),e.qZA(),e._uU(13,"."),e.qZA(),e.TgZ(14,"div"),e._uU(15,"M\xe3 \u0111\u1eb7t ch\u1ed7 c\xf3 th\u1ec3 kh\xf4ng t\u1ed3n t\u1ea1i trong h\u1ec7 th\u1ed1ng. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin."),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(12),e.Oqu(t.bookingCode)}}function gt(o,s){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton")(3,"ticket-item-skeleton")(4,"ticket-item-skeleton"),e.qZA())}function dt(o,s){1&o&&e._UZ(0,"cf-icon",69)}function pt(o,s){1&o&&e._UZ(0,"cf-icon",70)}function mt(o,s){if(1&o&&(e.TgZ(0,"div",71),e._UZ(1,"cf-icon",72),e.TgZ(2,"span",73),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(3),e.lnq("",t.startPoint," - ",t.endPoint," (",e.xi3(4,3,t.startTime,"HH:mm - dd/MM/yyyy"),")")}}function ht(o,s){1&o&&e._UZ(0,"div",48)}function ft(o,s){1&o&&e._UZ(0,"cf-icon",74)}function _t(o,s){if(1&o&&(e.TgZ(0,"div",80)(1,"div",81)(2,"div",82)(3,"div",56),e._uU(4,"H\u1ec7 th\u1ed1ng \u0111\u1eb7t ch\u1ed7:"),e.qZA(),e.TgZ(5,"div",83),e._uU(6),e.qZA()(),e.TgZ(7,"div",82)(8,"div",56),e._uU(9,"Ng\xe0y \u0111\u1eb7t:"),e.qZA(),e.TgZ(10,"div",84),e._uU(11),e.qZA()()(),e.TgZ(12,"div",85)(13,"div",82)(14,"div",56),e._uU(15,"H\u1ea1n gi\u1eef ch\u1ed7:"),e.qZA(),e.TgZ(16,"div",84),e._uU(17),e.qZA()(),e.TgZ(18,"div",82)(19,"div",56),e._uU(20,"Ng\u01b0\u1eddi \u0111\u1eb7t:"),e.qZA(),e.TgZ(21,"div",84),e._uU(22),e.qZA()()(),e.TgZ(23,"div",85)(24,"div",82)(25,"div",56),e._uU(26,"H\u1ea1n gi\u1eef gi\xe1:"),e.qZA(),e.TgZ(27,"div",84),e._uU(28),e.qZA()(),e.TgZ(29,"div",82)(30,"div",56),e._uU(31,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(32,"div",84),e._uU(33),e.qZA()()()()),2&o){const t=e.oxw(3);e.xp6(6),e.AsE(" ",t.bookingDetail.airlineSystem," - ",t.bookingDetail.airlineName,""),e.xp6(5),e.hij("",t.bookingDetail.dateBooked||"N/A"," "),e.xp6(6),e.hij("",t.bookingDetail.timeHoldBooking||"N/A"," "),e.xp6(5),e.hij("",t.bookingDetail.userBooked||"N/A"," "),e.xp6(6),e.hij("",t.bookingDetail.timeHoldPricing||"N/A"," "),e.xp6(5),e.hij("",t.bookingDetail.agentName||"N/A"," ")}}function xt(o,s){if(1&o&&(e.TgZ(0,"div",86),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.bookingDetail.statusDesc," ")}}function vt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"div")(2,"div",75),e._UZ(3,"cf-icon",76),e.TgZ(4,"span",77),e._uU(5,"Th\xf4ng tin \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.YNc(6,_t,34,7,"div",78),e.YNc(7,xt,2,1,"ng-template",null,79,e.W1O),e.qZA()()),2&o){const t=e.MAs(8),n=e.oxw(2);e.xp6(6),e.Q6J("ngIf","ERROR"!==n.bookingDetail.status)("ngIfElse",t)}}function kt(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",87),e._uU(2),e.qZA(),e.TgZ(3,"td",88),e._uU(4),e.qZA(),e.TgZ(5,"td",88),e._uU(6),e.qZA()()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(t.sex)}}function Ct(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34),e._UZ(5,"div",35),e.TgZ(6,"div",36),e._uU(7,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(8,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.gotoBooking(i.bookingDetail.bookingCodeDisplay,i.bookingDetail.airline))}),e._UZ(9,"cf-icon",38),e._uU(10," M\u1edf booking "),e.qZA()(),e.TgZ(11,"div",39)(12,"div",40)(13,"div",41)(14,"div",42)(15,"div"),e._UZ(16,"img",43),e.qZA(),e.TgZ(17,"div",44)(18,"span",45),e._uU(19),e.qZA(),e.TgZ(20,"span",46),e._uU(21),e.qZA()(),e.TgZ(22,"div",47),e._uU(23),e.qZA()(),e._UZ(24,"div",48),e.TgZ(25,"div",49)(26,"div",50)(27,"span"),e._uU(28),e.qZA(),e.YNc(29,dt,1,0,"cf-icon",51),e.YNc(30,pt,1,0,"cf-icon",52),e.TgZ(31,"span"),e._uU(32),e.qZA()(),e.YNc(33,mt,5,6,"div",53),e.qZA(),e.YNc(34,ht,1,0,"div",54),e.TgZ(35,"div",55)(36,"div",56),e._uU(37,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(38,"div",57),e._uU(39),e.qZA()(),e._UZ(40,"div",48),e.TgZ(41,"div",55)(42,"div",56),e._uU(43,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(44,"div",58),e.YNc(45,ft,1,0,"cf-icon",59),e.TgZ(46,"div",60)(47,"label",61),e._uU(48),e.qZA()()()()(),e.YNc(49,vt,9,2,"div",62),e.qZA()()(),e.TgZ(50,"div",63)(51,"div",34),e._UZ(52,"div",35),e.TgZ(53,"div",36),e._uU(54,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(55,"div",64)(56,"table",65)(57,"thead")(58,"tr",66)(59,"th",67),e._uU(60,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(61,"th",67),e._uU(62,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(63,"th",67),e._uU(64,"Gi\u1edbi t\xednh"),e.qZA()()(),e.TgZ(65,"tbody"),e.YNc(66,kt,7,3,"tr",68),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(16),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("",t.bookingDetail.airlineSystem," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.hij(" ",t.bookingDetail.startPoint,""),e.xp6(1),e.Q6J("ngIf",1===t.bookingDetail.journeys.length),e.xp6(1),e.Q6J("ngIf",t.bookingDetail.journeys.length>1),e.xp6(2),e.hij(" ",t.bookingDetail.endPoint," "),e.xp6(1),e.Q6J("ngForOf",t.bookingDetail.journeys),e.xp6(1),e.Q6J("ngIf",t.isBooked),e.xp6(5),e.Oqu(t.bookingDetail.bookingCodeDisplay),e.xp6(6),e.Q6J("ngIf",t.isBooked),e.xp6(3),e.Oqu(t.bookingDetail.statusText),e.xp6(1),e.Q6J("ngIf","CANCEL"!==t.bookingDetail.status),e.xp6(17),e.Q6J("ngForOf",t.passengerInfos)}}function Tt(o,s){1&o&&(e.TgZ(0,"td",89),e._uU(1,"N/A"),e.qZA())}function bt(o,s){1&o&&(e.TgZ(0,"td",90),e._uU(1,"N/A"),e.qZA())}function Et(o,s){1&o&&(e.TgZ(0,"div",91),e._uU(1,"N/A \u0111"),e.qZA())}let yt=(()=>{class o{constructor(t,n,i,a,r,g){this._searchFlightService=n,this._flightDataService=i,this._locationDataService=a,this._router=g,this.isLoading=!1,this.isFirst=!0,this.isBooked=!1,this.state="SEARCH",this.passengerInfos=[],r.registerIcons([d.Ffn,d._tC,d.llu,d.QkI])}bookingInputChange(){this.isFirst=!1}validInput(){return!(""===this.bookingCode&&!this.isFirst||!this.isFirst&&this.bookingCode&&""===this.bookingCode.trim())}validBooking(){return this.bookingCode&&""!==this.bookingCode.trim()}getBookingTicket(){this.state="LOADING",this._searchFlightService.searchByPNR({airline:"",bookingCode:this.bookingCode,globalSearch:!0}).pipe((0,S.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var n,i,a;if(t.success){this.state="SUCCESS",this.passengerInfos=t.data.passengers.map(g=>({name:g.getName(),type:g.getType(),sex:g.getGender(),birthday:g.getBirthday()}));const r=t.data;this.isBooked=["BOOKED","ISSUED"].includes(r.state),this.bookingDetail={bookingCodeDisplay:r.bookingCode,statusText:this.getStatusText(r.state),airline:r.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.data.airline),airlineSystem:t.data.airline,airlineName:t.data.airlineName,status:r.state,startPoint:r.journeys[0].departure.airport.code,endPoint:1===r.journeys.length?r.journeys[0].arrival.airport.code:r.journeys[r.journeys.length-1].departure.airport.code,timeHoldBooking:null!==(n=r.bookDetail)&&void 0!==n&&n.timeHoldBooking?H(r.bookDetail.timeHoldBooking).format("HH:mm, DD/MM/YYYY"):"",timeHoldPricing:null!==(i=r.bookDetail)&&void 0!==i&&i.timeKeepPrice?H(r.bookDetail.timeKeepPrice).format("HH:mm, DD/MM/YYYY"):"N/A",userBooked:r.bookDetail.userBooked?r.bookDetail.userBooked:"",dateBooked:null!==(a=r.bookDetail)&&void 0!==a&&a.dateBooked?H(1e3*r.bookDetail.dateBooked).format("HH:mm, DD/MM/YYYY"):"N/A",agentName:r.bookDetail.agentName?r.bookDetail.agentName:"",journeys:r.journeys.map(g=>({airline:g.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(g.airline),airlineName:this._flightDataService.getAirlineSystemNameByCode(g.airline),operating:g.operating,operatingName:g.operating,startPoint:g.departure.airport.code,startPointName:this._locationDataService.getCityNameByCode(g.departure.airport.code),endPoint:g.arrival.airport.code,endPointName:this._locationDataService.getCityNameByCode(g.arrival.airport.code),startTime:new Date(1e3*g.departure.scheduleTime),endTime:new Date(1e3*g.arrival.scheduleTime)}))}}else this.state="EMPTY"},error:()=>{this.state="EMPTY"}})}getStatusText(t){switch(t){case"BOOKED":return"\u0110\xe3 gi\u1eef ch\u1ed7";case"ISSUED":return"\u0110\xe3 xu\u1ea5t v\xe9";case"REFUND":return"\u0110\xe3 ho\xe0n";case"CANCEL":return"\u0110\xe3 h\u1ee7y";case"EXPIRED":return"H\u1ebft h\u1ea1n";case"INVALID":return"Kh\xf4ng c\xf2n gi\xe1 tr\u1ecb";case"VOID":return"\u0110\xe3 void";default:return"\u0110\u1eb7t ch\u1ed7 l\u1ed7i"}}gotoBooking(t,n){this._router.navigate([`admin/booking-detail/${n}/${t}`])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36($.t7),e.Y36(L.G),e.Y36(st._),e.Y36(d.KNP),e.Y36(O.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-open-booking"]],standalone:!0,features:[e.jDz],decls:25,vars:8,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-4","items-start"],[1,"!w-full",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7",3,"ngModel","ngModelChange","keydown.enter"],["cfLabel",""],["cfHint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap","justify-center","mt-[28px]",3,"disabled","click"],["icon","search","size","small",1,"pr-3"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],["class","p-6",4,"ngIf"],["class","px-6 py-4 md:p-4 md:pb-[90px] flex justify-center",4,"ngIf"],["NATemplate",""],["NARightTemplate",""],["cfHint","",3,"hint"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-body-md-short","text-neutral-gray-5","md:text-center"],[1,"text-espressive-md"],[1,"mb-3"],["src","assets/images/empty-result.svg","alt",""],[1,"text-body-md-short","text-neutral-gray-5","text-center"],[1,"p-6"],[1,"px-6","py-4","md:p-4","md:pb-[90px]","flex","justify-center"],[1,"w-[764px]","h-full","flex","flex-col","gap-2"],[1,""],[1,"flex","gap-x-[20px]","mb-4","justify-between","items-center"],[1,"flex","gap-x-[20px]","mb-4"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],["cf-button","",3,"click"],["icon","external_link",1,"mr-2"],[1,"flex","flex-col","gap-y-2"],[1,"p-6","bg-white","rounded","shadow-cf-md"],[1,"h-[100px]","flex","justify-between","items-center","mb-6","gap-x-7"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-full","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small",4,"ngIf"],["icon","switch","size","small",4,"ngIf"],["class","mt-3 flex gap-x-2",4,"ngFor","ngForOf"],["class","w-[2px] h-full border-l border-dashed border-neutral-gray-1",4,"ngIf"],[1,"h-full","w-full","flex","flex-col","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],["CfSelectable","",1,"text-heading-lg"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium","class","text-secondary-5-4",4,"ngIf"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[4,"ngIf"],[1,"mb-2"],[1,"px-6","pt-6","pb-6","bg-white","rounded","shadow-cf-md"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","pb-3"],[4,"ngFor","ngForOf"],["icon","arrow_right","size","small"],["icon","switch","size","small"],[1,"mt-3","flex","gap-x-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"text-espressive-sm","text-neutral-black"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"mb-4","mt-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"text-heading-sm","text-neutral-black"],["class","border border-dashed rounded border-neutral-gray-2 p-6 mb-6",4,"ngIf","ngIfElse"],["templateBookingFail",""],[1,"border","border-dashed","rounded","border-neutral-gray-2","p-6","mb-6"],[1,"flex","justify-between","items-center","gap-x-16","border-b","border-neutral-gray-1","pb-2"],[1,"flex","justify-between","items-center","w-full"],[1,"px-3","bg-secondary-5-1","rounded","text-body-md","text-secondary-5-5"],[1,"text-espressive-md","text-neutral-black"],[1,"flex","justify-between","items-center","gap-x-16","border-b","border-neutral-gray-1","py-3"],[1,"w-full","mb-6","bg-secondary-6-1","rounded","text-body-md","py-[10px]","px-[18px]","text-secondary-6-5","break-all"],[1,"text-body-md","text-neutral-black","pt-4","uppercase"],[1,"text-body-md","text-neutral-black","pt-4"],[1,"text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-heading-md"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"M\u1edf \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-input-group",4),e._UZ(6,"cf-icon",5),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(a){return n.bookingCode=a})("ngModelChange",function(){return n.bookingInputChange()})("keydown.enter",function(){return n.getBookingTicket()}),e.qZA(),e.TgZ(8,"label",7),e._uU(9,"M\xe3 \u0111\u1eb7t ch\u1ed7 (PNR)"),e.qZA(),e.YNc(10,lt,1,1,"cf-input-hint",8),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.getBookingTicket()}),e._UZ(12,"cf-icon",10),e._uU(13," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(14,"div"),e.YNc(15,ct,13,0,"div",11),e.YNc(16,ut,16,1,"div",11),e.YNc(17,gt,5,0,"div",12),e.YNc(18,Ct,67,15,"div",13),e.qZA()(),e.YNc(19,Tt,2,0,"ng-template",null,14,e.W1O),e.YNc(21,bt,2,0,"ng-template",null,15,e.W1O),e.YNc(23,Et,2,0,"ng-template",null,15,e.W1O)),2&t&&(e.xp6(5),e.Q6J("status",n.validInput()?"default":"error"),e.xp6(2),e.Q6J("ngModel",n.bookingCode),e.xp6(3),e.Q6J("ngIf",!n.validInput()),e.xp6(1),e.Q6J("disabled",!n.validBooking()||"LOADING"===n.state),e.xp6(4),e.Q6J("ngIf","SEARCH"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(1),e.Q6J("ngIf","LOADING"===n.state),e.xp6(1),e.Q6J("ngIf","SUCCESS"===n.state))},dependencies:[c.ez,c.sg,c.O5,c.uU,l.u5,l.Fj,l.JJ,l.On,m.j$,m.ND,m.BN,m.v2,d.AxE,d.Sm8,f.N8,f.Xq,Y.IA,l.UX,F.DW],encapsulation:2}),o})()},72853:(K,w,u)=>{u.d(w,{m:()=>l});var c=u(94650);let l=(()=>{class f{constructor(){}}return f.\u0275fac=function(M){return new(M||f)},f.\u0275cmp=c.Xpm({type:f,selectors:[["cf-hint"]],inputs:{hint:"hint"},standalone:!0,features:[c.jDz],decls:2,vars:1,template:function(M,d){1&M&&(c.ynx(0),c._uU(1),c.BQk()),2&M&&(c.xp6(1),c.Oqu(d.hint))},encapsulation:2}),f})()},4688:(K,w,u)=>{u.d(w,{b:()=>d});var c=u(36895),l=u(94650),f=u(72506);function U(m,I){if(1&m){const x=l.EpF();l.TgZ(0,"cf-icon",3),l.NdJ("click",function(A){l.CHM(x);const J=l.oxw();return l.KtG(J.close(A))}),l.qZA()}}const M=["*"];let d=(()=>{class m{constructor(x,D,A){this.renderer=x,this.elementRef=D,this.mode="default",this.type="solid",this.size="medium",this.color="red",this.onClose=new l.vpe,A.registerIcons([f.UNF])}ngOnChanges(x){this.loadClasses()}ngOnInit(){this.loadClasses()}loadClasses(){this.classes="rounded inline-flex justify-center items-center gap-x-1 "+this.getSizeClass()+" "+this.getModeClass()}getSizeClass(){return"small"===this.size?"py-1 px-2 text-express-sm":"xsmall"===this.size?"py-[2px] px-1 text-express-sm":"py-1.5 px-3 text-express-md"}getModeClass(){return"outline"===this.type?`bg-white bordertext-${this.color}-4 border-${this.color}-4`:"inverted"===this.type?`bg-${this.color}-1 text-${this.color}-4`:"gray-2"===this.color?"text-neutral-gray-6 bg-neutral-gray-2":`text-neutral-white bg-${this.color}-4`}close(x){this.onClose.emit(x),x.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return m.\u0275fac=function(x){return new(x||m)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(f.KNP))},m.\u0275cmp=l.Xpm({type:m,selectors:[["cf-label"]],hostVars:2,hostBindings:function(x,D){2&x&&l.Tol(D.classes)},inputs:{mode:"mode",type:"type",size:"size",color:"color"},outputs:{onClose:"onClose"},standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:M,decls:4,vars:1,consts:[[1,"flex","justify-between","items-center","gap-x-2"],[1,"text-ellipsis","overflow-hidden","whitespace-normal","flex","items-center"],["icon","close","size","small","class","cursor-pointer",3,"click",4,"ngIf"],["icon","close","size","small",1,"cursor-pointer",3,"click"]],template:function(x,D){1&x&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1),l.Hsn(2),l.qZA(),l.YNc(3,U,1,0,"cf-icon",2),l.qZA()),2&x&&(l.xp6(3),l.Q6J("ngIf","closeable"===D.mode))},dependencies:[c.ez,c.O5,f.AxE,f.Sm8],encapsulation:2,changeDetection:0}),m})()}}]);