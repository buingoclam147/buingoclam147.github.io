"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[9301],{89301:(We,w,h)=>{h.r(w),h.d(w,{BookingDetailPageComponent:()=>Xe});var F=h(95911),k=h(36895),L=h(37094),I=h(83700),R=h(87683),_=h(72506),Q=h(44143),K=h(62331),j=h(7800),Z=h(15535),f=h(45393),H=h(20348),S=h(89319),V=h(26655),G=h(48042),N=h(44500),T=h(40899),z=h(89701),X=h(64190),D=h(53820),O=h(44586),q=h(52013),e=h(94650);let W=(()=>{class a{constructor(t){this.actionChange=new e.vpe,t.registerIcons([_.esH,_.UNF])}onActionChange(t){this.actionChange.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.KNP))},a.\u0275cmp=e.Xpm({type:a,selectors:[["suggest-register-order"]],outputs:{actionChange:"actionChange"},standalone:!0,features:[e.jDz],decls:33,vars:0,consts:[[1,"w-[288px]","h-auto","fixed","bottom-[30px]","right-[30px]","p-4","rounded","shadow-cf-info-card","bg-neutral-gray-6","text-white","md:hidden"],[1,"flex","gap-x-4","justify-between","items-start"],[1,"flex","justify-between","items-start","gap-x-2"],["icon","search","size","medium"],[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","gap-y-1"],[1,"text-express-md"],[1,"text-body-md-short"],["cf-button","","size","medium","type","secondary",1,"!w-fit","bg-neutral-white",3,"click"],["icon","close","size","small",3,"click"],[1,"hidden","md:block","w-full","h-auto","p-4","rounded","shadow-cf-info-card","bg-functional-1-1"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z","fill","#845D9C"],["d","M12 6.25C12.4142 6.25 12.75 6.58579 12.75 7V7.00999C12.75 7.42421 12.4142 7.75999 12 7.75999C11.5858 7.75999 11.25 7.42421 11.25 7.00999V7C11.25 6.58579 11.5858 6.25 12 6.25Z","fill","white"],["d","M12 9.25003C12.4142 9.25003 12.75 9.58582 12.75 10L12.75 17C12.75 17.4142 12.4142 17.75 12 17.75C11.5858 17.75 11.25 17.4142 11.25 17V10C11.25 9.58582 11.5858 9.25003 12 9.25003Z","fill","white"],["cf-button","","size","medium",1,"!w-fit",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e._UZ(4,"cf-icon",3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._uU(8,"Canh v\xe9 r\u1ebb \u0111\u1ec3 t\u0103ng l\u1ee3i nhu\u1eadn"),e.qZA(),e.TgZ(9,"div",7),e._uU(10,"T\u1ef1 \u0111\u1ed9ng canh v\xe9 r\u1ebb h\u01a1n \u0111\u1eb7t ch\u1ed7 hi\u1ec7n t\u1ea1i v\xe0 nh\u1eadn c\u1eadp nh\u1eadt khi gi\xe1 t\u0103ng."),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return o.onActionChange("register_order")}),e._uU(12," Canh v\xe9 ngay "),e.qZA()()(),e.TgZ(13,"div")(14,"cf-icon",9),e.NdJ("click",function(){return o.onActionChange("close")}),e.qZA()()()(),e.TgZ(15,"div",10)(16,"div",1)(17,"div",2)(18,"div"),e.O4$(),e.TgZ(19,"svg",11),e._UZ(20,"path",12)(21,"path",13)(22,"path",14),e.qZA()(),e.kcU(),e.TgZ(23,"div",4)(24,"div",5)(25,"div",6),e._uU(26,"Canh v\xe9 r\u1ebb \u0111\u1ec3 t\u0103ng l\u1ee3i nhu\u1eadn"),e.qZA(),e.TgZ(27,"div",7),e._uU(28,"T\u1ef1 \u0111\u1ed9ng canh v\xe9 r\u1ebb h\u01a1n \u0111\u1eb7t ch\u1ed7 hi\u1ec7n t\u1ea1i v\xe0 nh\u1eadn c\u1eadp nh\u1eadt khi gi\xe1 t\u0103ng."),e.qZA()(),e.TgZ(29,"button",15),e.NdJ("click",function(){return o.onActionChange("register_order")}),e._uU(30," Canh v\xe9 ngay "),e.qZA()()(),e.TgZ(31,"div")(32,"cf-icon",9),e.NdJ("click",function(){return o.onActionChange("close")}),e.qZA()()()())},dependencies:[k.ez,_.AxE,_.Sm8,I.N8,I.Xq],encapsulation:2}),a})();var x=h(15439),A=h(28746),Y=h(17414),J=h(82761),ee=h(65682),te=h(62733),ie=h(28490),oe=h(97579),ne=h(35991),ae=h(64425),re=h(9381),se=h(56684),le=h(77492),ce=h(7644);function de(a,c){if(1&a&&(e.TgZ(0,"div",33)(1,"div",8),e._UZ(2,"div",9),e.TgZ(3,"div",10),e._uU(4,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e._UZ(5,"booking-passenger-info",34),e.qZA()),2&a){const t=e.oxw(2);e.xp6(5),e.Q6J("passengerInfos",t.passengerInfos)}}const $=function(){return["BOOKED","ISSUED"]};function ge(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"booking-detail",35),e.NdJ("actionChange",function(i){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onActionChange(i,r))}),e.qZA()}if(2&a){const t=c.$implicit;e.Q6J("isShowMore",!0)("bookingDetail",t)("isBooked",e.DdM(3,$).includes(t.status))}}function ue(a,c){if(1&a&&(e.TgZ(0,"tr")(1,"td",43),e._UZ(2,"img",44),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e._uU(6),e.qZA(),e.TgZ(7,"td",43),e._uU(8),e.qZA(),e.TgZ(9,"td",43),e._uU(10),e.qZA(),e.TgZ(11,"td",43),e._uU(12),e.ALo(13,"number"),e.qZA()()),2&a){const t=c.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.Oqu(t.flight),e.xp6(2),e.Oqu(t.departDate),e.xp6(2),e.Oqu(t.passengerName),e.xp6(2),e.Oqu(t.serviceName),e.xp6(2),e.Oqu(e.lcZ(13,6,t.totalCharge))}}function he(a,c){if(1&a&&(e.TgZ(0,"div",36)(1,"div",37)(2,"span",38),e._uU(3,"H\xe0nh l\xfd & d\u1ecbch v\u1ee5 kh\xe1c"),e.qZA()(),e.TgZ(4,"div")(5,"table",39)(6,"thead")(7,"tr",40)(8,"th",41),e._uU(9,"H\xe3ng bay"),e.qZA(),e.TgZ(10,"th",41),e._uU(11,"Chuy\u1ebfn bay"),e.qZA(),e.TgZ(12,"th",41),e._uU(13,"Ng\xe0y \u0111i"),e.qZA(),e.TgZ(14,"th",41),e._uU(15,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(16,"th",41),e._uU(17,"T\xean d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(18,"th",41),e._uU(19,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,ue,14,8,"tr",42),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(21),e.Q6J("ngForOf",t.listBaggage)}}function me(a,c){if(1&a&&(e.TgZ(0,"tr")(1,"td",43),e._UZ(2,"img",44),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e._uU(6),e.qZA(),e.TgZ(7,"td",43),e._uU(8),e.qZA(),e.TgZ(9,"td",43),e._uU(10),e.qZA(),e.TgZ(11,"td",46),e._uU(12),e.ALo(13,"number"),e.qZA()()),2&a){const t=c.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.Oqu(t.flight),e.xp6(2),e.Oqu(t.departDate),e.xp6(2),e.Oqu(t.passengerName),e.xp6(2),e.Oqu(t.serviceName),e.xp6(2),e.Oqu(e.lcZ(13,6,t.totalCharge))}}function pe(a,c){if(1&a&&(e.TgZ(0,"div",36)(1,"div",37)(2,"span",38),e._uU(3,"D\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(4,"div")(5,"table",39)(6,"thead")(7,"tr",40)(8,"th",41),e._uU(9,"H\xe3ng bay"),e.qZA(),e.TgZ(10,"th",41),e._uU(11,"Chuy\u1ebfn bay"),e.qZA(),e.TgZ(12,"th",41),e._uU(13,"Ng\xe0y \u0111i"),e.qZA(),e.TgZ(14,"th",41),e._uU(15,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(16,"th",41),e._uU(17,"T\xean d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(18,"th",45),e._uU(19,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,me,14,8,"tr",42),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(21),e.Q6J("ngForOf",t.listService)}}function _e(a,c){1&a&&e._UZ(0,"th",41)}function ve(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.status,")")}}function fe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"td",43)(1,"a",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.onShowTicketInfo(i.ticketNumber))}),e._uU(2," Xem chi ti\u1ebft "),e.qZA()()}}function be(a,c){if(1&a&&(e.TgZ(0,"tr")(1,"td",43),e._uU(2),e.YNc(3,ve,2,1,"span",14),e.qZA(),e.TgZ(4,"td",43),e._uU(5),e.qZA(),e.TgZ(6,"td",43),e._uU(7),e.qZA(),e.TgZ(8,"td",43),e._uU(9),e.qZA(),e.TgZ(10,"td",43),e._uU(11),e.qZA(),e.YNc(12,fe,3,0,"td",48),e.qZA()),2&a){const t=c.$implicit;e.xp6(2),e.hij("",t.ticketNumber," "),e.xp6(1),e.Q6J("ngIf","VOID"===t.status),e.xp6(2),e.Oqu(t.journeyName),e.xp6(2),e.Oqu(t.bookingCode),e.xp6(2),e.Oqu(t.passengerName),e.xp6(2),e.Oqu(t.airline),e.xp6(1),e.Q6J("ngIf",t.isDetail)}}function Te(a,c){if(1&a&&(e.TgZ(0,"div",36)(1,"div",37)(2,"span",38),e._uU(3,"S\u1ed1 v\xe9"),e.qZA()(),e.TgZ(4,"div")(5,"table",39)(6,"thead")(7,"tr",40)(8,"th",41),e._uU(9,"S\u1ed1 v\xe9"),e.qZA(),e.TgZ(10,"th",41),e._uU(11,"H\xe0nh tr\xecnh"),e.qZA(),e.TgZ(12,"th",41),e._uU(13,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(14,"th",41),e._uU(15,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(16,"th",41),e._uU(17,"H\xe3ng"),e.qZA(),e.YNc(18,_e,1,0,"th",47),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,be,13,7,"tr",42),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(18),e.Q6J("ngIf","QH"!==t.listTicketInfo[0].airline),e.xp6(2),e.Q6J("ngForOf",t.listTicketInfo)}}function xe(a,c){if(1&a&&(e.TgZ(0,"div")(1,"div",50),e._UZ(2,"div",9),e.TgZ(3,"div",10),e._uU(4,"T\u1ed5ng chi ph\xed h\xe0nh tr\xecnh"),e.qZA()(),e.TgZ(5,"div",51),e._UZ(6,"price-detail",52),e.TgZ(7,"div",53)(8,"div",54)(9,"div",55),e._uU(10,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(11,"div",56),e._uU(12),e.ALo(13,"replace"),e.ALo(14,"number"),e.qZA()()()()()),2&a){const t=e.oxw(2);e.xp6(6),e.Q6J("priceDetail",t.priceDetail),e.xp6(6),e.hij("",e.Dn7(13,2,e.lcZ(14,6,t.totalPrice),",",".")," \u0111")}}function Ce(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",50),e._UZ(2,"div",9),e.TgZ(3,"div",10),e._uU(4,"Canh v\xe9 r\u1ebb"),e.qZA()(),e.TgZ(5,"div",57)(6,"table",39)(7,"thead")(8,"tr",40)(9,"th",58),e._uU(10,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n"),e.qZA(),e.TgZ(11,"th",58),e._uU(12,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(13,"th",58),e._uU(14,"PNR m\u1edbi"),e.qZA(),e.TgZ(15,"th",58),e._uU(16,"Tr\u1ea1ng th\xe1i"),e.qZA(),e._UZ(17,"th"),e.qZA()(),e.TgZ(18,"tbody")(19,"tr")(20,"td",59),e._uU(21),e.qZA(),e.TgZ(22,"td",59),e._uU(23),e.qZA(),e.TgZ(24,"td",60)(25,"a",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.gotoBookingDetail(i.monitorOrderInfo.airline,i.monitorOrderInfo.pnr))}),e._uU(26),e.qZA()(),e.TgZ(27,"td",60)(28,"label",62),e._uU(29),e.qZA()(),e.TgZ(30,"td",60)(31,"a",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onOrderDetail(i.monitorOrderInfo.orderId))}),e._uU(32,"Chi ti\u1ebft"),e.qZA()()()()()()()}if(2&a){const t=e.oxw(2);e.xp6(21),e.Oqu(t.monitorOrderInfo.userAction),e.xp6(2),e.Oqu(t.monitorOrderInfo.timeCreate),e.xp6(3),e.Oqu(t.monitorOrderInfo.pnr||"-"),e.xp6(2),e.Tol(t.monitorOrderInfo.stateLabel.style),e.xp6(1),e.Oqu(null==t.monitorOrderInfo.stateLabel?null:t.monitorOrderInfo.stateLabel.name)}}function ke(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"suggest-register-order",63),e.NdJ("actionChange",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onChangeSuggest(i))}),e.qZA()}}function ye(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"booking-detail-mobile",67),e.NdJ("onDetailClick",function(){const n=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.mobileDetailClick(n))})("actionChange",function(i){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.onActionChange(i,r))}),e.qZA()}2&a&&e.Q6J("bookingDetail",c.$implicit)}function Ze(a,c){1&a&&(e.TgZ(0,"div",72),e._uU(1,"H\xe0nh l\xfd & d\u1ecbch v\u1ee5 kh\xe1c"),e.qZA())}function De(a,c){if(1&a&&(e.TgZ(0,"div",73)(1,"div",74)(2,"div",75),e._uU(3,"H\xe3ng bay"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75),e._uU(8,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"Chuy\u1ebfn bay"),e.qZA(),e.TgZ(14,"div",76),e._uU(15),e.qZA()(),e.TgZ(16,"div",74)(17,"div",75),e._uU(18,"Ng\xe0y \u0111i"),e.qZA(),e.TgZ(19,"div",76),e._uU(20),e.qZA()(),e.TgZ(21,"div",74)(22,"div",75),e._uU(23,"T\xean d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(24,"div",76),e._uU(25),e.qZA()(),e.TgZ(26,"div",74)(27,"div",75),e._uU(28,"T\u1ed5ng gi\xe1"),e.qZA(),e.TgZ(29,"div",76),e._uU(30),e.ALo(31,"replace"),e.ALo(32,"number"),e.qZA()()()),2&a){const t=c.$implicit;e.xp6(5),e.Oqu(t.airlineName),e.xp6(5),e.Oqu(t.passengerName),e.xp6(5),e.Oqu(t.flight),e.xp6(5),e.Oqu(t.departDate),e.xp6(5),e.Oqu(t.serviceName),e.xp6(5),e.hij("",e.Dn7(31,6,e.lcZ(32,10,t.totalCharge),",","."),"\u0111")}}function Ee(a,c){if(1&a&&(e.TgZ(0,"div",68)(1,"cf-collapse",68)(2,"cf-collapse-panel",69),e.YNc(3,Ze,2,0,"ng-template",null,70,e.W1O),e.YNc(5,De,33,12,"div",71),e.qZA()()()),2&a){const t=e.MAs(4),o=e.oxw(3);e.xp6(2),e.Q6J("title",t)("active",!1)("contentClass","!p-0 bg-transparent")("panelClass","!p-3 bg-neutral-white rounded-lg"),e.xp6(3),e.Q6J("ngForOf",o.listBaggage)}}function Ae(a,c){1&a&&(e.TgZ(0,"div",72),e._uU(1,"D\u1ecbch v\u1ee5"),e.qZA())}function Be(a,c){if(1&a&&(e.TgZ(0,"div",73)(1,"div",74)(2,"div",75),e._uU(3,"H\xe3ng bay"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75),e._uU(8,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"Chuy\u1ebfn bay"),e.qZA(),e.TgZ(14,"div",76),e._uU(15),e.qZA()(),e.TgZ(16,"div",74)(17,"div",75),e._uU(18,"Ng\xe0y \u0111i"),e.qZA(),e.TgZ(19,"div",76),e._uU(20),e.qZA()(),e.TgZ(21,"div",74)(22,"div",75),e._uU(23,"T\xean d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(24,"div",76),e._uU(25),e.qZA()(),e.TgZ(26,"div",74)(27,"div",75),e._uU(28,"T\u1ed5ng gi\xe1"),e.qZA(),e.TgZ(29,"div",76),e._uU(30),e.ALo(31,"replace"),e.ALo(32,"number"),e.qZA()()()),2&a){const t=c.$implicit;e.xp6(5),e.Oqu(t.airlineName),e.xp6(5),e.Oqu(t.passengerName),e.xp6(5),e.Oqu(t.flight),e.xp6(5),e.Oqu(t.departDate),e.xp6(5),e.Oqu(t.serviceName),e.xp6(5),e.hij("",e.Dn7(31,6,e.lcZ(32,10,t.totalCharge),",","."),"\u0111")}}function Ie(a,c){if(1&a&&(e.TgZ(0,"div",68)(1,"cf-collapse",68)(2,"cf-collapse-panel",69),e.YNc(3,Ae,2,0,"ng-template",null,70,e.W1O),e.YNc(5,Be,33,12,"div",71),e.qZA()()()),2&a){const t=e.MAs(4),o=e.oxw(3);e.xp6(2),e.Q6J("title",t)("active",!1)("contentClass","!p-0 bg-transparent")("panelClass","!p-3 bg-neutral-white rounded-lg"),e.xp6(3),e.Q6J("ngForOf",o.listService)}}function Se(a,c){1&a&&(e.TgZ(0,"div",72),e._uU(1,"Canh v\xe9 r\u1ebb"),e.qZA())}function Ne(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",68)(1,"cf-collapse",68)(2,"cf-collapse-panel",69),e.YNc(3,Se,2,0,"ng-template",null,70,e.W1O),e.TgZ(5,"div",73)(6,"div",74)(7,"div",75),e._uU(8,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(14,"div",76),e._uU(15),e.qZA()(),e.TgZ(16,"div",74)(17,"div",75),e._uU(18,"PNR m\u1edbi"),e.qZA(),e.TgZ(19,"a",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.gotoBookingDetail(i.monitorOrderInfo.airline,i.monitorOrderInfo.pnr))}),e._uU(20),e.qZA()(),e.TgZ(21,"div",74)(22,"div",75),e._uU(23,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(24,"label",62),e._uU(25),e.qZA()(),e.TgZ(26,"div",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onOrderDetail(i.monitorOrderInfo.orderId))}),e.TgZ(27,"span"),e._uU(28,"Chi ti\u1ebft"),e.qZA()()()()()()}if(2&a){const t=e.MAs(4),o=e.oxw(3);e.xp6(2),e.Q6J("title",t)("active",!1)("contentClass","!p-0 bg-transparent")("panelClass","!p-3 bg-neutral-white rounded-lg"),e.xp6(8),e.Oqu(o.monitorOrderInfo.userAction),e.xp6(5),e.Oqu(o.monitorOrderInfo.timeCreate),e.xp6(5),e.Oqu(o.monitorOrderInfo.pnr||"-"),e.xp6(4),e.Tol(o.monitorOrderInfo.stateLabel.style),e.xp6(1),e.Oqu(null==o.monitorOrderInfo.stateLabel?null:o.monitorOrderInfo.stateLabel.name)}}function Oe(a,c){if(1&a&&(e.TgZ(0,"div",64),e.YNc(1,ye,1,1,"booking-detail-mobile",65),e.YNc(2,Ee,6,5,"div",66),e.YNc(3,Ie,6,5,"div",66),e.YNc(4,Ne,29,10,"div",66),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.bookingDetails),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.isMonitorOrderInfo)}}function qe(a,c){if(1&a&&(e.TgZ(0,"div",79)(1,"div",74)(2,"div",75),e._uU(3,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75),e._uU(8,"Lo\u1ea1i h\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"Ng\xe0y sinh"),e.qZA(),e.TgZ(14,"div",76),e._uU(15),e.qZA()(),e.TgZ(16,"div",74)(17,"div",75),e._uU(18,"Gi\u1edbi t\xednh"),e.qZA(),e.TgZ(19,"div",76),e._uU(20),e.qZA()()()),2&a){const t=c.$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.type),e.xp6(5),e.Oqu(t.birthday),e.xp6(5),e.Oqu(t.sex)}}function Pe(a,c){if(1&a&&(e.TgZ(0,"div",64)(1,"div",72),e._uU(2,"Th\xf4ng tin kh\xe1ch h\xe0ng"),e.qZA(),e.YNc(3,qe,21,4,"div",78),e.TgZ(4,"div",72),e._uU(5,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA(),e.TgZ(6,"div",79)(7,"div",74)(8,"div",75),e._uU(9,"M\xe3 v\xf9ng"),e.qZA(),e.TgZ(10,"div",76),e._uU(11,"+84"),e.qZA()(),e.TgZ(12,"div",74)(13,"div",75),e._uU(14,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.qZA(),e.TgZ(15,"div",76),e._uU(16),e.qZA()(),e.TgZ(17,"div",74)(18,"div",75),e._uU(19,"Email"),e.qZA(),e.TgZ(20,"div",76),e._uU(21),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.passengerInfos),e.xp6(13),e.Oqu(t.bookingContact.phone),e.xp6(5),e.Oqu(t.bookingContact.email)}}function Ue(a,c){if(1&a&&(e.TgZ(0,"div",79)(1,"div",74)(2,"div",75),e._uU(3,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75),e._uU(8,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(14,"div",76),e._uU(15),e.ALo(16,"replace"),e.ALo(17,"number"),e.qZA()(),e.TgZ(18,"div",74)(19,"div",75),e._uU(20,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(21,"div",76),e._uU(22),e.ALo(23,"replace"),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"div",74)(26,"div",75),e._uU(27,"T\u1ed5ng gi\xe1"),e.qZA(),e.TgZ(28,"div",76),e._uU(29),e.ALo(30,"replace"),e.ALo(31,"number"),e.qZA()()()),2&a){const t=c.$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.type),e.xp6(5),e.hij("",e.Dn7(16,5,e.lcZ(17,9,t.base),",","."),"\u0111 "),e.xp6(7),e.hij("",e.Dn7(23,11,e.lcZ(24,15,t.tax),",","."),"\u0111"),e.xp6(7),e.hij("",e.Dn7(30,17,e.lcZ(31,21,t.total),",","."),"\u0111 ")}}function Me(a,c){if(1&a&&(e.TgZ(0,"div",64),e.YNc(1,Ue,32,23,"div",78),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",null==t.priceDetail?null:t.priceDetail.passengers)}}function we(a,c){if(1&a&&(e.TgZ(0,"div",86)(1,"div",87)(2,"div",88)(3,"div",89)(4,"div",90),e._uU(5," Gi\xe1 v\xe9 m\xe1y bay "),e.qZA(),e.TgZ(6,"div",90),e._uU(7," D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam "),e.qZA(),e.TgZ(8,"div",90),e._uU(9," Ph\xed d\u1ecbch v\u1ee5 "),e.qZA()()(),e.TgZ(10,"div",91)(11,"div",92),e._uU(12),e.ALo(13,"replace"),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"div",92),e._uU(16),e.ALo(17,"replace"),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"div",92),e._uU(20),e.ALo(21,"replace"),e.ALo(22,"number"),e.qZA()()()()),2&a){const t=e.oxw(3);e.xp6(12),e.hij(" ",e.Dn7(13,3,e.lcZ(14,7,t.priceDetail.totalBasePrice),",","."),"\u0111 "),e.xp6(4),e.hij(" ",e.Dn7(17,9,e.lcZ(18,13,t.priceDetail.totalAddonService),",","."),"\u0111 "),e.xp6(4),e.hij(" ",e.Dn7(21,15,e.lcZ(22,19,t.priceDetail.totalServiceFee),",","."),"\u0111 ")}}function Fe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",80),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(11),n=e.oxw(2);return e.KtG(n.togglePriceBottomSheet(i))}),e.TgZ(1,"div",81)(2,"div",81)(3,"div",82),e._uU(4," T\u1ed5ng chi ph\xed: "),e.qZA(),e.TgZ(5,"div",83),e._uU(6),e.ALo(7,"replace"),e.ALo(8,"number"),e.qZA()(),e._UZ(9,"cf-icon",84),e.qZA(),e.YNc(10,we,23,21,"ng-template",null,85,e.W1O),e.qZA()}if(2&a){const t=e.oxw(2);e.ekj("z-1000",t.zIndexPriceIncrease),e.xp6(6),e.hij(" ",e.Dn7(7,3,e.lcZ(8,7,t.totalPrice),",",".")," \u0111 ")}}function Le(a,c){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",93)(2,"div",94),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onShare())}),e._UZ(3,"cf-icon",95),e.TgZ(4,"div",96),e._uU(5," Sao ch\xe9p "),e.qZA()(),e._UZ(6,"booking-text-origin",97),e.qZA(),e.BQk()}if(2&a){const t=c.$implicit;e.xp6(6),e.Q6J("bookingText",t)}}function Re(a,c){if(1&a&&(e.TgZ(0,"div",64),e.YNc(1,Le,7,1,"ng-container",42),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listBookingText)}}function Ke(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.status,")")}}function je(a,c){if(1&a&&(e.TgZ(0,"div",79)(1,"div",74)(2,"div",75),e._uU(3,"S\u1ed1 v\xe9"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.YNc(6,Ke,2,1,"span",14),e.qZA()(),e.TgZ(7,"div",74)(8,"div",75),e._uU(9,"H\xe0nh tr\xecnh"),e.qZA(),e.TgZ(10,"div",76),e._uU(11),e.qZA()(),e.TgZ(12,"div",74)(13,"div",75),e._uU(14,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(15,"div",76),e._uU(16),e.qZA()(),e.TgZ(17,"div",74)(18,"div",75),e._uU(19,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(20,"div",76),e._uU(21),e.qZA()(),e.TgZ(22,"div",74)(23,"div",75),e._uU(24,"H\xe3ng"),e.qZA(),e.TgZ(25,"div",76),e._uU(26),e.qZA()()()),2&a){const t=c.$implicit;e.xp6(5),e.hij("",t.ticketNumber," "),e.xp6(1),e.Q6J("ngIf","VOID"===t.status),e.xp6(5),e.Oqu(t.journeyName),e.xp6(5),e.hij("",t.bookingCode," "),e.xp6(5),e.Oqu(t.passengerName),e.xp6(5),e.hij("",t.airline," ")}}function He(a,c){if(1&a&&(e.TgZ(0,"div",64),e.YNc(1,je,27,6,"div",78),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listTicketInfo)}}function Ye(a,c){if(1&a&&(e.TgZ(0,"div",64),e._UZ(1,"remark-booking-page",17),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("listBookingCode",t.listBookingCode)}}function Je(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",73)(1,"div",74)(2,"div",75),e._uU(3,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n"),e.qZA(),e.TgZ(4,"div",76),e._uU(5),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75),e._uU(8,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA()(),e.TgZ(11,"div",74)(12,"div",75),e._uU(13,"PNR m\u1edbi"),e.qZA(),e.TgZ(14,"a",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.gotoBookingDetail(i.monitorOrderInfo.airline,i.monitorOrderInfo.pnr))}),e._uU(15),e.qZA()(),e.TgZ(16,"div",74)(17,"div",75),e._uU(18,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(19,"label",62),e._uU(20),e.qZA()(),e.TgZ(21,"div",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onOrderDetail(i.monitorOrderInfo.orderId))}),e.TgZ(22,"span"),e._uU(23,"Chi ti\u1ebft"),e.qZA()()()}if(2&a){const t=e.oxw(3);e.xp6(5),e.Oqu(t.monitorOrderInfo.userAction),e.xp6(5),e.Oqu(t.monitorOrderInfo.timeCreate),e.xp6(5),e.Oqu(t.monitorOrderInfo.pnr||"-"),e.xp6(4),e.Tol(t.monitorOrderInfo.stateLabel.style),e.xp6(1),e.Oqu(null==t.monitorOrderInfo.stateLabel?null:t.monitorOrderInfo.stateLabel.name)}}function $e(a,c){if(1&a&&(e.TgZ(0,"div",64),e.YNc(1,Je,24,6,"div",98),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isMonitorOrderInfo)}}function Qe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"suggest-register-order",99),e.NdJ("actionChange",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onChangeSuggest(i))}),e.qZA()}}function Ve(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e.YNc(2,de,6,1,"div",6),e.TgZ(3,"div",7)(4,"div",8),e._UZ(5,"div",9),e.TgZ(6,"div",10),e._uU(7,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(8,"div",11),e.YNc(9,ge,1,4,"booking-detail",12),e.qZA()(),e.YNc(10,he,22,1,"div",13),e.YNc(11,pe,22,1,"div",13),e.YNc(12,Te,21,2,"div",13),e.YNc(13,xe,15,8,"div",14),e.YNc(14,Ce,33,6,"div",14),e.qZA(),e.TgZ(15,"div",15)(16,"cf-booking-text",16),e.NdJ("actionShare",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onShare())})("modeChange",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.changeModeBookingText(i))}),e.qZA(),e._UZ(17,"remark-booking-page",17),e.qZA(),e.TgZ(18,"div",18)(19,"div",19)(20,"div",20,21),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(21),n=e.oxw();return e.KtG(n.mobileTabChange("BOOKING_DETAIL",i))}),e._uU(22," Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(23,"div",20,22),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(24),n=e.oxw();return e.KtG(n.mobileTabChange("PAX_INFO",i))}),e._uU(25," Th\xf4ng tin h\xe0nh kh\xe1ch "),e.qZA(),e.TgZ(26,"div",20,23),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(27),n=e.oxw();return e.KtG(n.mobileTabChange("TOTAL_PRICE",i))}),e._uU(28," T\u1ed5ng chi ph\xed "),e.qZA(),e.TgZ(29,"div",20,24),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(30),n=e.oxw();return e.KtG(n.mobileTabChange("TICKET_FACE",i))}),e._uU(31," M\u1eb7t v\xe9 "),e.qZA(),e.TgZ(32,"div",20,25),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(33),n=e.oxw();return e.KtG(n.mobileTabChange("TICKET_NUMBER",i))}),e._uU(34," S\u1ed1 v\xe9 "),e.qZA(),e.TgZ(35,"div",20,26),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(36),n=e.oxw();return e.KtG(n.mobileTabChange("REMARK",i))}),e._uU(37," Remark "),e.qZA(),e.TgZ(38,"div",20,27),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(39),n=e.oxw();return e.KtG(n.mobileTabChange("LOWFARE",i))}),e._uU(40," Canh v\xe9 r\u1ebb "),e.qZA(),e.TgZ(41,"div",20,28),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(42),n=e.oxw();return e.KtG(n.mobileTabChange("HISTORY",i))}),e._uU(43," L\u1ecbch s\u1eed "),e.qZA()(),e.YNc(44,ke,1,0,"suggest-register-order",29),e.YNc(45,Oe,5,4,"div",30),e.YNc(46,Pe,22,3,"div",30),e.YNc(47,Me,2,1,"div",30),e.YNc(48,Fe,12,9,"div",31),e.YNc(49,Re,2,1,"div",30),e.YNc(50,He,2,1,"div",30),e.YNc(51,Ye,2,1,"div",30),e.YNc(52,$e,2,1,"div",30),e.qZA(),e.YNc(53,Qe,1,0,"suggest-register-order",32),e.qZA()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isSuccess),e.xp6(7),e.Q6J("ngForOf",t.bookingDetails),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.listTicketInfo.length&&"VJ"!==t.listTicketInfo[0].airline),e.xp6(1),e.Q6J("ngIf",t.isSuccess&&e.DdM(70,$).includes(t.bookingDetails[0].status)),e.xp6(1),e.Q6J("ngIf",t.isMonitorOrderInfo),e.xp6(2),e.Q6J("listBookingText",t.listBookingText)("modeBookingText",t.modeBookingText)("bookingContact",t.bookingContact)("listBookingTextExplain",t.listBookingTextExplain),e.xp6(1),e.Q6J("listBookingCode",t.listBookingCode),e.xp6(3),e.ekj("text-secondary-3-4","BOOKING_DETAIL"===t.mobileTabMode)("!border-secondary-3-4","BOOKING_DETAIL"===t.mobileTabMode)("bg-secondary-3-1","BOOKING_DETAIL"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","PAX_INFO"===t.mobileTabMode)("!border-secondary-3-4","PAX_INFO"===t.mobileTabMode)("bg-secondary-3-1","PAX_INFO"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","TOTAL_PRICE"===t.mobileTabMode)("!border-secondary-3-4","TOTAL_PRICE"===t.mobileTabMode)("bg-secondary-3-1","TOTAL_PRICE"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","TICKET_FACE"===t.mobileTabMode)("!border-secondary-3-4","TICKET_FACE"===t.mobileTabMode)("bg-secondary-3-1","TICKET_FACE"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","TICKET_NUMBER"===t.mobileTabMode)("!border-secondary-3-4","TICKET_NUMBER"===t.mobileTabMode)("bg-secondary-3-1","TICKET_NUMBER"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","REMARK"===t.mobileTabMode)("!border-secondary-3-4","REMARK"===t.mobileTabMode)("bg-secondary-3-1","REMARK"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","LOWFARE"===t.mobileTabMode)("!border-secondary-3-4","LOWFARE"===t.mobileTabMode)("bg-secondary-3-1","LOWFARE"===t.mobileTabMode),e.xp6(3),e.ekj("text-secondary-3-4","HISTORY"===t.mobileTabMode)("!border-secondary-3-4","HISTORY"===t.mobileTabMode)("bg-secondary-3-1","HISTORY"===t.mobileTabMode),e.xp6(3),e.Q6J("ngIf",t.isOpenSuggest),e.xp6(1),e.Q6J("ngIf","BOOKING_DETAIL"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","PAX_INFO"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","TOTAL_PRICE"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","TOTAL_PRICE"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","TICKET_FACE"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","TICKET_NUMBER"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","REMARK"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf","LOWFARE"===t.mobileTabMode),e.xp6(1),e.Q6J("ngIf",t.isOpenSuggest)}}function Ge(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",100)(1,"div",101)(2,"div"),e._UZ(3,"img",102),e.qZA(),e.TgZ(4,"div",103)(5,"div",104),e._uU(6,"R\u1ea5t ti\u1ebfc, \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",105)(8,"p"),e._uU(9),e.qZA()()(),e.TgZ(10,"div",106)(11,"button",107),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.getBookingDetail())}),e._UZ(12,"cf-icon",108),e._uU(13," Th\u1eed l\u1ea1i "),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(9),e.hij("",t.messageError,". Vui l\xf2ng ki\u1ec3m tra v\xe0 th\u1eed l\u1ea1i sau")}}function ze(a,c){1&a&&(e.TgZ(0,"div",109),e._UZ(1,"cf-spinner"),e.qZA())}let Xe=(()=>{class a{constructor(t,o,i,n,r,l,s,d,p,v,C,y,b,B,u,m){this.route=t,this._bookingDetailService=o,this._cfRegister=i,this._flightDataService=n,this._modal=r,this._locationDataService=l,this._manageBookingService=s,this._toastService=d,this.clipboard=p,this._permissionService=v,this._bottomSheetService=C,this._mobileDetectService=y,this._ticketLowFareService=b,this._route=B,this._eventLogService=u,this._sockerService=m,this.passengerInfos=[],this.bookingDetails=[],this.isSuccess=!1,this.isLoading=!1,this.dataBaggageInput=[],this.hasBaggageSelected=!1,this.dataSeatInput=[],this.hasSeatSelected=!1,this.listBaggage=[],this.listService=[],this.listJourneyBasic=[],this.listAction=[],this.listBookingText=[],this.listBookingTextExplain=[],this.modeBookingText="explain",this.isCopied=!1,this.listTicketInfo=[],this.actionOption=[{value:"booking_detail",name:"M\u1edf booking",icon:"external_link",enabled:[T.or.ViewAllFlightBookingDetail,T.or.ViewOwnFlightBookingDetail].some(g=>this._permissionService.hasPermission(g))},{value:"void",name:"Void v\xe9",icon:"coupon_slash",enabled:[T.or.CanVoidFlightTicket].some(g=>this._permissionService.hasPermission(g))},{value:"issue",name:"Xu\u1ea5t v\xe9",icon:"grouping",enabled:[T.or.CanIssuedFlightTicket].some(g=>this._permissionService.hasPermission(g))},{value:"boarding_pass",name:"M\u1eb7t v\xe9",icon:"coupon",enabled:[T.or.CreateFlightTicketFace].some(g=>this._permissionService.hasPermission(g))},{value:"addon_baggage",name:"Th\xeam h\xe0nh l\xfd",icon:"",enabled:[T.or.CanAddonFlightBaggage].some(g=>this._permissionService.hasPermission(g))},{value:"addon_seat",name:"Th\xeam ch\u1ed7 ng\u1ed3i",icon:"",enabled:[T.or.CanAddonFlightSeat].some(g=>this._permissionService.hasPermission(g))},{value:"delete_segments",name:"H\u1ee7y h\xe0nh tr\xecnh",icon:"delete",enabled:this._permissionService.hasPermission(T.or.CanDeleteFlightSegment)},{value:"register_order",name:"Canh v\xe9 r\u1ebb",icon:"price_down",enabled:this._permissionService.hasPermission(T.or.CanMonitorLowFareTicket)},{value:"send_email",name:"G\u1eedi email",icon:"email",enabled:[T.or.CanSendEmail].some(g=>this._permissionService.hasPermission(g))},{value:"other",name:"Kh\xe1c",icon:"options_vertical",enabled:[T.or.CanAddonFlightSeat,T.or.CanAddonFlightBaggage].some(g=>this._permissionService.hasPermission(g)),items:[{value:"addon_baggage",name:"Th\xeam h\xe0nh l\xfd",icon:"",enabled:[T.or.CanAddonFlightBaggage].some(g=>this._permissionService.hasPermission(g))},{value:"addon_seat",name:"Th\xeam ch\u1ed7 ng\u1ed3i",icon:"",enabled:[T.or.CanAddonFlightSeat].some(g=>this._permissionService.hasPermission(g))}]}],this.listBookingCode=[],this.isShowRemark=!this._permissionService.isVNAccount(),this.messageError="",this.maxBag=10,this.zIndexPriceIncrease=!1,this.mobileTabMode="BOOKING_DETAIL",this.isOpenSuggest=!1,this.isMonitorOrderInfo=!1,this.bookingCode=t.snapshot.params.bookingCode,this.airline=t.snapshot.params.airline,i.registerIcons([_.xgX,_.Ey$,_.tLH,_.xbi,_.NYs,_.Hge,_.n78,_.fqi,_.esH,_.cnj,_.$f3])}ngOnInit(){this.route.params.subscribe(t=>{this.bookingCode=t.bookingCode,this.airline=t.airline,this.getBookingDetail()}),this.handleSocketTimoutEvent()}handleSocketTimoutEvent(){const o=this._permissionService.getCurrentUser().userId;this._sockerService.timeoutEvent$.subscribe({next:i=>{this.refTimoutModal&&this.refTimoutModal.close(),this.refTimoutBts&&this.refTimoutBts.dismiss(),i.receiverId===o&&(this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:"M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this.getBookingDetail())}})}getBookingDetail(){this.isLoading=!0,this._bookingDetailService.getBookingDetail(this.bookingCode,this.airline).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var o;if(t.success)this.checkSuggestRegisterOrder(),this.isSuccess=!0,this.bookingDetailResult=t,this.listBookingCode=[{bookingCode:t.data.bookingCode}],this.initPassenger(),this.initBookingDetail(),this.listBaggage=[],this.mappingJourneyBasic(),this._getSeatCharge(),this._getBaggageCharge(),this.initPriceDetail(),this.initTotalPrice(),this.getBookingContact(),this.getBooingText(),this.getListTicketInfo();else{this.isSuccess=!1;const i=null!==(o=t.objectError.errorDescription.vi)&&void 0!==o?o:t.objectError.errorDescription.en;this.messageError=i,this._toastService.add({severity:"error",summary:"Xem chi ti\u1ebft th\u1ea5t b\u1ea1i",detail:i,sticky:!1})}},error:()=>{this.isSuccess=!1,this.messageError="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xednh th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y"}})}bookingRetriver$(){return this._bookingDetailService.getBookingDetail(this.bookingCode,this.airline)}checkSuggestRegisterOrder(){this._ticketLowFareService.canMonitorLowFare({airline:this.airline,pnr:this.bookingCode}).subscribe({next:o=>{"OK"===o.status&&(o.data.monitorOrderInfo?(this.monitorOrderInfo={orderId:o.data.monitorOrderInfo.orderId,pnr:o.data.monitorOrderInfo.pnr,airline:o.data.monitorOrderInfo.airline,state:o.data.monitorOrderInfo.state,stateLabel:this.getSateLabel(o.data.monitorOrderInfo.state),timeCreate:o.data.monitorOrderInfo.timeCreate?x(o.data.monitorOrderInfo.timeCreate).format("HH:mm DD/MM/YYYY"):"",userAction:o.data.monitorOrderInfo.userActionInfo.name},this.isMonitorOrderInfo=!0):this.isMonitorOrderInfo=!1,o.data.canSuggestMonitor.enable&&this.handleShowSuggest())}})}getSateLabel(t){switch(t){case D.b.CREATE:case D.b.IN_PROCESS:return{name:"\u0110ang canh v\xe9",style:"text-secondary-7-5 bg-secondary-7-1"};case D.b.IN_PROCESS_PRICE_UP:return{name:"Gi\xe1 \u0111\xe3 t\u0103ng",style:"text-primary-1-4 bg-primary-7-1"};case D.b.COMPLETED:return{name:"\u0110\xe3 canh v\xe9 r\u1ebb",style:"text-secondary-5-3 bg-secondary-5-1"};case D.b.CANCEL:return{name:"\u0110\xe3 b\u1ecb h\u1ee7y",style:"text-neutral-white bg-[#00000099]"};case D.b.EXPIRED:return{name:"\u0110\xe3 h\u1ebft h\u1ea1n",style:"text-neutral-gray-6 bg-neutral-gray-2"};default:return{name:"",style:""}}}handleShowSuggest(){this.isOpenSuggest=!0,setTimeout(()=>{this.isOpenSuggest=!1},3e4)}getBookingContact(){this.bookingContact=this.bookingDetailResult.data.bookingContact}getBooingText(){this.listBookingText=[Object.assign(Object.assign({},this.bookingDetailResult.data.bookingText),{airline:this.bookingDetailResult.data.airline,totalPrice:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(this.bookingDetailResult.data.bookingText.totalPrice||0),timeLimit:this.bookingDetails[0].timeHoldBooking})];const t=this.bookingDetailResult.data.bookingTextExplain;t&&(this.listBookingTextExplain=[Object.assign({},t)],this.bookingTextExplain=this.getExplaneText())}initPassenger(){this.passengerInfos=this.bookingDetailResult.data.passengers.map(t=>({name:t.getName(),type:t.getType(),sex:t.getGender(),birthday:t.getBirthday()})),this.passengers=this.bookingDetailResult.data.passengers.map(t=>({name:t.getName(),type:t.type,typeName:t.getType(),key:t.key}))}initBookingDetail(){var t,o,i,n,r,l,s,d,p,v,C,y,b,B;const u=this.bookingDetailResult.data;this.listAction.push(u.getAction()),this.bookingDetails=[{agentId:u.agentId,coOwnerId:u.coOwnerId,bookingCode:u.bookingCode,holdLimitTime:u.bookingTextExplain.holdLimitTime,provider:u.provider,bookingCodeDisplay:u.bookingCode,airline:u.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(u.airline),mobileAirlineLogo:["VJ","VN","QH"].includes(u.airline)?"assets/airline-logo/"+u.airline+"_small.png":"assets/airline-logo/"+u.airline+".png",airlineName:["VJ","VN","QH"].includes(u.airline)?this._flightDataService.getAirlineSystemNameByCode(u.airline):u.airlineName,airlineSystem:u.airline,startPoint:null===(t=u.journeys[0])||void 0===t?void 0:t.departure.airport.code,endPoint:1===u.journeys.length?null===(o=u.journeys[0])||void 0===o?void 0:o.arrival.airport.code:null===(i=u.journeys[u.journeys.length-1])||void 0===i?void 0:i.departure.airport.code,status:u.state,issued:u.issued,statusText:u.getStatusText(),statusDesc:"N/A",caCode:"N/A",timeHoldBooking:null!==(n=u.bookDetail)&&void 0!==n&&n.timeHoldBooking?x(u.bookDetail.timeHoldBooking).format("HH:mm, DD/MM/YYYY"):"",timeHoldPricing:null!==(r=u.bookDetail)&&void 0!==r&&r.timeKeepPrice?x(u.bookDetail.timeKeepPrice).format("HH:mm, DD/MM/YYYY"):"N/A",tourCode:"N/A",totalFare:null!==(l=u.fareCharges)&&void 0!==l&&l.total?u.fareCharges.total.total:null,totalServiceFee:null!==(s=u.totalCharges)&&void 0!==s&&s.total?u.totalCharges.total.totalServiceFee:null,totalCharge:null===(d=u.totalCharges)||void 0===d?void 0:d.total.total,targetPriceOrder:null===(p=u.fareCharges)||void 0===p?void 0:p.getTotalChargeOrder(),flightNumber:`${(null===(C=null===(v=u.journeys[0])||void 0===v?void 0:v.segments[0])||void 0===C?void 0:C.airline)||""}${(null===(b=null===(y=u.journeys[0])||void 0===y?void 0:y.segments[0])||void 0===b?void 0:b.flightNumber)||""}`,journeys:u.journeys.map(m=>({airline:m.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(m.airline),airlineName:m.airlineName,operating:m.operating,operatingName:m.operatingName,startPoint:m.departure.airport.code,startPointName:this._locationDataService.getCityNameByCode(m.departure.airport.code),endPoint:m.arrival.airport.code,endPointName:this._locationDataService.getCityNameByCode(m.arrival.airport.code),startTime:x(m.departure.localTime).toDate(),endTime:x(m.arrival.localTime).toDate(),segments:m.segments.map(g=>{const E=g.getDelayString();return{airline:g.airline,airlineName:g.operatingName,airlineLogo:this._flightDataService.getAirlineLogoByCode(g.operating||g.airline),startPoint:g.departure.airport.code,startPointName:this._locationDataService.getCityNameByCode(g.departure.airport.code),endPoint:g.arrival.airport.code,endPointName:this._locationDataService.getCityNameByCode(g.arrival.airport.code),startTime:x(g.departure.localTime).toDate(),endTime:x(g.arrival.localTime).toDate(),flightNumber:g.flightNumber,duration:g.getDurationString(),shortDuration:(0,z.N)(g.duration),key:g.key,operating:g.operating,operatingName:g.operatingName,codeAirline:g.codeAirline,checkedBaggage:g.bookedInfo.checkedBaggage,fareClass:g.bookedInfo.fareClass,fareType:g.bookedInfo.fareType||g.bookedInfo.fareClass||"",fareBasic:g.bookedInfo.fareBasic,handBaggage:g.bookedInfo.handBaggage,modelAirplane:g.modelAirplane,stopPoint:E?`D\u1eebng t\u1ea1i: ${this._locationDataService.getAirportNameByCode(g.departure.airport.code)} (${g.departure.airport.code}). Th\u1eddi gian d\u1eebng: ${E}`:""}})})),passengers:(null===(B=u.passengers)||void 0===B?void 0:B.map(m=>{var g,E,P,U,M;return{name:m.getName(),firstName:m.firstName,lastName:m.lastName,type:m.getType(),farePrice:(null===(g=u.fareCharges)||void 0===g?void 0:g.getBaseCharge(m.type))-(null===(E=u.fareCharges)||void 0===E?void 0:E.getDiscount(m.type)),tax:null===(P=u.fareCharges)||void 0===P?void 0:P.getTaxCharge(m.type),vat:null===(U=u.fareCharges)||void 0===U?void 0:U.getVATCharge(m.type),total:null===(M=u.fareCharges)||void 0===M?void 0:M.getTotalCharge(m.type),key:m.key,parentKey:m.parentKey,birthday:m.birthday,namePrefix:m.namePrefix,gender:m.gender}}))||[],actions:this.getListTicketAction(u.state,u.provider),bookingTextExplain:null==u?void 0:u.bookingTextExplain}]}initPriceDetail(){var t,o;this.priceDetail={provider:[this.bookingDetailResult.data.provider],totalBasePrice:null===(t=this.bookingDetailResult.data.totalCharges)||void 0===t?void 0:t.total.totalFareCharge,totalServiceFee:null===(o=this.bookingDetailResult.data.totalCharges)||void 0===o?void 0:o.total.totalServiceFee,totalAddonService:this.computeTotalChargeAddOn(),passengers:this.passengers.map(i=>{var n,r,l,s,d;return{name:i.name,type:i.typeName,base:(null===(n=this.bookingDetailResult.data.fareCharges)||void 0===n?void 0:n.getBaseCharge(i.type))-(null===(r=this.bookingDetailResult.data.fareCharges)||void 0===r?void 0:r.getDiscount(i.type)),tax:(null===(l=this.bookingDetailResult.data.fareCharges)||void 0===l?void 0:l.getTaxCharge(i.type))+(null===(s=this.bookingDetailResult.data.fareCharges)||void 0===s?void 0:s.getVATCharge(i.type)),total:null===(d=this.bookingDetailResult.data.fareCharges)||void 0===d?void 0:d.getTotalCharge(i.type)}})}}initTotalPrice(){var t;this.totalPrice=null===(t=this.bookingDetailResult.data.totalCharges)||void 0===t?void 0:t.total.total}onActionChange(t,o){const i={airline:o.airlineSystem,bookingCode:o.bookingCode,payNow:"ISSUED"===o.status};switch(t){case"addon_baggage":return this.onAddonBaggage(i);case"addon_seat":return this.onAddonSeat(i);case"void":return this.onVoidBooking();case"issue":return this.onIssueBooking(i);case"boarding_pass":return this.onShowBoardingPass(o);case"delete_segments":return this.onDeleteSegment(o);case"copy_pnr":return this.onCopyBookingCode(o.bookingCode);case"register_order":return this._eventLogService.captureOpenFormDownFare({hasPNR:1,source:1}),this.onRegisterOrder(o);case"send_email":return this.onSendEmail(o);default:return}}onAddonBaggage(t){var o;if(N.PY&&"VN"===(null===(o=this.bookingDetailResult.data.airline)||void 0===o?void 0:o.toUpperCase()))return void this._modal.open(f.z5,{title:"Th\xf4ng b\xe1o",content:"H\u1ec7 th\u1ed1ng m\u1edbi Vietnam Airlines ch\u01b0a h\u1ed7 tr\u1ee3 t\xednh n\u0103ng n\xe0y. Xin li\u1ec7n h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3",status:"error",cancelText:"\u0110\xf3ng"});if(this.dataBaggageInput=this.mappingDataBaggageInput(),!this.dataBaggageInput.length||this.dataBaggageInput.every(n=>!n.journeys.length))return void this._toastService.add({severity:"error",summary:"Th\xeam h\xe0nh l\xfd th\u1ea5t b\u1ea1i",detail:"H\xe0nh l\xfd \u0111\xe3 c\xf3",sticky:!1});const i=Object.assign({},t);if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(S.AddOnBaggageModalComponent,{headerTitle:"Th\xeam h\xe0nh l\xfd",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:i,type:"baggage_addon",bookingInfo:t}});n.containerInstance._leftButtonClick.subscribe(r=>n.dismiss()),n.afterDismissed().subscribe(r=>{r&&this.processAddonBaggage(t,r)})}else this._modal.open(S.AddOnBaggageModalComponent,{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:i,type:"baggage_addon",bookingInfo:t}).afterClosed$.subscribe({next:r=>{this.processAddonBaggage(t,r.data)}})}processAddonBaggage(t,o){var i;const n=o;if(n&&n.success)if(this._mobileDetectService.isMobile()){const r=this._bottomSheetService.open(f.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"Th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng!",content:"<div>\u0110\xe3 th\xeam h\xe0nh l\xfd cho booking code:</div>",status:"success",okText:"OK",extraText:`${t.bookingCode}`}});r.containerInstance._rightButtonClick.subscribe(l=>r.dismiss()),r.afterDismissed().subscribe(l=>{this.getBookingDetail()})}else this._modal.open(f.z5,{title:"Th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng!",content:"<div>\u0110\xe3 th\xeam h\xe0nh l\xfd cho booking code:</div>",status:"success",okText:"OK",extraText:`${t.bookingCode}`}).afterClosed$.subscribe({next:l=>{this.getBookingDetail()}});if(n&&!n.success){const r=null!==(i=n.objectError.errorDescription.vi)&&void 0!==i?i:n.objectError.errorDescription.en;this._toastService.add({severity:"error",summary:"Th\xeam h\xe0nh l\xfd th\u1ea5t b\u1ea1i",detail:r,sticky:!1})}}onAddonSeat(t){this.dataSeatInput=this.mappingDataSeatInput();const o=Object.assign({},t);if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(S.AddOnSeatModalComponent,{headerTitle:"Th\xeam ch\u1ed7 ng\u1ed3i",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataSeatInput:this.dataSeatInput,addonSeatReq:o,type:"seat_addon",bookingInfo:t}});i.containerInstance._leftButtonClick.subscribe(n=>i.dismiss()),i.afterDismissed().subscribe(n=>{this.processAddonSeat(t,n)})}else this._modal.open(S.AddOnSeatModalComponent,{dataSeatInput:this.dataSeatInput,addonSeatReq:o,type:"seat_addon",bookingInfo:t}).afterClosed$.subscribe({next:n=>{this.processAddonSeat(t,n.data)}})}processAddonSeat(t,o){let i=o;if(!o.data.addOnCharges&&o.data.data&&(i=o.data),i&&i.success){const r=i.data.addOnCharges.map(l=>({charge:Object.assign({},l.charge.charge),seatInfos:{journeyKey:l.seatItem.journeyKey,mapCell:Object.assign({},l.seatItem.mapCell),passengerKey:l.seatItem.passengerKey,segmentKey:l.seatItem.segmentKey}}));if(this.bookingDetailResult.data.seatCharges.push(...r),this._getSeatCharge(),this.initPriceDetail(),this.totalPrice=this.bookingDetailResult.data.totalCharges.total.total+this.computeTotalChargeAddOn(),this._mobileDetectService.isMobile()){const l=this._bottomSheetService.open(f.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"Th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng!",content:"<div>\u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i cho booking code:</div>",status:"success",okText:"OK",extraText:`${t.bookingCode}`}});l.containerInstance._rightButtonClick.subscribe(s=>l.dismiss())}else this._modal.open(f.z5,{title:"Th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng!",content:"<div>\u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i cho booking code:</div>",status:"success",okText:"OK",extraText:`${t.bookingCode}`})}if(i&&!i.success){const n=i.error.errorDescription.vi?i.error.errorDescription.vi:i.error.errorDescription.en;if(this._mobileDetectService.isMobile()){const r=this._bottomSheetService.open(f.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"Th\xeam ch\u1ed7 ng\u1ed3i th\u1ea5t b\u1ea1i",content:`<div>\n                        <div>${n}</div>\n                        <div>Vui l\xf2ng th\u1eed l\u1ea1i sau!</div>\n                    </div>`,status:"error",okText:"Th\u1eed l\u1ea1i",cancelText:"\u0110\xf3ng"}});r.containerInstance._rightButtonClick.subscribe(l=>r.dismiss())}else this._modal.open(f.z5,{title:"Th\xeam ch\u1ed7 ng\u1ed3i th\u1ea5t b\u1ea1i",content:`<div>\n                      <div>${n}</div>\n                      <div>Vui l\xf2ng th\u1eed l\u1ea1i sau!</div>\n                  </div>`,status:"error",okText:"Th\u1eed l\u1ea1i",cancelText:"\u0110\xf3ng"})}}mappingDataBaggageInput(){const t=this.bookingDetailResult.data;let o=t.passengers.filter(i=>"INFANT"!==i.type).map(i=>{var n;return{passengerKey:i.key,passengerType:i.type,passengerName:i.lastName+" "+i.firstName,addBaggageFee:(null===(n=i.passengerDerivativeFee)||void 0===n?void 0:n.addBaggageFee)||0,journeys:t.journeys.filter(r=>{const l=t.ssrCharges?t.ssrCharges.filter(s=>s.ssrInfo.journeyKey===r.key&&s.ssrInfo.passengerKey===i.key):[];return!("VN"===r.airline&&l.length>=this.maxBag||"VN"!==r.airline&&l.length)&&r}).map(r=>{const l=x(r.departure.localTime).toDate();return{airlineName:this._flightDataService.getAirlineSystemNameByCode(r.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(r.airline),journeyKey:r.key,flight:r.airline.concat(" ",r.segments[0].flightNumber),flightNumber:r.segments[0].flightNumber,journeyName:`D\u1ecbch v\u1ee5 b\u1ed5 sung ${r.departure.airport.code}-${r.arrival.airport.code}, ${(0,k.p6)(l,"EEEE, ","vi-VN")} ${l.getDate()} th\xe1ng ${l.getMonth()+1}, ${l.getFullYear()}`,leg:r.leg,fareOptionKey:"",startCode:r.departure.airport.code,endCode:r.arrival.airport.code,startTime:(0,k.p6)(new Date(r.departure.localTime),"EEEE, dd/MM/yyyy","vi-VN"),baggageOptions:[],baggageSelected:{baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}}})}});return o=o.filter(i=>i.journeys.length),o}mappingDataSeatInput(){const t=this.bookingDetailResult.data;return t.journeys.map(i=>({segments:i.segments.map(n=>{const r=x(n.departure.localTime).toDate(),l=`${(0,k.p6)(r,"EEEE, ","vi-VN")} ${r.getDate()} th\xe1ng ${r.getMonth()+1}, ${r.getFullYear()}`;return{airline:n.airline,flightNumber:n.flightNumber,bookingCode:t.bookingCode,serviceName:`Th\xeam ch\u1ed7 ng\u1ed3i tr\xean chuy\u1ebfn bay ${n.departure.airport.code}-${n.arrival.airport.code}, ${l}`,airlineLogo:this._flightDataService.getAirlineLogoByCode(n.airline),jetCode:"N/A",startCode:n.departure.airport.code,endCode:n.arrival.airport.code,departDate:l,passengers:t.passengers.filter(s=>"INFANT"!==s.type).map(s=>{var d,p;const v=null===(d=t.seatCharges)||void 0===d?void 0:d.find(C=>C.seatInfos.passengerKey===s.key&&C.seatInfos.journeyKey===i.key&&C.seatInfos.segmentKey===n.key);return{passengerName:`${s.lastName} ${s.firstName}`,passengerType:s.type.toLowerCase(),passengerKey:s.key,addSeatFee:(null===(p=s.passengerDerivativeFee)||void 0===p?void 0:p.addSeatFee)||0,seatSelected:{containerKey:"",seat:v?v.seatInfos.mapCell.row+v.seatInfos.mapCell.identifier:"",seatKey:v?v.seatInfos.key:"",totalPrice:v?v.charge.total:0}}}),segmentKey:n.key,segmentIndex:n.index,journeyKey:i.key,leg:i.leg,active:!1,seatSegment:{rows:[],cols:[],containerKey:"",seatMaps:[]},available:!(t.seatCharges&&t.seatCharges.some(s=>s.seatInfos.journeyKey===i.key&&s.seatInfos.segmentKey===n.key))}})})).flatMap(i=>i.segments).map((i,n)=>Object.assign(Object.assign({},i),{active:0===n}))}mappingJourneyBasic(){this.listJourneyBasic=this.bookingDetails.filter(t=>"INVALID"!==t.status).map(t=>({journeyInfo:t.journeys.map(o=>({airlineLogo:o.airlineLogo,flight:`${o.startPoint} - ${o.endPoint}`,startTime:(0,k.p6)(new Date(o.startTime),"dd/MM/yyyy","vi-VN"),journeyKey:o.key}))})).flatMap(t=>t.journeyInfo)}computeTotalChargeAddOn(){return this.listBaggage.reduce((i,n)=>i+n.totalCharge,0)+this.listService.reduce((i,n)=>i+n.totalCharge,0)}_getSeatCharge(){this.listService.length=0;const t=this.bookingDetailResult.data,o=t.journeys.flatMap(n=>n.segments),i=t.passengers;if(t.seatCharges&&t.seatCharges.length){const n=t.seatCharges.map(r=>{const l=i.find(d=>d.key===r.seatInfos.passengerKey),s=o.find(d=>d.key===r.seatInfos.segmentKey);return{airlineName:s?this._flightDataService.getAirlineNameByCode(s.airline):"",airlineLogo:s?this._flightDataService.getAirlineLogoByCode(s.airline):"",journeyKey:"",flight:s?s.departure.airport.code+" - "+s.arrival.airport.code:"",flightName:s?this._locationDataService.getCityNameByCode(s.departure.airport.code)+" - "+this._locationDataService.getCityNameByCode(s.arrival.airport.code):"",flightNumber:s?`${s.airline}${s.flightNumber}`:"",departDate:s?(0,k.p6)(new Date(s.departure.localTime),"dd/MM/yyyy","vi-VN"):"",passengerKey:l?l.key:"",passengerName:l?l.lastName+" "+l.firstName:"",serviceKey:"",totalCharge:r.charge.total,serviceName:r.seatInfos.mapCell.seatNumber?r.seatInfos.mapCell.seatNumber:r.seatInfos.mapCell.row+r.seatInfos.mapCell.identifier,categoryName:"seat"}});this.listService.push(...n)}this.hasSeatSelected=this.listService.some(n=>n)}_getBaggageCharge(){const t=this.bookingDetailResult.data,o=t.journeys,i=t.passengers;if(t.ssrCharges&&t.ssrCharges.length){const n=t.ssrCharges.map(r=>{const l=i.find(d=>d.key===r.ssrInfo.passengerKey),s=o.find(d=>d.key===r.ssrInfo.journeyKey);return{airlineName:s?this._flightDataService.getAirlineNameByCode(s.airline):"",airlineLogo:s?this._flightDataService.getAirlineLogoByCode(s.airline):"",journeyKey:s?s.key:"",flight:s?s.departure.airport.code+" - "+s.arrival.airport.code:"",flightName:s?this._locationDataService.getCityNameByCode(s.departure.airport.code)+" - "+this._locationDataService.getCityNameByCode(s.arrival.airport.code):"",flightNumber:"",departDate:s?(0,k.p6)(new Date(s.departure.localTime),"dd/MM/yyyy","vi-VN"):"",passengerKey:l?l.key:"",passengerName:l?l.lastName+" "+l.firstName:"",serviceKey:"",totalCharge:r.charge.total,serviceName:r.ssrInfo.name,categoryName:r.ssrInfo.category.name.toLowerCase()}});this.listBaggage.push(...n)}this.hasBaggageSelected=this.listBaggage.some(n=>n)}onVoidBooking(){if(this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(Z.hF,{headerTitle:"Void v\xe9",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{bookingCode:this.bookingCode,airline:this.airline}});t.containerInstance._leftButtonClick.subscribe(o=>t.dismiss()),t.afterDismissed().subscribe(o=>{o&&this.getBookingDetail()})}else this._modal.open(Z.hF,{bookingCode:this.bookingCode,airline:this.airline}).afterClosed$.subscribe({next:o=>{o.data&&this.getBookingDetail()}})}onIssueBooking(t){var o;if("ISSUED"===t.status&&N.PY&&"VN"===(null===(o=t.airline)||void 0===o?void 0:o.toUpperCase()))return void this._modal.open(f.z5,{title:"Th\xf4ng b\xe1o",content:"H\u1ec7 th\u1ed1ng m\u1edbi Vietnam Airlines ch\u01b0a h\u1ed7 tr\u1ee3 t\xednh n\u0103ng n\xe0y. Xin li\u1ec7n h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3",status:"error",cancelText:"\u0110\xf3ng"});const i_content="M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",n={title:"Xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i",content:"Xu\u1ea5t s\u1ed1 v\xe9 kh\xf4ng th\xe0nh c\xf4ng. Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",status:"error"},r={agentId:"",airline:t.airline,bookingCode:t.bookingCode,bookingPrice:0,internal:!0};this._modal.open(f.V0,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xu\u1ea5t v\xe9 n\xe0y kh\xf4ng."}).afterClosed$.subscribe({next:s=>{s.data&&(this.isLoading=!0,this._manageBookingService.issueTicket(r).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe({next:d=>{if(this.isLoading=!0,"OK"===d.status&&d.data)this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:i_content,sticky:!1}),this.getBookingDetail();else if("DS-EL002"===d.objectError.errorCode){const p=d.objectError.errorData.newPrice-d.objectError.errorData.oldPrice,v={newPrice:d.objectError.errorData.newPrice,oldPrice:d.objectError.errorData.oldPrice,priceGap:Math.abs(p),type:p>0?"+":"-"};this._modal.open(H.EH,{priceChangeData:v}).afterClosed$.subscribe({next:y=>{y.data&&(this.isLoading=!0,this._manageBookingService.issueTicket(r).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe({next:b=>{"OK"===b.status?(this._toastService.add({severity:"success",summary:"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng",detail:i_content,sticky:!1}),this.getBookingDetail()):"DS-EH001"===b.objectError.errorCode?this.hanldeTimeoutIssue():(n.content=b.objectError.errorDescription.vi?b.objectError.errorDescription.vi:b.objectError.errorDescription.en,this._toastService.add({severity:n.status,summary:n.title,detail:n.content,sticky:!1}))},error:b=>{b instanceof Y.W?this.hanldeTimeoutIssue():(n.content=d.objectError.errorDescription.vi?d.objectError.errorDescription.vi:d.objectError.errorDescription.en,this._toastService.add({severity:n.status,summary:n.title,detail:n.content,sticky:!1}))}}))}})}else"DS-EH001"===d.objectError.errorCode?this.hanldeTimeoutIssue():(n.content=d.objectError.errorDescription.vi?d.objectError.errorDescription.vi:d.objectError.errorDescription.en,this._toastService.add({severity:n.status,summary:n.title,detail:n.content,sticky:!1}))},error:d=>{d instanceof Y.W?this.hanldeTimeoutIssue():this._toastService.add({severity:n.status,summary:n.title,detail:n.content,sticky:!1})}}))}})}onShare(){const t="origin"===this.modeBookingText?this.getOriginText():this.bookingTextExplain;this.clipboard.copy(t),this.isCopied=!0,setTimeout(()=>{this.isCopied=!1},2e3)}getOriginText(){if(this.listBookingText){let t="";return this.listBookingText.forEach(o=>{var i,n,r,l,s,d,p,v,C,y,b;"VN"===o.airline?(t+=`${o.bookingCodeText}\r\n`,t+=(null===(i=o.passengerTexts)||void 0===i?void 0:i.join("\r\n"))+"\r\n",t+=(null===(n=o.segmentTexts)||void 0===n?void 0:n.join("\r\n "))+"\r\n",t+="TKT/TIME LIMIT\r\n ",t+=(null===(r=o.ticketTexts)||void 0===r?void 0:r.join("\r\n "))+"\r\n",t+="VCR COUPON DATA EXISTS *VI TO DISPLAY\r\n",t+="PHONES\r\n ",t+=(null===(l=o.contactTexts)||void 0===l?void 0:l.join("\r\n "))+"\r\n",t+="PASSENGER EMAIL DATA EXISTS *PE TO DISPLAY ALL\r\n",t+="PRICE QUOTE RECORD EXISTS - *PQS\r\n",t+="FREQUENT TRAVELER\r\n",t+=(null===(s=o.frequentTexts)||void 0===s?void 0:s.join("\r\n "))+"\r\n",t+="TICKETED RETAINED REISSUE EXISTS - *PQS\r\n",t+="VN FACTS\r\n ",t+=(null===(d=o.ssrTexts)||void 0===d?void 0:d.join("\r\n "))+"\r\n",o.remarkTexts&&(t+="REMARKS\r\n ",t+=null===(p=o.remarkTexts)||void 0===p?void 0:p.join("\r\n ")),t+=null===(v=o.agentTexts)||void 0===v?void 0:v.join("\r\n")):(t+=`${o.bookingCodeText}\r\n`,t+=(null===(C=o.passengerTexts)||void 0===C?void 0:C.join(" "))+"\r\n",t+=(null===(y=o.segmentTexts)||void 0===y?void 0:y.join("\r\n"))+"\r\n",t+=`TOTAL PRICE: ${o.totalPrice} VND\r\n`,o.timeLimit&&(t+=`TIME LIMIT: ${o.timeLimit}\r\n`),t+=null===(b=o.contactTexts)||void 0===b?void 0:b.join("\r\n"))}),t||""}return""}getExplaneText(){if(this.listBookingTextExplain){let t="";return this.listBookingTextExplain.forEach(o=>{var i;t+=(0,X.K)(o),t+="NOTE:\r\n",t+=null===(i=o.warning)||void 0===i?void 0:i.join("\r\n")}),t||""}return""}changeModeBookingText(t){this.modeBookingText=t}onShowBoardingPass(t){if(this._mobileDetectService.isMobile()){const o=this._bottomSheetService.open(j.G,{headerTitle:"M\u1eb7t v\xe9",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!0,data:{bookingDetail:t,listBaggage:this.listBaggage,listService:this.listService,totalPrice:this.totalPrice}});o.containerInstance._leftButtonClick.subscribe(i=>o.dismiss())}else this._modal.open(j.G,{bookingDetail:t,listBaggage:this.listBaggage,listService:this.listService,totalPrice:this.totalPrice})}getListTicketAction(t,o){switch(t){case"BOOKED":return this.actionOption.filter("VJ"===o?i=>["issue","boarding_pass","addon_baggage","addon_seat","register_order","send_email"].includes(i.value):"VN"===o?i=>["issue","boarding_pass","delete_segments","register_order","send_email"].includes(i.value):"GDS"===o?i=>["boarding_pass"].includes(i.value):i=>["issue","boarding_pass","register_order","send_email"].includes(i.value));case"ISSUED":if("VN"===o)return this.actionOption.filter(i=>["void","boarding_pass","addon_baggage","delete_segments","register_order","send_email"].includes(i.value));if("GDS"===o)return this.actionOption.filter(i=>["boarding_pass"].includes(i.value));if("QH"===o){const i=["boarding_pass","addon_baggage","send_email"];return N.kp.qh&&i.push("addon_seat"),this.actionOption.filter(n=>i.includes(n.value))}return this.actionOption.filter("VJ"===o?i=>["boarding_pass","addon_baggage","addon_seat","send_email"].includes(i.value):i=>["boarding_pass","send_email"].includes(i.value));case"VOID":return this.actionOption.filter("VJ"===o?i=>["boarding_pass","addon_baggage","addon_seat"].includes(i.value):"GDS"===o?i=>["boarding_pass"].includes(i.value):i=>["issue","boarding_pass","delete_segments"].includes(i.value));default:return[]}}getListTicketInfo(){var t;const o=this.bookingDetails[0];this.listTicketInfo=(null===(t=this.bookingDetailResult.data.ticketInfos)||void 0===t?void 0:t.map(i=>({ticketNumber:i.ticketNumber,journeyName:`${i.journeyDeparture} - ${i.journeyArrival}`,bookingCode:o.bookingCode,passengerName:i.passengerName,airline:i.airline,airlineName:i.airline,status:i.status,ticketType:i.ticketType,isDetail:"QH"!==i.airline&&"FARE"===i.ticketType||!1})))||[]}onShowTicketInfo(t){N.PY&&"VN"===this.bookingDetailResult.data.airline.toUpperCase()?this._modal.open(f.z5,{title:"Th\xf4ng b\xe1o",content:"H\u1ec7 th\u1ed1ng m\u1edbi Vietnam Airlines ch\u01b0a h\u1ed7 tr\u1ee3 t\xednh n\u0103ng n\xe0y. Xin li\u1ec7n h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3",status:"error",cancelText:"\u0110\xf3ng"}):(this.isLoading=!0,this._manageBookingService.getTicketDetail(t).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe({next:o=>{var i,n;if(o.success&&o.data){const r=this.proccessTicketDetail(o.data);this._modal.open(H.co,{ticketDetail:r,isAction:!1,airline:this.airline})}else{const r=(null===(i=o.objectError)||void 0===i?void 0:i.errorDescription.vi)||(null===(n=o.objectError)||void 0===n?void 0:n.errorDescription.en);this._toastService.add({severity:"error",summary:"Xem s\u1ed1 v\xe9 th\u1ea5t b\u1ea1i",detail:r,sticky:!1})}}}))}proccessTicketDetail(t){return{ticketNumber:t.ticketInfo.ticketNumber,passengerName:t.ticketInfo.passengerName,ticketInfo:{numCoupons:t.ticketInfo.numCoupons,issueDate:t.ticketInfo.issueDate,createDate:t.ticketInfo.createDate,bookingCode:t.ticketInfo.prn},segments:t.segment.map(o=>({number:o.number,airline:o.marketingAirline,flightNumber:o.flightNumber,classCode:o.bookingClassCode,date:o.departureDate,brdoff:o.originLocation+o.destinationLocation,time:o.departureTime,status:o.segmentStatus,fareBasis:o.fareBasis,statusCode:o.ticketStatus,baggageAllowance:o.baggageAllowance})),pricingInfo:{baseFare:t.pricingInfo.baseFare.currencyCode.concat(" ",t.pricingInfo.baseFare.amount),taxes:t.pricingInfo.taxes.map(o=>o.amount.concat(o.taxCode)).join(" "),totalFare:t.pricingInfo.totalFare.currencyCode.concat(" ",t.pricingInfo.totalFare.amount)},fareCalc:t.pricingInfo.fareCalculation,paymentInfo:{paymentCardNumber:t.paymentInfo.paymentCardNumber,authorizationCode:t.paymentInfo.authorizationCode},ticketData:{issueDate:t.ticketData.issueDate,printStation:t.ticketData.printStation,issuingAgent:t.ticketData.issuingAgent,remarks:t.ticketData.remarks,endorsements:t.ticketData.endorsements.join("")}}}onDeleteSegment(t){const o=t.journeys.flatMap(n=>n.segments).map((n,r)=>({order:r+1,segmentKey:n.key,journey:`${n.startPointName} (${n.startPoint}) - ${n.endPointName} (${n.endPoint})`,startTime:x(n.startTime).format("HH:mm DD/MM/YYYY"),flightNumber:`${n.airline}${n.flightNumber}`,status:"CREATE"})),i={airline:t.airline,bookingCode:t.bookingCode};if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(Z.df,{headerTitle:"H\u1ee7y h\xe0nh tr\xecnh",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!0,data:{listSegmentData:o,bookingInfo:i}});n.containerInstance._leftButtonClick.subscribe(r=>n.dismiss()),n.afterDismissed().subscribe(r=>{r&&this.getBookingDetail()})}else this._modal.open(Z.df,{listSegmentData:o,bookingInfo:i}).afterClosed$.subscribe({next:r=>{r.data&&this.getBookingDetail()}})}togglePriceBottomSheet(t){const o=this._bottomSheetService.open(t,{headerTitle:"Gi\xe1 v\xe9",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4"});this.zIndexPriceIncrease=!0,o.afterDismissed().subscribe(i=>{this.zIndexPriceIncrease=!1}),o.containerInstance._rightButtonClick.subscribe(i=>{o.dismiss()})}mobileDetailClick(t){const o=this._bottomSheetService.open(Z.iU,{headerTitle:"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7",rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!0,data:{flightInfos:[this.getFlightInfoDetail(t)]}});o.containerInstance._leftButtonClick.subscribe(i=>{o.dismiss()})}mobileTabChange(t,o){this.mobileTabMode=t,o.scrollIntoView({behavior:"smooth",inline:"center"})}getFlightInfoDetail(t){return{segments:t.journeys.flatMap((i,n)=>i.segments.map((r,l)=>({airline:r.airline,airlineSystem:r.airline,airlineName:r.airlineName,airlineLogo:r.airlineLogo,mobileAirlineLogo:["VJ","VN","QH"].includes(r.airline)?"assets/airline-logo/"+r.airline+"_small.png":"assets/airline-logo/"+r.airline+".png",flightNumber:r.airline+r.flightNumber,startTime:x(r.startTime).format("HH:mm"),startDate:x(r.startTime).format("DD/MM/YYYY"),startPoint:r.startPoint,startPointName:r.startPointName,startAirport:this._locationDataService.getAirportNameByCode(r.startPoint),endTime:x(r.endTime).format("HH:mm"),endDate:x(r.endTime).format("DD/MM/YYYY"),endPoint:r.endPoint,endPointName:r.endPointName,endAirport:this._locationDataService.getAirportNameByCode(r.endPoint),stopPoint:r.stopPoint,modelAirplane:r.modelAirplane,badge:0===n?"Chi\u1ec1u \u0111i":"Chi\u1ec1u v\u1ec1",rules:[{name:"Th\u1eddi gian bay",value:r.duration},{name:"Lo\u1ea1i m\xe1y bay",value:r.modelAirplane},{name:"H\u1ea1ng ch\u1ed7",value:"QH"===r.airline?r.fareType:r.fareClass},{name:"H\xe0nh l\xfd k\xfd g\u1eedi",value:r.checkedBaggage||"N/A"},{name:"H\xe0nh l\xfd x\xe1ch tay",value:r.handBaggage||"N/A"}]}))),status:t.status,statusDesc:t.statusDesc,timeHoldBooking:t.timeHoldBooking,timeHoldPricing:t.timeHoldPricing,airlineSystem:t.airlineSystem,airlineName:t.airlineName,totalFare:t.totalFare,passengers:t.passengers.map(i=>({name:i.name,type:i.type,farePrice:i.farePrice,tax:i.tax,vat:i.vat,total:i.total}))}}onCopyBookingCode(t){this.clipboard.copy(t)}onChangeSuggest(t){switch(this._eventLogService.captureOpenFormDownFare({hasPNR:1,source:2}),t){case"register_order":this.isOpenSuggest=!1,this.onRegisterOrder(this.bookingDetails[0]);break;case"close":this.isOpenSuggest=!1}}onRegisterOrder(t){const o={airline:t.airline,pnr:t.bookingCode};this.isLoading=!0,this._ticketLowFareService.canMonitorLowFare(o).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe({next:i=>{var n,r;if("OK"===i.status&&i.data.canMonitor.enable)if(this._mobileDetectService.isMobile()){const l=this._bottomSheetService.open(O.g,{headerTitle:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",containerFullHeigh:!0,data:{bookingDetail:t,sourceEvent:"BOOKING_DETAIL"}});l.containerInstance._rightButtonClick.subscribe(s=>l.dismiss())}else{const l=this._modal.open(O.g,{bookingDetail:t,sourceEvent:"BOOKING_DETAIL"});l.afterClosed$.subscribe({next:s=>{s.data||l.close(!1)}})}else if("OK"!==i.status||i.data.canMonitor.enable){const l=null===(r=null===(n=i.objectError)||void 0===n?void 0:n.errorDescription)||void 0===r?void 0:r.vi;if(this._mobileDetectService.isMobile()){const s=this._bottomSheetService.open(f.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:l,okText:"Canh v\xe9 kh\xe1c",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});s.containerInstance._rightButtonClick.subscribe(()=>{s.dismiss()}),s.afterDismissed().subscribe(d=>{d&&this.onRegisterNewPnrOrder()})}else this._modal.open(q.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:l,status:"error",cancelText:"\u0110\xf3ng",okText:"Canh v\xe9 kh\xe1c",secondaryAction:!0}).afterClosed$.subscribe({next:d=>{d.data&&this.onRegisterNewPnrOrder()}})}else{let l="Xem danh s\xe1ch";l="TPS-TLF006"===i.data.canMonitor.reason.errorCode?"Qu\u1ea3n l\xfd canh v\xe9":"Canh v\xe9 kh\xe1c";const s=i.data.canMonitor.reason.desc;if(this._mobileDetectService.isMobile()){const d=this._bottomSheetService.open(f.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:s,okText:l,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});d.containerInstance._rightButtonClick.subscribe(()=>{d.dismiss()}),d.afterDismissed().subscribe(p=>{p?"TPS-TLF006"===i.data.canMonitor.reason.errorCode?this._route.navigate(["admin/manage-pnr-orders"]):this.onRegisterNewPnrOrder():d.dismiss()})}else this._modal.open(q.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:s,status:"error",cancelText:"\u0110\xf3ng",okText:l,secondaryAction:!0}).afterClosed$.subscribe({next:p=>{p.data&&("TPS-TLF006"===i.data.canMonitor.reason.errorCode?this._route.navigate(["admin/manage-pnr-orders"]):this.onRegisterNewPnrOrder())}})}},error:()=>{const i="Canh v\xe9 kh\xe1c";if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(f.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${t.bookingCode}</strong> kh\xf4ng h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`,okText:i,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(r=>{r&&this.onRegisterNewPnrOrder()})}else this._modal.open(q.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${t.bookingCode}</strong> kh\xf4ng h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`,status:"error",cancelText:"\u0110\xf3ng",okText:i,secondaryAction:!0}).afterClosed$.subscribe({next:r=>{r.data&&this.onRegisterNewPnrOrder()}})}})}onRegisterNewPnrOrder(){if(this._eventLogService.captureOpenFormDownFare({hasPNR:0,source:1}),this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(O.g,{headerTitle:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",containerFullHeigh:!0,data:{isSuggest:!0,sourceEvent:"SUGGEST"}});t.containerInstance._rightButtonClick.subscribe(o=>t.dismiss())}else this._modal.open(O.g,{isSuggest:!0,sourceEvent:"SUGGEST"})}gotoBookingDetail(t,o){this._route.navigate([`admin/booking-detail/${t}/${o}`])}onOrderDetail(t){this._route.navigate([`admin/pnr-order-detail/${t}`])}onSendEmail(t){if(this._mobileDetectService.isMobile()){const o=this._bottomSheetService.open(F.B,{headerTitle:"Th\xf4ng tin m\u1eb7t v\xe9",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!1,data:{emailInfo:{bookingCode:t.bookingCode,airline:t.airline,email:this.bookingContact.email}}});o.containerInstance._leftButtonClick.subscribe(i=>o.dismiss())}else this._modal.open(F.B,{emailInfo:{bookingCode:t.bookingCode,airline:t.airline,email:this.bookingContact.email}})}hanldeTimeoutIssue(){this._mobileDetectService.isMobile()?(this.refTimoutBts=this._bottomSheetService.open(f.NK,{headerTitle:"",leftButtonIcon:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",containerFullHeigh:!1,data:{title:"\u0110ang x\u1eed l\xfd xu\u1ea5t v\xe9",body:"Qu\xfd \u0111\u1ea1i l\xfd vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t ho\u1eb7c ch\u1ee7 \u0111\u1ed9ng theo d\xf5i tr\u1ea1ng th\xe1i v\xe9 \u1edf m\u1ee5c Qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7",cancelText:"\u0110\xf3ng",okText:"M\u1edf qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7"}}),this.refTimoutBts.containerInstance._leftButtonClick.subscribe(t=>this.refTimoutBts.dismiss()),this.refTimoutBts.afterDismissed().subscribe({next:t=>{t&&this._route.navigate(["admin/manage-booking"])}})):(this.refTimoutModal=this._modal.open(f.NK,{title:"\u0110ang x\u1eed l\xfd xu\u1ea5t v\xe9",body:"Qu\xfd \u0111\u1ea1i l\xfd vui l\xf2ng \u0111\u1ee3i trong gi\xe2y l\xe1t ho\u1eb7c ch\u1ee7 \u0111\u1ed9ng theo d\xf5i tr\u1ea1ng th\xe1i v\xe9 \u1edf m\u1ee5c Qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7",cancelText:"\u0110\xf3ng",okText:"M\u1edf qu\u1ea3n l\xfd \u0111\u1eb7t ch\u1ed7"}),this.refTimoutModal.afterClosed$.subscribe({next:t=>{t.data&&this._route.navigate(["admin/manage-booking"])}}))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(J.gz),e.Y36(ee.P),e.Y36(_.KNP),e.Y36(te.G),e.Y36(oe.oE),e.Y36(ie._),e.Y36(ne.fB),e.Y36(K.BX),e.Y36(ae.TU),e.Y36(T.$A),e.Y36(L.a2),e.Y36(re.L),e.Y36(se.s),e.Y36(J.F0),e.Y36(le.x),e.Y36(ce.$))},a.\u0275cmp=e.Xpm({type:a,selectors:[["booking-detail-page"]],standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[1,"w-full","h-full"],["class","w-full h-full flex gap-x-4 justify-center p-4 md:p-0",4,"ngIf"],["class","w-full h-full p-[30px]",4,"ngIf"],["class","flex justify-center p-6",4,"ngIf"],[1,"w-full","h-full","flex","gap-x-4","justify-center","p-4","md:p-0"],[1,"w-[764px]","h-full","flex","flex-col","gap-2","md:hidden"],["class","mb-2",4,"ngIf"],[1,""],[1,"flex","gap-x-[20px]","mb-4"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"flex","flex-col","gap-y-2"],[3,"isShowMore","bookingDetail","isBooked","actionChange",4,"ngFor","ngForOf"],["class","bg-white rounded shadow-cf-md p-6",4,"ngIf"],[4,"ngIf"],[1,"mt-12","w-[340px]","h-fit","flex","flex-col","gap-y-4","md:hidden"],[3,"listBookingText","modeBookingText","bookingContact","listBookingTextExplain","actionShare","modeChange"],[3,"listBookingCode"],[1,"md:flex","hidden","flex-col","w-full"],[1,"py-2","px-4","md:flex","hidden","whitespace-nowrap","overflow-x-scroll","bg-neutral-white","sticky","top-0","z-[1]","shadow-cf-sm"],[1,"px-4","py-1.5","rounded-full","text-espressive-md","text-neutral-gray-4","border","border-transparent",3,"click"],["bookingDetailTab",""],["paxInfoTab",""],["totalPriceTab",""],["ticketPriceTab",""],["ticketNumberTab",""],["remarkTab",""],["lowfareTab",""],["historyTab",""],["class","hidden md:block pt-4 px-4",3,"actionChange",4,"ngIf"],["class","p-4 gap-y-3 md:flex md:flex-col hidden w-full",4,"ngIf"],["class","bg-neutral-white pt-3 pr-4 pb-3 pl-4 flex-row gap-0 items-end justify-end w-full fixed bottom-0 hidden md:flex",3,"z-1000","click",4,"ngIf"],["class","md:hidden",3,"actionChange",4,"ngIf"],[1,"mb-2"],[3,"passengerInfos"],[3,"isShowMore","bookingDetail","isBooked","actionChange"],[1,"bg-white","rounded","shadow-cf-md","p-6"],[1,"mb-4","flex","items-center","gap-x-3"],[1,"text-heading-sm","text-neutral-black"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[4,"ngFor","ngForOf"],[1,"text-body-md","text-neutral-black","py-3"],[1,"w-[48px]","h-[24px]","object-contain",3,"src"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],["class","text-left text-espressive-sm text-neutral-gray-4 py-3",4,"ngIf"],["class","text-body-md text-neutral-black py-3",4,"ngIf"],[1,"text-espressive-sm","text-secondary-3-4","cursor-pointer",3,"click"],[1,"flex","gap-x-[20px]","my-4"],[1,"bg-white","rounded","shadow-cf-md"],[3,"priceDetail"],[1,"p-6","flex","flex-col","items-end","gap-[10px]"],[1,"flex","items-center","gap-4"],[1,"text-espressive-md","text-neutral-black"],[1,"min-w-[140px]","text-end","text-heading-lg","text-secondary-3-4"],[1,"px-6","pt-6","pb-6","bg-white","rounded","shadow-cf-md"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","pb-3"],[1,"text-body-md","text-neutral-black","pt-4"],[1,"pt-4"],[1,"text-express-md","text-secondary-3-4","hover:underline","cursor-default","whitespace-nowrap",3,"click"],[1,"text-express-sm","rounded","py-1","px-2"],[1,"hidden","md:block","pt-4","px-4",3,"actionChange"],[1,"p-4","gap-y-3","md:flex","md:flex-col","hidden","w-full"],[3,"bookingDetail","onDetailClick","actionChange",4,"ngFor","ngForOf"],["class"," w-full",4,"ngIf"],[3,"bookingDetail","onDetailClick","actionChange"],[1,"w-full"],[3,"title","active","contentClass","panelClass"],["titleTemplate",""],["class","flex flex-col mt-3 rounded-lg bg-neutral-white p-3 gap-y-2",4,"ngFor","ngForOf"],[1,"text-espressive-sm","text-neutral-black"],[1,"flex","flex-col","mt-3","rounded-lg","bg-neutral-white","p-3","gap-y-2"],[1,"flex","items-center","gap-x-5"],[1,"text-body-sm","text-neutral-gray-4","w-[104px]"],[1,"text-espressive-md","text-neutral-gray-6"],[1,"w-full","flex","justify-center","items-center","px-[15px]","py-[9px]","cursor-pointer","bg-secondary-3-1","rounded","text-heading-xs","text-secondary-3-4","mt-4",3,"click"],["class","flex flex-col rounded-lg bg-neutral-white p-3 gap-y-2",4,"ngFor","ngForOf"],[1,"flex","flex-col","rounded-lg","bg-neutral-white","p-3","gap-y-2"],[1,"bg-neutral-white","pt-3","pr-4","pb-3","pl-4","flex-row","gap-0","items-end","justify-end","w-full","fixed","bottom-0","hidden","md:flex",3,"click"],[1,"flex","flex-row","gap-1","items-center","justify-start","shrink-0","relative"],[1,"text-neutral-gray-4","text-left","relative","text-espressive-xs"],[1,"text-secondary-3-4","text-center","relative","text-heading-sm"],["icon","chevron_up","size","small"],["totalPriceBottomSheet",""],[1,"flex","flex-col","gap-4","items-start","justify-start","w-full","relative","p-4","pb-12"],[1,"flex","flex-row","gap-6","items-center","justify-start","self-stretch","shrink-0","relative"],[1,"flex","flex-row","gap-3","items-center","justify-start","flex-1","relative"],[1,"flex","flex-col","gap-1","items-start","justify-start","shrink-0","relative"],[1,"text-neutral-gray-4","text-left","relative","text-body-sm"],[1,"flex","flex-col","gap-1","items-end","justify-center","shrink-0","relative"],[1,"text-neutral-gray-4","text-right","relative","text-body-sm"],[1,"bg-neutral-white","rounded-lg","border-solid","p-4","flex","flex-col","gap-2","items-end","justify-start","shrink-0","w-full","relative","overflow-hidden"],[1,"flex","flex-row","gap-1.5","items-center","justify-start","shrink-0","relative",3,"click"],["size","small","icon","copy"],[1,"text-neutral-gray-6","text-center","relative","flex","items-center","justify-center","text-body-md"],[1,"text-body-sm","w-full",3,"bookingText"],["class","flex flex-col mt-3 rounded-lg bg-neutral-white p-3 gap-y-2",4,"ngIf"],[1,"md:hidden",3,"actionChange"],[1,"w-full","h-full","p-[30px]"],[1,"py-[120px]","shadow-cf-info-card","bg-neutral-white","rounded-lg","flex","flex-col","items-center","gap-y-8"],["src","assets/images/error.svg","alt",""],[1,"text-center","flex","flex-col","gap-y-2"],[1,"text-heading-lg"],[1,"text-body-md-short"],[1,"flex","gap-x-[30px]"],["cf-button","","size","medium",3,"click"],["cfHeadIcon","","icon","refresh","size","small",1,"mr-2"],[1,"flex","justify-center","p-6"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ve,54,71,"div",1),e.YNc(2,Ge,14,1,"div",2),e.YNc(3,ze,2,0,"div",3),e._UZ(4,"cf-toast"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!o.isLoading&&o.isSuccess),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isSuccess),e.xp6(1),e.Q6J("ngIf",o.isLoading))},dependencies:[Z.Js,Z.AT,Z.Cg,_.AxE,_.Sm8,k.ez,k.sg,k.O5,k.JJ,G.AS,K.hj,f.OR,Q.j$,I.N8,I.Xq,f.bY,V.N,L.DW,Z.CY,R.B,R.K,f.gx,W],encapsulation:2}),a})()}}]);