"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[9285],{89285:(N,m,a)=>{a.r(m),a.d(m,{TicketNumberDetailPageComponent:()=>U});var s=a(36895),l=a(24006),p=a(37094),f=a(83700),d=a(72506),r=a(44143),k=a(48042),h=a(28746),e=a(94650),b=a(11526),_=a(82761);function C(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onMobileOpenBookingCode())}),e._UZ(2,"cf-icon",20),e._uU(3," M\u1edf booking "),e.qZA()()}}function T(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"cf-input-group",23),e._UZ(3,"cf-icon",5),e.TgZ(4,"input",24),e.NdJ("ngModelChange",function(c){e.CHM(t);const u=e.oxw();return e.KtG(u.ticketNumber=c)}),e.qZA()()(),e.TgZ(5,"div")(6,"button",25),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onMobileSearch())}),e._UZ(7,"cf-icon",26),e.TgZ(8,"div"),e._uU(9,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.ticketNumber)}}function D(n,o){1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31),e._UZ(5,"img",32),e.qZA(),e.TgZ(6,"div",33),e._uU(7," Nh\u1eadp s\u1ed1 v\xe9 "),e.qZA(),e.TgZ(8,"div",34),e._uU(9," Vui l\xf2ng nh\u1eadp s\u1ed1 v\xe9 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",35),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function E(n,o){1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31),e._UZ(5,"img",36),e.qZA(),e.TgZ(6,"div",33),e._uU(7," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(8,"div",37)(9,"div"),e._uU(10,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin s\u1ed1 v\xe9"),e.qZA()()()()()())}function x(n,o){1&n&&(e.TgZ(0,"div",38),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton")(3,"ticket-item-skeleton")(4,"ticket-item-skeleton"),e.qZA())}function v(n,o){if(1&n&&(e.ynx(0),e._uU(1),e._UZ(2,"br"),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.qoO([" ",t.number," ",t.airline," ",t.flightNumber," ",t.classCode," ",t.date," ",t.brdoff," ",t.time," ",t.status," ",t.fareBasis," ",t.statusCode," ",t.baggageAllowance," "])}}function A(n,o){if(1&n&&(e.TgZ(0,"div",39)(1,"div",40),e._uU(2," VIRTUAL COUPON RECORD "),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e._uU(6),e._UZ(7,"br"),e._uU(8," CPN A/L FLT CLS DATE BRDOFF TIME ST F/B STAT BAGS"),e._UZ(9,"br"),e.YNc(10,v,3,11,"ng-container",41),e._UZ(11,"br"),e._uU(12),e._UZ(13,"br"),e._uU(14),e._UZ(15,"br")(16,"br"),e._uU(17),e._UZ(18,"br")(19,"br"),e._uU(20," FCMI-0 "),e._UZ(21,"br"),e._uU(22," FORM OF PAYMENT "),e._UZ(23,"br"),e._uU(24),e._UZ(25,"br"),e._uU(26),e._UZ(27,"br"),e._uU(28," ENDORSEMENTS/RESTRICTIONS- "),e._UZ(29,"br"),e._uU(30),e._UZ(31,"br"),e._uU(32," IT- "),e._UZ(33,"br"),e._uU(34," REMARKS- "),e._UZ(35,"br")(36,"br"),e._uU(37," ENTER VCR*CALL TO DISPLAY COUPON DETAILS "),e._UZ(38,"br"),e._uU(39," ENTER VCR*FC TO DISPLAY FARE CALC WITH TAX SUMMARY "),e._UZ(40,"br"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.AsE(" ",t.ticketDetail.ticketNumber," NAME-",t.ticketDetail.passengerName," "),e.xp6(2),e.HOy(" TTL NBR OF CPNS- ",t.ticketDetail.ticketInfo.numCoupons," DATE OF ISSUE-",t.ticketDetail.ticketInfo.issueDate," PNR-",t.ticketDetail.ticketInfo.bookingCode," ",t.ticketDetail.ticketInfo.createDate," "),e.xp6(4),e.Q6J("ngForOf",t.ticketDetail.segments),e.xp6(2),e.AsE(" FARE ",t.ticketDetail.pricingInfo.baseFare," ",t.ticketDetail.pricingInfo.taxes," "),e.xp6(2),e.hij(" TOTAL ",t.ticketDetail.pricingInfo.totalFare," "),e.xp6(3),e.hij(" FARE CALC ",t.ticketDetail.fareCalc," "),e.xp6(7),e.AsE(" FOP-AGENCY CREDIT ",t.ticketDetail.paymentCardNumber," APPROVAL CODE-",t.ticketDetail.authorizationCode," "),e.xp6(2),e.lnq(" DATE OF ISSUE-",t.ticketDetail.ticketData.issueDate," ISSUED AT-",t.ticketDetail.ticketData.printStation," ",t.ticketDetail.ticketData.issuingAgent||""," "),e.xp6(4),e.hij(" ",t.ticketDetail.ticketData.endorsements," ")}}let U=(()=>{class n{constructor(t,i,c){this._manageBookingService=t,this._bottomSheetService=i,this._router=c,this.airline="VN",this.isLoading=!1,this.state="SEARCH"}getTicketDetail(){this.state="LOADING",this._manageBookingService.getTicketDetail(this.ticketNumber).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe({next:t=>{t.success?(this.state="SUCCESS",this.ticketDetail=this.proccessTicketDetail(t.data)):this.state="EMPTY"},error:()=>{this.state="EMPTY"}})}proccessTicketDetail(t){return{ticketNumber:"",passengerName:t.ticketInfo.passengerName,ticketInfo:{numCoupons:t.ticketInfo.numCoupons,issueDate:t.ticketInfo.issueDate,createDate:t.ticketInfo.createDate,bookingCode:t.ticketInfo.prn},segments:t.segment.map(i=>({number:i.number,airline:i.marketingAirline,flightNumber:i.flightNumber,classCode:i.bookingClassCode,date:i.departureDate,brdoff:i.originLocation+i.destinationLocation,time:i.departureTime,status:i.segmentStatus,fareBasis:i.fareBasis,statusCode:i.ticketStatus,baggageAllowance:i.baggageAllowance})),pricingInfo:{baseFare:t.pricingInfo.baseFare.currencyCode.concat(" ",t.pricingInfo.baseFare.amount),taxes:t.pricingInfo.taxes.map(i=>i.amount.concat(i.taxCode)).join(" "),totalFare:t.pricingInfo.totalFare.currencyCode.concat(" ",t.pricingInfo.totalFare.amount)},fareCalc:t.pricingInfo.fareCalculation,paymentInfo:{paymentCardNumber:t.paymentInfo.paymentCardNumber,authorizationCode:t.paymentInfo.authorizationCode},ticketData:{issueDate:t.ticketData.issueDate,printStation:t.ticketData.printStation,issuingAgent:t.ticketData.issuingAgent,remarks:t.ticketData.remarks,endorsements:t.ticketData.endorsements.join("")}}}_getCurrentUrl(){return`${window.location.origin}/admin/booking-detail/${this.airline}/${this.ticketDetail.ticketInfo.bookingCode}`}onOpenBookingCode(){console.log(this.ticketDetail),window.open(this._getCurrentUrl())}onMobileOpenBookingCode(){this._router.navigate([`/admin/booking-detail/${this.airline}/${this.ticketDetail.ticketInfo.bookingCode}`])}onMobileSearch(){this._bottomSheetService.dismiss(),this.getTicketDetail()}openSearchBts(t){const i=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",rightButtonIcon:"",leftButtonIcon:"close",containerFullHeigh:!0,leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1});i.containerInstance._leftButtonClick.subscribe(()=>i.dismiss())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.fB),e.Y36(p.a2),e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ticket-number-detail-page"]],standalone:!0,features:[e.jDz],decls:25,vars:8,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","items-stretch","gap-x-4"],[1,"!w-full",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm t\xecm ki\u1ebfm theo s\u1ed1 v\xe9",3,"ngModel","ngModelChange","keydown.enter"],["cf-button","","size","medium","type","secondary",1,"w-[168px]","justify-center",3,"disabled","click"],["icon","search","size","small",1,"pr-3"],[1,"hidden","md:flex","flex-col","py-3","px-4","gap-y-3","pr-0","bg-neutral-white"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"hidden","!w-full","md:pr-4","md:block"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"focus"],["class","md:block hidden fixed bottom-0 w-screen p-4 bg-neutral-white shadow-lg",4,"ngIf"],["searchBts",""],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],["class","p-6",4,"ngIf"],["class","px-6 py-4 md:p-4 md:pb-[90px]",4,"ngIf"],[1,"md:block","hidden","fixed","bottom-0","w-screen","p-4","bg-neutral-white","shadow-lg"],["cf-button","",1,"w-full","justify-center",3,"click"],["icon","external_link","size","small"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"hidden","!w-full","md:block"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm",3,"ngModel","ngModelChange"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[1,"text-body-md-short","text-neutral-gray-5","text-center"],[1,"p-6"],[1,"px-6","py-4","md:p-4","md:pb-[90px]"],[1,"p-6","bg-neutral-white","rounded-lg","text-body-md"],[4,"ngFor","ngForOf"]],template:function(t,i){if(1&t){const c=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"M\u1edf s\u1ed1 v\xe9"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-input-group",4),e._UZ(6,"cf-icon",5),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(g){return i.ticketNumber=g})("keydown.enter",function(){return i.getTicketDetail()}),e.qZA()(),e.TgZ(8,"button",7),e.NdJ("click",function(){return i.getTicketDetail()}),e._UZ(9,"cf-icon",8),e._uU(10," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(11,"div",9)(12,"div",10),e._uU(13,"M\u1edf s\u1ed1 v\xe9"),e.qZA(),e.TgZ(14,"cf-input-group",11),e._UZ(15,"cf-icon",5),e.TgZ(16,"input",12),e.NdJ("focus",function(){e.CHM(c);const g=e.MAs(19);return e.KtG(i.openSearchBts(g))}),e.qZA()()(),e.YNc(17,C,4,0,"div",13),e.YNc(18,T,10,1,"ng-template",null,14,e.W1O),e.TgZ(20,"div"),e.YNc(21,D,13,0,"div",15),e.YNc(22,E,13,0,"div",15),e.YNc(23,x,5,0,"div",16),e.YNc(24,A,41,17,"div",17),e.qZA()()}2&t&&(e.xp6(5),e.Q6J("status","default"),e.xp6(2),e.Q6J("ngModel",i.ticketNumber),e.xp6(1),e.Q6J("disabled",!i.ticketNumber||"LOADING"===i.state),e.xp6(9),e.Q6J("ngIf","SUCCESS"===i.state),e.xp6(4),e.Q6J("ngIf","SEARCH"===i.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===i.state),e.xp6(1),e.Q6J("ngIf","LOADING"===i.state),e.xp6(1),e.Q6J("ngIf","SUCCESS"===i.state))},dependencies:[s.ez,s.sg,s.O5,l.u5,l.Fj,l.JJ,l.On,r.j$,r.ND,r.BN,d.AxE,d.Sm8,f.N8,f.Xq,k.IA,l.UX,p.DW],encapsulation:2}),n})()}}]);