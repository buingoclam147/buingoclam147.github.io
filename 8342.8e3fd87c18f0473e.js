"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[8342],{18342:(W,M,d)=>{d.r(M),d.d(M,{HuntTicketAdvancedAddComponent:()=>jn,HuntTicketAdvancedListComponent:()=>Gn});var f=d(36895),_=d(24006),A=d(37094),h=d(83700),l=d(72506),F=d(67460),e=d(94650),U=d(76978),P=d(28490);let Q=(()=>{class n{transform(t,i,...o){return i(t,...o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"mapper",type:n,pure:!0,standalone:!0}),n})();var ee=d(52013),b=d(15439),te=d(28746),I=d(97579),N=d(80529),Y=d(88001),ne=d(50494),R=d(54004),p=d(97582),u=d(87067),D=d(43429);let ie=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"status",void 0),(0,p.gn)([(0,D.D)(()=>oe),(0,u.C)()],n.prototype,"data",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"objectError",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"success",void 0),n})(),oe=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"orderId",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"code",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"ownerInfo",void 0),(0,p.gn)([(0,D.D)(()=>le),(0,u.C)()],n.prototype,"userActionInfo",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"state",void 0),(0,p.gn)([(0,D.D)(()=>se),(0,u.C)()],n.prototype,"ticketInfo",void 0),(0,p.gn)([(0,D.D)(()=>ae),(0,u.C)()],n.prototype,"orderInfo",void 0),(0,p.gn)([(0,D.D)(()=>ce),(0,u.C)()],n.prototype,"fareInfo",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"canUpdate",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"monitorType",void 0),(0,p.gn)([(0,D.D)(()=>re),(0,u.C)()],n.prototype,"availableSlotInfo",void 0),n})(),re=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"free",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"type",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"amountPerPax",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"percent",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"currency",void 0),n})(),ce=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"originalPnr",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"detectedPnr",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"originalFare",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"detectedFare",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"originalFareClass",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"detectedFareClass",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"higherFare",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"lastTimeUpdate",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"airline",void 0),n})(),ae=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"timeCreate",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"timeExpire",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"timeUpdate",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"timeFinished",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"fareMonitors",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"priceMonitors",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"notifyBeforeExpired",void 0),n})(),se=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"airline",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"flightType",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"journeys",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"passengers",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"originalPrice",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"totalFare",void 0),n})(),le=(()=>{class n{}return(0,p.gn)([(0,u.C)()],n.prototype,"id",void 0),(0,p.gn)([(0,u.C)()],n.prototype,"name",void 0),n})();const de={headers:new N.WM({"Content-Type":"application/json"})};let pe=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}registerTickedAdvanced(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/register",JSON.stringify(t),de).pipe((0,R.U)(i=>(0,ne.yE)(ie,i,{excludeExtraneousValues:!0})))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.eN),e.LFG(Y.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=d(82761);function ue(n,r){if(1&n&&(e.TgZ(0,"span",51),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function _e(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function me(n,r){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"img",56),e.TgZ(3,"div",31),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function fe(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,me,7,8,"div",53),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function ge(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,fe,2,1,"div",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rawData.specifyPriceList)}}function he(n,r){1&n&&(e.TgZ(0,"div",31)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function xe(n,r){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"img",56),e.TgZ(3,"div",31),e._uU(4),e.TgZ(5,"span",59),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function ve(n,r){if(1&n&&(e.TgZ(0,"div",64),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Ce(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ve,2,1,"div",63),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Te(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ce,2,1,"ng-container",52),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const Ae=function(n){return{"w-full":n}};function ye(n,r){if(1&n&&(e.TgZ(0,"div",61)(1,"div",62),e._uU(2),e.qZA(),e.YNc(3,Te,2,1,"ng-container",38),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,Ae,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Fe(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ye,4,5,"div",60),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function be(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Fe,2,1,"ng-container",52),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ee(n,r){if(1&n&&(e.ynx(0),e.YNc(1,be,2,1,"ng-container",52),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ze(n,r){if(1&n&&(e.ynx(0),e.YNc(1,xe,7,3,"div",53),e.TgZ(2,"div",58),e.YNc(3,Ee,2,1,"ng-container",38),e.qZA(),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Ie(n,r){if(1&n&&(e.TgZ(0,"div",57),e.YNc(1,Ze,4,2,"ng-container",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function Se(n,r){1&n&&e._UZ(0,"cf-spinner")}let L=(()=>{class n{constructor(t,i,o,c,a,s,m,v){this.cfIconRegister=t,this.ref=i,this.cfBottomSheetRef=o,this.huntTicketAdvancedSvc=c,this._route=a,this._modal=s,this.cdr=m,this.bottomSheetData=v,this.dataFlight=(0,e.f3M)(P._).getAllOption(),this.isLoading=!1,this.viewDepartureTime=g=>g.filter(x=>x.isActive),this.viewFly=g=>{const x=this.dataFlight.find(y=>y.Code===g);return`${null==x?void 0:x.CityName} (${g})`},t.registerIcons([l.UNF]),this.ref&&(this.rawData=this.ref.data.data,this.dataFormSubmit=this.progressDateAfterSubmit(this.ref.data.data),this.selectedFaresTree=this.ref.data.selectedFaresTree),this.cfBottomSheetRef&&(this.rawData=this.bottomSheetData.rawData,this.dataFormSubmit=this.progressDateAfterSubmit(this.bottomSheetData.rawData),this.selectedFaresTree=this.bottomSheetData.selectedFaresTree)}close(t){this.ref&&this.ref.close(t),this.bottomSheetData&&this.cfBottomSheetRef.dismiss(t)}submit(){this.isLoading=!0,this.huntTicketAdvancedSvc.registerTickedAdvanced(this.dataFormSubmit).pipe((0,te.x)(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe(t=>{if("OK"===t.status){let i="",o="";o="well_done",i=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t.data.code}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`,this._modal.open(ee.V,{title:"T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",content:i,status:o,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:a=>{a.data&&(this.close(!0),this._route.navigate(["admin/hunt-ticket-advanced-list"]))}})}})}progressDateAfterSubmit(t){const{type:i,endPoint:o,startPoint:c,distributionChannel:a,isTimeRange:s,departureTime:m,toDate:v,fromDate:g,specifyPriceList:x,specifyFareClassList:y}=t,E=null==m?void 0:m.filter(C=>C.isActive),Z=E[E.length-1].end.split(":");return{conditions:{specifyPriceList:"PRICE"===i?x.filter(C=>C.price).map(({id:C,price:T})=>({airline:C,targetPrice:T})):[],specifyFareClassList:"FARE"===i?y.map(({airline:C,fareClass:T})=>({airline:C.toUpperCase(),fareClass:T.join(";")})):[],type:i},advanceSetting:{timeExecute:b(this.setTimeOnDate(g,+Z[0],+Z[1])).format("YYYY-MM-DDTHH:mm:ss"),notifBeforExpire:!1},journeys:{endPoint:o,startPoint:c,rangeDateTime:{fromDate:Math.floor(this.setTimeOnDate(g,0,0).getTime()/1e3),toDate:Math.floor(this.setTimeOnDate(v,0,0).getTime()/1e3)},allRangeTime:s,rangeTime:E.map(({start:C,end:T})=>({toDate:T,fromDate:C}))},distributionChannel:a}}setTimeOnDate(t,i,o,c){return t.setHours(i),t.setMinutes(o),t.setSeconds(c?59:0),t.setMilliseconds(c?99:0),t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP),e.Y36(I.gb,8),e.Y36(A.Zu,8),e.Y36(pe),e.Y36(S.F0),e.Y36(I.oE),e.Y36(e.sBO),e.Y36(A.Rr,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-hunt-ticket-advanced-add-confirm-modal"]],standalone:!0,features:[e.jDz],decls:109,vars:29,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","pt-6","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],["icon","plane","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"flex","flex-col","gap-3","bg-[#FAFAFA]","px-3","py-2"],[1,"flex","justify-center","gap-3","md:flex-col"],[1,"flex","items-center","gap-x-[20px]","md:flex-col","md:gap-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],[1,"items-center","w-[100px]","md:w-[75px]"],[1,"text-center","text-express-sm","text-neutral-gray-4"],[1,"flex","items-center"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]","cf-icon-small"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center","md:flex","md:flex-1","md:justify-center"],[1,"flex","justify-center","gap-x-1"],[1,"flex","items-center","gap-x-2","mb-2","justify-start"],["icon","calendar","size","small",1,"cf-icon-small"],[1,"text-body-md","text-neutral-black"],[1,"text-body-md","text-neutral-black","font-semibold"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"text-body-md"],[1,"w-[60%]"],[1,"text-express-md"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngFor","ngForOf"],[1,"w-[60%]","text-express-md"],[4,"ngIf"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],["icon","money","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-right",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[4,"ngFor","ngForOf"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close(!1)}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"cf-icon",7),e.TgZ(9,"span",8),e._uU(10,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div")(15,"div",12)(16,"div",13)(17,"span"),e._uU(18),e.ALo(19,"mapper"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15),e._uU(22,"Bay th\u1eb3ng"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"div",17)(25,"div",18)(26,"cf-icon",19),e.qZA()()()(),e.TgZ(27,"div")(28,"div",20)(29,"span"),e._uU(30),e.ALo(31,"mapper"),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",22),e._UZ(34,"cf-icon",23),e.TgZ(35,"div",24),e._uU(36,"T\u1eeb "),e.TgZ(37,"span",25),e._uU(38),e.ALo(39,"date"),e.qZA()()(),e.TgZ(40,"div",22)(41,"div",24),e._uU(42,"\u0110\u1ebfn "),e.TgZ(43,"span",25),e._uU(44),e.ALo(45,"date"),e.qZA()()()()(),e._UZ(46,"div",26),e.TgZ(47,"div",27)(48,"div",28)(49,"div",29)(50,"span"),e._uU(51,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(52,"div",30)(53,"span",31),e._uU(54),e.ALo(55,"date"),e.qZA()()(),e._UZ(56,"div",26),e.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"span"),e._uU(61,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(62,"div",35),e.YNc(63,ue,2,1,"span",36),e.ALo(64,"mapper"),e.qZA()(),e._UZ(65,"div",26),e.TgZ(66,"div",32)(67,"div",33)(68,"div",34)(69,"span"),e._uU(70,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(71,"div",37),e.YNc(72,_e,2,0,"span",38),e.YNc(73,ge,2,1,"div",38),e.qZA()(),e._UZ(74,"div",26),e.TgZ(75,"div",32)(76,"div",33)(77,"div",29)(78,"span"),e._uU(79,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(80,"div",30),e.YNc(81,he,3,0,"div",39),e.YNc(82,Ie,2,1,"div",40),e.qZA()()()(),e.TgZ(83,"div",5)(84,"div",41),e._UZ(85,"cf-icon",42),e.TgZ(86,"span",8),e._uU(87,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(88,"div",43),e._UZ(89,"cf-icon",44),e.TgZ(90,"div")(91,"span",31),e._uU(92,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(93," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(94,"div",43),e._UZ(95,"cf-icon",45),e.TgZ(96,"div",31),e._uU(97,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(98,"span",46),e._uU(99,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(100," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()(),e.TgZ(101,"div",47)(102,"button",48),e.NdJ("click",function(){return i.close(!1)}),e._uU(103," \u0110\xf3ng "),e.qZA(),e.TgZ(104,"button",49),e.NdJ("click",function(){return i.submit()}),e.TgZ(105,"span"),e._uU(106,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(107,"cf-icon",50),e.qZA()()(),e.YNc(108,Se,1,0,"cf-spinner",38)),2&t&&(e.xp6(18),e.hij("",e.xi3(19,11,i.rawData.startPoint,i.viewFly)," "),e.xp6(12),e.hij(" ",e.xi3(31,14,i.rawData.endPoint,i.viewFly)," "),e.xp6(8),e.Oqu(e.xi3(39,17,i.rawData.toDate,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(45,20,i.rawData.fromDate,"dd/MM/yyyy")),e.xp6(10),e.Oqu(e.xi3(55,23,i.dataFormSubmit.advanceSetting.timeExecute,"dd/MM/yyy HH:mm")),e.xp6(9),e.Q6J("ngForOf",e.xi3(64,26,i.rawData.departureTime,i.viewDepartureTime)),e.xp6(9),e.Q6J("ngIf","PRICE"!==i.rawData.type),e.xp6(1),e.Q6J("ngIf","PRICE"===i.rawData.type),e.xp6(8),e.Q6J("ngIf","FARE"!==i.rawData.type),e.xp6(1),e.Q6J("ngIf","FARE"===i.rawData.type),e.xp6(26),e.Q6J("ngIf",i.isLoading))},dependencies:[f.ez,f.mk,f.sg,f.O5,f.JJ,f.uU,l.AxE,l.Sm8,Q,h.N8,h.Xq,U.AS,A.DW,F.OR],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})();function ke(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1," ")}}function De(n,r){1&n&&(e.TgZ(0,"span"),e._UZ(1,"cf-icon",7),e.qZA())}function we(n,r){if(1&n&&e._UZ(0,"div",8),2&n){const t=e.oxw().index,i=e.oxw();e.Q6J("ngClass",t<i.stepCurIdx?"bg-secondary-7-4":"bg-neutral-gray-3")}}const Me=function(n,r,t){return{"text-neutral-white !bg-secondary-7-4":n,"text-neutral-gray-3 !bg-white":r,"border-secondary-7-4":t}};function Ne(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3),e.YNc(3,ke,2,1,"span",4),e.YNc(4,De,2,0,"span",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,we,1,1,"div",6),e.BQk()),2&n){const t=r.$implicit,i=r.index,o=r.last,c=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(5,Me,c.stepCurIdx===i,c.stepCurIdx!==i,i<=c.stepCurIdx)),e.xp6(1),e.Q6J("ngIf",i>=c.stepCurIdx),e.xp6(1),e.Q6J("ngIf",i<c.stepCurIdx),e.xp6(2),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",!o)}}let Je=(()=>{class n{set stepCur(t){this.stepCurIdx=this.steps.findIndex(i=>i.id===t)}constructor(t){this._cfRegister=t,this.stepChange=new e.vpe,t.registerIcons([l.NNX])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-step-ct"]],inputs:{steps:"steps",stepCur:"stepCur"},outputs:{stepChange:"stepChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"flex","items-center","w-[84%]","md:w-[70%]"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3",3,"ngClass"],[4,"ngIf"],[1,"line-clamp-2","absolute","min-w-[140px]","max-w-[170px]","top-[130%]","text-[#2C2C2C]","text-express-md","md:max-w-[80px]","text-center"],["class","flex-grow h-[1px] ",3,"ngClass",4,"ngIf"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"flex-grow","h-[1px]",3,"ngClass"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ne,8,9,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.steps))},dependencies:[f.ez,f.mk,f.sg,f.O5,l.AxE,l.Sm8],styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:center;min-height:68px;align-items:flex-start}"],changeDetection:0}),n})();var B=d(88516),Oe=d(99590),Ue=d(72853),w=d(44143),j=d(74713),G=d(73546),Qe=d(76331);const He=(n,r)=>{var t;const i=n.fareType.map(o=>o.fareClass.map(({code:c})=>c)).reduce((o,c)=>[...o,...c],[]);return!(null===(t=null==r?void 0:r.fareClass)||void 0===t||!t.length)&&i.some(o=>r.fareClass.includes(o))},Pe=(n,r)=>{var t;return!(null===(t=null==r?void 0:r.fareClass)||void 0===t||!t.length)&&n.fareClass.map(({code:i})=>i).some(i=>r.fareClass.includes(i))},Ye=n=>{var r;let t=0;return null===(r=n.cabin)||void 0===r||r.forEach(i=>{var o;null===(o=i.fareType)||void 0===o||o.forEach(c=>{t+=c.fareClass.length||0})}),t},Re=n=>["GDS","other","",null].includes(n)?"assets/icons/airline-default.svg":`assets/icons/${n}-icon.svg`,Le={VJ:{name:"Vietjet Air",logo:"assets/airline-logo/VJ.png",smallLogo:"assets/airline-logo/VJ_small.png"},VN:{name:"Vietnam Airlines",logo:"assets/airline-logo/VN.png",smallLogo:"assets/airline-logo/VN_small.png"},QH:{name:"Bamboo Airways",logo:"assets/airline-logo/QH.png",smallLogo:"assets/airline-logo/QH_small.png"}},je=n=>{var r;return(null===(r=Le[n])||void 0===r?void 0:r.name)||""};var Ge=d(27361),ze=d(34541),$e=d(50633),z=d(17489),$=d(77296),Ke=d(39646),K=d(27898),q=d(40899);function Ve(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.onExpandAirline(o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function Xe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.onExpandAirline(o))}),e._UZ(1,"cf-icon",19),e.qZA()}}function We(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw(3).$implicit,a=e.oxw();return e.KtG(a.onFareTypeExpand(c,o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function et(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw(3).$implicit,a=e.oxw();return e.KtG(a.onFareTypeExpand(c,o))}),e._UZ(1,"cf-icon",19),e.qZA()}}const tt=function(n){return{"bg-[#FCB40A] text-neutral-white":n}};function nt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw(6);return e.KtG(a.onToggleFareSelected(c))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,tt,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function it(n,r){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,nt,3,4,"ng-container",5),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ot(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,a))}),e.TgZ(3,"div",10)(4,"div",11)(5,"div",13),e._uU(6),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()(),e.YNc(9,We,2,0,"button",15),e.YNc(10,et,2,0,"button",15),e.qZA(),e.YNc(11,it,2,1,"div",22),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function rt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ot,12,7,"ng-container",5),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ct(n,r){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,rt,2,1,"ng-container",5),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function at(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,a))}),e.TgZ(3,"div",10)(4,"div",11),e._UZ(5,"img",12),e.TgZ(6,"div",13),e._uU(7),e.TgZ(8,"span",14),e._uU(9),e.qZA()()()()(),e.YNc(10,Ve,2,0,"button",15),e.YNc(11,Xe,2,0,"button",15),e.qZA(),e.YNc(12,ct,2,1,"div",16),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}let st=(()=>{class n{constructor(t,i,o,c,a,s,m,v){this.route=t,this._cfRegister=i,this._permissionService=o,this._modal=c,this._route=a,this._cd=s,this.data=m,this.cfBottomSheetRef=v,i.registerIcons([l.xgX,l.xbi,l.NYs,l.Hge,l.n78,l.fqi,l.esH,l.cnj,l.TM4]),v.containerInstance._rightButtonClick.subscribe(g=>{this.cfBottomSheetRef.dismiss(!1)}),this.fareOptions=m.fareOptions}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(i=>{i.isExpand=i.code.toUpperCase()===t.code.toUpperCase()&&!i.isExpand})}onFareTypeExpand(t,i){i.isExpand=!i.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(c=>{c.code!==i.code&&(c.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(i=>{i.isActive=t,i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(c=>{c.isActive=t,c.childItems.forEach(a=>{a.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,i){i.isActive=t,i.childItems.forEach(o=>{o.isActive=i.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,i){i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(c=>{c.isActive=t,c.childItems.forEach(a=>{a.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t){t.isActive=!t.isActive,this.standardizeFareOptionSelected()}close(){this.cfBottomSheetRef.dismiss()}submit(){this.cfBottomSheetRef.dismiss(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(i=>{let o=!1;i.childItems.forEach(c=>{c.childItems.forEach(a=>{a.isActive=a.childItems.map(s=>s.isActive).reduce((s,m)=>s||m,!1),t=t&&a.childItems.map(s=>s.isActive).reduce((s,m)=>s&&m,!0),a.totalSelectedFare=a.childItems.filter(s=>s.isActive).length,a.isActive&&(o=!0)})}),i.isActive=o,i.totalSelectedFare=i.childItems.reduce((c,a)=>c+a.childItems.map(s=>s.childItems.filter(m=>m.isActive).length).reduce((s,m)=>s+m),0)}),this.selectedAll=t,this._cd.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.gz),e.Y36(l.KNP),e.Y36(q.$A),e.Y36(I.oE),e.Y36(S.F0),e.Y36(e.sBO),e.Y36(A.Rr),e.Y36(A.Zu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fare-option-bottom-sheet"]],standalone:!0,features:[e.jDz],decls:14,vars:2,consts:[[1,"overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"px-3","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-4"],[1,"px-3","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"fixed","bottom-0","left-0","w-screen","bg-white","shadow-cf-large-top","p-3","flex","items-center","justify-end","gap-x-2","z-1000"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-3","items-center"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !outline-none !outline-transparent gap-x-2 items-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 pl-4",4,"ngIf"],["type","secondary",1,"flex","!outline-none","!outline-transparent","gap-x-2","items-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","pl-4"],[1,"w-full","flex","justify-between","py-2","px-3","items-center"],["class","flex flex-wrap gap-2 p-2 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-checkbox",3),e.NdJ("checkChange",function(c){return i.onSelectAllChange(c)}),e._uU(4,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,at,13,8,"ng-container",5),e.qZA()(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return i.close()}),e.TgZ(9,"span"),e._uU(10,"H\u1ee7y"),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return i.submit()}),e.TgZ(12,"span"),e._uU(13,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("checked",i.selectedAll),e.xp6(3),e.Q6J("ngForOf",i.fareOptions))},dependencies:[l.AxE,l.Sm8,f.ez,f.mk,f.sg,f.O5,w.j$,h.N8,h.Xq,A.DW,_.UX,K.u],encapsulation:2}),n})();function lt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.onExpandAirline(o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function dt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.onExpandAirline(o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}function pt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw(3).$implicit,a=e.oxw();return e.KtG(a.onFareTypeExpand(c,o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw(3).$implicit,a=e.oxw();return e.KtG(a.onFareTypeExpand(c,o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}const _t=function(n){return{"!bg-[#FFF8E7] border-[#FCB40A]":n}};function mt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"cf-checkbox",24),e.NdJ("checkChange",function(o){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,a))}),e._uU(3),e.TgZ(4,"span",16),e._uU(5),e.qZA()(),e.YNc(6,pt,3,0,"button",25),e.YNc(7,ut,3,0,"button",25),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(7,_t,t.isExpand)),e.xp6(1),e.Q6J("checked",t.isActive),e.xp6(1),e.hij("",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function ft(n,r){if(1&n&&(e.ynx(0),e.YNc(1,mt,8,9,"ng-container",7),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function gt(n,r){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,ft,2,1,"ng-container",7),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const ht=function(n){return{"bg-[#FCB40A] text-neutral-white":n}};function xt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.onToggleFareSelected(c,a))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,ht,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function vt(n,r){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,xt,3,4,"ng-container",7),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ct(n,r){if(1&n&&(e.ynx(0),e.YNc(1,vt,2,1,"div",27),e.BQk()),2&n){const t=r.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.isExpand&&i.isExpand)}}function Tt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ct,2,1,"ng-container",7),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function At(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"cf-checkbox",5),e.NdJ("checkChange",function(o){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,a))}),e.TgZ(3,"div",12)(4,"div",13),e._UZ(5,"img",14),e.TgZ(6,"div",15),e._uU(7),e.TgZ(8,"span",16),e._uU(9),e.qZA()()()()(),e.YNc(10,lt,3,0,"button",17),e.YNc(11,dt,3,0,"button",17),e.qZA(),e.YNc(12,gt,2,1,"div",18),e.YNc(13,Tt,2,1,"ng-container",7),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngForOf",t.childItems)}}let yt=(()=>{class n{constructor(t,i,o,c,a,s,m){this.route=t,this._cfRegister=i,this._permissionService=o,this._modal=c,this._route=a,this._cd=s,this._ref=m,i.registerIcons([l.xgX,l.xbi,l.NYs,l.Hge,l.n78,l.fqi,l.esH,l.cnj,l.TM4]),this.fareOptions=(0,z.cloneDeep)(m.data.data)}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(i=>{i.isExpand=i.code.toUpperCase()===t.code.toUpperCase()&&!i.isExpand})}onFareTypeExpand(t,i){i.isExpand=!i.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(c=>{c.code!==i.code&&(c.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(i=>{i.isActive=t,i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(c=>{c.isActive=t,c.childItems.forEach(a=>{a.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,i){i.isActive=t,i.childItems.forEach(o=>{o.isActive=i.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,i){i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(c=>{c.isActive=t,c.childItems.forEach(a=>{a.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t,i){t.isActive=!t.isActive,i.isActive=i.childItems.some(o=>o.isActive),this.standardizeFareOptionSelected()}close(){this._ref.close(this._ref.data.data)}submit(){this._ref.close(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(i=>{let o=!1;i.childItems.forEach(c=>{c.isActive=c.childItems.some(a=>a.isActive),c.childItems.forEach(a=>{a.isActive=a.childItems.map(s=>s.isActive).reduce((s,m)=>s||m,!1),t=t&&a.childItems.map(s=>s.isActive).reduce((s,m)=>s&&m,!0),a.totalSelectedFare=a.childItems.filter(s=>s.isActive).length,a.isActive&&(o=!0)})}),i.isActive=o,i.totalSelectedFare=i.childItems.reduce((c,a)=>c+a.childItems.map(s=>s.childItems.filter(m=>m.isActive).length).reduce((s,m)=>s+m),0)}),this.selectedAll=t,this._cd.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.gz),e.Y36(l.KNP),e.Y36(q.$A),e.Y36(I.oE),e.Y36(S.F0),e.Y36(e.sBO),e.Y36(I.gb))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fare-option-modal"]],standalone:!0,features:[e.jDz],decls:17,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 px-6",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","px-6"],[1,"w-[calc(32%-12px)]","py-2","px-2.5","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-between","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"ngClass"],["size","medium",1,"w-full",3,"checked","checkChange"],["class","flex w-full text-center !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0","type","secondary",3,"click",4,"ngIf"],["type","secondary",1,"flex","w-full","text-center","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0",3,"click"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"cf-checkbox",5),e.NdJ("checkChange",function(c){return i.onSelectAllChange(c)}),e._uU(7,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,At,14,9,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return i.close()}),e.TgZ(12,"span"),e._uU(13,"H\u1ee7y"),e.qZA()(),e.TgZ(14,"button",10),e.NdJ("click",function(){return i.submit()}),e.TgZ(15,"span"),e._uU(16,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("checked",i.selectedAll),e.xp6(3),e.Q6J("ngForOf",i.fareOptions))},dependencies:[l.AxE,l.Sm8,f.ez,f.mk,f.sg,f.O5,w.j$,h.N8,h.Xq,A.DW,_.UX,K.u],encapsulation:2}),n})();const Ft=function(n,r,t){return{"!bg-primary-2-4 !border-0":n,"opacity-[0.4]":r,"md:col-span-2":t}},bt=function(n){return{"!text-neutral-white opacity-[0.6]":n}},Et=function(n){return{"!text-neutral-white":n}};function Zt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onSelectedTime(c))}),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=r.last;e.xp6(1),e.Q6J("ngClass",e.kEZ(5,Ft,t.isActive,t.disable,i)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,bt,t.isActive)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Et,t.isActive)),e.xp6(1),e.hij(" ",t.start+" - "+t.end!="00:00 - 23:59"?t.start+" - "+t.end:"Gi\u1edd c\u1ee5 th\u1ec3","")}}function It(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",12)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA()(),e.TgZ(8,"cf-slider",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.customRangeItem.rangeValues=o)})("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.timeChange(o,c.customRangeItem))})("onSlideEnd",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.end())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.customRangeItem.startTimeStr),e.xp6(2),e.Oqu(t.customRangeItem.endTimeStr),e.xp6(1),e.Q6J("ngModel",t.customRangeItem.rangeValues)("min",0)("max",1439)("step",1)("range",!0)}}let St=(()=>{class n{constructor(t,i,o,c){this._cd=i,this.data=o,this.cfBottomSheetRef=c,this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}],this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},t.registerIcons([]),this.orgOptionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.optionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.orgOptionDepartureTime.forEach(a=>{"custom"===a.code&&(this.customRangeItem.rangeValues=[a.startTime,a.endTime],this.customRangeItem.startTimeStr=a.start,this.customRangeItem.endTimeStr=a.end)}),c.containerInstance._rightButtonClick.subscribe(a=>{this.cfBottomSheetRef.dismiss(!1)})}onSelectedTime(t){t.disable||(t.isActive=!t.isActive),"custom"===t.code&&!0===t.isActive?this.optionDepartureTime.forEach(i=>{"custom"!==i.code&&(i.isActive=!1)}):"custom"!==t.code&&!0===t.isActive&&(this.optionDepartureTime[4].isActive=!1)}timeChange(t,i){i.startTimeStr=this.minuteToString(t[0]),i.endTimeStr=this.minuteToString(t[1])}minuteToString(t){const i=Math.floor(t/60),o=t%60;let c=`${i}`,a=`${o}`;return i<10&&(c=`0${i}`),o<10&&(a=`0${o}`),`${c}:${a}`}end(){this.optionDepartureTime[4].start=this.customRangeItem.startTimeStr,this.optionDepartureTime[4].end=this.customRangeItem.endTimeStr,this.optionDepartureTime[4].startTime=this.customRangeItem.rangeValues[0],this.optionDepartureTime[4].endTime=this.customRangeItem.rangeValues[1]}submit(){this.cfBottomSheetRef.dismiss(this.optionDepartureTime)}reset(){this.optionDepartureTime.forEach(t=>{t.isActive=!1}),this._cd.detectChanges()}close(){this.cfBottomSheetRef.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP),e.Y36(e.sBO),e.Y36(A.Rr),e.Y36(A.Zu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["time-range-options-bottom-sheet"]],hostAttrs:[1,"!w-full"],standalone:!0,features:[e.jDz],decls:10,vars:2,consts:[[1,"flex","flex-wrap","justify-center","items-center","md:grid","md:grid-cols-2","gap-x-4","gap-y-4","px-4"],[4,"ngFor","ngForOf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4 mt-4",4,"ngIf"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-[40%]","md:!w-full","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1","py-2.5",3,"ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4","mt-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelChange","onSlideEnd"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Zt,6,13,"ng-container",1),e.qZA(),e.YNc(2,It,9,7,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return i.reset()}),e._uU(6," \u0110\u1eb7t l\u1ea1i "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.submit()}),e.TgZ(8,"span"),e._uU(9,"Xong"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.optionDepartureTime),e.xp6(1),e.Q6J("ngIf",i.optionDepartureTime[4].isActive))},dependencies:[l.AxE,f.ez,f.mk,f.sg,f.O5,G.nA,_.u5,_.JJ,_.On,h.N8,h.Xq],encapsulation:2}),n})();const kt={headers:new N.WM({"Content-Type":"application/json"})};let Dt=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}getLstAirlineFareoptions(){return this.http.post(this.appConfig.apiUrlTPS+"ticket-low-fare/get-list-airline-fare-class",JSON.stringify({airline:"vn,qh,vj"}),kt)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.eN),e.LFG(Y.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wt=["dateFromEl"],Mt=["form",""];function Nt(n,r){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function Jt(n,r){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function Ot(n,r){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Ut(n,r){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}const J=function(n){return[n]},O=function(){return{"text-express-md":!0}};function Qt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18),e.ynx(2),e.TgZ(3,"cf-select",19),e.NdJ("selectedChange",function(){e.CHM(t);const o=e.MAs(13),c=e.oxw();return e.KtG(c.nextPosition(o))}),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,Nt,1,1,"cf-hint",24),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"cf-select",27,28),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,Jt,1,1,"cf-hint",24),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"div",31)(21,"cf-field-group",32),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",34),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",35,36),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33),c=e.MAs(26);return e.oxw().dateFromChange(o),e.KtG(c.close())}),e.qZA(),e.YNc(27,Ot,1,1,"cf-hint",37),e.qZA(),e.TgZ(28,"cf-field-group",32),e._UZ(29,"cf-icon",33),e.TgZ(30,"label",38),e._uU(31," \u0111\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(32,"input",39,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())}),e.ALo(34,"mapper"),e.qZA(),e.YNc(35,Ut,1,1,"cf-hint",37),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(39);e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("data",t.data)("optionTmp",i)("excludes",e.VKq(32,J,t.form.controls.endPoint.value)),e.xp6(2),e.Q6J("ngClass",e.DdM(34,O)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("data",t.data)("optionTmp",i)("excludes",e.VKq(35,J,t.form.controls.startPoint.value)),e.xp6(3),e.Q6J("ngClass",e.DdM(37,O)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(1),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(34,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function Bt(n,r){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function qt(n,r){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function Ht(n,r){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Pt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",58),e.NdJ("dateSelect",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.dateSelectMobile(o,c.form.controls.fromDate,c.form.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",59)(5,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("fromDate",t.form.controls.fromDate.value)("displayMonthsOffset",0)}}function Yt(n,r){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Rt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",61,62),e.NdJ("dateSelect",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.dateSelectMobile(o,c.form.controls.toDate))}),e.ALo(5,"mapper"),e.qZA()()(),e.TgZ(6,"div",59)(7,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",e.xi3(5,14,t.form.value.toDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("toDate",t.form.controls.toDate.value)("displayMonthsOffset",0)}}function Lt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.startPoint,o.form.controls.endPoint))}),e.TgZ(3,"cf-select",45),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,Bt,1,1,"cf-hint",24),e.qZA()(),e.TgZ(10,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.endPoint,o.form.controls.startPoint))}),e.TgZ(13,"cf-select",47),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,qt,1,1,"cf-hint",24),e.qZA()()(),e.TgZ(20,"div",48)(21,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(29),c=e.oxw();return e.KtG(c.departDatePickerClick(o))}),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",50),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",51,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.roundTripFocus(o))}),e.qZA(),e.YNc(27,Ht,1,1,"cf-hint",37),e.qZA(),e.YNc(28,Pt,7,13,"ng-template",null,52,e.W1O),e.TgZ(30,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(39),c=e.oxw();return e.KtG(c.departDatePickerClick(o))}),e._UZ(31,"cf-icon",33),e.TgZ(32,"label",50),e._uU(33," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(34,"input",53,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.roundTripFocus(o))}),e.ALo(36,"mapper"),e.qZA(),e.YNc(37,Yt,1,1,"cf-hint",37),e.qZA(),e.YNc(38,Rt,9,17,"ng-template",null,54,e.W1O),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(39);e.xp6(3),e.Q6J("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(32,J,t.form.controls.endPoint.value))("data",t.data)("optionTmp",i),e.xp6(2),e.Q6J("ngClass",e.DdM(34,O)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(4),e.Q6J("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(35,J,t.form.controls.startPoint.value))("data",t.data)("optionTmp",i),e.xp6(2),e.Q6J("ngClass",e.DdM(37,O)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(3),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(36,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function jt(n,r){1&n&&(e.TgZ(0,"div",71),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function Gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const c=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onRemoveAirlineOption(o,c))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function zt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const c=e.oxw().$implicit,a=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareTypeOption(o,c,a))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",i.name+"-"+t.name,"")}}function $t(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",76),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const c=e.oxw().$implicit,a=e.oxw(5).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareOption(o,c,a))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+i.name+"-"+t.name,"")}}function Kt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,$t,3,1,"div",75),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Vt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Kt,2,1,"ng-container",68),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Xt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,zt,3,1,"div",72),e.YNc(2,Vt,2,1,"ng-container",2),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Wt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Xt,3,2,"ng-container",68),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function en(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Wt,2,1,"ng-container",68),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function tn(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Gt,3,1,"div",72),e.YNc(2,en,2,1,"ng-container",2),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function nn(n,r){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function on(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",66),e.YNc(5,jt,2,0,"div",67),e.YNc(6,tn,3,2,"ng-container",68),e.qZA(),e._UZ(7,"cf-icon",69),e.qZA(),e.YNc(8,nn,3,0,"div",70),e.ALo(9,"mapper"),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",!(t.form.value.specifyFareClassList&&(null==t.form.value.specifyFareClassList?null:t.form.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.form.value.type,t.specifyFareClassList.touched))}}function rn(n,r){1&n&&(e.TgZ(0,"label",78),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&n&&e.Q6J("CfRequired",!1)}function cn(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",81)(2,"div",82),e._UZ(3,"img",83),e.TgZ(4,"span",84),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",86),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=r.index;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function an(n,r){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function sn(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",79),e.ynx(2,80),e.YNc(3,cn,9,6,"ng-container",68),e.BQk(),e.YNc(4,an,3,0,"div",70),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.form.value.type,t.specifyPriceList.touched))}}const ln=function(n,r){return{"!bg-primary-2-4 !border-0":n,"opacity-[0.4]":r}},dn=function(n){return{"!text-neutral-white opacity-[0.6]":n}},pn=function(n){return{"!text-neutral-white":n}};function un(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",91),e.NdJ("click",function(){const o=e.CHM(t),c=o.$implicit,a=o.index,s=e.oxw(3);return e.KtG(s.onSelectedTime(c,a))}),e.TgZ(2,"div",92),e._uU(3),e.qZA(),e.TgZ(4,"div",93),e._uU(5),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit,i=r.index;e.xp6(1),e.Q6J("formGroupName",i)("ngClass",e.WLB(6,ln,t.value.isActive,t.value.disable)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,dn,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,pn,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.start+" - "+t.value.end!="00:00 - 23:59"?t.value.start+" - "+t.value.end:"Gi\u1edd c\u1ee5 th\u1ec3"," ")}}function _n(n,r){if(1&n&&(e.TgZ(0,"div",89),e.ynx(1,90),e.YNc(2,un,6,13,"ng-container",68),e.BQk(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.departureTime.controls)}}const mn=function(){return{standalone:!0}};function fn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",96)(4,"div"),e._uU(5),e.ALo(6,"mapper"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"mapper"),e.qZA()(),e.TgZ(10,"cf-slider",97),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.rangeHours=o)})("onSlideEnd",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.endSliderTime())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,8,t.rangeHours[0],t.minuteToString)),e.xp6(3),e.Oqu(e.xi3(9,11,t.rangeHours[1],t.minuteToString)),e.xp6(2),e.Q6J("ngModel",t.rangeHours)("min",0)("max",1439)("step",1)("range",!0)("ngModelOptions",e.DdM(14,mn))}}function gn(n,r){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function hn(n,r){if(1&n&&(e.ynx(0),e.YNc(1,_n,3,1,"div",87),e.YNc(2,fn,11,15,"div",88),e.YNc(3,gn,3,0,"div",70),e.ALo(4,"mapper"),e.ALo(5,"mapper"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",t.departureTime.value[4].isActive&&t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",e.gM2(4,3,e.xi3(5,8,t.departureTime.value,t.selectForDepartureTimeActive),t.checkInvalidField,t.form.value.isTimeRange,t.departureTime.touched))}}function xn(n,r){if(1&n&&(e.TgZ(0,"span",101),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function vn(n,r){if(1&n&&(e.ynx(0),e.YNc(1,xn,2,1,"span",100),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Cn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openTimeRangeOptions())}),e.YNc(1,vn,2,1,"ng-container",68),e.ALo(2,"mapper"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.departureTime.value,t.selectForDepartureTimeActive))}}function Tn(n,r){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function An(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Cn,3,4,"div",98),e.YNc(2,Tn,3,0,"div",70),e.ALo(3,"mapper"),e.BQk()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!(null!=(i=e.xi3(3,2,t.departureTime.value,t.selectForDepartureTimeActive))&&i.length))}}function yn(n,r){if(1&n&&(e.TgZ(0,"div",102),e._UZ(1,"div",103),e.ALo(2,"highlighter"),e._UZ(3,"div",104),e.ALo(4,"highlighter"),e.qZA()),2&n){const t=r.item,i=r.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,t.CityName+", "+t.Title,i.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,t.Code+" - "+t.AirportName,i.text),e.oJD)}}function Fn(n,r){1&n&&e._UZ(0,"cf-spinner")}let bn=(()=>{class n{constructor(t,i,o,c,a,s,m,v){this.fb=t,this._cfRegister=i,this.calendar=o,this._bottomSheetService=c,this._locationDataService=a,this._cdr=s,this._modal=m,this._selectFareFlightSvc=v,this.isMobile=!1,this.maxDate={year:b().add(4,"days").toDate().getFullYear(),month:b().add(4,"days").toDate().getMonth()+1,day:b().add(4,"days").toDate().getDate()},this.numOfMonth=4,this.isLoading=!1,this.selectedFaresTreeChange=new e.vpe,this.rangeHours=[0,1439],this.convertDateFromCFDate=g=>({year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate()}),this.checkInvalidField=(g,x,y)=>x&&!g.length&&y,this.selectForDepartureTimeActive=g=>null==g?void 0:g.filter(x=>x.isActive),this.minuteToString=g=>{const x=Math.floor(g/60),y=g%60;let E=`${x}`,Z=`${y}`;return x<10&&(E=`0${x}`),y<10&&(Z=`0${y}`),`${E}:${Z}`},this.positionSearchCustom=(g,x)=>{const y=this.removeAccents(g.Code.toLowerCase()),E=this.removeAccents(g.Title.toLowerCase()),Z=this.removeAccents(g.CityName.toLowerCase()),C=this.removeAccents(g.AirportName.toLowerCase()),T=this.removeAccents(x.toLowerCase());return y.includes(T)||E.includes(T)||Z.includes(T)||C.includes(T)},i.registerIcons([l.okA,l._tC,l.wvd,l.UNF,l.n78]),this.minDate=o.getToday(),this.data=this._locationDataService.getAllOption()}ngOnInit(){}swapPoint(t,i){if(""!=t.value&&""!=i.value){const o=t.value;t.setValue(null),t.setValue(i.value),i.setValue(null),i.setValue(o)}}nextPosition(t){setTimeout(()=>{t.selectFocus()})}dateFromChange(t){var i,o,c;this.form.patchValue({toDate:null});const a={year:b(null===(i=this.form.get("fromDate"))||void 0===i?void 0:i.value).add(4,"days").get("year"),month:b(null===(o=this.form.get("fromDate"))||void 0===o?void 0:o.value).add(4,"days").get("month")+1,day:b(null===(c=this.form.get("fromDate"))||void 0===c?void 0:c.value).add(4,"days").get("date")};this.maxDate=a,setTimeout(()=>{t.open()},0)}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}openAirportBottomSheet(t,i){const o=this._bottomSheetService.open(Ge.hm,{headerTitle:"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1,data:{airportOptions:this.data,currentSelected:this._locationDataService.getCityNameByCode(t.value),excludes:[i.value]}});o.containerInstance._leftButtonClick.subscribe(c=>{o.dismiss()}),o.afterDismissed().subscribe(c=>{c&&t.setValue(c.Code)})}departDatePickerClick(t){if(this.isMobile){const i=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0});i.containerInstance._leftButtonClick.subscribe(o=>{i.dismiss()})}}roundTripFocus(t){if(this.isMobile)return t.preventDefault(),!1}dateSelectMobile(t,i,o){var c,a,s;if(i.setValue(t),o){o.setValue(null);const m={year:b(null===(c=this.form.get("toDate"))||void 0===c?void 0:c.value).add(4,"days").get("year"),month:b(null===(a=this.form.get("toDate"))||void 0===a?void 0:a.value).add(4,"days").get("month")+1,day:b(null===(s=this.form.get("toDate"))||void 0===s?void 0:s.value).add(4,"days").get("date")};this.maxDate=m}this._cdr.detectChanges()}onMobileDatePickerOK(){this._bottomSheetService.dismiss()}scrollDown(){this.numOfMonth=this.numOfMonth+4}onShowFareOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(i=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(F.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(F.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:c=>{c.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onPriceOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(i=this.specifyFareClassList.value)&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(F.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(c=>{c&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(F.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:c=>{c.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}loadFareOptions(t){var i;return(null===(i=this.selectedFaresTree)||void 0===i?void 0:i.length)>0?(0,Ke.of)(this.selectedFaresTree):this._selectFareFlightSvc.getLstAirlineFareoptions().pipe((0,R.U)(o=>((n,r)=>n.map(t=>{var i,o;const c=null==r?void 0:r.find(a=>a.airline===t.airline);return{name:je(null===(i=t.airline)||void 0===i?void 0:i.toUpperCase()),code:t.airline,icon:Re(t.airline),isActive:!!r&&!!c,totalSelectedFare:(null===(o=null==c?void 0:c.fareClass)||void 0===o?void 0:o.length)||0,isDisable:!1,totalFare:Ye(t),childItems:t.cabin.map(a=>({code:a.code,name:a.name,isActive:!!c&&He(a,c),isDisable:!1,childItems:a.fareType.map(s=>{var m;return{code:s.code,name:s.description,isActive:!!c&&Pe,isDisable:!1,totalFare:(null===(m=s.fareClass)||void 0===m?void 0:m.length)||0,childItems:s.fareClass.map(v=>({code:v.code,name:v.name,isActive:!!c&&c.fareClass.find(g=>g===v.code),childItems:[],isDisable:!1})),totalSelectedFare:c?s.fareClass.map(({code:v})=>v).filter(v=>c.fareClass.includes(v)).length:0}})}))}}))(o.data,t)))}countAirlineTotalFare(t){var i;let o=0;return null===(i=t.cabin)||void 0===i||i.forEach(c=>{var a;null===(a=c.fareType)||void 0===a||a.forEach(s=>{o+=s.fareClass.length||0})}),o}openFareOptions(){this.isLoading=!0,this.loadFareOptions().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(st,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(yt,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var i;this.specifyFareClassList.clear();for(const o of(n=>n.map(r=>({airline:r.code,fareClass:r.childItems.map(t=>t.childItems.map(i=>i.childItems.filter(o=>o.isActive)).reduce((i,o)=>[...i,...o.map(c=>c.code)],[])).reduce((t,i)=>[...t,...i],[])})))(t))null!==(i=o.fareClass)&&void 0!==i&&i.length&&this.addFareClass(o);this._cdr.markForCheck()}onRemoveAirlineOption(t,i){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(o=>{o.childItems.forEach(c=>{c.childItems.forEach(a=>a.isActive=!1)})}),this.standardizeAirlineOptionSelected(i)}standardizeAirlineOptionSelected(t){let i=!1;t.childItems.forEach(o=>{o.childItems.forEach(c=>{c.isActive=c.childItems.map(a=>a.isActive).reduce((a,s)=>a||s,!1),c.totalSelectedFare=c.childItems.filter(a=>a.isActive).length,c.isActive&&(i=!0)})}),t.isActive=i,t.totalSelectedFare=t.childItems.reduce((o,c)=>o+c.childItems.map(a=>a.childItems.filter(s=>s.isActive).length).reduce((a,s)=>a+s),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}onRemoveFareTypeOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(c=>{c.isActive=!1}),this.standardizeAirlineOptionSelected(o)}onRemoveFareOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1,this.standardizeAirlineOptionSelected(o)}get specifyFareClassList(){return this.form.get("specifyFareClassList")}get specifyPriceList(){return this.form.get("specifyPriceList")}addFareClass(t){var i;const o=this.fb.group({airline:null,fareClass:null});o.patchValue(t),null===(i=this.specifyFareClassList)||void 0===i||i.push(o)}onTimeOptionChange(t){this.form.patchValue({isTimeRange:t}),t&&this.isMobile&&this.openTimeRangeOptions()}openTimeRangeOptions(){this._bottomSheetService.open(St,{headerTitle:"Gi\u1edd kh\u1edfi h\xe0nh",data:{timeRanges:(0,z.cloneDeep)(this.departureTime.value)}}).afterDismissed().subscribe(i=>{i&&(this.departureTime.controls.forEach((o,c)=>{this.departureTime.at(c).setValue(i[c])}),this._cdr.detectChanges())})}get departureTime(){return this.form.get("departureTime")}onSelectedTime(t,i){this.departureTime.markAllAsTouched(),"custom"===t.value.code?this.departureTime.controls.forEach((o,c)=>{o.patchValue(c!==i?{isActive:!1}:{isActive:!o.value.isActive})}):(this.departureTime.at(4).patchValue({isActive:!1}),this.departureTime.at(i).patchValue({isActive:!t.value.isActive}))}endSliderTime(){const[t,i]=this.rangeHours;this.departureTime.at(4).patchValue({start:this.minuteToString(t),end:this.minuteToString(i),startTime:t,endTime:i})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.qu),e.Y36(l.KNP),e.Y36(B.jH),e.Y36(A.a2),e.Y36(P._),e.Y36(e.sBO),e.Y36(I.oE),e.Y36(Dt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-add-info-flight-step","form",""]],viewQuery:function(t,i){if(1&t&&e.Gf(wt,5),2&t){let o;e.iGM(o=e.CRH())&&(i.dateFromEl=o.first)}},inputs:{form:"form",isMobile:"isMobile",selectedFaresTree:"selectedFaresTree"},outputs:{selectedFaresTreeChange:"selectedFaresTreeChange"},standalone:!0,features:[e.jDz],attrs:Mt,decls:41,vars:17,consts:[[1,"w-full","h-full",3,"formGroup"],[1,"text-heading-md","py-4"],[4,"ngIf"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mt-4","mb-4"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,"mb-3"],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],[1,"flex","justify-between","items-center","mb-2"],["icon","clock","size","small"],[3,"checked","checkedChange"],["optionTemplate",""],[1,"flex","items-start","gap-x-2","md:flex-wrap","md:gap-x-0","md:gap-y-4","pb-2"],["placeholder","T\u1eeb?","textField","AirportDisplay","valueField","Code","formControlName","startPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes","selectedChange"],["cf-head-icon","","icon","plane","size","medium",1,"text-neutral-gray-4"],["cf-label","","for","startPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","startPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],["cfInputElement",""],["cf-hint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:top-[45px]","md:!bg-neutral-white","mt-2","md:m-0",3,"click"],["icon","switch","size","small",1,"text-primary-1-4","md:rotate-90"],["textField","AirportDisplay","valueField","Code","valueField","Code","placeholder","\u0110\u1ebfn?","formControlName","endPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes"],["endPoint",""],["cf-label","","for","endPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","endPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],[1,"flex","items-center","gap-x-4","md:flex-wrap","md:gap-x-0","md:gap-y-4","justify-between"],[1,"grow-[293]","!max-w-none","md:flex-grow-0","md:w-full","w-[calc(50%-12px)]",3,"valid","status"],["cfHeadIcon","","icon","calendar","size","medium",1,"text-neutral-gray-4"],["cfLabel","","for","fromDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","fromDate","cfDatepicker","","formControlName","fromDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["cfLabel","","for","toDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","toDate","cfDatepicker","","formControlName","toDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect"],["dateTo","cfDatepicker"],["cf-hint","",3,"hint"],["cfHint","",3,"hint"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4","relative"],[1,"grow-[293]","md:flex-grow-0","md:w-full","hidden","md:block",3,"click"],["formControlName","startPoint","textField","AirportDisplay","valueField","Code","placeholder","T\u1eeb?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:bottom-[38%]","md:!bg-neutral-white",3,"click"],["formControlName","endPoint","textField","AirportDisplay","valueField","Code","placeholder","\u0110\u1ebfn?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4"],[1,"grow-[293]","md:flex-grow-0","w-full",3,"valid","status","click"],["cfLabel","",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","fromDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","mousedown"],["fromDatepickerBottomSheetTpl",""],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","toDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect","mousedown"],["toDatepickerBottomSheetTpl",""],[1,"flex","w-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","formControlName","fromDate","navigation","none","direction","vertical",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","fromDate","displayMonthsOffset","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],["cf-button","",1,"justify-center","w-full",3,"click"],["formControlName","toDate","outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","maxDate","displayMonths","rangeSelection","secondaryCalendar","toDate","displayMonthsOffset","dateSelect"],["dateFromMobileEl",""],[1,""],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],["class","flex flex-wrap justify-start items-center md:justify-between md:items-center gap-x-8 gap-y-2",4,"ngIf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4",4,"ngIf"],[1,"flex","flex-wrap","justify-start","items-center","md:justify-between","md:items-center","gap-x-8","gap-y-2"],["formArrayName","departureTime"],[1,"py-2","px-2.5","min-w-[106px]","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"formGroupName","ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelOptions","ngModelChange","onSlideEnd"],["class","flex flex-wrap gap-2 mt-4 cursor-pointer",3,"click",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mt-4","cursor-pointer",3,"click"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngIf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2,"T\xf9y ch\u1ecdn chuy\u1ebfn bay"),e.qZA(),e.YNc(3,Qt,36,38,"ng-container",2),e.YNc(4,Lt,40,38,"ng-container",2),e._UZ(5,"div",3),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7)(10,"span"),e._uU(11,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(12,"div",8),e.NdJ("click",function(c){return i.onShowFareOptionChange(c)}),e._UZ(13,"cf-switch",9),e.qZA()(),e.YNc(14,on,10,8,"div",10),e._UZ(15,"div",3),e.TgZ(16,"div",11)(17,"div",4)(18,"div",5),e._UZ(19,"cf-icon",12),e.TgZ(20,"div",7)(21,"span"),e._uU(22,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(23,"div",8),e.NdJ("click",function(c){return i.onPriceOptionChange(c)}),e._UZ(24,"cf-switch",9),e.qZA()(),e.YNc(25,rn,2,1,"label",13),e.ALo(26,"mapper"),e.qZA(),e.YNc(27,sn,6,7,"ng-container",2),e._UZ(28,"div",3),e.TgZ(29,"div",14)(30,"div",5),e._UZ(31,"cf-icon",15),e.TgZ(32,"div",7)(33,"span"),e._uU(34,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(35,"cf-switch",16),e.NdJ("checkedChange",function(c){return i.onTimeOptionChange(c)}),e.qZA()(),e.YNc(36,hn,6,11,"ng-container",2),e.YNc(37,An,4,5,"ng-container",2),e.qZA(),e.YNc(38,yn,5,8,"ng-template",null,17,e.W1O),e.YNc(40,Fn,1,0,"cf-spinner",2)),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(9),e.Q6J("checked","FARE"===i.form.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===i.form.value.type),e.xp6(10),e.Q6J("checked","PRICE"===i.form.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(26,12,i.specifyPriceList.value,i.checkInvalidField,"PRICE"===i.form.value.type,i.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===i.form.value.type),e.xp6(8),e.Q6J("checked",i.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(3),e.Q6J("ngIf",i.isLoading))},dependencies:[f.ez,f.mk,f.sg,f.O5,_.UX,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,_.x0,_.CE,l.AxE,l.Sm8,Ue.m,w.j$,w.BN,w.lt,j.q,h.N8,h.Xq,A.DW,Oe.C,$e.T,ze.C,B.Cs,Q,$.Rq,$.Ry,B._o,Qe.I,F.OR,G.nA,_.u5,_.On],encapsulation:2,changeDetection:0}),n})();var V=d(19123);function En(n,r){if(1&n&&(e.TgZ(0,"cf-radio",12),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const Zn=function(){return{standalone:!0}};function In(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"cf-radio-group",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.distributionChannelTempMobile=o)}),e.YNc(2,En,2,2,"cf-radio",10),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirmDistributeChannel())}),e._uU(4,"X\xe1c nh\u1eadn"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.distributionChannelTempMobile)("ngModelOptions",e.DdM(3,Zn)),e.xp6(1),e.Q6J("ngForOf",t.distributionChannelOptions)}}const Sn=[{id:"B2B_GMBR;B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{id:"B2B_GMBR",name:"Flychills"},{id:"B2C_GMBR",name:"GMBR"}];let kn=(()=>{class n{constructor(t,i,o){this._cfRegister=t,this._permissionService=i,this._bottomSheetService=o,this.isMobile=!1,this.distributionChannelTempMobile="B2B_GMBR;B2C_GMBR",this.distributionChannelOptions=Sn,t.registerIcons([l.ctk,l.gEm])}isAgent2(){const t=this._permissionService.getCurrentAuthor();return"AGENT2"===(null==t?void 0:t.titleCode.toUpperCase())}selectMobileDistributionChannel(t){if(!this.isMobile)return;const i=this._bottomSheetService.open(t,{headerTitle:"Vai tr\xf2",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",restoreFocus:!1});i.containerInstance._rightButtonClick.subscribe(()=>{i.dismiss()}),i.afterDismissed().subscribe(()=>{var o;this.distributionChannelTempMobile=null===(o=this.form.get("distributionChannel"))||void 0===o?void 0:o.value})}onConfirmDistributeChannel(){this.form.patchValue({distributionChannel:this.distributionChannelTempMobile}),this._bottomSheetService.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP),e.Y36(q.$A),e.Y36(A.a2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-add-config-flight-step"]],inputs:{form:"form",isMobile:"isMobile"},standalone:!0,features:[e.jDz],decls:11,vars:5,consts:[[3,"formGroup"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"mb-6","md:mb-[1px]"],[1,"",3,"click"],["data-id","distributionChannel","textField","name","valueField","id","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"ngClass","status","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],["distributionChannelTpl",""],[1,"flex","flex-col","w-full","p-4","gap-y-6"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelOptions","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],["cf-button","",1,"w-full","justify-center",3,"click"],["size","medium",3,"value"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(10);return e.KtG(i.selectMobileDistributionChannel(a))}),e.TgZ(4,"cf-select",4)(5,"label",5),e._UZ(6,"cf-icon",6),e.TgZ(7,"span"),e._uU(8,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()(),e.YNc(9,In,5,4,"ng-template",null,7,e.W1O),e.qZA()}2&t&&(e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("ngClass",i.isMobile?"pointer-events-none":"pointer-events-auto")("status",i.form.controls.distributionChannel.invalid&&(i.form.controls.distributionChannel.dirty||i.form.controls.distributionChannel.touched)?"error":"default")("data",i.distributionChannelOptions)("allowSearch",!1))},dependencies:[f.ez,f.mk,f.sg,_.UX,_._Y,_.JJ,_.JL,_.sg,_.u,l.AxE,l.Sm8,w.j$,j.q,V.o,V.T,_.u5,_.On,h.N8,h.Xq],encapsulation:2,changeDetection:0}),n})();var Dn=d(9381);function wn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cheapflightclient-add-info-flight-step",27),e.NdJ("selectedFaresTreeChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.selectedFaresTree=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)("selectedFaresTree",t.selectedFaresTree)}}function Mn(n,r){if(1&n&&e._UZ(0,"cheapflightclient-add-config-flight-step",28),2&n){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)}}function Nn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}const X=function(n,r,t,i,o){return[n,r,t,i,o]};function Jn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,X,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function On(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function Un(n,r){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,Nn,3,0,"button",30),e.YNc(2,Jn,5,13,"button",31),e.YNc(3,On,3,1,"button",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function Qn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function Bn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,X,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function qn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA(),e._UZ(3,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function Hn(n,r){if(1&n&&(e.TgZ(0,"div",36)(1,"div",37),e.YNc(2,Qn,3,0,"button",38),e.YNc(3,Bn,5,13,"button",39),e.YNc(4,qn,4,1,"button",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function Pn(n,r){1&n&&e._UZ(0,"cf-spinner")}var k=(()=>{return(n=k||(k={}))[n.INFO_FLIGHT=0]="INFO_FLIGHT",n[n.CONFIG_HUNT=1]="CONFIG_HUNT",k;var n})();const Yn=[{title:"Th\xf4ng tin chuy\u1ebfn bay",id:k.INFO_FLIGHT},{title:"C\u1ea5u h\xecnh s\u0103n v\xe9",id:k.CONFIG_HUNT}],Rn=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}],Ln=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!0,disable:!1,startTime:0,endTime:1439,totalAvailable:0}];let jn=(()=>{class n{constructor(t,i,o,c,a,s,m){this.fb=t,this._cfRegister=i,this.router=o,this._mobileDetectService=c,this._cdr=a,this._modal=s,this._bottomSheetService=m,this.currentStep=k.INFO_FLIGHT,this.STEP_PAGE=k,this.isMobile=!1,this.stepList=Yn,this.isLoading=!1,this.checkValidStepInfoFlight=(v,g,x,y)=>{var E,Z;let C=!1;return"PRICE"===v.type?C=!(null!==(E=g.filter(H=>H.price))&&void 0!==E&&E.length)||C:"FARE"===v.type&&(C=!(null!=x&&x.length)||C),v.isTimeRange&&(C=!(null!==(Z=null==y?void 0:y.filter(H=>H.isActive))&&void 0!==Z&&Z.length)||C),C},i.registerIcons([l.toh,l.NNX,l.rJw])}ngOnInit(){this.initCheckMobile(),this.initForm()}initForm(){this.form=this.fb.group({specifyFareClassList:this.fb.array([]),specifyPriceList:this.fb.array([]),type:"FARE",endPoint:[null,_.kI.required],startPoint:[null,_.kI.required],toDate:[b().toDate(),_.kI.required],fromDate:[b().toDate(),_.kI.required],isTimeRange:!1,departureTime:this.fb.array([]),distributionChannel:["B2B_GMBR;B2C_GMBR",_.kI.required]}),Rn.forEach(t=>{this.initDataPriceList(t)}),Ln.forEach(t=>{this.initDepartureTime(t)})}initDataPriceList(t){const i=this.fb.group({name:null,id:null,price:null,image:null});i.patchValue(t),this.specifyPriceList.push(i)}initDepartureTime(t){const i=this.fb.group({name:null,code:null,start:null,end:null,isActive:!1,disable:!1,startTime:null,endTime:null,totalAvailable:0});i.patchValue(t),this.departureTimeList.push(i)}get specifyPriceList(){return this.form.get("specifyPriceList")}get departureTimeList(){return this.form.get("departureTime")}initCheckMobile(){this._mobileDetectService.mobileSubject.subscribe(t=>{this.isMobile=t})}onMoveToHuntTicketAdvancedList(){this.router.navigate(["admin/hunt-ticket-advanced-list"])}get specifyFareClassList(){return this.form.get("specifyFareClassList")}onSubmit(){this.form.invalid||(this.isMobile?this._bottomSheetService.open(L,{headerTitle:"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",containerFullHeigh:!0,data:{rawData:this.form.value,selectedFaresTree:this.selectedFaresTree}}):this._modal.open(L,{data:this.form.value,selectedFaresTree:this.selectedFaresTree}).afterClosed$.subscribe({next:i=>{}}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.qu),e.Y36(l.KNP),e.Y36(S.F0),e.Y36(Dn.L),e.Y36(e.sBO),e.Y36(I.oE),e.Y36(A.a2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-hunt-ticket-advanced-add"]],standalone:!0,features:[e.jDz],decls:33,vars:8,consts:[[1,"p-6","h-full","block","w-full","md:p-3",3,"formGroup"],[1,"flex","gap-x-2","mb-4","justify-start","items-center"],[1,"text-body-md-short","text-neutral-gray-6","cursor-pointer",3,"click"],["icon","chevron_right","size","small",1,"text-neutral-gray-4"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","flex-col","h-full","w-full","justify-center","items-center"],[1,"w-[70%]","md:w-full"],[1,"flex","justify-between","items-center","mb-4","md:hidden"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"flex","flex-col","w-full","justify-center"],[1,"block","gap-y-4","mb-2","md:mb-12"],[1,"flex","rounded","w-full","bg-white","justify-between","shadow-cf-md","mb-8","p-4","items-center"],[1,"flex","justify-start","gap-x-0","items-center"],[1,"h-full","flex","flex-col","justify-center","items-end"],["src","assets/images/booking-hunter-banner.svg",1,"w-full","object-contain"],[1,"h-full","p-4","items-start"],[1,"text-express-md","text-neutral-black"],[1,"flex","flex-col","gap-3","bg-white","rounded","shadow-cf-md","gap-y-3","p-6","md:px-3"],[1,"flex","justify-center","items-center","md:items-center","w-[80%]","mx-auto"],[3,"steps","stepCur"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange",4,"ngIf"],[3,"form","isMobile",4,"ngIf"],["class","w-full py-4",4,"ngIf"],["class","bg-neutral-white pt-3 pr-4 pb-3 pl-4 flex-row items-end justify-end w-full fixed bottom-0 hidden md:flex md:justify-between",4,"ngIf"],[4,"ngIf"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange"],[3,"form","isMobile"],[1,"w-full","py-4"],["cf-button","","size","medium","type","secondary","class","bg-white float-left",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center float-right",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left",3,"click"],["cfHeadIcon","","icon","chevron_left","size","small",1,"mr-2"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"bg-neutral-white","pt-3","pr-4","pb-3","pl-4","flex-row","items-end","justify-end","w-full","fixed","bottom-0","hidden","md:flex","md:justify-between"],[1,"flex","flex-row","items-center","justify-start","shrink-0","relative","md:w-full"],["cf-button","","size","medium","type","secondary","class","bg-white float-left justify-center md:w-full",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center ml-2 md:w-full",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left","justify-center","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return i.onMoveToHuntTicketAdvancedList()}),e._uU(3," T\u1ed5ng kho "),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"div",4),e._uU(6," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.TgZ(12,"div",10),e._uU(13," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"div"),e._UZ(20,"img",16),e.qZA()(),e.TgZ(21,"div",17)(22,"div",18),e._uU(23," M\u1ed9t c\xe1ch \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng \u0111\u1eb7t ch\u1ed7 nh\u1eefng chuy\u1ebfn bay v\xe0o d\u1ecbp l\u1ec5! "),e.qZA()()()(),e.TgZ(24,"div",19)(25,"div",20),e._UZ(26,"cheapflightclient-step-ct",21),e.qZA(),e.TgZ(27,"div"),e.YNc(28,wn,1,3,"cheapflightclient-add-info-flight-step",22),e.YNc(29,Mn,1,2,"cheapflightclient-add-config-flight-step",23),e.qZA()(),e.YNc(30,Un,4,3,"div",24),e.qZA()()(),e.YNc(31,Hn,5,3,"div",25),e.qZA()(),e.YNc(32,Pn,1,0,"cf-spinner",26)),2&t&&(e.Q6J("formGroup",i.form),e.xp6(26),e.Q6J("steps",i.stepList)("stepCur",i.currentStep),e.xp6(2),e.Q6J("ngIf",i.currentStep===i.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",i.currentStep===i.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[f.ez,f.O5,h.N8,h.Xq,l.AxE,l.Sm8,Je,F.OR,_.UX,_._Y,_.JL,_.sg,bn,kn,A.DW,Q],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),Gn=(()=>{class n{constructor(t,i){this._cfRegister=t,this.router=i,t.registerIcons([l.toh])}onMoveToHuntTicketAdvancedAdd(){this.router.navigate(["admin/hunt-ticket-advanced-add"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP),e.Y36(S.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-hunt-ticket-advanced-list"]],standalone:!0,features:[e.jDz],decls:4,vars:0,consts:[["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.onMoveToHuntTicketAdvancedAdd()}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o s\u0103n v\xe9"),e.qZA(),e._UZ(3,"cf-icon",1),e.qZA())},dependencies:[f.ez,h.N8,h.Xq,l.AxE,l.Sm8],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})()},34541:(W,M,d)=>{d.d(M,{C:()=>A});var f=d(36895),_=d(94650);let A=(()=>{class h{constructor(F,e,U){this.elementRef=F,this.renderer=e,this.document=U}set CfRequired(F){if(F){const e=this.document.createElement("span");e.innerHTML="&nbsp;(*)",e.className="text-primary-1-4 text-espressive-sm",this.renderer.appendChild(this.elementRef.nativeElement,e)}}}return h.\u0275fac=function(F){return new(F||h)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(f.K0))},h.\u0275dir=_.lG2({type:h,selectors:[["","CfRequired",""]],inputs:{CfRequired:"CfRequired"},standalone:!0}),h})()}}]);