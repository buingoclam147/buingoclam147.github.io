"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[4586],{80751:(Y,Z,u)=>{u.d(Z,{A:()=>y});const y=E=>{switch(E){case"MALE":return"MR";case"FEMALE":return"MS";default:return""}}},97218:(Y,Z,u)=>{u.d(Z,{X:()=>P});var y=u(36895),E=u(37094),D=u(83700),F=u(27898),k=u(72506),h=u(44143),o=u(94650),U=u(97579);function I(x,f){if(1&x){const d=o.EpF();o.TgZ(0,"button",17),o.NdJ("click",function(){o.CHM(d);const m=o.oxw().$implicit,O=o.oxw();return o.KtG(O.onFareTypeExpand(m))}),o._uU(1," Xem th\xeam "),o._UZ(2,"cf-icon",18),o.qZA()}}function w(x,f){if(1&x){const d=o.EpF();o.TgZ(0,"button",17),o.NdJ("click",function(){o.CHM(d);const m=o.oxw().$implicit,O=o.oxw();return o.KtG(O.onFareTypeColab(m))}),o._uU(1," \u1ea8n b\u1edbt "),o._UZ(2,"cf-icon",19),o.qZA()}}const S=function(x){return{"bg-[#FCB40A] text-neutral-white":x}};function b(x,f){if(1&x){const d=o.EpF();o.TgZ(0,"div",22),o.NdJ("click",function(){const O=o.CHM(d).$implicit,C=o.oxw(2).$implicit,M=o.oxw();return o.KtG(M.onToggleFareSelected(C,O))}),o._uU(1),o.qZA()}if(2&x){const d=f.$implicit;o.Q6J("ngClass",o.VKq(2,S,d.isActive)),o.xp6(1),o.hij(" ",d.name," ")}}function T(x,f){if(1&x&&(o.TgZ(0,"div",20),o.YNc(1,b,2,4,"div",21),o.qZA()),2&x){const d=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",d.fareClass)}}function B(x,f){if(1&x){const d=o.EpF();o.TgZ(0,"div")(1,"div",12)(2,"cf-checkbox",5),o.NdJ("checkChange",function(m){const C=o.CHM(d).$implicit,M=o.oxw();return o.KtG(M.onFareTypeSelectedChange(m,C))}),o.TgZ(3,"div",13),o._uU(4),o.TgZ(5,"span",14),o._uU(6),o.qZA()()(),o.YNc(7,I,3,0,"button",15),o.YNc(8,w,3,0,"button",15),o.qZA(),o.YNc(9,T,2,1,"div",16),o.qZA()}if(2&x){const d=f.$implicit;o.xp6(2),o.Q6J("checked",d.isActive),o.xp6(2),o.hij(" ",d.name," "),o.xp6(2),o.AsE("(",d.fareTypeSelected||0,"/",d.totalFareType,")"),o.xp6(1),o.Q6J("ngIf",!d.isExpand),o.xp6(1),o.Q6J("ngIf",d.isExpand),o.xp6(1),o.Q6J("ngIf",d.isExpand)}}let P=(()=>{class x{constructor(d,p,m){this.ref=d,this.bottomSheetRef=p,this.bottomSheetData=m,this.listFareTypeOptions=[],this.listFareTypeOptionsSource=[],d&&(this.listFareTypeOptionsSource=d.data.listFareTypeOptions,this.selectedAll=d.data.selectedAll,this.listFareTypeOptions=Object.assign({},d.data.listFareTypeOptionsSource)),m&&(this.listFareTypeOptionsSource=m.listFareTypeOptions,this.selectedAll=m.selectedAll),this.listFareTypeOptions=this.listFareTypeOptionsSource.map(O=>Object.assign(Object.assign({},O),{fareClass:O.fareClass.map(C=>Object.assign({},C))}))}reset(){this.listFareTypeOptions=this.listFareTypeOptionsSource.map(d=>Object.assign(Object.assign({},d),{isActive:!1,isAllFareClass:!1,fareTypeSelected:0,fareClass:d.fareClass.map(p=>Object.assign(Object.assign({},p),{isActive:!1}))})),this.selectedAll=!1}close(){this.ref&&this.ref.close(this.listFareTypeOptionsSource),this.bottomSheetData&&this.bottomSheetRef.dismiss(this.listFareTypeOptionsSource)}submit(){this.listFareTypeOptionsSource=this.listFareTypeOptions,this.ref&&this.ref.close(this.listFareTypeOptionsSource),this.bottomSheetData&&this.bottomSheetRef.dismiss(this.listFareTypeOptionsSource)}onSelectAllChange(d){this.listFareTypeOptions.forEach(p=>{p.isActive=d,p.isAllFareClass=d,p.fareClass.forEach(m=>{m.isActive=d})}),this.computeFareSelected()}onFareTypeSelectedChange(d,p){if(p.isActive=d,p.isAllFareClass=d,p.fareClass.forEach(m=>m.isActive=d),d){const m=this.listFareTypeOptions.every(O=>O.isActive);this.selectedAll=m}else this.selectedAll=!1;this.computeFareSelected()}onToggleFareSelected(d,p){p.isActive=!p.isActive;const m=d.fareClass.every(C=>C.isActive);d.isActive=d.fareClass.some(C=>C.isActive),d.isAllFareClass=m;const O=this.listFareTypeOptions.every(C=>C.isActive);this.selectedAll=O,this.computeFareSelected()}computeFareSelected(){this.listFareTypeOptions.forEach(d=>{d.fareTypeSelected=d.fareClass.filter(p=>p.isActive).length})}onFareTypeExpand(d){this.listFareTypeOptions.forEach(p=>{p.isExpand=p.code===d.code})}onFareTypeColab(d){d.isExpand=!1}}return x.\u0275fac=function(d){return new(d||x)(o.Y36(U.gb,8),o.Y36(E.Zu,8),o.Y36(E.Rr,8))},x.\u0275cmp=o.Xpm({type:x,selectors:[["lowfare-option-modal"]],standalone:!0,features:[o.jDz],decls:20,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["cf-button","","size","medium","type","secondary",1,"justify-center","hidden","md:flex","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],["class","ml-1 mr-1 bg-[#F2F2F2] text-espressive-md p-2 text-center cursor-pointer rounded",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer","rounded",3,"ngClass","click"]],template:function(d,p){1&d&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),o.qZA(),o.TgZ(4,"cf-icon",3),o.NdJ("click",function(){return p.close()}),o.qZA()(),o.TgZ(5,"div",4)(6,"cf-checkbox",5),o.NdJ("checkChange",function(O){return p.onSelectAllChange(O)}),o._uU(7," Ch\u1ecdn t\u1ea5t c\u1ea3 "),o.qZA()(),o.TgZ(8,"div",6),o.YNc(9,B,10,7,"div",7),o.qZA(),o.TgZ(10,"div",8)(11,"button",9),o.NdJ("click",function(){return p.close()}),o.TgZ(12,"span"),o._uU(13,"H\u1ee7y"),o.qZA()(),o.TgZ(14,"button",10),o.NdJ("click",function(){return p.reset()}),o.TgZ(15,"span"),o._uU(16,"\u0110\u1eb7t l\u1ea1i"),o.qZA()(),o.TgZ(17,"button",11),o.NdJ("click",function(){return p.submit()}),o.TgZ(18,"span"),o._uU(19,"X\xe1c nh\u1eadn"),o.qZA()()()()),2&d&&(o.xp6(6),o.Q6J("checked",p.selectedAll),o.xp6(3),o.Q6J("ngForOf",p.listFareTypeOptions))},dependencies:[y.ez,y.mk,y.sg,y.O5,k.AxE,k.Sm8,F.u,h.j$,D.N8,D.Xq],encapsulation:2}),x})()},44586:(Y,Z,u)=>{u.d(Z,{g:()=>je});var y=u(36895),E=u(24006),D=u(83700),F=u(88516),k=u(72853),h=u(72506),o=u(44143),U=u(4688),I=u(74891),w=u(74713),S=u(76331),b=u(45393),T=u(62163),B=u(53820),P=u(38514),x=u(80751),f=u(15439),p=u(77296),m=u(77579),O=u(78372),C=u(28746),M=u(89701),N=u(52013),K=u(61545),J=u(97218),R=u(37094),e=u(94650),L=u(97579),H=u(82761),$=u(56684),V=u(62733),j=u(77492),W=u(9381);function z(i,l){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(12);e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",n)}}function G(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\xe3 canh v\xe9 kh\xf4ng h\u1ee3p l\u1ec7")}function X(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\xe3 canh v\xe9 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div",33),e._UZ(3,"cf-icon",34),e.TgZ(4,"span",35),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9"),e.qZA()(),e.YNc(6,z,2,2,"div",10),e.qZA(),e.TgZ(7,"cf-select",36),e.NdJ("onSearch",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onSearchValueChange(r))})("selectedChange",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onSelectedPnr(r))}),e._UZ(8,"cf-icon",37),e.YNc(9,G,1,1,"cf-hint",38),e.YNc(10,X,1,1,"cf-hint",38),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",t.availableInfo),e.xp6(1),e.Q6J("status",t.registerOrderForm.controls.bookingCode.invalid&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched)?"error":"default")("data",t.pnrSuggestOptions)("placeholder","M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9")("formControl",t.registerOrderForm.controls.bookingCode)("allowSearch",!0)("isEmpty",t.isDataEmpty),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.bookingCode.errors?null:t.registerOrderForm.controls.bookingCode.errors.invalid)&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.bookingCode.errors?null:t.registerOrderForm.controls.bookingCode.errors.required)&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched))}}function te(i,l){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(12);e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",n)}}function ie(i,l){if(1&i&&(e.TgZ(0,"div",31)(1,"div",32)(2,"div",33),e._UZ(3,"cf-icon",34),e.TgZ(4,"span",35),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9"),e.qZA()(),e.YNc(6,te,2,2,"div",10),e.qZA(),e.TgZ(7,"div",41),e._uU(8),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",t.availableInfo),e.xp6(2),e.Oqu(t.pnrOrderData.bookingCode)}}function re(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",69)(1,"div",70),e.NdJ("scrolled",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.scrollDown())}),e._UZ(2,"cf-datepicker-inline",71),e.qZA(),e.TgZ(3,"div",72)(4,"div",73)(5,"button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onCloseDatePicker())}),e._uU(6,"H\u1ee7y"),e.qZA(),e.TgZ(7,"button",75),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("formControl",t.registerOrderForm.controls.dayExpire)("maxDate",t.maxDate)("fromDate",t.registerOrderForm.controls.dayExpire.value)("displayMonthsOffset",0),e.xp6(5),e.Q6J("disabled",null==t.registerOrderForm?null:t.registerOrderForm.controls.dayExpire.invalid)}}function oe(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\u1edd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function se(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\u1edd k\u1ebft th\xfac kh\xf4ng h\u1ee3p l\u1ec7.")}function ae(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\u1ee9c gi\xe1 mong mu\u1ed1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function le(i,l){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i thi\u1ec3u l\xe0 1\u0111")}function ce(i,l){if(1&i&&(e._UZ(0,"cf-hint",40),e.ALo(1,"number")),2&i){const t=e.oxw(4);e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i \u0111a l\xe0 "+e.lcZ(1,1,t.totalFare)+" \u0111"||0)}}function de(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",76)(1,"cf-input-group",77)(2,"label",78),e._uU(3,"Ch\u1ec9 canh gi\xe1 v\xe9 (c\u1ee7a 1 ng\u01b0\u1eddi l\u1edbn \u0111\u1ea1i di\u1ec7n) gi\u1ea3m th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(4,"cf-input-number",79),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw(3);return e.KtG(a.checkDirtyNumber("targetPrice",r))}),e.qZA(),e.YNc(5,ae,1,1,"cf-hint",38),e.YNc(6,le,1,1,"cf-hint",38),e.YNc(7,ce,2,3,"cf-hint",38),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("status",t.registerOrderForm.controls.targetPrice.invalid&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)?"error":"default"),e.xp6(3),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c gi\xe1 t\u1ed1i \u0111a mu\u1ed1n canh (gi\xe1 v\xe9 c\u1ee7a 1 ng\u01b0\u1eddi l\u1edbn \u0111\u1ea1i di\u1ec7n)")("decimal",!1)("negative",!1)("formControl",t.registerOrderForm.controls.targetPrice),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.required)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.minAmount)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.maxAmount)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched))}}function ue(i,l){1&i&&(e.TgZ(0,"div",85),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n "),e.qZA())}function _e(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",91),e.NdJ("click",function(r){e.CHM(t);const a=e.oxw().$implicit,_=e.oxw(5);return e.KtG(_.onRemoveFareTypeOption(r,a))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function ge(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",91),e.NdJ("click",function(r){e.CHM(t);const a=e.oxw().$implicit,_=e.oxw(6);return e.KtG(_.onRemoveFareClassOption(r,a))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(2),e.AsE(" ",n.name," - ",t.name," ")}}function pe(i,l){if(1&i&&(e.ynx(0),e.YNc(1,ge,4,2,"div",88),e.BQk()),2&i){const t=l.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!n.isAllFareClass&&t.isActive)}}function he(i,l){if(1&i&&(e.ynx(0,33),e.YNc(1,_e,4,1,"div",88),e.YNc(2,pe,2,1,"ng-container",89),e.BQk()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function fe(i,l){if(1&i&&(e.TgZ(0,"div",86),e.YNc(1,he,3,2,"ng-container",87),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function me(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",80),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.openFareOptions())}),e.TgZ(2,"div",81),e.YNc(3,ue,2,0,"div",82),e.YNc(4,fe,2,1,"div",83),e.qZA(),e._UZ(5,"cf-icon",84),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("ngIf",!t.registerOrderForm.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.specifyFareClass)}}function ve(i,l){1&i&&e._UZ(0,"cf-icon",92)}function xe(i,l){1&i&&e._UZ(0,"cf-icon",93)}function Ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95)(2,"div",33),e._UZ(3,"cf-icon",96),e.TgZ(4,"span",35),e._uU(5,"Th\xf4ng b\xe1o"),e.qZA()(),e.TgZ(6,"cf-switch",97),e.NdJ("checkedChange",function(r){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onCheckNotify(r))}),e.qZA()(),e.TgZ(7,"div",98),e._uU(8,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n canh v\xe9 tr\u01b0\u1edbc 15 ph\xfat"),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(6),e.Q6J("disabled",t.notifyExpired)("checked",t.registerOrderForm.value.notifyBeforeExpired)}}const Q=function(){return[]};function Oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e._UZ(1,"div",42),e.TgZ(2,"div",11)(3,"div",31)(4,"div",43)(5,"div",33),e._UZ(6,"cf-icon",44),e.TgZ(7,"span",35),e._uU(8,"Th\u1eddi h\u1ea1n canh v\xe9"),e.qZA()(),e.TgZ(9,"cf-label",45),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",46)(13,"cf-input-group",47),e._UZ(14,"cf-icon",48),e.TgZ(15,"input",49,50),e.NdJ("input",function(){e.CHM(t);const r=e.MAs(16);return e.KtG(r.close())})("dateSelect",function(r){e.CHM(t);const a=e.MAs(16);return e.oxw(2).onDateSelected(r),e.KtG(a.close())})("click",function(){e.CHM(t);const r=e.MAs(19),a=e.oxw(2);return e.KtG(a.expireDatePickerClick(r))})("mousedown",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.expireDateFocus(r))}),e.qZA(),e.YNc(17,re,1,1,"cf-hint",38),e.qZA(),e.YNc(18,ne,9,16,"ng-template",null,51,e.W1O),e.TgZ(20,"div",52)(21,"cf-select",53),e.NdJ("selectedChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSelectedTimeExpire())}),e._UZ(22,"cf-icon",54),e.YNc(23,oe,1,1,"cf-hint",38),e.YNc(24,se,1,1,"cf-hint",38),e.qZA()()()()(),e._UZ(25,"div",55),e.TgZ(26,"div",31)(27,"div",56)(28,"div",33),e._UZ(29,"cf-icon",57),e.TgZ(30,"span",35),e._uU(31,"Canh theo gi\xe1"),e.qZA()(),e.TgZ(32,"div",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onChangePrice())}),e._UZ(33,"cf-switch",59),e.qZA()(),e.YNc(34,de,8,8,"div",60),e.qZA(),e._UZ(35,"div",55),e.TgZ(36,"div",31)(37,"div",56)(38,"div")(39,"div",33),e._UZ(40,"cf-icon",61),e.TgZ(41,"span",35),e._uU(42,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(43,"div",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onChangeLowFare())}),e._UZ(44,"cf-switch",59),e.qZA()(),e.YNc(45,me,6,2,"div",10),e.qZA(),e._UZ(46,"div",55),e.TgZ(47,"div",62)(48,"div",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onExpandConfig())}),e.TgZ(49,"div"),e._UZ(50,"cf-icon",64),e.qZA(),e.TgZ(51,"div",65),e._uU(52,"C\xe0i \u0111\u1eb7t n\xe2ng cao"),e.qZA(),e.TgZ(53,"div"),e.YNc(54,ve,1,0,"cf-icon",66),e.YNc(55,xe,1,0,"cf-icon",67),e.qZA()(),e.YNc(56,Ee,9,2,"div",68),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(9),e.Q6J("color","gray-2")("size","small"),e.xp6(1),e.hij(" Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn th\u1eddi h\u1ea1n \u0111\u1ebfn ",t.timeExpire?e.xi3(11,24,t.timeExpire,"dd/MM/yyyy HH:mm"):""," "),e.xp6(3),e.Q6J("status",t.registerOrderForm.controls.dayExpire.invalid&&(t.registerOrderForm.controls.dayExpire.dirty||t.registerOrderForm.controls.dayExpire.touched)?"error":"default"),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate)("maxDate",t.maxDate)("formControl",t.registerOrderForm.controls.dayExpire),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.dayExpire.errors?null:t.registerOrderForm.controls.dayExpire.errors.required)&&(t.registerOrderForm.controls.dayExpire.dirty||t.registerOrderForm.controls.dayExpire.touched)),e.xp6(4),e.Q6J("status",t.registerOrderForm.controls.hoursExpire.invalid&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)?"error":"default")("data",t.timeOption||e.DdM(27,Q))("placeholder","Ch\u1ecdn gi\u1edd k\u1ebft th\xfac")("allowSearch",!0)("formControl",t.registerOrderForm.controls.hoursExpire),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.hoursExpire.errors?null:t.registerOrderForm.controls.hoursExpire.errors.required)&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.hoursExpire.errors?null:t.registerOrderForm.controls.hoursExpire.errors.illegal)&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)),e.xp6(9),e.Q6J("checked",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(10),e.Q6J("checked",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(9),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Te(i,l){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),e._UZ(4,"cf-icon",15)(5,"div",16),e.qZA(),e.TgZ(6,"div",17)(7,"div",18),e._uU(8,"Gi\u1eef ch\u1ed7"),e.qZA(),e.TgZ(9,"div",19),e._uU(10,"Gi\u1eef ch\u1ed7 th\xe0nh c\xf4ng"),e.qZA()()(),e.TgZ(11,"div",20)(12,"div",21),e._uU(13," 2 "),e._UZ(14,"div",22),e.qZA(),e.TgZ(15,"div",23)(16,"div",24),e._uU(17,"Canh v\xe9 r\u1ebb"),e.qZA(),e.TgZ(18,"div",25),e._uU(19,"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb"),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",26),e._uU(22," 3 "),e._UZ(23,"div",27),e.qZA(),e.TgZ(24,"div",28)(25,"div",24),e._uU(26,"Theo d\xf5i"),e.qZA(),e.TgZ(27,"div",25),e._uU(28,"Theo d\xf5i bi\u1ebfn \u0111\u1ed9ng gi\xe1"),e.qZA()()(),e.TgZ(29,"div",20)(30,"div",29),e._uU(31," 4 "),e.qZA(),e.TgZ(32,"div",28)(33,"div",24),e._uU(34,"H\u1ebft h\u1ea1n"),e.qZA(),e.TgZ(35,"div",25),e._uU(36,"C\xf3 th\u1ec3 h\u1ee7y b\u1ea5t k\xec l\xfac n\xe0o"),e.qZA()()()(),e.YNc(37,ee,11,9,"div",30),e.YNc(38,ie,9,2,"div",30),e.YNc(39,Oe,57,28,"div",5),e.qZA()),2&i){const t=e.oxw();e.xp6(37),e.Q6J("ngIf",t.isSuggest),e.xp6(1),e.Q6J("ngIf",!t.isSuggest),e.xp6(1),e.Q6J("ngIf",null==t.pnrOrderData?null:t.pnrOrderData.bookingCode)}}function Ce(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"div",119)(3,"div",120),e._uU(4),e.qZA()(),e.TgZ(5,"div",121),e._UZ(6,"img",122),e.qZA(),e.TgZ(7,"div",123)(8,"div",124),e._uU(9),e.qZA(),e.TgZ(10,"div",125),e._uU(11),e.qZA()(),e.TgZ(12,"div",123)(13,"div",124),e._uU(14),e.qZA(),e.TgZ(15,"div",125),e._uU(16),e.qZA()(),e.TgZ(17,"div",123)(18,"div",124),e._uU(19),e.qZA(),e.TgZ(20,"div",125),e._uU(21),e.qZA()(),e.TgZ(22,"div",126)(23,"div",127)(24,"div"),e._uU(25),e.qZA(),e.TgZ(26,"div",128),e._UZ(27,"div",129)(28,"div",130),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA()(),e.TgZ(31,"div"),e._UZ(32,"cf-icon",131),e.qZA()(),e.TgZ(33,"div",123)(34,"div",124),e._uU(35),e.qZA(),e.TgZ(36,"div",125),e._uU(37),e.qZA()()(),e.TgZ(38,"div",132)(39,"div",133)(40,"div",128)(41,"div",120),e._uU(42),e.qZA()(),e.TgZ(43,"div",121),e._UZ(44,"img",122),e.qZA(),e.TgZ(45,"div",134)(46,"div",124),e._uU(47),e.qZA(),e.TgZ(48,"div",125),e._uU(49),e.qZA()(),e.TgZ(50,"div",123)(51,"div",124),e._uU(52),e.qZA(),e.TgZ(53,"div",125),e._uU(54),e.qZA()()(),e.TgZ(55,"div",135)(56,"div",123)(57,"div",124),e._uU(58),e.qZA(),e.TgZ(59,"div",125),e._uU(60),e.qZA()(),e.TgZ(61,"div",126)(62,"div",127)(63,"div"),e._uU(64),e.qZA(),e.TgZ(65,"div",128),e._UZ(66,"div",129)(67,"div",136),e.qZA(),e.TgZ(68,"div"),e._uU(69,"Bay th\u1eb3ng"),e.qZA()(),e.TgZ(70,"div"),e._UZ(71,"cf-icon",131),e.qZA()(),e.TgZ(72,"div",123)(73,"div",124),e._uU(74),e.qZA(),e.TgZ(75,"div",125),e._uU(76),e.qZA()()()(),e.BQk()),2&i){const t=l.$implicit,n=l.index;e.xp6(4),e.hij(" ",n+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(3),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(5),e.Oqu(t.departure),e.xp6(5),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint),e.xp6(5),e.hij(" ",n+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(4),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(10),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint)}}function ye(i,l){1&i&&e._UZ(0,"div",55)}function be(i,l){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" (",t.child.namePrefix,") ",null==t.child?null:t.child.displayName," - ",null==t.child?null:t.child.birthDay," ")}}function Ae(i,l){if(1&i&&(e.ynx(0),e.YNc(1,ye,1,0,"div",137),e.TgZ(2,"div",138)(3,"div",24),e._uU(4),e.qZA(),e.TgZ(5,"div",139)(6,"div",24),e._uU(7),e.qZA(),e.YNc(8,be,2,3,"div",140),e.qZA()(),e.BQk()),2&i){const t=l.$implicit,n=l.index,r=l.first;e.xp6(1),e.Q6J("ngIf",!r),e.xp6(3),e.hij("",n+1,"."),e.xp6(3),e.AsE("(",t.namePrefix,") ",t.displayName,""),e.xp6(1),e.Q6J("ngIf",t.child)}}function Fe(i,l){if(1&i&&(e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function Ze(i,l){if(1&i&&(e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(2),e.AsE(" ",n.name," - ",t.name," ")}}function De(i,l){if(1&i&&(e.ynx(0),e.YNc(1,Ze,3,2,"div",88),e.BQk()),2&i){const t=l.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!n.isAllFareClass&&t.isActive)}}function Pe(i,l){if(1&i&&(e.ynx(0,33),e.YNc(1,Fe,3,1,"div",88),e.YNc(2,De,2,1,"ng-container",89),e.BQk()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function Me(i,l){if(1&i&&(e.TgZ(0,"div",86),e.YNc(1,Pe,3,2,"ng-container",87),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function ke(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Re(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.registerOrderForm.value.targetPrice)," \u0111 ")}}function Ue(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Ie(i,l){1&i&&(e.TgZ(0,"div",107)(1,"div",108),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",109),e._uU(4," Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}function we(i,l){1&i&&(e.TgZ(0,"div",144),e._uU(1,"B\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u n\xe0y "),e.qZA())}function Se(i,l){if(1&i&&(e.TgZ(0,"div",144),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE("N\u1ebfu canh \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed b\u1eb1ng ",e.lcZ(2,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1 ")}}function Be(i,l){if(1&i&&(e.TgZ(0,"div",141)(1,"div")(2,"div",33),e._UZ(3,"cf-icon",142),e.TgZ(4,"span",35),e._uU(5,"Ph\xed y\xeau c\u1ea7u"),e.qZA()(),e.YNc(6,we,2,0,"div",143),e.YNc(7,Se,3,4,"div",143),e.qZA(),e._UZ(8,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(14);e.xp6(6),e.Q6J("ngIf",t.availableInfo.free),e.xp6(1),e.Q6J("ngIf",!t.availableInfo.free),e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",n)}}function Ne(i,l){if(1&i&&(e.TgZ(0,"div",11)(1,"div",99)(2,"div",99)(3,"div",33),e._UZ(4,"cf-icon",100),e.TgZ(5,"span",35),e._uU(6,"Canh v\xe9 r\u1ebb c\xe1c chuy\u1ebfn bay sau"),e.qZA()(),e.TgZ(7,"div",101),e.YNc(8,Ce,77,23,"ng-container",89),e.TgZ(9,"div",102)(10,"div",19),e._uU(11,"T\u1ed5ng gi\xe1 ban \u0111\u1ea7u"),e.qZA(),e.TgZ(12,"div",103),e._uU(13),e.ALo(14,"number"),e.qZA()()()(),e.TgZ(15,"div",99)(16,"div",33),e._UZ(17,"cf-icon",104),e.TgZ(18,"span",35),e._uU(19,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(20,"div",105),e.YNc(21,Ae,9,5,"ng-container",89),e.qZA()()(),e.TgZ(22,"div",99)(23,"div",33),e._UZ(24,"cf-icon",106),e.TgZ(25,"span",35),e._uU(26,"Th\xf4ng tin y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(27,"div",105)(28,"div",107)(29,"div",108),e._uU(30,"H\u1ea1n canh v\xe9:"),e.qZA(),e.TgZ(31,"div",109),e._uU(32),e.ALo(33,"date"),e.qZA()(),e.TgZ(34,"div",107)(35,"div",108),e._uU(36,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n:"),e.qZA(),e.TgZ(37,"div",109),e.YNc(38,Me,2,1,"div",83),e.YNc(39,ke,2,0,"span",10),e.qZA()(),e.TgZ(40,"div",107)(41,"div",108),e._uU(42,"M\u1ee9c gi\xe1 mong mu\u1ed1n:"),e.qZA(),e.TgZ(43,"div",109),e.YNc(44,Re,3,3,"span",10),e.YNc(45,Ue,2,0,"span",10),e.qZA()(),e.YNc(46,Ie,5,0,"div",110),e.qZA()(),e.YNc(47,Be,9,4,"div",111),e._UZ(48,"div",55),e.TgZ(49,"div",99)(50,"div",33),e._UZ(51,"cf-icon",112),e.TgZ(52,"span",35),e._uU(53,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(54,"div",113)(55,"div",114)(56,"div"),e._UZ(57,"cf-icon",115),e.qZA(),e.TgZ(58,"div")(59,"span",24),e._uU(60,"N\u1ebfu gi\xe1 v\xe9 t\u0103ng,"),e.qZA(),e._uU(61," th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n v\u1ec1 thay \u0111\u1ed5i gi\xe1 mi\u1ec5n ph\xed v\xe0 ti\u1ebfp t\u1ee5c canh \u0111\u1ebfn khi h\u1ebft h\u1ea1n canh v\xe9. "),e.qZA()(),e.TgZ(62,"div",114)(63,"div"),e._UZ(64,"cf-icon",44),e.qZA(),e.TgZ(65,"div")(66,"span",24),e._uU(67,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng canh \u0111\u01b0\u1ee3c v\xe9 r\u1ebb."),e.qZA(),e._uU(68," C\xf3 th\u1ec3 h\u1ee7y canh v\xe9 b\u1ea5t k\xec l\xfac n\xe0o!"),e.qZA()(),e.TgZ(69,"div",114)(70,"div"),e._UZ(71,"cf-icon",116),e.qZA(),e.TgZ(72,"div",24),e._uU(73,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(74,"span",117),e._uU(75,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(76," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",(null==t.pnrOrderData?null:t.pnrOrderData.journeys)||e.DdM(16,Q)),e.xp6(5),e.hij("",e.lcZ(14,11,t.pnrOrderData.totalCharge||0)," \u0111 "),e.xp6(8),e.Q6J("ngForOf",t.pnrOrderData.passengers),e.xp6(11),e.AsE(" ",e.xi3(33,13,t.registerOrderForm.value.dayExpire,"dd/MM/yyyy")," ",t.registerOrderForm.value.hoursExpire," "),e.xp6(6),e.Q6J("ngIf",t.registerOrderForm.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.notifyBeforeExpired),e.xp6(1),e.Q6J("ngIf",t.availableInfo)}}function qe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"button",146),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._uU(2," \u0110\xf3ng "),e.qZA(),e.TgZ(3,"button",147),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._UZ(4,"cf-icon",148),e._uU(5," Quay l\u1ea1i "),e.qZA(),e.TgZ(6,"button",149),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep(r.STEP_ORDER.REVIEW))}),e.TgZ(7,"span"),e._uU(8,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(9,"cf-icon",150),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",t.registerOrderForm.invalid)}}function Ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"button",151),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep(r.STEP_ORDER.CREATE))}),e._UZ(2,"cf-icon",148),e._uU(3," Quay l\u1ea1i "),e.qZA(),e.TgZ(4,"button",149),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onRegisterOrder())}),e._uU(5," X\xe1c nh\u1eadn "),e._UZ(6,"cf-icon",152),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("disabled",t.registerOrderForm.invalid)}}function Je(i,l){1&i&&(e.TgZ(0,"div",154)(1,"span",155),e._uU(2,"Thu ph\xed"),e.qZA(),e._UZ(3,"cf-icon",156),e.qZA())}function Le(i,l){1&i&&(e.TgZ(0,"div",154)(1,"span",155),e._uU(2,"Mi\u1ec5n ph\xed"),e.qZA(),e._UZ(3,"cf-icon",156),e.qZA())}function Qe(i,l){if(1&i&&(e.YNc(0,Je,4,0,"div",153),e.YNc(1,Le,4,0,"div",153)),2&i){const t=e.oxw();e.Q6J("ngIf",!t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.available)}}function Ke(i,l){if(1&i&&(e.TgZ(0,"div",158)(1,"span",159),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",156),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function He(i,l){if(1&i&&(e.TgZ(0,"div",158)(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",156),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function $e(i,l){if(1&i&&(e.YNc(0,Ke,5,4,"div",157),e.YNc(1,He,5,4,"div",157)),2&i){const t=e.oxw();e.Q6J("ngIf",t.availableInfo.free),e.xp6(1),e.Q6J("ngIf",!t.availableInfo.free)}}function Ve(i,l){1&i&&e._UZ(0,"cf-spinner")}var A=(()=>{return(i=A||(A={})).CREATE="CREATE",i.REVIEW="REVIEW",A;var i})();let je=(()=>{class i{constructor(t,n,r,a,_,s,c,g,v,We,ze,Ge,Xe,et){var q;this.ref=t,this.bottomSheetData=n,this.bottomSheetRef=r,this.calendar=_,this._fb=s,this._modal=c,this._route=g,this._cd=v,this._ticketLowFareService=We,this._flightDataService=ze,this._eventLogService=Ge,this._mobileDetectService=Xe,this._bottomSheetService=et,this.isOpen=!1,this.bottomCenter=[{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:0,offsetY:0}],this.timeExpireStr="",this.scheduleTimeOptions=[],this.steps=[{id:1,icon:"check"},{id:2,icon:"unlock"},{id:3,icon:"search"},{id:4,icon:"lock"}],this.currentStep=1,this.isExpand=!1,this.step=A.CREATE,this.MONITOR_TYPE=T.$,this.title="T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",this.STEP_ORDER=A,this.STATUS_ORDER=B.b,this.MAX_TIME_EXECUTE=48,this.isLoading=!1,this.lowerFareClassOptions=[],this.listFareTypeOptions=[],this.searchValueChanged$=new m.x,this.pnrSuggestOptions=[],this.isSuggest=!1,this.multiMinDate=[],this.hoursOption=[],this.minuteOption=[],this.timeOption=[],this.infiniteScrollCount=10,this.isDataEmpty=!1,this.regenerate=!1,this.numOfMonth=1,this.notifyExpired=!1,a.registerIcons([h.YvC,h.KMO,h.TM4,h.RxK,h.Vn9,h.NNX,h.Tas,h.$PG,h.toh,h.rJw,h._hx,h.okA,h.TOh,h.B2I,h.qDv,h.PcQ,h.PSW,h.cnj,h.Lji,h.Nnv,h.tLH,h.esH,h.ZlA,h.UNF,h.SK7]),t&&(this.bookingDetail=t.data.bookingDetail,this.registerOrderDetail=t.data.registerOrderDetail,this.regenerate=t.data.regenerate,this.isSuggest=null!==(q=t.data.isSuggest)&&void 0!==q&&q,this.sourceEvent=t.data.sourceEvent),n&&(this.bookingDetail=n.bookingDetail,this.registerOrderDetail=n.registerOrderDetail,this.regenerate=n.regenerate,this.isSuggest=n.isSuggest,this.sourceEvent=n.sourceEvent),this.minDate=_.getToday(),this.bookingDetail&&!this.regenerate&&(this.handleRegisterOrderData(),this.getAvailableAgent(this.bookingDetail.coOwnerId)),this.regenerate&&this.handleRegenerateRegister()}ngOnInit(){this.initFormGroup(),this.pnrOrderData&&(this.generateTime(),this.getListLowerFareClass(this.pnrOrderData.airline,this.pnrOrderData.journeys[0].fareClass)),this.isSuggest&&this.onSearchPnrSuggest(""),this.searchValueChanged$.pipe((0,O.b)(1e3)).subscribe(t=>{this.pnrSuggestOptions.some(n=>n.bookingCode===t)||this.onSearchPnrSuggest(t)})}initFormGroup(){var t,n,r;this.registerOrderForm=this._fb.group({notifyBeforeExpired:[!0],bookingCode:[(null===(t=this.pnrOrderData)||void 0===t?void 0:t.bookingCode)||"",E.kI.required],monitorType:[(null===(n=this.pnrOrderData)||void 0===n?void 0:n.monitorType)||T.$.PRICE],timeExecute:[this.MAX_TIME_EXECUTE],dayExpire:[null,E.kI.required],hoursExpire:[null,E.kI.required],targetPrice:[(null===(r=this.pnrOrderData)||void 0===r?void 0:r.targetPrice)||0,E.kI.required],specifyFareClass:[null]})}getAvailableAgent(t){this._ticketLowFareService.getInfoAvailableAgent({agentId:t||"",type:P.G.DOWN_FARE_TICKET}).subscribe({next:r=>{"OK"===r.status&&(this.availableInfo=r.data,this.availableSlotData={available:r.data.free,type:r.data.type,amount:r.data.type===P.G.DOWN_FARE_TICKET?r.data.percent:r.data.amountPerPax,currency:r.data.type===P.G.DOWN_FARE_TICKET?r.data.currency:"\u0111"})}})}getListLowerFareClass(t,n){this._ticketLowFareService.getListLowerFareClass({airline:t,fareClass:n}).subscribe({next:a=>{var _,s;"OK"===a.status&&(this.lowerFareClassOptions=(null===(_=a.data.cabin)||void 0===_?void 0:_.flatMap(c=>c.fareType.map(g=>({code:g.code,value:g.description,children:g.fareClass.map(v=>({code:v.code,value:v.name}))}))))||[],this.listFareTypeOptions=(null===(s=a.data.cabin)||void 0===s?void 0:s.flatMap(c=>c.fareType.map(g=>({order:g.order,code:g.code,name:g.description,isActive:!1,isExpand:!1,isAllFareClass:!1,fareTypeSelected:0,totalFareType:g.fareClass.length,fareClass:g.fareClass.map(v=>({order:v.order,code:v.code,name:v.name,isActive:!1}))}))))||[],this.pnrOrderData&&this.pnrOrderData.specifyFareClass&&(this.registerOrderForm.controls.specifyFareClass.setValue(this.pnrOrderData.specifyFareClass||null),this.listFareTypeOptions.forEach(c=>{c.fareClass.forEach(g=>{g.isActive=this.pnrOrderData.specifyFareClass.includes(g.code)}),c.isAllFareClass=c.fareClass.every(g=>g.isActive),c.isActive=c.fareClass.some(g=>g.isActive)})),this._cd.detectChanges())}})}generateTimeArrays(t=0,n=0,r=24,a=60){const _=[];for(let s=t+1;s<r;s++)for(let c=0;c<a;c+=15){const g=s.toString().padStart(2,"0"),v=c.toString().padStart(2,"0");_.push({value:`${g}:${v}`,text:`${g}:${v}`})}return _}generateTime(){var t,n,r;const a=new Date,c=(this.pnrOrderData.journeys[0].departureDateTime.getTime()-a.getTime())/36e5-2,g=Math.min(Math.floor(c),this.MAX_TIME_EXECUTE);a.setHours(a.getHours()+g),this.timeExpire=a,this.maxDate=(0,F.jy)(this.timeExpire),null===(t=this.registerOrderForm)||void 0===t||t.controls.dayExpire.setValue(this.timeExpire),this.timeOption=this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes());const v=(null===(n=this.timeOption[this.timeOption.length-1])||void 0===n?void 0:n.value)||"";null===(r=this.registerOrderForm)||void 0===r||r.controls.hoursExpire.setValue(v),this._cd.detectChanges()}handleRegisterOrderData(){var t,n;const r=(null===(t=this.bookingDetail.passengers)||void 0===t?void 0:t.map(s=>({key:s.key||"",parentKey:s.parentKey||"",firstName:s.firstName||"",lastName:s.lastName||"",displayName:`${s.lastName} ${s.firstName}`||"",birthDay:s.birthday?f(s.birthday).format("DD/MM/YYYY"):"",type:s.type||"",namePrefix:"UNDEFINE"===s.namePrefix?(0,x.A)(s.gender):s.namePrefix,gender:s.gender})))||[],a=(null==r?void 0:r.filter(s=>"INF"===s.type.toUpperCase()))||[],_=(null==r?void 0:r.filter(s=>"INF"!==s.type.toUpperCase()))||[];a.forEach(s=>{var c;const g=_.find(v=>v.key===s.parentKey);g&&(g.child=Object.assign(Object.assign({},s),{namePrefix:"MALE"===(null===(c=s.gender)||void 0===c?void 0:c.toUpperCase())?"B\xc9 TRAI":"B\xc9 G\xc1I"}))}),this.pnrOrderData={airline:this.bookingDetail.airline,bookingCode:this.bookingDetail.bookingCode,passengers:_||[],monitorType:T.$.PRICE,specifyFareClass:[],journeys:(null===(n=this.bookingDetail.journeys)||void 0===n?void 0:n.map(s=>({airline:s.airline,airlineName:s.airlineName,airlineLogo:s.airlineLogo,flightNumber:`${s.airline}${s.segments[0].flightNumber}`,startPoint:s.startPoint,endPoint:s.endPoint,startTime:f(s.startTime).format("HH:mm"),endTime:f(s.endTime).format("HH:mm"),departure:f(s.startTime).format("DD/MM/YYYY"),departureDateTime:s.startTime,fareClass:"QH"===s.airline?`${s.segments[0].fareClass}-${s.segments[0].fareBasic}`:s.segments[0].fareClass,duration:s.segments[0].duration,durationStr:s.segments[0].shortDuration})))||[],targetPrice:this.bookingDetail.targetPriceOrder||0,totalCharge:this.bookingDetail.totalCharge||0+this.bookingDetail.totalServiceFee||0},this.totalFare=this.pnrOrderData.targetPrice}handleRegenerateRegister(){var t,n;this.pnrOrderData={airline:this.registerOrderDetail.airline,bookingCode:this.registerOrderDetail.bookingCode,passengers:this.registerOrderDetail.passengers||[],monitorType:this.registerOrderDetail.monitorType,specifyFareClass:(null===(t=this.registerOrderDetail.monitors[0])||void 0===t?void 0:t.specifyFareClass)||[],journeys:(null===(n=this.registerOrderDetail.journeys)||void 0===n?void 0:n.map(r=>{var a;return{airline:r.airline,airlineName:r.airlineName,airlineLogo:r.airlineLogo,flightNumber:r.flightNumber,startPoint:r.startPoint,endPoint:r.endPoint,startTime:f(r.startTime).format("HH:mm"),endTime:f(r.endTime).format("HH:mm"),departure:f(r.startTime).format("DD/MM/YYYY"),departureDateTime:r.startTime,fareClass:(null===(a=this.registerOrderDetail.monitors[0])||void 0===a?void 0:a.currentFareClass)||"",duration:r.segments[0].shortDuration,durationStr:r.segments[0].shortDuration}}))||[],targetPrice:this.registerOrderDetail.targetPrice||0,totalCharge:this.registerOrderDetail.totalCharge},this.getAvailableAgent(this.registerOrderDetail.ownerId||"")}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}onExpandConfig(){this.registerOrderForm.controls.targetPrice.valid&&(this.isExpand=!this.isExpand)}onChangeStep(t){t===A.REVIEW&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u canh v\xe9 r\u1ebb"),this.step=t}checkDirtyNumber(t,n){this.registerOrderForm.controls[t].setErrors(n<=0?{minAmount:!0}:n>this.totalFare?{maxAmount:!0}:n?null:{required:!0})}onRegisterOrder(){if(this.registerOrderForm.markAllAsTouched(),this.registerOrderForm.invalid)return;const t=this.registerOrderForm.value,n={advanceSetting:{notifyBeforeExpired:t.notifyBeforeExpired},airline:this.pnrOrderData.airline,fareMonitor:{expectLowerFareClass:this.pnrOrderData.journeys[0].fareClass,specifyFareClass:t.specifyFareClass||[]},priceMonitor:{targetPrice:t.targetPrice},pnr:this.pnrOrderData.bookingCode,timeExpire:f(t.dayExpire).format("YYYY-MM-DD")+`T${t.hoursExpire}:00`,monitorType:t.monitorType,stateClientFree:this.availableInfo.free};this._eventLogService.captureRegisterDownFare({hasPNR:this.isSuggest?0:1,airline:this.pnrOrderData.airline,source:this.getSourceEvent(),mode:t.monitorType===T.$.FARE?1:0,isDuplicated:this.regenerate?1:0,createdDate:f().format("YYYY-MM-DD HH:mm:ss")}),this.isLoading=!0,this._ticketLowFareService.registerOrder(n).pipe((0,C.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var a,_;if("OK"===r.status){let s="",c="";if(this.availableInfo.free?(c="well_done",s=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u canh v\xe9 r\u1ebb <strong>#${r.data.code}</strong> cho m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`):(c="success",s=`<div>Y\xeau c\u1ea7u canh v\xe9 r\u1ebb <strong>#${r.data.code}</strong> cho m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`),this._mobileDetectService.isMobile()){const g=this._bottomSheetService.open(b.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",body:s,okText:"Xem danh s\xe1ch",cancelText:"\u0110\xf3ng",hasIcon:!0,status:c}});g.containerInstance._rightButtonClick.subscribe(()=>{g.dismiss()}),g.afterDismissed().subscribe(v=>{v?(this._route.navigate(["admin/manage-pnr-orders"]),this.bottomSheetRef.dismiss(!0)):this.bottomSheetRef.dismiss(!1)})}else this._modal.open(N.V,{title:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",content:s,status:c,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:v=>{v.data?(this.ref.close(!0),this.isSuggest||this._route.navigate(["admin/manage-pnr-orders"])):this.ref.close(!1)}})}else if("TPS-TLF12"===r.objectError.errorCode)if(this.availableInfo.free=!1,this._mobileDetectService.isMobile()){const s=this._bottomSheetService.open(b.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"B\u1ea1n \u0111\xe3 \u0111\u1ea1t gi\u1edbi h\u1ea1n 2 y\xeau c\u1ea7u mi\u1ec5n ph\xed. Y\xeau c\u1ea7u n\xe0y l\xe0 c\xf3 <strong>Thu ph\xed</strong>. B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c y\xeau c\u1ea7u canh v\xe9 r\u1ebb kh\xf4ng?",okText:"X\xe1c nh\u1eadn",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"info"}});s.containerInstance._rightButtonClick.subscribe(()=>{s.dismiss()}),s.afterDismissed().subscribe(c=>{c&&this.onRegisterOrder()})}else this._modal.open(b.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"B\u1ea1n \u0111\xe3 \u0111\u1ea1t gi\u1edbi h\u1ea1n 2 y\xeau c\u1ea7u mi\u1ec5n ph\xed. Y\xeau c\u1ea7u n\xe0y l\xe0 c\xf3 <strong>Thu ph\xed</strong>. B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c y\xeau c\u1ea7u canh v\xe9 r\u1ebb kh\xf4ng?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:c=>{c.data&&this.onRegisterOrder()}});else{let s="Xem danh s\xe1ch";s="TPS-TLF006"===r.objectError.errorCode?"Qu\u1ea3n l\xfd canh v\xe9":"Canh v\xe9 kh\xe1c";const c=(null===(_=null===(a=r.objectError)||void 0===a?void 0:a.errorDescription)||void 0===_?void 0:_.vi)||`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`;if(this._mobileDetectService.isMobile()){const g=this._bottomSheetService.open(b.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:c,okText:s,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});g.containerInstance._rightButtonClick.subscribe(()=>{g.dismiss()}),g.afterDismissed().subscribe(v=>{v?"TPS-TLF006"===r.objectError.errorCode?(this.bottomSheetRef.dismiss(!0),this._route.navigate(["admin/manage-pnr-orders"])):this.onRegisterNewPnrOrder():this.bottomSheetRef.dismiss(!1)})}else this._modal.open(N.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:c,status:"error",cancelText:"\u0110\xf3ng",okText:s}).afterClosed$.subscribe({next:v=>{v.data&&("TPS-TLF006"===r.objectError.errorCode?(this.ref.close(!0),this._route.navigate(["admin/manage-pnr-orders"])):this.onRegisterNewPnrOrder())}})}},error:()=>{const r="Canh v\xe9 kh\xe1c";if(this._mobileDetectService.isMobile()){const a=this._bottomSheetService.open(b.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:`<div>M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.</div>`,okText:r,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});a.containerInstance._rightButtonClick.subscribe(()=>{a.dismiss()}),a.afterDismissed().subscribe(_=>{_?this.onRegisterNewPnrOrder():this.bottomSheetRef.dismiss(!1)})}else this._modal.open(N.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:`<div>M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.</div>`,status:"error",cancelText:"\u0110\xf3ng",okText:r}).afterClosed$.subscribe({next:_=>{_.data&&this.onRegisterNewPnrOrder()}})}})}getSourceEvent(){switch(this.sourceEvent){case"BOOKING_SUCCESS":return 0;case"BOOKING_DETAIL":return 1;case"SUGGEST":return 2;case"HEADER_MANAGE":return 3;case"EMPTY_STATE":return 4;case"REGENERATE":return 5;default:return-1}}onRegisterNewPnrOrder(){this.isSuggest=!0,this.step=A.CREATE,this.pnrOrderData={bookingCode:"",airline:"",monitorType:T.$.PRICE,specifyFareClass:[],passengers:[],journeys:[],targetPrice:0,totalCharge:0},this.onSearchPnrSuggest(""),this.registerOrderForm.reset(),this.registerOrderForm.pacthValue({notifyBeforeExpired:!0})}onChangeLowFare(){if(this.registerOrderForm.value.monitorType===T.$.PRICE)if(this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(b.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(n=>{n&&(this.registerOrderForm.controls.monitorType.setValue(T.$.FARE),this.registerOrderForm.controls.specifyFareClass.setValue(null),this.registerOrderForm.controls.specifyFareClass.setValidators([E.kI.required]),this.registerOrderForm.controls.specifyFareClass.updateValueAndValidity(),this.registerOrderForm.controls.targetPrice.setErrors(null))})}else this._modal.open(b.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:n=>{n.data&&(this.registerOrderForm.controls.monitorType.setValue(T.$.FARE),this.registerOrderForm.controls.specifyFareClass.setValue(null),this.registerOrderForm.controls.specifyFareClass.setValidators([E.kI.required]),this.registerOrderForm.controls.specifyFareClass.updateValueAndValidity(),this.registerOrderForm.controls.targetPrice.setErrors(null))}})}onChangePrice(){var t;if(this.registerOrderForm.value.monitorType===T.$.FARE&&null!==(t=this.registerOrderForm.value.specifyFareClass)&&void 0!==t&&t.length)if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(b.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(r=>{r&&(this.registerOrderForm.controls.monitorType.setValue(T.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([E.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null))})}else this._modal.open(b.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.registerOrderForm.controls.monitorType.setValue(T.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([E.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null))}});else this.registerOrderForm.controls.monitorType.setValue(T.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([E.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null)}onCheckNotify(t){this.registerOrderForm.controls.notifyBeforeExpired.setValue(t)}onSearchPnrSuggest(t){this._ticketLowFareService.searchSuggestPnrMonitorLowFare({pnrSearch:t}).subscribe({next:r=>{if("OK"===r.status&&r.data){(_=>{this.pnrSuggestOptions=(null==_?void 0:_.map(s=>({bookingCode:s.bookingCode,airline:s.airline,ownerId:s.ownerId,monitorType:T.$.PRICE,specifyFareClass:[],passengers:s.passengers.map(c=>({key:c.key,parentKey:c.parentKey,firstName:c.firstName,lastName:c.lastName,displayName:`${c.lastName} ${c.firstName}`,birthDay:"",type:c.type,namePrefix:c.namePrefix,gender:c.gender})),journeys:s.journeys.map(c=>({airline:s.airline,airlineName:this._flightDataService.getAirlineNameByCode(s.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(s.airline),flightNumber:`${s.airline}${c.segments[0].flightNumber}`,startPoint:c.startPoint,endPoint:c.endPoint,startTime:f(c.departTime).format("HH:mm"),endTime:f(c.arrivalTime).format("HH:mm"),departure:f(c.departTime).format("DD/MM/YYYY"),departureDateTime:f(c.departTime).toDate(),fareClass:"QH"===s.airline?`${c.segments[0].fareClass}-${c.segments[0].fareBasic}`:c.segments[0].fareClass,duration:"",durationStr:(0,M.N)(c.duration)})),targetPrice:s.totalFare,totalCharge:s.totalFareCharge||0+s.totalServiceFee||0})))||[],this.isDataEmpty=0===this.pnrSuggestOptions.length})(r.data.pnrSearch?r.data.pnrSearchResults:r.data.prnSuggest)}else this.isDataEmpty=!0;this.isDataEmpty&&t&&this.registerOrderForm.controls.bookingCode.setErrors({invalid:!0}),this._cd.detectChanges()},error:()=>{this.isDataEmpty&&t&&this.registerOrderForm.controls.bookingCode.setErrors({invalid:!0})}})}onSelectedPnr(t){this.getAvailableAgent(t.ownerId||""),this.getListLowerFareClass(t.airline,t.journeys[0].fareClass),this.pnrOrderData=t,this.totalFare=t.targetPrice,this.registerOrderForm.controls.targetPrice.setValue(t.targetPrice),this.generateTime(),this.pnrSuggestOptions.find(r=>r.bookingCode===t.bookingCode)||this.pnrSuggestOptions.unshift(t)}onSearchValueChange(t){this.registerOrderForm.controls.bookingCode.setErrors(t?null:{required:!0}),this.searchValueChanged$.next(t)}click(t){this.isOpen=!this.isOpen,t.stopPropagation()}onSelectedTimeExpire(){const t=this.registerOrderForm.value,n=new Date(f(t.dayExpire).format("YYYY-MM-DD")+`T${t.hoursExpire}:00`),a=new Date((new Date).getTime()+9e5);this.notifyExpired=n.getTime()<a.getTime(),this.registerOrderForm.controls.notifyBeforeExpired.setValue(!this.notifyExpired)}onDateSelected(t){var n;const r=f(t).format("DD/MM/YYYY"),a=f(new Date).format("DD/MM/YYYY"),_=f(this.timeExpire).format("DD/MM/YYYY");this.timeOption=r===a?this.generateTimeArrays((new Date).getHours(),(new Date).getMinutes(),24,60):r===_?this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes()):this.generateTimeArrays(0,0,24,60),(null===(n=this.timeOption)||void 0===n?void 0:n.map(c=>c.value).includes(this.registerOrderForm.controls.hoursExpire.value))?this.registerOrderForm.controls.hoursExpire.setErrors(null):(this.registerOrderForm.controls.hoursExpire.setErrors({illegal:!0}),this.registerOrderForm.markAllAsTouched())}onCheckedAll(t){var n,r;if(t){const a=(null===(r=null===(n=this.lowerFareClassOptions)||void 0===n?void 0:n.flatMap(_=>_.children))||void 0===r?void 0:r.map(_=>null==_?void 0:_.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(a)}else this.registerOrderForm.controls.specifyFareClass.setValue(null)}openFareOptions(){const t=this.listFareTypeOptions.every(n=>n.isActive);if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(J.X,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}});n.containerInstance._rightButtonClick.subscribe(()=>n.dismiss()),n.afterDismissed().subscribe({next:r=>{var a;r&&(this.listFareTypeOptions=r),n.dismiss();const _=(null===(a=this.listFareTypeOptions)||void 0===a?void 0:a.flatMap(s=>s.fareClass).filter(s=>s.isActive).map(s=>s.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(_||null)}})}else this._modal.open(J.X,{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}).afterClosed$.subscribe(r=>{var a;r.data&&(this.listFareTypeOptions=r.data);const _=(null===(a=this.listFareTypeOptions)||void 0===a?void 0:a.flatMap(s=>s.fareClass).filter(s=>s.isActive).map(s=>s.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(_||null)})}onRemoveFareTypeOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.isAllFareClass=!1,n.fareClass.forEach(r=>r.isActive=!1),this.handleFareClassOption()}onRemoveFareClassOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,this.handleFareClassOption()}handleFareClassOption(){var t;if(this.listFareTypeOptions.every(r=>!r.isActive))this.registerOrderForm.controls.specifyFareClass.setValue(null);else{const r=(null===(t=this.listFareTypeOptions)||void 0===t?void 0:t.flatMap(a=>a.fareClass).filter(a=>a.isActive).map(a=>a.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(r||null)}}scrollDown(){this.numOfMonth=this.numOfMonth+4}expireDatePickerClick(t){if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(t,{headerTitle:"Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:""});n.containerInstance._rightButtonClick.subscribe(()=>n.dismiss()),n.afterDismissed().subscribe(r=>{var a;r||null===(a=this.registerOrderForm)||void 0===a||a.controls.dayExpire.setValue(null)})}}onMobileDatePickerOK(){var t,n,r;this._bottomSheetService.dismiss(!0),null===(t=this.registerOrderForm)||void 0===t||t.controls.dayExpire.setValue(null===(n=this.registerOrderForm)||void 0===n?void 0:n.controls.dayExpire.value),this.onDateSelected(null===(r=this.registerOrderForm)||void 0===r?void 0:r.controls.dayExpire.value)}expireDateFocus(t){if(this._mobileDetectService.isMobile())return t.preventDefault(),!1}onCloseDatePicker(){this._bottomSheetService.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L.gb,8),e.Y36(R.Rr,8),e.Y36(R.Zu,8),e.Y36(h.KNP),e.Y36(F.jH),e.Y36(E.qu),e.Y36(L.oE),e.Y36(H.F0),e.Y36(e.sBO),e.Y36($.s),e.Y36(V.G),e.Y36(j.x),e.Y36(W.L),e.Y36(R.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["register-pnr-order"]],standalone:!0,features:[e.jDz],decls:16,vars:6,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","flex-1","overflow-auto"],["class","flex flex-col gap-y-5",4,"ngIf"],[1,"p-6"],["class","flex justify-end gap-x-2 md:justify-between",4,"ngIf"],["availableSlotRef",""],["availableSlotFeeRef",""],[4,"ngIf"],[1,"flex","flex-col","gap-y-5"],[1,"flex","justify-around","items-center","md:hidden"],[1,"flex","flex-col","gap-y-3","justify-center","items-center"],[1,"relative","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-secondary-7-4","text-white","bg-neutral-white"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"absolute","w-[120px]","h-[1px]","bg-secondary-7-4","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","gap-y-"],[1,"text-express-md","text-neutral-gray-6"],[1,"text-body-sm","text-neutral-gray-4"],[1,"flex","flex-col","items-center","gap-y-3"],[1,"relative","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","bg-secondary-7-4","text-white"],[1,"absolute","w-[126px]","h-[1px]","bg-neutral-gray-3","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","text-neutral-gray-6"],[1,"text-express-md"],[1,"text-body-sm"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3","text-neutral-gray-3","bg-neutral-white"],[1,"absolute","w-[136px]","h-[1px]","bg-neutral-gray-3","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","text-neutral-gray-4"],[1,"z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3","text-neutral-gray-3","bg-neutral-white"],["class","flex flex-col gap-y-2.5",4,"ngIf"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],["textField","bookingCode","valueField","bookingCode",1,"!max-w-none","w-full",3,"status","data","placeholder","formControl","allowSearch","isEmpty","onSearch","selectedChange"],["icon","search","size","small"],["cfHint","",3,"hint",4,"ngIf"],[3,"availableSlotData","content"],["cfHint","",3,"hint"],[1,"text-heading-lg"],[1,"w-full","h-[1px]","bg-neutral-gray-1","md:hidden"],[1,"flex","gap-x-2","items-center","md:flex-col","md:gap-y-2","md:items-baseline","md:justify-start"],["icon","clock","size","small"],[3,"color","size"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"!w-1/2","md:!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","maxDate","formControl","input","dateSelect","click","mousedown"],["dateFrom","cfDatepicker"],["datepickerBottomSheet",""],[1,"!w-1/2","md:!w-full"],["textField","text","valueField","value",1,"!max-w-none","md:!max-w-full",3,"status","data","placeholder","allowSearch","formControl","selectedChange"],["cfHeadIcon","","icon","clock","size","small"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","justify-between","items-start"],["icon","price_down","size","small"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],["icon","seat","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded"],[1,"py-[9px]","px-[14px]","flex","items-center","gap-x-2","cursor-pointer",3,"click"],["icon","filter","size","small"],[1,"flex-1"],["icon","plus","size","small",4,"ngIf"],["icon","remove","size","small",4,"ngIf"],["class","p-4 border-t border-neutral-gray-2",4,"ngIf"],[1,"flex","w-full","flex-col","justify-between"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","formControl","maxDate","fromDate","displayMonthsOffset"],[1,"p-6","w-full","bg-neutral-white"],[1,"flex","gap-x-4"],["cf-button","","type","secondary",1,"justify-center","w-full",3,"click"],["cf-button","",1,"justify-center","w-full",3,"disabled","click"],[1,""],[1,"!w-full",3,"status"],["cfLabel",""],["size","medium",3,"placeholder","decimal","negative","formControl","ngModelChange"],[1,"flex","justify-between","items-center","border","border-[#CCCCCC]","rounded","mt-2","mb-2","cursor-pointer","p-2",3,"click"],["id","faresgroup",1,"flex","flex-wrap","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],["class","flex items-center gap-2 flex-wrap",4,"ngIf"],["icon","chevron_down","size","small",1,"cursor-pointer"],[1,"text-neutral-gray-4","text-body-md-short"],[1,"flex","items-center","gap-2","flex-wrap"],["class","flex items-center gap-x-2",4,"ngFor","ngForOf"],["class","border border-neutral-gray-1 flex items-center gap-x-2 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"border","border-neutral-gray-1","flex","items-center","gap-x-2","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",3,"click"],["icon","plus","size","small"],["icon","remove","size","small"],[1,"p-4","border-t","border-neutral-gray-2"],[1,"flex","items-center","justify-between","gap-x-2"],["icon","notification","size","small",1,"inline-block"],[3,"disabled","checked","checkedChange"],[1,"text-body-md","pl-6"],[1,"flex","flex-col","gap-y-4"],["icon","plane","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded-lg","p-3","flex","flex-col","gap-y-4"],[1,"flex","gap-x-4","justify-end","items-center","border-t","border-neutral-gray-2","pt-2"],[1,"min-w-[104px]","text-heading-sm","text-right"],["icon","users","size","small"],[1,"border","border-dashed","border-neutral-gray-2","rounded-lg","p-3","flex","flex-col","gap-y-2"],["icon","clipboard_list","size","small"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3","md:flex-col"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","text-express-md","text-neutral-gray-6"],["class","p-3 border-b border-neutral-gray-1 flex gap-x-3 md:flex-col",4,"ngIf"],["class","flex items-start justify-between gap-x-2",4,"ngIf"],["icon","circle_information","size","small"],[1,"flex","flex-col","gap-y-2","text-body-md-short"],[1,"flex","gap-x-3"],["icon","price_up","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"flex","justify-between","gap-x-3","md:hidden"],[1,"flex","items-center","mr-4"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"hidden","md:flex","flex-col","gap-y-3"],[1,"flex","justify-between","gap-x-3"],[1,"flex-1","flex","flex-col","items-start"],[1,"flex","justify-end","gap-x-3"],[1,"w-[66px]","h-[1px]","bg-neutral-gray-3"],["class","w-full h-[1px] bg-neutral-gray-1",4,"ngIf"],[1,"flex","gap-x-2","justify-start"],[1,"flex","flex-col","gap-y-2"],["class","text-body-sm",4,"ngIf"],[1,"flex","items-start","justify-between","gap-x-2"],["icon","coupon","size","small",1,"inline-block"],["class","text-body-md pl-6 text-neutral-gray-4",4,"ngIf"],[1,"text-body-md","pl-6","text-neutral-gray-4"],[1,"flex","justify-end","gap-x-2","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","md:hidden",3,"click"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","hidden","md:flex",3,"click"],["icon","chevron_left","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],["class","px-2.5 py-1 rounded bg-black bg-opacity-30 flex items-center gap-x-2 cursor-default",4,"ngIf"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"],["icon","circle_help","size","small",1,"text-neutral-white"],["class","inline-flex gap-x-1 items-center whitespace-nowrap text-express-md text-neutral-white px-2 py-1 rounded bg-black bg-opacity-30",4,"ngIf"],[1,"inline-flex","gap-x-1","items-center","whitespace-nowrap","text-express-md","text-neutral-white","px-2","py-1","rounded","bg-black","bg-opacity-30"],[1,"line-through"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Te,40,3,"div",5),e.YNc(7,Ne,77,17,"div",5),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,qe,10,1,"div",7),e.YNc(10,Ye,7,1,"div",7),e.qZA()(),e.YNc(11,Qe,2,2,"ng-template",null,8,e.W1O),e.YNc(13,$e,2,2,"ng-template",null,9,e.W1O),e.YNc(15,Ve,1,0,"cf-spinner",10)),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(3),e.Q6J("ngIf",n.step===n.STEP_ORDER.CREATE),e.xp6(1),e.Q6J("ngIf",n.step===n.STEP_ORDER.REVIEW),e.xp6(2),e.Q6J("ngIf","CREATE"===n.step),e.xp6(1),e.Q6J("ngIf",n.step===n.STEP_ORDER.REVIEW),e.xp6(5),e.Q6J("ngIf",n.isLoading))},dependencies:[y.ez,y.sg,y.O5,y.JJ,y.uU,h.AxE,h.Sm8,D.N8,D.Xq,w.q,E.u5,E.Fj,E.JJ,E.UX,E.oH,S.I,o.j$,o.ND,o.BN,o.lt,b.OR,F.Cs,I.f,U.b,k.m,p.Rq,p.Ry,R.DW,F._o,K._],encapsulation:2}),i})()}}]);