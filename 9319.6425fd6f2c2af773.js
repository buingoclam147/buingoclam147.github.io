"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[9319],{89319:(w,S,g)=>{g.r(S),g.d(S,{AddOnBaggageModalComponent:()=>Y,AddOnSeatModalComponent:()=>H,ControlErrorPipe:()=>In,PassengerInfoPageComponent:()=>Sn});var v=g(36895),h=g(24006),f=g(83700),b=g(87683),x=g(88516),m=g(72506),T=g(44143),M=g(74713),y=g(45393),D=g(93426),U=g(57085),J=g(48042),ie=g(34541),ae=g(7453),B=g(40899),L=g(35650),Q=g(43201),q=g(28746),P=g(37094),F=g(62331),e=g(94650),K=g(4482),z=g(35991),oe=g(36634),O=g(97579),G=g(9381);function se(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"cf-add-on-baggage",13),e.NdJ("baggageSelectedChange",function(a){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onBaggageSelected(a,r.journeys))}),e.qZA(),e.BQk()}if(2&i){const t=l.$implicit,n=l.index;e.xp6(1),e.Q6J("passengerIndex",n)("passenger",t)("listJourney",t.journeys)}}function re(i,l){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,se,2,3,"ng-container",12),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.dataBaggageInput)}}function le(i,l){if(1&i&&e._UZ(0,"cf-confirm-add-on",14),2&i){const t=e.oxw(2);e.Q6J("serviceSelected",t.serviceSelected)}}function ce(i,l){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,re,2,1,"div",9),e.YNc(2,le,1,1,"ng-template",null,10,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf","addon"===n.mode)("ngIfElse",t)}}function de(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton"),e.qZA())}const $=function(i){return{"opacity-50 cursor-default pointer-events-none":i}};function ge(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15)(2,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onClearBaggage())}),e._UZ(3,"cf-icon",17),e.TgZ(4,"span"),e._uU(5,"H\u1ee7y d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(6,"div",18)(7,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close())}),e._uU(8," \u0110\xf3ng "),e.qZA(),e.TgZ(9,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),o=e.MAs(12);return e.KtG(a.onAddonBaggage(o))}),e._UZ(10,"cf-icon",21),e.TgZ(11,"span"),e._uU(12,"Th\u1ef1c hi\u1ec7n"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(2,$,!t.hasBaggageSelected)),e.xp6(7),e.Q6J("ngClass",e.VKq(4,$,!t.isEnableAddBaggage()))}}function ue(i,l){1&i&&e._UZ(0,"cf-icon",26)}function pe(i,l){1&i&&e._UZ(0,"cf-icon",26)}function fe(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",22)(2,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onReview())}),e._uU(3," Ki\u1ec3m tra l\u1ea1i "),e.YNc(4,ue,1,0,"cf-icon",24),e.qZA(),e.TgZ(5,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._UZ(6,"cf-icon",21),e._uU(7," X\xe1c nh\u1eadn "),e.YNc(8,pe,1,0,"cf-icon",24),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}function he(i,l){1&i&&e._UZ(0,"cf-icon",26)}function me(i,l){1&i&&e._UZ(0,"cf-icon",26)}function _e(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._UZ(2,"cf-confirm-add-on",14),e.qZA(),e.TgZ(3,"div",29)(4,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onReview())}),e._uU(5," Ki\u1ec3m tra l\u1ea1i "),e.YNc(6,he,1,0,"cf-icon",24),e.qZA(),e.TgZ(7,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._UZ(8,"cf-icon",21),e._uU(9," X\xe1c nh\u1eadn "),e.YNc(10,me,1,0,"cf-icon",24),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}function ve(i,l){1&i&&e._UZ(0,"cf-spinner")}let Y=(()=>{class i{constructor(t,n,a,o,r,s,u,d,c,p,_){this.cfIconRegister=t,this._bookFlightService=n,this._manageBookingService=a,this._addOnBaggageDataProvider=o,this.ref=r,this.bottomSheetData=s,this.bottomSheetRef=u,this._toastService=d,this._modal=c,this._mobileDetectService=p,this._bottomSheetService=_,this.dataBaggageInput=[],this.dataBaggageSource=[],this.mode="addon",this.hasBaggageSelected=!1,this.isLoading=!1,this.isSkeleton=!1,this.isChangeBag=!1,t.registerIcons([m.UNF,m.Hge,m.B2I,m.PcQ]),r&&(this.dataBaggageInput=r.data.dataBaggageInput,this.addonBaggageReq=r.data.addonBaggageReq,this.type=r.data.type,this.bookingInfo=r.data.bookingInfo),s&&(this.dataBaggageInput=s.dataBaggageInput,this.addonBaggageReq=s.addonBaggageReq,this.type=s.type,this.bookingInfo=s.bookingInfo),this.dataBaggageSource=this.dataBaggageInput.map(C=>Object.assign(Object.assign({},C),{journeys:C.journeys.map(N=>Object.assign(Object.assign({},N),{baggageSelected:Object.assign({},N.baggageSelected)}))}))}ngOnInit(){this.loadBaggage(),this.hasBaggageSelected=this.dataBaggageInput.some(t=>t.journeys.some(n=>n.baggageSelected.baggageKey))}checkHasBaggage(){this.hasBaggageSelected=this.dataBaggageInput.some(t=>t.journeys.some(n=>n.baggageSelected.baggageKey))}proccessDataApi(t){if(t.every(n=>"ERROR"===n.status))return this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin h\xe0nh l\xfd",sticky:!1}),void this.ref.close(!1);this.dataBaggageInput.forEach(n=>{n.journeys.forEach((a,o)=>{var r,s;const u=t.find(d=>{var c,p;return a.flight===(null===(c=d.flight)||void 0===c?void 0:c.airline.concat(" ",null===(p=d.flight)||void 0===p?void 0:p.flightNumber))});if(u){const d=null!==(s=null===(r=u.bagOptions)||void 0===r?void 0:r.map(c=>{var p,_,C;const N=c.chargeBreakdown.filter(Z=>"ADULT"===Z.passengerType&&["ADULT","ADT","adult"].includes(n.passengerType)||"CHILD"===Z.passengerType&&["CHILD","CHD","child"].includes(n.passengerType)||"ALL"===Z.passengerType).reduce((Z,j)=>Z+j.feeCharge.charge.total,0);return{ssrCode:null===(p=c.baggageInfo.infos)||void 0===p?void 0:p.code,unit:null===(_=c.baggageInfo.infos)||void 0===_?void 0:_.unit,weight:null===(C=c.baggageInfo.infos)||void 0===C?void 0:C.weight,baggageKey:c.key,baggageName:c.baggageInfo.infos.name||c.baggageInfo.infos.code,baggageDisplay:(c.baggageInfo.infos.name||c.baggageInfo.infos.code)+" - "+new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(N),totalCharge:N}}))&&void 0!==s?s:[];a.containerKey=u.key,d.unshift({baggageKey:"",baggageDisplay:"Kh\xf4ng mua d\u1ecbch v\u1ee5 h\xe0nh l\xfd"}),a.baggageOptions=d}else a.error=!0,a.containerKey="",a.baggageOptions=[]})})}baggageObservable(){return"get_baggage"===this.type?this._bookFlightService.getBaggage(this.addonBaggageReq):"baggage_addon"===this.type?this._manageBookingService.getListBaggageAddOn(this.addonBaggageReq):null}isEnableAddBaggage(){return!(!this.isChangeBag||"baggage_addon"===this.type&&!this.hasBaggageSelected||"get_baggage"===this.type&&!this.hasBaggageSelected)}loadBaggage(){var t;this.isSkeleton=!0,null===(t=this.baggageObservable())||void 0===t||t.pipe((0,q.x)(()=>this.isSkeleton=!1)).subscribe({next:n=>{"OK"===n.status?this.proccessDataApi(n.data):this.ref.close(n)},error:n=>{console.log(n)}})}close(){"baggage_addon"===this.type?this._mobileDetectService.isMobile()?this._bottomSheetService.dismiss():this.ref.close(!1):(this.dataBaggageInput=this.dataBaggageSource,this._mobileDetectService.isMobile()?this.bottomSheetRef.dismiss(this.dataBaggageSource):this.ref.close(this.dataBaggageSource))}onAddonBaggage(t){if(this.hasBaggageSelected){this.mode="confirm";const n=this.dataBaggageInput.map(r=>({baggageSelected:r.journeys.map(s=>({leg:s.leg,airlineLogo:s.airlineLogo,airlineName:s.airlineName,journeyKey:s.journeyKey,segmentKey:s.containerKey,departDate:s.startTime,flight:`${s.startCode} - ${s.endCode}`,flightNumber:s.flightNumber,serviceKey:s.baggageSelected.baggageKey,serviceName:s.baggageSelected.baggageName,passengerName:r.passengerName,passengerKey:r.passengerKey,unitPrice:s.baggageSelected.totalCharge,startTime:s.startTime,ssrCode:s.baggageSelected.ssrCode,unit:s.baggageSelected.unit,weight:s.baggageSelected.weight,addBaggageFee:r.addBaggageFee}))})).flatMap(r=>r.baggageSelected).filter(r=>r.serviceName),a=n.reduce((r,s)=>r+s.unitPrice,0),o=n.reduce((r,s)=>r+s.addBaggageFee,0);if(this.serviceSelected={services:n,serviceCharge:o,totalPrice:a,totalAmount:o+a},this._mobileDetectService.isMobile()){const r=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn h\xe0nh l\xfd",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});r.containerInstance._leftButtonClick.subscribe(s=>{r.dismiss(),this.onReview()})}}else this.ref.close("baggage_addon"!==this.type&&this.dataBaggageInput)}onReview(){this.mode="addon",this._mobileDetectService.isMobile()&&this._bottomSheetService.dismiss()}onBaggageSelected(t,n){this.isChangeBag=!0;const a=n.findIndex(o=>o.journeyKey===t.journeyKey);-1!=a&&(n[a].baggageSelected=t),this.checkHasBaggage()}onConfirm(){if("baggage_addon"===this.type){const t={addOnBags:this.serviceSelected.services.map(n=>({bagInfo:{bagKey:n.serviceKey,ssrCode:n.ssrCode,unit:n.unit,weight:n.weight?n.weight+"":""},journey:{key:n.journeyKey},passenger:{key:n.passengerKey},price:n.unitPrice,segment:{key:n.segmentKey,flightNumber:n.flightNumber}})),airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode,payNow:this.bookingInfo.payNow};this.isLoading=!0,this._manageBookingService.addonBaggages(t).pipe((0,q.x)(()=>this.isLoading=!1)).subscribe({next:n=>{this.isLoading=!1,this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(n)):this.ref.close(n)},error:()=>{this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss()):this.ref.close(!1)}})}else this._toastService.add({severity:"success",summary:"Th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng!",detail:"\u0110\xe3 th\xeam h\xe0nh l\xfd th\xe0nh c\xf4ng cho chuy\u1ebfn bay \u0111\u01b0\u1ee3c ch\u1ecdn",sticky:!1}),this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(this.dataBaggageInput)):this.ref.close(this.dataBaggageInput)}onClearBaggage(){this._modal.open(y.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd k\xed g\u1eedi \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataBaggageInput=this.dataBaggageInput.map(a=>Object.assign(Object.assign({},a),{journeys:a.journeys.map(o=>Object.assign(Object.assign({},o),{baggageSelected:{baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}}))})),this.dataBaggageSource=this.dataBaggageInput,this.hasBaggageSelected=!1)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.KNP),e.Y36(K.Fj),e.Y36(z.fB),e.Y36(oe.U),e.Y36(O.gb,8),e.Y36(P.Rr,8),e.Y36(P.Zu,8),e.Y36(F.BX),e.Y36(O.oE),e.Y36(G.L),e.Y36(P.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-on-baggage-modal"]],standalone:!0,features:[e.jDz],decls:14,vars:7,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],["class","px-6 pt-6 overflow-auto md:p-4",4,"ngIf"],[4,"ngIf"],[1,"p-6","md:p-4"],["mobileConfirm",""],[1,"px-6","pt-6","overflow-auto","md:p-4"],["class","flex flex-col gap-y-4",4,"ngIf","ngIfElse"],["confirmTempalate",""],[1,"flex","flex-col","gap-y-4"],[4,"ngFor","ngForOf"],[3,"passengerIndex","passenger","listJourney","baggageSelectedChange"],[3,"serviceSelected"],[1,"flex","justify-between"],["cf-button","","size","medium","type","secondary",1,"flex","items-center","gap-x-2","md:hidden",3,"ngClass","click"],["icon","delete","size","small"],[1,"flex","gap-x-2","md:w-full"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","circle_check","size","small",1,"mr-2.5"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"disabled","click"],["class","ml-2.5 animate-spin","icon","rotate_left","size","small",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"disabled","click"],["icon","rotate_left","size","small",1,"ml-2.5","animate-spin"],[1,"flex","flex-col","w-full","justify-between","bg-neutral-gray-2"],[1,"p-4","overflow-y-auto"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white","p-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Th\xeam h\xe0nh l\xfd"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.YNc(5,ce,4,2,"div",4),e.YNc(6,de,3,0,"div",5),e.TgZ(7,"div",6),e.YNc(8,ge,13,6,"ng-container",5),e.YNc(9,fe,9,4,"ng-container",5),e.qZA()(),e._UZ(10,"cf-toast"),e.YNc(11,_e,11,5,"ng-template",null,7,e.W1O),e.YNc(13,ve,1,0,"cf-spinner",5)),2&t&&(e.ekj("md:bg-neutral-gray-2","addon"!==n.mode),e.xp6(5),e.Q6J("ngIf",!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton),e.xp6(2),e.Q6J("ngIf","addon"===n.mode),e.xp6(1),e.Q6J("ngIf","addon"!==n.mode),e.xp6(4),e.Q6J("ngIf",n.isLoading))},dependencies:[v.ez,v.mk,v.sg,v.O5,m.AxE,m.Sm8,f.N8,f.Xq,y.FL,y.Mk,F.hj,J.IA,y.OR,P.DW],encapsulation:2}),i})();var W=g(19010),X=g(3803),xe=g(86432),ee=g(62733);function be(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27)(4,"div",28),e._uU(5),e.qZA(),e.TgZ(6,"div",29),e._uU(7),e.qZA()()()),2&i){const t=l.active,n=e.oxw(),a=n.index,o=n.$implicit;e.xp6(1),e.ekj("!text-primary-2-4",t)("!bg-primary-2-1",t),e.xp6(1),e.hij(" ",a+1," "),e.xp6(3),e.AsE("",o.startCode," - ",o.endCode,""),e.xp6(2),e.Oqu(o.departDate)}}const Ce=function(i){return{"border-l border-r border-neutral-gray-1":i}};function ye(i,l){if(1&i&&(e.TgZ(0,"cf-tab",23),e.YNc(1,be,8,8,"ng-template",null,24,e.W1O),e.qZA()),2&i){const t=l.$implicit,n=e.MAs(2);e.Q6J("ngClass",e.VKq(3,Ce,t.active))("active",t.active)("title",n)}}function Se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"cf-tabset",21),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onTabChangeIndex(a))}),e.YNc(2,ye,3,5,"cf-tab",22),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.dataSeatInput)}}function Ie(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"cf-add-on-seat",33),e.NdJ("seatValueChange",function(a){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onSeatChange(a))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("segmentSelected",t.segmentSelected)}}function Te(i,l){if(1&i&&(e.TgZ(0,"div",34),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",36)(3,"path",37),e.TgZ(4,"g",38),e._UZ(5,"path",39),e.qZA(),e._UZ(6,"path",40)(7,"path",41)(8,"path",42)(9,"path",43)(10,"path",44)(11,"path",45)(12,"path",46)(13,"path",47)(14,"path",48)(15,"path",49)(16,"path",50)(17,"path",51)(18,"path",52)(19,"path",53)(20,"path",54),e.TgZ(21,"defs")(22,"filter",55),e._UZ(23,"feFlood",56)(24,"feColorMatrix",57)(25,"feMorphology",58)(26,"feOffset",59)(27,"feGaussianBlur",60)(28,"feColorMatrix",61)(29,"feBlend",62)(30,"feColorMatrix",57)(31,"feMorphology",63)(32,"feOffset",64)(33,"feGaussianBlur",65)(34,"feColorMatrix",66)(35,"feBlend",67)(36,"feBlend",68),e.qZA(),e.TgZ(37,"linearGradient",69),e._UZ(38,"stop",70)(39,"stop",71),e.qZA()()(),e.kcU(),e.TgZ(40,"div",72),e._uU(41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(41),e.Oqu(t.segmentSelected.errorMsg)}}function Ae(i,l){if(1&i&&(e.TgZ(0,"div",30),e.YNc(1,Ie,1,1,"cf-add-on-seat",31),e.YNc(2,Te,42,1,"div",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","OK"===t.segmentSelected.status),e.xp6(1),e.Q6J("ngIf","ERROR"===t.segmentSelected.status)}}function ke(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton")(2,"ticket-item-skeleton")(3,"ticket-item-skeleton")(4,"ticket-item-skeleton")(5,"ticket-item-skeleton"),e.qZA())}const R=function(i){return{"opacity-50 cursor-default pointer-events-none":i}};function Pe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onNextSegment())}),e.TgZ(1,"span"),e._uU(2,"Ti\u1ebfp theo"),e.qZA(),e._UZ(3,"cf-icon",74),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,R,!t.isAllCurrentSeatSelected()))}}const te=function(i){return{"min-h-[70vh]":i}};function Ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e._uU(3,"Th\xeam ch\u1ed7 ng\u1ed3i"),e.qZA(),e.TgZ(4,"cf-icon",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close())}),e.qZA()(),e.TgZ(5,"div",8)(6,"div",9),e.YNc(7,Se,3,1,"div",10),e.YNc(8,Ae,3,2,"div",11),e.YNc(9,ke,6,0,"div",1),e.qZA()(),e.TgZ(10,"div",12)(11,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onClearSeat())}),e._UZ(12,"cf-icon",14),e.TgZ(13,"span"),e._uU(14,"H\u1ee7y d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(15,"div",15)(16,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close())}),e._uU(17," \u0110\xf3ng "),e.qZA(),e.YNc(18,Pe,4,3,"button",17),e.TgZ(19,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),o=e.MAs(5);return e.KtG(a.onAddSeat(o))}),e._UZ(20,"cf-icon",19),e.TgZ(21,"span"),e._uU(22,"Ho\xe0n th\xe0nh"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,te,"addon"===t.mode)),e.xp6(7),e.Q6J("ngIf",t.isShow),e.xp6(1),e.Q6J("ngIf",t.isShow),e.xp6(1),e.Q6J("ngIf",!t.isShow),e.xp6(2),e.Q6J("ngClass",e.VKq(9,R,!t.hasSeatSelected)),e.xp6(7),e.Q6J("ngIf",t.hasContinueButton),e.xp6(1),e.Q6J("ngClass",e.VKq(11,R,!t.isCompleteSeatSelected()))}}function Ze(i,l){1&i&&e._UZ(0,"cf-spinner")}function Ee(i,l){1&i&&e._UZ(0,"cf-icon",84)}function we(i,l){1&i&&e._UZ(0,"cf-icon",84)}function De(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",76)(2,"div",6),e._uU(3,"Th\xeam ch\u1ed7 ng\u1ed3i"),e.qZA(),e.TgZ(4,"cf-icon",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close())}),e.qZA()(),e.TgZ(5,"div",78),e._UZ(6,"cf-confirm-add-on",79),e.qZA(),e.TgZ(7,"div",80)(8,"button",81),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onReview())}),e._uU(9," Ki\u1ec3m tra l\u1ea1i "),e.YNc(10,Ee,1,0,"cf-icon",82),e.qZA(),e.TgZ(11,"button",83),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._UZ(12,"cf-icon",19),e.TgZ(13,"span"),e._uU(14,"X\xe1c nh\u1eadn"),e.qZA(),e.YNc(15,we,1,0,"cf-icon",82),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,te,"addon"===t.mode)),e.xp6(6),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(4),e.Q6J("ngIf",t.isLoading)}}function Be(i,l){1&i&&e._UZ(0,"cf-icon",84)}function Me(i,l){1&i&&e._UZ(0,"cf-icon",84)}function Je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",85)(1,"div",86),e._UZ(2,"cf-confirm-add-on",79),e.qZA(),e.TgZ(3,"div",87)(4,"button",88),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onReview())}),e._uU(5," Ki\u1ec3m tra l\u1ea1i "),e.YNc(6,Be,1,0,"cf-icon",82),e.qZA(),e.TgZ(7,"button",89),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onConfirm())}),e._UZ(8,"cf-icon",19),e._uU(9," X\xe1c nh\u1eadn "),e.YNc(10,Me,1,0,"cf-icon",82),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("serviceSelected",t.serviceSelected),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("disabled",t.isLoading),e.xp6(3),e.Q6J("ngIf",t.isLoading)}}let H=(()=>{class i{constructor(t,n,a,o,r,s,u,d,c,p,_,C){this.ref=t,this.bottomSheetData=n,this.bottomSheetRef=a,this.cfIconRegister=o,this._ticketSelectedDataProvider=r,this._flightDataService=s,this._bookFlightService=u,this._manageBookingService=d,this._addOnSeatDataProvider=c,this._toastService=p,this._mobileDetectService=_,this._bottomSheetService=C,this.currentLeg=0,this.mode="addon",this.isShow=!1,this.isContinueSegment=!1,this.dataSeatInput=[],this.dataSeatInputSource=[],this.isLoading=!1,this.hasContinueButton=!1,this.isChangeSeat=!1,this.hasSeatSelected=!1,o.registerIcons([m.UNF,m.xgX,m.Hge,m.PcQ,m.toh]),this.ticketSelected=r.ticketSelectedData,t&&(this.dataSeatInputSource=t.data.dataSeatInput,this.addonSeatReq=t.data.addonSeatReq,this.type=t.data.type,this.bookingInfo=t.data.bookingInfo),n&&(this.dataSeatInputSource=n.dataSeatInput,this.addonSeatReq=n.addonSeatReq,this.type=n.type,this.bookingInfo=n.bookingInfo),this.dataSeatInput=this.dataSeatInputSource.map(N=>Object.assign(Object.assign({},N),{passengers:N.passengers.map(Z=>Object.assign(Object.assign({},Z),{seatSelected:Z.seatSelected}))})),this.hasContinueButton=this.dataSeatInput.length>1}ngOnInit(){this.loadSeatMap()}proccessDataApi(t){this.dataSeatInput.forEach(n=>{const a=[],o=n.airline.concat(n.flightNumber),r=t.find(s=>{var u,d;return(null===(u=s.seatSegment)||void 0===u?void 0:u.airline.concat(null===(d=s.seatSegment)||void 0===d?void 0:d.flightNumber))===o});if(r){const s=r.seatMap,u=s.map(p=>p.row).sort((p,_)=>p-_);s.forEach(p=>{p.seatOptions.forEach(_=>{a.push(_.mapCell.identifier)})});const d=[...new Set(a)].sort(),c=s.map(p=>({row:p.row,seatOptions:p.seatOptions.map(_=>({available:_.available,col:_.mapCell.identifier,row:_.mapCell.row,key:_.key,totalPrice:_.feeCharge.charge.total}))}));n.seatSegment={rows:u,cols:d,containerKey:r.key,seatMaps:c},n.status="OK"}else n.status="ERROR",n.errorMsg="Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c danh s\xe1ch ch\u1ed7 ng\u1ed3i c\u1ee7a h\xe0nh tr\xecnh"}),this.isShow=!0,this.segmentSelected=Object.assign({},this.dataSeatInput[this.currentLeg]),this.hasSeatSelected=this.segmentSelected.passengers.every(n=>n.seatSelected.seat)}loadSeatMap(){var t;null===(t=this.seatMapObservable())||void 0===t||t.subscribe({next:n=>{"OK"===n.status?this.proccessDataApi("seat_addon"===this.type?n.data.seatSelections:n.data):this.ref.close(n)}})}seatMapObservable(){return"get_seat"===this.type?this._bookFlightService.getSeatOptions(this.addonSeatReq):"seat_addon"===this.type?this._manageBookingService.getListSeatAddOn(this.addonSeatReq):null}close(){this.ref.close(!1)}isExistSeat(t){return this.segmentSelected.passengers.map(n=>n.seatSelected.seat).includes(t)}onSeatChange(t){this.isChangeSeat=!0;const n=t.row+t.col,a=this.segmentSelected.passengers.find(r=>r.passengerKey===t.passengerKey),o=this.segmentSelected.passengers.find(r=>r.seatSelected.seat===n);this.isExistSeat(n)?o&&(o.seatSelected={containerKey:"",seat:"",row:-1,col:"",seatKey:"",totalPrice:0}):a&&(a.seatSelected={containerKey:t.containerKey,seat:n,row:t.row,col:t.col,seatKey:t.seatKey,totalPrice:t.totalPrice}),this.segmentSelected=Object.assign({},this.segmentSelected),this.isContinueSegment=this.segmentSelected.passengers.every(r=>r.seatSelected.seat),this.hasSeatSelected=this.segmentSelected.passengers.every(r=>r.seatSelected.seat)}onTabChangeIndex(t){this.currentLeg=t,this.dataSeatInput.forEach((n,a)=>{this.dataSeatInput[a].active=a===t}),this.segmentSelected=this.dataSeatInput[this.currentLeg]}onAddSeat(t){if(this.isCompleteSeatSelected()){this.mode="confirm";const n=this.dataSeatInput.filter(r=>r.available).map(r=>({seatSelected:r.passengers.map(s=>({leg:r.leg,airlineLogo:r.airlineLogo,journeyKey:r.journeyKey,departDate:r.departDate,flight:`${r.startCode} - ${r.endCode}`,serviceKey:s.seatSelected.seatKey,serviceName:s.seatSelected.seat,serviceNumber:s.seatSelected.seat,passengerName:s.passengerName,passengerKey:s.passengerKey,segmentKey:r.segmentKey,unitPrice:s.seatSelected.totalPrice,startTime:"",addSeatFee:s.addSeatFee}))})).flatMap(r=>r.seatSelected).filter(r=>r.serviceName),a=n.reduce((r,s)=>r+s.unitPrice,0),o=n.reduce((r,s)=>r+s.addSeatFee,0);if(this.serviceSelected={services:n,serviceCharge:o,totalPrice:a,totalAmount:o+a},this._mobileDetectService.isMobile()){const r=this._bottomSheetService.open(t,{headerTitle:"X\xe1c nh\u1eadn ch\u1ed7 ng\u1ed3i",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4"});r.containerInstance._leftButtonClick.subscribe(s=>{r.dismiss(),this.onReview()})}}else this.ref.close("seat_addon"!==this.type&&this.dataSeatInput)}onReview(){this.mode="addon",this._mobileDetectService.isMobile()&&this._bottomSheetService.dismiss()}onNextSegment(){let t=this.currentLeg+1;t>this.dataSeatInput.length-1&&(t=0),this.onTabChangeIndex(t)}onConfirm(){if("seat_addon"===this.type){const t={addSeats:this.serviceSelected.services.map(n=>({journey:{key:n.journeyKey},passenger:{key:n.passengerKey},price:n.unitPrice,seatInfo:{seatKey:n.serviceKey,seatNumber:n.serviceNumber},segment:{key:n.segmentKey}})),airline:this.bookingInfo.airline,bookingCode:this.bookingInfo.bookingCode,payNow:this.bookingInfo.payNow};this.isLoading=!0,this._manageBookingService.addonSeats(t).subscribe({next:n=>{this.isLoading=!1,this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(n)):this.ref.close(n)},error:n=>{this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss()):this.ref.close(!1),this.isLoading=!1,this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Th\xeam ch\u1ed7 ng\u1ed3i kh\xf4ng th\xe0nh c\xf4ng, vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c li\xean h\u1ec7 \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3,",sticky:!1})}})}else this._toastService.add({severity:"success",summary:"Th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng!",detail:"\u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i th\xe0nh c\xf4ng cho chuy\u1ebfn bay \u0111\u01b0\u1ee3c ch\u1ecdn",sticky:!1}),this.dataSeatInput=this.dataSeatInput.filter(t=>t.available),this.dataSeatInputSource=this.dataSeatInput.filter(t=>t.available),this._mobileDetectService.isMobile()?(this._bottomSheetService.dismiss(),this.bottomSheetRef.dismiss(this.dataSeatInput)):this.ref.close(this.dataSeatInput)}onClearSeat(){this.dataSeatInput.forEach(t=>{t.passengers.forEach(n=>{n.seatSelected={containerKey:"",seat:"",seatKey:"",totalPrice:0}})}),this.isChangeSeat=!0,this.segmentSelected=Object.assign({},this.dataSeatInput[this.currentLeg]),this.hasSeatSelected=this.segmentSelected.passengers.every(t=>t.seatSelected.seat)}isAllCurrentSeatSelected(){var t;return null===(t=this.segmentSelected)||void 0===t?void 0:t.passengers.every(n=>n.seatSelected.seat)}isCompleteSeatSelected(){let t=!0,n=!1;return this.dataSeatInput.forEach(a=>{a.passengers.every(o=>!o.seatSelected.containerKey)||(n=!0,t=t&&a.passengers.every(o=>!!o.seatSelected.containerKey))}),t&&n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.gb,8),e.Y36(P.Rr,8),e.Y36(P.Zu,8),e.Y36(m.KNP),e.Y36(X.h),e.Y36(ee.G),e.Y36(K.Fj),e.Y36(z.fB),e.Y36(xe.h),e.Y36(F.BX),e.Y36(G.L),e.Y36(P.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-on-seat-modal"]],standalone:!0,features:[e.jDz],decls:6,vars:3,consts:[["class","w-[950px] h-[90vh] overflow-hidden rounded-lg bg-neutral-white flex flex-col md:w-screen md:h-full",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","w-[900px] h-[600px] overflow-hidden rounded-lg bg-neutral-white flex flex-col ",3,"ngClass",4,"ngIf"],["mobileConfirm",""],[1,"w-[950px]","h-[90vh]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:h-full",3,"ngClass"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","overflow-auto","md:p-4","md:pr-0"],[1,"flex-auto","gap-y-6","flex","flex-col","h-[580px]","w-full"],["class","w-full",4,"ngIf"],["class","flex-auto",4,"ngIf"],[1,"p-6","flex","justify-between","gap-x-4","md:p-4"],["cf-button","","size","medium","type","secondary",1,"flex","items-center","gap-x-2","md:hidden",3,"ngClass","click"],["icon","delete","size","small"],[1,"flex","gap-x-2","md:w-full"],["cf-button","","size","medium","type","secondary",1,"md:hidden",3,"click"],["cf-button","","size","medium","type","secondary","class","md:w-full justify-center",3,"ngClass","click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","circle_check","size","small",1,"mr-2.5"],[1,"w-full"],[1,"h-[60px]","md:overflow-x-auto","md:h-auto",3,"selectedIndexChange"],["class","w-1/4 grow-0 md:w-auto",3,"ngClass","active","title",4,"ngFor","ngForOf"],[1,"w-1/4","grow-0","md:w-auto",3,"ngClass","active","title"],["titleTemplate",""],[1,"flex","gap-x-4","items-center"],[1,"flex","justify-center","items-center","w-8","h-8","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"flex","flex-col"],[1,"text-heading-sm","whitespace-pre"],[1,"text-body-sm","whitespace-pre"],[1,"flex-auto"],[3,"segmentSelected","seatValueChange",4,"ngIf"],["class","h-full flex flex-col justify-center items-center",4,"ngIf"],[3,"segmentSelected","seatValueChange"],[1,"h-full","flex","flex-col","justify-center","items-center"],["width","134","height","115","viewBox","0 0 134 115","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M66.4672 102.041C94.5888 102.041 117.387 79.2428 117.387 51.0207C117.387 22.7986 94.4884 0 66.4672 0C38.3455 0 15.5469 22.7986 15.5469 51.0207C15.5469 79.2428 38.3455 102.041 66.4672 102.041Z","fill","#BEBFC1"],["d","M17.8551 17.576C19.4082 17.576 20.6673 16.3169 20.6673 14.7638C20.6673 13.2107 19.4082 11.9517 17.8551 11.9517C16.302 11.9517 15.043 13.2107 15.043 14.7638C15.043 16.3169 16.302 17.576 17.8551 17.576Z","fill","#F1F3F9"],["filter","url(#filter0_dd_1211_19630)"],["d","M121.111 16.8693V85.2206C121.111 88.2132 118.687 90.6671 115.694 90.6671H17.4466C14.4539 90.6671 12 88.2431 12 85.2206V16.8693C12 13.8767 14.424 11.4527 17.4466 11.4527H115.694C118.687 11.4527 121.111 13.8767 121.111 16.8693Z","fill","white"],["d","M121.111 16.8693V22.5254H12V16.8693C12 13.8767 14.424 11.4527 17.4466 11.4527H115.694C118.687 11.4527 121.111 13.8767 121.111 16.8693Z","fill","url(#paint0_linear_1211_19630)"],["d","M17.8947 18.4553C18.7211 18.4553 19.391 17.7854 19.391 16.959C19.391 16.1326 18.7211 15.4627 17.8947 15.4627C17.0684 15.4627 16.3984 16.1326 16.3984 16.959C16.3984 17.7854 17.0684 18.4553 17.8947 18.4553Z","fill","#BEBFC1"],["d","M22.383 18.4553C23.2094 18.4553 23.8793 17.7854 23.8793 16.959C23.8793 16.1326 23.2094 15.4627 22.383 15.4627C21.5566 15.4627 20.8867 16.1326 20.8867 16.959C20.8867 17.7854 21.5566 18.4553 22.383 18.4553Z","fill","#BEBFC1"],["d","M26.844 18.4553C27.6703 18.4553 28.3403 17.7854 28.3403 16.959C28.3403 16.1326 27.6703 15.4627 26.844 15.4627C26.0176 15.4627 25.3477 16.1326 25.3477 16.959C25.3477 17.7854 26.0176 18.4553 26.844 18.4553Z","fill","#BEBFC1"],["d","M51.1126 31.3237H21.6055V60.4965H51.1126V31.3237Z","fill","#DFDFE0"],["d","M91.5312 31.1768H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 31.1768H82.6241","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 40.7207H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M80.7148 50.2647H111.892","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 50.2647H73.0802","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M59.7188 59.8085H88.3505","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M82.625 69.3524H111.893","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M21.543 69.3524H73.7163","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M50.8125 78.8963H88.9881","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M21.543 78.8963H41.9033","stroke","#DFDFE0","stroke-width","4","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["id","filter0_dd_1211_19630","x","0","y","11.4527","width","133.109","height","103.214","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["radius","2","operator","erode","in","SourceAlpha","result","effect1_dropShadow_1211_19630"],["dy","4"],["stdDeviation","3"],["type","matrix","values","0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1211_19630"],["radius","4","operator","erode","in","SourceAlpha","result","effect2_dropShadow_1211_19630"],["dy","12"],["stdDeviation","8"],["type","matrix","values","0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.1 0"],["mode","normal","in2","effect1_dropShadow_1211_19630","result","effect2_dropShadow_1211_19630"],["mode","normal","in","SourceGraphic","in2","effect2_dropShadow_1211_19630","result","shape"],["id","paint0_linear_1211_19630","x1","11.9986","y1","16.9888","x2","121.112","y2","16.9888","gradientUnits","userSpaceOnUse"],["stop-color","#DFDFE0"],["offset","1","stop-color","white"],[1,"text-heading-md","text-neutral-black","mb-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"ngClass","click"],["icon","chevron_right","size","small"],[1,"w-[900px]","h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col",3,"ngClass"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","small","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","overflow-auto","flex-1"],[3,"serviceSelected"],[1,"p-6","flex","justify-end","gap-x-4"],["cf-button","","size","medium","type","secondary",3,"disabled","click"],["class","ml-2.5 animate-spin","icon","rotate_left","size","small",4,"ngIf"],["cf-button","","size","medium","color","primary-1",3,"disabled","click"],["icon","rotate_left","size","small",1,"ml-2.5","animate-spin"],[1,"flex","flex-col","w-full","justify-between","bg-neutral-gray-2"],[1,"p-4","overflow-y-auto"],[1,"flex","justify-end","gap-x-2","md:bg-neutral-white","p-4"],["cf-button","","size","medium","type","secondary",1,"md:w-full","justify-center",3,"disabled","click"],["cf-button","","size","medium","color","primary-1",1,"md:w-full","justify-center",3,"disabled","click"]],template:function(t,n){1&t&&(e.YNc(0,Ne,23,13,"div",0),e._UZ(1,"cf-toast"),e.YNc(2,Ze,1,0,"cf-spinner",1),e.YNc(3,De,16,8,"div",2),e.YNc(4,Je,11,5,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ngIf","addon"===n.mode),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf","addon"!==n.mode))},dependencies:[v.ez,v.mk,v.sg,v.O5,m.AxE,m.Sm8,f.N8,f.Xq,W.Q,W.F,y.j7,y.Mk,J.IA,F.hj,y.OR,P.DW],encapsulation:2}),i})(),Fe=(()=>{class i{transform(t,n,a){return t&&t.replaceAll(n,a)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"replace",type:i,pure:!0,standalone:!0}),i})();var Ue=g(3447),k=g(15439),E=g(44500),Oe=g(13138),Qe=g(3193),qe=g(4520),Ke=g(28490),Ge=g(85522),Ye=g(82761),Re=g(2225),He=g(77492),je=g(9497);const Ve=["parentSelectInfant"],Le=["adultElement"],ze=["childElement"],$e=["infantElement"],We=["controlElement"];function Xe(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Ng\u01b0\u1eddi l\u1edbn ",t+1," ")}}function et(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function tt(i,l){if(1&i&&(e.YNc(0,Xe,2,1,"div",58),e.YNc(1,et,2,1,"div",58)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function nt(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Ng\u01b0\u1eddi l\u1edbn ",t+1,"")}}function it(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function at(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function ot(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function st(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function rt(i,l){1&i&&(e.TgZ(0,"div",75),e._UZ(1,"cf-icon",76),e.TgZ(2,"span"),e._uU(3,"Th\xf4ng tin b\u1ed5 sung"),e.qZA()())}function lt(i,l){if(1&i){const t=e.EpF();e.YNc(0,nt,2,1,"div",60),e.YNc(1,it,2,1,"div",60),e.TgZ(2,"div",61)(3,"div",62)(4,"div",63)(5,"cf-select",64)(6,"label",65),e._uU(7,"Gi\u1edbi t\xednh"),e.qZA(),e.YNc(8,at,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(9,"div",63)(10,"cf-input-group",28)(11,"label",24)(12,"span",25),e._uU(13,"H\u1ecd"),e.qZA()(),e.TgZ(14,"input",66),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"lastName"))}),e.qZA(),e.YNc(15,ot,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(16,"div",63)(17,"cf-input-group",28)(18,"label",24)(19,"span",25),e._uU(20,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(21,"input",67),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"firstName"))}),e.qZA(),e.YNc(22,st,1,1,"cf-input-hint",26),e.qZA()()(),e.TgZ(23,"cf-collapse",68)(24,"cf-collapse-panel",69),e.YNc(25,rt,4,0,"ng-template",null,54,e.W1O),e.TgZ(27,"div",70)(28,"cf-input-group",71)(29,"label",24),e._uU(30," Bamboo Airways (QH) "),e.qZA(),e._UZ(31,"input",72),e.qZA(),e.TgZ(32,"cf-input-group",71)(33,"label",24),e._uU(34," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(35,"input",72),e.qZA()()()()()}if(2&i){const t=e.MAs(26),n=e.oxw().$implicit,a=e.oxw();e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",a.optionsGender)("allowSearch",!1)("formControl",a.getFormControlInArray(n,"gender")),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",a.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",a.getFormControlInArray(n,"membershipVN"))}}function ct(i,l){if(1&i&&(e.TgZ(0,"div",null,51)(2,"cf-collapse",52)(3,"cf-collapse-panel",53),e.YNc(4,tt,2,2,"ng-template",null,54,e.W1O),e.GkF(6,55),e.qZA()(),e.TgZ(7,"div",56),e.GkF(8,55),e.YNc(9,lt,36,20,"ng-template",null,57,e.W1O),e.qZA()()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function dt(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Tr\u1ebb em ",t+1," ")}}function gt(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function ut(i,l){if(1&i&&(e.YNc(0,dt,2,1,"div",58),e.YNc(1,gt,2,1,"div",58)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function pt(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Tr\u1ebb em ",t+1," ")}}function ft(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function ht(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function mt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function _t(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function vt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.birthday)}}function xt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChild)}}function bt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChildUnder)}}function Ct(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBChildUpper)}}function yt(i,l){1&i&&(e.TgZ(0,"div",85),e._uU(1," Th\xf4ng tin b\u1ed5 sung "),e.qZA())}function St(i,l){if(1&i){const t=e.EpF();e.YNc(0,pt,2,1,"div",60),e.YNc(1,ft,2,1,"div",60),e.TgZ(2,"div",61)(3,"div",62)(4,"div",63)(5,"cf-select",64)(6,"label",65),e._uU(7,"Gi\u1edbi t\xednh"),e.qZA(),e.YNc(8,ht,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(9,"div",63)(10,"cf-input-group",28)(11,"label",24)(12,"span",25),e._uU(13,"H\u1ecd"),e.qZA()(),e.TgZ(14,"input",79),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"lastName"))}),e.qZA(),e.YNc(15,mt,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(16,"div",63)(17,"cf-input-group",28)(18,"label",24)(19,"span",25),e._uU(20,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(21,"input",67),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"firstName"))}),e.qZA(),e.YNc(22,_t,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(23,"div",63)(24,"cf-input-group",28),e._UZ(25,"cf-icon",80),e.TgZ(26,"label",24)(27,"span",25),e._uU(28,"Ng\xe0y sinh"),e.qZA(),e._uU(29,"\xa0 "),e.TgZ(30,"span",81),e._uU(31," (Tu\u1ed5i 2 - 12) "),e.qZA()(),e.TgZ(32,"input",82,83),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(33);return e.KtG(a.close())})("dateSelect",function(){e.CHM(t);const a=e.MAs(33);return e.KtG(a.close())}),e.qZA(),e.YNc(34,vt,1,1,"cf-input-hint",26),e.YNc(35,xt,1,1,"cf-input-hint",26),e.YNc(36,bt,1,1,"cf-input-hint",26),e.YNc(37,Ct,1,1,"cf-input-hint",26),e.qZA()()(),e.TgZ(38,"cf-collapse",68)(39,"cf-collapse-panel",69),e.YNc(40,yt,2,0,"ng-template",null,54,e.W1O),e.TgZ(42,"div",70)(43,"cf-input-group",71)(44,"label",24),e._uU(45," Bamboo Airways (QH) "),e.qZA(),e._UZ(46,"input",84),e.qZA(),e.TgZ(47,"cf-input-group",71)(48,"label",24),e._uU(49," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(50,"input",84),e.qZA()()()()()}if(2&i){const t=e.MAs(41),n=e.oxw().$implicit,a=e.oxw();e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",a.optionsGender)("allowSearch",!1)("formControl",a.getFormControlInArray(n,"gender")),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(2),e.Q6J("status",n.controls.birthday.invalid&&(n.controls.birthday.dirty||n.controls.birthday.touched)?"error":"default")("status","default"),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(5),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("formControl",a.getFormControlInArray(n,"birthday")),e.xp6(2),e.Q6J("ngIf",n.controls.birthday.hasError("required")&&(n.controls.birthday.touched||n.controls.birthday.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChild")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChildUnder")&&n.controls.birthday.touched),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBChildUpper")&&n.controls.birthday.touched),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",a.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",a.getFormControlInArray(n,"membershipVN"))}}function It(i,l){if(1&i&&(e.ynx(0,null,77),e.TgZ(2,"cf-collapse",52)(3,"cf-collapse-panel",53),e.YNc(4,ut,2,2,"ng-template",null,54,e.W1O),e.GkF(6,55),e.qZA()(),e.TgZ(7,"div",56),e.GkF(8,55),e.YNc(9,St,51,32,"ng-template",null,78,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function Tt(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Em b\xe9 ",t+1," ")}}function At(i,l){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function kt(i,l){if(1&i&&(e.YNc(0,Tt,2,1,"div",58),e.YNc(1,At,2,1,"div",58)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!(t.controls.firstName.valid&&t.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",t.controls.firstName.valid&&t.controls.lastName.valid)}}function Pt(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index;e.xp6(1),e.hij(" Em b\xe9 ",t+1,"")}}function Nt(i,l){if(1&i&&(e.TgZ(0,"div",73),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.controls.lastName.value.toUpperCase()+" "+t.controls.firstName.value.toUpperCase()," ")}}function Zt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.gender)}}function Et(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.lastName)}}function wt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.firstName)}}function Dt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.birthday)}}function Bt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.DoBInfant)}}function Mt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.parentIndex)}}function Jt(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(3);e.Q6J("hint",t.errorMessage.ParentInfantDupplicate)}}function Ft(i,l){1&i&&(e.TgZ(0,"div",85),e._uU(1," Th\xf4ng tin b\u1ed5 sung "),e.qZA())}function Ut(i,l){if(1&i){const t=e.EpF();e.YNc(0,Pt,2,1,"div",60),e.YNc(1,Nt,2,1,"div",60),e.TgZ(2,"div",61)(3,"div",62)(4,"div",63)(5,"cf-select",64)(6,"label",24)(7,"span",25),e._uU(8,"Gi\u1edbi t\xednh"),e.qZA()(),e.YNc(9,Zt,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(10,"div",63)(11,"cf-input-group",28)(12,"label",24)(13,"span",25),e._uU(14,"H\u1ecd"),e.qZA()(),e.TgZ(15,"input",79),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"lastName"))}),e.qZA(),e.YNc(16,Et,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(17,"div",63)(18,"cf-input-group",28)(19,"label",24)(20,"span",25),e._uU(21,"T\xean \u0111\u1ec7m v\xe0 T\xean"),e.qZA()(),e.TgZ(22,"input",67),e.NdJ("blur",function(a){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onBlurInput(a,o,"firstName"))}),e.qZA(),e.YNc(23,wt,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(24,"div",63)(25,"div")(26,"cf-input-group",28),e._UZ(27,"cf-icon",80),e.TgZ(28,"label",24)(29,"span",25),e._uU(30,"Ng\xe0y sinh"),e.qZA(),e._uU(31,"\xa0 "),e.TgZ(32,"span",81),e._uU(33," (Nh\u1ecf h\u01a1n 2 tu\u1ed5i) "),e.qZA()(),e.TgZ(34,"input",82,83),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(35);return e.KtG(a.close())})("dateSelect",function(){e.CHM(t);const a=e.MAs(35);return e.KtG(a.close())}),e.qZA(),e.YNc(36,Dt,1,1,"cf-input-hint",26),e.YNc(37,Bt,1,1,"cf-input-hint",26),e.qZA()()(),e.TgZ(38,"div",63)(39,"cf-select",88,89)(41,"label",24)(42,"span",25),e._uU(43,"Thu\u1ed9c h\xe0nh kh\xe1ch ng\u01b0\u1eddi l\u1edbn"),e.qZA()(),e.YNc(44,Mt,1,1,"cf-input-hint",26),e.YNc(45,Jt,1,1,"cf-input-hint",26),e.qZA()()(),e.TgZ(46,"cf-collapse",68)(47,"cf-collapse-panel",69),e.YNc(48,Ft,2,0,"ng-template",null,54,e.W1O),e.TgZ(50,"div",70)(51,"cf-input-group",71)(52,"label",24),e._uU(53," Bamboo Airways (QH) "),e.qZA(),e._UZ(54,"input",72),e.qZA(),e.TgZ(55,"cf-input-group",71)(56,"label",24),e._uU(57," Vietnam Airlines (VNA) "),e.qZA(),e._UZ(58,"input",72),e.qZA()()()()()}if(2&i){const t=e.MAs(49),n=e.oxw().$implicit,a=e.oxw();e.Q6J("ngIf",!(n.controls.firstName.valid&&n.controls.lastName.valid)),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.valid&&n.controls.lastName.valid),e.xp6(4),e.Q6J("status",n.controls.gender.invalid&&(n.controls.gender.dirty||n.controls.gender.touched)?"error":"default")("data",a.optionsGender)("allowSearch",!1)("formControl",a.getFormControlInArray(n,"gender")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.gender.hasError("required")&&(n.controls.gender.touched||n.controls.gender.dirty)),e.xp6(2),e.Q6J("status",n.controls.lastName.invalid&&(n.controls.lastName.dirty||n.controls.lastName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"lastName")),e.xp6(1),e.Q6J("ngIf",n.controls.lastName.hasError("required")&&(n.controls.lastName.touched||n.controls.lastName.dirty)),e.xp6(2),e.Q6J("status",n.controls.firstName.invalid&&(n.controls.firstName.dirty||n.controls.firstName.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.getFormControlInArray(n,"firstName")),e.xp6(1),e.Q6J("ngIf",n.controls.firstName.hasError("required")&&(n.controls.firstName.touched||n.controls.firstName.dirty)),e.xp6(3),e.Q6J("status",n.controls.birthday.invalid&&(n.controls.birthday.dirty||n.controls.birthday.touched)?"error":"default"),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(5),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("formControl",a.getFormControlInArray(n,"birthday")),e.xp6(2),e.Q6J("ngIf",n.controls.birthday.hasError("required")&&(n.controls.birthday.touched||n.controls.birthday.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.birthday.hasError("DoBInfant")&&n.controls.birthday.touched),e.xp6(2),e.Q6J("status",n.controls.parentIndex.invalid&&(n.controls.parentIndex.dirty||n.controls.parentIndex.touched)?"error":"default")("data",a.optionsAdultPassenger)("allowSearch",!1)("formControl",n.controls.parentIndex),e.xp6(3),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.controls.parentIndex.hasError("required")&&(n.controls.parentIndex.touched||n.controls.parentIndex.dirty)),e.xp6(1),e.Q6J("ngIf",n.controls.parentIndex.hasError("ParentInfantDupplicate")&&(n.controls.parentIndex.touched||n.controls.parentIndex.dirty)),e.xp6(2),e.Q6J("title",t)("active",!1),e.xp6(7),e.Q6J("formControl",a.getFormControlInArray(n,"membershipQH")),e.xp6(4),e.Q6J("formControl",a.getFormControlInArray(n,"membershipVN"))}}function Ot(i,l){if(1&i&&(e.ynx(0,null,86),e.TgZ(2,"cf-collapse",52)(3,"cf-collapse-panel",53),e.YNc(4,kt,2,2,"ng-template",null,54,e.W1O),e.GkF(6,55),e.qZA()(),e.TgZ(7,"div",56),e.GkF(8,55),e.YNc(9,Ut,59,34,"ng-template",null,87,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(5),n=e.MAs(10);e.xp6(3),e.Q6J("title",t)("active",!0),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function Qt(i,l){1&i&&(e.TgZ(0,"div",102),e._uU(1," Ch\u01b0a th\xeam h\xe0nh l\xfd k\xed g\u1eedi "),e.qZA())}function qt(i,l){1&i&&(e.TgZ(0,"div",103),e._uU(1," \u0110\xe3 th\xeam h\xe0nh l\xfd "),e.qZA())}function Kt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onClearBaggage())}),e._UZ(1,"cf-icon",105),e.TgZ(2,"div",44),e._uU(3,"H\u1ee7y"),e.qZA()()}}function Gt(i,l){1&i&&e._UZ(0,"cf-icon",109)}function Yt(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1,"Th\xeam"),e.qZA())}function Rt(i,l){1&i&&e._UZ(0,"cf-icon",110)}function Ht(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1,"Thay \u0111\u1ed5i"),e.qZA())}function jt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onAddBaggage())}),e.YNc(1,Gt,1,0,"cf-icon",106),e.YNc(2,Yt,2,0,"span",107),e.YNc(3,Rt,1,0,"cf-icon",108),e.YNc(4,Ht,2,0,"span",107),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected)}}function Vt(i,l){1&i&&(e.TgZ(0,"div",102),e._uU(1," Ch\u01b0a mua th\xeam ch\u1ed7 ng\u1ed3i "),e.qZA())}function Lt(i,l){1&i&&(e.TgZ(0,"div",103),e._uU(1," \u0110\xe3 th\xeam ch\u1ed7 ng\u1ed3i "),e.qZA())}function zt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onClearSeat())}),e._UZ(1,"cf-icon",105),e.TgZ(2,"div",44),e._uU(3,"H\u1ee7y"),e.qZA()()}}function $t(i,l){1&i&&e._UZ(0,"cf-icon",109)}function Wt(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1,"Th\xeam"),e.qZA())}function Xt(i,l){1&i&&e._UZ(0,"cf-icon",110)}function en(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1,"Thay \u0111\u1ed5i"),e.qZA())}function tn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onAddOnSeat())}),e.YNc(1,$t,1,0,"cf-icon",106),e.YNc(2,Wt,2,0,"span",107),e.YNc(3,Xt,1,0,"cf-icon",108),e.YNc(4,en,2,0,"span",107),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected)}}function nn(i,l){if(1&i&&(e.TgZ(0,"div",91)(1,"div",92)(2,"div",111),e._UZ(3,"cf-icon",112),e.qZA(),e.TgZ(4,"div",95)(5,"div",96),e._uU(6,"Ch\u1ed7 ng\u1ed3i"),e.qZA(),e.YNc(7,Vt,2,0,"div",97),e.YNc(8,Lt,2,0,"div",98),e.qZA()(),e.TgZ(9,"div",99),e.YNc(10,zt,4,0,"button",100),e.YNc(11,tn,5,4,"button",100),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",!t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(2),e.Q6J("ngIf",t.hasSeatSelected),e.xp6(1),e.Q6J("ngIf",t.isAddOn)}}function an(i,l){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._UZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA()()(),e.TgZ(6,"div",90)(7,"div",91)(8,"div",92)(9,"div"),e.O4$(),e.TgZ(10,"svg",93),e._UZ(11,"path",94),e.qZA()(),e.kcU(),e.TgZ(12,"div",95)(13,"div",96),e._uU(14,"H\xe0nh l\xfd k\xed g\u1eedi"),e.qZA(),e.YNc(15,Qt,2,0,"div",97),e.YNc(16,qt,2,0,"div",98),e.qZA()(),e.TgZ(17,"div",99),e.YNc(18,Kt,4,0,"button",100),e.YNc(19,jt,5,4,"button",100),e.qZA()(),e.YNc(20,nn,12,4,"div",101),e.qZA()()),2&i){const t=e.oxw();e.xp6(15),e.Q6J("ngIf",!t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(2),e.Q6J("ngIf",t.hasBaggageSelected),e.xp6(1),e.Q6J("ngIf",t.isAddOn),e.xp6(1),e.Q6J("ngIf",t.isAddonSeat)}}function on(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw(2);e.Q6J("hint",t.errorMessage.agentId)}}function sn(i,l){1&i&&(e.TgZ(0,"div",118),e._uU(1," Remark c\xf4ng khai"),e.qZA())}function rn(i,l){1&i&&(e.TgZ(0,"div",118),e._uU(1," Remark"),e.qZA())}function ln(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,sn,2,0,"div",116),e.YNc(2,rn,2,0,"div",116),e.TgZ(3,"div"),e._UZ(4,"textarea",117),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.canPublicRemark&&t.canPrivateRemark),e.xp6(1),e.Q6J("ngIf",t.canPublicRemark&&!t.canPrivateRemark),e.xp6(2),e.Q6J("formControl",t.getFormControlInArray(t.formGroup,"publicRemark"))}}function cn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"div",118),e._uU(2,"Remark b\xed m\u1eadt"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"textarea",117),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.getFormControlInArray(t.formGroup,"secretRemark"))}}function dn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",113)(1,"div",7)(2,"div",8),e._UZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5,"Ch\u1ecdn \u0111\u1ea1i l\xfd s\u1edf h\u1eefu"),e.qZA()()(),e.TgZ(6,"div",114)(7,"div",63)(8,"cf-select",115),e.NdJ("selectedChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAgent(a))}),e.TgZ(9,"label",24)(10,"span",25),e._uU(11,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()(),e.YNc(12,on,1,1,"cf-input-hint",26),e.qZA()(),e.YNc(13,ln,5,3,"div",50),e.YNc(14,cn,5,1,"div",50),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("status",t.formGroup.controls.agentId.invalid&&(t.formGroup.controls.agentId.dirty||t.formGroup.controls.agentId.touched)?"error":"default")("data",t.agentOption)("ngModel",t.agentSelected)("allowSearch",!0)("formControl",t.getFormControlInArray(t.formGroup,"agentId")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",t.formGroup.controls.agentId.hasError("required")&&(t.formGroup.controls.agentId.touched||t.formGroup.controls.agentId.dirty)),e.xp6(1),e.Q6J("ngIf",t.canPublicRemark),e.xp6(1),e.Q6J("ngIf",t.canPrivateRemark)}}function gn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.areaCode)}}function un(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.phone)}}function pn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.minlengthPhone)}}function fn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.maxlengthPhone)}}function hn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.email)}}function mn(i,l){if(1&i&&e._UZ(0,"cf-input-hint",74),2&i){const t=e.oxw();e.Q6J("hint",t.errorMessage.emailFormat)}}function _n(i,l){if(1&i&&(e.TgZ(0,"div",39)(1,"div",40),e._uU(2,"T\u1ed5ng chi ph\xed:"),e.qZA(),e.TgZ(3,"div",119),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij("",e.Dn7(5,1,e.lcZ(6,5,t.totalPrice),",",".")," \u0111")}}function vn(i,l){if(1&i&&(e.TgZ(0,"div",120),e._UZ(1,"cf-select",121),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.agentOption)("ngModel",t.agentSelected)("allowSearch",!1)("formControl",t.getFormControlInArray(t.formGroup,"agentId"))}}function xn(i,l){if(1&i&&(e.TgZ(0,"div",39)(1,"div",40),e._uU(2,"T\u1ed5ng chi ph\xed:"),e.qZA(),e.TgZ(3,"div",119),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij("",e.Dn7(5,1,e.lcZ(6,5,t.totalPrice),",",".")," \u0111")}}function bn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",122),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBookFlight(!1))}),e._UZ(1,"cf-icon",123),e._uU(2," Gi\u1eef ch\u1ed7 "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading)}}function Cn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",124),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBookFlight(!0))}),e.O4$(),e.TgZ(1,"svg",125),e._UZ(2,"path",126)(3,"path",127),e.qZA(),e._uU(4," Xu\u1ea5t v\xe9 "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading)}}function yn(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"cf-spinner"),e.qZA())}let Sn=(()=>{class i{constructor(t,n,a,o,r,s,u,d,c,p,_,C,N,Z,j,Tn,An,kn,Pn,Nn,Zn){var V;this.fb=t,this._dataProvider=n,this._locationDataService=a,this._bookFlightService=o,this._ticketSelectedDataProvider=r,this._router=s,this.calendar=u,this._bookingResultDataProvider=d,this._bookingRequestDataProvider=c,this._iconRegister=p,this._modal=_,this._flightDataService=C,this._phoneDataService=N,this._cd=Z,this._userService=j,this._permissionService=Tn,this._eventLogService=An,this._toastService=kn,this._detectMobileService=Pn,this._bottomSheetService=Nn,this._systemService=Zn,this.totalPrice=0,this.totalPriceSource=0,this.optionsGender=[{name:"Nam",code:"male"},{name:"N\u1eef",code:"female"}],this.optionsAdultPassenger=[],this.optionsAreaCode=this._phoneDataService.optionsAreaCode,this.agentOption=[],this.agentInfo=[],this.agentSelected="",this.errorMessage={lastName:"H\u1ecd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",firstName:"T\xean \u0111\u1ec7m v\xe0 T\xean kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",birthday:"Ng\xe0y sinh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",DoBChild:"Ng\xe0y sinh kh\xf4ng h\u1ee3p l\u1ec7",DoBChildUnder:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0} tr\u1edf v\u1ec1 tr\u01b0\u1edbc",DoBChildUpper:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0} tr\u1edf v\u1ec1 sau",DoBInfant:"Ng\xe0y sinh ph\u1ea3i t\u1eeb ng\xe0y {0}",gender:"Gi\u1edbi t\xednh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",email:"Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",emailFormat:"\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7",phone:"Sdt kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",parentIndex:"Ng\u01b0\u1eddi l\u1edbn \u0111i k\xe8m kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",areaCode:"M\xe3 v\xf9ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",minlengthPhone:"\u0110i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng t\u1ed1i thi\u1ec3u 7 s\u1ed1",maxlengthPhone:"\u0110i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng t\u1ed1i \u0111a 11 s\u1ed1",agentId:"\u0110\u1ea1i l\xfd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",ParentInfantDupplicate:"M\u1ed7i ng\u01b0\u1eddi l\u1edbn ch\u1ec9 c\xf3 t\u1ed1i \u0111a 1 em b\xe9 ph\u1ee5 thu\u1ed9c"},this.listTicketSelected=[],this.loading=!1,this.isAddOn=!1,this.isHiddenFeature=!1,this.isHiddenAddonSeat=!1,this.isAddonSeat=!1,this.hasVNAirline=!1,this.hasBaggageSelected=!1,this.hasSeatSelected=!1,this.dataBaggageInput=[],this.dataSeatInput=[],this.passengerText="",this.isShowBooking=this._permissionService.hasPermission(B.or.CanBookingFlightTicket),this.isShowIssued=this._permissionService.hasPermission(B.or.CanIssuedFlightTicket),this.canEditHeader=this._permissionService.hasPermission(B.or.EditShareFlightSelectedHeader),this.canPrivateRemark=this._permissionService.hasPermission(B.or.CreateFlightPrivateRemark),this.canPublicRemark=this._permissionService.hasPermission(B.or.CreateFlightPublicRemark),this.isShowForBooker=!this._permissionService.isVNAccount(),this.isHiddenTotalCharge=!1,p.registerIcons([m.IIV,m.Xlt,m.ILM,m.D7,m.rks,m._tC,m.okA,m.Rcu,m.Lxr,m.Hge,m._tC,m.uQp]),this.currentDate=u.getToday(),this.currentUserStorage=JSON.parse(null!==(V=localStorage.getItem("currentUser"))&&void 0!==V?V:"").data,this.listTicketSelected=this._ticketSelectedDataProvider.ticketSelectedData.map(A=>Object.assign(Object.assign({},A),{bagCharge:0,seatCharge:0})),this.isHiddenFeature=this.listTicketSelected.every(A=>["GDS","gds"].includes(A.provider)),this.isAddonSeat=this.listTicketSelected.every(A=>{var I;return"vn".includes(null===(I=A.provider)||void 0===I?void 0:I.toLowerCase())})?E.kp.vn:this.listTicketSelected.every(A=>{var I;return"qh".includes(null===(I=A.provider)||void 0===I?void 0:I.toLowerCase())})?E.kp.qh:this.listTicketSelected.every(A=>{var I;return"vj".includes(null===(I=A.provider)||void 0===I?void 0:I.toLowerCase())})?E.kp.vj:!this.listTicketSelected.every(A=>{var I;return"gds".includes(null===(I=A.provider)||void 0===I?void 0:I.toLowerCase())})||E.kp.gds,this.hasVNAirline=this.listTicketSelected.some(A=>["VN","vn","GDS","gds"].includes(A.provider));const ne=this._ticketSelectedDataProvider.ticketSelectedData[0].startTime;this.departureTime=k(ne).toDate().getTime(),this.earliestDoBChild=(0,Q.Z)(this.departureTime,-2),this.earliestDoBChild=(0,L.Z)(this.earliestDoBChild,-1),this.earliestDoBInfant=k(ne).toDate(),this.lastestDoBChild=(0,Q.Z)(this.departureTime,-11),this.lastestDoBInfant=(0,Q.Z)(this.departureTime,-2),this.lastestDoBInfant=(0,L.Z)(this.lastestDoBInfant,1),this.errorMessage.DoBChildUnder=this.errorMessage.DoBChildUnder.replace("{0}",(0,v.p6)(this.earliestDoBChild,"dd/MM/yyyy","vi-VN")),this.errorMessage.DoBChildUpper=this.errorMessage.DoBChildUpper.replace("{0}",(0,v.p6)(this.lastestDoBChild,"dd/MM/yyyy","vi-VN")),this.errorMessage.DoBInfant=this.errorMessage.DoBInfant.replace("{0}",(0,v.p6)(this.lastestDoBInfant,"dd/MM/yyyy","vi-VN"))}ngOnInit(){this.initFormGroup(),this.loadTicketSelectedData(),this.getNumberOfPassenger(),this.initAdultFormGroup(),this.initChildFormGroup(),this.initInfantFormGroup(),this.initAgentData(),this.patchValueForm(),this.checkAddOn(),this.showTotalCharge(),this.timeoutExpire()}get getFormValue(){return this.formGroup.value}initAgentData(){this._userService.getAllAgentUserForBooking().subscribe({next:t=>{var n,a;this.agentInfo=t.data.map(o=>({id:o.userId,userName:o.userName,displayName:o.displayName,phone:o.phone,email:o.email})),this.agentOption=t.data.map(o=>({name:`${o.userName} - ${o.displayName}`,code:o.userId})),1===this.agentOption.length&&(this.agentSelected=this.agentOption[0].code,null===(n=this.formGroup.get("phone"))||void 0===n||n.setValue(t.data[0].phone),null===(a=this.formGroup.get("email"))||void 0===a||a.setValue(t.data[0].email))}})}getNumberOfPassenger(){const t=this._dataProvider.searchInputData;this.numberOfPassenger={adult:t.adult,child:t.child,infant:t.infant},this.initAdultPassengerOptions()}initAdultPassengerOptions(){for(let t=0;t<this.numberOfPassenger.adult;t++)this.optionsAdultPassenger.push({code:t+"",name:`Ng\u01b0\u1eddi l\u1edbn ${t+1}`})}initFormGroup(){this.formGroup=this.fb.group({email:[null,[h.kI.required,h.kI.email]],phone:[null,[h.kI.required,h.kI.minLength(7),h.kI.maxLength(11)]],areaCode:["+84",h.kI.required],agentId:[null,h.kI.required],secretRemark:[null],publicRemark:[null],adultPassenger:this.fb.array([]),childPassenger:this.fb.array([]),infantPassenger:this.fb.array([])},{validator:(0,U.aV)()}),this.formGroup.valueChanges.subscribe(()=>{this.getAdultPassenger()})}patchValueForm(){var t,n;const a={email:(null===(t=this.currentUserStorage)||void 0===t?void 0:t.email)||"giacmobayre@gmail.com",phone:(null===(n=this.currentUserStorage)||void 0===n?void 0:n.phone)||"0915522425",areaCode:"+84"};this.formGroup.patchValue(a)}initAdultFormGroup(){for(let t=0;t<this.numberOfPassenger.adult;t++){const n=this.fb.group({firstName:[null,[h.kI.required]],lastName:[null,[h.kI.required]],gender:["male",[h.kI.required]],membershipQH:[null],membershipVN:[null]});this.getFormArray("adultPassenger").push(n)}}initChildFormGroup(){for(let t=0;t<this.numberOfPassenger.child;t++){const n=this.fb.group({birthday:[null,[h.kI.required]],firstName:[null,[h.kI.required]],lastName:[null,[h.kI.required]],gender:["male",[h.kI.required]],membershipQH:[null],membershipVN:[null]},{validator:(0,U.$K)("birthday",this.departureTime)});this.getFormArray("childPassenger").push(n)}}initInfantFormGroup(){for(let t=0;t<this.numberOfPassenger.infant;t++){const n=this.fb.group({birthday:[null,[h.kI.required]],firstName:[null,[h.kI.required]],lastName:[null,[h.kI.required]],gender:["male",[h.kI.required]],parentIndex:[t+"",[h.kI.required]],membershipQH:[null],membershipVN:[null]},{validator:(0,U.DW)("birthday",this.departureTime)});this.getFormArray("infantPassenger").push(n)}}getFormArray(t){return this.formGroup.controls[t]}controlForm(t,n){return(0,U.bz)(t,n)}getFormControlInArray(t,n){return t.controls[n]}getAdultPassenger(){this.getFormArray("adultPassenger").value.forEach((t,n)=>{var a;this.optionsAdultPassenger[n].name=t.lastName&&t.firstName?t.lastName+" "+t.firstName:`Ng\u01b0\u1eddi l\u1edbn ${n+1}`,null===(a=this.parentSelectInfants)||void 0===a||a.forEach(o=>{o.data=this.optionsAdultPassenger,this.optionsAdultPassenger.forEach(r=>{o.selectedText&&r.code===o.selectedText.code&&o.writeValue(o.selectedText.code)})})})}proccessingPassengerInfo(t=!0){const n=Object.assign({},this.getFormValue);return[...n.adultPassenger.map((s,u)=>{var d,c,p;const _=[];return s.membershipQH&&_.push({airline:"QH",membershipID:s.membershipQH}),s.membershipVN&&_.push({airline:"VN",membershipID:s.membershipVN}),{bookingBaggages:this.getBaggageBook("ADT",u),bookingSeats:this.getSeatBook("ADT",u),bookingServices:[],info:{birthday:"",email:"",firstName:null===(d=s.firstName)||void 0===d?void 0:d.trim(),gender:(null===(c=s.gender)||void 0===c?void 0:c.toUpperCase())||"",lastName:null===(p=s.lastName)||void 0===p?void 0:p.trim(),parentIndex:0,type:"ADT",index:u,loyalInfo:_}}}),...n.childPassenger.map((s,u)=>{var d,c,p;const _=u+n.adultPassenger.length,C=[];return s.membershipQH&&C.push({airline:"QH",membershipID:s.membershipQH}),s.membershipVN&&C.push({airline:"VN",membershipID:s.membershipVN}),{bookingBaggages:this.getBaggageBook("CHD",_),bookingSeats:this.getSeatBook("CHD",_),bookingServices:[],info:{birthday:k(s.birthday).format("YYYY-MM-DD"),email:"",firstName:null===(d=s.firstName)||void 0===d?void 0:d.trim(),gender:(null===(c=s.gender)||void 0===c?void 0:c.toUpperCase())||"",lastName:null===(p=s.lastName)||void 0===p?void 0:p.trim(),parentIndex:0,type:"CHD",index:_,loyalInfo:C}}}),...t?n.infantPassenger.map((s,u)=>{var d,c,p;const _=[];return s.membershipQH&&_.push({airline:"QH",membershipID:s.membershipQH}),s.membershipVN&&_.push({airline:"VN",membershipID:s.membershipVN}),{bookingBaggages:[],bookingSeats:[],bookingServices:[],info:{birthday:k(s.birthday).format("YYYY-MM-DD"),email:"",firstName:null===(d=s.firstName)||void 0===d?void 0:d.trim(),gender:(null===(c=s.gender)||void 0===c?void 0:c.toUpperCase())||"",lastName:null===(p=s.lastName)||void 0===p?void 0:p.trim(),parentIndex:+s.parentIndex,type:"INF",index:0,loyalInfo:_}}}):[]]}handleBookFlightData(){var t,n;console.log(this.listTicketSelected);const a=Object.assign({},this.getFormValue),o=this.proccessingPassengerInfo(),r={data:{payNow:!1,bookingContact:{email:a.email,name:(null===(t=this.currentUserStorage)||void 0===t?void 0:t.username.replace(/[^a-zA-Z]/g,""))||"GMBR",phone:a.phone,phonePrefix:a.areaCode},bookingPassengers:o,bookingFlights:{mode:"options",bookingOptions:this.listTicketSelected.map((s,u)=>{var d;return{airline:s.airline,provider:s.provider,bookingFlightInfo:{optionSelect:{fareOptionKey:s.fareOptionKey,segmentSelect:s.segments.map(c=>({fareClass:c.fareClass,segmentKey:c.segmentKey}))},type:"b2b"===s.bookingType?s.bookingType:"b2c"},id:s.airline+"_"+u,journeyKey:s.journeyKey,leg:u,startPoint:s.startCode,endPoint:s.endCode,startTime:k(s.startTime).format("YYYY-MM-DD"),fareClass:(null===(d=s.journeyFareClass)||void 0===d?void 0:d.toUpperCase())||"",route:s.startCode+s.endCode,flightNumber:s.segments[0].flightNumber||""}})}},extraInfo:{agentId:a.agentId,notes:[],uuidAction:(null===(n=this.currentUserStorage)||void 0===n?void 0:n.userId)||""}};return a.publicRemark&&r.extraInfo.notes.push({note:a.publicRemark,type:"public"}),a.secretRemark&&r.extraInfo.notes.push({note:a.secretRemark,type:"private"}),r}onPhoneChange(t){var n;let a=null===(n=t.target)||void 0===n?void 0:n.value;a=a.replace(" ",""),this.getFormControlInArray(this.formGroup,"phone").setValue(a)}checkValid(t){Object.values(t.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}onBookFlight(t=!1){this.formGroup.markAllAsTouched(),this.formGroup.invalid?this.checkScrollElement():t?this._modal.open(y.V0,{title:"X\xe1c nh\u1eadn xu\u1ea5t v\xe9",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xu\u1ea5t v\xe9 cho t\u1ea5t c\u1ea3 c\xe1c h\xe0nh kh\xe1ch kh\xf4ng."}).afterClosed$.subscribe({next:a=>{a.data&&this.bookIssue(t)},error:a=>{console.log(a),this._modal.open(y.z5,{title:"\u0110\u1eb7t ch\u1ed7 th\u1ea5t b\u1ea1i",content:"H\u1ec7 th\u1ed1ng \u0111\u1eb7t ch\u1ed7 l\u1ed7i",status:"error"})}}):this.bookIssue(t)}bookIssue(t){const n=this.handleBookFlightData();n.data.payNow=t,this._bookingRequestDataProvider.bookingRequestData=n,this.loading=!0,this._bookFlightService.bookFlight(n).pipe((0,q.x)(()=>this.loading=!1)).subscribe({next:a=>{var o,r;if("OK"===a.status){a.data=a.data.sort((p,_)=>p.bookingResult.journeys[0].leg-_.bookingResult.journeys[0].leg),this._bookingResultDataProvider.bookingResultData=a,this._bookingResultDataProvider.firstBookingResult=!0;let s=!0;const u=[],d=[];a.data.forEach((p,_)=>{const C=this._ticketSelectedDataProvider.ticketSelectedData[_].flight;"ERROR"===p.status?(s=!1,u.push(C)):d.push(C)}),this._modal.open(D.xG,{isSuccess:s,title:t?"Xu\u1ea5t v\xe9 th\xe0nh c\xf4ng":"\u0110\u1eb7t ch\u1ed7 th\xe0nh c\xf4ng",body:t?"B\u1ea1n \u0111\xe3 xu\u1ea5t v\xe9 th\xe0nh c\xf4ng":"B\u1ea1n \u0111\xe3 \u0111\u1eb7t ch\u1ed7 th\xe0nh c\xf4ng",listFlight:s?d:u}).afterClosed$.subscribe({next:()=>{this._router.navigate(["/admin/booking-success"])}})}else this._modal.open(D.xG,{isSuccess:!1,body:(null===(r=null===(o=a.objectError)||void 0===o?void 0:o.errorDescription)||void 0===r?void 0:r.vi)||"Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!"})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!1})}})}onReselect(){this._router.navigate(["/admin/search-flight-result"])}loadTicketSelectedData(){this.listTicketSelected=this._ticketSelectedDataProvider.ticketSelectedData.map(t=>Object.assign(Object.assign({},t),{bagCharge:0,seatCharge:0})),this.caculateTotalPrice()}caculateTotalPrice(){this.totalPrice=this.listTicketSelected.map(t=>t.totalPrice).reduce((t,n)=>t+n),this.totalPriceSource=this.totalPrice}onBlurInput(t,n,a){var o;const r=this.unicodeAndUppercase(t.target.value);null===(o=n.get(a))||void 0===o||o.setValue(r)}unicodeAndUppercase(t){return t=t.replace(/ +(?= )/g,""),(0,Ue.E)(t.trim()).toUpperCase()}onAddBaggage(){var t;const n=this.getListPassengerAddOn(),a=this.listTicketSelected;if(this.hasBaggageSelected)for(let s=0;s<n.length;s++)this.dataBaggageInput[s].passengerName=n[s].name;else this.dataBaggageInput=n.map((s,u)=>({passengerKey:u+"",passengerType:s.type,passengerName:s.name,addBaggageFee:0,journeys:a.map(d=>{const c=(0,v.p6)(d.startTime,"EEEE, dd/MM/yyyy","vi-VN"),p=k(d.startTime).toDate();return{airlineName:d.airline,flight:d.flight,flightNumber:"",airlineLogo:d.airlineLogo,journeyKey:d.journeyKey,journeyName:`D\u1ecbch v\u1ee5 b\u1ed5 sung ${d.startCode}-${d.endCode}, ${(0,v.p6)(p,"EEEE, ","vi-VN")} ${p.getDate()} th\xe1ng ${p.getMonth()+1}, ${p.getFullYear()}`,leg:d.leg,fareOptionKey:d.fareOptionKey,startCode:d.startCode,endCode:d.endCode,startTime:c,baggageOptions:[],baggageSelected:{baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}}})}));const o={baggageRequest:null===(t=this.dataBaggageInput[0])||void 0===t?void 0:t.journeys.map(s=>({airline:s.airlineName,journeyKey:s.journeyKey,fareOptionKey:s.fareOptionKey}))},r=this.dataBaggageInput.map(s=>Object.assign(Object.assign({},s),{journeys:s.journeys.map(u=>Object.assign(Object.assign({},u),{baggageSelected:Object.assign({},u.baggageSelected)}))}));if(this._detectMobileService.isMobile()){const s=this._bottomSheetService.open(Y,{headerTitle:"Th\xeam h\xe0nh l\xfd",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:o,type:"get_baggage"}});s.containerInstance._leftButtonClick.subscribe(u=>s.dismiss()),s.afterDismissed().subscribe(u=>{var d;u?(this.dataBaggageInput=u,this.hasBaggageSelected=null===(d=this.dataBaggageInput)||void 0===d?void 0:d.some(c=>c.journeys.some(p=>p.baggageSelected.baggageKey)),this.calculationAddonBag()):this.dataBaggageInput=r})}else this._modal.open(Y,{dataBaggageInput:this.dataBaggageInput,addonBaggageReq:o,type:"get_baggage"}).afterClosed$.subscribe({next:u=>{var d;u.data?(this.dataBaggageInput=u.data,this.hasBaggageSelected=null===(d=this.dataBaggageInput)||void 0===d?void 0:d.some(c=>c.journeys.some(p=>p.baggageSelected.baggageKey)),this.calculationAddonBag()):this.dataBaggageInput=r}})}calculationAddonBag(){var t,n;const a=new Map;null===(n=null===(t=this.dataBaggageInput)||void 0===t?void 0:t.map(r=>r.journeys).flatMap(r=>r))||void 0===n||n.forEach(r=>{a.has(r.journeyKey)?a.get(r.journeyKey).push(r.baggageSelected.totalCharge):a.set(r.journeyKey,[r.baggageSelected.totalCharge])});for(const[r,s]of a.entries()){const u=s.reduce((c,p)=>c+p,0),d=this.listTicketSelected.find(c=>c.journeyKey===r);d&&(d.bagCharge=u)}const o=this.listTicketSelected.reduce((r,s)=>r+s.bagCharge+s.seatCharge,0);this.totalPrice=this.totalPriceSource+o}getListPassengerAddOn(){return this.proccessingPassengerInfo(!1).filter(n=>"infant"!==n.info.type).map(n=>{const a=n.info;return{name:`${a.lastName} ${a.firstName}`,key:a.index,type:a.type}})}checkAddOn(){var t,n;const a=this.getFormArray("adultPassenger"),o=this.getFormArray("childPassenger");null===(t=this.formGroup.get("adultPassenger"))||void 0===t||t.valueChanges.subscribe(()=>{this.isAddOn=a.valid&&o.valid,this.getAdultPassenger()}),null===(n=this.formGroup.get("childPassenger"))||void 0===n||n.valueChanges.subscribe(()=>{this.isAddOn=a.valid&&o.valid})}onAddOnSeat(){const t=this.getListPassengerAddOn(),n=this.listTicketSelected.filter(o=>{var r,s,u,d;return"vn".includes(null===(r=o.provider)||void 0===r?void 0:r.toLowerCase())?E.kp.vn:"vj".includes(null===(s=o.provider)||void 0===s?void 0:s.toLowerCase())?E.kp.vj:"qh".includes(null===(u=o.provider)||void 0===u?void 0:u.toLowerCase())?E.kp.qh:!"gds".includes(null===(d=o.provider)||void 0===d?void 0:d.toLowerCase())||E.kp.gds}).map(o=>({segments:o.segments.map(r=>Object.assign(Object.assign({},r),{journeyKey:o.journeyKey,leg:o.leg}))})).flatMap(o=>o.segments);this.hasSeatSelected?this.dataSeatInput.forEach((o,r)=>{o.active=0===r,o.passengers.forEach((s,u)=>{s.passengerName=t[u].name})}):this.dataSeatInput=n.map((o,r)=>{const s=k(o.departDate).toDate(),u=(0,v.p6)(s,"EEEE, dd/MM/yyyy","vi-VN"),d=`${(0,v.p6)(s,"EEEE, ","vi-VN")} ${s.getDate()} th\xe1ng ${s.getMonth()+1}, ${s.getFullYear()}`;return{airline:o.airline,flightNumber:o.flightNumber,modelAirplaneName:o.modelAirplaneName,bookingCode:o.modelAirplaneName,serviceName:`Th\xeam ch\u1ed7 ng\u1ed3i tr\xean chuy\u1ebfn bay ${o.startCode}-${o.endCode}, ${d}`,mobileServiceName:`${o.startCode}-${o.endCode}, ${d}`,airlineLogo:this._flightDataService.getAirlineLogoByCode(o.airline),jetCode:o.jetCode,startCode:o.startCode,endCode:o.endCode,departDate:u,active:0===r,passengers:t.map(c=>({passengerName:c.name,passengerType:c.type,passengerKey:c.key.toString(),addSeatFee:0,seatSelected:{containerKey:"",seat:"",seatKey:"",row:-1,col:"",totalPrice:0}})),segmentKey:o.segmentKey,segmentIndex:r,journeyKey:o.journeyKey,leg:o.leg,seatSegment:{rows:[],cols:[],containerKey:"",seatMaps:[]},available:!0}});const a={seatRequest:this.listTicketSelected.map(o=>({airline:o.airline,fareOptionKey:o.fareOptionKey,journeyKey:o.journeyKey}))};if(this._detectMobileService.isMobile()){const o=this._bottomSheetService.open(H,{headerTitle:"Th\xeam ch\u1ed7 ng\u1ed3i",leftButtonIcon:"arrow_left",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,data:{dataSeatInput:this.dataSeatInput,addonSeatReq:a,type:"get_seat"}});o.containerInstance._leftButtonClick.subscribe(r=>o.dismiss()),o.afterDismissed().subscribe(r=>{r&&(this.dataSeatInput=r,this.calculationAddonSeat())})}else this._modal.open(H,{dataSeatInput:this.dataSeatInput,addonSeatReq:a,type:"get_seat"}).afterClosed$.subscribe({next:r=>{r.data&&(this.dataSeatInput=r.data,this.calculationAddonSeat())}})}calculationAddonSeat(){const t=this.dataSeatInput.map(o=>({seatSelected:o.passengers.map(r=>r.seatSelected)})).flatMap(o=>o.seatSelected);this.hasSeatSelected=t.some(o=>o.seatKey);const n=new Map;this.dataSeatInput.forEach(o=>{const r=o.passengers.reduce((s,u)=>s+u.seatSelected.totalPrice,0);if(n.has(o.journeyKey)){const s=n.get(o.journeyKey);n.set(o.journeyKey,s+r)}else n.set(o.journeyKey,r)});for(const[o,r]of n.entries()){const s=this.listTicketSelected.find(u=>u.journeyKey===o);s&&(s.seatCharge=r)}const a=this.listTicketSelected.reduce((o,r)=>o+r.bagCharge+r.seatCharge,0);this.totalPrice=this.totalPriceSource+a}getBaggageBook(t,n){return this.dataBaggageInput.filter(a=>a.passengerType===t&&a.passengerKey===n+"").map(a=>({baggageSelected:a.journeys.map(o=>({baggageContainerKey:o.baggageSelected.containerKey,baggageKey:o.baggageSelected.baggageKey,journeyKey:o.journeyKey,leg:o.leg}))})).flatMap(a=>a.baggageSelected).filter(a=>a.baggageKey)}getSeatBook(t,n){return this.dataSeatInput.map(a=>({seatSelected:a.passengers.filter(o=>o.passengerType===t&&o.passengerKey===n+"").map(o=>({journeyKey:a.journeyKey,leg:a.leg,seatContainerKey:o.seatSelected.containerKey,seatKey:o.seatSelected.seatKey,segmentIndex:a.segmentIndex,segmentKey:a.segmentKey}))})).flatMap(a=>a.seatSelected).filter(a=>a.seatKey)}onKeydown(t){t.preventDefault(),t.stopPropagation()}quickParseInfo(){if(this._detectMobileService.isMobile()){const t=this._bottomSheetService.open(D.i7,{headerTitle:"Th\xf4ng tin h\xe0nh kh\xe1ch",containerFullHeigh:!0,leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",data:{passengerText:this.passengerText,departureTime:this.departureTime}});t.containerInstance._leftButtonClick.subscribe(n=>t.dismiss()),t.afterDismissed().subscribe(n=>{n?this.processQuickParse(n.text,n.passengers,n.passengerInputRows):this._eventLogService.captureFastPaxInput({action:"cancel"})})}else this._modal.open(D.i7,{passengerText:this.passengerText,departureTime:this.departureTime}).afterClosed$.subscribe({next:n=>{n.data?this.processQuickParse(n.data.text,n.data.passengers,n.data.passengerInputRows):this._eventLogService.captureFastPaxInput({action:"cancel"})}})}processQuickParse(t,n,a){this.passengerText=t;const o=n;o.forEach(c=>{c.firstName&&(c.firstName=this.unicodeAndUppercase(c.firstName)),c.lastName&&(c.lastName=this.unicodeAndUppercase(c.lastName)),c.parentName&&(c.parentName=this.unicodeAndUppercase(c.parentName))});const r=o.filter(c=>"ADULT"===c.type),s=o.filter(c=>"CHILD"===c.type),u=o.filter(c=>"INFANT"===c.type);this._eventLogService.captureFastPaxInput({action:"ok",numInput:a,numPass:o.length,numAdt:r.length,numChd:s.length,numInf:u.length});for(let c=0;c<this.formGroup.controls.adultPassenger.controls.length&&c<r.length;c++)this.formGroup.controls.adultPassenger.at(c).controls.lastName.setValue(r[c].lastName),this.formGroup.controls.adultPassenger.at(c).controls.firstName.setValue(r[c].firstName),this.formGroup.controls.adultPassenger.at(c).controls.gender.setValue(r[c].gender),this.formGroup.controls.adultPassenger.at(c).markAllAsTouched();this.getAdultPassenger();for(let c=0;c<this.formGroup.controls.childPassenger.controls.length&&c<s.length;c++)this.formGroup.controls.childPassenger.at(c).controls.lastName.setValue(s[c].lastName),this.formGroup.controls.childPassenger.at(c).controls.firstName.setValue(s[c].firstName),this.formGroup.controls.childPassenger.at(c).controls.gender.setValue(s[c].gender),this.formGroup.controls.childPassenger.at(c).controls.birthday.setValue(s[c].birthday),this.formGroup.controls.childPassenger.at(c).markAllAsTouched();const d=[];for(let c=0;c<this.formGroup.controls.infantPassenger.controls.length&&c<u.length;c++){if(this.formGroup.controls.infantPassenger.at(c).controls.lastName.setValue(u[c].lastName),this.formGroup.controls.infantPassenger.at(c).controls.firstName.setValue(u[c].firstName),this.formGroup.controls.infantPassenger.at(c).controls.gender.setValue(u[c].gender),this.formGroup.controls.infantPassenger.at(c).controls.birthday.setValue(u[c].birthday),void 0!==u[c].parentName){const p=this.getParentIndex(u[c].parentName,d);void 0!==p&&(d.push(p),this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.setValue(String(p)))}this.formGroup.controls.infantPassenger.at(c).markAllAsTouched()}for(let c=0;c<this.formGroup.controls.infantPassenger.controls.length;c++)if(!this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.value)for(let p=0;p<this.formGroup.controls.adultPassenger.controls.length;p++)if(!d.includes(p)){this.formGroup.controls.infantPassenger.at(c).controls.parentIndex.setValue(String(p)),d.push(p);break}}getParentIndex(t,n){for(let a=0;a<this.formGroup.controls.adultPassenger.controls.length;a++)if(!n.includes(a)&&t===this.formGroup.controls.adultPassenger.at(a).controls.lastName.value+" "+this.formGroup.controls.adultPassenger.at(a).controls.firstName.value)return a}onShowDetailInfo(t){const n=this.listTicketSelected[t],a={airline:n.airline,airlineName:n.airlineName,airlineLogo:n.airlineLogo,flightNumber:n.flight,journeyName:`Chuy\u1ebfn bay: ${n.startPoint} - ${n.endPoint}`,numOfStop:n.numOfStop,departureDate:k(n.startTime).format("HH:mm DD/MM/YYYY"),startPoint:n.startCode,startPointName:n.startPoint,endPoint:n.endCode,endPointName:n.endPoint,price:n.totalPrice,handBag:"Kh\xf4ng",segments:n.segments.map(o=>({airline:o.airline,airlineSystem:o.airline,airlineName:o.airlineName,airlineLogo:o.airlineLogo,flightNumber:o.airline+o.flightNumber,startTime:k(o.departDate).format("HH:mm"),startDate:k(o.departDate).format("DD/MM/YYYY"),startPoint:o.startCode,startPointName:o.startPoint,endTime:k(o.arrivalDate).format("HH:mm"),endDate:k(o.arrivalDate).format("DD/MM/YYYY"),endPoint:o.endCode,endPointName:o.endPoint,rules:[{name:"Th\u1eddi gian bay",value:o.duration},{name:"Lo\u1ea1i m\xe1y bay",value:o.modelAirplane},{name:"H\u1ea1ng ch\u1ed7",value:o.fareClass},{name:"H\xe0nh l\xfd k\xfd g\u1eedi",value:n.checkedBag||"N/A"},{name:"H\xe0nh l\xfd x\xe1ch tay",value:n.handBag||"N/A"}],stopPoint:o.stopPoint})),ticketPrice:n.ticketPrice};this._modal.open(J.Zk,{flightInfo:a})}onClearBaggage(){this._modal.open(y.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 h\xe0nh l\xfd k\xed g\u1eedi \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataBaggageInput.forEach(a=>{a.journeys.forEach(o=>{o.baggageSelected={baggageName:"",baggageKey:"",containerKey:"",totalCharge:0}})}),this.hasBaggageSelected=!1,this.calculationAddonBag())}})}onClearSeat(){this._modal.open(y.V0,{title:"X\xe1c nh\u1eadn h\u1ee7y d\u1ecbch v\u1ee5 ch\u1ed7 ng\u1ed3i",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y d\u1ecbch v\u1ee5 ch\u1ed7 ng\u1ed3i \u0111\xe3 th\xeam?",okText:"C\xf3, h\u1ee7y d\u1ecbch v\u1ee5",cancelText:"Kh\xf4ng, v\u1eabn gi\u1eef"}).afterClosed$.subscribe({next:n=>{n.data&&(this.dataSeatInput.forEach(a=>{a.passengers.forEach(o=>{o.seatSelected={containerKey:"",seat:"",seatKey:"",totalPrice:0}})}),this.calculationAddonSeat())}})}showTotalCharge(){this.isHiddenTotalCharge=this.listTicketSelected.some(t=>t.isHiddenTotalCharge)}onShare(){this._modal.open(J.eP,{ticketsSelected:this.listTicketSelected.filter(t=>t.journeyKey),totalPrice:this.totalPrice,canEditHeader:this.canEditHeader,isHiddenTotalCharge:this.isHiddenTotalCharge})}onSelectAgent(t){var n,a;const o=this.agentInfo.find(r=>r.id===t.code);o&&(null===(n=this.formGroup.get("phone"))||void 0===n||n.setValue(o.phone),null===(a=this.formGroup.get("email"))||void 0===a||a.setValue(o.email))}timeoutExpire(){const t=this._ticketSelectedDataProvider.ticketSelectedData.map(n=>n.expireTime).reduce((n,a)=>n<=a?n:a,Number.POSITIVE_INFINITY);t&&this._systemService.getCurrentTimeEpoch().subscribe({next:n=>{"OK"===n.status&&(this.expireTimer=setTimeout(()=>{this._modal.open(y.V0,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",body:"Chuy\u1ebfn \u0111i b\u1ea1n \u0111\xe3 ch\u1ecdn c\xf3 th\u1ec3 kh\xf4ng c\xf2n n\u1eefa. B\u1eaft \u0111\u1ea7u m\u1ed9t t\xecm ki\u1ebfm m\u1edbi \u0111\u1ec3 l\u1ef1a ch\u1ecdn chuy\u1ebfn bay ph\xf9 h\u1ee3p h\u01a1n.",hasCancel:!1}).afterClosed$.subscribe({next:()=>{this.onReselect()}})},1e3*(t-n.data.timeStamp)))}})}checkScrollElement(){let t=!1;this.adultElements.forEach((n,a)=>{t||this.getFormArray("adultPassenger").at(a).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&(this.childElements.forEach((n,a)=>{t||this.getFormArray("childPassenger").at(a).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&(this.infantElements.forEach((n,a)=>{t||this.getFormArray("infantPassenger").at(a).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))}),!t&&this.controlElements.forEach(n=>{t||this.formGroup.get(n.nativeElement.dataset.id).invalid&&(t=!0,n.nativeElement.scrollIntoView({behavior:"smooth"}))})))}ngOnDestroy(){clearTimeout(this.expireTimer)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.qu),e.Y36(Oe.R),e.Y36(Ke._),e.Y36(K.Fj),e.Y36(X.h),e.Y36(Ye.F0),e.Y36(x.jH),e.Y36(Qe.m),e.Y36(qe.J),e.Y36(m.KNP),e.Y36(O.oE),e.Y36(ee.G),e.Y36(Ge.l),e.Y36(e.sBO),e.Y36(Re.KD),e.Y36(B.$A),e.Y36(He.x),e.Y36(F.BX),e.Y36(G.L),e.Y36(P.a2),e.Y36(je.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-passenger-info-page"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ve,5),e.Gf(Le,5),e.Gf(ze,5),e.Gf($e,5),e.Gf(We,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.parentSelectInfants=a),e.iGM(a=e.CRH())&&(n.adultElements=a),e.iGM(a=e.CRH())&&(n.childElements=a),e.iGM(a=e.CRH())&&(n.infantElements=a),e.iGM(a=e.CRH())&&(n.controlElements=a)}},hostAttrs:[1,"h-auto"],standalone:!0,features:[e.jDz],decls:93,vars:33,consts:[[1,"pt-4","px-4","items-center","gap-x-1.5","w-full","hidden","md:flex",3,"click"],["icon","arrow_left","size","small"],[1,"text-body-md-short"],[1,"w-full","h-full","flex","gap-x-4","justify-center","p-4"],[1,"w-[764px]"],[3,"formGroup"],[1,"mb-8","md:mb-[1px]"],[1,"flex","justify-between","items-center","mb-4","md:bg-neutral-white","md:py-4","md:pr-3","md:mb-0"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"md:text-heading-sm","md:text-neutral-gray-6"],["cf-button","","size","medium","type","secondary",1,"bg-white","flex","gap-x-2","md:hidden",3,"click","keydown"],["icon","grouping","size","small"],[1,"items-center","gap-x-0.5","hidden","md:flex",3,"click"],[1,"text-body-md"],[1,"flex","flex-col","gap-2","md:gap-[1px]"],[4,"ngFor","ngForOf"],["class","mb-8 md:mb-[1px]",4,"ngIf"],["class","mb-6 md:mb-[1px]",4,"ngIf"],[1,"p-6","bg-white","rounded","shadow-cf-md"],[1,"grid","grid-cols-3","gap-4","md:grid-cols-2"],["data-id","areaCode",1,"md:start"],["controlElement",""],["textField","name","valueField","code","placeholder","Ch\u1ecdn m\xe3 v\xf9ng",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[3,"CfRequired"],["cfHint","",3,"hint",4,"ngIf"],["data-id","phone",1,""],[1,"grow-[400]","!w-full",3,"status"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","CfNumberic","",3,"formControl","input"],["data-id","email",1,"md:col-span-2"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp email","formControlName","email",3,"formControl"],[1,"mb-8","md:mb-[1px]","md:block","hidden"],[1,"bg-white","rounded","shadow-cf-md"],[1,"bg-neutral-white"],[3,"showReselect","ticketsSelected","showDetail"],["class","flex justify-between items-center py-3 px-4",4,"ngIf"],["class","h-[343px]",4,"ngIf"],[1,"mt-[56px]","w-[302px]","rounded","h-fit","md:hidden","sticky","top-0"],[1,"flex","justify-between","items-center","py-3","px-4"],[1,"text-espressive-sm","text-neutral-black"],["icon","share","size","small",1,"cursor-pointer",3,"click"],[1,"sticky","bottom-0","rounded","shadow-cf-md"],[1,"flex","justify-between","items-center","bg-white","px-6","py-3"],[1,"md:hidden"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],[1,"flex","gap-x-4","md:w-full"],["cf-button","","size","medium","color","primary-1","class","whitespace-nowrap md:w-full md:justify-center","type","secondary",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","whitespace-nowrap md:w-full md:justify-center","type","solid",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["adultElement",""],[1,"w-full","hidden","md:block"],["contentClass","bg-neutral-white p-4 pt-0",3,"title","active"],["titleTemplate",""],[3,"ngTemplateOutlet"],[1,"p-6","bg-white","rounded","shadow-cf-md","md:hidden"],["adultPax",""],["class","text-heading-xs text-neutral-gray-6",4,"ngIf"],[1,"text-heading-xs","text-neutral-gray-6"],["class","mb-4 text-heading-xs text-black md:hidden",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],[1,"grid","grid-cols-3","gap-4","md:grid-cols-1"],[1,""],["textField","name","valueField","code","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",1,"md:w-full","md:max-w-none",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp h\u1ecd","type","text",3,"formControl","blur"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp t\xean \u0111\u1ec7m v\xe0 t\xean",3,"formControl","blur"],[1,"w-full","border","border-neutral-gray-1"],[3,"title","active"],[1,"flex","gap-x-4"],[1,"grow-[400]","!w-full"],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp th\u1ebb h\xe0nh kh\xe1ch th\u01b0\u1eddng xuy\xean",3,"formControl"],[1,"mb-4","text-heading-xs","text-black","md:hidden"],["cfHint","",3,"hint"],[1,"text-body-md","flex","gap-x-2","items-center"],["icon","document","size","small"],["childElement",""],["childPax",""],["cf-input","","size","medium","autocomplete","off","placeholder","Nh\u1eadp h\u1ecd",3,"formControl","blur"],["cfHeadIcon","","icon","calendar","size","small"],[1,"text-neutral-gray-4","text-espressive-sm"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y sinh",1,"py-[7px]",3,"secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["autocomplete","off","cf-input","","size","medium","placeholder","Nh\u1eadp th\u1ebb h\xe0nh kh\xe1ch th\u01b0\u1eddng xuy\xean",3,"formControl"],[1,"text-heading-xs"],["infantElement",""],["infantPax",""],["textField","name","valueField","code","placeholder","Ch\u1ecdn h\xe0nh kh\xe1ch",1,"md:w-full","md:max-w-none",3,"status","data","allowSearch","formControl"],["parentSelectInfant",""],[1,"flex","flex-col","gap-y-2","md:gap-0"],[1,"px-6","py-2.5","bg-white","rounded","shadow-cf-md","flex","justify-between","items-center"],[1,"flex","gap-x-3","items-center"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.54545 14.5504H4.15508M14.4545 14.5504H19.8M14.4545 14.5504V12.6H9.54545V16.2H14.4545V14.5504ZM4.15508 14.5504H3V6.05039H14.5508M4.15508 14.5504V21H19.8V14.5504M19.8 14.5504H21V6.05039H14.5508M9.35294 6V3H14.5508V6.05039","stroke","#2C2C2C","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-auto","w-full"],[1,"text-body-lg","text-neutral-black"],["class","text-espressive-sm text-neutral-gray-4",4,"ngIf"],["class","text-espressive-sm text-secondary-5-3",4,"ngIf"],[1,"flex","gap-x-3"],["cf-button","","size","small","type","secondary","class","!text-body-md md:p-2",3,"click",4,"ngIf"],["class","px-6 py-2.5 bg-white rounded shadow-cf-md flex justify-between items-center",4,"ngIf"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"text-espressive-sm","text-secondary-5-3"],["cf-button","","size","small","type","secondary",1,"!text-body-md","md:p-2",3,"click"],["icon","delete","size","small",1,"mr-2.5","md:m-0"],["icon","add","size","small","class","mr-2.5 md:m-0",4,"ngIf"],["class","md:hidden",4,"ngIf"],["icon","edit","size","small","class","mr-2.5 md:m-0",4,"ngIf"],["icon","add","size","small",1,"mr-2.5","md:m-0"],["icon","edit","size","small",1,"mr-2.5","md:m-0"],[1,"flex","justify-center","items-center"],["icon","airplane_seat","size","medium"],[1,"mb-6","md:mb-[1px]"],[1,"p-6","bg-white","rounded","shadow-cf-md","flex","flex-col","gap-4"],["data-id","agentId","textField","name","valueField","code","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd",1,"!w-full","!max-w-none",3,"status","data","ngModel","allowSearch","formControl","selectedChange"],["class","text-espressive-sm text-black mb-1.5",4,"ngIf"],["placeholder","Ghi ch\xfa",1,"w-full","placeholder:text-body-md","placeholder:text-neutral-gray-4","border","border-neutral-gray-2","rounded-[8px]","shadow-xs","px-[14px]","py-[10px]","max-h-80",2,"min-height","40px",3,"formControl"],[1,"text-espressive-sm","text-black","mb-1.5"],[1,"text-heading-md","text-neutral-black"],[1,"h-[343px]"],["textField","name","valueField","code",1,"hidden",3,"data","ngModel","allowSearch","formControl"],["cf-button","","size","medium","color","primary-1","type","secondary",1,"whitespace-nowrap","md:w-full","md:justify-center",3,"disabled","click"],["icon","switch","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1","type","solid",1,"whitespace-nowrap","md:w-full","md:justify-center",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","none","viewBox","0 0 16 16",1,"mr-2.5"],["stroke","#fff","stroke-linecap","round","stroke-linejoin","round","stroke-miterlimit","10","stroke-width","1.5","d","M10.553 4.8H3.259v8.533h7.294V4.8Z"],["stroke","#fff","stroke-linecap","round","stroke-linejoin","round","stroke-miterlimit","10","stroke-width","1.5","d","M4.718 2.667h8.023v9.244M5.447 6.934h2.918M5.447 9.067h2.918M5.447 11.2h2.918"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.onReselect()}),e._UZ(1,"cf-icon",1),e.TgZ(2,"div",2),e._uU(3,"Ch\u1ecdn l\u1ea1i"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._UZ(10,"div",9),e.TgZ(11,"div",10),e._uU(12,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(13,"div")(14,"button",11),e.NdJ("click",function(){return n.quickParseInfo()})("keydown",function(o){return n.onKeydown(o)}),e._UZ(15,"cf-icon",12),e.TgZ(16,"span"),e._uU(17,"Nh\u1eadp nhanh th\xf4ng tin"),e.qZA()(),e.TgZ(18,"div",13),e.NdJ("click",function(){return n.quickParseInfo()}),e._UZ(19,"cf-icon",12),e.TgZ(20,"div",14),e._uU(21,"Nh\u1eadp nhanh"),e.qZA()()()(),e.TgZ(22,"div",15),e.YNc(23,ct,11,4,"div",16),e.YNc(24,It,11,4,"ng-container",16),e.YNc(25,Ot,11,4,"ng-container",16),e.qZA()(),e.YNc(26,an,21,5,"div",17),e.YNc(27,dn,15,9,"div",18),e.TgZ(28,"div",6)(29,"div",7)(30,"div",8),e._UZ(31,"div",9),e.TgZ(32,"div",10),e._uU(33,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA()()(),e.TgZ(34,"div",19)(35,"div",20)(36,"div",21,22)(38,"cf-select",23)(39,"label",24)(40,"span",25),e._uU(41,"M\xe3 v\xf9ng"),e.qZA()(),e.YNc(42,gn,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(43,"div",27,22)(45,"cf-input-group",28)(46,"label",24)(47,"span",25),e._uU(48,"\u0110i\u1ec7n tho\u1ea1i"),e.qZA()(),e.TgZ(49,"input",29),e.NdJ("input",function(o){return n.onPhoneChange(o)}),e.qZA(),e.YNc(50,un,1,1,"cf-input-hint",26),e.YNc(51,pn,1,1,"cf-input-hint",26),e.YNc(52,fn,1,1,"cf-input-hint",26),e.qZA()(),e.TgZ(53,"div",30,22)(55,"cf-input-group",28)(56,"label",24)(57,"span",25),e._uU(58,"Email"),e.qZA()(),e._UZ(59,"input",31),e.YNc(60,hn,1,1,"cf-input-hint",26),e.YNc(61,mn,1,1,"cf-input-hint",26),e.qZA()()()()(),e.TgZ(62,"div",32)(63,"div",7)(64,"div",8),e._UZ(65,"div",9),e.TgZ(66,"div",10),e._uU(67,"Chuy\u1ebfn bay \u0111\xe3 ch\u1ecdn"),e.qZA()()(),e.TgZ(68,"div",33)(69,"div",34)(70,"div")(71,"tickets-selected",35),e.NdJ("showDetail",function(o){return n.onShowDetailInfo(o)}),e.qZA()(),e.YNc(72,_n,7,7,"div",36),e.qZA()()(),e.YNc(73,vn,2,4,"div",37),e.qZA()(),e.TgZ(74,"div",38)(75,"div",34)(76,"div",39)(77,"div",40),e._uU(78,"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n"),e.qZA(),e.TgZ(79,"cf-icon",41),e.NdJ("click",function(){return n.onShare()}),e.qZA()(),e.TgZ(80,"div")(81,"tickets-selected",35),e.NdJ("showDetail",function(o){return n.onShowDetailInfo(o)}),e.qZA()(),e.YNc(82,xn,7,7,"div",36),e.qZA()()(),e.TgZ(83,"div",42)(84,"div",43)(85,"div",44)(86,"button",45),e.NdJ("click",function(){return n.onReselect()}),e._UZ(87,"cf-icon",46),e._uU(88," Ch\u1ecdn l\u1ea1i "),e.qZA()(),e.TgZ(89,"div",47),e.YNc(90,bn,3,1,"button",48),e.YNc(91,Cn,5,1,"button",49),e.qZA()()(),e.YNc(92,yn,2,0,"div",50)),2&t&&(e.xp6(6),e.Q6J("formGroup",n.formGroup),e.xp6(17),e.Q6J("ngForOf",n.getFormArray("adultPassenger").controls),e.xp6(1),e.Q6J("ngForOf",n.getFormArray("childPassenger").controls),e.xp6(1),e.Q6J("ngForOf",n.getFormArray("infantPassenger").controls),e.xp6(1),e.Q6J("ngIf",!n.isHiddenFeature),e.xp6(1),e.Q6J("ngIf",n.isShowForBooker),e.xp6(11),e.Q6J("status",n.formGroup.controls.areaCode.invalid&&(n.formGroup.controls.areaCode.dirty||n.formGroup.controls.areaCode.touched)?"error":"default")("data",n.optionsAreaCode)("allowSearch",!0)("formControl",n.getFormControlInArray(n.formGroup,"areaCode")),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.areaCode.hasError("required")&&(n.formGroup.controls.areaCode.touched||n.formGroup.controls.areaCode.dirty)),e.xp6(3),e.Q6J("status",n.formGroup.controls.phone.invalid&&(n.formGroup.controls.phone.dirty||n.formGroup.controls.phone.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(n.formGroup,"phone")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("required")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("minlength")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.phone.hasError("maxlength")&&(n.formGroup.controls.phone.touched||n.formGroup.controls.phone.dirty)),e.xp6(3),e.Q6J("status",n.formGroup.controls.email.invalid&&(n.formGroup.controls.email.dirty||n.formGroup.controls.email.touched)?"error":"default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.getFormControlInArray(n.formGroup,"email")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.email.hasError("required")&&(n.formGroup.controls.email.touched||n.formGroup.controls.email.dirty)),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.email.hasError("email")&&n.formGroup.controls.email.touched),e.xp6(10),e.Q6J("showReselect",!1)("ticketsSelected",n.listTicketSelected),e.xp6(1),e.Q6J("ngIf",!n.isHiddenTotalCharge),e.xp6(1),e.Q6J("ngIf",!n.isShowForBooker),e.xp6(8),e.Q6J("showReselect",!1)("ticketsSelected",n.listTicketSelected),e.xp6(1),e.Q6J("ngIf",!n.isHiddenTotalCharge),e.xp6(8),e.Q6J("ngIf",n.isShowBooking),e.xp6(1),e.Q6J("ngIf",!n.hasVNAirline&&n.isShowIssued),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[v.ax,v.O5,v.tP,b.B,b.K,m.AxE,m.Sm8,T.j$,T.ND,T.BN,T.v2,f.N8,f.Xq,M.q,h.UX,h.Fj,h.JJ,h.JL,h.oH,h.sg,h.u,J.Vz,Fe,v.JJ,ie.C,x.Cs,y.OR,P.DW,ae.z],encapsulation:2}),i})(),In=(()=>{class i{transform(t,n="required"){var a;return!!(null!=t&&t.invalid&&(null!=t&&t.dirty||null!=t&&t.touched)&&null!==(a=null==t?void 0:t.errors)&&void 0!==a&&a[n])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"controlError",type:i,pure:!0,standalone:!0}),i})()},9497:(w,S,g)=>{g.d(S,{o:()=>m});var v=g(44500),h=g(80529),f=g(61135),b=g(94650);const x={headers:new h.WM({"Content-Type":"application/json"})};let m=(()=>{class T{constructor(y,D){this.http=y,this.appConfig=D,this.currentTime=new f.X(0)}getCurrentTimeEpoch(){return this.http.get(this.appConfig.apiUrl+"system/get-current-time-epoch",x)}}return T.\u0275fac=function(y){return new(y||T)(b.LFG(h.eN),b.LFG(v.qB))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},36634:(w,S,g)=>{g.d(S,{U:()=>h});var v=g(94650);let h=(()=>{class f{get addonBaggageData(){return JSON.parse(sessionStorage.getItem("addonBaggageData"))}set addonBaggageData(x){sessionStorage.setItem("addonBaggageData",JSON.stringify(x))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},86432:(w,S,g)=>{g.d(S,{h:()=>h});var v=g(94650);let h=(()=>{class f{get addonSeatData(){return JSON.parse(sessionStorage.getItem("addonSeatData"))}set addonSeatData(x){sessionStorage.setItem("addonSeatData",JSON.stringify(x))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},4520:(w,S,g)=>{g.d(S,{J:()=>h});var v=g(94650);let h=(()=>{class f{get bookingRequestData(){return JSON.parse(sessionStorage.getItem("bookingRequestData"))}set bookingRequestData(x){sessionStorage.setItem("bookingRequestData",JSON.stringify(x))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},3193:(w,S,g)=>{g.d(S,{m:()=>h});var v=g(94650);let h=(()=>{class f{get bookingResultData(){return JSON.parse(sessionStorage.getItem("bookingResultData"))}set bookingResultData(x){sessionStorage.setItem("bookingResultData",JSON.stringify(x))}get firstBookingResult(){return JSON.parse(sessionStorage.getItem("firstBookingResult"))}set firstBookingResult(x){sessionStorage.setItem("firstBookingResult",JSON.stringify(x))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},3803:(w,S,g)=>{g.d(S,{h:()=>h});var v=g(94650);let h=(()=>{class f{get ticketSelectedData(){return JSON.parse(sessionStorage.getItem("ticketSelectedData"))}set ticketSelectedData(x){sessionStorage.setItem("ticketSelectedData",JSON.stringify(x))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},7453:(w,S,g)=>{g.d(S,{z:()=>h});var v=g(94650);let h=(()=>{class f{onInput(x){const m=x.target.value;/^[0-9]*$/.test(m)||(x.target.value=m.replace(/[^0-9]*/g,""))}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275dir=v.lG2({type:f,selectors:[["","CfNumberic",""]],hostBindings:function(x,m){1&x&&v.NdJ("input",function(M){return m.onInput(M)})},standalone:!0}),f})()}}]);