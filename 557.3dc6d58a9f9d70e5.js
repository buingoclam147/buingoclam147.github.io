"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[557],{58398:(Y,B,s)=>{s.r(B),s.d(B,{BtcDetailTimeConfigAutoComponent:()=>Ke,BtcListTimeConfigAutoComponent:()=>ke});var h=s(36895),l=s(24006),v=s(10908),Z=s(83700),A=s(88516),g=s(72506),y=s(44143),S=s(74713),T=s(76331),D=s(48373),f=s(67534),k=s(77296),C=s(28746),e=s(94650),X=s(62733),P=s(82761),ee=s(80529),re=s(88001),te=s(50494),ie=s(54004),u=s(97582),d=s(87067),I=s(43429);let ce=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"listDayOfWeekExclude",void 0),n})(),se=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"listDayOfWeekException",void 0),n})(),ue=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"startTimeOfDayExclude",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"endTimeOfDayExclude",void 0),n})(),de=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"startTimeExclude",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"endTimeExclude",void 0),n})(),pe=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"startTimeException",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"endTimeException",void 0),n})();const ne={SUNDAY:"Ch\u1ee7 nh\u1eadt",MONDAY:"Th\u1ee9 hai",TUESDAY:"Th\u1ee9 ba",WEDNESDAY:"Th\u1ee9 t\u01b0",THURSDAY:"Th\u1ee9 n\u0103m",FRIDAY:"Th\u1ee9 s\xe1u",SATURDAY:"Th\u1ee9 b\u1ea3y"};let oe=(()=>{class n{get createdTimeDate(){return new Date(this.createdTime)}get listDayOfWeekExcludeStr(){var t;return null!==(t=this.dayOfWeekExclude)&&void 0!==t&&t.listDayOfWeekExclude?this.dayOfWeekExclude.listDayOfWeekExclude.split(",").map(i=>ne[i.trim()]||i).join(", "):""}get listDayOfWeekExceptionStr(){var t;return null!==(t=this.dayOfWeekException)&&void 0!==t&&t.listDayOfWeekException?this.dayOfWeekException.listDayOfWeekException.split(",").map(i=>ne[i.trim()]||i).join(", "):""}}return(0,u.gn)([(0,d.C)()],n.prototype,"id",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"airline",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"startTime",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"endTime",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"createdTime",void 0),(0,u.gn)([(0,I.D)(()=>ce),(0,d.C)()],n.prototype,"dayOfWeekExclude",void 0),(0,u.gn)([(0,I.D)(()=>ue),(0,d.C)()],n.prototype,"listTimeOfDayExclude",void 0),(0,u.gn)([(0,I.D)(()=>de),(0,d.C)()],n.prototype,"listTimeExclude",void 0),(0,u.gn)([(0,I.D)(()=>se),(0,d.C)()],n.prototype,"dayOfWeekException",void 0),(0,u.gn)([(0,I.D)(()=>pe),(0,d.C)()],n.prototype,"listTimeException",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"disabled",void 0),n})(),ge=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,I.D)(()=>oe),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"traceId",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"errorCode",void 0),n})(),me=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,I.D)(()=>oe),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"traceId",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"errorCode",void 0),n})();const w={headers:new ee.WM({"Content-Type":"application/json"})};let le=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}createConfigBtcAutoIssuedTime(t){return this.http.post(this.appConfig.apiUrl+"bc-server/create-config-bc-auto-issued-time",JSON.stringify(t),w)}getListConfigBtcAutoIssuedTime(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-list-config-bc-auto-issued-time",JSON.stringify(t),w).pipe((0,ie.U)(i=>(0,te.yE)(ge,i,{excludeExtraneousValues:!0})))}getDetailConfigBtcAutoIssuedTime(t){return this.http.post(this.appConfig.apiUrl+"bc-server/get-detail-config-bc-auto-issued-time",{id:t},w).pipe((0,ie.U)(i=>(0,te.yE)(me,i,{excludeExtraneousValues:!0})))}updateConfigBtcAutoIssuedTime(t){return this.http.put(this.appConfig.apiUrl+"bc-server/update-detail-config-bc-auto-issued-time",JSON.stringify(t),w)}updateDisableConfigBtcAutoIssuedTime(t,i){return this.http.put(this.appConfig.apiUrl+"bc-server/update-disable-config-bc-auto-issued-time",{id:t,disabled:i},w)}deleteConfigBtcAutoIssuedTime(t){return this.http.delete(`${this.appConfig.apiUrl}bc-server/delete-config-bc-auto-issued-time?id=${t}`,w)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ee.eN),e.LFG(re.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ae=s(62331),fe=s(97579);function he(n,c){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=c.$implicit,i=c.index;e.xp6(1),e.lnq(" ",0!=i?",":""," ",t.startTimeOfDayExclude," - ",t.endTimeOfDayExclude," ")}}function _e(n,c){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=c.$implicit,i=c.index;e.xp6(1),e.lnq(" ",0!=i?",":""," ",t.startTimeExclude," - ",t.endTimeExclude," ")}}function ye(n,c){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=c.$implicit,i=c.index;e.xp6(1),e.lnq(" ",0!=i?",":""," ",t.startTimeException," - ",t.endTimeException," ")}}function Te(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr",27)(1,"td",28),e._uU(2),e.qZA(),e.TgZ(3,"td",29),e._uU(4),e.qZA(),e.TgZ(5,"td",29),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e.YNc(8,he,2,3,"ng-container",31),e.qZA(),e.TgZ(9,"td",29),e._uU(10),e.qZA(),e.TgZ(11,"td",30),e.YNc(12,_e,2,3,"ng-container",31),e.qZA(),e.TgZ(13,"td",30),e.YNc(14,ye,2,3,"ng-container",31),e.qZA(),e.TgZ(15,"td",29),e._uU(16),e.qZA(),e.TgZ(17,"td",29),e._uU(18),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"td",32)(21,"cf-icon",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.editConfig(a))}),e.qZA(),e.TgZ(22,"cf-icon",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteConfig(a))}),e.qZA(),e.TgZ(23,"cf-switch",35),e.NdJ("checkedChange",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onSwitchChange(a))}),e.qZA()()()}if(2&n){const t=c.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",t.airline||"N/A"," "),e.xp6(2),e.hij(" ",t.startTime||"--/--/---"," "),e.xp6(2),e.hij(" ",t.endTime||"--/--/---"," "),e.xp6(2),e.Q6J("ngForOf",t.listTimeOfDayExclude),e.xp6(2),e.hij(" ",t.listDayOfWeekExcludeStr," "),e.xp6(2),e.Q6J("ngForOf",t.listTimeExclude),e.xp6(2),e.Q6J("ngForOf",t.listTimeException),e.xp6(2),e.hij(" ",t.listDayOfWeekExceptionStr," "),e.xp6(2),e.Oqu(e.xi3(19,13,t.createdTimeDate,"dd/MM/yyyy")),e.xp6(2),e.Q6J("sticky","right"),e.xp6(3),e.Q6J("checked",!t.disabled)("color","#277FFF")("disabled",i.isLoadingSwitch)}}function Ce(n,c){1&n&&e._UZ(0,"cf-spinner")}const xe=function(){return{num:25}},ve=function(){return{num:50}},Ee=function(){return{num:75}},De=function(){return{num:100}},Ae=function(n,c,t,i){return[n,c,t,i]};let ke=(()=>{class n{constructor(t,i,o,a,r,p,m){this._flightDataService=o,this._route=a,this.btcTimeConfigAutoTicketSvc=r,this._toastService=p,this._modal=m,this.airlineSelectOption=[],this.pageSize=25,this.currentPage=1,this.dataSource=[],this.TICKET_INFINITE_SCROLL_DEFAULT=10,this.TICKET_INFINITE_OFSET_INCREASE=10,this.ticketInfiniteScrollCount=this.TICKET_INFINITE_SCROLL_DEFAULT,this.dateRangeStr="",this.isLoading=!1,this.numberOfDateFilter=6,this.isLoadingSwitch=!1,this.searchChange=(x,b)=>b,this.sortChange=(x,b)=>b,t.registerIcons([g.wvd,g.esH,g.n78,g.PlV,g.LdZ,g.D7,g.xbi,g.fXw,g.poJ,g.iK7,g.TM4,g.Lxr,g.Hge]),this.searchForm=i.group({startTime:[null],endTime:[null],airline:[""]}),this.search()}ngOnInit(){this.airlineSelectOption=[{name:"T\u1ea5t c\u1ea3 h\xe3ng bay",value:"",logo:this._flightDataService.getAirlineLogoByCode("")},{name:"Vietnam Airlines",value:"VN",logo:this._flightDataService.getAirlineLogoByCode("VN")},{name:"Bamboo Airways",value:"QH",logo:this._flightDataService.getAirlineLogoByCode("QH")},{name:"Vietjet Air",value:"VJ",logo:this._flightDataService.getAirlineLogoByCode("VJ")},{name:"Vietravel Airlines",value:"VU",logo:this._flightDataService.getAirlineLogoByCode("VU")}]}fromDateChange(t){t&&(this.minToDate=new A.Ao(t.getFullYear(),t.getMonth()+1,t.getDate()))}resetRangeDate(t,i){t.setValue(""),i.setValue(""),this.searchForm.patchValue({startTime:null,endTime:null})}onDateSelection(t,i,o,a){if(console.log(t),console.log(i),console.log(o),console.log(a),i.value||o.value)if(i.value&&!o.value&&t&&t.getTime()>=i.value.getTime()){o.setValue(t),a.close(),this.startDate=i.value;const r=(0,h.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=r}else{o.setValue(null),i.setValue(t);const r=(0,h.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}else{i.setValue(t),o.setValue(null);const r=(0,h.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=r+" - "}}search(){if(this.searchForm.valid){console.log(this.searchForm);const t={airline:this.searchForm.controls.airline.value,startTime:this.searchForm.controls.startTime.value?(0,h.p6)(this.searchForm.controls.startTime.value,"dd/MM/yyyy","vi-VN"):null,endTime:this.searchForm.controls.endTime.value?(0,h.p6)(this.searchForm.controls.endTime.value,"dd/MM/yyyy","vi-VN"):null};console.log(t),this.isLoading=!0,this.btcTimeConfigAutoTicketSvc.getListConfigBtcAutoIssuedTime(t).pipe((0,C.x)(()=>this.isLoading=!1)).subscribe({next:i=>{i.data&&(this.dataSource=[...i.data],this.reloadScroll())}}),sessionStorage.setItem("manageBookingFilter",JSON.stringify(this.searchForm.value))}this.searchForm.markAllAsTouched()}reloadScroll(){this.ticketInfiniteScrollCount=this.TICKET_INFINITE_SCROLL_DEFAULT}removeAccents(t){return t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D"):""}checkChange(t){this.pageSize=parseInt(t)}ticketTrackByFn(t,i){return i.bookingCode}onScrollDown(){this.ticketInfiniteScrollCount+=this.TICKET_INFINITE_OFSET_INCREASE}editConfig(t){this._route.navigate(["admin/btc-detail-time-config-auto",t.id])}deleteConfig(t){this._modal.open(f.V0,{title:"X\xf3a c\u1ea5u h\xecnh n\xe0y?",body:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a c\u1ea5u h\xecnh n\xe0y? Vi\u1ec7c n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c, vui l\xf2ng ki\u1ec3m tra k\u0129 tr\u01b0\u1edbc khi thao t\xe1c."}).afterClosed$.subscribe({next:o=>{o.data&&this.btcTimeConfigAutoTicketSvc.deleteConfigBtcAutoIssuedTime(t.id).subscribe({next:a=>{"OK"===a.status?(this.search(),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"X\xf3a c\u1ea5u h\xecnh th\xe0nh c\xf4ng",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"X\xf3a c\u1ea5u h\xecnh th\u1ea5t b\u1ea1i",sticky:!0})}})}})}createConfig(){this._route.navigate(["admin/btc-detail-time-config-auto"])}onSwitchChange(t){this.isLoadingSwitch=!0,this.btcTimeConfigAutoTicketSvc.updateDisableConfigBtcAutoIssuedTime(t.id,!t.disabled).pipe((0,C.x)(()=>this.isLoadingSwitch=!1)).subscribe({next:i=>{i.success?(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh c\xf4ng"}),this.dataSource=[...this.dataSource.map(o=>(o.id===t.id&&(o.disabled=!t.disabled),o))]):(this.dataSource=[...this.dataSource.map(o=>(o.id===t.id&&(o.disabled=!t.disabled),o))],this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\u1ea5t b\u1ea1i"}))}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.KNP),e.Y36(l.qu),e.Y36(X.G),e.Y36(P.F0),e.Y36(le),e.Y36(ae.BX),e.Y36(fe.oE))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-list-time-config-auto"]],standalone:!0,features:[e.jDz],decls:53,vars:30,consts:[[1,"flex","flex-col","py-4","px-[30px]","bg-white","w-full","md:py-3","md:pl-4","md:pr-0"],[1,"text-heading-lg","font-medium","text-neutral-gray-6","mb-3"],[1,"flex","w-full","gap-x-2","md:flex-col"],[1,"flex","mr-2"],[1,"grow",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn th\u1eddi gian",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","mr-2","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","reset","dateSelect"],["dateRange","cfDatepicker"],["textField","name","valueField","value","size","medium",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],[1,"flex-1","flex","flex-col","w-full","justify-end"],["cf-button","","type","secondary","size","medium",1,"justify-center","min-w-[100px]","max-w-[140px]",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"py-4","px-[30px]","rounded-lg"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md"],[1,"p-4","flex","justify-between","items-center"],[1,"text-heading-sm"],["cf-button","",3,"click"],["icon","plus","size","small",1,"mr-2"],[3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap"],["cf-th","",3,"sticky"],["ngFor","",3,"ngForOf"],[4,"ngIf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3","text-body-md"],[1,"py-2","px-3","text-body-sm"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap"],[4,"ngFor","ngForOf"],["cf-td","",1,"py-2","px-3","flex","gap-2","items-center","text-body-sm","whitespace-nowrap","text-right",3,"sticky"],["icon","edit","size","small",1,"cursor-pointer",3,"click"],["icon","delete","size","small",1,"cursor-pointer","ml-2",3,"click"],[3,"checked","color","disabled","checkedChange"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Time xu\u1ea5t v\xe9 t\u1ef1 \u0111\u1ed9ng"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"cf-input-group",4),e._UZ(6,"cf-icon",5),e.TgZ(7,"label",6),e._uU(8,"Th\u1eddi gian"),e.qZA(),e.TgZ(9,"input",7),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(11);return e.KtG(r.open())})("ngModelChange",function(r){return i.dateRangeStr=r}),e.qZA()(),e.TgZ(10,"input",8,9),e.NdJ("reset",function(){return i.resetRangeDate(i.searchForm.controls.startTime,i.searchForm.controls.endTime)})("dateSelect",function(r){e.CHM(o);const p=e.MAs(11);return e.KtG(i.onDateSelection(r,i.searchForm.controls.startTime,i.searchForm.controls.endTime,p))}),e.qZA()(),e.TgZ(12,"cf-select",10)(13,"label",6),e._uU(14,"H\xe3ng bay"),e.qZA()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return i.search()}),e._UZ(17,"cf-icon",13),e._uU(18," T\xecm ki\u1ebfm "),e.qZA()()()(),e.TgZ(19,"div",14)(20,"div",15)(21,"div",16)(22,"div",17),e._uU(23,"Qu\u1ea3n l\xfd danh s\xe1ch time xu\u1ea5t v\xe9 t\u1ef1 \u0111\u1ed9ng"),e.qZA(),e.TgZ(24,"button",18),e.NdJ("click",function(){return i.createConfig()}),e._UZ(25,"cf-icon",19),e._uU(26," T\u1ea1o config "),e.qZA()(),e.TgZ(27,"cf-table",20,21)(29,"thead",22)(30,"th",23),e._uU(31,"H\xe3ng bay"),e.qZA(),e.TgZ(32,"th",23),e._uU(33,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),e.qZA(),e.TgZ(34,"th",23),e._uU(35,"Ng\xe0y k\u1ebft th\xfac"),e.qZA(),e.TgZ(36,"th",23),e._uU(37,"Lo\u1ea1i tr\u1eeb theo gi\u1edd"),e.qZA(),e.TgZ(38,"th",23),e._uU(39,"Lo\u1ea1i tr\u1eeb theo th\u1ee9"),e.qZA(),e.TgZ(40,"th",23),e._uU(41,"Lo\u1ea1i tr\u1eeb ng\xe0y c\u1ee5 th\u1ec3"),e.qZA(),e.TgZ(42,"th",23),e._uU(43,"Ngo\u1ea1i l\u1ec7 ng\xe0y c\u1ee5 th\u1ec3"),e.qZA(),e.TgZ(44,"th",23),e._uU(45,"Ngo\u1ea1i l\u1ec7 theo th\u1ee9"),e.qZA(),e.TgZ(46,"th",23),e._uU(47,"Ng\xe0y t\u1ea1o"),e.qZA(),e.TgZ(48,"th",24),e._uU(49," Ch\u1ee9c n\u0103ng"),e.qZA()(),e.TgZ(50,"tbody"),e.YNc(51,Te,24,16,"ng-template",25),e.qZA()()()(),e.YNc(52,Ce,1,0,"cf-spinner",26)}2&t&&(e.xp6(5),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",i.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",i.startDate)("canReset",!0)("fromDate",i.searchForm.controls.startTime.value)("toDate",i.searchForm.controls.endTime.value),e.xp6(2),e.Q6J("formControl",i.searchForm.controls.airline)("data",i.airlineSelectOption)("allowSearch",!1),e.xp6(15),e.Q6J("fnSort",i.sortChange)("fnSearch",i.searchChange)("pageSizeList",e.l5B(25,Ae,e.DdM(21,xe),e.DdM(22,ve),e.DdM(23,Ee),e.DdM(24,De)))("listData",i.dataSource)("pageSize",i.pageSize),e.xp6(21),e.Q6J("sticky","right"),e.xp6(3),e.Q6J("ngForOf",i.dataSource),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[S.q,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,y.j$,y.ND,y.BN,h.ez,h.sg,h.O5,h.uU,g.AxE,g.Sm8,A.Cs,Z.N8,Z.Xq,D.rC,D.E_,D.qS,D.zs,k.Rq,f.OR,v.DW,T.I],encapsulation:2}),n})();var be=s(17736),Ze=s(34541),Se=s(80429),Q=s(54801),U=s(47910);function Be(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn h\xe3ng bay")}function Fe(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function Ie(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function Me(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn th\u1ee9 trong tu\u1ea7n ")}function Je(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"cf-multi-select",34)(2,"label",35),e._uU(3," Ch\u1ecdn th\u1ee9 "),e.qZA(),e.YNc(4,Me,1,1,"cf-input-hint",7),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let o,a;e.xp6(1),e.Q6J("status",null!=(o=t.get("dayPicker"))&&o.invalid&&(null!=(o=t.get("dayPicker"))&&o.dirty||null!=(o=t.get("dayPicker"))&&o.touched)?"error":"default")("data",i.dayPickerOptions)("allowSearch",!1)("size","small"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==(a=t.get("dayPicker"))||null==a.errors?null:a.errors.required)&&((null==(a=t.get("dayPicker"))?null:a.dirty)||(null==(a=t.get("dayPicker"))?null:a.touched)))}}function Ne(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function Oe(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function qe(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"cf-input-group",10),e._UZ(2,"cf-icon",11),e.TgZ(3,"label",5),e._uU(4," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(5,"input",36,13),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.close())}),e.qZA(),e.YNc(7,Ne,1,1,"cf-input-hint",7),e.qZA(),e.TgZ(8,"cf-input-group",10),e._UZ(9,"cf-icon",11),e.TgZ(10,"label",5),e._uU(11," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(12,"input",37,15),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(13);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(13);return e.KtG(o.close())}),e.ALo(14,"mapper"),e.qZA(),e.YNc(15,Oe,1,1,"cf-input-hint",7),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);let o,a,r,p,m;e.xp6(1),e.Q6J("status",null!=(o=t.get("startDate"))&&o.invalid&&(null!=(o=t.get("startDate"))&&o.dirty||null!=(o=t.get("startDate"))&&o.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",i.minDate),e.xp6(2),e.Q6J("ngIf",(null==(a=t.get("startDate"))||null==a.errors?null:a.errors.required)&&((null==(a=t.get("startDate"))?null:a.dirty)||(null==(a=t.get("startDate"))?null:a.touched))),e.xp6(1),e.Q6J("status",null!=(r=t.get("endDate"))&&r.invalid&&(null!=(r=t.get("endDate"))&&r.dirty||null!=(r=t.get("endDate"))&&r.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("minDate",e.xi3(14,13,null==(p=t.get("startDate"))?null:p.value,i.mapperDateToCfDate))("secondaryCalendar","lunar"),e.xp6(3),e.Q6J("ngIf",(null==(m=t.get("endDate"))||null==m.errors?null:m.errors.required)&&((null==(m=t.get("endDate"))?null:m.dirty)||(null==(m=t.get("endDate"))?null:m.touched)))}}function we(n,c){1&n&&e._UZ(0,"cf-input-hint",42),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn gi\u1edd b\u1eaft \u0111\u1ea7u ")}function Qe(n,c){1&n&&e._UZ(0,"cf-input-hint",42),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn gi\u1edd k\u1ebft th\xfac")}function Ue(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"div",38)(2,"label",5),e._uU(3,"Gi\u1edd b\u1eaft \u0111\u1ea7u"),e.qZA(),e._UZ(4,"time-picker",39),e.YNc(5,we,1,1,"cf-input-hint",40),e.qZA(),e.TgZ(6,"div",38)(7,"label",5),e._uU(8,"Gi\u1edd k\u1ebft th\xfac"),e.qZA(),e._UZ(9,"time-picker",41),e.YNc(10,Qe,1,1,"cf-input-hint",40),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;let i,o,a,r,p;e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("error",(null==(i=t.get("startTime"))?null:i.hasError("required"))&&((null==(i=t.get("startTime"))?null:i.touched)||(null==(i=t.get("startTime"))?null:i.dirty))),e.xp6(1),e.Q6J("ngIf",(null==(o=t.get("startTime"))||null==o.errors?null:o.errors.required)&&((null==(o=t.get("startTime"))?null:o.dirty)||(null==(o=t.get("startTime"))?null:o.touched))),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("disabledTimes",null==(a=t.get("startTime"))?null:a.value)("error",(null==(r=t.get("endTime"))?null:r.hasError("required"))&&((null==(r=t.get("endTime"))?null:r.touched)||(null==(r=t.get("endTime"))?null:r.dirty))),e.xp6(1),e.Q6J("ngIf",(null==(p=t.get("endTime"))||null==p.errors?null:p.errors.required)&&((null==(p=t.get("endTime"))?null:p.dirty)||(null==(p=t.get("endTime"))?null:p.touched)))}}function Le(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28)(2,"cf-select",29),e.NdJ("selectedChange",function(){const o=e.CHM(t),a=o.index,r=o.$implicit,p=e.oxw(2);return e.KtG(p.onExceptTypeChange(a,r.value.type))}),e.TgZ(3,"label",5),e._uU(4," Type "),e.qZA()(),e.ynx(5,30),e.YNc(6,Je,5,6,"ng-container",31),e.YNc(7,qe,16,16,"ng-container",31),e.YNc(8,Ue,11,7,"ng-container",32),e.BQk(),e.TgZ(9,"cf-icon",33),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.removeExcept(a))}),e.qZA()(),e.BQk()}if(2&n){const t=c.$implicit,i=c.index,o=e.oxw(2);let a;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("status",null!=(a=t.get("type"))&&a.invalid&&(null!=(a=t.get("type"))&&a.dirty||null!=(a=t.get("type"))&&a.touched)?"error":"default")("data",o.exceptTypeOptions)("allowSearch",!1),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngSwitch",t.value.type),e.xp6(1),e.Q6J("ngSwitchCase","day"),e.xp6(1),e.Q6J("ngSwitchCase","date")}}function Ve(n,c){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1,26),e.YNc(2,Le,10,8,"ng-container",27),e.BQk(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.excepts.controls)}}function Ye(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn th\u1ee9 trong tu\u1ea7n ")}function Pe(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"cf-multi-select",34)(2,"label",35),e._uU(3," Ch\u1ecdn th\u1ee9 "),e.qZA(),e.YNc(4,Ye,1,1,"cf-input-hint",7),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let o,a;e.xp6(1),e.Q6J("status",null!=(o=t.get("dayPicker"))&&o.invalid&&(null!=(o=t.get("dayPicker"))&&o.dirty||null!=(o=t.get("dayPicker"))&&o.touched)?"error":"default")("data",i.dayPickerOptions)("allowSearch",!1)("size","small"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==(a=t.get("dayPicker"))||null==a.errors?null:a.errors.required)&&((null==(a=t.get("dayPicker"))?null:a.dirty)||(null==(a=t.get("dayPicker"))?null:a.touched)))}}function Re(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u")}function We(n,c){1&n&&e._UZ(0,"cf-input-hint",24),2&n&&e.Q6J("hint","Vui l\xf2ng ch\u1ecdn ng\xe0y k\u1ebft th\xfac")}function ze(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"cf-input-group",10),e._UZ(2,"cf-icon",11),e.TgZ(3,"label",5),e._uU(4," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(5,"input",36,13),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.close())}),e.qZA(),e.YNc(7,Re,1,1,"cf-input-hint",7),e.qZA(),e.TgZ(8,"cf-input-group",10),e._UZ(9,"cf-icon",11),e.TgZ(10,"label",5),e._uU(11," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(12,"input",37,15),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(13);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(13);return e.KtG(o.close())}),e.ALo(14,"mapper"),e.qZA(),e.YNc(15,We,1,1,"cf-input-hint",7),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);let o,a,r,p,m;e.xp6(1),e.Q6J("status",null!=(o=t.get("startDate"))&&o.invalid&&(null!=(o=t.get("startDate"))&&o.dirty||null!=(o=t.get("startDate"))&&o.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",i.minDate),e.xp6(2),e.Q6J("ngIf",(null==(a=t.get("startDate"))||null==a.errors?null:a.errors.required)&&((null==(a=t.get("startDate"))?null:a.dirty)||(null==(a=t.get("startDate"))?null:a.touched))),e.xp6(1),e.Q6J("status",null!=(r=t.get("endDate"))&&r.invalid&&(null!=(r=t.get("endDate"))&&r.dirty||null!=(r=t.get("endDate"))&&r.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("minDate",e.xi3(14,13,null==(p=t.get("startDate"))?null:p.value,i.mapperDateToCfDate))("secondaryCalendar","lunar"),e.xp6(3),e.Q6J("ngIf",(null==(m=t.get("endDate"))||null==m.errors?null:m.errors.required)&&((null==(m=t.get("endDate"))?null:m.dirty)||(null==(m=t.get("endDate"))?null:m.touched)))}}function He(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28)(2,"cf-select",29),e.NdJ("selectedChange",function(){const o=e.CHM(t),a=o.index,r=o.$implicit,p=e.oxw(2);return e.KtG(p.onlayTypeChange(a,r.value.type))}),e.TgZ(3,"label",5),e._uU(4," Type "),e.qZA()(),e.ynx(5,30),e.YNc(6,Pe,5,6,"ng-container",31),e.YNc(7,ze,16,16,"ng-container",32),e.BQk(),e.TgZ(8,"cf-icon",33),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.removeLaybys(a))}),e.qZA()(),e.BQk()}if(2&n){const t=c.$implicit,i=c.index,o=e.oxw(2);let a;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("status",null!=(a=t.get("type"))&&a.invalid&&(null!=(a=t.get("type"))&&a.dirty||null!=(a=t.get("type"))&&a.touched)?"error":"default")("data",o.laybysTypeOptions)("allowSearch",!1),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngSwitch",t.value.type),e.xp6(1),e.Q6J("ngSwitchCase","day")}}function je(n,c){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1,43),e.YNc(2,He,9,7,"ng-container",27),e.BQk(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.laybys.controls)}}let Ke=(()=>{class n{constructor(t,i,o,a,r,p,m){this.fb=t,this.calendar=o,this._toastService=a,this.btcTimeConfigAutoTicketSvc=r,this.route=p,this._router=m,this.exceptTypeOptions=[{value:"time",text:"Theo gi\u1edd"},{value:"day",text:"Theo th\u1ee9"},{value:"date",text:"Ng\xe0y c\u1ee5 th\u1ec3"}],this.laybysTypeOptions=[{value:"day",text:"Theo th\u1ee9"},{value:"date",text:"Ng\xe0y c\u1ee5 th\u1ec3"}],this.airlineOptions=[{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"VietJet Air"},{value:"QH",text:"Bamboo Airways"},{value:"VU",text:"Vietravel Airlines"}],this.dayPickerOptions=[{value:"MONDAY",text:"Th\u1ee9 2"},{value:"TUESDAY",text:"Th\u1ee9 3"},{value:"WEDNESDAY",text:"Th\u1ee9 4"},{value:"THURSDAY",text:"Th\u1ee9 5"},{value:"FRIDAY",text:"Th\u1ee9 6"},{value:"SATURDAY",text:"Th\u1ee9 7"},{value:"SUNDAY",text:"Ch\u1ee7 nh\u1eadt"}],this.isExpanded=!0,this.isExpandedLaybys=!0,this.mapperDateToCfDate=x=>(console.log(x),x?{year:x.getFullYear(),month:x.getMonth()+1,day:x.getDate()}:this.minDate),this.minDate=this.calendar.getToday(),i.registerIcons([g.n78,g.fqi,g.UNF,g.NNX]),this.form=this.fb.group({id:[null],airline:[null,l.kI.required],startTime:[null,l.kI.required],endTime:[null,l.kI.required],excepts:this.fb.array([]),laybys:this.fb.array([])})}get excepts(){return this.form.get("excepts")}get laybys(){return this.form.get("laybys")}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.loadDetail(t)}loadDetail(t){this.btcTimeConfigAutoTicketSvc.getDetailConfigBtcAutoIssuedTime(t).subscribe(i=>{i.success&&i.data&&this.patchForm(i.data)})}patchForm(t){if(this.form.patchValue({id:t.id,airline:t.airline,startTime:(0,Q.Z)(t.startTime,"dd/MM/yyyy",new Date),endTime:(0,Q.Z)(t.endTime,"dd/MM/yyyy",new Date)}),this.excepts.clear(),this.laybys.clear(),t.listTimeOfDayExclude&&t.listTimeOfDayExclude.length)for(const i of t.listTimeOfDayExclude){const o=this.fb.group({type:["time",l.kI.required],startDate:[null],endDate:[null],startTime:[i.startTimeOfDayExclude,l.kI.required],endTime:[i.endTimeOfDayExclude,l.kI.required],dayPicker:[null]});this.excepts.push(o)}if(t.listTimeExclude&&t.listTimeExclude.length)for(const i of t.listTimeExclude){const o=this.fb.group({type:["date",l.kI.required],startDate:[(0,Q.Z)(i.startTimeExclude,"dd/MM/yyyy",new Date),l.kI.required],endDate:[(0,Q.Z)(i.endTimeExclude,"dd/MM/yyyy",new Date),l.kI.required],startTime:[null],endTime:[null],dayPicker:[null]});this.excepts.push(o)}if(t.dayOfWeekExclude&&t.dayOfWeekExclude.listDayOfWeekExclude){const i=this.fb.group({type:["day",l.kI.required],startDate:[null],endDate:[null],startTime:[null],endTime:[null],dayPicker:[t.dayOfWeekExclude.listDayOfWeekExclude.split(",")]});this.excepts.push(i)}if(t.listTimeException&&t.listTimeException.length)for(const i of t.listTimeException){const o=this.fb.group({type:["date",l.kI.required],startDate:[(0,Q.Z)(i.startTimeException,"dd/MM/yyyy",new Date),l.kI.required],endDate:[(0,Q.Z)(i.endTimeException,"dd/MM/yyyy",new Date),l.kI.required],dayPicker:[null]});this.laybys.push(o)}if(t.dayOfWeekException&&t.dayOfWeekException.listDayOfWeekException){const i=this.fb.group({type:["day",l.kI.required],startDate:[null],endDate:[null],dayPicker:[t.dayOfWeekException.listDayOfWeekException.split(",")]});this.laybys.push(i)}}createExcept(){return this.fb.group({type:["time",l.kI.required],startDate:[null],endDate:[null],startTime:[null,l.kI.required],endTime:[null,l.kI.required],dayPicker:[null]})}addLaybys(){this.laybys.push(this.createLaybys()),console.log(this.laybys)}removeLaybys(t){this.laybys.removeAt(t)}createLaybys(){return this.fb.group({type:["date",l.kI.required],startDate:[null],endDate:[null],dayPicker:[null]})}addExcept(){this.excepts.push(this.createExcept()),console.log(this.excepts)}removeExcept(t){this.excepts.removeAt(t)}onExceptTypeChange(t,i){var o,a,r,p,m,x,b,M,J,N,F,E,O,L,q,R,W,z,H,j,K;const V=[];if(this.excepts.controls.forEach((G,Ge)=>{var $;"day"===(null===($=G.get("type"))||void 0===$?void 0:$.value)&&V.push(Ge)}),V.length>1){const G=V[V.length-1];setTimeout(()=>{this.excepts.at(G).patchValue({type:"time"})}),this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ed1i \u0111a 1 lo\u1ea1i tr\u1eeb theo th\u1ee9",sticky:!0})}const _=this.excepts.at(t);null===(o=_.get("type"))||void 0===o||o.setValue(i),"time"===i?(null===(a=_.get("startDate"))||void 0===a||a.clearValidators(),null===(r=_.get("endDate"))||void 0===r||r.clearValidators(),null===(p=_.get("dayPicker"))||void 0===p||p.clearValidators(),null===(m=_.get("startTime"))||void 0===m||m.setValidators([l.kI.required]),null===(x=_.get("endTime"))||void 0===x||x.setValidators([l.kI.required])):"day"===i?(null===(b=_.get("startDate"))||void 0===b||b.clearValidators(),null===(M=_.get("endDate"))||void 0===M||M.clearValidators(),null===(J=_.get("dayPicker"))||void 0===J||J.setValidators([l.kI.required]),null===(N=_.get("startTime"))||void 0===N||N.clearValidators(),null===(F=_.get("endTime"))||void 0===F||F.clearValidators()):(null===(E=_.get("startDate"))||void 0===E||E.setValidators([l.kI.required]),null===(O=_.get("endDate"))||void 0===O||O.setValidators([l.kI.required]),null===(L=_.get("startTime"))||void 0===L||L.clearValidators(),null===(q=_.get("endTime"))||void 0===q||q.clearValidators(),null===(R=_.get("dayPicker"))||void 0===R||R.clearValidators()),null===(W=_.get("startDate"))||void 0===W||W.updateValueAndValidity(),null===(z=_.get("endDate"))||void 0===z||z.updateValueAndValidity(),null===(H=_.get("dayPicker"))||void 0===H||H.updateValueAndValidity(),null===(j=_.get("startTime"))||void 0===j||j.updateValueAndValidity(),null===(K=_.get("endTime"))||void 0===K||K.updateValueAndValidity()}onlayTypeChange(t,i){var o,a,r,p,m,x,b,M,J,N;const F=[];if(this.laybys.controls.forEach((O,L)=>{var q;"day"===(null===(q=O.get("type"))||void 0===q?void 0:q.value)&&F.push(L)}),F.length>1){const O=F[F.length-1];setTimeout(()=>{this.laybys.at(O).patchValue({type:"date"})}),this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ed1i \u0111a 1 lo\u1ea1i l\u1ec7 theo th\u1ee9",sticky:!0})}const E=this.laybys.at(t);null===(o=E.get("type"))||void 0===o||o.setValue(i),"day"===i?(null===(a=E.get("startDate"))||void 0===a||a.clearValidators(),null===(r=E.get("endDate"))||void 0===r||r.clearValidators(),null===(p=E.get("dayPicker"))||void 0===p||p.setValidators([l.kI.required])):(null===(m=E.get("startDate"))||void 0===m||m.setValidators([l.kI.required]),null===(x=E.get("endDate"))||void 0===x||x.setValidators([l.kI.required]),null===(b=E.get("dayPicker"))||void 0===b||b.clearValidators()),null===(M=E.get("startDate"))||void 0===M||M.updateValueAndValidity(),null===(J=E.get("endDate"))||void 0===J||J.updateValueAndValidity(),null===(N=E.get("dayPicker"))||void 0===N||N.updateValueAndValidity()}onSubmit(){if(console.log(this.form),this.form.markAllAsTouched(),this.form.invalid)return;const t=this.form.value;t.id?this.btcTimeConfigAutoTicketSvc.updateConfigBtcAutoIssuedTime(Object.assign(Object.assign({},this.transformData(t)),{id:t.id})).subscribe(i=>{var o,a;i.success?(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"C\u1eadp nh\u1eadt c\u1ea5u h\xecnh th\xe0nh c\xf4ng"}),this._router.navigate(["admin/btc-list-time-config-auto"])):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:null===(a=null===(o=i.objectError)||void 0===o?void 0:o.errorDescription)||void 0===a?void 0:a.vi})}):(this.btcTimeConfigAutoTicketSvc.createConfigBtcAutoIssuedTime(this.transformData(t)).subscribe(i=>{var o,a;i.success?(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"T\u1ea1o c\u1ea5u h\xecnh th\xe0nh c\xf4ng"}),this._router.navigate(["admin/btc-list-time-config-auto"])):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:null===(a=null===(o=i.objectError)||void 0===o?void 0:o.errorDescription)||void 0===a?void 0:a.vi})}),console.log(this.transformData(t)))}transformData(t){console.log(t);const i={airline:t.airline,startTime:(0,U.Z)(t.startTime,"dd/MM/yyyy"),endTime:(0,U.Z)(t.endTime,"dd/MM/yyyy"),createdTime:(new Date).toISOString().slice(0,19),dayOfWeekExclude:null,listTimeOfDayExclude:[],listTimeExclude:[],dayOfWeekException:null,listTimeException:[]},o=[],a=[];for(const r of t.excepts)switch(r.type){case"day":r.dayPicker&&o.push(...r.dayPicker);break;case"time":i.listTimeOfDayExclude.push({startTimeOfDayExclude:r.startTime,endTimeOfDayExclude:r.endTime});break;case"date":i.listTimeExclude.push({startTimeExclude:(0,U.Z)(r.startDate,"dd/MM/yyyy"),endTimeExclude:(0,U.Z)(r.endDate,"dd/MM/yyyy")})}o.length>0&&(i.dayOfWeekExclude={listDayOfWeekExclude:o.join(",")});for(const r of t.laybys)switch(r.type){case"day":r.dayPicker&&a.push(...r.dayPicker);break;case"date":i.listTimeException.push({startTimeException:(0,U.Z)(r.startDate,"dd/MM/yyyy"),endTimeException:(0,U.Z)(r.endDate,"dd/MM/yyyy")})}return a.length>0&&(i.dayOfWeekException={listDayOfWeekException:a.join(",")}),console.log(i),i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(g.KNP),e.Y36(A.jH),e.Y36(ae.BX),e.Y36(le),e.Y36(P.gz),e.Y36(P.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["btc-detail-time-config-auto"]],standalone:!0,features:[e.jDz],decls:54,vars:27,consts:[[1,"flex","flex-col","gap-4","p-6",3,"formGroup"],[1,"w-full","max-w-[764px]","bg-white","rounded-lg","shadow-md","p-6","flex","flex-col","gap-3","mx-auto"],[1,"text-gray-6","font-medium","text-heading-sm"],[1,"text-neutral-gray-4","text-heading-xs"],[1,"text-espressive-md","text-neutral-gray-5","mb-1.5","empty:!m-0"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["textField","text","valueField","value","size","medium","placeholder","Ch\u1ecdn h\xe3ng","formControlName","airline",1,"!w-full","!max-w-full",3,"status","data"],["cfHint","",3,"hint",4,"ngIf"],[1,"w-full","flex","gap-4"],[1,"w-full","flex-1","flex","gap-2"],[1,"grow-[400]","flex-1",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","formControlName","startTime","placeholder","Ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["dateFrom","cfDatepicker"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","formControlName","endTime","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"displayMonths","secondaryCalendar","minDate","input","dateSelect"],["dateTo","cfDatepicker"],[1,"flex","justify-between","items-center","mt-2"],[1,"text-neutral-gray-6","font-medium","text-body-sm"],["size","small",1,"cursor-pointer",3,"icon","click"],["class","flex flex-col gap-4",4,"ngIf"],[1,"text-blue-4","font-bold","text-body-sm","cursor-pointer","w-fit",3,"click"],[1,"flex","justify-end","mx-auto","items-center","w-full","max-w-[764px]"],["cf-button","",1,"min-w-[100px]","justify-center","text-white",3,"click"],["icon","check","size","small",1,"mr-1.5"],["cfHint","",3,"hint"],[1,"flex","flex-col","gap-4"],["formArrayName","excepts"],[4,"ngFor","ngForOf"],[1,"flex","gap-4","w-full",3,"formGroupName"],["textField","text","valueField","value","placeholder","type","formControlName","type",1,"w-full","max-w-[220px]",3,"status","data","allowSearch","selectedChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["icon","close","size","small",1,"cursor-pointer","h-full","mt-10",3,"click"],["textField","text","valueField","value","placeholder","Ch\u1ecdn th\u1ee9 trong tu\u1ea7n","formControlName","dayPicker",1,"flex-1","w-full","max-w-full",3,"status","data","allowSearch","size"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","formControlName","startDate","placeholder","T\u1eeb ng\xe0y",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","formControlName","endDate","placeholder","\u0110\u1ebfn ng\xe0y",1,"py-[7px]",3,"minDate","secondaryCalendar","input","dateSelect"],[1,"flex-1","gap-1","mt-1","flex","flex-col"],["formControlName","startTime",1,"flex-1",3,"error"],["cfHint","","class","text-primary-1-4 text-body-sm",3,"hint",4,"ngIf"],["formControlName","endTime",1,"flex-1",3,"disabledTimes","error"],["cfHint","",1,"text-primary-1-4","text-body-sm",3,"hint"],["formArrayName","laybys"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._uU(3," H\xe3ng bay "),e.qZA(),e.TgZ(4,"div",3),e._uU(5," Ch\u1ec9 \u0111\u1ecbnh h\xe3ng bay \u0111\u01b0\u1ee3c xu\u1ea5t v\xe9 t\u1ef1 \u0111\u1ed9ng "),e.qZA(),e.TgZ(6,"div")(7,"div",4)(8,"label",5),e._uU(9," Ch\u1ecdn h\xe3ng "),e.qZA()(),e.TgZ(10,"cf-select",6),e.YNc(11,Be,1,1,"cf-input-hint",7),e.qZA()()(),e.TgZ(12,"div",1)(13,"div",2),e._uU(14," Th\u1eddi gian xu\u1ea5t v\xe9 t\u1ef1 \u0111\u1ed9ng "),e.qZA(),e.TgZ(15,"div",3),e._uU(16," Th\u1eddi gian \xe1p d\u1ee5ng xu\u1ea5t v\xe9 t\u1ef1 \u0111\u1ed9ng "),e.qZA(),e.TgZ(17,"div",8)(18,"div",9)(19,"cf-input-group",10),e._UZ(20,"cf-icon",11),e.TgZ(21,"label",5),e._uU(22," Ng\xe0y b\u1eaft \u0111\u1ea7u "),e.qZA(),e.TgZ(23,"input",12,13),e.NdJ("input",function(){e.CHM(o);const r=e.MAs(24);return e.KtG(r.close())})("dateSelect",function(){e.CHM(o);const r=e.MAs(24);return e.KtG(r.close())}),e.qZA(),e.YNc(25,Fe,1,1,"cf-input-hint",7),e.qZA(),e.TgZ(26,"cf-input-group",10),e._UZ(27,"cf-icon",11),e.TgZ(28,"label",5),e._uU(29," Ng\xe0y k\u1ebft th\xfac "),e.qZA(),e.TgZ(30,"input",14,15),e.NdJ("input",function(){e.CHM(o);const r=e.MAs(31);return e.KtG(r.close())})("dateSelect",function(){e.CHM(o);const r=e.MAs(31);return e.KtG(r.close())}),e.ALo(32,"mapper"),e.qZA(),e.YNc(33,Ie,1,1,"cf-input-hint",7),e.qZA()()(),e.TgZ(34,"div")(35,"div",16)(36,"div",17),e._uU(37," Tu\u1ef3 ch\u1ec9nh th\u1eddi gian lo\u1ea1i tr\u1eeb "),e.qZA(),e.TgZ(38,"cf-icon",18),e.NdJ("click",function(){return i.isExpanded=!i.isExpanded}),e.qZA()(),e.YNc(39,Ve,3,1,"div",19),e.TgZ(40,"div",20),e.NdJ("click",function(){return i.addExcept()}),e._uU(41," Th\xeam th\u1eddi gian lo\u1ea1i tr\u1eeb "),e.qZA()(),e.TgZ(42,"div")(43,"div",16)(44,"div",17),e._uU(45," T\xf9y ch\u1ec9nh t\u1eddi gian ngo\u1ea1i l\u1ec7 (kh\xf4ng \xe1p d\u1ee5ng lo\u1ea1i tr\u1eeb) "),e.qZA(),e.TgZ(46,"cf-icon",18),e.NdJ("click",function(){return i.isExpandedLaybys=!i.isExpandedLaybys}),e.qZA()(),e.YNc(47,je,3,1,"div",19),e.TgZ(48,"div",20),e.NdJ("click",function(){return i.addLaybys()}),e._uU(49," Th\xeam th\u1eddi gian ngo\u1ea1i l\u1ec7 "),e.qZA()()(),e.TgZ(50,"div",21)(51,"button",22),e.NdJ("click",function(){return i.onSubmit()}),e._UZ(52,"cf-icon",23),e._uU(53),e.qZA()()()}2&t&&(e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("status",i.form.controls.airline.invalid&&(i.form.controls.airline.dirty||i.form.controls.airline.touched)?"error":"default")("data",i.airlineOptions),e.xp6(1),e.Q6J("ngIf",(null==i.form.controls.airline.errors?null:i.form.controls.airline.errors.required)&&(i.form.controls.airline.dirty||i.form.controls.airline.touched)),e.xp6(8),e.Q6J("status",i.form.controls.startTime.invalid&&(i.form.controls.startTime.dirty||i.form.controls.startTime.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",i.minDate),e.xp6(2),e.Q6J("ngIf",(null==i.form.controls.startTime.errors?null:i.form.controls.startTime.errors.required)&&(i.form.controls.startTime.dirty||i.form.controls.startTime.touched)),e.xp6(1),e.Q6J("status",i.form.controls.endTime.invalid&&(i.form.controls.endTime.dirty||i.form.controls.endTime.touched)?"error":"default")("status","default"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("displayMonths",1)("secondaryCalendar","lunar")("minDate",e.xi3(32,24,i.form.controls.startTime.value,i.mapperDateToCfDate)),e.xp6(3),e.Q6J("ngIf",(null==i.form.controls.endTime.errors?null:i.form.controls.endTime.errors.required)&&(i.form.controls.endTime.dirty||i.form.controls.endTime.touched)),e.xp6(5),e.Q6J("icon",i.isExpanded?"chevron_down":"chevron_up"),e.xp6(1),e.Q6J("ngIf",i.isExpanded),e.xp6(7),e.Q6J("icon",i.isExpandedLaybys?"chevron_down":"chevron_up"),e.xp6(1),e.Q6J("ngIf",i.isExpandedLaybys),e.xp6(6),e.hij(" ",i.form.value.id?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi"," "))},dependencies:[h.ez,h.sg,h.O5,h.RF,h.n9,h.ED,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,g.AxE,g.Sm8,S.q,Ze.C,y.j$,y.ND,y.BN,y.v2,A.Cs,f.eQ,be.U,Se.q,Z.N8,Z.Xq],encapsulation:2}),n})()},80429:(Y,B,s)=>{s.d(B,{q:()=>l});var h=s(94650);let l=(()=>{class v{transform(A,g,...y){return g(A,...y)}}return v.\u0275fac=function(A){return new(A||v)},v.\u0275pipe=h.Yjl({name:"mapper",type:v,pure:!0,standalone:!0}),v})()},4688:(Y,B,s)=>{s.d(B,{b:()=>g});var h=s(36895),l=s(94650),v=s(72506);function Z(y,S){if(1&y){const T=l.EpF();l.TgZ(0,"cf-icon",3),l.NdJ("click",function(f){l.CHM(T);const k=l.oxw();return l.KtG(k.close(f))}),l.qZA()}}const A=["*"];let g=(()=>{class y{constructor(T,D,f){this.renderer=T,this.elementRef=D,this.mode="default",this.type="solid",this.size="medium",this.color="red",this.onClose=new l.vpe,f.registerIcons([v.UNF])}ngOnChanges(T){this.loadClasses()}ngOnInit(){this.loadClasses()}loadClasses(){this.classes="rounded inline-flex justify-center items-center gap-x-1 "+this.getSizeClass()+" "+this.getModeClass()}getSizeClass(){return"small"===this.size?"py-1 px-2 text-express-sm":"xsmall"===this.size?"py-[2px] px-1 text-express-sm":"py-1.5 px-3 text-express-md"}getModeClass(){return"outline"===this.type?`bg-white bordertext-${this.color}-4 border-${this.color}-4`:"inverted"===this.type?`bg-${this.color}-1 text-${this.color}-4`:"gray-2"===this.color?"text-neutral-gray-6 bg-neutral-gray-2":`text-neutral-white bg-${this.color}-4`}close(T){this.onClose.emit(T),T.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return y.\u0275fac=function(T){return new(T||y)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(v.KNP))},y.\u0275cmp=l.Xpm({type:y,selectors:[["cf-label"]],hostVars:2,hostBindings:function(T,D){2&T&&l.Tol(D.classes)},inputs:{mode:"mode",type:"type",size:"size",color:"color"},outputs:{onClose:"onClose"},standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:A,decls:4,vars:1,consts:[[1,"flex","justify-between","items-center","gap-x-2"],[1,"text-ellipsis","overflow-hidden","whitespace-normal","flex","items-center"],["icon","close","size","small","class","cursor-pointer",3,"click",4,"ngIf"],["icon","close","size","small",1,"cursor-pointer",3,"click"]],template:function(T,D){1&T&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1),l.Hsn(2),l.qZA(),l.YNc(3,Z,1,0,"cf-icon",2),l.qZA()),2&T&&(l.xp6(3),l.Q6J("ngIf","closeable"===D.mode))},dependencies:[h.ez,h.O5,v.AxE,v.Sm8],encapsulation:2,changeDetection:0}),y})()},76331:(Y,B,s)=>{s.d(B,{I:()=>D});var h=s(36895),l=s(94650),v=s(24006);function Z(f,k){if(1&f&&(l.ynx(0),l._uU(1),l.BQk()),2&f){const C=l.oxw(2);l.xp6(1),l.hij(" ",C.checkedChildren," ")}}function A(f,k){if(1&f&&l._uU(0),2&f){const C=l.oxw(2);l.hij(" ",C.unCheckedChildren," ")}}function g(f,k){if(1&f&&(l.ynx(0),l.YNc(1,Z,2,1,"ng-container",2),l.YNc(2,A,1,1,"ng-template",null,3,l.W1O),l.BQk()),2&f){const C=l.MAs(3),e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.checked)("ngIfElse",C)}}function y(f,k){1&f&&(l.ynx(0),l.Hsn(1,0,["class","text-body-lg text-neutral-gray-6"]),l.BQk())}const S=function(f,k){return{"checked !pl-2 !pr-[28px] !text-neutral-white":f,"opacity-50 pointer-events-none cursor-default":k}},T=["*"];let D=(()=>{class f{constructor(){this.size="medium",this.disabled=!1,this.checked=!1,this.checkedChildren="",this.unCheckedChildren="",this.type="label",this.checkedChange=new l.vpe,this.color="#fcb40a",this.statusColor=""}ngOnChanges(C){(C.checked||C.color)&&this.statusColorChange()}onToggleSwitch(){this.disabled||(this.checked=!this.checked,this.checkedChange.emit(this.checked),this.statusColorChange())}statusColorChange(){this.statusColor=this.checked?this.color:"#ccc"}}return f.\u0275fac=function(C){return new(C||f)},f.\u0275cmp=l.Xpm({type:f,selectors:[["cf-switch"]],hostAttrs:[1,"flex","gap-x-3","items-center","inline-flex"],inputs:{size:"size",disabled:"disabled",checked:"checked",checkedChildren:"checkedChildren",unCheckedChildren:"unCheckedChildren",type:"type",color:"color"},outputs:{checkedChange:"checkedChange"},standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:T,decls:3,vars:8,consts:[["type","button","id","switch-toggle",1,"cursor-pointer","min-w-[44px]","h-[24px]","pl-[28px]","pr-2","text-express-md","text-neutral-gray-6","bg-[#ccc]","block","rounded-full","relative","after:bg-neutral-white",3,"ngClass","click"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["uncheckTemplate",""]],template:function(C,e){1&C&&(l.F$t(),l.TgZ(0,"button",0),l.NdJ("click",function(){return e.onToggleSwitch()}),l.YNc(1,g,4,2,"ng-container",1),l.qZA(),l.YNc(2,y,2,0,"ng-container",1)),2&C&&(l.Udp("background-color",e.statusColor),l.Q6J("ngClass",l.WLB(5,S,e.checked,e.disabled)),l.xp6(1),l.Q6J("ngIf","inside"===e.type),l.xp6(1),l.Q6J("ngIf","label"===e.type))},dependencies:[h.ez,h.mk,h.O5,v.u5],styles:['#switch-toggle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:2px;left:3px;width:20px;height:20px;border-radius:20px;transition:.3s}#switch-toggle.checked[_ngcontent-%COMP%]:after{left:calc(100% - 5px);transform:translate(-90%)}#switch-toggle[_ngcontent-%COMP%]:active:after{width:20px}']}),f})()}}]);