"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[8208],{89701:(H,B,c)=>{c.d(B,{N:()=>F});const F=T=>{if(T<60)return`${T}p`;const P=Math.floor(T/60);return`${P}h ${T-60*P}p`}},80751:(H,B,c)=>{c.d(B,{A:()=>F});const F=T=>{switch(T){case"MALE":return"MR";case"FEMALE":return"MS";default:return""}}},97218:(H,B,c)=>{c.d(B,{X:()=>Z});var F=c(36895),T=c(37094),P=c(83700),k=c(27898),w=c(72506),Y=c(44143),n=c(94650),U=c(97579);function q(D,S){if(1&D){const g=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(g);const b=n.oxw().$implicit,O=n.oxw();return n.KtG(O.onFareTypeExpand(b))}),n._uU(1," Xem th\xeam "),n._UZ(2,"cf-icon",18),n.qZA()}}function d(D,S){if(1&D){const g=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(g);const b=n.oxw().$implicit,O=n.oxw();return n.KtG(O.onFareTypeColab(b))}),n._uU(1," \u1ea8n b\u1edbt "),n._UZ(2,"cf-icon",19),n.qZA()}}const N=function(D){return{"bg-[#FCB40A] text-neutral-white":D}};function L(D,S){if(1&D){const g=n.EpF();n.TgZ(0,"div",22),n.NdJ("click",function(){const O=n.CHM(g).$implicit,C=n.oxw(2).$implicit,f=n.oxw();return n.KtG(f.onToggleFareSelected(C,O))}),n._uU(1),n.qZA()}if(2&D){const g=S.$implicit;n.Q6J("ngClass",n.VKq(2,N,g.isActive)),n.xp6(1),n.hij(" ",g.name," ")}}function M(D,S){if(1&D&&(n.TgZ(0,"div",20),n.YNc(1,L,2,4,"div",21),n.qZA()),2&D){const g=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",g.fareClass)}}function s(D,S){if(1&D){const g=n.EpF();n.TgZ(0,"div")(1,"div",12)(2,"cf-checkbox",5),n.NdJ("checkChange",function(b){const C=n.CHM(g).$implicit,f=n.oxw();return n.KtG(f.onFareTypeSelectedChange(b,C))}),n.TgZ(3,"div",13),n._uU(4),n.TgZ(5,"span",14),n._uU(6),n.qZA()()(),n.YNc(7,q,3,0,"button",15),n.YNc(8,d,3,0,"button",15),n.qZA(),n.YNc(9,M,2,1,"div",16),n.qZA()}if(2&D){const g=S.$implicit;n.xp6(2),n.Q6J("checked",g.isActive),n.xp6(2),n.hij(" ",g.name," "),n.xp6(2),n.AsE("(",g.fareTypeSelected||0,"/",g.totalFareType,")"),n.xp6(1),n.Q6J("ngIf",!g.isExpand),n.xp6(1),n.Q6J("ngIf",g.isExpand),n.xp6(1),n.Q6J("ngIf",g.isExpand)}}let Z=(()=>{class D{constructor(g,E,b){this.ref=g,this.bottomSheetRef=E,this.bottomSheetData=b,this.listFareTypeOptions=[],this.listFareTypeOptionsSource=[],g&&(this.listFareTypeOptionsSource=g.data.listFareTypeOptions,this.selectedAll=g.data.selectedAll,this.listFareTypeOptions=Object.assign({},g.data.listFareTypeOptionsSource)),b&&(this.listFareTypeOptionsSource=b.listFareTypeOptions,this.selectedAll=b.selectedAll),this.listFareTypeOptions=this.listFareTypeOptionsSource.map(O=>Object.assign(Object.assign({},O),{fareClass:O.fareClass.map(C=>Object.assign({},C))}))}reset(){this.listFareTypeOptions=this.listFareTypeOptionsSource.map(g=>Object.assign(Object.assign({},g),{isActive:!1,isAllFareClass:!1,fareTypeSelected:0,fareClass:g.fareClass.map(E=>Object.assign(Object.assign({},E),{isActive:!1}))})),this.selectedAll=!1}close(){this.ref&&this.ref.close(this.listFareTypeOptionsSource),this.bottomSheetData&&this.bottomSheetRef.dismiss(this.listFareTypeOptionsSource)}submit(){this.listFareTypeOptionsSource=this.listFareTypeOptions,this.ref&&this.ref.close(this.listFareTypeOptionsSource),this.bottomSheetData&&this.bottomSheetRef.dismiss(this.listFareTypeOptionsSource)}onSelectAllChange(g){this.listFareTypeOptions.forEach(E=>{E.isActive=g,E.isAllFareClass=g,E.fareClass.forEach(b=>{b.isActive=g})}),this.computeFareSelected()}onFareTypeSelectedChange(g,E){if(E.isActive=g,E.isAllFareClass=g,E.fareClass.forEach(b=>b.isActive=g),g){const b=this.listFareTypeOptions.every(O=>O.isActive);this.selectedAll=b}else this.selectedAll=!1;this.computeFareSelected()}onToggleFareSelected(g,E){E.isActive=!E.isActive;const b=g.fareClass.every(C=>C.isActive);g.isActive=g.fareClass.some(C=>C.isActive),g.isAllFareClass=b;const O=this.listFareTypeOptions.every(C=>C.isActive);this.selectedAll=O,this.computeFareSelected()}computeFareSelected(){this.listFareTypeOptions.forEach(g=>{g.fareTypeSelected=g.fareClass.filter(E=>E.isActive).length})}onFareTypeExpand(g){this.listFareTypeOptions.forEach(E=>{E.isExpand=E.code===g.code})}onFareTypeColab(g){g.isExpand=!1}}return D.\u0275fac=function(g){return new(g||D)(n.Y36(U.gb,8),n.Y36(T.Zu,8),n.Y36(T.Rr,8))},D.\u0275cmp=n.Xpm({type:D,selectors:[["lowfare-option-modal"]],standalone:!0,features:[n.jDz],decls:20,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["cf-button","","size","medium","type","secondary",1,"justify-center","hidden","md:flex","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],["class","ml-1 mr-1 bg-[#F2F2F2] text-espressive-md p-2 text-center cursor-pointer rounded",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer","rounded",3,"ngClass","click"]],template:function(g,E){1&g&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),n.qZA(),n.TgZ(4,"cf-icon",3),n.NdJ("click",function(){return E.close()}),n.qZA()(),n.TgZ(5,"div",4)(6,"cf-checkbox",5),n.NdJ("checkChange",function(O){return E.onSelectAllChange(O)}),n._uU(7," Ch\u1ecdn t\u1ea5t c\u1ea3 "),n.qZA()(),n.TgZ(8,"div",6),n.YNc(9,s,10,7,"div",7),n.qZA(),n.TgZ(10,"div",8)(11,"button",9),n.NdJ("click",function(){return E.close()}),n.TgZ(12,"span"),n._uU(13,"H\u1ee7y"),n.qZA()(),n.TgZ(14,"button",10),n.NdJ("click",function(){return E.reset()}),n.TgZ(15,"span"),n._uU(16,"\u0110\u1eb7t l\u1ea1i"),n.qZA()(),n.TgZ(17,"button",11),n.NdJ("click",function(){return E.submit()}),n.TgZ(18,"span"),n._uU(19,"X\xe1c nh\u1eadn"),n.qZA()()()()),2&g&&(n.xp6(6),n.Q6J("checked",E.selectedAll),n.xp6(3),n.Q6J("ngForOf",E.listFareTypeOptions))},dependencies:[F.ez,F.mk,F.sg,F.O5,w.AxE,w.Sm8,k.u,Y.j$,P.N8,P.Xq],encapsulation:2}),D})()},94333:(H,B,c)=>{c.d(B,{C:()=>O});var F=c(36895),T=c(24006),P=c(37094),k=c(83700),w=c(88516),Y=c(72853),n=c(72506),U=c(44143),q=c(4688),d=c(74713),N=c(15439),M=c(77296),s=c(94650),Z=c(97579);function D(C,f){1&C&&s._UZ(0,"cf-hint",24),2&C&&s.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function S(C,f){if(1&C){const h=s.EpF();s.TgZ(0,"div",25)(1,"div",26),s.NdJ("scrolled",function(){s.CHM(h);const m=s.oxw();return s.KtG(m.scrollDown())}),s._UZ(2,"cf-datepicker-inline",27),s.qZA(),s.TgZ(3,"div",28)(4,"div",29)(5,"button",30),s.NdJ("click",function(){s.CHM(h);const m=s.oxw();return s.KtG(m.onCloseDatePicker())}),s._uU(6,"H\u1ee7y"),s.qZA(),s.TgZ(7,"button",31),s.NdJ("click",function(){s.CHM(h);const m=s.oxw();return s.KtG(m.onMobileDatePickerOK())}),s._uU(8,"X\xe1c nh\u1eadn"),s.qZA()()()()}if(2&C){const h=s.oxw();s.xp6(1),s.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),s.xp6(1),s.Q6J("minDate",h.minDate)("displayMonths",h.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("formControl",h.registerOrderForm.controls.dayExpire)("maxDate",h.maxDate)("fromDate",h.registerOrderForm.controls.dayExpire.value)("displayMonthsOffset",0),s.xp6(5),s.Q6J("disabled",null==h.registerOrderForm?null:h.registerOrderForm.controls.dayExpire.invalid)}}function g(C,f){1&C&&s._UZ(0,"cf-hint",24),2&C&&s.Q6J("hint","Gi\u1edd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function E(C,f){1&C&&s._UZ(0,"cf-hint",24),2&C&&s.Q6J("hint","Gi\u1edd k\u1ebft th\xfac kh\xf4ng h\u1ee3p l\u1ec7.")}const b=function(){return[]};let O=(()=>{class C{constructor(h,l,m,y,e,R,I){this.calendar=h,this.ref=l,this.bottomSheetData=m,this.bottomSheetRef=y,this._fb=e,this._cd=R,this._bottomSheetService=I,this.timeOption=[],this.MAX_TIME_EXECUTE=72,this.numOfMonth=1,l&&(this.bookingDetail=l.data.bookingDetail),m&&(this.bookingDetail=m.bookingDetail),this.minDate=h.getToday()}ngOnInit(){this.initFormGroup(),this.generateTime()}initFormGroup(){this.registerOrderForm=this._fb.group({dayExpire:[null,T.kI.required],hoursExpire:[null,T.kI.required]})}generateTime(){var h,l,m;const y=new Date,I=((this.bookingDetail.journeys[0].startTime||new Date).getTime()-y.getTime())/36e5-2,Q=Math.min(Math.floor(I),this.MAX_TIME_EXECUTE);y.setHours(y.getHours()+Q),this.timeExpire=y,this.maxDate=(0,w.jy)(this.timeExpire),null===(h=this.registerOrderForm)||void 0===h||h.controls.dayExpire.setValue(this.timeExpire),this.timeOption=this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes());const K=(null===(l=this.timeOption[this.timeOption.length-1])||void 0===l?void 0:l.value)||"";null===(m=this.registerOrderForm)||void 0===m||m.controls.hoursExpire.setValue(K),this._cd.detectChanges()}generateTimeArrays(h=0,l=0,m=23,y=60){const e=[];let R=h,I=l;for(;R<m&&m<24||R===m&&I<y;){const Q=R.toString().padStart(2,"0"),K=I.toString().padStart(2,"0");e.push({value:`${Q}:${K}`,text:`${Q}:${K}`}),I+=15,I>=y&&(I=0,R++)}return e}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}onOk(){const h=N(this.registerOrderForm.value.dayExpire).format("YYYY-MM-DD")+`T${this.registerOrderForm.value.hoursExpire}:00`;this.ref&&this.ref.close(h),this.bottomSheetData&&this.bottomSheetRef.dismiss(h)}onDateSelected(h){var l;const m=N(h).format("DD/MM/YYYY"),y=N(new Date).format("DD/MM/YYYY"),e=N(this.timeExpire).format("DD/MM/YYYY");this.timeOption=m===y?this.generateTimeArrays((new Date).getHours(),(new Date).getMinutes(),23,60):m===e?this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes()):this.generateTimeArrays(0,0,23,60),(null===(l=this.timeOption)||void 0===l?void 0:l.map(I=>I.value).includes(this.registerOrderForm.controls.hoursExpire.value))?this.registerOrderForm.controls.hoursExpire.setErrors(null):(this.registerOrderForm.controls.hoursExpire.setErrors({illegal:!0}),this.registerOrderForm.markAllAsTouched())}scrollDown(){this.numOfMonth=this.numOfMonth+4}onCloseDatePicker(){this._bottomSheetService.dismiss()}onMobileDatePickerOK(){var h,l,m;this._bottomSheetService.dismiss(!0),null===(h=this.registerOrderForm)||void 0===h||h.controls.dayExpire.setValue(null===(l=this.registerOrderForm)||void 0===l?void 0:l.controls.dayExpire.value),this.onDateSelected(null===(m=this.registerOrderForm)||void 0===m?void 0:m.controls.dayExpire.value)}}return C.\u0275fac=function(h){return new(h||C)(s.Y36(w.jH),s.Y36(Z.gb,8),s.Y36(P.Rr,8),s.Y36(P.Zu,8),s.Y36(T.qu),s.Y36(s.sBO),s.Y36(P.a2))},C.\u0275cmp=s.Xpm({type:C,selectors:[["register-order-gds"]],standalone:!0,features:[s.jDz],decls:33,vars:22,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","flex-1","overflow-auto"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","gap-x-2","items-center","md:flex-col","md:gap-y-2","md:items-baseline","md:justify-start"],[1,"flex","items-center","gap-x-2"],["icon","clock","size","small"],[1,"text-heading-sm","text-neutral-black"],[3,"color","size"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"!w-1/2","md:!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","maxDate","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["datepickerBottomSheet",""],[1,"!w-1/2","md:!w-full"],["textField","text","valueField","value",1,"!max-w-none","md:!max-w-full",3,"status","data","placeholder","allowSearch","formControl"],["cfHeadIcon","","icon","clock","size","small"],[1,"p-6","flex","justify-end","gap-x-2","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"disabled","click"],["cfHint","",3,"hint"],[1,"flex","w-full","flex-col","justify-between"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","formControl","maxDate","fromDate","displayMonthsOffset"],[1,"p-6","w-full","bg-neutral-white"],[1,"flex","gap-x-4"],["cf-button","","type","secondary",1,"justify-center","w-full",3,"click"],["cf-button","",1,"justify-center","w-full",3,"disabled","click"]],template:function(h,l){if(1&h){const m=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2),s._uU(3,"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb"),s.qZA(),s.TgZ(4,"cf-icon",3),s.NdJ("click",function(){return l.close()}),s.qZA()(),s.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),s._UZ(9,"cf-icon",8),s.TgZ(10,"span",9),s._uU(11,"Th\u1eddi h\u1ea1n canh v\xe9"),s.qZA()(),s.TgZ(12,"cf-label",10),s._uU(13),s.ALo(14,"date"),s.qZA()(),s.TgZ(15,"div",11)(16,"cf-input-group",12),s._UZ(17,"cf-icon",13),s.TgZ(18,"input",14,15),s.NdJ("input",function(){s.CHM(m);const e=s.MAs(19);return s.KtG(e.close())})("dateSelect",function(e){s.CHM(m);const R=s.MAs(19);return l.onDateSelected(e),s.KtG(R.close())}),s.qZA(),s.YNc(20,D,1,1,"cf-hint",16),s.qZA(),s.YNc(21,S,9,16,"ng-template",null,17,s.W1O),s.TgZ(23,"div",18)(24,"cf-select",19),s._UZ(25,"cf-icon",20),s.YNc(26,g,1,1,"cf-hint",16),s.YNc(27,E,1,1,"cf-hint",16),s.qZA()()()()(),s.TgZ(28,"div",21)(29,"button",22),s.NdJ("click",function(){return l.close()}),s._uU(30," \u0110\xf3ng "),s.qZA(),s.TgZ(31,"button",23),s.NdJ("click",function(){return l.onOk()}),s._uU(32," X\xe1c nh\u1eadn "),s.qZA()()()}2&h&&(s.xp6(12),s.Q6J("color","gray-2")("size","small"),s.xp6(1),s.hij(" Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn th\u1eddi h\u1ea1n \u0111\u1ebfn ",l.timeExpire?s.xi3(14,18,l.timeExpire,"dd/MM/yyyy HH:mm"):""," "),s.xp6(3),s.Q6J("status",l.registerOrderForm.controls.dayExpire.invalid&&(l.registerOrderForm.controls.dayExpire.dirty||l.registerOrderForm.controls.dayExpire.touched)?"error":"default"),s.xp6(2),s.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",l.minDate)("maxDate",l.maxDate)("formControl",l.registerOrderForm.controls.dayExpire),s.xp6(2),s.Q6J("ngIf",(null==l.registerOrderForm.controls.dayExpire.errors?null:l.registerOrderForm.controls.dayExpire.errors.required)&&(l.registerOrderForm.controls.dayExpire.dirty||l.registerOrderForm.controls.dayExpire.touched)),s.xp6(4),s.Q6J("status",l.registerOrderForm.controls.hoursExpire.invalid&&(l.registerOrderForm.controls.hoursExpire.dirty||l.registerOrderForm.controls.hoursExpire.touched)?"error":"default")("data",l.timeOption||s.DdM(21,b))("placeholder","Ch\u1ecdn gi\u1edd k\u1ebft th\xfac")("allowSearch",!0)("formControl",l.registerOrderForm.controls.hoursExpire),s.xp6(2),s.Q6J("ngIf",(null==l.registerOrderForm.controls.hoursExpire.errors?null:l.registerOrderForm.controls.hoursExpire.errors.required)&&(l.registerOrderForm.controls.hoursExpire.dirty||l.registerOrderForm.controls.hoursExpire.touched)),s.xp6(1),s.Q6J("ngIf",(null==l.registerOrderForm.controls.hoursExpire.errors?null:l.registerOrderForm.controls.hoursExpire.errors.illegal)&&(l.registerOrderForm.controls.hoursExpire.dirty||l.registerOrderForm.controls.hoursExpire.touched)),s.xp6(4),s.Q6J("disabled",l.registerOrderForm.invalid))},dependencies:[F.ez,F.O5,F.uU,n.AxE,n.Sm8,k.N8,k.Xq,q.b,d.q,U.j$,U.ND,U.BN,Y.m,w.Cs,T.u5,T.Fj,T.JJ,T.UX,T.oH,M.Rq,M.Ry,w._o,P.DW],encapsulation:2}),C})()},44586:(H,B,c)=>{c.d(B,{g:()=>Ge});var F=c(36895),T=c(24006),P=c(37094),k=c(83700),w=c(88516),Y=c(72853),n=c(72506),U=c(44143),q=c(4688),d=c(74891),N=c(74713),L=c(76331),M=c(67460),s=c(89701),Z=c(62163),D=c(53820),S=c(38514),g=c(80751),E=c(52013),b=c(61545),O=c(15439),f=c(77296),h=c(77579),l=c(78372),m=c(28746),y=c(97218),e=c(94650),R=c(97579),I=c(82761),Q=c(70800),K=c(62733),G=c(77492),V=c(9381);function z(i,_){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(3),o=e.MAs(12);e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",o)}}function X(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\xe3 canh v\xe9 kh\xf4ng h\u1ee3p l\u1ec7")}function ee(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\xe3 canh v\xe9 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function te(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div",33),e._UZ(3,"cf-icon",34),e.TgZ(4,"span",35),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9"),e.qZA()(),e.YNc(6,z,2,2,"div",10),e.qZA(),e.TgZ(7,"cf-select",36),e.NdJ("onSearch",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.onSearchValueChange(r))})("selectedChange",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.onSelectedPnr(r))}),e._UZ(8,"cf-icon",37),e.YNc(9,X,1,1,"cf-hint",38),e.YNc(10,ee,1,1,"cf-hint",38),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",t.availableInfo),e.xp6(1),e.Q6J("status",t.registerOrderForm.controls.bookingCode.invalid&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched)?"error":"default")("data",t.pnrSuggestOptions)("placeholder","M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9")("formControl",t.registerOrderForm.controls.bookingCode)("allowSearch",!0)("isEmpty",t.isDataEmpty),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.bookingCode.errors?null:t.registerOrderForm.controls.bookingCode.errors.invalid)&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.bookingCode.errors?null:t.registerOrderForm.controls.bookingCode.errors.required)&&(t.registerOrderForm.controls.bookingCode.dirty||t.registerOrderForm.controls.bookingCode.touched))}}function ie(i,_){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(3),o=e.MAs(12);e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",o)}}function re(i,_){if(1&i&&(e.TgZ(0,"div",31)(1,"div",32)(2,"div",33),e._UZ(3,"cf-icon",34),e.TgZ(4,"span",35),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9"),e.qZA()(),e.YNc(6,ie,2,2,"div",10),e.qZA(),e.TgZ(7,"div",41),e._uU(8),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",t.availableInfo),e.xp6(2),e.Oqu(t.pnrOrderData.bookingCode)}}function ne(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function oe(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",69)(1,"div",70),e.NdJ("scrolled",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.scrollDown())}),e._UZ(2,"cf-datepicker-inline",71),e.qZA(),e.TgZ(3,"div",72)(4,"div",73)(5,"button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onCloseDatePicker())}),e._uU(6,"H\u1ee7y"),e.qZA(),e.TgZ(7,"button",75),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("formControl",t.registerOrderForm.controls.dayExpire)("maxDate",t.maxDate)("fromDate",t.registerOrderForm.controls.dayExpire.value)("displayMonthsOffset",0),e.xp6(5),e.Q6J("disabled",null==t.registerOrderForm?null:t.registerOrderForm.controls.dayExpire.invalid)}}function se(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\u1edd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ae(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\u1edd k\u1ebft th\xfac kh\xf4ng h\u1ee3p l\u1ec7.")}function le(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","M\u1ee9c gi\xe1 mong mu\u1ed1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ce(i,_){1&i&&e._UZ(0,"cf-hint",40),2&i&&e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i thi\u1ec3u l\xe0 1\u0111")}function de(i,_){if(1&i&&(e._UZ(0,"cf-hint",40),e.ALo(1,"number")),2&i){const t=e.oxw(4);e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i \u0111a l\xe0 "+e.lcZ(1,1,t.totalFare)+" \u0111"||0)}}function ue(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",76)(1,"cf-input-group",77)(2,"label",78),e._uU(3,"Ch\u1ec9 canh gi\xe1 v\xe9 (c\u1ee7a 1 ng\u01b0\u1eddi l\u1edbn \u0111\u1ea1i di\u1ec7n) gi\u1ea3m th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(4,"cf-input-number",79),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw(3);return e.KtG(u.checkDirtyNumber("targetPrice",r))}),e.qZA(),e.YNc(5,le,1,1,"cf-hint",38),e.YNc(6,ce,1,1,"cf-hint",38),e.YNc(7,de,2,3,"cf-hint",38),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("status",t.registerOrderForm.controls.targetPrice.invalid&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)?"error":"default"),e.xp6(3),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c gi\xe1 t\u1ed1i \u0111a mu\u1ed1n canh (gi\xe1 v\xe9 c\u1ee7a 1 ng\u01b0\u1eddi l\u1edbn \u0111\u1ea1i di\u1ec7n)")("decimal",!1)("negative",!1)("formControl",t.registerOrderForm.controls.targetPrice),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.required)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.minAmount)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.targetPrice.errors?null:t.registerOrderForm.controls.targetPrice.errors.maxAmount)&&(t.registerOrderForm.controls.targetPrice.dirty||t.registerOrderForm.controls.targetPrice.touched))}}function _e(i,_){1&i&&(e.TgZ(0,"div",85),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n "),e.qZA())}function pe(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",91),e.NdJ("click",function(r){e.CHM(t);const u=e.oxw().$implicit,v=e.oxw(5);return e.KtG(v.onRemoveFareTypeOption(r,u))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function ge(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",91),e.NdJ("click",function(r){e.CHM(t);const u=e.oxw().$implicit,v=e.oxw(6);return e.KtG(v.onRemoveFareClassOption(r,u))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(2),e.AsE(" ",o.name," - ",t.name," ")}}function he(i,_){if(1&i&&(e.ynx(0),e.YNc(1,ge,4,2,"div",88),e.BQk()),2&i){const t=_.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!o.isAllFareClass&&t.isActive)}}function me(i,_){if(1&i&&(e.ynx(0,33),e.YNc(1,pe,4,1,"div",88),e.YNc(2,he,2,1,"ng-container",89),e.BQk()),2&i){const t=_.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function fe(i,_){if(1&i&&(e.TgZ(0,"div",86),e.YNc(1,me,3,2,"ng-container",87),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function ve(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",80),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.openFareOptions())}),e.TgZ(2,"div",81),e.YNc(3,_e,2,0,"div",82),e.YNc(4,fe,2,1,"div",83),e.qZA(),e._UZ(5,"cf-icon",84),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("ngIf",!t.registerOrderForm.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.specifyFareClass)}}function Ee(i,_){1&i&&e._UZ(0,"cf-icon",92)}function xe(i,_){1&i&&e._UZ(0,"cf-icon",93)}function Te(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95)(2,"div",33),e._UZ(3,"cf-icon",96),e.TgZ(4,"span",35),e._uU(5,"Th\xf4ng b\xe1o"),e.qZA()(),e.TgZ(6,"cf-switch",97),e.NdJ("checkedChange",function(r){e.CHM(t);const u=e.oxw(3);return e.KtG(u.onCheckNotify(r))}),e.qZA()(),e.TgZ(7,"div",98),e._uU(8,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n canh v\xe9 tr\u01b0\u1edbc 15 ph\xfat"),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(6),e.Q6J("disabled",t.notifyExpired)("checked",t.registerOrderForm.value.notifyBeforeExpired)}}const j=function(){return[]};function Oe(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e._UZ(1,"div",42),e.TgZ(2,"div",11)(3,"div",31)(4,"div",43)(5,"div",33),e._UZ(6,"cf-icon",44),e.TgZ(7,"span",35),e._uU(8,"Th\u1eddi h\u1ea1n canh v\xe9"),e.qZA()(),e.TgZ(9,"cf-label",45),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",46)(13,"cf-input-group",47),e._UZ(14,"cf-icon",48),e.TgZ(15,"input",49,50),e.NdJ("input",function(){e.CHM(t);const r=e.MAs(16);return e.KtG(r.close())})("dateSelect",function(r){e.CHM(t);const u=e.MAs(16);return e.oxw(2).onDateSelected(r),e.KtG(u.close())})("click",function(){e.CHM(t);const r=e.MAs(19),u=e.oxw(2);return e.KtG(u.expireDatePickerClick(r))})("mousedown",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.expireDateFocus(r))}),e.qZA(),e.YNc(17,ne,1,1,"cf-hint",38),e.qZA(),e.YNc(18,oe,9,16,"ng-template",null,51,e.W1O),e.TgZ(20,"div",52)(21,"cf-select",53),e.NdJ("selectedChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSelectedTimeExpire())}),e._UZ(22,"cf-icon",54),e.YNc(23,se,1,1,"cf-hint",38),e.YNc(24,ae,1,1,"cf-hint",38),e.qZA()()()()(),e._UZ(25,"div",55),e.TgZ(26,"div",31)(27,"div",56)(28,"div",33),e._UZ(29,"cf-icon",57),e.TgZ(30,"span",35),e._uU(31,"Canh theo gi\xe1"),e.qZA()(),e.TgZ(32,"div",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onChangePrice())}),e._UZ(33,"cf-switch",59),e.qZA()(),e.YNc(34,ue,8,8,"div",60),e.qZA(),e._UZ(35,"div",55),e.TgZ(36,"div",31)(37,"div",56)(38,"div")(39,"div",33),e._UZ(40,"cf-icon",61),e.TgZ(41,"span",35),e._uU(42,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(43,"div",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onChangeLowFare())}),e._UZ(44,"cf-switch",59),e.qZA()(),e.YNc(45,ve,6,2,"div",10),e.qZA(),e._UZ(46,"div",55),e.TgZ(47,"div",62)(48,"div",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onExpandConfig())}),e.TgZ(49,"div"),e._UZ(50,"cf-icon",64),e.qZA(),e.TgZ(51,"div",65),e._uU(52,"C\xe0i \u0111\u1eb7t n\xe2ng cao"),e.qZA(),e.TgZ(53,"div"),e.YNc(54,Ee,1,0,"cf-icon",66),e.YNc(55,xe,1,0,"cf-icon",67),e.qZA()(),e.YNc(56,Te,9,2,"div",68),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(9),e.Q6J("color","gray-2")("size","small"),e.xp6(1),e.hij(" Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn th\u1eddi h\u1ea1n \u0111\u1ebfn ",t.timeExpire?e.xi3(11,24,t.timeExpire,"dd/MM/yyyy HH:mm"):""," "),e.xp6(3),e.Q6J("status",t.registerOrderForm.controls.dayExpire.invalid&&(t.registerOrderForm.controls.dayExpire.dirty||t.registerOrderForm.controls.dayExpire.touched)?"error":"default"),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate)("maxDate",t.maxDate)("formControl",t.registerOrderForm.controls.dayExpire),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.dayExpire.errors?null:t.registerOrderForm.controls.dayExpire.errors.required)&&(t.registerOrderForm.controls.dayExpire.dirty||t.registerOrderForm.controls.dayExpire.touched)),e.xp6(4),e.Q6J("status",t.registerOrderForm.controls.hoursExpire.invalid&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)?"error":"default")("data",t.timeOption||e.DdM(27,j))("placeholder","Ch\u1ecdn gi\u1edd k\u1ebft th\xfac")("allowSearch",!0)("formControl",t.registerOrderForm.controls.hoursExpire),e.xp6(2),e.Q6J("ngIf",(null==t.registerOrderForm.controls.hoursExpire.errors?null:t.registerOrderForm.controls.hoursExpire.errors.required)&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.registerOrderForm.controls.hoursExpire.errors?null:t.registerOrderForm.controls.hoursExpire.errors.illegal)&&(t.registerOrderForm.controls.hoursExpire.dirty||t.registerOrderForm.controls.hoursExpire.touched)),e.xp6(9),e.Q6J("checked",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(10),e.Q6J("checked",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(9),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Ce(i,_){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),e._UZ(4,"cf-icon",15)(5,"div",16),e.qZA(),e.TgZ(6,"div",17)(7,"div",18),e._uU(8,"Gi\u1eef ch\u1ed7"),e.qZA(),e.TgZ(9,"div",19),e._uU(10,"Gi\u1eef ch\u1ed7 th\xe0nh c\xf4ng"),e.qZA()()(),e.TgZ(11,"div",20)(12,"div",21),e._uU(13," 2 "),e._UZ(14,"div",22),e.qZA(),e.TgZ(15,"div",23)(16,"div",24),e._uU(17,"Canh v\xe9 r\u1ebb"),e.qZA(),e.TgZ(18,"div",25),e._uU(19,"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb"),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",26),e._uU(22," 3 "),e._UZ(23,"div",27),e.qZA(),e.TgZ(24,"div",28)(25,"div",24),e._uU(26,"Theo d\xf5i"),e.qZA(),e.TgZ(27,"div",25),e._uU(28,"Theo d\xf5i bi\u1ebfn \u0111\u1ed9ng gi\xe1"),e.qZA()()(),e.TgZ(29,"div",20)(30,"div",29),e._uU(31," 4 "),e.qZA(),e.TgZ(32,"div",28)(33,"div",24),e._uU(34,"H\u1ebft h\u1ea1n"),e.qZA(),e.TgZ(35,"div",25),e._uU(36,"C\xf3 th\u1ec3 h\u1ee7y b\u1ea5t k\xec l\xfac n\xe0o"),e.qZA()()()(),e.YNc(37,te,11,9,"div",30),e.YNc(38,re,9,2,"div",30),e.YNc(39,Oe,57,28,"div",5),e.qZA()),2&i){const t=e.oxw();e.xp6(37),e.Q6J("ngIf",t.isSuggest),e.xp6(1),e.Q6J("ngIf",!t.isSuggest),e.xp6(1),e.Q6J("ngIf",null==t.pnrOrderData?null:t.pnrOrderData.bookingCode)}}function ye(i,_){if(1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"div",119)(3,"div",120),e._uU(4),e.qZA()(),e.TgZ(5,"div",121),e._UZ(6,"img",122),e.qZA(),e.TgZ(7,"div",123)(8,"div",124),e._uU(9),e.qZA(),e.TgZ(10,"div",125),e._uU(11),e.qZA()(),e.TgZ(12,"div",123)(13,"div",124),e._uU(14),e.qZA(),e.TgZ(15,"div",125),e._uU(16),e.qZA()(),e.TgZ(17,"div",123)(18,"div",124),e._uU(19),e.qZA(),e.TgZ(20,"div",125),e._uU(21),e.qZA()(),e.TgZ(22,"div",126)(23,"div",127)(24,"div"),e._uU(25),e.qZA(),e.TgZ(26,"div",128),e._UZ(27,"div",129)(28,"div",130),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA()(),e.TgZ(31,"div"),e._UZ(32,"cf-icon",131),e.qZA()(),e.TgZ(33,"div",123)(34,"div",124),e._uU(35),e.qZA(),e.TgZ(36,"div",125),e._uU(37),e.qZA()()(),e.TgZ(38,"div",132)(39,"div",133)(40,"div",128)(41,"div",120),e._uU(42),e.qZA()(),e.TgZ(43,"div",121),e._UZ(44,"img",122),e.qZA(),e.TgZ(45,"div",134)(46,"div",124),e._uU(47),e.qZA(),e.TgZ(48,"div",125),e._uU(49),e.qZA()(),e.TgZ(50,"div",123)(51,"div",124),e._uU(52),e.qZA(),e.TgZ(53,"div",125),e._uU(54),e.qZA()()(),e.TgZ(55,"div",135)(56,"div",123)(57,"div",124),e._uU(58),e.qZA(),e.TgZ(59,"div",125),e._uU(60),e.qZA()(),e.TgZ(61,"div",126)(62,"div",127)(63,"div"),e._uU(64),e.qZA(),e.TgZ(65,"div",128),e._UZ(66,"div",129)(67,"div",136),e.qZA(),e.TgZ(68,"div"),e._uU(69,"Bay th\u1eb3ng"),e.qZA()(),e.TgZ(70,"div"),e._UZ(71,"cf-icon",131),e.qZA()(),e.TgZ(72,"div",123)(73,"div",124),e._uU(74),e.qZA(),e.TgZ(75,"div",125),e._uU(76),e.qZA()()()(),e.BQk()),2&i){const t=_.$implicit,o=_.index;e.xp6(4),e.hij(" ",o+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(3),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(5),e.Oqu(t.departure),e.xp6(5),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint),e.xp6(5),e.hij(" ",o+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(4),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(10),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint)}}function be(i,_){1&i&&e._UZ(0,"div",55)}function Ae(i,_){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" (",t.child.namePrefix,") ",null==t.child?null:t.child.displayName," - ",null==t.child?null:t.child.birthDay," ")}}function De(i,_){if(1&i&&(e.ynx(0),e.YNc(1,be,1,0,"div",137),e.TgZ(2,"div",138)(3,"div",24),e._uU(4),e.qZA(),e.TgZ(5,"div",139)(6,"div",24),e._uU(7),e.qZA(),e.YNc(8,Ae,2,3,"div",140),e.qZA()(),e.BQk()),2&i){const t=_.$implicit,o=_.index,r=_.first;e.xp6(1),e.Q6J("ngIf",!r),e.xp6(3),e.hij("",o+1,"."),e.xp6(3),e.AsE("(",t.namePrefix,") ",t.displayName,""),e.xp6(1),e.Q6J("ngIf",t.child)}}function Fe(i,_){if(1&i&&(e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function Ze(i,_){if(1&i&&(e.TgZ(0,"div",90)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(2),e.AsE(" ",o.name," - ",t.name," ")}}function Pe(i,_){if(1&i&&(e.ynx(0),e.YNc(1,Ze,3,2,"div",88),e.BQk()),2&i){const t=_.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!o.isAllFareClass&&t.isActive)}}function Me(i,_){if(1&i&&(e.ynx(0,33),e.YNc(1,Fe,3,1,"div",88),e.YNc(2,Pe,2,1,"ng-container",89),e.BQk()),2&i){const t=_.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function Se(i,_){if(1&i&&(e.TgZ(0,"div",86),e.YNc(1,Me,3,2,"ng-container",87),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function ke(i,_){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Re(i,_){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.registerOrderForm.value.targetPrice)," \u0111 ")}}function we(i,_){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Ue(i,_){1&i&&(e.TgZ(0,"div",107)(1,"div",108),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",109),e._uU(4," Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}function Ie(i,_){1&i&&(e.TgZ(0,"div",144),e._uU(1,"B\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u n\xe0y "),e.qZA())}function Be(i,_){if(1&i&&(e.TgZ(0,"div",144),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE("N\u1ebfu canh \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed b\u1eb1ng ",e.lcZ(2,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1 ")}}function Ne(i,_){if(1&i&&(e.TgZ(0,"div",141)(1,"div")(2,"div",33),e._UZ(3,"cf-icon",142),e.TgZ(4,"span",35),e._uU(5,"Ph\xed y\xeau c\u1ea7u"),e.qZA()(),e.YNc(6,Ie,2,0,"div",143),e.YNc(7,Be,3,4,"div",143),e.qZA(),e._UZ(8,"tooltip-available-slot",39),e.qZA()),2&i){const t=e.oxw(2),o=e.MAs(14);e.xp6(6),e.Q6J("ngIf",t.availableInfo.free),e.xp6(1),e.Q6J("ngIf",!t.availableInfo.free),e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",o)}}function Ye(i,_){if(1&i&&(e.TgZ(0,"div",11)(1,"div",99)(2,"div",99)(3,"div",33),e._UZ(4,"cf-icon",100),e.TgZ(5,"span",35),e._uU(6,"Canh v\xe9 r\u1ebb c\xe1c chuy\u1ebfn bay sau"),e.qZA()(),e.TgZ(7,"div",101),e.YNc(8,ye,77,23,"ng-container",89),e.TgZ(9,"div",102)(10,"div",19),e._uU(11,"T\u1ed5ng gi\xe1 ban \u0111\u1ea7u"),e.qZA(),e.TgZ(12,"div",103),e._uU(13),e.ALo(14,"number"),e.qZA()()()(),e.TgZ(15,"div",99)(16,"div",33),e._UZ(17,"cf-icon",104),e.TgZ(18,"span",35),e._uU(19,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(20,"div",105),e.YNc(21,De,9,5,"ng-container",89),e.qZA()()(),e.TgZ(22,"div",99)(23,"div",33),e._UZ(24,"cf-icon",106),e.TgZ(25,"span",35),e._uU(26,"Th\xf4ng tin y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(27,"div",105)(28,"div",107)(29,"div",108),e._uU(30,"H\u1ea1n canh v\xe9:"),e.qZA(),e.TgZ(31,"div",109),e._uU(32),e.ALo(33,"date"),e.qZA()(),e.TgZ(34,"div",107)(35,"div",108),e._uU(36,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n:"),e.qZA(),e.TgZ(37,"div",109),e.YNc(38,Se,2,1,"div",83),e.YNc(39,ke,2,0,"span",10),e.qZA()(),e.TgZ(40,"div",107)(41,"div",108),e._uU(42,"M\u1ee9c gi\xe1 mong mu\u1ed1n:"),e.qZA(),e.TgZ(43,"div",109),e.YNc(44,Re,3,3,"span",10),e.YNc(45,we,2,0,"span",10),e.qZA()(),e.YNc(46,Ue,5,0,"div",110),e.qZA()(),e.YNc(47,Ne,9,4,"div",111),e._UZ(48,"div",55),e.TgZ(49,"div",99)(50,"div",33),e._UZ(51,"cf-icon",112),e.TgZ(52,"span",35),e._uU(53,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(54,"div",113)(55,"div",114)(56,"div"),e._UZ(57,"cf-icon",115),e.qZA(),e.TgZ(58,"div")(59,"span",24),e._uU(60,"N\u1ebfu gi\xe1 v\xe9 t\u0103ng,"),e.qZA(),e._uU(61," th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n v\u1ec1 thay \u0111\u1ed5i gi\xe1 mi\u1ec5n ph\xed v\xe0 ti\u1ebfp t\u1ee5c canh \u0111\u1ebfn khi h\u1ebft h\u1ea1n canh v\xe9. "),e.qZA()(),e.TgZ(62,"div",114)(63,"div"),e._UZ(64,"cf-icon",44),e.qZA(),e.TgZ(65,"div")(66,"span",24),e._uU(67,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng canh \u0111\u01b0\u1ee3c v\xe9 r\u1ebb."),e.qZA(),e._uU(68," C\xf3 th\u1ec3 h\u1ee7y canh v\xe9 b\u1ea5t k\xec l\xfac n\xe0o!"),e.qZA()(),e.TgZ(69,"div",114)(70,"div"),e._UZ(71,"cf-icon",116),e.qZA(),e.TgZ(72,"div",24),e._uU(73,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(74,"span",117),e._uU(75,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(76," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",(null==t.pnrOrderData?null:t.pnrOrderData.journeys)||e.DdM(16,j)),e.xp6(5),e.hij("",e.lcZ(14,11,t.pnrOrderData.totalCharge||0)," \u0111 "),e.xp6(8),e.Q6J("ngForOf",t.pnrOrderData.passengers),e.xp6(11),e.AsE(" ",e.xi3(33,13,t.registerOrderForm.value.dayExpire,"dd/MM/yyyy")," ",t.registerOrderForm.value.hoursExpire," "),e.xp6(6),e.Q6J("ngIf",t.registerOrderForm.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.registerOrderForm.value.notifyBeforeExpired),e.xp6(1),e.Q6J("ngIf",t.availableInfo)}}function qe(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"button",146),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._uU(2," \u0110\xf3ng "),e.qZA(),e.TgZ(3,"button",147),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._UZ(4,"cf-icon",148),e._uU(5," Quay l\u1ea1i "),e.qZA(),e.TgZ(6,"button",149),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep(r.STEP_ORDER.REVIEW))}),e.TgZ(7,"span"),e._uU(8,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(9,"cf-icon",150),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",t.registerOrderForm.invalid)}}function Je(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"button",151),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep(r.STEP_ORDER.CREATE))}),e._UZ(2,"cf-icon",148),e._uU(3," Quay l\u1ea1i "),e.qZA(),e.TgZ(4,"button",149),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onRegisterOrder())}),e._uU(5," X\xe1c nh\u1eadn "),e._UZ(6,"cf-icon",152),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("disabled",t.registerOrderForm.invalid)}}function Le(i,_){1&i&&(e.TgZ(0,"div",154)(1,"span",155),e._uU(2,"Thu ph\xed"),e.qZA(),e._UZ(3,"cf-icon",156),e.qZA())}function Qe(i,_){1&i&&(e.TgZ(0,"div",154)(1,"span",155),e._uU(2,"Mi\u1ec5n ph\xed"),e.qZA(),e._UZ(3,"cf-icon",156),e.qZA())}function Ke(i,_){if(1&i&&(e.YNc(0,Le,4,0,"div",153),e.YNc(1,Qe,4,0,"div",153)),2&i){const t=e.oxw();e.Q6J("ngIf",!t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.available)}}function He(i,_){if(1&i&&(e.TgZ(0,"div",158)(1,"span",159),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",156),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function $e(i,_){if(1&i&&(e.TgZ(0,"div",158)(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",156),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,2,t.availableInfo.percent),"",t.availableInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function We(i,_){if(1&i&&(e.YNc(0,He,5,4,"div",157),e.YNc(1,$e,5,4,"div",157)),2&i){const t=e.oxw();e.Q6J("ngIf",t.availableInfo.free),e.xp6(1),e.Q6J("ngIf",!t.availableInfo.free)}}function je(i,_){1&i&&e._UZ(0,"cf-spinner")}var J=(()=>{return(i=J||(J={})).CREATE="CREATE",i.REVIEW="REVIEW",J;var i})();let Ge=(()=>{class i{constructor(t,o,r,u,v,a,p,x,A,$,Ve,ze,Xe,et){var W;this.ref=t,this.bottomSheetData=o,this.bottomSheetRef=r,this.calendar=v,this._fb=a,this._modal=p,this._route=x,this._cd=A,this._ticketLowFareService=$,this._flightDataService=Ve,this._eventLogService=ze,this._mobileDetectService=Xe,this._bottomSheetService=et,this.isOpen=!1,this.bottomCenter=[{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:0,offsetY:0}],this.timeExpireStr="",this.scheduleTimeOptions=[],this.steps=[{id:1,icon:"check"},{id:2,icon:"unlock"},{id:3,icon:"search"},{id:4,icon:"lock"}],this.currentStep=1,this.isExpand=!1,this.step=J.CREATE,this.MONITOR_TYPE=Z.$,this.title="T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",this.STEP_ORDER=J,this.STATUS_ORDER=D.b,this.MAX_TIME_EXECUTE=48,this.isLoading=!1,this.lowerFareClassOptions=[],this.listFareTypeOptions=[],this.searchValueChanged$=new h.x,this.pnrSuggestOptions=[],this.isSuggest=!1,this.multiMinDate=[],this.hoursOption=[],this.minuteOption=[],this.timeOption=[],this.infiniteScrollCount=10,this.isDataEmpty=!1,this.regenerate=!1,this.numOfMonth=1,this.notifyExpired=!1,u.registerIcons([n.YvC,n.KMO,n.TM4,n.RxK,n.Vn9,n.NNX,n.Tas,n.$PG,n.toh,n.rJw,n._hx,n.okA,n.TOh,n.B2I,n.qDv,n.PcQ,n.PSW,n.cnj,n.Lji,n.Nnv,n.tLH,n.esH,n.ZlA,n.UNF,n.SK7]),t&&(this.bookingDetail=t.data.bookingDetail,this.registerOrderDetail=t.data.registerOrderDetail,this.regenerate=t.data.regenerate,this.isSuggest=null!==(W=t.data.isSuggest)&&void 0!==W&&W,this.sourceEvent=t.data.sourceEvent),o&&(this.bookingDetail=o.bookingDetail,this.registerOrderDetail=o.registerOrderDetail,this.regenerate=o.regenerate,this.isSuggest=o.isSuggest,this.sourceEvent=o.sourceEvent),this.minDate=v.getToday(),this.bookingDetail&&!this.regenerate&&(this.handleRegisterOrderData(),this.getAvailableAgent(this.bookingDetail.coOwnerId)),this.regenerate&&this.handleRegenerateRegister()}ngOnInit(){this.initFormGroup(),this.pnrOrderData&&(this.generateTime(),this.getListLowerFareClass(this.pnrOrderData.airline,this.pnrOrderData.journeys[0].fareClass)),this.isSuggest&&this.onSearchPnrSuggest(""),this.searchValueChanged$.pipe((0,l.b)(1e3)).subscribe(t=>{this.pnrSuggestOptions.some(o=>o.bookingCode===t)||this.onSearchPnrSuggest(t)})}initFormGroup(){var t,o,r;this.registerOrderForm=this._fb.group({notifyBeforeExpired:[!0],bookingCode:[(null===(t=this.pnrOrderData)||void 0===t?void 0:t.bookingCode)||"",T.kI.required],monitorType:[(null===(o=this.pnrOrderData)||void 0===o?void 0:o.monitorType)||Z.$.PRICE],timeExecute:[this.MAX_TIME_EXECUTE],dayExpire:[null,T.kI.required],hoursExpire:[null,T.kI.required],targetPrice:[(null===(r=this.pnrOrderData)||void 0===r?void 0:r.targetPrice)||0,T.kI.required],specifyFareClass:[null]})}getAvailableAgent(t){this._ticketLowFareService.getInfoAvailableAgent({agentId:t||"",type:S.G.DOWN_FARE_TICKET}).subscribe({next:r=>{"OK"===r.status&&(this.availableInfo=r.data,this.availableSlotData={available:r.data.free,type:r.data.type,amount:r.data.type===S.G.DOWN_FARE_TICKET?r.data.percent:r.data.amountPerPax,currency:r.data.type===S.G.DOWN_FARE_TICKET?r.data.currency:"\u0111"})}})}getListLowerFareClass(t,o){this._ticketLowFareService.getListLowerFareClass({airline:t,fareClass:o}).subscribe({next:u=>{var v,a;"OK"===u.status&&(this.lowerFareClassOptions=(null===(v=u.data.cabin)||void 0===v?void 0:v.flatMap(p=>p.fareType.map(x=>({code:x.code,value:x.description,children:x.fareClass.map(A=>({code:A.code,value:A.name}))}))))||[],this.listFareTypeOptions=(null===(a=u.data.cabin)||void 0===a?void 0:a.flatMap(p=>p.fareType.map(x=>({order:x.order,code:x.code,name:x.description,isActive:!1,isExpand:!1,isAllFareClass:!1,fareTypeSelected:0,totalFareType:x.fareClass.length,fareClass:x.fareClass.map(A=>({order:A.order,code:A.code,name:A.name,isActive:!1}))}))))||[],this.pnrOrderData&&this.pnrOrderData.specifyFareClass&&(this.registerOrderForm.controls.specifyFareClass.setValue(this.pnrOrderData.specifyFareClass||null),this.listFareTypeOptions.forEach(p=>{p.fareClass.forEach(x=>{x.isActive=this.pnrOrderData.specifyFareClass.includes(x.code)}),p.isAllFareClass=p.fareClass.every(x=>x.isActive),p.isActive=p.fareClass.some(x=>x.isActive)})),this._cd.detectChanges())}})}generateTimeArrays(t=0,o=0,r=23,u=60){const v=[];let a=t,p=o;for(;a<r&&r<24||a===r&&p<u;){const x=a.toString().padStart(2,"0"),A=p.toString().padStart(2,"0");v.push({value:`${x}:${A}`,text:`${x}:${A}`}),p+=15,p>=u&&(p=0,a++)}return v}generateTime(){var t,o,r;const u=new Date,p=(this.pnrOrderData.journeys[0].departureDateTime.getTime()-u.getTime())/36e5-2,x=Math.min(Math.floor(p),this.MAX_TIME_EXECUTE);u.setHours(u.getHours()+x),this.timeExpire=u,this.maxDate=(0,w.jy)(this.timeExpire),null===(t=this.registerOrderForm)||void 0===t||t.controls.dayExpire.setValue(this.timeExpire),this.timeOption=this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes());const A=(null===(o=this.timeOption[this.timeOption.length-1])||void 0===o?void 0:o.value)||"";null===(r=this.registerOrderForm)||void 0===r||r.controls.hoursExpire.setValue(A),this._cd.detectChanges()}handleRegisterOrderData(){var t,o;const r=(null===(t=this.bookingDetail.passengers)||void 0===t?void 0:t.map(a=>({key:a.key||"",parentKey:a.parentKey||"",firstName:a.firstName||"",lastName:a.lastName||"",displayName:`${a.lastName} ${a.firstName}`||"",birthDay:a.birthday?O(a.birthday).format("DD/MM/YYYY"):"",type:a.type||"",namePrefix:"UNDEFINE"===a.namePrefix?(0,g.A)(a.gender):a.namePrefix,gender:a.gender})))||[],u=(null==r?void 0:r.filter(a=>"INF"===a.type.toUpperCase()))||[],v=(null==r?void 0:r.filter(a=>"INF"!==a.type.toUpperCase()))||[];u.forEach(a=>{var p;const x=v.find(A=>A.key===a.parentKey);x&&(x.child=Object.assign(Object.assign({},a),{namePrefix:"MALE"===(null===(p=a.gender)||void 0===p?void 0:p.toUpperCase())?"B\xc9 TRAI":"B\xc9 G\xc1I"}))}),this.pnrOrderData={airline:this.bookingDetail.airline,bookingCode:this.bookingDetail.bookingCode,passengers:v||[],monitorType:Z.$.PRICE,specifyFareClass:[],journeys:(null===(o=this.bookingDetail.journeys)||void 0===o?void 0:o.map(a=>{var p,x,A,$;return{airline:a.airline,airlineName:a.airlineName,airlineLogo:a.airlineLogo,flightNumber:`${a.airline}${a.segments[0].flightNumber}`,startPoint:a.startPoint,endPoint:a.endPoint,startTime:O(null!==(p=a.startTime)&&void 0!==p?p:new Date).format("HH:mm"),endTime:O(null!==(x=a.endTime)&&void 0!==x?x:new Date).format("HH:mm"),departure:O(null!==(A=a.startTime)&&void 0!==A?A:new Date).format("DD/MM/YYYY"),departureDateTime:null!==($=a.startTime)&&void 0!==$?$:new Date,fareClass:"QH"===a.airline?`${a.segments[0].fareClass}-${a.segments[0].fareBasic}`:a.segments[0].fareClass,duration:a.segments[0].duration,durationStr:a.segments[0].shortDuration}}))||[],targetPrice:this.bookingDetail.targetPriceOrder||0,totalCharge:this.bookingDetail.totalCharge||0+this.bookingDetail.totalServiceFee||0},this.totalFare=this.pnrOrderData.targetPrice}handleRegenerateRegister(){var t,o;this.pnrOrderData={airline:this.registerOrderDetail.airline,bookingCode:this.registerOrderDetail.bookingCode,passengers:this.registerOrderDetail.passengers||[],monitorType:this.registerOrderDetail.monitorType,specifyFareClass:(null===(t=this.registerOrderDetail.monitors[0])||void 0===t?void 0:t.specifyFareClass)||[],journeys:(null===(o=this.registerOrderDetail.journeys)||void 0===o?void 0:o.map(r=>{var u;return{airline:r.airline,airlineName:r.airlineName,airlineLogo:r.airlineLogo,flightNumber:r.flightNumber,startPoint:r.startPoint,endPoint:r.endPoint,startTime:O(r.startTime).format("HH:mm"),endTime:O(r.endTime).format("HH:mm"),departure:O(r.startTime).format("DD/MM/YYYY"),departureDateTime:r.startTime,fareClass:(null===(u=this.registerOrderDetail.monitors[0])||void 0===u?void 0:u.currentFareClass)||"",duration:r.segments[0].shortDuration,durationStr:r.segments[0].shortDuration}}))||[],targetPrice:this.registerOrderDetail.targetPrice||0,totalCharge:this.registerOrderDetail.totalCharge},this.getAvailableAgent(this.registerOrderDetail.ownerId||"")}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}onExpandConfig(){this.registerOrderForm.controls.targetPrice.valid&&(this.isExpand=!this.isExpand)}onChangeStep(t){t===J.REVIEW&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u canh v\xe9 r\u1ebb"),this.step=t}checkDirtyNumber(t,o){this.registerOrderForm.controls[t].setErrors(o<=0?{minAmount:!0}:o>this.totalFare?{maxAmount:!0}:o?null:{required:!0})}onRegisterOrder(){if(this.registerOrderForm.markAllAsTouched(),this.registerOrderForm.invalid)return;const t=this.registerOrderForm.value,o={advanceSetting:{notifyBeforeExpired:t.notifyBeforeExpired},airline:this.pnrOrderData.airline,fareMonitor:{expectLowerFareClass:this.pnrOrderData.journeys[0].fareClass,specifyFareClass:t.specifyFareClass||[]},priceMonitor:{targetPrice:t.targetPrice},pnr:this.pnrOrderData.bookingCode,timeExpire:O(t.dayExpire).format("YYYY-MM-DD")+`T${t.hoursExpire}:00`,monitorType:t.monitorType,stateClientFree:this.availableInfo.free};this._eventLogService.captureRegisterDownFare({hasPNR:this.isSuggest?0:1,airline:this.pnrOrderData.airline,source:this.getSourceEvent(),mode:t.monitorType===Z.$.FARE?1:0,isDuplicated:this.regenerate?1:0,createdDate:O().format("YYYY-MM-DD HH:mm:ss")}),this.isLoading=!0,this._ticketLowFareService.registerOrder(o).pipe((0,m.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var u,v;if("OK"===r.status){let a="",p="";if(this.availableInfo.free?(p="well_done",a=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u canh v\xe9 r\u1ebb <strong>#${r.data.code}</strong> cho m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`):(p="success",a=`<div>Y\xeau c\u1ea7u canh v\xe9 r\u1ebb <strong>#${r.data.code}</strong> cho m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`),this._mobileDetectService.isMobile()){const x=this._bottomSheetService.open(M.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",body:a,okText:"Xem danh s\xe1ch",cancelText:"\u0110\xf3ng",hasIcon:!0,status:p}});x.containerInstance._rightButtonClick.subscribe(()=>{x.dismiss()}),x.afterDismissed().subscribe(A=>{A?(this._route.navigate(["admin/manage-pnr-orders"]),this.bottomSheetRef.dismiss(!0)):this.bottomSheetRef.dismiss(!1)})}else this._modal.open(E.V,{title:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",content:a,status:p,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:A=>{A.data?(this.ref.close(!0),this.isSuggest||this._route.navigate(["admin/manage-pnr-orders"])):this.ref.close(!1)}})}else if("TPS-TLF12"===r.objectError.errorCode)if(this.availableInfo.free=!1,this._mobileDetectService.isMobile()){const a=this._bottomSheetService.open(M.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"",body:"B\u1ea1n \u0111\xe3 \u0111\u1ea1t gi\u1edbi h\u1ea1n 2 y\xeau c\u1ea7u mi\u1ec5n ph\xed. Y\xeau c\u1ea7u n\xe0y l\xe0 c\xf3 <strong>Thu ph\xed</strong>. B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c y\xeau c\u1ea7u canh v\xe9 r\u1ebb kh\xf4ng?",okText:"X\xe1c nh\u1eadn",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"info"}});a.containerInstance._rightButtonClick.subscribe(()=>{a.dismiss()}),a.afterDismissed().subscribe(p=>{p&&this.onRegisterOrder()})}else this._modal.open(M.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"B\u1ea1n \u0111\xe3 \u0111\u1ea1t gi\u1edbi h\u1ea1n 2 y\xeau c\u1ea7u mi\u1ec5n ph\xed. Y\xeau c\u1ea7u n\xe0y l\xe0 c\xf3 <strong>Thu ph\xed</strong>. B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c y\xeau c\u1ea7u canh v\xe9 r\u1ebb kh\xf4ng?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:p=>{p.data&&this.onRegisterOrder()}});else{let a="Xem danh s\xe1ch";a="TPS-TLF006"===r.objectError.errorCode?"Qu\u1ea3n l\xfd canh v\xe9":"Canh v\xe9 kh\xe1c";const p=(null===(v=null===(u=r.objectError)||void 0===u?void 0:u.errorDescription)||void 0===v?void 0:v.vi)||`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`;if(this._mobileDetectService.isMobile()){const x=this._bottomSheetService.open(M.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:p,okText:a,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});x.containerInstance._rightButtonClick.subscribe(()=>{x.dismiss()}),x.afterDismissed().subscribe(A=>{A?"TPS-TLF006"===r.objectError.errorCode?(this.bottomSheetRef.dismiss(!0),this._route.navigate(["admin/manage-pnr-orders"])):this.onRegisterNewPnrOrder():this.bottomSheetRef.dismiss(!1)})}else this._modal.open(E.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:p,status:"error",cancelText:"\u0110\xf3ng",okText:a}).afterClosed$.subscribe({next:A=>{A.data&&("TPS-TLF006"===r.objectError.errorCode?(this.ref.close(!0),this._route.navigate(["admin/manage-pnr-orders"])):this.onRegisterNewPnrOrder())}})}},error:()=>{const r="Canh v\xe9 kh\xe1c";if(this._mobileDetectService.isMobile()){const u=this._bottomSheetService.open(M.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:`<div>M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.</div>`,okText:r,cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});u.containerInstance._rightButtonClick.subscribe(()=>{u.dismiss()}),u.afterDismissed().subscribe(v=>{v?this.onRegisterNewPnrOrder():this.bottomSheetRef.dismiss(!1)})}else this._modal.open(E.V,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:`<div>M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderData.bookingCode}</strong> kh\xf4ng c\xf2n h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.</div>`,status:"error",cancelText:"\u0110\xf3ng",okText:r}).afterClosed$.subscribe({next:v=>{v.data&&this.onRegisterNewPnrOrder()}})}})}getSourceEvent(){switch(this.sourceEvent){case"BOOKING_SUCCESS":return 0;case"BOOKING_DETAIL":return 1;case"SUGGEST":return 2;case"HEADER_MANAGE":return 3;case"EMPTY_STATE":return 4;case"REGENERATE":return 5;default:return-1}}onRegisterNewPnrOrder(){this.isSuggest=!0,this.step=J.CREATE,this.pnrOrderData={bookingCode:"",airline:"",monitorType:Z.$.PRICE,specifyFareClass:[],passengers:[],journeys:[],targetPrice:0,totalCharge:0},this.onSearchPnrSuggest(""),this.registerOrderForm.reset(),this.registerOrderForm.pacthValue({notifyBeforeExpired:!0})}onChangeLowFare(){if(this.registerOrderForm.value.monitorType===Z.$.PRICE)if(this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(M.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(o=>{o&&(this.registerOrderForm.controls.monitorType.setValue(Z.$.FARE),this.registerOrderForm.controls.specifyFareClass.setValue(null),this.registerOrderForm.controls.specifyFareClass.setValidators([T.kI.required]),this.registerOrderForm.controls.specifyFareClass.updateValueAndValidity(),this.registerOrderForm.controls.targetPrice.setErrors(null))})}else this._modal.open(M.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:o=>{o.data&&(this.registerOrderForm.controls.monitorType.setValue(Z.$.FARE),this.registerOrderForm.controls.specifyFareClass.setValue(null),this.registerOrderForm.controls.specifyFareClass.setValidators([T.kI.required]),this.registerOrderForm.controls.specifyFareClass.updateValueAndValidity(),this.registerOrderForm.controls.targetPrice.setErrors(null))}})}onChangePrice(){var t;if(this.registerOrderForm.value.monitorType===Z.$.FARE&&null!==(t=this.registerOrderForm.value.specifyFareClass)&&void 0!==t&&t.length)if(this._mobileDetectService.isMobile()){const o=this._bottomSheetService.open(M.Q4,{headerTitle:"X\xe1c nh\u1eadn",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&(this.registerOrderForm.controls.monitorType.setValue(Z.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([T.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null))})}else this._modal.open(M.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.registerOrderForm.controls.monitorType.setValue(Z.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([T.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null))}});else this.registerOrderForm.controls.monitorType.setValue(Z.$.PRICE),this.registerOrderForm.controls.targetPrice.setValue(this.pnrOrderData.targetPrice),this.registerOrderForm.controls.targetPrice.setValidators([T.kI.required]),this.registerOrderForm.controls.targetPrice.updateValueAndValidity(),this.registerOrderForm.controls.specifyFareClass.setErrors(null)}onCheckNotify(t){this.registerOrderForm.controls.notifyBeforeExpired.setValue(t)}onSearchPnrSuggest(t){this._ticketLowFareService.searchSuggestPnrMonitorLowFare({pnrSearch:t}).subscribe({next:r=>{if("OK"===r.status&&r.data){(v=>{this.pnrSuggestOptions=(null==v?void 0:v.map(a=>({bookingCode:a.bookingCode,airline:a.airline,ownerId:a.ownerId,monitorType:Z.$.PRICE,specifyFareClass:[],passengers:a.passengers.map(p=>({key:p.key,parentKey:p.parentKey,firstName:p.firstName,lastName:p.lastName,displayName:`${p.lastName} ${p.firstName}`,birthDay:"",type:p.type,namePrefix:p.namePrefix,gender:p.gender})),journeys:a.journeys.map(p=>({airline:a.airline,airlineName:this._flightDataService.getAirlineNameByCode(a.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(a.airline),flightNumber:`${a.airline}${p.segments[0].flightNumber}`,startPoint:p.startPoint,endPoint:p.endPoint,startTime:O(p.departTime).format("HH:mm"),endTime:O(p.arrivalTime).format("HH:mm"),departure:O(p.departTime).format("DD/MM/YYYY"),departureDateTime:O(p.departTime).toDate(),fareClass:"QH"===a.airline?`${p.segments[0].fareClass}-${p.segments[0].fareBasic}`:p.segments[0].fareClass,duration:"",durationStr:(0,s.N)(p.duration)})),targetPrice:a.totalFare,totalCharge:a.totalFareCharge||0+a.totalServiceFee||0})))||[],this.isDataEmpty=0===this.pnrSuggestOptions.length})(r.data.pnrSearch?r.data.pnrSearchResults:r.data.prnSuggest)}else this.isDataEmpty=!0;this.isDataEmpty&&t&&this.registerOrderForm.controls.bookingCode.setErrors({invalid:!0}),this._cd.detectChanges()},error:()=>{this.isDataEmpty&&t&&this.registerOrderForm.controls.bookingCode.setErrors({invalid:!0})}})}onSelectedPnr(t){this.getAvailableAgent(t.ownerId||""),this.getListLowerFareClass(t.airline,t.journeys[0].fareClass),this.pnrOrderData=t,this.totalFare=t.targetPrice,this.registerOrderForm.controls.targetPrice.setValue(t.targetPrice),this.generateTime(),this.pnrSuggestOptions.find(r=>r.bookingCode===t.bookingCode)||this.pnrSuggestOptions.unshift(t)}onSearchValueChange(t){this.registerOrderForm.controls.bookingCode.setErrors(t?null:{required:!0}),this.searchValueChanged$.next(t)}click(t){this.isOpen=!this.isOpen,t.stopPropagation()}onSelectedTimeExpire(){const t=this.registerOrderForm.value,o=new Date(O(t.dayExpire).format("YYYY-MM-DD")+`T${t.hoursExpire}:00`),u=new Date((new Date).getTime()+9e5);this.notifyExpired=o.getTime()<u.getTime(),this.registerOrderForm.controls.notifyBeforeExpired.setValue(!this.notifyExpired)}onDateSelected(t){var o;const r=O(t).format("DD/MM/YYYY"),u=O(new Date).format("DD/MM/YYYY"),v=O(this.timeExpire).format("DD/MM/YYYY");this.timeOption=r===u?this.generateTimeArrays((new Date).getHours(),(new Date).getMinutes(),23,60):r===v?this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes()):this.generateTimeArrays(0,0,23,60),(null===(o=this.timeOption)||void 0===o?void 0:o.map(p=>p.value).includes(this.registerOrderForm.controls.hoursExpire.value))?this.registerOrderForm.controls.hoursExpire.setErrors(null):(this.registerOrderForm.controls.hoursExpire.setErrors({illegal:!0}),this.registerOrderForm.markAllAsTouched())}onCheckedAll(t){var o,r;if(t){const u=(null===(r=null===(o=this.lowerFareClassOptions)||void 0===o?void 0:o.flatMap(v=>v.children))||void 0===r?void 0:r.map(v=>null==v?void 0:v.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(u)}else this.registerOrderForm.controls.specifyFareClass.setValue(null)}openFareOptions(){const t=this.listFareTypeOptions.every(o=>o.isActive);if(this._mobileDetectService.isMobile()){const o=this._bottomSheetService.open(y.X,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}});o.containerInstance._rightButtonClick.subscribe(()=>o.dismiss()),o.afterDismissed().subscribe({next:r=>{var u;r&&(this.listFareTypeOptions=r),o.dismiss();const v=(null===(u=this.listFareTypeOptions)||void 0===u?void 0:u.flatMap(a=>a.fareClass).filter(a=>a.isActive).map(a=>a.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(v||null)}})}else this._modal.open(y.X,{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}).afterClosed$.subscribe(r=>{var u;r.data&&(this.listFareTypeOptions=r.data);const v=(null===(u=this.listFareTypeOptions)||void 0===u?void 0:u.flatMap(a=>a.fareClass).filter(a=>a.isActive).map(a=>a.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(v||null)})}onRemoveFareTypeOption(t,o){t.preventDefault(),t.stopPropagation(),o.isActive=!1,o.isAllFareClass=!1,o.fareClass.forEach(r=>r.isActive=!1),this.handleFareClassOption()}onRemoveFareClassOption(t,o){t.preventDefault(),t.stopPropagation(),o.isActive=!1,this.handleFareClassOption()}handleFareClassOption(){var t;if(this.listFareTypeOptions.every(r=>!r.isActive))this.registerOrderForm.controls.specifyFareClass.setValue(null);else{const r=(null===(t=this.listFareTypeOptions)||void 0===t?void 0:t.flatMap(u=>u.fareClass).filter(u=>u.isActive).map(u=>u.code))||[];this.registerOrderForm.controls.specifyFareClass.setValue(r||null)}}scrollDown(){this.numOfMonth=this.numOfMonth+4}expireDatePickerClick(t){if(this._mobileDetectService.isMobile()){const o=this._bottomSheetService.open(t,{headerTitle:"Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:""});o.containerInstance._rightButtonClick.subscribe(()=>o.dismiss()),o.afterDismissed().subscribe(r=>{var u;r||null===(u=this.registerOrderForm)||void 0===u||u.controls.dayExpire.setValue(null)})}}onMobileDatePickerOK(){var t,o,r;this._bottomSheetService.dismiss(!0),null===(t=this.registerOrderForm)||void 0===t||t.controls.dayExpire.setValue(null===(o=this.registerOrderForm)||void 0===o?void 0:o.controls.dayExpire.value),this.onDateSelected(null===(r=this.registerOrderForm)||void 0===r?void 0:r.controls.dayExpire.value)}expireDateFocus(t){if(this._mobileDetectService.isMobile())return t.preventDefault(),!1}onCloseDatePicker(){this._bottomSheetService.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R.gb,8),e.Y36(P.Rr,8),e.Y36(P.Zu,8),e.Y36(n.KNP),e.Y36(w.jH),e.Y36(T.qu),e.Y36(R.oE),e.Y36(I.F0),e.Y36(e.sBO),e.Y36(Q.s),e.Y36(K.G),e.Y36(G.x),e.Y36(V.L),e.Y36(P.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["register-pnr-order"]],standalone:!0,features:[e.jDz],decls:16,vars:6,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","flex-1","overflow-auto"],["class","flex flex-col gap-y-5",4,"ngIf"],[1,"p-6"],["class","flex justify-end gap-x-2 md:justify-between",4,"ngIf"],["availableSlotRef",""],["availableSlotFeeRef",""],[4,"ngIf"],[1,"flex","flex-col","gap-y-5"],[1,"flex","justify-around","items-center","md:hidden"],[1,"flex","flex-col","gap-y-3","justify-center","items-center"],[1,"relative","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-secondary-7-4","text-white","bg-neutral-white"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"absolute","w-[120px]","h-[1px]","bg-secondary-7-4","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","gap-y-"],[1,"text-express-md","text-neutral-gray-6"],[1,"text-body-sm","text-neutral-gray-4"],[1,"flex","flex-col","items-center","gap-y-3"],[1,"relative","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","bg-secondary-7-4","text-white"],[1,"absolute","w-[126px]","h-[1px]","bg-neutral-gray-3","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","text-neutral-gray-6"],[1,"text-express-md"],[1,"text-body-sm"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3","text-neutral-gray-3","bg-neutral-white"],[1,"absolute","w-[136px]","h-[1px]","bg-neutral-gray-3","top-[50%]","left-[100%]"],[1,"flex","flex-col","items-center","justify-center","text-neutral-gray-4"],[1,"z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3","text-neutral-gray-3","bg-neutral-white"],["class","flex flex-col gap-y-2.5",4,"ngIf"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],["textField","bookingCode","valueField","bookingCode",1,"!max-w-none","w-full",3,"status","data","placeholder","formControl","allowSearch","isEmpty","onSearch","selectedChange"],["icon","search","size","small"],["cfHint","",3,"hint",4,"ngIf"],[3,"availableSlotData","content"],["cfHint","",3,"hint"],[1,"text-heading-lg"],[1,"w-full","h-[1px]","bg-neutral-gray-1","md:hidden"],[1,"flex","gap-x-2","items-center","md:flex-col","md:gap-y-2","md:items-baseline","md:justify-start"],["icon","clock","size","small"],[3,"color","size"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"!w-1/2","md:!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","maxDate","formControl","input","dateSelect","click","mousedown"],["dateFrom","cfDatepicker"],["datepickerBottomSheet",""],[1,"!w-1/2","md:!w-full"],["textField","text","valueField","value",1,"!max-w-none","md:!max-w-full",3,"status","data","placeholder","allowSearch","formControl","selectedChange"],["cfHeadIcon","","icon","clock","size","small"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","justify-between","items-start"],["icon","price_down","size","small"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],["icon","seat","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded"],[1,"py-[9px]","px-[14px]","flex","items-center","gap-x-2","cursor-pointer",3,"click"],["icon","filter","size","small"],[1,"flex-1"],["icon","plus","size","small",4,"ngIf"],["icon","remove","size","small",4,"ngIf"],["class","p-4 border-t border-neutral-gray-2",4,"ngIf"],[1,"flex","w-full","flex-col","justify-between"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","formControl","maxDate","fromDate","displayMonthsOffset"],[1,"p-6","w-full","bg-neutral-white"],[1,"flex","gap-x-4"],["cf-button","","type","secondary",1,"justify-center","w-full",3,"click"],["cf-button","",1,"justify-center","w-full",3,"disabled","click"],[1,""],[1,"!w-full",3,"status"],["cfLabel",""],["size","medium",3,"placeholder","decimal","negative","formControl","ngModelChange"],[1,"flex","justify-between","items-center","border","border-[#CCCCCC]","rounded","mt-2","mb-2","cursor-pointer","p-2",3,"click"],["id","faresgroup",1,"flex","flex-wrap","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],["class","flex items-center gap-2 flex-wrap",4,"ngIf"],["icon","chevron_down","size","small",1,"cursor-pointer"],[1,"text-neutral-gray-4","text-body-md-short"],[1,"flex","items-center","gap-2","flex-wrap"],["class","flex items-center gap-x-2",4,"ngFor","ngForOf"],["class","border border-neutral-gray-1 flex items-center gap-x-2 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"border","border-neutral-gray-1","flex","items-center","gap-x-2","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",3,"click"],["icon","plus","size","small"],["icon","remove","size","small"],[1,"p-4","border-t","border-neutral-gray-2"],[1,"flex","items-center","justify-between","gap-x-2"],["icon","notification","size","small",1,"inline-block"],[3,"disabled","checked","checkedChange"],[1,"text-body-md","pl-6"],[1,"flex","flex-col","gap-y-4"],["icon","plane","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded-lg","p-3","flex","flex-col","gap-y-4"],[1,"flex","gap-x-4","justify-end","items-center","border-t","border-neutral-gray-2","pt-2"],[1,"min-w-[104px]","text-heading-sm","text-right"],["icon","users","size","small"],[1,"border","border-dashed","border-neutral-gray-2","rounded-lg","p-3","flex","flex-col","gap-y-2"],["icon","clipboard_list","size","small"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3","md:flex-col"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","text-express-md","text-neutral-gray-6"],["class","p-3 border-b border-neutral-gray-1 flex gap-x-3 md:flex-col",4,"ngIf"],["class","flex items-start justify-between gap-x-2",4,"ngIf"],["icon","circle_information","size","small"],[1,"flex","flex-col","gap-y-2","text-body-md-short"],[1,"flex","gap-x-3"],["icon","price_up","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"flex","justify-between","gap-x-3","md:hidden"],[1,"flex","items-center","mr-4"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"hidden","md:flex","flex-col","gap-y-3"],[1,"flex","justify-between","gap-x-3"],[1,"flex-1","flex","flex-col","items-start"],[1,"flex","justify-end","gap-x-3"],[1,"w-[66px]","h-[1px]","bg-neutral-gray-3"],["class","w-full h-[1px] bg-neutral-gray-1",4,"ngIf"],[1,"flex","gap-x-2","justify-start"],[1,"flex","flex-col","gap-y-2"],["class","text-body-sm",4,"ngIf"],[1,"flex","items-start","justify-between","gap-x-2"],["icon","coupon","size","small",1,"inline-block"],["class","text-body-md pl-6 text-neutral-gray-4",4,"ngIf"],[1,"text-body-md","pl-6","text-neutral-gray-4"],[1,"flex","justify-end","gap-x-2","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","md:hidden",3,"click"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","hidden","md:flex",3,"click"],["icon","chevron_left","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],["class","px-2.5 py-1 rounded bg-black bg-opacity-30 flex items-center gap-x-2 cursor-default",4,"ngIf"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"],["icon","circle_help","size","small",1,"text-neutral-white"],["class","inline-flex gap-x-1 items-center whitespace-nowrap text-express-md text-neutral-white px-2 py-1 rounded bg-black bg-opacity-30",4,"ngIf"],[1,"inline-flex","gap-x-1","items-center","whitespace-nowrap","text-express-md","text-neutral-white","px-2","py-1","rounded","bg-black","bg-opacity-30"],[1,"line-through"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return o.close()}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Ce,40,3,"div",5),e.YNc(7,Ye,77,17,"div",5),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,qe,10,1,"div",7),e.YNc(10,Je,7,1,"div",7),e.qZA()(),e.YNc(11,Ke,2,2,"ng-template",null,8,e.W1O),e.YNc(13,We,2,2,"ng-template",null,9,e.W1O),e.YNc(15,je,1,0,"cf-spinner",10)),2&t&&(e.xp6(3),e.Oqu(o.title),e.xp6(3),e.Q6J("ngIf",o.step===o.STEP_ORDER.CREATE),e.xp6(1),e.Q6J("ngIf",o.step===o.STEP_ORDER.REVIEW),e.xp6(2),e.Q6J("ngIf","CREATE"===o.step),e.xp6(1),e.Q6J("ngIf",o.step===o.STEP_ORDER.REVIEW),e.xp6(5),e.Q6J("ngIf",o.isLoading))},dependencies:[F.ez,F.sg,F.O5,F.JJ,F.uU,n.AxE,n.Sm8,k.N8,k.Xq,N.q,T.u5,T.Fj,T.JJ,T.UX,T.oH,L.I,U.j$,U.ND,U.BN,U.lt,M.OR,w.Cs,d.f,q.b,Y.m,f.Rq,f.Ry,P.DW,w._o,b._],encapsulation:2}),i})()},61545:(H,B,c)=>{c.d(B,{_:()=>C});var F=c(98184),T=c(36895),P=c(37094),k=c(72506),w=c(74891),Y=c(24513),n=c(67460),U=c(38514),q=c(88001),d=c(94650),N=c(9381);let L=(()=>{class f{constructor(){this.openTooltipAvailables=[]}addToolTip(l){this.openTooltipAvailables.push(l)}closeAllTooltip(){for(const l of this.openTooltipAvailables)l.hideTooltip();this.openTooltipAvailables=[]}getAllTooltip(){return this.openTooltipAvailables}}return f.\u0275fac=function(l){return new(l||f)},f.\u0275prov=d.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();var M=c(9497);const s=["tooltipAvailable"];function Z(f,h){1&f&&d.GkF(0)}function D(f,h){if(1&f&&(d.TgZ(0,"div"),d.YNc(1,Z,1,0,"ng-container",6),d.qZA()),2&f){const l=d.oxw(2);d.xp6(1),d.Q6J("ngTemplateOutlet",l.content)}}function S(f,h){if(1&f){const l=d.EpF();d.TgZ(0,"div",3,4),d.NdJ("click",function(y){d.CHM(l);const e=d.oxw();return d.KtG(e.toggleTooltip(y))}),d.YNc(2,D,2,1,"div",5),d.qZA()}if(2&f){const l=d.oxw(),m=d.MAs(3);d.Q6J("manualHandle",!0)("placement","topCenter")("cfTooltip",m),d.xp6(2),d.Q6J("ngIf",l.content)}}function g(f,h){1&f&&(d.TgZ(0,"div",7)(1,"div",8)(2,"span",9),d._uU(3,"Mi\u1ec5n ph\xed"),d.qZA(),d._UZ(4,"cf-icon",10),d.qZA()())}function E(f,h){1&f&&(d.TgZ(0,"li"),d._uU(1,"T\u1eeb y\xeau c\u1ea7u th\u1ee9 3 s\u1ebd b\u1eaft \u0111\u1ea7u thu ph\xed n\u1ebfu canh th\xe0nh c\xf4ng."),d.qZA())}function b(f,h){1&f&&(d.TgZ(0,"li"),d._uU(1,"T\u1eeb y\xeau c\u1ea7u th\u1ee9 3 s\u1ebd b\u1eaft \u0111\u1ea7u thu ph\xed n\u1ebfu s\u0103n th\xe0nh c\xf4ng."),d.qZA())}function O(f,h){if(1&f){const l=d.EpF();d.TgZ(0,"div",11)(1,"div",12)(2,"ul",13)(3,"li"),d._uU(4," B\u1ea1n \u0111\u01b0\u1ee3c "),d.TgZ(5,"strong"),d._uU(6,"mi\u1ec5n ph\xed"),d.qZA(),d._uU(7," t\u1ed1i \u0111a 2 y\xeau c\u1ea7u ho\u1ea1t \u0111\u1ed9ng c\xf9ng l\xfac. "),d.qZA(),d.YNc(8,E,2,0,"li",5),d.YNc(9,b,2,0,"li",5),d.qZA()(),d.TgZ(10,"cf-icon",14),d.NdJ("click",function(){d.CHM(l);const y=d.oxw();return d.KtG(y.closeTooltip())}),d.qZA()()}if(2&f){const l=d.oxw();d.xp6(8),d.Q6J("ngIf",l.availableSlotData.type===l.TYPE_ORDER.DOWN_FARE_TICKET),d.xp6(1),d.Q6J("ngIf",l.availableSlotData.type===l.TYPE_ORDER.HUNT_NEW_TICKET)}}let C=(()=>{class f{constructor(l,m,y,e,R){this._mobileDetectService=m,this._bottomSheetService=y,this._tooltipAvailableSlotService=e,this._systemService=R,this.isShowTooltipAvailable=!1,this.TYPE_ORDER=U.G,this.tpsConfigAllFree=this._systemService.isFeatureEnabled(q.Ke.Web_Features_TpsConfig_OnAllFree_Enable),l.registerIcons([k.UNF,k.SK7])}clickout(){this.isShowTooltipAvailable&&!this._mobileDetectService.isMobile()&&(this._tooltipAvailableSlotService.closeAllTooltip(),this.isShowTooltipAvailable=!1)}toggleTooltip(l){if(l.preventDefault(),l.stopPropagation(),this._tooltipAvailableSlotService.closeAllTooltip(),this.isShowTooltipAvailable=!this.isShowTooltipAvailable,this.isShowTooltipAvailable)if(this._mobileDetectService.isMobile()){const m=this.availableSlotData.type===U.G.DOWN_FARE_TICKET?`<ul class="list-disc text-left">\n            <li> B\u1ea1n \u0111\u01b0\u1ee3c <strong>mi\u1ec5n ph\xed</strong> t\u1ed1i \u0111a 2 y\xeau c\u1ea7u ho\u1ea1t \u0111\u1ed9ng c\xf9ng l\xfac. </li>\n            <li><strong>T\u1eeb y\xeau c\u1ea7u th\u1ee9 3 s\u1ebd b\u1eaft \u0111\u1ea7u thu ph\xed n\u1ebfu canh th\xe0nh c\xf4ng.</strong></li>\n            <li>B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng canh \u0111\u01b0\u1ee3c v\xe9. C\xf3 th\u1ec3 h\u1ee7y canh v\xe9 b\u1ea5t k\xec l\xfac n\xe0o!</li>\n            <li>N\u1ebfu canh \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed d\u1ecbch v\u1ee5 ${this.availableSlotData.amount}${this.availableSlotData.currency} ch\xeanh l\u1ec7ch gi\xe1 v\xe9 m\u1edbi so v\u1edbi gi\xe1 v\xe9 ban \u0111\u1ea7u.</li>\n          </ul>`:`<ul class="list-disc text-left">\n            <li> B\u1ea1n \u0111\u01b0\u1ee3c <strong>mi\u1ec5n ph\xed</strong> t\u1ed1i \u0111a 2 y\xeau c\u1ea7u ho\u1ea1t \u0111\u1ed9ng c\xf9ng l\xfac. </li>\n            <li><strong>T\u1eeb y\xeau c\u1ea7u th\u1ee9 3 s\u1ebd b\u1eaft \u0111\u1ea7u thu ph\xed n\u1ebfu s\u0103n th\xe0nh c\xf4ng.</strong></li>\n            <li>B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9. C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o!</li>\n            <li>N\u1ebfu s\u0103n \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed d\u1ecbch v\u1ee5 ${new Intl.NumberFormat("vi-VN").format(this.availableSlotData.amount)}${this.availableSlotData.currency}/pax (ch\u1ec9 t\xednh h\xe0nh kh\xe1ch ADT v\xe0 CHD).</li>\n          </ul>`,y=this._bottomSheetService.open(n.Q4,{headerTitle:"C\xe1ch t\xednh ph\xed",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",data:{body:m,okText:"\u0110\xe3 hi\u1ec3u",cancelText:"",hasIcon:!1}});y.containerInstance._leftButtonClick.subscribe(()=>{y.dismiss()})}else this.tooltipAvailable.showTooltip(),this._tooltipAvailableSlotService.addToolTip(this.tooltipAvailable);else this.tooltipAvailable.hideTooltip()}closeTooltip(){this.tooltipAvailable.hideTooltip()}}return f.\u0275fac=function(l){return new(l||f)(d.Y36(k.KNP),d.Y36(N.L),d.Y36(P.a2),d.Y36(L),d.Y36(M.o))},f.\u0275cmp=d.Xpm({type:f,selectors:[["tooltip-available-slot"]],viewQuery:function(l,m){if(1&l&&d.Gf(s,5,Y.Lk),2&l){let y;d.iGM(y=d.CRH())&&(m.tooltipAvailable=y.first)}},hostBindings:function(l,m){1&l&&d.NdJ("click",function(e){return m.clickout(e)},!1,d.evT)},inputs:{content:"content",availableSlotData:"availableSlotData"},standalone:!0,features:[d.jDz],decls:4,vars:2,consts:[["class","whitespace-nowrap cursor-default",3,"manualHandle","placement","cfTooltip","click",4,"ngIf"],["class","whitespace-nowrap cursor-default",4,"ngIf"],["toolTipTemplate",""],[1,"whitespace-nowrap","cursor-default",3,"manualHandle","placement","cfTooltip","click"],["tooltipAvailable",""],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"whitespace-nowrap","cursor-default"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"],["icon","circle_help","size","small",1,"text-neutral-white"],[1,"flex","justify-between","gap-x-2","max-w-[260px]","!ml-3"],[1,"text-body-sm"],[1,"list-disc"],["icon","close","size","small",1,"text-neutral-white",3,"click"]],template:function(l,m){1&l&&(d.YNc(0,S,3,4,"div",0),d.YNc(1,g,5,0,"div",1),d.YNc(2,O,11,2,"ng-template",null,2,d.W1O)),2&l&&(d.Q6J("ngIf",m.availableSlotData&&!m.tpsConfigAllFree),d.xp6(1),d.Q6J("ngIf",m.availableSlotData&&m.tpsConfigAllFree))},dependencies:[T.ez,T.O5,T.tP,k.AxE,k.Sm8,Y.Lk,w.f,F.U8,P.DW],encapsulation:2}),f})()}}]);