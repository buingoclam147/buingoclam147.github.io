"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[4696],{64696:(Cr,ve,p)=>{p.r(ve),p.d(ve,{EditPnrOrderComponent:()=>z,ManagePnrOrdersComponent:()=>Dr,PnrOrderDetailComponent:()=>Oi,RegisterPnrOrderComponent:()=>R.g});var R=p(44586),T=p(36895),q=p(83700),d=p(72506),ce=p(74891),Te=p(24513),D=p(67460),Ee=p(76978),E=p(53820),Oe=p(49195),v=p(62163),I=p(38514),Ie=p(80751),x=p(15439),P=p(28746),C=p(24006),Y=p(44143),Pe=p(76331),De=p(4688),W=p(88516),Se=p(72853),Ce=p(74713),Ze=p(97218),U=p(37094),j=p(89701),ee=p(77296),te=p(61545),e=p(94650),K=p(97579),se=p(21505),de=p(62331),ue=p(77492),ne=p(9381),pe=p(62733);function Fe(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",46),e.qZA()),2&n){const t=e.oxw(2),i=e.MAs(12);e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",i)}}function Ue(n,a){1&n&&e._UZ(0,"cf-hint",47),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function we(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",49),e._UZ(2,"cf-datepicker-inline",50),e.qZA(),e.TgZ(3,"div",51)(4,"div",52)(5,"button",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onCloseDatePicker())}),e._uU(6,"H\u1ee7y"),e.qZA(),e.TgZ(7,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("formControl",t.configOrderform.controls.dayExpire)("maxDate",t.maxDate)("fromDate",t.configOrderform.controls.dayExpire.value)("displayMonthsOffset",0),e.xp6(5),e.Q6J("disabled",null==t.configOrderform?null:t.configOrderform.controls.dayExpire.invalid)}}function ke(n,a){1&n&&e._UZ(0,"cf-hint",47),2&n&&e.Q6J("hint","Gi\u1edd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function qe(n,a){1&n&&e._UZ(0,"cf-hint",47),2&n&&e.Q6J("hint","Gi\u1edd k\u1ebft th\xfac kh\xf4ng h\u1ee3p l\u1ec7.")}function Ne(n,a){1&n&&(e.TgZ(0,"div",61),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n "),e.qZA())}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",67),e.NdJ("click",function(r){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.onRemoveFareTypeOption(r,o))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function Re(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"cf-icon",67),e.NdJ("click",function(r){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(5);return e.KtG(l.onRemoveFareClassOption(r,o))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.AsE(" ",i.name," - ",t.name," ")}}function Ye(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Re,4,2,"div",64),e.BQk()),2&n){const t=a.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!i.isAllFareClass&&t.isActive)}}function Je(n,a){if(1&n&&(e.ynx(0,13),e.YNc(1,Me,4,1,"div",64),e.YNc(2,Ye,2,1,"ng-container",65),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function Be(n,a){if(1&n&&(e.TgZ(0,"div",62),e.YNc(1,Je,3,2,"ng-container",63),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openFareOptions())}),e.TgZ(2,"div",57),e.YNc(3,Ne,2,0,"div",58),e.YNc(4,Be,2,1,"div",59),e.qZA(),e._UZ(5,"cf-icon",60),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.configOrderform.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.specifyFareClass)}}function Le(n,a){1&n&&e._UZ(0,"cf-hint",47),2&n&&e.Q6J("hint","M\u1ee9c gi\xe1 mong mu\u1ed1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function je(n,a){1&n&&e._UZ(0,"cf-hint",47),2&n&&e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i thi\u1ec3u l\xe0 1\u0111")}function He(n,a){if(1&n&&(e._UZ(0,"cf-hint",47),e.ALo(1,"number")),2&n){const t=e.oxw(3);e.Q6J("hint","Gi\xe1 tr\u1ecb t\u1ed1i \u0111a l\xe0 "+e.lcZ(1,1,t.configOrderData.targetPrice)+" \u0111"||0)}}function Ke(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"cf-input-group",68)(2,"label",69),e._uU(3,"Ch\u1ec9 canh gi\xe1 v\xe9 (c\u1ee7a 1 ng\u01b0\u1eddi l\u1edbn \u0111\u1ea1i di\u1ec7n) gi\u1ea3m th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(4,"cf-input-number",70),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.checkDirtyNumber("targetPrice",r))}),e.qZA(),e.YNc(5,Le,1,1,"cf-hint",25),e.YNc(6,je,1,1,"cf-hint",25),e.YNc(7,He,2,3,"cf-hint",25),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("status",t.configOrderform.controls.targetPrice.invalid&&(t.configOrderform.controls.targetPrice.dirty||t.configOrderform.controls.targetPrice.touched)?"error":"default"),e.xp6(3),e.Q6J("placeholder","Nh\u1eadp s\u1ed1 ti\u1ec1n mu\u1ed1n canh")("formControl",t.configOrderform.controls.targetPrice),e.xp6(1),e.Q6J("ngIf",(null==t.configOrderform.controls.targetPrice.errors?null:t.configOrderform.controls.targetPrice.errors.required)&&(t.configOrderform.controls.targetPrice.dirty||t.configOrderform.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.configOrderform.controls.targetPrice.errors?null:t.configOrderform.controls.targetPrice.errors.minAmount)&&(t.configOrderform.controls.targetPrice.dirty||t.configOrderform.controls.targetPrice.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.configOrderform.controls.targetPrice.errors?null:t.configOrderform.controls.targetPrice.errors.maxAmount)&&(t.configOrderform.controls.targetPrice.dirty||t.configOrderform.controls.targetPrice.touched))}}function ze(n,a){1&n&&e._UZ(0,"cf-icon",71)}function $e(n,a){1&n&&e._UZ(0,"cf-icon",72)}function Ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",73)(1,"div",74)(2,"div",13),e._UZ(3,"cf-icon",75),e.TgZ(4,"span",15),e._uU(5,"Th\xf4ng b\xe1o"),e.qZA()(),e.TgZ(6,"cf-switch",76),e.NdJ("checkedChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCheckNotify(r))}),e.qZA()(),e.TgZ(7,"div",77),e._uU(8,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n canh v\xe9 tr\u01b0\u1edbc 15 ph\xfat"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("checked",null==t.configOrderform.value?null:t.configOrderform.value.notifyBeforeExpired)("disabled",t.isDisableNotify)}}const _e=function(){return[]};function Ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),e._UZ(4,"cf-icon",14),e.TgZ(5,"span",15),e._uU(6,"M\xe3 \u0111\u1eb7t ch\u1ed7 mu\u1ed1n canh v\xe9"),e.qZA()(),e.YNc(7,Fe,2,2,"div",9),e.qZA(),e.TgZ(8,"div",16),e._uU(9),e.qZA()(),e._UZ(10,"div",17),e.TgZ(11,"div",10)(12,"div",11)(13,"div")(14,"div",13),e._UZ(15,"cf-icon",18),e.TgZ(16,"span",15),e._uU(17,"Th\u1eddi h\u1ea1n canh v\xe9"),e.qZA()(),e.TgZ(18,"div")(19,"cf-label",19),e._uU(20),e.ALo(21,"date"),e.qZA()()(),e.TgZ(22,"div",20)(23,"cf-input-group",21),e._UZ(24,"cf-icon",22),e.TgZ(25,"input",23,24),e.NdJ("input",function(){e.CHM(t);const r=e.MAs(26);return e.KtG(r.close())})("dateSelect",function(r){e.CHM(t);const o=e.MAs(26);return e.oxw().onDateSelected(r),e.KtG(o.close())})("click",function(){e.CHM(t);const r=e.MAs(29),o=e.oxw();return e.KtG(o.expireDatePickerClick(r))})("mousedown",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.expireDateFocus(r))}),e.qZA(),e.YNc(27,Ue,1,1,"cf-hint",25),e.qZA(),e.YNc(28,we,9,16,"ng-template",null,26,e.W1O),e.TgZ(30,"div",27)(31,"cf-select",28),e._UZ(32,"cf-icon",29),e.YNc(33,ke,1,1,"cf-hint",25),e.YNc(34,qe,1,1,"cf-hint",25),e.qZA()()()()(),e._UZ(35,"div",17),e.TgZ(36,"div",11)(37,"div",30)(38,"div")(39,"div",13),e._UZ(40,"cf-icon",31),e.TgZ(41,"span",15),e._uU(42,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()(),e.TgZ(43,"div",32)(44,"div",33),e._uU(45,"Canh h\u1ea1ng gh\u1ebf r\u1ebb nh\u1ea5t v\xe0 kh\xf4ng ph\xe2n bi\u1ec7t khoang h\u1ea1ng"),e.qZA()()(),e.TgZ(46,"div",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeLowFare())}),e._UZ(47,"cf-switch",35),e.qZA()(),e.YNc(48,Qe,6,2,"div",36),e.qZA(),e._UZ(49,"div",17),e.TgZ(50,"div",37)(51,"div",30)(52,"div",13),e._UZ(53,"cf-icon",38),e.TgZ(54,"span",15),e._uU(55,"Canh theo gi\xe1"),e.qZA()(),e.TgZ(56,"div",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangePrice())}),e._UZ(57,"cf-switch",35),e.qZA()(),e.YNc(58,Ke,8,6,"div",9),e.qZA(),e.TgZ(59,"div",39)(60,"div",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onExpandConfig())}),e.TgZ(61,"div"),e._UZ(62,"cf-icon",41),e.qZA(),e.TgZ(63,"div",42),e._uU(64,"C\xe0i \u0111\u1eb7t n\xe2ng cao"),e.qZA(),e.TgZ(65,"div"),e.YNc(66,ze,1,0,"cf-icon",43),e.YNc(67,$e,1,0,"cf-icon",44),e.qZA()(),e.YNc(68,Ge,9,2,"div",45),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",t.configOrderData&&t.configOrderData.avaliableSlotInfo),e.xp6(2),e.Oqu(null==t.configOrderData?null:t.configOrderData.pnr),e.xp6(10),e.Q6J("color","gray-1"),e.xp6(1),e.hij(" Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn th\u1eddi h\u1ea1n \u0111\u1ebfn ",t.timeExpire?e.xi3(21,25,t.timeExpire,"dd/MM/yyyy HH:mm"):""," "),e.xp6(3),e.Q6J("status",t.configOrderform.controls.dayExpire.invalid&&(t.configOrderform.controls.dayExpire.dirty||t.configOrderform.controls.dayExpire.touched)?"error":"default"),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate)("maxDate",t.maxDate)("formControl",t.configOrderform.controls.dayExpire),e.xp6(2),e.Q6J("ngIf",(null==t.configOrderform.controls.dayExpire.errors?null:t.configOrderform.controls.dayExpire.errors.required)&&(t.configOrderform.controls.dayExpire.dirty||t.configOrderform.controls.dayExpire.touched)),e.xp6(4),e.Q6J("status",t.configOrderform.controls.hoursExpire.invalid&&(t.configOrderform.controls.hoursExpire.dirty||t.configOrderform.controls.hoursExpire.touched)?"error":"default")("data",t.timeOption||e.DdM(28,_e))("placeholder","Ch\u1ecdn gi\u1edd k\u1ebft th\xfac")("allowSearch",!0)("formControl",t.configOrderform.controls.hoursExpire),e.xp6(2),e.Q6J("ngIf",(null==t.configOrderform.controls.hoursExpire.errors?null:t.configOrderform.controls.hoursExpire.errors.required)&&(t.configOrderform.controls.hoursExpire.dirty||t.configOrderform.controls.hoursExpire.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.configOrderform.controls.hoursExpire.errors?null:t.configOrderform.controls.hoursExpire.errors.illegal)&&(t.configOrderform.controls.hoursExpire.dirty||t.configOrderform.controls.hoursExpire.touched)),e.xp6(13),e.Q6J("checked",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(9),e.Q6J("checked",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(8),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Xe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",96)(2,"div",97)(3,"div",98),e._uU(4),e.qZA()(),e.TgZ(5,"div",99),e._UZ(6,"img",100),e.qZA(),e.TgZ(7,"div",101)(8,"div",102),e._uU(9),e.qZA(),e.TgZ(10,"div",103),e._uU(11),e.qZA()(),e.TgZ(12,"div",101)(13,"div",102),e._uU(14),e.qZA(),e.TgZ(15,"div",103),e._uU(16),e.qZA()(),e.TgZ(17,"div",101)(18,"div",102),e._uU(19),e.qZA(),e.TgZ(20,"div",103),e._uU(21),e.qZA()(),e.TgZ(22,"div",104)(23,"div",105)(24,"div"),e._uU(25),e.qZA(),e.TgZ(26,"div",106),e._UZ(27,"div",107)(28,"div",108),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA()(),e.TgZ(31,"div"),e._UZ(32,"cf-icon",109),e.qZA()(),e.TgZ(33,"div",101)(34,"div",102),e._uU(35),e.qZA(),e.TgZ(36,"div",103),e._uU(37),e.qZA()()(),e.BQk()),2&n){const t=a.$implicit,i=a.index;e.xp6(4),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(3),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(5),e.Oqu(t.departure),e.xp6(5),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint)}}function We(n,a){if(1&n&&(e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function et(n,a){if(1&n&&(e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.AsE(" ",i.name," - ",t.name," ")}}function tt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,et,3,2,"div",64),e.BQk()),2&n){const t=a.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!i.isAllFareClass&&t.isActive)}}function nt(n,a){if(1&n&&(e.ynx(0,13),e.YNc(1,We,3,1,"div",64),e.YNc(2,tt,2,1,"ng-container",65),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function it(n,a){if(1&n&&(e.TgZ(0,"div",62),e.YNc(1,nt,3,2,"ng-container",63),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function rt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function at(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.configOrderform.value.targetPrice)," \u0111 ")}}function ot(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function lt(n,a){1&n&&(e.TgZ(0,"div",110)(1,"div",84),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",85),e._uU(4,"Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}function ct(n,a){1&n&&e._UZ(0,"div",17)}function st(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ct,1,0,"div",111),e.TgZ(2,"div",112)(3,"div",92),e._uU(4),e.qZA(),e.TgZ(5,"div",113)(6,"div",92),e._uU(7),e.qZA()()(),e.BQk()),2&n){const t=a.$implicit,i=a.index,r=a.first;e.xp6(1),e.Q6J("ngIf",!r),e.xp6(3),e.hij("",i+1,"."),e.xp6(3),e.Oqu(t.displayName)}}function dt(n,a){1&n&&(e.TgZ(0,"div",118),e._uU(1,"B\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u n\xe0y"),e.qZA())}function ut(n,a){if(1&n&&(e.TgZ(0,"div",118),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("N\u1ebfu canh \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed b\u1eb1ng ",e.lcZ(2,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1 ")}}function pt(n,a){if(1&n&&(e.TgZ(0,"div",119)(1,"span",120),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",121),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.AsE("",e.lcZ(3,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function _t(n,a){if(1&n&&(e.TgZ(0,"div",119)(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",121),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.AsE("",e.lcZ(3,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function ft(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",114)(2,"div")(3,"div",13),e._UZ(4,"cf-icon",115),e.TgZ(5,"span",15),e._uU(6,"Ph\xed y\xeau c\u1ea7u"),e.qZA()(),e.YNc(7,dt,2,0,"div",116),e.YNc(8,ut,3,4,"div",116),e.qZA(),e.YNc(9,pt,5,4,"div",117),e.YNc(10,_t,5,4,"div",117),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",!t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",!t.configOrderData.avaliableSlotInfo.free)}}function gt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",122)(2,"div",123)(3,"div",106)(4,"div",98),e._uU(5),e.qZA()(),e.TgZ(6,"div",99),e._UZ(7,"img",100),e.qZA(),e.TgZ(8,"div",124)(9,"div",102),e._uU(10),e.qZA(),e.TgZ(11,"div",103),e._uU(12),e.qZA()(),e.TgZ(13,"div",101)(14,"div",102),e._uU(15),e.qZA(),e.TgZ(16,"div",103),e._uU(17),e.qZA()()(),e.TgZ(18,"div",125)(19,"div",101)(20,"div",102),e._uU(21),e.qZA(),e.TgZ(22,"div",103),e._uU(23),e.qZA()(),e.TgZ(24,"div",104)(25,"div",105)(26,"div"),e._uU(27),e.qZA(),e.TgZ(28,"div",106),e._UZ(29,"div",107)(30,"div",126),e.qZA(),e.TgZ(31,"div"),e._uU(32,"Bay th\u1eb3ng"),e.qZA()(),e.TgZ(33,"div"),e._UZ(34,"cf-icon",109),e.qZA()(),e.TgZ(35,"div",101)(36,"div",102),e._uU(37),e.qZA(),e.TgZ(38,"div",103),e._uU(39),e.qZA()()()(),e.BQk()),2&n){const t=a.$implicit,i=a.index;e.xp6(5),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departure),e.xp6(2),e.Oqu(t.fareClass),e.xp6(4),e.Oqu(t.startTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(10),e.Oqu(t.endTime),e.xp6(2),e.Oqu(t.endPoint)}}function mt(n,a){if(1&n&&(e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name," ")}}function ht(n,a){if(1&n&&(e.TgZ(0,"div",66)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.AsE(" ",i.name," - ",t.name," ")}}function xt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ht,3,2,"div",64),e.BQk()),2&n){const t=a.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!i.isAllFareClass&&t.isActive)}}function vt(n,a){if(1&n&&(e.ynx(0,13),e.YNc(1,mt,3,1,"div",64),e.YNc(2,xt,2,1,"ng-container",65),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAllFareClass),e.xp6(1),e.Q6J("ngForOf",t.fareClass)}}function Tt(n,a){if(1&n&&(e.TgZ(0,"div",62),e.YNc(1,vt,3,2,"ng-container",63),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listFareTypeOptions)}}function Et(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Ot(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.configOrderform.value.targetPrice)," \u0111 ")}}function Dt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Ct(n,a){1&n&&(e.TgZ(0,"div",110)(1,"div",84),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",85),e._uU(4,"Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}function Zt(n,a){1&n&&e._UZ(0,"div",17)}function yt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Zt,1,0,"div",111),e.TgZ(2,"div",112)(3,"div",92),e._uU(4),e.qZA(),e.TgZ(5,"div",113)(6,"div",92),e._uU(7),e.qZA()()(),e.BQk()),2&n){const t=a.$implicit,i=a.index,r=a.first;e.xp6(1),e.Q6J("ngIf",!r),e.xp6(3),e.hij("",i+1,"."),e.xp6(3),e.Oqu(t.displayName)}}function bt(n,a){1&n&&(e.TgZ(0,"div",118),e._uU(1,"B\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u n\xe0y"),e.qZA())}function At(n,a){if(1&n&&(e.TgZ(0,"div",118),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("N\u1ebfu canh \u0111\u01b0\u1ee3c v\xe9, b\u1ea1n s\u1ebd tr\u1ea3 ph\xed b\u1eb1ng ",e.lcZ(2,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1 ")}}function It(n,a){if(1&n&&(e.TgZ(0,"div",119)(1,"span",120),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",121),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.AsE("",e.lcZ(3,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function Pt(n,a){if(1&n&&(e.TgZ(0,"div",119)(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA(),e._UZ(4,"cf-icon",121),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.AsE("",e.lcZ(3,2,t.configOrderData.avaliableSlotInfo.percent),"",t.configOrderData.avaliableSlotInfo.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function St(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",114)(2,"div")(3,"div",13),e._UZ(4,"cf-icon",115),e.TgZ(5,"span",15),e._uU(6,"Ph\xed y\xeau c\u1ea7u"),e.qZA()(),e.YNc(7,bt,2,0,"div",116),e.YNc(8,At,3,4,"div",116),e.qZA(),e.YNc(9,It,5,4,"div",117),e.YNc(10,Pt,5,4,"div",117),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",!t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo.free),e.xp6(1),e.Q6J("ngIf",!t.configOrderData.avaliableSlotInfo.free)}}function Ft(n,a){if(1&n&&(e.TgZ(0,"div",10)(1,"div",78)(2,"div",37)(3,"div",13),e._UZ(4,"cf-icon",79),e.TgZ(5,"span",15),e._uU(6,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(7,"div",80),e.YNc(8,Xe,38,12,"ng-container",65),e.qZA()(),e.TgZ(9,"div",37)(10,"div",13),e._UZ(11,"cf-icon",81),e.TgZ(12,"span",15),e._uU(13,"Th\xf4ng tin y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(14,"div",82)(15,"div",83)(16,"div",84),e._uU(17,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n: "),e.qZA(),e.TgZ(18,"div",85),e.YNc(19,it,2,1,"div",59),e.YNc(20,rt,2,0,"span",9),e.qZA()(),e.TgZ(21,"div",83)(22,"div",84),e._uU(23,"M\u1ee9c gi\xe1 mong mu\u1ed1n: "),e.qZA(),e.TgZ(24,"div",85),e.YNc(25,at,3,3,"span",9),e.YNc(26,ot,2,0,"span",9),e.qZA()(),e.YNc(27,lt,5,0,"div",86),e.qZA()(),e.TgZ(28,"div",37)(29,"div",13),e._UZ(30,"cf-icon",87),e.TgZ(31,"span",15),e._uU(32,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(33,"div",82),e.YNc(34,st,8,3,"ng-container",65),e.qZA()(),e.YNc(35,ft,11,4,"div",9),e.TgZ(36,"div",37)(37,"div",13),e._UZ(38,"cf-icon",88),e.TgZ(39,"span",15),e._uU(40,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(41,"div",89)(42,"div",90)(43,"div"),e._UZ(44,"cf-icon",91),e.qZA(),e.TgZ(45,"div")(46,"span",92),e._uU(47,"N\u1ebfu gi\xe1 v\xe9 t\u0103ng,"),e.qZA(),e._uU(48," th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n v\u1ec1 thay \u0111\u1ed5i gi\xe1 mi\u1ec5n ph\xed v\xe0 ti\u1ebfp t\u1ee5c canh \u0111\u1ebfn khi h\u1ebft h\u1ea1n canh v\xe9. "),e.qZA()(),e.TgZ(49,"div",90)(50,"div"),e._UZ(51,"cf-icon",18),e.qZA(),e.TgZ(52,"div")(53,"span",92),e._uU(54,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng canh \u0111\u01b0\u1ee3c v\xe9 r\u1ebb."),e.qZA(),e._uU(55," C\xf3 th\u1ec3 h\u1ee7y canh v\xe9 b\u1ea5t k\xec l\xfac n\xe0o!"),e.qZA()(),e.TgZ(56,"div",90)(57,"div"),e._UZ(58,"cf-icon",93),e.qZA(),e.TgZ(59,"div",92),e._uU(60,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(61,"span",94),e._uU(62,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(63," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()(),e.TgZ(64,"div",95)(65,"div",37)(66,"div",13),e._UZ(67,"cf-icon",87),e.TgZ(68,"span",15),e._uU(69,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(70,"div",80),e.YNc(71,gt,40,11,"ng-container",65),e.qZA()(),e.TgZ(72,"div",37)(73,"div",13),e._UZ(74,"cf-icon",87),e.TgZ(75,"span",15),e._uU(76,"Th\xf4ng tin y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(77,"div",82)(78,"div",83)(79,"div",84),e._uU(80,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n: "),e.qZA(),e.TgZ(81,"div",85),e.YNc(82,Tt,2,1,"div",59),e.YNc(83,Et,2,0,"span",9),e.qZA()(),e.TgZ(84,"div",83)(85,"div",84),e._uU(86,"M\u1ee9c gi\xe1 mong mu\u1ed1n: "),e.qZA(),e.TgZ(87,"div",85),e.YNc(88,Ot,3,3,"span",9),e.YNc(89,Dt,2,0,"span",9),e.qZA()(),e.YNc(90,Ct,5,0,"div",86),e.qZA()(),e.TgZ(91,"div",37)(92,"div",13),e._UZ(93,"cf-icon",87),e.TgZ(94,"span",15),e._uU(95,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(96,"div",82),e.YNc(97,yt,8,3,"ng-container",65),e.qZA()(),e.YNc(98,St,11,4,"div",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",(null==t.configOrderData?null:t.configOrderData.journeys)||e.DdM(16,_e)),e.xp6(11),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE&&t.configOrderform.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.notifyBeforeExpired),e.xp6(7),e.Q6J("ngForOf",t.configOrderData.passengers),e.xp6(1),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo),e.xp6(36),e.Q6J("ngForOf",(null==t.configOrderData?null:t.configOrderData.journeys)||e.DdM(17,_e)),e.xp6(11),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE&&t.configOrderform.value.specifyFareClass),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.configOrderform.value.notifyBeforeExpired),e.xp6(7),e.Q6J("ngForOf",t.configOrderData.passengers),e.xp6(1),e.Q6J("ngIf",t.configOrderData.avaliableSlotInfo)}}function Ut(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",127)(1,"button",128),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._uU(2," \u0110\xf3ng "),e.qZA(),e.TgZ(3,"button",129),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e._UZ(4,"cf-icon",130),e.TgZ(5,"span"),e._uU(6,"Quay l\u1ea1i"),e.qZA()(),e.TgZ(7,"button",131),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep("CRAWL"))}),e.TgZ(8,"span"),e._uU(9,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(10,"cf-icon",132),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("disabled",t.configOrderform.invalid)}}function wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",127)(1,"button",133),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeStep("EDIT"))}),e._UZ(2,"cf-icon",130),e._uU(3," Quay l\u1ea1i "),e.qZA(),e.TgZ(4,"button",131),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onOk())}),e.TgZ(5,"span"),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(7,"cf-icon",134),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("disabled",t.configOrderform.invalid)}}function kt(n,a){1&n&&(e.TgZ(0,"div",136)(1,"span",137),e._uU(2,"Thu ph\xed"),e.qZA(),e._UZ(3,"cf-icon",121),e.qZA())}function qt(n,a){1&n&&(e.TgZ(0,"div",136)(1,"span",137),e._uU(2,"Mi\u1ec5n ph\xed"),e.qZA(),e._UZ(3,"cf-icon",121),e.qZA())}function Nt(n,a){if(1&n&&(e.YNc(0,kt,4,0,"div",135),e.YNc(1,qt,4,0,"div",135)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.available)}}function Mt(n,a){1&n&&e._UZ(0,"cf-spinner")}let z=(()=>{class n{constructor(t,i,r,o,l,u,c,_,h,f,g,Z,b,w){this.ref=i,this.bottomSheetData=r,this.calendar=o,this._fb=l,this._cd=u,this._ticketLowFareService=c,this._toastService=_,this._modal=h,this._eventLogService=f,this.bottomSheetRef=g,this._mobileDetectService=Z,this._bottomSheetService=b,this._flightDataService=w,this.title="Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u canh v\xe9 r\u1ebb",this.timeExpireStr="",this.isDisableNotify=!1,this.isOpen=!1,this.numOfMonth=1,this.dateExpireSelected=null,this.bottomCenter=[{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:0,offsetY:0}],this.hoursOption=[],this.minuteOption=[],this.timeOption=[],this.isExpand=!0,this.step="EDIT",this.lowerFareClassOptions=[],this.MAX_TIME_EXECUTE=48,this.isLoading=!1,this.MONITOR_TYPE=v.$,this.listFareTypeOptions=[],t.registerIcons([d.YvC,d.TM4,d.RxK,d.Nnv,d.Vn9,d.qDv,d.KMO,d.rJw,d.PcQ,d.ZlA,d.Lji,d.PSW]),i&&(this.orderId=i.data.orderId,this.sourceEvent=i.data.sourceEvent),r&&(this.isExpand=!1,this.orderId=r.orderId,this.sourceEvent=r.sourceEvent),this.minDate=o.getToday()}ngOnInit(){this.timeOption=this.generateTimeArrays(),this.initFormGroup(),this.orderId&&this.loadCurrentConfig()}initFormGroup(){this.configOrderform=this._fb.group({notifyBeforeExpired:[!1],currentFareClass:[null],monitorType:[v.$.FARE],timeExecute:[this.MAX_TIME_EXECUTE],dayExpire:[null,C.kI.required],hoursExpire:[null,C.kI.required],targetPrice:[0],specifyFareClass:[[]]})}generateTimeArrays(t=0,i=0,r=24,o=60){const l=[];for(let u=t+1;u<=r;u++)for(let c=0;c<o;c+=15){const _=u.toString().padStart(2,"0"),h=c.toString().padStart(2,"0");l.push({value:`${_}:${h}`,text:`${_}:${h}`})}return l}loadCurrentConfig(){const t={orderId:this.orderId};this.isLoading=!0,this._ticketLowFareService.getCurrentConfigOrder(t).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:i=>{var r,o,l,u;if("OK"===i.status){this.configOrderData={orderId:i.data.orderId,pnr:i.data.pnr,conditionId:i.data.conditionId||"",monitorType:i.data.monitorType,notifyBeforeExpired:i.data.advanceSetting.notifyBeforeExpired,targetPrice:i.data.monitorType===v.$.PRICE?i.data.priceMonitor.targetPrice:(null===(r=i.data.ticketInfo)||void 0===r?void 0:r.totalFare)||0,currentFareClass:(null===(o=i.data.monitorFare)||void 0===o?void 0:o.currentFareClass)||"",specifyFareClass:(null===(l=i.data.monitorFare)||void 0===l?void 0:l.specifyFareClass)||[],passengers:i.data.ticketInfo.passengers.map(g=>({firstName:g.firstName,displayName:`${g.lastName} ${g.firstName}`,key:g.key,lastName:g.lastName,parentKey:g.parentKey,type:g.type})),journeys:(null===(u=i.data.ticketInfo.journeys)||void 0===u?void 0:u.map(g=>({airline:i.data.ticketInfo.airline,airlineName:this._flightDataService.getAirlineNameByCode(i.data.ticketInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(i.data.ticketInfo.airline),flightNumber:`${i.data.ticketInfo.airline}${g.segments[0].flightNumber}`,startPoint:g.startPoint,endPoint:g.endPoint,startTime:x(g.departTime).format("HH:mm"),endTime:x(g.arrivalTime).format("HH:mm"),departure:x(g.departTime).format("DD/MM/YYYY"),departureDateTime:new Date(g.departTime),fareClass:i.data.monitorFare.currentFareClass,duration:(0,j.N)(g.duration),durationStr:(0,j.N)(g.duration)})))||[],ticketInfoOrder:i.data.ticketInfo,timeExpire:i.data.timeExpire,avaliableSlotInfo:{amountPerPax:i.data.availableSlotInfo.amountPerPax,currency:i.data.availableSlotInfo.currency,free:i.data.availableSlotInfo.free,percent:i.data.availableSlotInfo.percent,type:i.data.availableSlotInfo.type}},this.availableSlotData={available:i.data.availableSlotInfo.free,type:i.data.availableSlotInfo.type,amount:i.data.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?i.data.availableSlotInfo.percent:i.data.availableSlotInfo.amountPerPax,currency:i.data.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?i.data.availableSlotInfo.currency:"\u0111"},this.generateTime();const c=new Date;Math.floor((new Date(i.data.timeExpire).getTime()-c.getTime())/6e4)<15&&(this.isDisableNotify=!0),this.dateExpireSelected=x(this.configOrderData.timeExpire).toDate(),this.configOrderform.patchValue({notifyBeforeExpired:this.configOrderData.notifyBeforeExpired,targetPrice:this.configOrderData.targetPrice,currentFareClass:this.configOrderData.currentFareClass,specifyFareClass:this.configOrderData.specifyFareClass,dayExpire:x(this.configOrderData.timeExpire).toDate(),hoursExpire:x(this.configOrderData.timeExpire).format("HH:mm"),monitorType:this.configOrderData.monitorType}),this.configOrderData.monitorType===v.$.FARE&&(this.configOrderform.controls.specifyFareClass.setValidators([C.kI.required]),this.configOrderform.controls.specifyFareClass.updateValueAndValidity()),this.configOrderData.monitorType===v.$.PRICE&&(this.configOrderform.controls.targetPrice.setValidators([C.kI.required]),this.configOrderform.controls.targetPrice.updateValueAndValidity()),this.timeExpireStr=this.configOrderform.value.hoursExpire+":"+this.configOrderform.value.minuteExpire,this.getListLowerFareClass(this.configOrderData.ticketInfoOrder.airline,i.data.monitorFare.currentFareClass)}else this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0})}})}generateTime(){const t=new Date,o=(new Date(this.configOrderData.ticketInfoOrder.journeys[0].departTime).getTime()-t.getTime())/36e5-2,l=Math.min(Math.floor(o),this.MAX_TIME_EXECUTE);t.setHours(t.getHours()+l),this.timeExpire=t,this.maxDate=(0,W.jy)(this.timeExpire),this._cd.detectChanges()}getListLowerFareClass(t,i){this._ticketLowFareService.getListLowerFareClass({airline:t,fareClass:i}).subscribe({next:o=>{var l,u;"OK"===o.status&&(this.lowerFareClassOptions=(null===(l=o.data.cabin)||void 0===l?void 0:l.flatMap(c=>c.fareType.map(_=>({code:_.code,value:_.description,children:_.fareClass.map(h=>({code:h.code,value:h.name}))}))))||[],this.listFareTypeOptions=(null===(u=o.data.cabin)||void 0===u?void 0:u.flatMap(c=>c.fareType.map(_=>({order:_.order,code:_.code,name:_.description,isActive:!1,isExpand:!1,isAllFareClass:!1,fareTypeSelected:0,totalFareType:_.fareClass.length,fareClass:_.fareClass.map(h=>({order:h.order,code:h.code,name:h.name,isActive:!1}))}))))||[],this._cd.detectChanges(),this.configOrderData&&this.configOrderData.specifyFareClass&&setTimeout(()=>{this.configOrderform.controls.specifyFareClass.setValue(this.configOrderData.specifyFareClass),this.listFareTypeOptions.forEach(c=>{c.fareClass.forEach(_=>{_.isActive=this.configOrderData.specifyFareClass.includes(_.code)}),c.isAllFareClass=c.fareClass.every(_=>_.isActive),c.isActive=c.fareClass.some(_=>_.isActive)})},0))}})}close(){this.ref&&this.ref.close(),this.bottomSheetData&&this.bottomSheetRef.dismiss()}onOk(){const t=this.configOrderform.value,i={orderId:this.configOrderData.orderId,advanceSetting:{notifyBeforeExpired:t.notifyBeforeExpired},conditionId:this.configOrderData.conditionId,fareMonitor:{specifyFareClass:t.specifyFareClass},priceMonitor:{targetPrice:t.targetPrice},monitorType:t.monitorType,timeExpire:x(t.dayExpire).format("YYYY-MM-DD")+`T${t.hoursExpire}:00`};this._eventLogService.captureEditDownFare({updateTypes:{timeExpire:i.timeExpire===this.configOrderData.timeExpire?0:1,fare:t.specifyFareClass===this.configOrderData.specifyFareClass?0:1,price:t.targetPrice===this.configOrderData.targetPrice?0:1,notif:t.notifyBeforeExpired===this.configOrderData.notifyBeforeExpired?0:1},source:"CARD_MANAGE"===this.sourceEvent?1:0}),this.isLoading=!0,this._ticketLowFareService.updateConfigOrder(i).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:r=>{"OK"===r.status?(this.ref&&this.ref.close("OK"),this.bottomSheetData&&this.bottomSheetRef.dismiss("OK")):(this.ref&&this.ref.close("ERROR"),this.bottomSheetData&&this.bottomSheetRef.dismiss("ERROR"))}})}onExpandConfig(){this.configOrderform.controls.targetPrice.valid&&(this.isExpand=!this.isExpand)}onChangeStep(t){this.step=t,"CRAWL"==t&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u canh v\xe9")}onChangeLowFare(){if(this.configOrderform.value.monitorType===v.$.PRICE)if(this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(D.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(i=>{i&&(this.configOrderform.controls.monitorType.setValue(v.$.FARE),this.configOrderform.controls.specifyFareClass.setValue(null),this.configOrderform.controls.targetPrice.setValue(this.configOrderData.targetPrice||1),this.configOrderform.controls.specifyFareClass.setValidators([C.kI.required]),this.configOrderform.controls.specifyFareClass.updateValueAndValidity(),this.configOrderform.controls.targetPrice.setValidators(null),this.configOrderform.controls.targetPrice.updateValueAndValidity())})}else this._modal.open(D.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:i=>{i.data&&(this.configOrderform.controls.monitorType.setValue(v.$.FARE),this.configOrderform.controls.specifyFareClass.setValue(null),this.configOrderform.controls.targetPrice.setValue(this.configOrderData.targetPrice||1),this.configOrderform.controls.specifyFareClass.setValidators([C.kI.required]),this.configOrderform.controls.specifyFareClass.updateValueAndValidity(),this.configOrderform.controls.targetPrice.setValidators(null),this.configOrderform.controls.targetPrice.updateValueAndValidity())}})}onChangePrice(){var t;if(this.configOrderform.value.monitorType===v.$.FARE&&null!==(t=this.configOrderform.value.specifyFareClass)&&void 0!==t&&t.length)if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(D.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});i.containerInstance._rightButtonClick.subscribe(()=>{i.dismiss()}),i.afterDismissed().subscribe(r=>{r&&(this.configOrderform.controls.monitorType.setValue(v.$.PRICE),this.configOrderData.monitorType=v.$.PRICE,this.configOrderform.controls.targetPrice.setValue(this.configOrderData.targetPrice||1),this.configOrderform.controls.targetPrice.setValidators([C.kI.required]),this.configOrderform.controls.targetPrice.updateValueAndValidity(),this.configOrderform.controls.specifyFareClass.setErrors(null))})}else this._modal.open(D.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>Canh theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c canh theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.configOrderform.controls.monitorType.setValue(v.$.PRICE),this.configOrderData.monitorType=v.$.PRICE,this.configOrderform.controls.targetPrice.setValue(this.configOrderData.targetPrice||1),this.configOrderform.controls.targetPrice.setValidators([C.kI.required]),this.configOrderform.controls.targetPrice.updateValueAndValidity(),this.configOrderform.controls.specifyFareClass.setErrors(null))}});else this.configOrderform.controls.monitorType.setValue(v.$.PRICE),this.configOrderform.controls.targetPrice.setValue(this.configOrderData.targetPrice||1),this.configOrderform.controls.targetPrice.setValidators([C.kI.required]),this.configOrderform.controls.targetPrice.updateValueAndValidity(),this.configOrderform.controls.specifyFareClass.setErrors(null)}onCheckNotify(t){this.configOrderform.controls.notifyBeforeExpired.setValue(t)}checkDirtyNumber(t,i){this.configOrderform.controls[t].setErrors(i<=0?{minAmount:!0}:this.configOrderData.monitorType===v.$.PRICE&&i>this.configOrderData.targetPrice?{maxAmount:!0}:i?null:{required:!0})}click(t){this.isOpen=!this.isOpen,t.stopPropagation()}onSelectedTimeExpire(){this.isOpen=!1}onDateSelected(t){const i=x(t).format("DD/MM/YYYY"),r=x(new Date).format("DD/MM/YYYY"),o=x(this.timeExpire).format("DD/MM/YYYY");this.timeOption=i===r?this.generateTimeArrays((new Date).getHours(),(new Date).getMinutes(),24,60):i===o?this.generateTimeArrays(0,0,this.timeExpire.getHours(),this.timeExpire.getMinutes()):this.generateTimeArrays(0,0,24,60),this.timeOption.includes(this.configOrderform.controls.hoursExpire.value)?this.configOrderform.controls.hoursExpire.setErrors(null):this.configOrderform.controls.hoursExpire.setErrors({illegal:!0})}openFareOptions(){const t=this.listFareTypeOptions.every(i=>i.isActive);if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(Ze.X,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}});i.containerInstance._rightButtonClick.subscribe(()=>i.dismiss()),i.afterDismissed().subscribe({next:r=>{var o;r&&(this.listFareTypeOptions=r),i.dismiss();const l=(null===(o=this.listFareTypeOptions)||void 0===o?void 0:o.flatMap(u=>u.fareClass).filter(u=>u.isActive).map(u=>u.code))||[];this.configOrderform.controls.specifyFareClass.setValue(l||null)}})}else this._modal.open(Ze.X,{listFareTypeOptions:this.listFareTypeOptions,selectedAll:t}).afterClosed$.subscribe(r=>{var o;r.data&&(this.listFareTypeOptions=r.data);const l=(null===(o=this.listFareTypeOptions)||void 0===o?void 0:o.flatMap(u=>u.fareClass).filter(u=>u.isActive).map(u=>u.code))||[];this.configOrderform.controls.specifyFareClass.setValue(l||null)})}onRemoveFareTypeOption(t,i){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.isAllFareClass=!1,i.fareClass.forEach(r=>r.isActive=!1),this.handleFareClassOption()}onRemoveFareClassOption(t,i){t.preventDefault(),t.stopPropagation(),i.isActive=!1,this.handleFareClassOption()}handleFareClassOption(){var t;if(this.listFareTypeOptions.every(r=>!r.isActive))this.configOrderform.controls.specifyFareClass.setValue(null);else{const r=(null===(t=this.listFareTypeOptions)||void 0===t?void 0:t.flatMap(o=>o.fareClass).filter(o=>o.isActive).map(o=>o.code))||[];this.configOrderform.controls.specifyFareClass.setValue(r||null)}}expireDatePickerClick(t){if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(t,{headerTitle:"Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:""});i.containerInstance._rightButtonClick.subscribe(()=>i.dismiss()),i.afterDismissed().subscribe(r=>{var o,l;r||null===(o=this.configOrderform)||void 0===o||o.controls.dayExpire.setValue(null!==(l=this.dateExpireSelected)&&void 0!==l?l:null)})}}expireDateFocus(t){if(this._mobileDetectService.isMobile())return t.preventDefault(),!1}onCloseDatePicker(){this._bottomSheetService.dismiss()}onMobileDatePickerOK(){var t,i,r,o,l;this._bottomSheetService.dismiss(!0),!(null===(t=this.configOrderform)||void 0===t)&&t.controls.dayExpire.value&&(this.dateExpireSelected=null===(i=this.configOrderform)||void 0===i?void 0:i.controls.dayExpire.value),null===(r=this.configOrderform)||void 0===r||r.controls.dayExpire.setValue(null===(o=this.configOrderform)||void 0===o?void 0:o.controls.dayExpire.value),this.onDateSelected(null===(l=this.configOrderform)||void 0===l?void 0:l.controls.dayExpire.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.KNP),e.Y36(K.gb,8),e.Y36(U.Rr,8),e.Y36(W.jH),e.Y36(C.qu),e.Y36(e.sBO),e.Y36(se.s),e.Y36(de.BX),e.Y36(K.oE),e.Y36(ue.x),e.Y36(U.Zu,8),e.Y36(ne.L),e.Y36(U.a2),e.Y36(pe.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-pnr-order"]],standalone:!0,features:[e.jDz],decls:14,vars:6,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","w-full","h-full","overflow-auto"],["class","flex flex-col gap-y-5",4,"ngIf"],[1,"p-6"],["class","flex justify-end gap-x-4 md:justify-between",4,"ngIf"],["availableSlotRef",""],[4,"ngIf"],[1,"flex","flex-col","gap-y-5"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"text-heading-lg"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],["icon","clock","size","small"],["type","inverted",3,"color"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"!w-1/2","md:!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y k\u1ebft th\xfac",1,"py-[7px]",3,"secondaryCalendar","displayMonths","minDate","maxDate","formControl","input","dateSelect","click","mousedown"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["datepickerBottomSheet",""],[1,"!w-1/2","md:!w-full"],["textField","text","valueField","value",1,"!max-w-none","w-full","md:!max-w-full",3,"status","data","placeholder","allowSearch","formControl"],["cfHeadIcon","","icon","clock","size","small"],[1,"flex","justify-between","items-start"],["icon","seat","size","small"],[1,"text-body-md-short","flex","items-center","gap-x-2.5"],[1,"text-body-md-short"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],["icon","price_down","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded"],[1,"py-[9px]","px-[14px]","flex","items-center","gap-x-2","cursor-pointer",3,"click"],["icon","filter","size","small"],[1,"flex-1"],["icon","plus","size","small",4,"ngIf"],["icon","remove","size","small",4,"ngIf"],["class","p-4 border-t border-neutral-gray-2",4,"ngIf"],[3,"availableSlotData","content"],["cfHint","",3,"hint"],[1,"flex","w-full","flex-col","justify-between"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer"],["outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","formControl","maxDate","fromDate","displayMonthsOffset"],[1,"p-6","w-full","bg-neutral-white"],[1,"flex","gap-x-4"],["cf-button","","type","secondary",1,"justify-center","w-full",3,"click"],["cf-button","",1,"justify-center","w-full",3,"disabled","click"],[1,""],[1,"flex","justify-between","items-center","border","border-[#CCCCCC]","rounded","mt-2","mb-2","cursor-pointer","p-2",3,"click"],["id","faresgroup",1,"flex","flex-wrap","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],["class","flex items-center gap-2 flex-wrap",4,"ngIf"],["icon","chevron_down","size","small",1,"cursor-pointer"],[1,"text-neutral-gray-4","text-body-md-short"],[1,"flex","items-center","gap-2","flex-wrap"],["class","flex items-center gap-x-2",4,"ngFor","ngForOf"],["class","border border-neutral-gray-1 flex items-center gap-x-2 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"border","border-neutral-gray-1","flex","items-center","gap-x-2","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",3,"click"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel",""],["size","medium",3,"placeholder","formControl","ngModelChange"],["icon","plus","size","small"],["icon","remove","size","small"],[1,"p-4","border-t","border-neutral-gray-2"],[1,"flex","items-center","justify-between","gap-x-2"],["icon","notification","size","small",1,"inline-block"],[3,"checked","disabled","checkedChange"],[1,"text-body-md","pl-6"],[1,"flex","flex-col","gap-y-4","md:hidden"],["icon","plane","size","small"],[1,"border","border-dashed","border-neutral-gray-3","rounded-lg","p-3","flex","flex-col","gap-y-4"],["icon","clipboard_list","size","small"],[1,"border","border-dashed","border-neutral-gray-2","rounded-lg","p-3","flex","flex-col","gap-y-2"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","text-express-md","text-neutral-gray-6"],["class","p-3 flex gap-x-3",4,"ngIf"],["icon","users","size","small"],["icon","circle_information","size","small"],[1,"flex","flex-col","gap-y-2","text-body-md-short"],[1,"flex","gap-x-3"],["icon","price_up","size","small"],[1,"text-express-md"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"hidden","md:flex","flex-col","gap-y-4"],[1,"flex","justify-between","gap-x-3","md:hidden"],[1,"flex","items-center","mr-4"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"p-3","flex","gap-x-3"],["class","w-full h-[1px] bg-neutral-gray-1",4,"ngIf"],[1,"flex","gap-x-2","justify-start"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-start","justify-between","gap-x-2"],["icon","coupon","size","small",1,"inline-block"],["class","text-body-md pl-6 text-neutral-gray-4",4,"ngIf"],["class","inline-flex gap-x-1 items-center whitespace-nowrap text-express-md text-neutral-white px-2 py-1 rounded bg-black bg-opacity-30",4,"ngIf"],[1,"text-body-md","pl-6","text-neutral-gray-4"],[1,"inline-flex","gap-x-1","items-center","whitespace-nowrap","text-express-md","text-neutral-white","px-2","py-1","rounded","bg-black","bg-opacity-30"],[1,"line-through"],["icon","circle_help","size","small",1,"text-neutral-white"],[1,"flex","flex-col","gap-y-3"],[1,"flex","justify-between","gap-x-3"],[1,"flex-1","flex","flex-col","items-start"],[1,"flex","justify-end","gap-x-3"],[1,"w-[66px]","h-[1px]","bg-neutral-gray-3"],[1,"flex","justify-end","gap-x-4","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","md:hidden",3,"click"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full","hidden","md:flex",3,"click"],["icon","chevron_left","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1",1,"justify-center","md:w-full",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],["cf-button","","size","medium","type","secondary",1,"justify-center","md:w-full",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],["class","px-2.5 py-1 rounded bg-black bg-opacity-30 flex items-center gap-x-2 cursor-default",4,"ngIf"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Ve,69,29,"div",5),e.YNc(7,Ft,99,18,"div",5),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,Ut,11,1,"div",7),e.YNc(10,wt,8,1,"div",7),e.qZA()(),e.YNc(11,Nt,2,2,"ng-template",null,8,e.W1O),e.YNc(13,Mt,1,0,"cf-spinner",9)),2&t&&(e.xp6(3),e.Oqu(i.title),e.xp6(3),e.Q6J("ngIf","EDIT"===i.step),e.xp6(1),e.Q6J("ngIf","CRAWL"===i.step),e.xp6(2),e.Q6J("ngIf","EDIT"===i.step),e.xp6(1),e.Q6J("ngIf","CRAWL"===i.step),e.xp6(3),e.Q6J("ngIf",i.isLoading))},dependencies:[T.ez,T.sg,T.O5,T.JJ,T.uU,C.u5,C.Fj,C.JJ,C.UX,C.oH,d.AxE,d.Sm8,q.N8,q.Xq,Pe.I,Y.j$,Y.ND,Y.BN,Y.lt,De.b,W.Cs,ce.f,Se.m,Ce.q,D.OR,U.DW,ee.Rq,ee.Ry,W._o,te._],encapsulation:2}),n})();var N=p(40899),fe=p(82761);function Rt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",87),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onCancelPnrOrder())}),e._uU(1," H\u1ee7y canh "),e._UZ(2,"cf-icon",88),e.qZA()}}function Yt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.detectedPnr,r.pnrOrderDetailData.airline))}),e._uU(1," M\u1edf PNR m\u1edbi "),e._UZ(2,"cf-icon",90),e.qZA()}}function Jt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",91,92),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onEditPnrOrder())}),e._uU(2," Ch\u1ec9nh s\u1eeda "),e._UZ(3,"cf-icon",93),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",!t.pnrOrderDetailData.canUpdate)("manualHandle",t.pnrOrderDetailData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function Bt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onCreateNewRegistration())}),e._UZ(1,"cf-icon",94),e._uU(2," T\u1ea1o l\u1ea1i y\xeau c\u1ea7u "),e.qZA()}}function Qt(n,a){1&n&&(e.TgZ(0,"div",95),e._UZ(1,"cf-icon",96),e.TgZ(2,"div")(3,"span",39),e._uU(4,"\u0110\xe3 c\u1eadp nh\u1eadt y\xeau c\u1ea7u canh v\xe9. "),e.qZA(),e.TgZ(5,"span",97),e._uU(6,"Ch\xfang t\xf4i s\u1ebd canh v\xe9 theo y\xeau c\u1ea7u m\u1edbi c\u1ee7a b\u1ea1n."),e.qZA()()())}function Lt(n,a){1&n&&(e.TgZ(0,"div",98),e.O4$(),e.TgZ(1,"svg",99),e._UZ(2,"circle",100)(3,"path",101),e.qZA(),e.kcU(),e.TgZ(4,"div")(5,"span",39),e._uU(6,"C\u1eadp nh\u1eadt y\xeau c\u1ea7u canh v\xe9 th\u1ea5t b\u1ea1i. "),e.qZA(),e.TgZ(7,"span",97),e._uU(8,"C\xf3 l\u1ed7i khi c\u1eadp nh\u1eadt y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng th\u1eed l\u1ea1i!"),e.qZA()()())}function jt(n,a){if(1&n&&(e.TgZ(0,"div",102),e._UZ(1,"cf-icon",103),e._uU(2),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.trackingData?null:t.trackingData.percent,"% ")}}function Ht(n,a){if(1&n&&(e.TgZ(0,"div",104),e._UZ(1,"cf-icon",105),e._uU(2),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.trackingData?null:t.trackingData.percent,"% ")}}function Kt(n,a){if(1&n&&(e.TgZ(0,"div",106),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("gi\u1ea3m ",e.lcZ(2,1,null==t.trackingData?null:t.trackingData.gapPrice)," \u0111")}}function zt(n,a){if(1&n&&(e.TgZ(0,"div",107),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" t\u0103ng ",e.lcZ(2,1,null==t.trackingData?null:t.trackingData.gapPrice)," \u0111")}}function $t(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pnrOrderDetailData.fareInfo.detectedFare)," \u0111 ")}}function Gt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function Vt(n,a){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,$t,3,3,"span",20),e.YNc(2,Gt,2,0,"span",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedFare),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.detectedFare)}}function Xt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pnrOrderDetailData.fareInfo.higherFare)," \u0111 ")}}function Wt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function en(n,a){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,Xt,3,3,"span",20),e.YNc(2,Wt,2,0,"span",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.higherFare),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.higherFare)}}function tn(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function nn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.pnrOrderDetailData.fareInfo.detectedFareClass)}}function rn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"\u0110ang c\u1eadp nh\u1eadt"),e.qZA())}function an(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.detectedPnr,r.pnrOrderDetailData.airline))}),e._uU(1," M\u1edf PNR m\u1edbi "),e._UZ(2,"cf-icon",48),e.qZA()}}function on(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.originalFareClass," ")}}function ln(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.detectedFareClass," ")}}function cn(n,a){if(1&n&&(e.TgZ(0,"div",108)(1,"div",109)(2,"div",110),e._uU(3),e.qZA()(),e.TgZ(4,"div",111),e._UZ(5,"img",112),e.qZA(),e.TgZ(6,"div",113)(7,"div",114),e._uU(8),e.qZA(),e.TgZ(9,"div",43),e._uU(10),e.qZA()(),e.TgZ(11,"div",113)(12,"div",114),e._uU(13),e.qZA(),e.TgZ(14,"div",43),e.YNc(15,on,2,1,"span",20),e.YNc(16,ln,2,1,"span",20),e.qZA()(),e.TgZ(17,"div",113)(18,"div",114),e._uU(19),e.qZA(),e.TgZ(20,"div",43),e._uU(21),e.qZA()(),e.TgZ(22,"div",115)(23,"div",116)(24,"div"),e._uU(25),e.qZA(),e.TgZ(26,"div",52),e._UZ(27,"div",117)(28,"div",118),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA()(),e.TgZ(31,"div"),e._UZ(32,"cf-icon",119),e.qZA()(),e.TgZ(33,"div",113)(34,"div",114),e._uU(35),e.qZA(),e.TgZ(36,"div",43),e._uU(37),e.qZA()()()),2&n){const t=a.$implicit,i=a.index,r=e.oxw(2);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("src",r.pnrOrderDetailData.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.segments[0].flightNumber),e.xp6(2),e.Oqu(r.pnrOrderDetailData.airlineName),e.xp6(3),e.Oqu(t.departDate),e.xp6(2),e.Q6J("ngIf",r.status!==r.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",r.status===r.STATUS_ORDER.COMPLETED),e.xp6(3),e.Oqu(t.departTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(5),e.Oqu(r.pnrOrderDetailData.flightType),e.xp6(5),e.Oqu(t.arrivalTime),e.xp6(2),e.Oqu(t.endPoint)}}function sn(n,a){1&n&&e._UZ(0,"div",120)}function dn(n,a){if(1&n&&(e.TgZ(0,"div",124),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" (",t.child.namePrefix,") ",t.child.displayName," - ",t.child.birthDay," ")}}function un(n,a){if(1&n&&(e.TgZ(0,"div",121)(1,"div",39),e._uU(2),e.qZA(),e.TgZ(3,"div",122)(4,"div",39),e._uU(5),e.qZA(),e.YNc(6,dn,2,3,"div",123),e.qZA()()),2&n){const t=a.$implicit,i=a.index;e.xp6(2),e.hij("",i+1,"."),e.xp6(3),e.AsE("(",t.namePrefix,") ",t.displayName,""),e.xp6(1),e.Q6J("ngIf",t.child)}}function pn(n,a){if(1&n&&(e.TgZ(0,"div",125),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("H\u1ebft h\u1ea1n sau ",t.timeExpiredStr,"")}}function _n(n,a){if(1&n&&(e.TgZ(0,"div",78)(1,"div",79),e._uU(2,"K\u1ebft th\xfac canh:"),e.qZA(),e.TgZ(3,"div",83),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij("",t.pnrOrderDetailData.orderInfo.timeFinished," ")}}function fn(n,a){if(1&n&&(e.TgZ(0,"div",137),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function gn(n,a){if(1&n&&(e.TgZ(0,"div",129)(1,"div",134),e._uU(2),e.qZA(),e.TgZ(3,"div",135),e.YNc(4,fn,2,1,"div",136),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngForOf",t.fareClass)}}function mn(n,a){if(1&n&&(e.TgZ(0,"div",128)(1,"div",129),e._UZ(2,"img",130),e.TgZ(3,"div",131),e._uU(4),e.TgZ(5,"span",132),e._uU(6),e.qZA()()(),e.YNc(7,gn,5,2,"div",133),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij("",t.airlineName," "),e.xp6(2),e.hij("(",t.airline,")"),e.xp6(1),e.Q6J("ngForOf",t.fareType)}}function hn(n,a){if(1&n&&(e.TgZ(0,"div",126),e.YNc(1,mn,8,4,"div",127),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.monitors)}}function xn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function vn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("",e.lcZ(2,1,t.pnrOrderDetailData.orderInfo.targetPrice)," \u0111")}}function Tn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function En(n,a){1&n&&(e.TgZ(0,"div",138)(1,"div",79),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",83),e._uU(4,"Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}const $=function(){return["CREATE","IN_PROCESS","IN_PROCESS_PRICE_UP"]},ye=function(){return["COMPLETED"]},be=function(){return["EXPIRED","CANCEL"]},ie=function(n){return{"!text-neutral-gray-4 line-through":n}},re=function(n){return{"!text-neutral-gray-6":n}};function On(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.gotoManage())}),e._UZ(3,"cf-icon",27),e._uU(4," Quay l\u1ea1i "),e.qZA(),e.TgZ(5,"div",28),e.YNc(6,Rt,3,0,"button",29),e.YNc(7,Yt,3,0,"button",30),e.YNc(8,Jt,4,4,"button",31),e.YNc(9,Bt,3,0,"button",30),e.qZA()(),e.TgZ(10,"div",32),e.YNc(11,Qt,7,0,"div",33),e.YNc(12,Lt,9,0,"div",34),e.TgZ(13,"div")(14,"div",35),e._UZ(15,"tooltip-available-slot",36),e.TgZ(16,"div",37),e._UZ(17,"cf-icon",38),e.TgZ(18,"div",39),e._uU(19),e.qZA()()(),e.TgZ(20,"div",40)(21,"div",41)(22,"div",42)(23,"div",43),e._uU(24,"T\u1ed5ng chi ph\xed c\u0169"),e.qZA(),e.TgZ(25,"div",44)(26,"div",45),e._uU(27),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"div",46),e._uU(30),e.qZA()(),e.TgZ(31,"button",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.originalPnr,r.pnrOrderDetailData.airline))}),e._uU(32," M\u1edf PNR c\u0169 "),e._UZ(33,"cf-icon",48),e.qZA()(),e.TgZ(34,"div",49),e.YNc(35,jt,3,1,"div",50),e.YNc(36,Ht,3,1,"div",51),e.TgZ(37,"div",52),e._UZ(38,"div",53)(39,"div",54)(40,"div",55),e.qZA(),e.YNc(41,Kt,3,3,"div",56),e.YNc(42,zt,3,3,"div",57),e.qZA(),e.TgZ(43,"div",58)(44,"div",43),e._uU(45,"T\u1ed5ng chi ph\xed m\u1edbi"),e.qZA(),e.TgZ(46,"div",59)(47,"div",60)(48,"span",61),e.YNc(49,Vt,3,2,"p",62),e.YNc(50,en,3,2,"p",62),e.YNc(51,tn,2,0,"p",63),e.qZA()(),e.TgZ(52,"div",64),e.YNc(53,nn,2,1,"span",20),e.YNc(54,rn,2,0,"span",20),e.qZA()(),e.YNc(55,an,3,0,"button",65),e.qZA()(),e.TgZ(56,"div",66),e._UZ(57,"cf-icon",67),e._uU(58),e.qZA()()(),e.TgZ(59,"div",32)(60,"div",68),e._UZ(61,"cf-icon",69),e.TgZ(62,"span",70),e._uU(63,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(64,"div",71),e.YNc(65,cn,38,13,"div",72),e.qZA()(),e.TgZ(66,"div",32)(67,"div",68),e._UZ(68,"cf-icon",73),e.TgZ(69,"span",70),e._uU(70,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(71,"div",74),e.YNc(72,sn,1,0,"div",75),e.YNc(73,un,7,4,"div",76),e.qZA()(),e.TgZ(74,"div",32)(75,"div",68),e._UZ(76,"cf-icon",77),e.TgZ(77,"span",70),e._uU(78,"C\u1ea5u h\xecnh canh v\xe9"),e.qZA()(),e.TgZ(79,"div",74)(80,"div",78)(81,"div",79),e._uU(82,"H\u1ea1n canh v\xe9:"),e.qZA(),e.TgZ(83,"div",80)(84,"div"),e._uU(85),e.qZA(),e.YNc(86,pn,2,1,"div",81),e.qZA()(),e.YNc(87,_n,5,1,"div",82),e.TgZ(88,"div",78)(89,"div",79),e._uU(90,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n: "),e.qZA(),e.TgZ(91,"div",83),e.YNc(92,hn,2,1,"div",84),e.YNc(93,xn,2,0,"span",20),e.qZA()(),e.TgZ(94,"div",78)(95,"div",79),e._uU(96,"M\u1ee9c gi\xe1 k\xec v\u1ecdng: "),e.qZA(),e.TgZ(97,"div",83),e.YNc(98,vn,3,3,"span",20),e.YNc(99,Tn,2,0,"span",20),e.qZA()(),e.YNc(100,En,5,0,"div",85),e.qZA()(),e.TgZ(101,"div",32)(102,"div",68),e._UZ(103,"cf-icon",77),e.TgZ(104,"span",70),e._uU(105,"Th\xf4ng tin chi ti\u1ebft"),e.qZA()(),e.TgZ(106,"div",74)(107,"div",78)(108,"div",79),e._uU(109,"M\xe3 y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(110,"div",83),e._uU(111),e.qZA()(),e.TgZ(112,"div",78)(113,"div",79),e._uU(114,"Ng\xe0y y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(115,"div",83),e._uU(116),e.qZA()(),e.TgZ(117,"div",78)(118,"div",79),e._uU(119,"Ph\xed y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(120,"div",86),e._UZ(121,"tooltip-available-slot",36),e.qZA()(),e.TgZ(122,"div",78)(123,"div",79),e._uU(124,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n: "),e.qZA(),e.TgZ(125,"div",83),e._uU(126),e.qZA()(),e.TgZ(127,"div",78)(128,"div",79),e._uU(129,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(130,"div",83),e._uU(131),e.qZA()()()()()()}if(2&n){const t=e.oxw(),i=e.MAs(42),r=e.MAs(44);e.xp6(6),e.Q6J("ngIf",e.DdM(62,$).includes(t.status)&&t.canMonitorLowFareTicket),e.xp6(1),e.Q6J("ngIf",e.DdM(63,ye).includes(t.status)),e.xp6(1),e.Q6J("ngIf",e.DdM(64,$).includes(t.status)&&t.canMonitorLowFareTicket),e.xp6(1),e.Q6J("ngIf",e.DdM(65,be).includes(t.status)&&t.canMonitorLowFareTicket),e.xp6(2),e.Q6J("ngIf",t.isUpdated),e.xp6(1),e.Q6J("ngIf",t.isUpdatedFail),e.xp6(2),e.Tol(t.CARD_STATUS[t.status].backgroundColor),e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",i),e.xp6(1),e.Tol(t.CARD_STATUS[t.status].textColor),e.xp6(1),e.Q6J("icon",t.CARD_STATUS[t.status].icon),e.xp6(2),e.Oqu(t.CARD_STATUS[t.status].description),e.xp6(7),e.Q6J("ngClass",e.VKq(66,ie,t.status===t.STATUS_ORDER.COMPLETED)),e.xp6(1),e.hij(" ",e.lcZ(28,60,t.pnrOrderDetailData.fareInfo.originalFare)," \u0111 "),e.xp6(2),e.Q6J("ngClass",e.VKq(68,ie,t.status===t.STATUS_ORDER.COMPLETED)),e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.originalFareClass," "),e.xp6(5),e.Q6J("ngIf",t.status===t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(2),e.ekj("!bg-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!bg-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.ekj("!border-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!border-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.ekj("!border-l-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!border-l-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(5),e.Q6J("ngClass",e.VKq(70,re,t.status===t.STATUS_ORDER.COMPLETED||t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP)),e.xp6(1),e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase",t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngSwitchCase",t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(2),e.Q6J("ngClass",e.VKq(72,re,t.status===t.STATUS_ORDER.COMPLETED||t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP)),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedFareClass),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.detectedFareClass),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedPnr),e.xp6(3),e.hij(" C\u1eadp nh\u1eadt g\u1ea7n nh\u1ea5t l\xfac ",t.pnrOrderDetailData.orderInfo.timeUpdated," "),e.xp6(7),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys),e.xp6(7),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.passengers),e.xp6(12),e.Oqu(t.pnrOrderDetailData.orderInfo.timeExpired),e.xp6(1),e.Q6J("ngIf",t.showTimeExpiredStr),e.xp6(1),e.Q6J("ngIf",!e.DdM(74,$).includes(t.status)),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.orderInfo.notifyBeforeExpire),e.xp6(11),e.Oqu(t.pnrOrderDetailData.code),e.xp6(5),e.hij("",t.pnrOrderDetailData.orderInfo.timeCreated," "),e.xp6(5),e.Q6J("availableSlotData",t.availableSlotData)("content",r),e.xp6(5),e.Oqu(t.pnrOrderDetailData.userActionInfo.name),e.xp6(5),e.Oqu(t.pnrOrderDetailData.ownerInfo.name)}}function Dn(n,a){1&n&&(e.TgZ(0,"div",139),e._UZ(1,"ticket-item-skeleton",140)(2,"ticket-item-skeleton",140)(3,"ticket-item-skeleton",140)(4,"ticket-item-skeleton",140)(5,"ticket-item-skeleton",140),e.qZA())}function Cn(n,a){if(1&n&&(e.TgZ(0,"div",102),e._UZ(1,"cf-icon",103),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",null==t.trackingData?null:t.trackingData.percent,"% ")}}function Zn(n,a){if(1&n&&(e.TgZ(0,"div",104),e._UZ(1,"cf-icon",105),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",null==t.trackingData?null:t.trackingData.percent,"% ")}}function yn(n,a){if(1&n&&(e.TgZ(0,"div",106),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("gi\u1ea3m ",e.lcZ(2,1,null==t.trackingData?null:t.trackingData.gapPrice)," \u0111")}}function bn(n,a){if(1&n&&(e.TgZ(0,"div",107),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" t\u0103ng ",e.lcZ(2,1,null==t.trackingData?null:t.trackingData.gapPrice)," \u0111")}}function An(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pnrOrderDetailData.fareInfo.detectedFare)," \u0111 ")}}function In(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function Pn(n,a){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,An,3,3,"span",20),e.YNc(2,In,2,0,"span",20),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedFare),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.detectedFare)}}function Sn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pnrOrderDetailData.fareInfo.higherFare)," \u0111 ")}}function Fn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function Un(n,a){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,Sn,3,3,"span",20),e.YNc(2,Fn,2,0,"span",20),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.higherFare),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.higherFare)}}function wn(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1," \u0110ang c\u1eadp nh\u1eadt "),e.qZA())}function kn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.pnrOrderDetailData.fareInfo.detectedFareClass)}}function qn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"\u0110ang c\u1eadp nh\u1eadt"),e.qZA())}function Nn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",151),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.detectedPnr,r.pnrOrderDetailData.airline))}),e._uU(1," M\u1edf PNR m\u1edbi "),e.qZA()}}function Mn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.originalFareClass," ")}}function Rn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.detectedFareClass," ")}}function Yn(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",164)(2,"div",52)(3,"div",110),e._uU(4),e.qZA()(),e.TgZ(5,"div",111),e._UZ(6,"img",112),e.qZA(),e.TgZ(7,"div",165)(8,"div",114),e._uU(9),e.qZA(),e.TgZ(10,"div",43),e._uU(11),e.qZA()(),e.TgZ(12,"div",113)(13,"div",114),e._uU(14),e.qZA(),e.TgZ(15,"div",43),e.YNc(16,Mn,2,1,"span",20),e.YNc(17,Rn,2,1,"span",20),e.qZA()()(),e.TgZ(18,"div",166)(19,"div",113)(20,"div",114),e._uU(21),e.qZA(),e.TgZ(22,"div",43),e._uU(23),e.qZA()(),e.TgZ(24,"div",115)(25,"div",116)(26,"div"),e._uU(27),e.qZA(),e.TgZ(28,"div",52),e._UZ(29,"div",117)(30,"div",118),e.qZA(),e.TgZ(31,"div"),e._uU(32),e.qZA()(),e.TgZ(33,"div"),e._UZ(34,"cf-icon",119),e.qZA()(),e.TgZ(35,"div",113)(36,"div",114),e._uU(37),e.qZA(),e.TgZ(38,"div",43),e._uU(39),e.qZA()()()()),2&n){const t=a.$implicit,i=a.index,r=e.oxw(3);e.xp6(4),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("src",r.pnrOrderDetailData.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.segments[0].flightNumber),e.xp6(2),e.Oqu(r.pnrOrderDetailData.airlineName),e.xp6(3),e.Oqu(t.departDate),e.xp6(2),e.Q6J("ngIf",r.status!==r.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",r.status===r.STATUS_ORDER.COMPLETED),e.xp6(4),e.Oqu(t.departTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(4),e.Oqu(t.durationStr),e.xp6(5),e.Oqu(r.pnrOrderDetailData.flightType),e.xp6(5),e.Oqu(t.arrivalTime),e.xp6(2),e.Oqu(t.endPoint)}}function Jn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",144)(1,"div")(2,"div",145)(3,"div",37),e._UZ(4,"cf-icon",38),e.TgZ(5,"div",39),e._uU(6),e.qZA()()(),e.TgZ(7,"div",146)(8,"div",147)(9,"div",42)(10,"div",148),e._uU(11,"T\u1ed5ng chi ph\xed c\u0169"),e.qZA(),e.TgZ(12,"div",44)(13,"div",149),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"div",150),e._uU(17),e.qZA()(),e.TgZ(18,"button",151),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.originalPnr,r.pnrOrderDetailData.airline))}),e._uU(19," M\u1edf PNR c\u0169 "),e.qZA()(),e.TgZ(20,"div",152),e.YNc(21,Cn,3,1,"div",50),e.YNc(22,Zn,3,1,"div",51),e.TgZ(23,"div",153),e._UZ(24,"div",154)(25,"div",155)(26,"div",156),e.qZA(),e.YNc(27,yn,3,3,"div",56),e.YNc(28,bn,3,3,"div",57),e.qZA(),e.TgZ(29,"div",58)(30,"div",148),e._uU(31,"T\u1ed5ng chi ph\xed m\u1edbi"),e.qZA(),e.TgZ(32,"div",59)(33,"div",157)(34,"span",61),e.YNc(35,Pn,3,2,"p",62),e.YNc(36,Un,3,2,"p",62),e.YNc(37,wn,2,0,"p",63),e.qZA()(),e.TgZ(38,"div",158),e.YNc(39,kn,2,1,"span",20),e.YNc(40,qn,2,0,"span",20),e.qZA()(),e.YNc(41,Nn,2,0,"button",159),e.qZA()(),e.TgZ(42,"div",160)(43,"div",66),e._UZ(44,"cf-icon",67),e._uU(45),e.qZA(),e._UZ(46,"tooltip-available-slot",36),e.qZA()()(),e.TgZ(47,"div",32)(48,"div",161),e._UZ(49,"cf-icon",69),e.TgZ(50,"span",70),e._uU(51,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(52,"div",162),e.YNc(53,Yn,40,13,"div",163),e.qZA()()()}if(2&n){const t=e.oxw(2),i=e.MAs(42);e.xp6(2),e.Tol(t.CARD_STATUS[t.status].backgroundColor),e.xp6(1),e.Tol(t.CARD_STATUS[t.status].textColor),e.xp6(1),e.Q6J("icon",t.CARD_STATUS[t.status].icon),e.xp6(2),e.Oqu(t.CARD_STATUS[t.status].description),e.xp6(7),e.Q6J("ngClass",e.VKq(40,ie,t.status===t.STATUS_ORDER.COMPLETED)),e.xp6(1),e.hij(" ",e.lcZ(15,38,t.pnrOrderDetailData.fareInfo.originalFare)," \u0111 "),e.xp6(2),e.Q6J("ngClass",e.VKq(42,ie,t.status===t.STATUS_ORDER.COMPLETED)),e.xp6(1),e.hij(" ",t.pnrOrderDetailData.fareInfo.originalFareClass," "),e.xp6(4),e.Q6J("ngIf",t.status===t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(2),e.ekj("!bg-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!bg-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.ekj("!border-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!border-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.ekj("!border-l-functional-2-3",t.status===t.STATUS_ORDER.COMPLETED)("!border-l-functional-3-3",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngIf",t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(5),e.Q6J("ngClass",e.VKq(44,re,t.status===t.STATUS_ORDER.COMPLETED||t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP)),e.xp6(1),e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase",t.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngSwitchCase",t.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(2),e.Q6J("ngClass",e.VKq(46,re,t.status===t.STATUS_ORDER.COMPLETED||t.status===t.STATUS_ORDER.IN_PROCESS_PRICE_UP)),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedFareClass),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderDetailData.fareInfo.detectedFareClass),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.fareInfo.detectedPnr),e.xp6(4),e.hij(" C\u1eadp nh\u1eadt g\u1ea7n nh\u1ea5t l\xfac ",t.pnrOrderDetailData.orderInfo.timeUpdated," "),e.xp6(1),e.Q6J("availableSlotData",t.availableSlotData)("content",i),e.xp6(7),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys)}}function Bn(n,a){if(1&n&&(e.TgZ(0,"div",124),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" (",t.child.namePrefix,") ",t.child.displayName," - ",t.child.birthDay," ")}}function Qn(n,a){if(1&n&&(e.TgZ(0,"div",121)(1,"div",39),e._uU(2),e.qZA(),e.TgZ(3,"div",122)(4,"div",39),e._uU(5),e.qZA(),e.YNc(6,Bn,2,3,"div",123),e.qZA()()),2&n){const t=a.$implicit,i=a.index;e.xp6(2),e.hij("",i+1,"."),e.xp6(3),e.AsE("(",t.namePrefix,") ",t.displayName,""),e.xp6(1),e.Q6J("ngIf",t.child)}}function Ln(n,a){if(1&n&&(e.TgZ(0,"div",167)(1,"div",168),e._UZ(2,"cf-icon",73),e.TgZ(3,"span"),e._uU(4,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(5,"div",169),e.YNc(6,Qn,7,4,"div",76),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",t.pnrOrderDetailData.passengers)}}function jn(n,a){if(1&n&&(e.TgZ(0,"div",177),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("H\u1ebft h\u1ea1n sau ",t.timeExpiredStr,"")}}function Hn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.pnrOrderDetailData.orderInfo.monitorFareClass[0].specifyFareClass)}}function Kn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function zn(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("",e.lcZ(2,1,t.pnrOrderDetailData.orderInfo.targetPrice)," \u0111")}}function $n(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Gn(n,a){1&n&&(e.TgZ(0,"div",175)(1,"div",173),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n:"),e.qZA(),e.TgZ(3,"div",131),e._uU(4," Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n canh v\xe9 "),e.qZA()())}function Vn(n,a){if(1&n&&(e.TgZ(0,"div",167)(1,"div",168),e._UZ(2,"cf-icon",170),e.TgZ(3,"span"),e._uU(4,"C\u1ea5u h\xecnh canh v\xe9"),e.qZA()(),e.TgZ(5,"div",171)(6,"div",172)(7,"div",173),e._uU(8,"H\u1ea1n canh v\xe9:"),e.qZA(),e.TgZ(9,"div",25)(10,"div",131),e._uU(11),e.qZA(),e.YNc(12,jn,2,1,"div",174),e.qZA()(),e.TgZ(13,"div",175)(14,"div",173),e._uU(15,"K\u1ebft th\xfac canh:"),e.qZA(),e.TgZ(16,"div",25)(17,"div",131),e._uU(18),e.qZA()()(),e.TgZ(19,"div",175)(20,"div",173),e._uU(21,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n:"),e.qZA(),e.TgZ(22,"div",83),e.YNc(23,Hn,2,1,"span",20),e.YNc(24,Kn,2,0,"span",20),e.qZA()(),e.TgZ(25,"div",175)(26,"div",173),e._uU(27,"M\u1ee9c gi\xe1 k\xec v\u1ecdng:"),e.qZA(),e.TgZ(28,"div",83),e.YNc(29,zn,3,3,"span",20),e.YNc(30,$n,2,0,"span",20),e.qZA()(),e.YNc(31,Gn,5,0,"div",176),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(11),e.Oqu(t.pnrOrderDetailData.orderInfo.timeExpired),e.xp6(1),e.Q6J("ngIf",t.showTimeExpiredStr),e.xp6(6),e.Oqu(t.pnrOrderDetailData.orderInfo.timeFinished),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.orderInfo.notifyBeforeExpire)}}function Xn(n,a){if(1&n&&(e.TgZ(0,"div",167)(1,"div",168),e._UZ(2,"cf-icon",178),e.TgZ(3,"span"),e._uU(4,"Th\xf4ng tin chi ti\u1ebft"),e.qZA()(),e.TgZ(5,"div",179)(6,"div",172)(7,"div",173),e._uU(8,"M\xe3 y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(9,"div",131),e._uU(10),e.qZA()(),e.TgZ(11,"div",175)(12,"div",173),e._uU(13,"Ng\xe0y y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(14,"div",131),e._uU(15),e.qZA()(),e.TgZ(16,"div",175)(17,"div",173),e._uU(18,"Ph\xed y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(19,"div",86),e._UZ(20,"tooltip-available-slot",36),e.qZA()(),e.TgZ(21,"div",175)(22,"div",173),e._uU(23,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n:"),e.qZA(),e.TgZ(24,"div",131),e._uU(25),e.qZA()(),e.TgZ(26,"div",175)(27,"div",173),e._uU(28,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(29,"div",131),e._uU(30),e.qZA()()()()),2&n){const t=e.oxw(2),i=e.MAs(44);e.xp6(10),e.hij(" ",t.pnrOrderDetailData.code," "),e.xp6(5),e.hij(" ",t.pnrOrderDetailData.orderInfo.timeCreated," "),e.xp6(5),e.Q6J("availableSlotData",t.availableSlotData)("content",i),e.xp6(5),e.hij(" ",t.pnrOrderDetailData.userActionInfo.name," "),e.xp6(5),e.hij(" ",t.pnrOrderDetailData.ownerInfo.name," ")}}function Wn(n,a){if(1&n&&(e.TgZ(0,"div",141),e.YNc(1,Jn,54,48,"div",142),e.YNc(2,Ln,7,1,"div",143),e.YNc(3,Vn,32,8,"div",143),e.YNc(4,Xn,31,6,"div",143),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","TICKET_INFO"===t.mobileTab),e.xp6(1),e.Q6J("ngIf","PAX_INFO"===t.mobileTab),e.xp6(1),e.Q6J("ngIf","ORDER_CONFIG"===t.mobileTab),e.xp6(1),e.Q6J("ngIf","ORDER_INFO"===t.mobileTab)}}function ei(n,a){1&n&&(e.TgZ(0,"div",180),e._UZ(1,"ticket-item-skeleton",140)(2,"ticket-item-skeleton",140)(3,"ticket-item-skeleton",140),e.qZA())}function ti(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",182),e.NdJ("click",function(r){e.CHM(t);const o=e.oxw(2),l=e.MAs(40);return e.KtG(o.openBottomSheetAction(r,l))}),e._UZ(1,"cf-icon",183),e.qZA()}}function ni(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.gotoBooking(r.pnrOrderDetailData.fareInfo.detectedPnr,r.pnrOrderDetailData.airline))}),e._UZ(1,"cf-icon",184),e._uU(2," M\u1edf \u0111\u1eb7t ch\u1ed7 "),e.qZA()}}function ii(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onCreateNewRegistration())}),e._UZ(1,"cf-icon",185),e._uU(2," T\u1ea1o l\u1ea1i y\xeau c\u1ea7u "),e.qZA()}}const ri=function(){return["EXPIRED","CANCEL","COMPLETED"]};function ai(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ti,2,0,"button",181),e.YNc(2,ni,3,0,"button",30),e.YNc(3,ii,3,0,"button",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!e.DdM(3,ri).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(4,ye).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(5,be).includes(t.pnrOrderDetailData.state))}}const oi=function(n){return{"!text-neutral-gray-4 pointer-events-none":n}},li=function(n){return{"!text-neutral-gray-4":n}};function ci(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",189),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onEditPnrOrder())}),e._UZ(1,"cf-icon",190),e.TgZ(2,"span"),e._uU(3,"Ch\u1ec9nh s\u1eeda"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,oi,!t.pnrOrderDetailData.canUpdate)),e.xp6(1),e.Q6J("ngClass",e.VKq(4,li,!t.pnrOrderDetailData.canUpdate))}}function si(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",191),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onCancelPnrOrder())}),e._UZ(1,"cf-icon",192),e.TgZ(2,"span"),e._uU(3,"H\u1ee7y canh v\xe9"),e.qZA()()}}function di(n,a){if(1&n&&(e.TgZ(0,"div",186),e.YNc(1,ci,4,6,"div",187),e.YNc(2,si,4,0,"div",188),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(2,$).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(3,$).includes(t.pnrOrderDetailData.state))}}function ui(n,a){1&n&&(e.TgZ(0,"div",194)(1,"span",195),e._uU(2,"Thu ph\xed"),e.qZA(),e._UZ(3,"cf-icon",196),e.qZA())}function pi(n,a){1&n&&(e.TgZ(0,"div",194)(1,"span",195),e._uU(2,"Mi\u1ec5n ph\xed"),e.qZA(),e._UZ(3,"cf-icon",196),e.qZA())}function _i(n,a){if(1&n&&(e.YNc(0,ui,4,0,"div",193),e.YNc(1,pi,4,0,"div",193)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.available)}}function fi(n,a){if(1&n&&(e.TgZ(0,"span",200),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,t.availableSlotData.amount),"",t.availableSlotData.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function gi(n,a){if(1&n&&(e.TgZ(0,"span",200),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,t.availableSlotData.amount),"",t.availableSlotData.currency,"/pax")}}function mi(n,a){if(1&n&&(e.TgZ(0,"div",198),e.YNc(1,fi,3,4,"span",199),e.YNc(2,gi,3,4,"span",199),e.TgZ(3,"span"),e._uU(4,"(Mi\u1ec5n ph\xed)"),e.qZA(),e._UZ(5,"cf-icon",196),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.availableSlotData.type===t.TYPE_ORDER.DOWN_FARE_TICKET),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.type===t.TYPE_ORDER.HUNT_NEW_TICKET)}}function hi(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,t.availableSlotData.amount),"",t.availableSlotData.currency," ch\xeanh l\u1ec7ch gi\xe1")}}function xi(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,t.availableSlotData.amount),"",t.availableSlotData.currency,"/pax")}}function vi(n,a){if(1&n&&(e.TgZ(0,"div",198),e.YNc(1,hi,3,4,"span",20),e.YNc(2,xi,3,4,"span",20),e._UZ(3,"cf-icon",196),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.availableSlotData.type===t.TYPE_ORDER.DOWN_FARE_TICKET),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.type===t.TYPE_ORDER.HUNT_NEW_TICKET)}}function Ti(n,a){if(1&n&&(e.YNc(0,mi,6,2,"div",197),e.YNc(1,vi,4,2,"div",197)),2&n){const t=e.oxw();e.Q6J("ngIf",t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",!t.availableSlotData.available)}}function Ei(n,a){1&n&&e._UZ(0,"cf-spinner")}let Oi=(()=>{class n{constructor(t,i,r,o,l,u,c,_,h,f,g,Z){this.ref=i,this._ticketLowFareService=r,this._flightDataService=o,this._modal=l,this.route=u,this._router=c,this._permissionService=_,this._eventLogService=h,this._bottomSheetService=f,this._mobileDetectService=g,this._toastService=Z,this.STATUS_ORDER=E.b,this.CARD_STATUS=Oe.t,this.status=E.b.CANCEL,this.MONITOR_TYPE=v.$,this.isLoading=!1,this.isUpdated=!1,this.isUpdatedFail=!1,this.trackingData={percent:"",gapPrice:0},this.showTimeExpiredStr=!1,this.isSpinning=!1,this.canMonitorLowFareTicket=this._permissionService.hasPermission(N.or.CanMonitorLowFareTicket),this.TYPE_ORDER=I.G,this.mobileTab="TICKET_INFO",t.registerIcons([d.UNF,d.okA,d.TOh,d.B2I,d.$S,d.toh,d.QkI,d.Hge,d.oFb,d.PcQ,d.yNU,d.LdZ,d.fXw,d.rks,d.Xzk,d.BbA,d.SK7]),this.route.params.subscribe(b=>{this.orderId=b.id,this.getPnrOrderDetail()})}getPnrOrderDetail(){this.isLoading=!0,this._ticketLowFareService.getPnrOrderDetail(this.orderId).pipe((0,P.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var i,r,o,l,u,c,_,h,f,g,Z,b,w,J,B,Q,L,S,F,y;const G=new Date(t.data.orderInfo.timeExpire),M=new Date,V=Math.floor((G.getTime()-M.getTime())/6e4);V>0&&(this.timeExpiredStr=(0,j.N)(V)),this.showTimeExpiredStr=[E.b.CREATE,E.b.IN_PROCESS,E.b.IN_PROCESS_PRICE_UP].includes(t.data.state)&&V>0;const k=t.data.ticketInfo.passengers.map(s=>({key:s.key+""||"",parentKey:s.parentKey+""||"",firstName:s.firstName||"",lastName:s.lastName||"",displayName:`${s.lastName} ${s.firstName}`||"",birthDay:s.birthday?x(s.birthday).format("DD/MM/YYYY"):"",type:s.type||"",namePrefix:"UNDEFINE"===s.namePrefix?(0,Ie.A)(s.gender):s.namePrefix,gender:s.gender})),m=(null==k?void 0:k.filter(s=>"INF"===s.type.toUpperCase()))||[],A=(null==k?void 0:k.filter(s=>"INF"!==s.type.toUpperCase()))||[];m.forEach(s=>{s.namePrefix="MALE"===s.gender?"B\xc9 TRAI":"B\xc9 G\xc1I";const O=A.find(X=>X.key===s.parentKey);O&&(O.child=s)}),this.status=t.data.state,this.pnrOrderDetailData={orderId:t.data.orderId,code:t.data.code,canUpdate:t.data.canUpdate,state:t.data.state,stateDisplay:t.data.stateDisplay,monitorType:t.data.monitorType,flightType:"OW"===t.data.ticketInfo.flightType?"Bay th\u1eb3ng":"Kh\u1ee9 h\u1ed3i",airline:t.data.ticketInfo.airline,airlineName:this._flightDataService.getAirlineNameByCode(t.data.ticketInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(t.data.ticketInfo.airline),journeys:t.data.ticketInfo.journeys.map(s=>({leg:s.leg,startPoint:s.startPoint,endPoint:s.endPoint,duration:s.duration,durationStr:(0,j.N)(s.duration),departDay:s.departTime?x(s.departTime).locale("vi").format("dddd "):"",departDate:s.departTime?x(s.departTime).format("DD/MM/YYYY"):"",departTime:s.departTime?x(s.departTime).format("HH:mm"):"",arrivalDay:s.arrivalTime?x(s.arrivalTime).locale("vi").format("dddd"):"",arrivalDate:s.arrivalTime?x(s.arrivalTime).format("DD/MM/YYYY"):"",arrivalTime:s.arrivalTime?x(s.arrivalTime).format("HH:mm"):"",segments:s.segments.map(O=>({startPoint:O.startPoint,endPoint:O.endPoint,flightNumber:`${t.data.ticketInfo.airline}${O.flightNumber}`,departTime:O.departTime,departZone:O.departZone,arriveTime:O.arriveTime,arriveZone:O.arriveZone,index:O.index}))})),passengers:A,orderInfo:{timeCreated:t.data.orderInfo.timeCreate?x(t.data.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpired:t.data.orderInfo.timeExpire?x(t.data.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdated:t.data.orderInfo.timeUpdate?x(t.data.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",timeFinished:t.data.orderInfo.timeFinished?x(t.data.orderInfo.timeFinished).format("DD/MM/YYYY HH:mm"):"",monitorFareClass:t.data.monitorType===v.$.FARE?null===(i=t.data.orderInfo.fareMonitors)||void 0===i?void 0:i.map(s=>{var O;return{expectLowerFareClass:s.expectLowerFareClass,specifyFareClass:(null===(O=s.specifyFareClass)||void 0===O?void 0:O.join(", "))||"",currentFareClass:s.currentFareClass||""}}):[],targetPrice:t.data.monitorType===v.$.PRICE&&t.data.orderInfo.priceMonitors[0].targetPrice||0,notifyBeforeExpire:t.data.orderInfo.notifyBeforeExpired},fareInfo:{originalPnr:(null===(r=t.data.fareInfo)||void 0===r?void 0:r.originalPnr)||"",detectedPnr:(null===(o=t.data.fareInfo)||void 0===o?void 0:o.detectedPnr)||"",originalFare:(null===(l=t.data.fareInfo)||void 0===l?void 0:l.originalFare)||0,detectedFare:(null===(u=t.data.fareInfo)||void 0===u?void 0:u.detectedFare)||0,originalFareClass:(null===(c=t.data.fareInfo)||void 0===c?void 0:c.originalFareClass)||"",detectedFareClass:(null===(_=t.data.fareInfo)||void 0===_?void 0:_.detectedFareClass)||"",higherFare:t.data.fareInfo.higherFare||0},monitors:(null===(h=t.data.orderInfo.fareMonitors)||void 0===h?void 0:h.map(s=>{var O,X,ge,me,he;return{airline:(null===(O=s.specifyFareClassInfo)||void 0===O?void 0:O.airline)||"",airlineName:this._flightDataService.getAirlineNameByCode(null===(X=s.specifyFareClassInfo)||void 0===X?void 0:X.airline)||"",airlineLogo:this._flightDataService.getAirlineLogoByCode(null===(ge=s.specifyFareClassInfo)||void 0===ge?void 0:ge.airline)||"",fareType:(null===(he=null===(me=s.specifyFareClassInfo)||void 0===me?void 0:me.cabin)||void 0===he?void 0:he.flatMap(H=>H.fareType).map(H=>({order:H.order,code:H.code,name:H.description,fareClass:H.fareClass.map(xe=>({order:xe.order,code:xe.code,name:xe.name}))})))||[]}}))||[],ownerInfo:{id:(null===(f=t.data.ownerInfo)||void 0===f?void 0:f.id)||"",name:(null===(g=t.data.ownerInfo)||void 0===g?void 0:g.name)||""},userActionInfo:{name:(null===(Z=t.data.userActionInfo)||void 0===Z?void 0:Z.name)||""},availableSlotInfo:{amountPerPax:(null===(b=t.data.availableSlotInfo)||void 0===b?void 0:b.amountPerPax)||0,currency:(null===(w=t.data.availableSlotInfo)||void 0===w?void 0:w.currency)||"",free:t.data.availableSlotInfo.free,percent:(null===(J=t.data.availableSlotInfo)||void 0===J?void 0:J.percent)||0,type:t.data.availableSlotInfo.type}},this.availableSlotData={available:t.data.availableSlotInfo.free,type:t.data.availableSlotInfo.type,amount:t.data.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?t.data.availableSlotInfo.percent:t.data.availableSlotInfo.amountPerPax,currency:t.data.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?t.data.availableSlotInfo.currency:"\u0111"},this.registerOrderDetail={airline:(null===(B=this.pnrOrderDetailData)||void 0===B?void 0:B.airline)||"",bookingCode:(null===(Q=this.pnrOrderDetailData.fareInfo)||void 0===Q?void 0:Q.originalPnr)||"",targetPrice:this.pnrOrderDetailData.monitorType===v.$.PRICE&&this.pnrOrderDetailData.orderInfo.targetPrice||0,totalCharge:(null===(L=this.pnrOrderDetailData.fareInfo)||void 0===L?void 0:L.originalFare)||0,monitorType:(null===(S=this.pnrOrderDetailData)||void 0===S?void 0:S.monitorType)||v.$.PRICE,monitors:this.pnrOrderDetailData.monitorType===v.$.FARE&&(null===(F=this.pnrOrderDetailData.orderInfo.monitorFareClass)||void 0===F?void 0:F.map(s=>({specifyFareClass:s.specifyFareClass.split(","),currentFareClass:s.currentFareClass})))||[],passengers:this.pnrOrderDetailData.passengers,journeys:t.data.ticketInfo.journeys.map(s=>({airline:this.pnrOrderDetailData.airline,airlineName:this.pnrOrderDetailData.airlineName,airlineLogo:this.pnrOrderDetailData.airlineLogo,flightNumber:this.pnrOrderDetailData.journeys[0].segments[0].flightNumber,startPoint:s.startPoint,endPoint:s.endPoint,startTime:new Date(s.departTime),endTime:new Date(s.arrivalTime),segments:s.segments.map(O=>({flightNumber:O.flightNumber,fareClass:"",duration:s.duration,shortDuration:(0,j.N)(s.duration)}))})),ownerId:(null===(y=this.pnrOrderDetailData.ownerInfo)||void 0===y?void 0:y.id)||"",availableSlotInfo:this.pnrOrderDetailData.availableSlotInfo},t.data.state===E.b.COMPLETED&&(this.trackingData={gapPrice:this.pnrOrderDetailData.fareInfo.originalFare-this.pnrOrderDetailData.fareInfo.detectedFare||0,percent:this.computePercenIncrease(this.pnrOrderDetailData.fareInfo.originalFare,this.pnrOrderDetailData.fareInfo.detectedFare)}),t.data.state===E.b.IN_PROCESS_PRICE_UP&&(this.trackingData={gapPrice:this.pnrOrderDetailData.fareInfo.higherFare-this.pnrOrderDetailData.fareInfo.originalFare||0,percent:this.computePercenDecrease(this.pnrOrderDetailData.fareInfo.originalFare,this.pnrOrderDetailData.fareInfo.higherFare)})},error:()=>{this._router.navigate(["admin/404"])}})}computePercenIncrease(t,i){return((t-i)/t*100).toFixed(2)}computePercenDecrease(t,i){return((t-i)/i*100).toFixed(2)||"0"}close(){this.ref.close()}gotoBooking(t,i){t&&i&&window.open(`admin/booking-detail/${i}/${t}`)}onEditPnrOrder(){if(this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(z,{containerFullHeigh:!0,headerTitle:"Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u canh v\xe9",leftButtonIcon:"",rightButtonIcon:"close",data:{orderId:this.orderId,sourceEvent:"DETAIL"}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(i=>{this.getPnrOrderDetail(),"OK"===i&&(this.isUpdated=!0,this.isUpdatedFail=!1),"ERROR"===i&&(this.isUpdated=!1,this.isUpdatedFail=!0)})}else this._modal.open(z,{orderId:this.orderId,sourceEvent:"DETAIL"}).afterClosed$.subscribe({next:i=>{this.getPnrOrderDetail(),"OK"===i.data&&(this.isUpdated=!0,this.isUpdatedFail=!1),"ERROR"===i.data&&(this.isUpdated=!1,this.isUpdatedFail=!0)}})}onCancelPnrOrder(){if(this._eventLogService.captureCancelDownFare({source:0}),this._mobileDetectService.isMobile()){const t=this._bottomSheetService.open(D.Q4,{headerTitle:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u canh v\xe9 cho m\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${this.pnrOrderDetailData.fareInfo.originalPnr}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",hasIcon:!0,status:"info"}});t.containerInstance._rightButtonClick.subscribe(()=>{t.dismiss()}),t.afterDismissed().subscribe(i=>{i?(this.bottomSheetAction.dismiss(),this.isSpinning=!0,this._ticketLowFareService.cancelPnrOrder(this.pnrOrderDetailData.orderId).pipe((0,P.x)(()=>this.isSpinning=!1)).subscribe({next:r=>{"OK"===r.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${this.pnrOrderDetailData.code}</strong> th\xe0nh c\xf4ng.`,sticky:!1}),this.getPnrOrderDetail()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${this.pnrOrderDetailData.code}</strong> l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${this.pnrOrderDetailData.code}</strong> l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!0})}})):t.dismiss()})}else this._modal.open(D.V0,{title:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9 n\xe0y?",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u canh v\xe9 cho m\xe3 \u0111\u1eb7t ch\u1ed7 ${this.pnrOrderDetailData.fareInfo.originalPnr}?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:i=>{i.data&&(this.isSpinning=!0,this._ticketLowFareService.cancelPnrOrder(this.orderId).pipe((0,P.x)(()=>this.isSpinning=!1)).subscribe({next:()=>{this.getPnrOrderDetail()}}))}})}gotoManage(){this._router.navigate(["admin/manage-pnr-orders"])}mobileTabChange(t,i){this.mobileTab=t,i.scrollIntoView({behavior:"smooth",inline:"center"})}openBottomSheetAction(t,i){t.preventDefault(),t.stopPropagation(),this.bottomSheetAction=this._bottomSheetService.open(i,{hasHeader:!1,rightButtonIconClass:"text-neutral-gray-4"})}onCreateNewRegistration(){const t={airline:this.pnrOrderDetailData.airline,pnr:this.pnrOrderDetailData.fareInfo.originalPnr};this.isSpinning=!0,this._ticketLowFareService.canMonitorLowFare(t).pipe((0,P.x)(()=>this.isSpinning=!1)).subscribe({next:i=>{var r,o,l,u;if("OK"===i.status&&null!==(r=i.data.canMonitor)&&void 0!==r&&r.enable)if(this._mobileDetectService.isMobile()){const c=this._bottomSheetService.open(R.g,{headerTitle:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",containerFullHeigh:!0,data:{registerOrderDetail:this.registerOrderDetail,regenerate:!0,sourceEvent:"REGENERATE"}});c.containerInstance._rightButtonClick.subscribe(_=>c.dismiss())}else this._modal.open(R.g,{registerOrderDetail:this.registerOrderDetail,regenerate:!0,sourceEvent:"REGENERATE"}).afterClosed$.subscribe({next:_=>{_.data&&this.getPnrOrderDetail()}});else if("OK"!==i.status||null!==(o=i.data.canMonitor)&&void 0!==o&&o.enable){const c=null===(u=null===(l=i.objectError)||void 0===l?void 0:l.errorDescription)||void 0===u?void 0:u.vi;this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:c,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})}else this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:i.data.canMonitor.reason.desc,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})},error:()=>{this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${t.pnr}</strong> kh\xf4ng h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.KNP),e.Y36(K.gb,8),e.Y36(se.s),e.Y36(pe.G),e.Y36(K.oE),e.Y36(fe.gz),e.Y36(fe.F0),e.Y36(N.$A),e.Y36(ue.x),e.Y36(U.a2),e.Y36(ne.L),e.Y36(de.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pnr-order-detail"]],standalone:!0,features:[e.jDz],decls:46,vars:30,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer",3,"click"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"h-full","w-full","hidden","md:block"],[1,"py-2","px-4","md:flex","hidden","whitespace-nowrap","overflow-x-scroll","bg-neutral-white","sticky","top-0","z-[1]","shadow-cf-sm","border-t","border-t-neutral-gray-1"],[1,"px-4","py-1.5","rounded-full","text-espressive-md","text-neutral-gray-4","border","border-transparent","cursor-default",3,"click"],["ticketInfoTab",""],["paxInfoTab",""],["orderInfoTab",""],["class","w-full p-4",4,"ngIf"],["class","flex-1 p-4",4,"ngIf"],[1,"hidden","md:flex","md:justify-between","gap-x-4","md:fixed","md:bottom-0","md:p-4","md:bg-neutral-white","md:w-full","md:right-0"],["cf-button","","size","medium","type","secondary",1,"bg-white",3,"click"],["cfHeadIcon","","icon","arrow_left","size","medium",1,"mr-2"],[4,"ngIf"],["bottomSheetAction",""],["availableSlotRef",""],["availableSlotFullDescRef",""],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","justify-between","items-center"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap","bg-neutral-white",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],[1,"flex","gap-x-4"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"click",4,"ngIf"],["cf-button","","size","medium",3,"click",4,"ngIf"],["cf-button","","size","medium",3,"disabled","manualHandle","placement","cfTooltip","click",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],["class","flex gap-x-2 items-center py-1.5 px-3 bg-secondary-5-1",4,"ngIf"],["class","flex gap-x-2 items-center py-1.5 px-2 bg-primary-1-1",4,"ngIf"],[1,"px-2.5","py-1.5","flex","items-center","gap-x-2.5","rounded-tl-lg","rounded-tr-lg"],[3,"availableSlotData","content"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],[1,"p-3","flex","flex-col","gap-y-5","border","border-t-0","border-dashed","border-neutral-gray-3","bg-neutral-white","rounded-lg","rounded-tl-none","rounded-tr-none"],[1,"flex","justify-between","gap-x-[30px]"],[1,"flex","flex-col","justify-start","items-start","gap-y-2.5"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","flex-col"],[1,"text-heading-lg","text-neutral-gray-6",3,"ngClass"],[1,"text-heading-sm","text-neutral-gray-6",3,"ngClass"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["size","small","icon","chevron_right",1,"ml-2.5"],[1,"flex","flex-col","justify-center","text-center","gap-y-2.5","text-neutral-gray-6"],["class","text-heading-md text-functional-2-3 flex justify-center items-center gap-x-2",4,"ngIf"],["class","text-heading-md text-functional-3-3 flex justify-center items-center gap-x-2",4,"ngIf"],[1,"flex","items-center"],[1,"w-4","h-4","bg-neutral-gray-6","rounded-full"],[1,"w-[180px]","h-0","border-t-4","border-r-4","border-neutral-gray-6"],[1,"w-0","h-0","border-l-[14px]","border-l-neutral-gray-6","border-y-[8px]","border-y-transparent","border-solid"],["class","text-express-sm text-functional-2-3",4,"ngIf"],["class","text-express-sm text-functional-3-3",4,"ngIf"],[1,"flex","flex-col","justify-start","items-end","gap-y-2.5"],[1,"flex","flex-col","item-end"],[1,"text-heading-lg","text-neutral-gray-4",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"text-heading-sm","text-neutral-gray-4","text-right",3,"ngClass"],["cf-button","","size","medium","type","secondary","class","justify-center",3,"click",4,"ngIf"],[1,"flex","justify-center","items-center","gap-x-1.5","text-body-sm","text-neutral-gray-4"],["size","small","icon","refresh"],[1,"flex","items-center","gap-x-2"],["icon","plane","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"p-3","border","border-dashed","border-neutral-gray-3","bg-neutral-white","rounded-lg"],["class","flex justify-between gap-x-3 py-3",4,"ngFor","ngForOf"],["icon","users","size","small"],[1,"border","border-dashed","border-neutral-gray-2","bg-neutral-white","rounded-lg","p-3","flex","flex-col","gap-y-2"],["class","w-full h-[1px] bg-neutral-gray-1",4,"ngIf"],["class","flex gap-x-2 justify-start",4,"ngFor","ngForOf"],["icon","circle_information","size","small"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","flex","items-center","gap-x-6","text-express-md","text-neutral-gray-6"],["class","bg-secondary-7-2 px-2 py-1 rounded-full",4,"ngIf"],["class","p-3 border-b border-neutral-gray-1 flex gap-x-3",4,"ngIf"],[1,"flex-1","text-express-md","text-neutral-gray-6"],["class","flex-1 text-express-md text-neutral-gray-6 flex flex-col gap-y-3",4,"ngIf"],["class","p-3 flex gap-x-3",4,"ngIf"],[1,"flex"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"click"],["size","small","icon","delete",1,"ml-2.5"],["cf-button","","size","medium",3,"click"],["size","small","icon","external_link",1,"ml-2.5"],["cf-button","","size","medium",3,"disabled","manualHandle","placement","cfTooltip","click"],["tooltip",""],["size","small","icon","edit_alt",1,"ml-2.5"],["icon","refresh","size","small",1,"mr-2.5"],[1,"flex","gap-x-2","items-center","py-1.5","px-3","bg-secondary-5-1"],["icon","circle_check","size","small",1,"text-secondary-5-3"],[1,"text-body-md"],[1,"flex","gap-x-2","items-center","py-1.5","px-2","bg-primary-1-1"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","8","cy","8","r","7","fill","#E03C31"],["fill-rule","evenodd","clip-rule","evenodd","d","M10.4592 6.45972C10.7131 6.20588 10.7131 5.79432 10.4592 5.54048C10.2054 5.28664 9.79383 5.28664 9.53999 5.54048L7.99961 7.08086L6.45923 5.54048C6.20539 5.28664 5.79383 5.28664 5.53999 5.54048C5.28615 5.79432 5.28615 6.20588 5.53999 6.45972L7.08037 8.0001L5.53999 9.54048C5.28615 9.79432 5.28615 10.2059 5.53999 10.4597C5.79383 10.7136 6.20539 10.7136 6.45923 10.4597L7.99961 8.91934L9.53999 10.4597C9.79383 10.7136 10.2054 10.7136 10.4592 10.4597C10.7131 10.2059 10.7131 9.79432 10.4592 9.54048L8.91885 8.0001L10.4592 6.45972Z","fill","white"],[1,"text-heading-md","text-functional-2-3","flex","justify-center","items-center","gap-x-2"],["size","medium","icon","arrow_down",1,"text-functional-2-3"],[1,"text-heading-md","text-functional-3-3","flex","justify-center","items-center","gap-x-2"],["size","medium","icon","arrow_up",1,"mr-2.5","text-functional-3-3"],[1,"text-express-sm","text-functional-2-3"],[1,"text-express-sm","text-functional-3-3"],[1,"flex","justify-between","gap-x-3","py-3"],[1,"flex","items-center","mr-4"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","gap-x-2","justify-start"],[1,"flex","flex-col","gap-y-2"],["class","text-body-sm text-neutral-gray-4",4,"ngIf"],[1,"text-body-sm","text-neutral-gray-4"],[1,"bg-secondary-7-2","px-2","py-1","rounded-full"],[1,"flex-1","text-express-md","text-neutral-gray-6","flex","flex-col","gap-y-3"],["class","flex flex-col gap-y-3",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-3"],[1,"flex","gap-x-2"],[1,"w-[24px]","h-[24px]","object-contain",3,"src"],[1,"text-express-md","text-neutral-gray-6"],[1,"uppercase"],["class","flex gap-x-2",4,"ngFor","ngForOf"],[1,"rounded","text-express-sm","h-fit","py-1","px-2","border","border-neutral-gray-5"],[1,"flex","gap-2","flex-wrap"],["class","text-express-sm text-neutral-gray-6 py-1 px-2 rounded bg-neutral-gray-2",4,"ngFor","ngForOf"],[1,"text-express-sm","text-neutral-gray-6","py-1","px-2","rounded","bg-neutral-gray-2"],[1,"p-3","flex","gap-x-3"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"],[1,"w-full","p-4"],["class","md:flex md:flex-col hidden w-full gap-y-4",4,"ngIf"],["class","md:flex md:flex-col hidden w-full",4,"ngIf"],[1,"md:flex","md:flex-col","hidden","w-full","gap-y-4"],[1,"px-2.5","py-1.5","flex","justify-between","gap-x-2.5","bg-gradient-to-r","rounded-t-lg"],[1,"p-3","flex","flex-col","gap-y-5","bg-neutral-white","rounded-b-lg"],[1,"flex","justify-between","gap-x-4"],[1,"text-express-sm","text-neutral-gray-4","whitespace-nowrap"],[1,"text-heading-xs","text-neutral-gray-6","whitespace-nowrap",3,"ngClass"],[1,"text-express-sm","text-neutral-gray-6","whitespace-nowrap",3,"ngClass"],["cf-button","","size","medium","type","secondary",1,"justify-center","whitespace-nowrap","!text-button-md","!py-1.5","!px-3",3,"click"],[1,"flex-auto","flex","flex-col","justify-center","text-center","gap-y-2.5","text-neutral-gray-6"],[1,"flex","items-center","w-full"],[1,"w-2","h-2","bg-neutral-gray-6","rounded-full"],[1,"flex-1","h-0","border-t-2","border-r-2","border-neutral-gray-6"],[1,"w-0","h-0","border-l-[10px]","border-l-neutral-gray-6","border-y-[4px]","border-y-transparent","border-solid"],[1,"text-heading-xs","text-neutral-gray-4","whitespace-nowrap",3,"ngClass"],[1,"text-express-sm","text-neutral-gray-4","text-right",3,"ngClass"],["cf-button","","size","medium","type","secondary","class","justify-center whitespace-nowrap !text-button-md !py-1.5 !px-3",3,"click",4,"ngIf"],[1,"flex","justify-between","items-center","gap-x-2"],[1,"flex","items-center","gap-x-2","pl-4"],[1,"px-4","py-3","bg-neutral-white","rounded-lg"],[4,"ngFor","ngForOf"],[1,"flex","gap-x-3"],[1,"flex-1","flex","flex-col","items-start"],[1,"flex","justify-end","gap-x-3","py-3"],[1,"md:flex","md:flex-col","hidden","w-full"],[1,"flex","items-center","gap-x-2","text-heading-sm","text-neutral-gray-6","px-4","pb-3"],[1,"p-4","bg-neutral-white","flex","flex-col","gap-y-2","rounded-lg"],["icon","settings","size","small"],[1,"flex","flex-col","bg-neutral-white","md:mb-[90px]","rounded-lg"],[1,"flex","flex-col","py-3","px-4","gap-y-3"],[1,"text-body-md","text-neutral-black"],["class","bg-secondary-7-2 px-2 py-1 rounded-full text-express-md",4,"ngIf"],[1,"flex","flex-col","py-3","px-4","gap-y-3","border-t","border-neutral-gray-1"],["class","flex flex-col py-3 px-4 gap-y-3 border-t border-neutral-gray-1",4,"ngIf"],[1,"bg-secondary-7-2","px-2","py-1","rounded-full","text-express-md"],["icon","document","size","small"],[1,"flex","flex-col","bg-neutral-white","rounded-lg"],[1,"flex-1","p-4"],["cf-button","","size","small","type","secondary","class","bg-white",3,"click",4,"ngIf"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],["cfHeadIcon","","icon","options_horizontal","size","medium"],["cfHeadIcon","","icon","external_link","size","medium",1,"mr-2"],["cfHeadIcon","","icon","refresh","size","medium",1,"mr-2"],[1,"pb-4","w-full"],["class","py-2.5 px-4 text-button-md text-neutral-gray-6 border-b border-neutral-gray-1 flex gap-x-2 items-center",3,"ngClass","click",4,"ngIf"],["class","py-2.5 px-4 text-button-md text-neutral-gray-6 border-b border-neutral-gray-1 flex gap-x-2 items-center",3,"click",4,"ngIf"],[1,"py-2.5","px-4","text-button-md","text-neutral-gray-6","border-b","border-neutral-gray-1","flex","gap-x-2","items-center",3,"ngClass","click"],["icon","edit_alt","size","small",3,"ngClass"],[1,"py-2.5","px-4","text-button-md","text-neutral-gray-6","border-b","border-neutral-gray-1","flex","gap-x-2","items-center",3,"click"],["icon","coupon_slash","size","small"],["class","px-2.5 py-1 rounded bg-black bg-opacity-30 flex items-center gap-x-2 cursor-default",4,"ngIf"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"],["icon","circle_help","size","small",1,"text-neutral-white"],["class","inline-flex gap-x-1 items-center whitespace-nowrap text-express-md text-neutral-white px-2 py-1 rounded bg-black bg-opacity-30",4,"ngIf"],[1,"inline-flex","gap-x-1","items-center","whitespace-nowrap","text-express-md","text-neutral-white","px-2","py-1","rounded","bg-black","bg-opacity-30"],["class","line-through",4,"ngIf"],[1,"line-through"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.NdJ("click",function(){return i.gotoManage()}),e._uU(3,"Canh v\xe9 r\u1ebb "),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,On,132,75,"div",7),e.YNc(10,Dn,6,0,"div",8),e.qZA()()(),e.TgZ(11,"div",9)(12,"div")(13,"div",1)(14,"span",2),e.NdJ("click",function(){return i.gotoManage()}),e._uU(15,"Canh v\xe9 r\u1ebb"),e.qZA(),e._UZ(16,"cf-icon",3),e.TgZ(17,"span",4),e._uU(18,"Chi ti\u1ebft y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(19,"div",10)(20,"div",11,12),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(21);return e.KtG(i.mobileTabChange("TICKET_INFO",l))}),e._uU(22," Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(23,"div",11,13),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(24);return e.KtG(i.mobileTabChange("PAX_INFO",l))}),e._uU(25," Th\xf4ng tin h\xe0nh kh\xe1ch "),e.qZA(),e.TgZ(26,"div",11,14),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(24);return e.KtG(i.mobileTabChange("ORDER_CONFIG",l))}),e._uU(28," C\u1ea5u h\xecnh canh v\xe9 "),e.qZA(),e.TgZ(29,"div",11,14),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(24);return e.KtG(i.mobileTabChange("ORDER_INFO",l))}),e._uU(31," Th\xf4ng tin chi ti\u1ebft "),e.qZA()()(),e.YNc(32,Wn,5,4,"div",15),e.YNc(33,ei,4,0,"div",16),e.qZA(),e.TgZ(34,"div",17)(35,"button",18),e.NdJ("click",function(){return i.gotoManage()}),e._UZ(36,"cf-icon",19),e._uU(37," Quay l\u1ea1i "),e.qZA(),e.YNc(38,ai,4,6,"div",20),e.qZA(),e.YNc(39,di,3,4,"ng-template",null,21,e.W1O),e.YNc(41,_i,2,2,"ng-template",null,22,e.W1O),e.YNc(43,Ti,2,2,"ng-template",null,23,e.W1O),e.YNc(45,Ei,1,0,"cf-spinner",20)}2&t&&(e.xp6(9),e.Q6J("ngIf",!i.isLoading&&i.pnrOrderDetailData),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(10),e.ekj("text-secondary-3-4","TICKET_INFO"===i.mobileTab)("!border-secondary-3-4","TICKET_INFO"===i.mobileTab)("bg-secondary-3-1","TICKET_INFO"===i.mobileTab),e.xp6(3),e.ekj("text-secondary-3-4","PAX_INFO"===i.mobileTab)("!border-secondary-3-4","PAX_INFO"===i.mobileTab)("bg-secondary-3-1","PAX_INFO"===i.mobileTab),e.xp6(3),e.ekj("text-secondary-3-4","ORDER_CONFIG"===i.mobileTab)("!border-secondary-3-4","ORDER_CONFIG"===i.mobileTab)("bg-secondary-3-1","ORDER_CONFIG"===i.mobileTab),e.xp6(3),e.ekj("text-secondary-3-4","ORDER_INFO"===i.mobileTab)("!border-secondary-3-4","ORDER_INFO"===i.mobileTab)("bg-secondary-3-1","ORDER_INFO"===i.mobileTab),e.xp6(3),e.Q6J("ngIf",i.pnrOrderDetailData),e.xp6(1),e.Q6J("ngIf",!i.pnrOrderDetailData),e.xp6(5),e.Q6J("ngIf",i.pnrOrderDetailData),e.xp6(7),e.Q6J("ngIf",i.isSpinning))},dependencies:[T.ez,T.mk,T.sg,T.O5,T.RF,T.n9,T.ED,T.JJ,d.AxE,d.Sm8,q.N8,q.Xq,Ee.IA,Te.Lk,ce.f,D.OR,U.DW,te._],encapsulation:2}),n})();var Di=p(98184);function Ci(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",48,49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onAction("EDIT"))}),e._uU(3," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.pnrOrderData.canUpdate)("disabledOneClick",!0)("manualHandle",t.pnrOrderData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function Zi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onAction("CANCEL"))}),e._uU(1," H\u1ee7y canh "),e.qZA()}2&n&&e.Q6J("disabledOneClick",!0)}function yi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onAction("CREATE_NEW"))}),e._uU(1," T\u1ea1o l\u1ea1i "),e.qZA()}2&n&&e.Q6J("disabledOneClick",!0)}function bi(n,a){if(1&n&&(e.TgZ(0,"div",51),e._UZ(1,"cf-icon",52),e.TgZ(2,"div",53),e._uU(3,"Gi\u1ea3m "),e.TgZ(4,"span",6),e._uU(5),e.ALo(6,"number"),e.qZA(),e._uU(7," \u0111 so v\u1edbi gi\xe1 ban \u0111\u1ea7u"),e.qZA()()),2&n){const t=e.oxw();e.Tol(t.CARD_STATUS[t.pnrOrderData.state].textColor),e.xp6(5),e.Oqu(e.lcZ(6,3,t.pnrOrderData.fareInfo.lowerFare))}}function Ai(n,a){1&n&&(e.TgZ(0,"p"),e._UZ(1,"cf-icon",54),e.qZA())}function Ii(n,a){1&n&&(e.TgZ(0,"p"),e._UZ(1,"cf-icon",54),e.qZA())}function Pi(n,a){1&n&&(e.TgZ(0,"p"),e._UZ(1,"cf-icon",55),e.qZA())}function Si(n,a){1&n&&(e.TgZ(0,"p"),e._UZ(1,"cf-icon",56),e.qZA())}function Fi(n,a){1&n&&e._UZ(0,"p")}function Ui(n,a){if(1&n&&(e.TgZ(0,"div",35)(1,"div",57),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(3,"div",37),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.ownerName)}}function wi(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"H\u1ea1ng gh\u1ebf"),e.qZA())}function ki(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Gi\xe1 v\xe9"),e.qZA())}function qi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.gotoBookingCode(r.pnrOrderData.fareInfo.originalPnr,r.pnrOrderData.airline))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.pnrOrderData.fareInfo.originalPnr," ")}}function Ni(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Mi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.gotoBookingCode(r.pnrOrderData.fareInfo.detectedPnr,r.pnrOrderData.airline))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.pnrOrderData.fareInfo.detectedPnr," ")}}function Ri(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Yi(n,a){1&n&&e._UZ(0,"cf-icon",59)}function Ji(n,a){1&n&&e._UZ(0,"cf-icon",60)}function Bi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAction("CREATE_NEW"))}),e._UZ(1,"cf-icon",66),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o l\u1ea1i"),e.qZA()()}}const Qi=function(n){return{"!text-neutral-gray-4 pointer-events-none":n}},Li=function(n){return{"!text-neutral-gray-4":n}};function ji(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",67),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAction("EDIT"))}),e._UZ(1,"cf-icon",68),e.TgZ(2,"span"),e._uU(3,"Ch\u1ec9nh s\u1eeda"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Qi,!t.pnrOrderData.canUpdate)),e.xp6(1),e.Q6J("ngClass",e.VKq(4,Li,!t.pnrOrderData.canUpdate))}}function Hi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.NdJ("click",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onConfirmCancel(r))}),e._UZ(1,"cf-icon",69),e.TgZ(2,"span"),e._uU(3,"H\u1ee7y canh"),e.qZA()()}}function Ki(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAction("BOOKING_DETAIL"))}),e._UZ(1,"cf-icon",70),e.TgZ(2,"span"),e._uU(3,"M\u1edf \u0111\u1eb7t ch\u1ed7"),e.qZA()()}}const Ae=function(){return["CANCEL","EXPIRED"]},ae=function(){return["CREATE","IN_PROCESS","IN_PROCESS_PRICE_UP"]},zi=function(){return["COMPLETED"]};function $i(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",61),e.YNc(1,Bi,4,0,"div",62),e.YNc(2,ji,4,6,"div",63),e.YNc(3,Hi,4,0,"div",62),e.TgZ(4,"div",64),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onAction("DETAIL"))}),e._UZ(5,"cf-icon",65),e.TgZ(6,"span"),e._uU(7,"Chi ti\u1ebft y\xeau c\u1ea7u"),e.qZA()(),e.YNc(8,Ki,4,0,"div",62),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(4,Ae).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(5,ae).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",t.canMonitorLowFareTicket&&e.DdM(6,ae).includes(t.pnrOrderData.state)),e.xp6(5),e.Q6J("ngIf",e.DdM(7,zi).includes(t.pnrOrderData.state))}}function Gi(n,a){1&n&&(e.TgZ(0,"div",72)(1,"span",73),e._uU(2,"Thu ph\xed"),e.qZA(),e._UZ(3,"cf-icon",74),e.qZA())}function Vi(n,a){1&n&&(e.TgZ(0,"div",72)(1,"span",73),e._uU(2,"Mi\u1ec5n ph\xed"),e.qZA(),e._UZ(3,"cf-icon",74),e.qZA())}function Xi(n,a){if(1&n&&(e.YNc(0,Gi,4,0,"div",71),e.YNc(1,Vi,4,0,"div",71)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.availableSlotData.available),e.xp6(1),e.Q6J("ngIf",t.availableSlotData.available)}}const Wi=function(n){return{"!text-neutral-gray-5":n}},er=function(n){return{"md:!items-end":n}},oe=function(n){return{"md:!hidden":n}};let tr=(()=>{class n{constructor(t,i,r,o){this._permissionService=i,this._bottomSheetService=r,this._mobileDetectService=o,this.status=E.b.COMPLETED,this.STATUS_ORDER=E.b,this.MONITOR_TYPE=v.$,this.CARD_STATUS=Oe.t,this.actionChange=new e.vpe,this.retriveBookingCode=new e.vpe,this.viewListAgentForMonitorFare=this._permissionService.hasPermission(N.or.ViewListAgentForMonitorFare),this.canMonitorLowFareTicket=this._permissionService.hasPermission(N.or.CanMonitorLowFareTicket),this.isShowMore=!1,t.registerIcons([d.esH,d.NNX,d.Hge,d.Ffn,d.SlW,d.qDv,d.cnj,d.LdZ,d.BbA,d.oFb,d.$S,d.xbi,d.D7,d.QkI,d.n78,d.fqi])}ngOnInit(){this.status=this.pnrOrderData.state,this.availableSlotData={available:this.pnrOrderData.availableSlotInfo.free,type:this.pnrOrderData.availableSlotInfo.type,amount:this.pnrOrderData.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?this.pnrOrderData.availableSlotInfo.percent:this.pnrOrderData.availableSlotInfo.amountPerPax,currency:this.pnrOrderData.availableSlotInfo.type===I.G.DOWN_FARE_TICKET?this.pnrOrderData.availableSlotInfo.currency:"\u0111"}}onAction(t){this._bottomSheetService&&this._bottomSheetService.dismiss(),this.actionChange.emit(t)}gotoBookingCode(t,i){this.retriveBookingCode.emit({bookingCode:t,airline:i})}openBottomSheet(t,i){t.preventDefault(),t.stopPropagation(),this.bottomSheetAction=this._bottomSheetService.open(i,{hasHeader:!1,rightButtonIconClass:"text-neutral-gray-4"})}onClickDetail(){this._mobileDetectService.isMobile()&&this.onAction("DETAIL")}onConfirmCancel(t){this.bottomSheetAction.dismiss(),t.preventDefault(),t.stopPropagation(),this.mobileConfirmBts=this._bottomSheetService.open(D.Q4,{headerTitle:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:`<div>B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${this.pnrOrderData.code}?</strong></div>`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",hasIcon:!0}}),this.mobileConfirmBts.containerInstance._rightButtonClick.subscribe(()=>{this.mobileConfirmBts.dismiss()}),this.mobileConfirmBts.afterDismissed().subscribe(i=>{i&&this.onAction("CANCEL")})}onShow(t){t.preventDefault(),t.stopPropagation(),this.isShowMore=!this.isShowMore}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.KNP),e.Y36(N.$A),e.Y36(U.a2),e.Y36(ne.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pnr-order-item"]],inputs:{pnrOrderData:"pnrOrderData"},outputs:{actionChange:"actionChange",retriveBookingCode:"retriveBookingCode"},standalone:!0,features:[e.jDz],decls:94,vars:67,consts:[[1,"rounded-lg","overflow-hidden","bg-white"],[1,"px-2.5","py-1.5","flex","justify-between","gap-x-2.5","h-full"],[1,"flex","items-center","gap-x-2"],[1,"md:hidden",3,"availableSlotData","content"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],[1,"flex","gap-x-1.5","md:hidden"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"disabledOneClick","click",4,"ngIf"],["class","flex gap-x-1.5 items-center md:hidden",3,"class",4,"ngIf"],[1,"hidden","md:block","md:p-2",3,"click"],["icon","options_horizontal","size","small"],[1,"p-3","flex","flex-col","gap-y-2",3,"click"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","gap-y-3"],[1,"flex","gap-x-5"],[1,"flex","flex-col","justify-between","items-center","gap-y-1.5"],[1,"w-7","h-7","object-contain",3,"src"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","flex-col","justify-between","gap-y-1.5"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","arrow_right","size","small"],[1,"text-express-sm","text-neutral-gray-6","md:text-body-sm"],[1,"hidden","md:block","w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","gap-x-5","items-center","md:items-start"],[1,"flex","flex-col","gap-y-1.5","justify-between","items-end","md:items-start"],[1,"flex","gap-x-1.5","items-center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"text-express-xl","text-secondary-3-4",3,"ngClass"],["cf-button","","size","medium",1,"md:hidden",3,"disabledOneClick","click"],[1,"p-2","flex","justify-between","items-center","bg-neutral-gray-1","rounded","md:flex","md:gap-x-4","md:justify-center","md:items-center","md:p-3",3,"ngClass"],[1,"flex","justify-between","items-center","flex-1","md:flex-col","md:items-start","md:gap-y-2"],["class","min-w-[100px] flex flex-col gap-y-2 md:flex-row md:gap-x-4",4,"ngIf"],[1,"min-w-[100px]","flex","flex-col","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"min-w-[100px]","flex","flex-col","gap-y-2","md:flex-row","md:gap-x-4",3,"ngClass"],[4,"ngIf"],["class","text-secondary-3-4 hover:underline cursor-default",3,"click",4,"ngIf"],[1,"md:p-2","hidden","md:block",3,"click"],["icon","chevron_down","size","small",4,"ngIf"],["icon","chevron_up","size","small",4,"ngIf"],[1,"hidden","md:flex"],[3,"availableSlotData","content"],["bottomSheetAction",""],["availableSlotRef",""],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click"],["trigger","","originOverlay","cdkOverlayOrigin"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"disabledOneClick","click"],[1,"flex","gap-x-1.5","items-center","md:hidden"],["icon","arrow_down","size","small"],[1,"text-body-md"],["icon","arrow_right","size","small",1,"text-neutral-gray-4"],["icon","price_down","size","small",1,"text-secondary-5-3"],["icon","arrow_right_up","size","small",1,"text-secondary-4-4"],[1,"min-w-[100px]","text-body-sm","text-neutral-gray-4"],[1,"text-secondary-3-4","hover:underline","cursor-default",3,"click"],["icon","chevron_down","size","small"],["icon","chevron_up","size","small"],[1,"pb-4","w-full"],["class","py-2.5 px-4 text-button-md text-neutral-gray-6 border-b border-neutral-gray-1 flex gap-x-2 items-center",3,"click",4,"ngIf"],["class","py-2.5 px-4 text-button-md text-neutral-gray-6 border-b border-neutral-gray-1 flex gap-x-2 items-center",3,"ngClass","click",4,"ngIf"],[1,"py-2.5","px-4","text-button-md","text-neutral-gray-6","border-b","border-neutral-gray-1","flex","gap-x-2","items-center",3,"click"],["icon","document","size","small"],["icon","refresh","size","small"],[1,"py-2.5","px-4","text-button-md","text-neutral-gray-6","border-b","border-neutral-gray-1","flex","gap-x-2","items-center",3,"ngClass","click"],["icon","edit_alt","size","small",3,"ngClass"],["icon","coupon_slash","size","small"],["icon","external_link","size","small"],["class","px-2.5 py-1 rounded bg-black bg-opacity-30 flex items-center gap-x-2 cursor-default",4,"ngIf"],[1,"px-2.5","py-1","rounded","bg-black","bg-opacity-30","flex","items-center","gap-x-2","cursor-default"],[1,"text-neutral-white","text-button-md"],["icon","circle_help","size","small",1,"text-neutral-white"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"tooltip-available-slot",3),e.TgZ(4,"div",4),e._UZ(5,"cf-icon",5),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7),e.YNc(9,Ci,4,5,"button",8),e.YNc(10,Zi,2,1,"button",9),e.YNc(11,yi,2,1,"button",9),e.YNc(12,bi,8,5,"div",10),e.qZA(),e.TgZ(13,"div",11),e.NdJ("click",function(l){e.CHM(r);const u=e.MAs(91);return e.KtG(i.openBottomSheet(l,u))}),e._UZ(14,"cf-icon",12),e.qZA()(),e.TgZ(15,"div",13),e.NdJ("click",function(){return i.onClickDetail()}),e.TgZ(16,"div",14)(17,"div",15)(18,"div",16),e._UZ(19,"img",17),e.TgZ(20,"div",18),e._uU(21),e.qZA()(),e.TgZ(22,"div",19)(23,"div",20)(24,"div"),e._uU(25),e.qZA(),e._UZ(26,"cf-icon",21),e.TgZ(27,"div"),e._uU(28),e.qZA()(),e.TgZ(29,"div",22),e._uU(30),e.qZA()()(),e._UZ(31,"div",23),e.TgZ(32,"div",24)(33,"div",25)(34,"div",26)(35,"div",27),e.YNc(36,Ai,2,0,"p",28),e.YNc(37,Ii,2,0,"p",28),e.YNc(38,Pi,2,0,"p",28),e.YNc(39,Si,2,0,"p",28),e.YNc(40,Fi,1,0,"p",29),e.qZA(),e.TgZ(41,"div",30),e._uU(42),e.ALo(43,"number"),e.qZA()(),e.TgZ(44,"div",18),e._uU(45),e.ALo(46,"number"),e.qZA()(),e.TgZ(47,"button",31),e.NdJ("click",function(){return i.onAction("DETAIL")}),e._uU(48," Chi ti\u1ebft "),e.qZA()()(),e.TgZ(49,"div",32)(50,"div",33),e.YNc(51,Ui,5,1,"div",34),e.TgZ(52,"div",35)(53,"div",36),e._uU(54,"M\xe3 y\xeau c\u1ea7u"),e.qZA(),e.TgZ(55,"div",37),e._uU(56),e.qZA()(),e.TgZ(57,"div",35)(58,"div",36),e._uU(59,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(60,"div",37),e._uU(61),e.qZA()(),e.TgZ(62,"div",38)(63,"div",36),e._uU(64,"H\u1ea1n canh v\xe9"),e.qZA(),e.TgZ(65,"div",37),e._uU(66),e.qZA()(),e.TgZ(67,"div",38)(68,"div",36),e._uU(69,"Canh theo"),e.qZA(),e.TgZ(70,"div",37),e.YNc(71,wi,2,0,"span",39),e.YNc(72,ki,2,0,"span",39),e.qZA()(),e.TgZ(73,"div",38)(74,"div",36),e._uU(75,"PNR c\u0169"),e.qZA(),e.TgZ(76,"div",37),e.YNc(77,qi,2,1,"a",40),e.YNc(78,Ni,2,0,"span",39),e.qZA()(),e.TgZ(79,"div",38)(80,"div",36),e._uU(81,"PNR m\u1edbi"),e.qZA(),e.TgZ(82,"div",37),e.YNc(83,Mi,2,1,"a",40),e.YNc(84,Ri,2,0,"span",39),e.qZA()()(),e.TgZ(85,"div",41),e.NdJ("click",function(l){return i.onShow(l)}),e.YNc(86,Yi,1,0,"cf-icon",42),e.YNc(87,Ji,1,0,"cf-icon",43),e.qZA()(),e.TgZ(88,"div",44),e._UZ(89,"tooltip-available-slot",45),e.qZA()()(),e.YNc(90,$i,9,8,"ng-template",null,46,e.W1O),e.YNc(92,Xi,2,2,"ng-template",null,47,e.W1O)}if(2&t){const r=e.MAs(93);e.xp6(1),e.Tol(i.CARD_STATUS[i.pnrOrderData.state].backgroundColor),e.xp6(2),e.Q6J("availableSlotData",i.availableSlotData)("content",r),e.xp6(1),e.Tol(i.CARD_STATUS[i.pnrOrderData.state].textColor),e.xp6(1),e.Q6J("icon",i.CARD_STATUS[i.pnrOrderData.state].icon),e.xp6(2),e.Oqu(i.CARD_STATUS[i.pnrOrderData.state].description),e.xp6(2),e.Q6J("ngIf",i.canMonitorLowFareTicket&&e.DdM(52,ae).includes(i.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",i.canMonitorLowFareTicket&&e.DdM(53,ae).includes(i.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",i.canMonitorLowFareTicket&&e.DdM(54,Ae).includes(i.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",i.pnrOrderData.state===i.STATUS_ORDER.COMPLETED),e.xp6(7),e.Q6J("src",i.pnrOrderData.airlineLogo,e.LSH),e.xp6(2),e.Oqu(i.pnrOrderData.airline),e.xp6(4),e.AsE("",i.pnrOrderData.startPointName," (",i.pnrOrderData.startPoint,")"),e.xp6(3),e.AsE("",i.pnrOrderData.endPointName," (",i.pnrOrderData.endPoint,")"),e.xp6(2),e.AsE(" ","OW"===i.pnrOrderData.flightType?"M\u1ed9t chi\u1ec1u":"Kh\u1ee9 h\u1ed3i",": ",i.pnrOrderData.departTime," "),e.xp6(5),e.Q6J("ngSwitch",i.status),e.xp6(1),e.Q6J("ngSwitchCase",i.STATUS_ORDER.CREATE),e.xp6(1),e.Q6J("ngSwitchCase",i.STATUS_ORDER.IN_PROCESS),e.xp6(1),e.Q6J("ngSwitchCase",i.STATUS_ORDER.COMPLETED),e.xp6(1),e.Q6J("ngSwitchCase",i.STATUS_ORDER.IN_PROCESS_PRICE_UP),e.xp6(2),e.Q6J("ngClass",e.VKq(55,Wi,i.STATUS_ORDER.EXPIRED===i.status||i.STATUS_ORDER.CANCEL===i.status)),e.xp6(1),e.hij(" ",e.lcZ(43,48,i.pnrOrderData.fareInfo.detectedFare||i.pnrOrderData.fareInfo.originalFare)," \u0111 "),e.xp6(3),e.hij("Gi\xe1 ban \u0111\u1ea7u ",e.lcZ(46,50,i.pnrOrderData.fareInfo.originalFare)," \u0111 "),e.xp6(2),e.Q6J("disabledOneClick",!0),e.xp6(2),e.Q6J("ngClass",e.VKq(57,er,i.isShowMore)),e.xp6(2),e.Q6J("ngIf",i.viewListAgentForMonitorFare),e.xp6(5),e.Oqu(i.pnrOrderData.code||"-"),e.xp6(5),e.Oqu(i.pnrOrderData.orderInfo.timeCreated||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(59,oe,!i.isShowMore)),e.xp6(4),e.Oqu(i.pnrOrderData.orderInfo.timeExpired||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(61,oe,!i.isShowMore)),e.xp6(4),e.Q6J("ngIf",i.pnrOrderData.monitorType===i.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",i.pnrOrderData.monitorType===i.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngClass",e.VKq(63,oe,!i.isShowMore)),e.xp6(4),e.Q6J("ngIf",i.pnrOrderData.fareInfo.originalPnr),e.xp6(1),e.Q6J("ngIf",!i.pnrOrderData.fareInfo.originalPnr),e.xp6(1),e.Q6J("ngClass",e.VKq(65,oe,!i.isShowMore)),e.xp6(4),e.Q6J("ngIf",i.pnrOrderData.fareInfo.detectedPnr),e.xp6(1),e.Q6J("ngIf",!i.pnrOrderData.fareInfo.detectedPnr),e.xp6(2),e.Q6J("ngIf",!i.isShowMore),e.xp6(1),e.Q6J("ngIf",i.isShowMore),e.xp6(2),e.Q6J("availableSlotData",i.availableSlotData)("content",r)}},dependencies:[T.ez,T.mk,T.O5,T.RF,T.n9,T.ED,T.JJ,d.AxE,d.Sm8,q.N8,q.Xq,Te.Lk,ce.f,Di.xu,te._],encapsulation:2}),n})();var nr=p(77579),ir=p(78372),rr=p(28490);function ar(n,a){if(1&n&&(e.TgZ(0,"div",40)(1,"div",41)(2,"span"),e._uU(3,"Y\xeau c\u1ea7u mi\u1ec5n ph\xed"),e.qZA(),e._UZ(4,"cf-icon",42),e.qZA(),e.TgZ(5,"div",43),e._uU(6),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(6),e.AsE(" ",t.orderTaskStatus.numOrderFree?t.orderTaskStatus.numOrderFree:0,"/",t.orderTaskStatus.numMaxFree," ")}}function or(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"tooltip-available-slot",38),e.YNc(2,ar,7,2,"ng-template",null,39,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("content",t)("availableSlotData",i.availableSlotData)}}function lr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onRegisterPnrOrder(!1))}),e._UZ(1,"cf-icon",45),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.canCreateOrder)("disabledOneClick",!0)}}const cr=function(n,a){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":a}},sr=function(n){return{"text-neutral-gray-6":n}},dr=function(n){return{"!bg-neutral-gray-6":n}};function ur(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",46,47),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.MAs(2),u=e.oxw();return e.KtG(u.onChangeTab(o,l))}),e.TgZ(3,"div",48)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"cf-label",49),e._uU(7),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,cr,t.active,!i)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,sr,t.active)),e.xp6(2),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,dr,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}const le=function(){return[]};function pr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"cf-select",50),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.filterData.ownerId=r)})("selectedChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilterChange())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,le))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function _r(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"pnr-order-item",52),e.NdJ("actionChange",function(r){const l=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.onChange(r,l))})("retriveBookingCode",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.gotoBookingDetail(r.airline,r.bookingCode))}),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("pnrOrderData",t)}}function fr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("scrolled",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onScrollDown())}),e.YNc(1,_r,2,1,"ng-container",17),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listPnrOrder)}}function gr(n,a){1&n&&(e.TgZ(0,"div",54)(1,"div"),e._UZ(2,"img",55),e.qZA(),e.TgZ(3,"div",56)(4,"div",57),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(6,"div",58)(7,"div"),e._uU(8,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()())}function mr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onRegisterPnrOrder(!0))}),e._UZ(1,"cf-icon",45),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o m\u1edbi ngay"),e.qZA()()}}function hr(n,a){if(1&n&&(e.TgZ(0,"div",54)(1,"div"),e._UZ(2,"img",59),e.qZA(),e.TgZ(3,"div",60)(4,"div",57),e._uU(5,"Ch\u01b0a c\xf3 y\xeau c\u1ea7u canh v\xe9"),e.qZA(),e.TgZ(6,"div",58)(7,"div"),e._uU(8,"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb gi\xfap b\u1ea1n canh \u0111\u01b0\u1ee3c gi\xe1 v\xe9 th\u1ea5p h\u01a1n \u0111\u1eb7t ch\u1ed7 ban \u0111\u1ea7u c\u1ee7a b\u1ea1n m\u1ed9t c\xe1ch t\u1ef1 \u0111\u1ed9ng v\xe0 d\u1ec5 d\xe0ng nh\u1ea5t"),e.qZA()()(),e.YNc(9,mr,4,0,"button",61),e.qZA()),2&n){const t=e.oxw(2);e.xp6(9),e.Q6J("ngIf",t.canMonitorLowFareTicket)}}function xr(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,gr,11,0,"div",53),e.YNc(2,hr,10,1,"div",53),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isEmptyOrder),e.xp6(1),e.Q6J("ngIf",t.isEmptyOrder)}}function vr(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",63)(2,"ticket-item-skeleton",63)(3,"ticket-item-skeleton",63),e.qZA())}function Tr(n,a){1&n&&e._UZ(0,"cf-spinner")}function Er(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"cf-select",71),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.filterData.ownerId=r)}),e.TgZ(1,"label",70)(2,"span"),e._uU(3,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,le))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function Or(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",64)(1,"div",65)(2,"cf-input-group",66),e._UZ(3,"cf-icon",20),e.TgZ(4,"input",67,22),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.filterData.searchText=r)}),e.qZA()(),e.YNc(6,Er,4,6,"cf-select",68),e.TgZ(7,"cf-select",69),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.filterData.airline=r)}),e.TgZ(8,"label",70)(9,"span"),e._uU(10,"H\xe3ng bay"),e.qZA()()(),e.TgZ(11,"cf-select",71),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.filterData.sortByType=r)}),e.TgZ(12,"label",70)(13,"span"),e._uU(14,"S\u1eafp x\u1ebfp"),e.qZA()()()(),e.TgZ(15,"div")(16,"button",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.searchPnrOrders())}),e._UZ(17,"cf-icon",73),e.TgZ(18,"div"),e._uU(19,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.filterData.searchText),e.xp6(2),e.Q6J("ngIf",t.viewListAgentForMonitorFare),e.xp6(1),e.Q6J("status","default")("data",t.airlineOptions)("allowSearch",!1)("ngModel",t.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",t.orderbyOptions||e.DdM(11,le))("placeholder","")("allowSearch",!1)("ngModel",t.filterData.sortByType)}}let Dr=(()=>{class n{constructor(t,i,r,o,l,u,c,_,h,f,g,Z){this._modal=i,this._ticketLowFareService=r,this._locationDataService=o,this._flightDataService=l,this._cd=u,this._permissionService=c,this._toastService=_,this._router=h,this._eventLogService=f,this._bottomSheetService=g,this._mobileDetectService=Z,this.STATUS_ORDER=E.b,this.tabSelected="ALL",this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:E.b.IN_PROCESS,text:"\u0110ang ho\u1ea1t \u0111\u1ed9ng",counter:0,active:!1},{value:E.b.COMPLETED,text:"Th\xe0nh c\xf4ng",counter:0,active:!1},{value:E.b.CANCEL,text:"\u0110\xe3 k\u1ebft th\xfac",counter:0,active:!1}],this.orderbyOptions=[{value:"TIME_UPDATE",text:"Ng\xe0y c\u1eadp nh\u1eadt"},{value:"TIME_CREATE",text:"Ng\xe0y y\xeau c\u1ea7u"},{value:"TIME_EXPIRE",text:"H\u1ea1n canh v\xe9"},{value:"AIRLINE",text:"H\xe3ng bay"},{value:"PNR",text:"M\xe3 \u0111\u1eb7t ch\u1ed7"}],this.airlineOptions=[{value:"ALL",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"VietJet Air"},{value:"QH",text:"Bamboo Airways"}],this.agentOptions=[{value:"",text:"T\u1ea5t c\u1ea3"}],this.searchValueChanged$=new nr.x,this.isSkeleton=!0,this.isSpinner=!1,this.isEmptyOrder=!1,this.isEmptyResult=!1,this.listPnrOrder=[],this.currentTab="ALL",this.filterData={airline:"ALL",sortByType:"TIME_UPDATE",ownerId:"",searchText:"",offset:1,limit:10},this.totalItem=0,this.viewListAgentForMonitorFare=this._permissionService.hasPermission(N.or.ViewListAgentForMonitorFare),this.canMonitorLowFareTicket=this._permissionService.hasPermission(N.or.CanMonitorLowFareTicket),this.canCreateOrder=!1,this.TYPE_ORDER=I.G,this.availableSlotData={available:!1,type:I.G.DOWN_FARE_TICKET,amount:0,currency:"%"},t.registerIcons([d.TM4,d.SK7])}ngOnInit(){this.viewListAgentForMonitorFare&&this.getListAgentFilter(),this.searchPnrOrders(),this.searchValueChanged$.pipe((0,ir.b)(1e3)).subscribe(t=>{this.isEmptyResult=!0,this.searchPnrOrders()})}getListAgentFilter(){this._ticketLowFareService.getAgentFilterOrder().subscribe({next:t=>{var i;if("OK"===t.status){const r=(null===(i=t.data)||void 0===i?void 0:i.map(o=>({value:o.id,text:o.username})))||[];this.agentOptions=[...this.agentOptions,...r]}}})}getReqSearch(){let t={getAllState:!1,listState:[],searchText:this.filterData.searchText,airline:this.filterData.airline,sortByType:this.filterData.sortByType,ownerId:this.filterData.ownerId||"",pageOffset:this.filterData.offset,pageSize:this.filterData.limit,type:I.G.DOWN_FARE_TICKET};switch(this.currentTab){case E.b.IN_PROCESS:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[E.b.CREATE,E.b.IN_PROCESS,E.b.IN_PROCESS_PRICE_UP]});break;case E.b.COMPLETED:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[E.b.COMPLETED]});break;case E.b.CANCEL:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[E.b.CANCEL,E.b.EXPIRED]});break;default:t=Object.assign(Object.assign({},t),{getAllState:!0,listState:[]})}return t}onFilterChange(){this.isEmptyResult=!0,this.filterData.offset=1,this.searchPnrOrders()}searchPnrOrders(){this._mobileDetectService.isMobile()&&this.btsSearchMobile&&this.btsSearchMobile.dismiss(),this.isSkeleton=!0;const t=this.getReqSearch();this._ticketLowFareService.getListPnrOrder(t).pipe((0,P.x)(()=>this.isSkeleton=!1)).subscribe({next:i=>{var r,o;if("OK"===i.status){1===this.filterData.offset&&(this.listPnrOrder=[]);const l=this.listTab.find(c=>c.value===this.currentTab);l&&(l.counter=i.data.total),this.orderTaskStatus=i.data.orderTaskStatus,this.canCreateOrder=null===(r=i.data.orderTaskStatus)||void 0===r?void 0:r.canCreateOrder;const u=(null===(o=i.data.listOrder)||void 0===o?void 0:o.map(c=>{var _,h,f,g,Z,b,w,J,B,Q,L;let S={code:"",localTime:""},F={code:"",localTime:""};const y=c.ticketInfo.journeys.find(m=>0===m.leg),G=c.ticketInfo.journeys.find(m=>1===m.leg);"OW"===c.ticketInfo.flightType?y&&(S={code:y.startPoint,localTime:y.departTime},F={code:y.endPoint,localTime:y.arrivalTime}):y&&G&&(S={code:y.startPoint,localTime:y.departTime},F={code:G.startPoint,localTime:G.departTime});const M=(null===(_=c.ticketInfo.passengers)||void 0===_?void 0:_.map(m=>({key:m.key||"",parentKey:m.parentKey||"",firstName:m.firstName||"",lastName:m.lastName||"",displayName:`${m.lastName} ${m.firstName}`,birthDay:m.birthday?x(m.birthday).format("DD/MM/YYYY"):"",type:m.type||"",namePrefix:m.namePrefix,gender:m.gender})))||[],V=(null==M?void 0:M.filter(m=>"INF"===m.type.toUpperCase()))||[],k=(null==M?void 0:M.filter(m=>"INF"!==m.type.toUpperCase()))||[];return V.forEach(m=>{const A=k.find(s=>s.key===m.parentKey);A&&(A.child=m)}),{orderId:c.orderId,code:c.code,canUpdate:c.canUpdate,state:c.state,stateDisplay:c.stateDisplay,airline:c.ticketInfo.airline,airlineLogo:this._flightDataService.getSmallAirlineLogoByCode(c.ticketInfo.airline),flightType:c.ticketInfo.flightType,monitorType:c.monitorType,startPoint:S.code,startPointName:this._locationDataService.getCityNameByCode(S.code),endPoint:F.code,endPointName:this._locationDataService.getCityNameByCode(F.code),departTime:S.localTime?x(S.localTime).format("DD/MM/YYYY HH:mm"):"",arriveTime:F.localTime?x(F.localTime).format("DD/MM/YYYY HH:mm"):"",orderInfo:{monitors:c.monitorType===v.$.FARE&&(null===(h=c.orderInfo.fareMonitors)||void 0===h?void 0:h.map(m=>({currentFareClass:m.currentFareClass,expectLowerFareClass:m.expectLowerFareClass,onlyCareLowerFare:m.onlyCareLowerFare,specifyFareClass:m.specifyFareClass})))||[],timeCreated:c.orderInfo.timeCreate?x(c.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpired:c.orderInfo.timeExpire?x(c.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdated:c.orderInfo.timeUpdate?x(c.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",targetPrice:c.monitorType===v.$.PRICE?c.orderInfo.priceMonitors[0].targetPrice:0},fareInfo:{originalPnr:(null===(f=c.fareInfo)||void 0===f?void 0:f.originalPnr)||"",detectedPnr:(null===(g=c.fareInfo)||void 0===g?void 0:g.detectedPnr)||"",originalFare:(null===(Z=c.fareInfo)||void 0===Z?void 0:Z.originalFare)||0,detectedFare:(null===(b=c.fareInfo)||void 0===b?void 0:b.detectedFare)||0,higherFare:(null===(w=c.fareInfo)||void 0===w?void 0:w.higherFare)||0,lowerFare:(null===(J=c.fareInfo)||void 0===J?void 0:J.originalFare)-(null===(B=c.fareInfo)||void 0===B?void 0:B.detectedFare)},ownerId:(null===(Q=c.ownerInfo)||void 0===Q?void 0:Q.id)||"",ownerName:(null===(L=c.ownerInfo)||void 0===L?void 0:L.name)||"",journeys:c.ticketInfo.journeys.map(m=>({arrivalTime:m.arrivalTime,departTime:m.departTime,startPoint:m.startPoint,endPoint:m.endPoint,duration:m.duration,leg:m.leg,segments:m.segments.map(A=>({departTime:A.departTime,arriveTime:A.arriveTime,endPoint:A.endPoint,startPoint:A.startPoint,flightNumber:A.flightNumber}))})),passengers:k||[],availableSlotInfo:{amountPerPax:c.availableSlotInfo.amountPerPax||0,currency:c.availableSlotInfo.currency||"",free:c.availableSlotInfo.free,percent:c.availableSlotInfo.percent||0,type:c.availableSlotInfo.type}}}))||[];this.listPnrOrder=[...this.listPnrOrder,...u],this.counterState(i.data.total),this.totalItem=i.data.total,this.listPnrOrder.length?(this.isEmptyResult=!1,this.isEmptyOrder=!1):(this.isEmptyResult=!0,this.isEmptyOrder=i.data.empty)}else this.listPnrOrder=[]},error:()=>{this.listPnrOrder=[]}})}counterState(t){this.listTab.forEach(i=>{var r,o;i.value===this.currentTab&&(i.counter=t),["CREATE","IN_PROCESS","IN_PROCESS_PRICE_UP"].includes(i.value)&&!i.counter&&(i.counter=(null===(r=this.orderTaskStatus)||void 0===r?void 0:r.inProcessTask)||0),"COMPLETED"===i.value&&!i.counter&&(i.counter=(null===(o=this.orderTaskStatus)||void 0===o?void 0:o.completeTask)||0)})}onChangeTab(t,i){t.value!==this.currentTab&&(i.scrollIntoView({behavior:"smooth",inline:"center"}),this.listPnrOrder=[],this.filterData.offset=1,this.listTab.forEach(r=>r.active=!1),t.active=!0,this.currentTab=t.value,this.searchPnrOrders())}onShowPnrOrder(t,i=!1,r=!1){this._router.navigate([`admin/pnr-order-detail/${t}`],{state:{isUpdated:i,isUpdatedFail:r}})}onEditPnrOrder(t){if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(z,{containerFullHeigh:!0,headerTitle:"Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u canh v\xe9",leftButtonIcon:"",rightButtonIcon:"close",data:{orderId:t}});i.containerInstance._rightButtonClick.subscribe(()=>{i.dismiss()}),i.afterDismissed().subscribe(r=>{"OK"===r&&(this.onShowPnrOrder(t,!0),this.listPnrOrder.forEach(o=>{o.orderId===t&&(o.canUpdate=!1)})),"ERROR"===r&&this.onShowPnrOrder(t,!1,!0)})}else this._modal.open(z,{orderId:t,sourceEvent:"CARD_MANAGE"}).afterClosed$.subscribe({next:r=>{"OK"===r.data&&(this.onShowPnrOrder(t,!0),this.listPnrOrder.forEach(o=>{o.orderId===t&&(o.canUpdate=!1)})),"ERROR"===r.data&&this.onShowPnrOrder(t,!1,!0)}})}onCancelPnrOrder(t,i){this._eventLogService.captureCancelDownFare({source:1}),this._mobileDetectService.isMobile()?(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,P.x)(()=>this.isSpinner=!1)).subscribe({next:r=>{"OK"===r.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${i}</strong> th\xe0nh c\xf4ng.`,sticky:!1}),this.searchPnrOrders()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${i}</strong> l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!0})}})):this._modal.open(D.V0,{title:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9 n\xe0y?",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u canh v\xe9 <strong>#${i}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:o=>{o.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,P.x)(()=>this.isSpinner=!1)).subscribe({next:l=>{"OK"===l.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u canh v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u canh v\xe9 ${i} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchPnrOrders()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9 ${i} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!0})}}))}})}onChange(t,i){switch(t){case"DETAIL":this.onShowPnrOrder(i.orderId);break;case"EDIT":this.onEditPnrOrder(i.orderId);break;case"CREATE_NEW":this.onCreateNewRegistration(i);break;case"CANCEL":this.onCancelPnrOrder(i.orderId,i.code);break;case"BOOKING_DETAIL":this.gotoBookingDetail(i.airline.toUpperCase(),i.fareInfo.originalPnr)}}gotoBookingDetail(t,i){this._router.navigate([`admin/booking-detail/${t}/${i}`])}onScrollDown(){this.filterData.offset*this.filterData.limit<this.totalItem&&(this.filterData.offset+=1,this.searchPnrOrders())}onRegisterPnrOrder(t){if(this._eventLogService.captureOpenFormDownFare({hasPNR:0,source:t?4:3}),this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(R.g,{headerTitle:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",containerFullHeigh:!0,data:{isSuggest:!0,sourceEvent:t?"EMPTY_STATE":"HEADER_MANAGE"}});i.containerInstance._rightButtonClick.subscribe(r=>{this.searchPnrOrders(),i.dismiss()})}else this._modal.open(R.g,{isSuggest:!0,sourceEvent:t?"EMPTY_STATE":"HEADER_MANAGE"}).afterClosed$.subscribe({next:()=>{this.searchPnrOrders()}})}onCreateNewRegistration(t){const i={airline:t.airline,pnr:t.fareInfo.originalPnr};this.isSpinner=!0,this._ticketLowFareService.canMonitorLowFare(i).pipe((0,P.x)(()=>this.isSpinner=!1)).subscribe({next:r=>{var o,l,u,c,_;if("OK"===r.status&&null!==(o=r.data.canMonitor)&&void 0!==o&&o.enable){const h={airline:t.airline,bookingCode:t.fareInfo.originalPnr,targetPrice:t.monitorType===v.$.PRICE?t.orderInfo.targetPrice:0,totalCharge:t.fareInfo.originalFare||0,monitorType:t.monitorType,monitors:t.monitorType===v.$.FARE&&(null===(l=t.orderInfo.monitors)||void 0===l?void 0:l.map(f=>({specifyFareClass:f.specifyFareClass,currentFareClass:f.currentFareClass,onlyCareLowerFare:f.onlyCareLowerFare})))||[],passengers:t.passengers,journeys:t.journeys.map(f=>({airline:t.airline,airlineName:t.airline,airlineLogo:t.airlineLogo,flightNumber:`${t.airline}${t.journeys[0].segments[0].flightNumber}`,startPoint:f.startPoint,endPoint:f.endPoint,startTime:new Date(f.departTime),endTime:new Date(f.arrivalTime),segments:f.segments.map(g=>({flightNumber:g.flightNumber,fareClass:"",duration:f.duration,shortDuration:(0,j.N)(f.duration)}))})),ownerId:t.ownerId,availableSlotInfo:t.availableSlotInfo};if(this._mobileDetectService.isMobile()){const f=this._bottomSheetService.open(R.g,{headerTitle:"T\u1ea1o y\xeau c\u1ea7u canh v\xe9 r\u1ebb",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",containerFullHeigh:!0,data:{registerOrderDetail:h,regenerate:!0,sourceEvent:"REGENERATE"}});f.containerInstance._rightButtonClick.subscribe(g=>f.dismiss())}else this._modal.open(R.g,{registerOrderDetail:h,regenerate:!0,sourceEvent:"REGENERATE"}).afterClosed$.subscribe({next:()=>{this.searchPnrOrders()}})}else if("OK"!==r.status||null!==(u=r.data.canMonitor)&&void 0!==u&&u.enable){const h=null===(_=null===(c=r.objectError)||void 0===c?void 0:c.errorDescription)||void 0===_?void 0:_.vi;if(this._mobileDetectService.isMobile()){const f=this._bottomSheetService.open(D.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:h,okText:"Canh v\xe9 kh\xe1c",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});f.containerInstance._rightButtonClick.subscribe(()=>{f.dismiss()}),f.afterDismissed().subscribe(g=>{f.dismiss(),g&&this.onRegisterPnrOrder(!1)})}else this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:h,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})}else{const h=r.data.canMonitor.reason.desc;if(this._mobileDetectService.isMobile()){const f=this._bottomSheetService.open(D.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:h,okText:"Canh v\xe9 kh\xe1c",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});f.containerInstance._rightButtonClick.subscribe(()=>{f.dismiss()}),f.afterDismissed().subscribe(g=>{f.dismiss(),g&&this.onRegisterPnrOrder(!1)})}else this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:h,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})}},error:()=>{if(this._mobileDetectService.isMobile()){const r=this._bottomSheetService.open(D.Q4,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",data:{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",body:`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${i.pnr}</strong> kh\xf4ng h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`,okText:"Canh v\xe9 kh\xe1c",cancelText:"\u0110\xf3ng",hasIcon:!0,status:"error"}});r.containerInstance._rightButtonClick.subscribe(()=>{r.dismiss()}),r.afterDismissed().subscribe(o=>{r.dismiss(),o&&this.onRegisterPnrOrder(!1)})}else this._modal.open(D.z5,{title:"M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng h\u1ee3p l\u1ec7",content:`M\xe3 \u0111\u1eb7t ch\u1ed7 <strong>${i.pnr}</strong> kh\xf4ng h\u1ee3p l\u1ec7 \u0111\u1ec3 t\u1ea1o y\xeau c\u1ea7u canh v\xe9. Vui l\xf2ng canh v\xe9 v\u1edbi m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c.`,status:"error",cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch",secondaryAction:!0})}})}openSearchBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._leftButtonClick.subscribe(i=>{this.btsSearchMobile.dismiss()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.KNP),e.Y36(K.oE),e.Y36(se.s),e.Y36(rr._),e.Y36(pe.G),e.Y36(e.sBO),e.Y36(N.$A),e.Y36(de.BX),e.Y36(fe.F0),e.Y36(ue.x),e.Y36(U.a2),e.Y36(ne.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manage-pnr-orders"]],hostAttrs:[1,"h-full"],standalone:!0,features:[e.jDz],decls:51,vars:21,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","bg-neutral-white"],[1,"flex","justify-between","items-center","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-1","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4","md:text-body-sm"],[1,"flex","justify-end","md:justify-between","items-center","gap-x-6","w-fit","md:w-full"],[4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center whitespace-nowrap",3,"disabled","disabledOneClick","click",4,"ngIf"],[1,"mt-[30px]","md:mt-4","px-4","py-3","rounded","flex","justify-between","gap-x-4","items-center","bg-neutral-gray-1","text-neutral-gray-6"],["note",""],[1,"flex","gap-x-2","justify-between","items-center"],["icon","circle_information","size","small"],[1,"text-body-md-short"],["icon","close","size","small",3,"click"],[1,"flex","flex-col","gap-y-5","mt-[30px]","md:mt-4"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"!w-[250px]","md:mr-4","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay","autocomplete","off",3,"ngModel","ngModelChange"],["tableSearchInput",""],[1,"hidden","md:block","md:!w-full","md:!max-w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange","focus"],[1,"flex","gap-x-4","items-center","md:hidden"],["class","flex items-center gap-x-2.5",4,"ngIf"],[1,"flex","items-center","gap-x-2.5"],[1,"text-express-md","whitespace-nowrap"],["textField","text","valueField","value",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["class","flex flex-col gap-y-[30px] md:gap-y-4","infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled",4,"ngIf"],["bottomSheetSearch",""],[3,"content","availableSlotData"],["availableSlotRef",""],[1,"flex","flex-col","justify-between","whitespace-nowrap","items-end","cursor-default","md:items-start"],[1,"text-express-sm","text-neutral-gray-4","flex","items-center","gap-x-2"],["icon","circle_help","size","small"],[1,"text-express-xl","md:text-express-lg"],["cf-button","","size","medium","color","primary-1",1,"justify-center","whitespace-nowrap",3,"disabled","disabledOneClick","click"],["icon","plus","size","small",1,"mr-2.5"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["textField","text","valueField","value",1,"!max-w-none","w-[115px]",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[3,"pnrOrderData","actionChange","retriveBookingCode"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[120px] flex flex-col justify-center items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[120px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],["src","assets/images/add-task.svg","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","gap-y-2","justify-between","items-center"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"rounded","border","border-neutral-gray-1"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"!max-w-none","w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange"],["class","!max-w-none w-full","textField","text","valueField","value",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange",4,"ngIf"],["textField","text","valueField","value","size","medium","placeholder","",1,"!max-w-none","w-full",3,"status","data","allowSearch","ngModel","ngModelChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"Canh v\xe9 r\u1ebb"),e.qZA(),e.TgZ(6,"div",5),e._uU(7," Y\xean t\xe2m gia t\u0103ng l\u1ee3i nhu\u1eadn v\xec ch\xfang t\xf4i lu\xf4n theo d\xf5i bi\u1ebfn \u0111\u1ed9ng v\u1ec1 gi\xe1 v\xe0 c\u1eadp nh\u1eadt t\u1ef1 \u0111\u1ed9ng cho b\u1ea1n "),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,or,4,2,"div",7),e.YNc(10,lr,4,2,"button",8),e.qZA()(),e.TgZ(11,"div",9,10)(13,"div",11),e._UZ(14,"cf-icon",12),e.TgZ(15,"div",13),e._uU(16,"Th\xf4ng tin hi\u1ec3n th\u1ecb kh\xf4ng ph\u1ea3i l\xe0 th\xf4ng tin c\u1eadp nh\u1eadt th\u1eddi gian th\u1ef1c. T\u1ed5ng chi ph\xed c\xf3 th\u1ec3 thay \u0111\u1ed5i sau \u0111\xf3."),e.qZA()(),e.TgZ(17,"cf-icon",14),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(12);return e.KtG(l.style.display="none")}),e.qZA()(),e.TgZ(18,"div",15)(19,"div",16),e.YNc(20,ur,8,13,"ng-container",17),e.qZA(),e.TgZ(21,"div",18)(22,"cf-input-group",19),e._UZ(23,"cf-icon",20),e.TgZ(24,"input",21,22),e.NdJ("ngModelChange",function(l){return i.filterData.searchText=l})("ngModelChange",function(l){return i.searchValueChanged$.next(l)}),e.qZA()(),e.TgZ(26,"cf-input-group",23),e._UZ(27,"cf-icon",20),e.TgZ(28,"input",24,22),e.NdJ("ngModelChange",function(l){return i.filterData.searchText=l})("focus",function(){e.CHM(r);const l=e.MAs(50);return e.KtG(i.openSearchBts(l))}),e.qZA()(),e.TgZ(30,"div",25),e.YNc(31,pr,4,6,"div",26),e.TgZ(32,"div",27)(33,"div",28),e._uU(34,"H\xe3ng bay:"),e.qZA(),e.TgZ(35,"cf-select",29),e.NdJ("ngModelChange",function(l){return i.filterData.airline=l})("selectedChange",function(){return i.onFilterChange()}),e.qZA()(),e.TgZ(36,"div",27)(37,"div",28),e._uU(38,"S\u1eafp x\u1ebfp:"),e.qZA(),e.TgZ(39,"cf-select",30),e.NdJ("ngModelChange",function(l){return i.filterData.sortByType=l})("selectedChange",function(){return i.onFilterChange()}),e.qZA()()()()()(),e.TgZ(40,"div",31)(41,"div",32)(42,"div",33)(43,"div",34)(44,"div",35),e.YNc(45,fr,2,7,"div",36),e.YNc(46,xr,3,2,"div",7),e.qZA(),e.YNc(47,vr,4,0,"div",7),e.qZA()()()()(),e.YNc(48,Tr,1,0,"cf-spinner",7),e.YNc(49,Or,20,12,"ng-template",null,37,e.W1O)}2&t&&(e.xp6(9),e.Q6J("ngIf",i.orderTaskStatus),e.xp6(1),e.Q6J("ngIf",i.canMonitorLowFareTicket),e.xp6(10),e.Q6J("ngForOf",i.listTab),e.xp6(4),e.Q6J("ngModel",i.filterData.searchText),e.xp6(4),e.Q6J("ngModel",i.filterData.searchText),e.xp6(3),e.Q6J("ngIf",i.viewListAgentForMonitorFare),e.xp6(4),e.Q6J("status","default")("data",i.airlineOptions)("placeholder","")("allowSearch",!0)("ngModel",i.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",i.orderbyOptions||e.DdM(20,le))("placeholder","")("allowSearch",!1)("ngModel",i.filterData.sortByType),e.xp6(6),e.Q6J("ngIf",!i.isEmptyResult&&i.listPnrOrder.length),e.xp6(1),e.Q6J("ngIf",i.isEmptyResult&&!i.isSkeleton),e.xp6(1),e.Q6J("ngIf",i.isSkeleton),e.xp6(1),e.Q6J("ngIf",i.isSpinner))},dependencies:[T.ez,T.mk,T.sg,T.O5,C.u5,C.Fj,C.JJ,C.On,q.N8,q.Xq,C.UX,Y.j$,Y.ND,Y.BN,d.AxE,d.Sm8,Ce.q,ee.Rq,ee.Ry,De.b,tr,Ee.IA,D.OR,U.DW,te._],encapsulation:2}),n})()}}]);