"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[8973],{47917:(Se,X,m)=>{m.d(X,{h:()=>p});var p=(()=>{return(l=p||(p={})).B2B_GMBR="B2B_GMBR",l.B2C_GMBR="B2C_GMBR",p;var l})()},48973:(Se,X,m)=>{m.r(X),m.d(X,{ApproveProductModalComponent:()=>Me,CreateDistributionTicketConfigComponent:()=>Bt,DistributionTicketConfigComponent:()=>It,EditProductComponent:()=>qr,HuntTicketAdvancedAddComponent:()=>Go,HuntTicketAdvancedDetailComponent:()=>_c,HuntTicketAdvancedEditComponent:()=>xe,HuntTicketAdvancedListComponent:()=>Cr,ManageApproveProductComponent:()=>kr,ManageProductComponent:()=>sn,ManualSaleProductComponent:()=>qe,ReceivingTicketInventoryComponent:()=>Ct,RetailOrderComponent:()=>Rr});var p=m(36895),l=m(24006),x=m(83700),ie=m(72853),u=m(72506),C=m(44143),W=m(17736),M=m(74713),Z=m(67460),B=m(76978),oe=m(88001),T=m(15439),w=m(28746),e=m(94650),ee=m(80529),q=m(54004),_=m(97582),f=m(87067),U=m(43429);let $e=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>Xe),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})(),Xe=(()=>{class i{}return(0,_.gn)([(0,U.D)(()=>We),(0,f.C)()],i.prototype,"productDetail",void 0),i})(),We=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"airline",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"arrival",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"bookingCode",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"channelDistribution",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"departure",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"flyScheduleTime",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"ownerName",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"paxCount",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"productBasePrice",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"productId",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"timeHoldBooking",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"state",void 0),i})();var Ie=m(99251);let et=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>Ie.eG),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})(),tt=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>nt),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})();class nt{}let it=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>ot),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})();class ot{}let we=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>at),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})(),at=(()=>{class i{}return(0,_.gn)([(0,U.D)(()=>Ie.eG),(0,f.C)()],i.prototype,"bookingInfo",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"channelDistribution",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"distributionFee",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"productId",void 0),(0,_.gn)([(0,U.D)(()=>rt),(0,f.C)()],i.prototype,"saleInfo",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"source",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"state",void 0),i})(),rt=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"agentName",void 0),(0,_.gn)([(0,U.D)(()=>ct),(0,f.C)()],i.prototype,"newPnrInfo",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"revenue",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"salesChannel",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"sellSourceType",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"time",void 0),i})(),ct=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"airline",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"pnr",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"supplier",void 0),i})();var P=m(50494);const Q={headers:new ee.WM({"Content-Type":"application/json"})};let ae=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}manageProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/manage-product",JSON.stringify(t),Q).pipe((0,q.U)(n=>(0,P.yE)($e,n,{excludeExtraneousValues:!0})))}shortRetrieveTicket(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/retrieve-ticket",JSON.stringify(t),Q).pipe((0,q.U)(n=>(0,P.yE)(et,n,{excludeExtraneousValues:!0})))}approveProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/approved-product",JSON.stringify(t),Q).pipe((0,q.U)(n=>(0,P.yE)(tt,n,{excludeExtraneousValues:!0})))}importManualProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/import-product-manual",JSON.stringify(t),Q).pipe((0,q.U)(n=>(0,P.yE)(it,n,{excludeExtraneousValues:!0})))}getProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/get-product-detail",JSON.stringify({productId:t}),Q).pipe((0,q.U)(n=>(0,P.yE)(we,n,{excludeExtraneousValues:!0})))}updateProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/update-product",JSON.stringify(t),Q).pipe((0,q.U)(n=>(0,P.yE)(we,n,{excludeExtraneousValues:!0})))}distributionConfigFee(t){return this.http.post(this.appConfig.apiUrlIS+"distribution/config/fee",JSON.stringify(t),Q)}updateDistributionConfigFee(t){return this.http.post(this.appConfig.apiUrlIS+"distribution/config/update-fee",JSON.stringify(t),Q)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ee.eN),e.LFG(oe.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var O=m(82761),R=m(62331),j=m(62733);function st(i,r){1&i&&e._UZ(0,"cf-hint",18),2&i&&e.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function lt(i,r){1&i&&e._UZ(0,"cf-hint",18),2&i&&e.Q6J("hint","Ch\u01b0a nh\u1eadp booking code")}function ut(i,r){1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",24),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",27),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function dt(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i t\xecm ki\u1ebfm!"),e.qZA()(),e.BQk())}function pt(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function _t(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function ft(i,r){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",28),e.qZA(),e.YNc(6,dt,8,0,"ng-container",17),e.YNc(7,pt,6,0,"ng-container",17),e.YNc(8,_t,6,0,"ng-container",17),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function mt(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td",79),e._uU(2),e.qZA(),e.TgZ(3,"td",80),e._uU(4),e.qZA(),e.TgZ(5,"td",81),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",81),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",82)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}const gt=function(){return[]};function ht(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div")(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(7,"div",36)(8,"div",37)(9,"div",38)(10,"div"),e._UZ(11,"img",39),e.qZA(),e.TgZ(12,"div",40)(13,"span",41),e._uU(14),e.qZA(),e.TgZ(15,"span",42),e._uU(16),e.qZA()(),e.TgZ(17,"div",43),e._uU(18),e.qZA()(),e._UZ(19,"div",44),e.TgZ(20,"div",45)(21,"div",46)(22,"span"),e._uU(23),e.qZA(),e._UZ(24,"cf-icon",47),e.TgZ(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"div",48),e._UZ(28,"cf-icon",49),e.TgZ(29,"span",50),e._uU(30),e.ALo(31,"date"),e.qZA()()(),e._UZ(32,"div",44),e.TgZ(33,"div",51)(34,"div",52),e._uU(35,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(36,"div",2),e._uU(37),e.qZA()(),e._UZ(38,"div",44),e.TgZ(39,"div",51)(40,"div",52),e._uU(41,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(42,"div",53),e._UZ(43,"cf-icon",54),e.TgZ(44,"div",55)(45,"label",56),e._uU(46),e.qZA()()()()()(),e.TgZ(47,"div",57)(48,"div",58),e._UZ(49,"cf-icon",59),e._uU(50," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(51,"div",60)(52,"div")(53,"table",61)(54,"thead")(55,"tr",62)(56,"th",63),e._uU(57,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(58,"th",64),e._uU(59,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(60,"th",65),e._uU(61,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(62,"th",65),e._uU(63,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(64,"th",66),e._uU(65,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(66,"tbody"),e.YNc(67,mt,15,11,"tr",67),e.qZA()(),e._UZ(68,"hr",68),e.qZA(),e.TgZ(69,"div",69)(70,"div",70)(71,"div",71),e._uU(72,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(73,"div",72)(74,"span"),e._uU(75),e.ALo(76,"number"),e.qZA()()(),e.TgZ(77,"div",70)(78,"div",71),e._uU(79,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(80,"div",72),e._uU(81),e.ALo(82,"number"),e.qZA()(),e.TgZ(83,"div",70)(84,"div",71),e._uU(85,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(86,"div",73)(87,"span"),e._uU(88),e.ALo(89,"number"),e.qZA()()()()()()(),e.TgZ(90,"div")(91,"div",33),e._UZ(92,"div",34),e.TgZ(93,"div",35),e._uU(94,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(95,"div",36)(96,"cf-multi-select",74),e.NdJ("valueChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeChannel(o))}),e.TgZ(97,"label",75),e._uU(98," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()()(),e.TgZ(99,"div",76)(100,"button",77),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCreateDistributionTicketConfig())}),e._uU(101," C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i "),e.qZA(),e.TgZ(102,"button",78),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(103," Nh\u1eadp kho "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(11),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("","VN"," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq("",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(31,21,t.bookingDetail.startTime,"HH:mm - dd/MM/yyyy"),")"),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(8),e.hij(" ",e.lcZ(76,24,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij("",e.lcZ(82,26,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(89,28,t.priceDetail.totalPrice)," \u0111"),e.xp6(8),e.Q6J("status","default")("data",t.channelDistributionOption||e.DdM(30,gt))("allowSearch",!0)("formControl",t.channelControl)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230)}}function vt(i,r){1&i&&(e.TgZ(0,"div",83)(1,"div",84),e._UZ(2,"ticket-item-skeleton",85)(3,"ticket-item-skeleton",85)(4,"ticket-item-skeleton",85)(5,"ticket-item-skeleton",85),e.qZA()())}function xt(i,r){1&i&&e._UZ(0,"cf-spinner")}const Tt=function(i){return{"opacity-50 pointer-events-none cursor-default":i}};let Ct=(()=>{class i{constructor(t,n,o,a,c,s){this._inventoryService=o,this._router=a,this._toastService=c,this._flightDataService=s,this.airlineDefault="VJ",this.channelControl=new l.NI(["ALL"],l.kI.required),this.airlineSelectOption=[],this.supplierSelectOption=[],this.channelDistributionOption=[],this.isLoading=!1,this.isLoadingInventory=!1,this.stateMode="search_default",t.registerIcons([u.Ffn,u.okA,u.llu]),this.searchForm=n.group({airline:[this.airlineDefault],supplier:[""],searchText:["",l.kI.required]}),this.isDisableSupplier="VN"!==this.airlineDefault}ngOnInit(){this.airlineSelectOption=[{text:"Vietnam Airlines",value:"VN"},{text:"Bamboo Airways",value:"QH"},{text:"Vietjet Air",value:"VJ"}],this.supplierSelectOption=[...Object.entries(oe.f$).map(([t,n])=>({text:t,value:n}))],this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL",selected:!1},{text:"Flychills",value:"B2B_GMBR",selected:!1},{text:"GMBR",value:"B2C_GMBR",selected:!1}]}onAirlineChange(t){const n=this.searchForm.get("supplier");n.setValue(""),"VN"===t.value?(this.isDisableSupplier=!1,n.setValidators([l.kI.required]),n.updateValueAndValidity()):(this.isDisableSupplier=!0,n.setValidators(null),n.updateValueAndValidity())}onSearch(){var t;if(this.searchForm.markAllAsTouched(),this.searchForm.invalid)return;const n=this.searchForm.value,o={airline:n.airline,bookingCode:null===(t=n.searchText)||void 0===t?void 0:t.toUpperCase(),supplier:n.supplier};console.log(o),this.isLoading=!0,this._inventoryService.shortRetrieveTicket(o).pipe((0,w.x)(()=>this.isLoading=!1)).subscribe({next:a=>{console.log(a),"OK"===a.status&&"BOOKED"===a.data.state?(this.stateMode="has_value",this.searchForm.get("searchText").reset(),this.initBookingDetail(a.data),this.initPriceDetail(a.data)):this.stateMode="not_found"},error:()=>{this.stateMode="not_found"}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:T(t.journeys[0].departure.localTime).toDate(),endTime:T(t.journeys[0].arrival.localTimelocalTime).toDate(),statusText:t.getStatusText(),flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(n=>({index:n.index,key:n.key,name:"",birthday:n.birthday,lastName:n.lastName,firstName:n.firstName,parentKey:n.parentKey,gender:n.genderEnum,type:n.type}))}}initPriceDetail(t){const n=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.totalFareCharge,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:n.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))}}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}onSubmit(){var t;let o="";o=(null===(t=this.channelControl.value)||void 0===t?void 0:t.some(c=>"ALL"===c))?this.channelDistributionOption.filter(c=>"ALL"!==c.value).map(c=>c.value).join(","):this.channelControl.value.join(",");const a={channelDistribution:o,data:{airline:this.bookingDetail.airline||"",bookingCode:this.bookingDetail.bookingCode||"",supplier:this.bookingDetail.supplier||""}};console.log(a),this.isLoadingInventory=!0,this._inventoryService.importManualProduct(a).pipe((0,w.x)(()=>this.isLoadingInventory=!1)).subscribe({next:c=>{var s,d;if("OK"===c.status)this.searchForm.reset(),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\xe0nh c\xf4ng!",sticky:!1}),this.stateMode="search_default";else{const g=(null===(d=null===(s=c.objectError)||void 0===s?void 0:s.errorDescription)||void 0===d?void 0:d.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:g,sticky:!0})}},error:c=>{var s,d,g;if(c.error&&"FAILED"===c.error.status){const h=(null===(g=null===(d=null===(s=c.error)||void 0===s?void 0:s.objectError)||void 0===d?void 0:d.errorDescription)||void 0===g?void 0:g.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:h,sticky:!0})}else this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!",sticky:!0})}})}onChangeChannel(t){console.log(t),console.log(this.channelControl)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(l.qu),e.Y36(ae),e.Y36(O.F0),e.Y36(R.BX),e.Y36(j.G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["receiving-ticket-inventory"]],standalone:!0,features:[e.jDz],decls:22,vars:21,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start",3,"formGroup","ngSubmit"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],["textField","text","valueField","value","size","medium","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p",1,"w-[180px]",3,"status","formControl","data","allowSearch","ngClass"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp booking code",3,"formControl"],["tableSearchInput",""],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"min-w-[750px]","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3","flex","items-center","gap-x-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"text-neutral-gray-1","w-full","mb-4"],[1,"flex","flex-col","items-end","gap-[10px]","pr-3","pb-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"min-w-[120px]","text-end","text-heading-md","text-primary-1-4"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black"],[1,"flex","justify-end","items-center","gap-x-2","pb-6"],["cf-button","","type","secondary","size","medium",1,"bg-neutral-white",3,"click"],["cf-button","","size","medium",3,"click"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return n.onSearch()}),e.TgZ(5,"cf-select",4),e.NdJ("selectedChange",function(a){return n.onAirlineChange(a)}),e.qZA(),e.TgZ(6,"cf-select",5),e.YNc(7,st,1,1,"cf-hint",6),e.qZA(),e.TgZ(8,"cf-input-group",7),e._UZ(9,"cf-icon",8)(10,"input",9,10),e.YNc(12,lt,1,1,"cf-hint",6),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return n.onSearch()}),e._UZ(14,"cf-icon",12),e._uU(15," Retrieve "),e.qZA()()(),e.TgZ(16,"div",13),e.YNc(17,ut,13,0,"div",14),e.YNc(18,ft,9,3,"div",14),e.YNc(19,ht,104,31,"div",15),e.YNc(20,vt,6,0,"div",16),e.qZA()(),e.YNc(21,xt,1,0,"cf-spinner",17)),2&t&&(e.xp6(4),e.Q6J("formGroup",n.searchForm),e.xp6(1),e.Q6J("formControl",n.searchForm.controls.airline)("data",n.airlineSelectOption)("allowSearch",!1),e.xp6(1),e.Q6J("status",n.searchForm.controls.supplier.invalid&&(n.searchForm.controls.supplier.dirty||n.searchForm.controls.supplier.touched)?"error":"default")("formControl",n.searchForm.controls.supplier)("data",n.supplierSelectOption)("allowSearch",!1)("ngClass",e.VKq(19,Tt,n.isDisableSupplier)),e.xp6(1),e.Q6J("ngIf",(null==n.searchForm.controls.supplier.errors?null:n.searchForm.controls.supplier.errors.required)&&(n.searchForm.controls.supplier.dirty||n.searchForm.controls.supplier.touched)),e.xp6(1),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(2),e.Q6J("ngIf",(null==n.searchForm.controls.searchText.errors?null:n.searchForm.controls.searchText.errors.required)&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("ngIf",!n.isLoading&&"search_default"===n.stateMode),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&("not_found"===n.stateMode||"cancelled"===n.stateMode||"issued"===n.stateMode)),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"has_value"===n.stateMode),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoadingInventory))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,C.j$,C.ND,C.BN,u.AxE,u.Sm8,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.UX,l.oH,l.sg,M.q,x.N8,x.Xq,ie.m,B.IA,Z.OR,W.U],encapsulation:2}),i})();var ue=m(48373),J=m(88516),Oe=m(28050);function yt(i,r){if(1&i&&(e.TgZ(0,"tr",31)(1,"td",32),e._UZ(2,"img",33),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij(" ",t.bookingCode||"-"," ")}}const Et=function(){return{num:25}},At=function(){return{num:50}},bt=function(){return{num:75}},Zt=function(){return{num:100}},Dt=function(i,r,t,n){return[i,r,t,n]};function Ft(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19),e._uU(3,"Danh s\xe1ch c\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(4,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCreateDistributionTicketConfig())}),e._UZ(5,"cf-icon",21),e._uU(6," T\u1ea1o c\xe0i \u0111\u1eb7t m\u1edbi "),e.qZA()(),e.TgZ(7,"cf-table",22,23)(9,"thead",24)(10,"th",25),e._uU(11,"H\xe3ng bay"),e.qZA(),e.TgZ(12,"th",26),e._uU(13,"\u0110i\u1ec3m \u0111i"),e.qZA(),e.TgZ(14,"th",26),e._uU(15,"\u0110i\u1ec3m \u0111\u1ebfn"),e.qZA(),e.TgZ(16,"th",26),e._uU(17,"Ng\xe0y gi\u1edd bay"),e.qZA(),e.TgZ(18,"th",26),e._uU(19,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(20,"th",26),e._uU(21,"Ng\u01b0\u1eddi l\u1edbn"),e.qZA(),e.TgZ(22,"th",26),e._uU(23,"Tr\u1ebb em"),e.qZA(),e.TgZ(24,"th",26),e._uU(25,"Em b\xe9"),e.qZA(),e.TgZ(26,"th",26),e._uU(27,"Ng\xe0y t\u1ea1o"),e.qZA(),e.TgZ(28,"th",26),e._uU(29,"Ch\u1ee9c n\u0103ng"),e.qZA()(),e.TgZ(30,"tbody")(31,"tr")(32,"td",27)(33,"cf-input-group",28),e._UZ(34,"input",29),e.qZA()(),e.TgZ(35,"td",27)(36,"cf-input-group",28),e._UZ(37,"input",29),e.qZA()(),e.TgZ(38,"td",27)(39,"cf-input-group",28),e._UZ(40,"input",29),e.qZA()(),e.TgZ(41,"td",27)(42,"cf-input-group",28),e._UZ(43,"input",29),e.qZA()(),e.TgZ(44,"td",27)(45,"cf-input-group",28),e._UZ(46,"input",29),e.qZA()(),e.TgZ(47,"td",27)(48,"cf-input-group",28),e._UZ(49,"input",29),e.qZA()(),e.TgZ(50,"td",27)(51,"cf-input-group",28),e._UZ(52,"input",29),e.qZA()(),e.TgZ(53,"td",27)(54,"cf-input-group",28),e._UZ(55,"input",29),e.qZA()(),e.TgZ(56,"td",27)(57,"cf-input-group",28),e._UZ(58,"input",29),e.qZA()()(),e.YNc(59,yt,5,2,"ng-template",30),e.qZA()()()}if(2&i){const t=e.MAs(8),n=e.oxw();e.xp6(7),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("pageSizeList",e.l5B(10,Dt,e.DdM(6,Et),e.DdM(7,At),e.DdM(8,bt),e.DdM(9,Zt)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(52),e.Q6J("ngForOf",t.partOfdata)}}function kt(i,r){1&i&&(e.TgZ(0,"div",35)(1,"div",36)(2,"div"),e._UZ(3,"img",37),e.qZA(),e.TgZ(4,"div",38)(5,"div",39),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",40)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u0111i\u1ec1u ki\u1ec7n t\xecm ki\u1ebfm."),e.qZA()()()()())}function St(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36)(2,"div"),e._UZ(3,"img",41),e.qZA(),e.TgZ(4,"div",38)(5,"div",39),e._uU(6,"C\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",42),e._uU(8,"Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb danh s\xe1ch c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!"),e.qZA()(),e.TgZ(9,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSearch())}),e._UZ(10,"cf-icon",43),e._uU(11," Th\u1eed l\u1ea1i "),e.qZA()()()}}const Ue=function(){return[]};let It=(()=>{class i{constructor(t,n,o,a){this.calendar=t,this._fb=n,this._router=o,this._discountFeeService=a,this.dateRangeStr="",this.accountOptions=[],this.state="SUCCESS",this.pageSize=25,this.listOfData=[],this.airlineOptions=[],this.airportOptions=[],this.searchChange=(c,s)=>s,this.sortChange=(c,s)=>s,this.currentDate=t.getToday(),this.getDiscountFeeInfo()}ngOnInit(){this.searchForm=this._fb.group({searchDate:[null,l.kI.required],toDate:[null,l.kI.required],startPointDetails:[""],endPointDetails:[""],userId:[""]})}getDiscountFeeInfo(){this._discountFeeService.getDiscountFeeInfoConfig().subscribe({next:t=>{if(console.log(t),"OK"===t.status&&t.data){this.airlineOptions=t.data.airlineList.map(a=>({value:a.code,text:a.name}));const n=t.data.airportDomesticInfoList.map(a=>({code:a.code,name:a.name,city:a.city,nationalName:a.nationalName,displayName:`${a.code} - ${a.city}`})),o=t.data.airportInfoList.map(a=>({code:a.code,name:a.name,city:a.city,nationalName:a.nationalName,displayName:`${a.code} - ${a.city}`}));this.airportOptions=[{code:"ALL",name:"T\u1ea5t c\u1ea3 s\xe2n bay",city:"",nationalName:"",displayName:"T\u1ea5t c\u1ea3 s\xe2n bay"},...n,...o]}}})}changeValue(){}onSearch(){}onDateSelection(t,n,o,a){}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.jH),e.Y36(l.qu),e.Y36(O.F0),e.Y36(Oe.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:25,vars:24,consts:[[1,"py-4","px-[30px]","bg-white","w-full","md:hidden","flex","flex-col","gap-y-4"],[1,"flex"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn h\xe3ng bay",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],["cfLabel",""],[1,""],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel","",1,"text-espressive-sm","text-black"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y ho\u1eb7c b\u1ecf tr\u1ed1ng \u0111\u1ec3 kh\xf4ng gi\u1edbi h\u1ea1n",1,"py-[7px]",3,"minDate","secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],[1,"flex","gap-x-4","items-end"],["textField","name","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","ngModel","maxHeight","ngModelChange"],["cfLabel","",1,"text-express-sm","text-black"],["cf-button","","type","secondary","size","medium",1,"justify-center","min-w-[150px]","!py-2.5",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"py-4","px-[30px]","rounded-lg","md:py-4","md:pr-0","md:pl-4","md:flex-auto","md:overflow-y-hidden"],["class","bg-neutral-white rounded-lg shadow-cf-md md:h-full",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-md md:mr-4",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:h-full"],[1,"p-4","flex","justify-between","items-center","md:hidden"],[1,"text-heading-sm"],["cf-button","","size","medium",3,"click"],["icon","export","size","small",1,"mr-2.5"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap"],["cf-th",""],["cf-td","",1,"py-2","px-1","!bg-neutral-white"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc"],["ngFor","",3,"ngForOf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],[1,"w-12","h-6","object-contain",3,"src"],[1,"py-2","px-3","text-body-sm"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:mr-4"],[1,"flex","flex-col","gap-y-8","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"],["src","assets/images/error.svg","alt",""],[1,"text-body-md-short"],["cfHeadIcon","","icon","refresh","size","small",1,"mr-2"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"cf-select",2)(3,"label",3),e._uU(4,"H\xe3ng bay"),e.qZA()(),e.TgZ(5,"cf-input-group",4),e._UZ(6,"cf-icon",5),e.TgZ(7,"label",6),e._uU(8," Ng\xe0y gi\u1edd bay "),e.qZA(),e.TgZ(9,"input",7,8),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(c.close())}),e.qZA()()(),e.TgZ(11,"div",9)(12,"cf-multi-select",10),e.NdJ("ngModelChange",function(c){return n.searchForm.startPointDetails=c}),e.TgZ(13,"label",11),e._uU(14," \u0110i\u1ec3m \u0111i "),e.qZA()(),e.TgZ(15,"cf-multi-select",10),e.NdJ("ngModelChange",function(c){return n.searchForm.endPointDetails=c}),e.TgZ(16,"label",11),e._uU(17," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA()(),e.TgZ(18,"button",12),e.NdJ("click",function(){return n.onSearch()}),e._UZ(19,"cf-icon",13),e._uU(20," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(21,"div",14),e.YNc(22,Ft,60,15,"div",15),e.YNc(23,kt,12,0,"div",16),e.YNc(24,St,12,0,"div",16),e.qZA()}2&t&&(e.xp6(2),e.Q6J("formControl",n.searchForm.controls.userId)("data",n.accountOptions)("allowSearch",!0),e.xp6(7),e.Q6J("minDate",n.currentDate)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.searchForm.controls.searchDate),e.xp6(3),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(22,Ue))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay ho\u1eb7c b\u1ecf tr\u1ed1ng cho t\u1ea5t c\u1ea3")("ngModel",n.searchForm.startPointDetails)("maxHeight",230),e.xp6(3),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(23,Ue))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay ho\u1eb7c b\u1ecf tr\u1ed1ng cho t\u1ea5t c\u1ea3")("ngModel",n.searchForm.endPointDetails)("maxHeight",230),e.xp6(7),e.Q6J("ngIf","SUCCESS"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(1),e.Q6J("ngIf","ERROR"===n.state))},dependencies:[p.ez,p.sg,p.O5,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,C.j$,C.ND,C.BN,u.AxE,u.Sm8,M.q,x.N8,x.Xq,ue.rC,ue.E_,ue.zs,ue.qS,W.U,J.Cs],encapsulation:2}),i})();var Ce=m(27898);const wt={B2BGMBR:{adt:1e5,chd:1e5,inf:5e4},B2CGMBR:{adt:2e5,chd:2e5,inf:1e5}};var F=m(47917),re=m(34541),Ne=m(50633);function Ot(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1," T\u1ea1o c\xe0i \u0111\u1eb7t "),e.qZA()}}function Ut(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1," C\u1eadp nh\u1eadt "),e.qZA()}}function Nt(i,r){if(1&i&&(e.TgZ(0,"div",34),e._UZ(1,"div",35),e.ALo(2,"highlighter"),e._UZ(3,"div",36),e.ALo(4,"highlighter"),e.qZA()),2&i){const t=e.oxw(),n=t.item,o=t.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,n.city+", "+n.nationalName,o.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,n.code+" - "+n.name,o.text),e.oJD)}}function qt(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",35),e.ALo(2,"highlighter"),e.qZA()),2&i){const t=e.oxw(),n=t.item,o=t.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,1,n.name,o.text),e.oJD)}}function Mt(i,r){if(1&i&&(e.YNc(0,Nt,5,8,"div",32),e.YNc(1,qt,3,4,"div",33)),2&i){const t=r.item;e.Q6J("ngIf","ALL"!==t.code),e.xp6(1),e.Q6J("ngIf","ALL"===t.code)}}const ce=function(){return[]};let Bt=(()=>{class i{constructor(t,n,o,a,c,s){this.calendar=t,this._router=n,this._fb=o,this._inventoryService=a,this._discountFeeService=c,this._toastService=s,this.channelDistributionOption=[],this.airlineOptions=[],this.airportOptions=[],this.fareClassQH=[],this.fareClassVJ=[],this.fareClassVN=[],this.fareClassOptions=[],this.isDisabledFareClass=!0,this.isEditConfig=!1,this.DISTRIBUTION_TICKET_FEE_CONST=wt,this.CHANNEL_DISTRIBUTION_ENUM=F.h,this.positionSearchCustom=(d,g)=>{const h=this.removeAccents(d.code.toLowerCase()),v=this.removeAccents(d.name.toLowerCase()),y=this.removeAccents(d.city.toLowerCase()),A=this.removeAccents(d.nationalName.toLowerCase()),E=this.removeAccents(g.toLowerCase());return h.includes(E)||v.includes(E)||y.includes(E)||A.includes(E)},this.currentDateIssue=t.getToday()}ngOnInit(){this.getDiscountFeeInfo(),this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL"},{text:"Flychills",value:F.h.B2B_GMBR},{text:"GMBR",value:F.h.B2C_GMBR}],this.formGroup=this._fb.group({channel:[F.h.B2B_GMBR],fareClass:[""],startPointDetails:[""],endPointDetails:[""],flightTimeFrom:[""],flightTimeTo:[""],adtFee:[0,l.kI.required],chdFee:[0,l.kI.required],infFee:[0,l.kI.required]})}getDiscountFeeInfo(){this._discountFeeService.getDiscountFeeInfoConfig().subscribe({next:t=>{var n,o,a;if(console.log(t),"OK"===t.status&&t.data){this.airlineOptions=t.data.airlineList.map(d=>({value:d.code,text:d.name}));const c=t.data.airportDomesticInfoList.map(d=>({code:d.code,name:d.name,city:d.city,nationalName:d.nationalName,displayName:`${d.code} - ${d.city}`})),s=t.data.airportInfoList.map(d=>({code:d.code,name:d.name,city:d.city,nationalName:d.nationalName,displayName:`${d.code} - ${d.city}`}));this.airportOptions=[{code:"ALL",name:"T\u1ea5t c\u1ea3 s\xe2n bay",city:"",nationalName:"",displayName:"T\u1ea5t c\u1ea3 s\xe2n bay"},...c,...s],this.fareClassQH=null===(n=t.data.fareClassList)||void 0===n?void 0:n.fareClassQH.map(d=>({value:d.code,text:d.code})),this.fareClassVJ=null===(o=t.data.fareClassList)||void 0===o?void 0:o.fareClassVJ.map(d=>({value:d.code,text:d.code})),this.fareClassVN=null===(a=t.data.fareClassList)||void 0===a?void 0:a.fareClassVN.map(d=>({value:d.code,text:d.code}))}}})}onSelectedAirline(t){this.getFareClass(t),console.log(this.fareClassOptions)}getFareClass(t){switch(t){case"VN":this.fareClassOptions=this.fareClassVN.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;case"VJ":this.fareClassOptions=this.fareClassVJ.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;case"QH":this.fareClassOptions=this.fareClassQH.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;default:this.fareClassOptions=[],this.isDisabledFareClass=!0}this.fareClassOptions.unshift({value:"ALL",text:"T\u1ea5t c\u1ea3 h\u1ea1ng \u0111\u1eb7t ch\u1ed7"})}onFareClassChange(t){"ALL"===t.code?(this.formGroup.get("fareClass").setValue(null),this.formGroup.get("fareClass").setValue(["ALL"])):this.formGroup.get("fareClass").value.includes("ALL")&&(this.formGroup.get("fareClass").setValue(null),this.formGroup.get("fareClass").setValue([t.code]))}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}checkedChange(t){let n={adt:0,chd:0,inf:0};t&&(this.formGroup.value.channel===F.h.B2B_GMBR&&(n=this.DISTRIBUTION_TICKET_FEE_CONST.B2BGMBR),this.formGroup.value.channel===F.h.B2C_GMBR&&(n=this.DISTRIBUTION_TICKET_FEE_CONST.B2CGMBR)),this.formGroup.patchValue({adtFee:n.adt,chdFee:n.chd,infFee:n.inf})}onPointChange(t,n){"ALL"===t.code?(this.formGroup.get(n).setValue(null),this.formGroup.get(n).setValue(["ALL"])):this.formGroup.get(n).value.includes("ALL")&&(this.formGroup.get(n).setValue(null),this.formGroup.get(n).setValue([t.code]))}onSelectedChange(t,n){t||this.formGroup.get(n).setValue(null)}onChannelChange(t){"ALL"===t.value?(this.formGroup.get("channel").setValue(null),this.formGroup.get("channel").setValue(["ALL"])):this.formGroup.get("channel").value.includes("ALL")&&(this.formGroup.get("channel").setValue(null),this.formGroup.get("channel").setValue([t.value]))}onCancel(){this._router.navigate(["admin/distribution-ticket-config"])}onSubmit(){var t,n,o,a;const c=this.formGroup.value;console.log(c);const s={condition:{airline:"VJ",startPoint:null===(t=c.startPointDetails)||void 0===t?void 0:t.join(";"),endPoint:null===(n=c.endPointDetails)||void 0===n?void 0:n.join(";"),fareClass:null===(o=c.fareClass)||void 0===o?void 0:o.join(";"),flightTimeFrom:c.flightTimeFrom?T(c.flightTimeFrom).format("YYYY-MM-DD"):"",flightTimeTo:c.flightTimeTo?T(c.flightTimeTo).format("YYYY-MM-DD"):""},feeDetail:{channel:null===(a=c.channel)||void 0===a?void 0:a.join(";"),adtFee:c.adtFee,chdFee:c.chdFee,infFee:c.infFee},supplierInfo:{supplierCode:"GMBR",supplierName:"",supplierType:F.h.B2B_GMBR}};this._inventoryService.distributionConfigFee(s).subscribe({next:d=>{var g,h;if("OK"===d.status)this._toastService.add({severity:"success",summary:"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\xe0nh c\xf4ng",detail:"",sticky:!1});else{const v=(null===(h=null===(g=d.objectError)||void 0===g?void 0:g.errorDescription)||void 0===h?void 0:h.vi)||"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:v,detail:"",sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i sau!",detail:"",sticky:!0})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.jH),e.Y36(O.F0),e.Y36(l.qu),e.Y36(ae),e.Y36(Oe.O),e.Y36(R.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["create-distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:69,vars:63,consts:[[1,"flex","justify-center","py-4","px-[30px]","md:hidden"],[1,"w-[1000px]","max-w-[1000px]","flex","flex-col","gap-y-8"],[1,"flex","gap-x-[20px]","mb-4"],[1,"w-1","bg-[#fcb40a]"],[1,"text-heading-md"],[1,"p-6","bg-neutral-white","rounded-lg","shadow-cf-md","flex","flex-col","gap-y-4"],[1,"flex","gap-x-4"],[1,"flex","flex-col","grow","gap-y-4"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"data","placeholder","allowSearch","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"disabled","status","data","allowSearch","placeholder","formControl","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],[1,"flex","justify-between","gap-x-4"],["textField","displayName","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","customSearch","formControl","maxHeight","optionTmp","valueChange","selectedChange"],["textField","displayName","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","formControl","maxHeight","optionTmp","selectedChange","valueChange"],[1,"flex","gap-x-3"],[1,"grow-[400]","!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel","",1,"text-espressive-sm","text-black"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y ho\u1eb7c b\u1ecf tr\u1ed1ng \u0111\u1ec3 kh\xf4ng gi\u1edbi h\u1ea1n",1,"py-[7px]",3,"minDate","secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["dateTo","cfDatepicker"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],[1,"flex","justify-between","items-center","gap-x-4"],[1,"grow-[400]","!w-full"],["size","medium",3,"formControl","placeholder"],["size","medium",1,"flex",3,"checked","checkChange"],[1,"flex","justify-end","items-center","gap-x-4"],["cf-button","","size","medium","type","secondary",1,"bg-white",3,"click"],["cf-button","","size","medium",3,"click",4,"ngIf"],["optionTmp",""],["cf-button","","size","medium",3,"click"],["class","flex flex-col",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),e._UZ(4,"div",3),e.TgZ(5,"div",4),e._uU(6,"\u0110i\u1ec1u ki\u1ec7n ph\xe2n ph\u1ed1i"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"cf-select",8),e.NdJ("selectedChange",function(c){return n.onSelectedAirline(c.value)}),e.TgZ(11,"label",9),e._uU(12," H\xe3ng bay khai th\xe1c "),e.qZA()(),e.TgZ(13,"cf-multi-select",10),e.NdJ("valueChange",function(c){return n.onFareClassChange(c)}),e.TgZ(14,"label",11),e._uU(15," H\u1ea1ng \u0111\u1eb7t ch\u1ed7 "),e.qZA()(),e.TgZ(16,"div",12)(17,"cf-multi-select",13),e.NdJ("valueChange",function(c){return n.onPointChange(c,"startPointDetails")})("selectedChange",function(c){return n.onSelectedChange(c,"startPointDetails")}),e.TgZ(18,"label",11),e._uU(19," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA()(),e.TgZ(20,"cf-multi-select",14),e.NdJ("selectedChange",function(c){return n.onSelectedChange(c,"endPointDetails")})("valueChange",function(c){return n.onPointChange(c,"endPointDetails")}),e.TgZ(21,"label",11),e._uU(22," \u0110i\u1ec3m k\u1ebft th\xfac "),e.qZA()()(),e.TgZ(23,"div",15)(24,"cf-input-group",16),e._UZ(25,"cf-icon",17),e.TgZ(26,"label",18),e._uU(27," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(28,"input",19,20),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(29);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(29);return e.KtG(c.close())}),e.qZA()(),e.TgZ(30,"cf-input-group",16),e._UZ(31,"cf-icon",17),e.TgZ(32,"label",18),e._uU(33," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(34,"input",19,21),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(35);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(35);return e.KtG(c.close())}),e.qZA()()()()()()(),e.TgZ(36,"div")(37,"div",2),e._UZ(38,"div",3),e.TgZ(39,"div",4),e._uU(40,"C\xe0i \u0111\u1eb7t ph\xed d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(41,"div",5)(42,"div",6)(43,"div",7)(44,"cf-multi-select",22),e.NdJ("valueChange",function(c){return n.onChannelChange(c)}),e.TgZ(45,"label",11),e._uU(46," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()(),e.TgZ(47,"div",23)(48,"cf-input-group",24)(49,"label",11),e._uU(50," ADT "),e.qZA(),e._UZ(51,"cf-input-number",25),e.qZA(),e.TgZ(52,"cf-input-group",24)(53,"label",11),e._uU(54," CHD "),e.qZA(),e._UZ(55,"cf-input-number",25),e.qZA(),e.TgZ(56,"cf-input-group",24)(57,"label",11),e._uU(58," INF "),e.qZA(),e._UZ(59,"cf-input-number",25),e.qZA()(),e.TgZ(60,"cf-checkbox",26),e.NdJ("checkChange",function(c){return n.checkedChange(c)}),e._uU(61," S\u1eed d\u1ee5ng gi\xe1 m\u1eb7c \u0111\u1ecbnh "),e.qZA()()()()(),e.TgZ(62,"div",27)(63,"button",28),e.NdJ("click",function(){return n.onCancel()}),e._uU(64," H\u1ee7y b\u1ecf "),e.qZA(),e.YNc(65,Ot,2,0,"button",29),e.YNc(66,Ut,2,0,"button",29),e.qZA()()(),e.YNc(67,Mt,2,2,"ng-template",null,30,e.W1O)}if(2&t){const o=e.MAs(68);e.xp6(10),e.Q6J("data",n.airlineOptions||e.DdM(58,ce))("placeholder","Ch\u1ecdn h\xe3ng bay")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("disabled",n.isDisabledFareClass)("status","default")("data",n.fareClassOptions||e.DdM(59,ce))("allowSearch",!1)("placeholder","Ch\u1ecdn c\xe1c h\u1ea1ng \u0111\u1eb7t ch\u1ed7")("formControl",n.formGroup.controls.fareClass)("maxHeight",230),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(3),e.Q6J("status","default")("data",n.airportOptions||e.DdM(60,ce))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay")("customSearch",n.positionSearchCustom)("formControl",n.formGroup.controls.startPointDetails)("maxHeight",230)("optionTmp",o),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("status","default")("data",n.airportOptions||e.DdM(61,ce))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay")("formControl",n.formGroup.controls.endPointDetails)("maxHeight",230)("optionTmp",o),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(3),e.Q6J("status",n.formGroup.controls.flightTimeFrom.invalid&&(n.formGroup.controls.flightTimeFrom.dirty||n.formGroup.controls.flightTimeFrom.touched)?"error":"default"),e.xp6(4),e.Q6J("minDate",n.currentDateIssue)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.formGroup.controls.flightTimeFrom),e.xp6(2),e.Q6J("status",n.formGroup.controls.flightTimeTo.invalid&&(n.formGroup.controls.flightTimeTo.dirty||n.formGroup.controls.flightTimeTo.touched)?"error":"default"),e.xp6(4),e.Q6J("minDate",n.currentDateIssue)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.formGroup.controls.flightTimeTo),e.xp6(10),e.Q6J("status","default")("data",n.channelDistributionOption||e.DdM(62,ce))("allowSearch",!0)("formControl",n.formGroup.controls.channel)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(4),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.adtFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho ADT (\u0111)"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.chdFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho CHD (\u0111)"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.infFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho INF (\u0111)"),e.xp6(1),e.Q6J("checked",!1),e.xp6(5),e.Q6J("ngIf",!n.isEditConfig),e.xp6(1),e.Q6J("ngIf",n.isEditConfig)}},dependencies:[p.ez,p.O5,l.u5,l.Fj,l.JJ,l.UX,l.oH,M.q,re.C,C.j$,C.ND,C.BN,C.lt,x.N8,x.Xq,Ce.u,W.U,Ne.T,u.AxE,u.Sm8,J.Cs],encapsulation:2}),i})();var ye=m(4688),N=(()=>{return(i=N||(N={})).FOR_APPROVAL="FOR_APPROVAL",i.APPROVED="APPROVED",i.SOLD="SOLD",i.ON_SALE="ON_SALE",i.STOP_SALE="STOP_SALE",i.LOST="LOST",i.REJECT="REJECT",i.EXPIRED="EXPIRED",i.LOCK_FOR_PROCESSING="LOCK_FOR_PROCESSING",N;var i})();const de={[N.FOR_APPROVAL]:{name:"Ch\u01b0a duy\u1ec7t",backgroundColor:"orange",textColor:""},[N.APPROVED]:{name:"\u0110\xe3 duy\u1ec7t",backgroundColor:"cyan",textColor:""},[N.SOLD]:{name:"\u0110\xe3 b\xe1n",backgroundColor:"green",textColor:""},[N.ON_SALE]:{name:"\u0110ang b\xe1n",backgroundColor:"cyan",textColor:""},[N.LOCK_FOR_PROCESSING]:{name:"\u0110ang X\u1eed l\xfd",backgroundColor:"red",textColor:""},[N.STOP_SALE]:{name:"Ng\u1eebng b\xe1n",backgroundColor:"gray-2",textColor:""},[N.LOST]:{name:"Ch\u1ed9p h\u1ee5t",backgroundColor:"purple",textColor:""},[N.REJECT]:{name:"T\u1eeb ch\u1ed1i",backgroundColor:"gray-2",textColor:""},[N.EXPIRED]:{name:"H\u1ebft h\u1ea1n",backgroundColor:"gray-2",textColor:""}};var Y=m(77296),I=m(97579),se=m(70800),Jt=m(2225);function Ht(i,r){if(1&i&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div"),e._UZ(3,"img",28),e.qZA(),e.TgZ(4,"div",29)(5,"span",30),e._uU(6),e.qZA()()(),e.TgZ(7,"div",31)(8,"div",32)(9,"span"),e._uU(10),e.qZA(),e._UZ(11,"cf-icon",33),e.TgZ(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"div",34),e._UZ(15,"cf-icon",35),e.TgZ(16,"span",36),e._uU(17),e.ALo(18,"date"),e.qZA()()(),e.TgZ(19,"div",37)(20,"div",38),e._uU(21,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(22,"div",39),e._uU(23),e.qZA()(),e.TgZ(24,"div",37)(25,"div",38),e._uU(26,"Gi\xe1 mua v\xe0o"),e.qZA(),e.TgZ(27,"div",40),e._uU(28),e.ALo(29,"number"),e.qZA()(),e.TgZ(30,"div",37)(31,"div",38),e._uU(32,"S\u1ed1 kh\xe1ch"),e.qZA(),e.TgZ(33,"div",40),e._uU(34),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("src",t.productDetail.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.productDetail.airlineName),e.xp6(4),e.hij(" ",t.productDetail.startPoint,""),e.xp6(3),e.hij(" ",t.productDetail.endPoint," "),e.xp6(4),e.lnq("",t.productDetail.startPoint," - ",t.productDetail.endPoint," (",t.productDetail.startTime?e.xi3(18,10,t.productDetail.startTime,"HH:mm - dd/MM/yyyy"):"N/A",")"),e.xp6(6),e.Oqu(t.productDetail.bookingCode),e.xp6(5),e.hij("",e.lcZ(29,13,t.productDetail.purchasePrice)," \u0111"),e.xp6(6),e.Oqu(t.productDetail.paxCount)}}function Pt(i,r){1&i&&(e.TgZ(0,"div",41),e._UZ(1,"ticket-item-skeleton",42),e.qZA())}function Lt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Qt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Rt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Yt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","K\xeanh giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Gt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ng\xe0y giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function jt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","AG giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function zt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","H\xe3ng bay kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Kt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Vt(i,r){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","PNR kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function $t(i,r){1&i&&e._UZ(0,"cf-spinner")}const pe=function(){return[]};let qe=(()=>{class i{constructor(t,n,o,a,c,s,d,g,h,v){this.iconRegister=t,this.calendar=n,this._fb=o,this._modal=a,this._ref=c,this._inventoryService=s,this._flightDataService=d,this._ticketLowFareService=g,this._userService=h,this._toastService=v,this.transactionChannelOptions=[],this.airlineOptions=[],this.supplierSelectOption=[],this.isLoading=!1,this.isSpinning=!1,this.agentOption=[],t.registerIcons([u.okA]),this.maxPaymentDate=n.getToday(),this.productId=c.data.productId,this.initListOptions(),this.getAgentData()}ngOnInit(){this.initFormGroup(),this.getProductDetail()}initFormGroup(){this.formGroup=this._fb.group({agentId:["",l.kI.required],airline:["ALL",l.kI.required],channel:["",l.kI.required],paymentDate:["",l.kI.required],pnr:["",l.kI.required],supplier:["ALL",l.kI.required],adtFee:["",l.kI.required],chdFee:["",l.kI.required],infFee:["",l.kI.required]})}getAgentData(){this._userService.getAllAgentUserForBooking().subscribe({next:t=>{this.agentOption=t.data.map(n=>({text:`${n.userName} - ${n.displayName}`,value:n.userId}))}})}getProductDetail(){this.isLoading=!0,this._inventoryService.getProductDetail(this.productId).pipe((0,w.x)(()=>this.isLoading=!1)).subscribe({next:t=>{console.log(t);const n=t.data.bookingInfo;this.productDetail={airline:n.airline,airlineName:n.airlineName,airlineLogo:this._flightDataService.getAirlineLogoByCode(n.airline),startPoint:n.journeys[0].departure.airport.code,endPoint:n.journeys[0].arrival.airport.code,startTime:new Date(n.journeys[0].departure.localTime),endTime:new Date(n.journeys[0].arrival.localTime),bookingCode:n.bookingCode,paxCount:n.passengers.length,purchasePrice:n.totalCharges.total.totalFareCharge}}})}initListOptions(){this.transactionChannelOptions=[{value:F.h.B2B_GMBR,text:"Flychills"},{value:F.h.B2C_GMBR,text:"GMBR"},{value:"other",text:"Kh\xe1c"}],this.airlineOptions=[{value:"ALL",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airline"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.supplierSelectOption=[{text:"T\u1ef1 \u0111\u1ed9ng",value:"ALL"},...Object.entries(oe.f$).map(([t,n])=>({text:t,value:n}))]}close(){this._ref&&this._ref.close(!1)}onSubmit(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn b\xe1n \u0111\u01a1n h\xe0ng n\xe0y?",body:"\u0110\u01a1n h\xe0ng \u0111\xe3 b\xe1n s\u1ebd \u0111\u01b0\u1ee3c ghi nh\u1eadn doanh thu v\xe0 kh\xf4ng th\u1ec3 ph\xe2n ph\u1ed1i tr\u1edf l\u1ea1i. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ti\u1ebfp t\u1ee5c?",okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng",hasIcon:!1}).afterClosed$.subscribe({next:n=>{if(n.data){const o=this.formGroup.value,a={ownerPayment:o.agentId,paymentDetail:{airline:"ALL"!=o.airline?o.airline:"",channel:o.channel,distributionFee:{adtFee:(null==o?void 0:o.adtFee)||0,chdFee:(null==o?void 0:o.chdFee)||0,infFee:(null==o?void 0:o.infFee)||0,channel:o.channel},paymentDate:o.paymentDate?o.paymentDate.getTime():0,pnr:o.pnr,provider:o.airline,supplier:"ALL"!=o.supplier?o.supplier:""},productId:this.productId};console.log(a),this.isSpinning=!0,this._ticketLowFareService.paymentOutsideTicket(a).pipe((0,w.x)(()=>this.isSpinning=!1)).subscribe({next:c=>{var s;if(console.log(c),"OK"===c.status)this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Nh\u1eadp th\xf4ng tin b\xe1n th\u1ee7 c\xf4ng th\xe0nh c\xf4ng!",sticky:!1}),this._ref.close(!0);else{const d=null!==(s=c.objectError.errorDescription.vi)&&void 0!==s?s:c.objectError.errorDescription.en;this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i ",detail:d,sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i ",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0})}})}}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(J.jH),e.Y36(l.qu),e.Y36(I.oE),e.Y36(I.gb),e.Y36(ae),e.Y36(j.G),e.Y36(se.s),e.Y36(Jt.KD),e.Y36(R.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manual-sale-product"]],standalone:!0,features:[e.jDz],decls:66,vars:57,consts:[[1,"w-[740px]","flex","flex-col","rounded-lg","bg-neutral-white","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-6"],["class","flex items-center justify-between gap-x-4",4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"text-espressive-sm","text-black","mb-1.5"],[1,"grid","grid-cols-3","gap-4"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["size","medium",3,"placeholder","formControl"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],["textField","text","valueField","value","placeholder","Ch\u1ecdn k\xeanh giao d\u1ecbch","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y giao d\u1ecbch",1,"py-[7px]",3,"secondaryCalendar","maxDate","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["textField","text","valueField","value","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["textField","text","valueField","value","placeholder","Ch\u1ecdn h\xe3ng h\xe0ng kh\xf4ng","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["textField","text","valueField","value","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["cf-input","","size","medium","placeholder","Nh\u1eadp PNR",3,"formControl"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6"],["cf-button","","size","medium","type","secondary",1,"md:w-full","md:justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",3,"click"],[4,"ngIf"],[1,"flex","items-center","justify-between","gap-x-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"whitespace-nowrap"],[1,"h-full","shrink-0","flex","flex-col","justify-between"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small"],[1,"mt-3","flex","gap-x-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","justify-between","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,""],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"],["cfHint","",3,"hint"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp th\xf4ng tin b\xe1n h\xe0ng th\u1ee7 c\xf4ng"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Ht,35,15,"div",5),e.YNc(7,Pt,2,0,"div",6),e.TgZ(8,"div")(9,"div",7),e._uU(10,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(11,"div",8)(12,"cf-input-group",9)(13,"label",10),e._uU(14," Ng\u01b0\u1eddi l\u1edbn (ADT) "),e.qZA(),e._UZ(15,"cf-input-number",11),e.YNc(16,Lt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(17,"cf-input-group",9)(18,"label",10),e._uU(19," Tr\u1ebb em (CHD) "),e.qZA(),e._UZ(20,"cf-input-number",11),e.YNc(21,Qt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(22,"cf-input-group",9)(23,"label",10),e._uU(24," Em b\xe9 (INF) "),e.qZA(),e._UZ(25,"cf-input-number",11),e.YNc(26,Rt,1,1,"cf-input-hint",12),e.qZA()()(),e.TgZ(27,"div",13)(28,"div",8)(29,"cf-select",14)(30,"label",15),e._uU(31," K\xeanh giao d\u1ecbch "),e.qZA(),e.YNc(32,Yt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(33,"cf-input-group",9)(34,"label",15),e._uU(35," Ng\xe0y giao d\u1ecbch "),e.qZA(),e.TgZ(36,"input",16,17),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(37);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(37);return e.KtG(c.close())}),e.qZA(),e.YNc(38,Gt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(39,"cf-select",18)(40,"label",15),e._uU(41," AG giao d\u1ecbch "),e.qZA(),e.YNc(42,jt,1,1,"cf-input-hint",12),e.qZA()(),e.TgZ(43,"div")(44,"div",7),e._uU(45,"PNR ph\xe1t sinh"),e.qZA(),e.TgZ(46,"div",8)(47,"cf-select",19)(48,"label",15),e._uU(49," H\xe3ng bay "),e.qZA(),e.YNc(50,zt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(51,"cf-select",20)(52,"label",15),e._uU(53," Nh\xe0 cung c\u1ea5p "),e.qZA(),e.YNc(54,Kt,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(55,"cf-input-group",9)(56,"label",15),e._uU(57," PNR "),e.qZA(),e._UZ(58,"input",21),e.YNc(59,Vt,1,1,"cf-input-hint",12),e.qZA()()()()(),e.TgZ(60,"div",22)(61,"button",23),e.NdJ("click",function(){return n.close()}),e._uU(62," H\u1ee7y "),e.qZA(),e.TgZ(63,"button",24),e.NdJ("click",function(){return n.onSubmit()}),e._uU(64," X\xe1c nh\u1eadn "),e.qZA()()(),e.YNc(65,$t,1,0,"cf-spinner",25)}2&t&&(e.xp6(6),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("status",n.formGroup.controls.adtFee.invalid&&(n.formGroup.controls.adtFee.dirty||n.formGroup.controls.adtFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.adtFee),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.adtFee.hasError("required")&&(n.formGroup.controls.adtFee.touched||n.formGroup.controls.adtFee.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.chdFee.invalid&&(n.formGroup.controls.chdFee.dirty||n.formGroup.controls.chdFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.chdFee),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.chdFee.hasError("required")&&(n.formGroup.controls.chdFee.touched||n.formGroup.controls.chdFee.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.infFee.invalid&&(n.formGroup.controls.infFee.dirty||n.formGroup.controls.infFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.infFee),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.infFee.hasError("required")&&(n.formGroup.controls.infFee.touched||n.formGroup.controls.infFee.dirty)),e.xp6(3),e.Q6J("status",n.formGroup.controls.channel.invalid&&(n.formGroup.controls.channel.dirty||n.formGroup.controls.channel.touched)?"error":"default")("data",n.transactionChannelOptions||e.DdM(53,pe))("allowSearch",!1)("formControl",n.formGroup.controls.channel),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.channel.hasError("required")&&(n.formGroup.controls.channel.touched||n.formGroup.controls.channel.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.paymentDate.invalid&&(n.formGroup.controls.paymentDate.dirty||n.formGroup.controls.paymentDate.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("maxDate",n.maxPaymentDate)("displayMonths",1)("formControl",n.formGroup.controls.paymentDate),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.paymentDate.hasError("required")&&(n.formGroup.controls.paymentDate.touched||n.formGroup.controls.paymentDate.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.agentId.invalid&&(n.formGroup.controls.agentId.dirty||n.formGroup.controls.agentId.touched)?"error":"default")("data",n.agentOption||e.DdM(54,pe))("allowSearch",!1)("formControl",n.formGroup.controls.agentId),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.agentId.hasError("required")&&(n.formGroup.controls.agentId.touched||n.formGroup.controls.agentId.dirty)),e.xp6(5),e.Q6J("status",n.formGroup.controls.airline.invalid&&(n.formGroup.controls.airline.dirty||n.formGroup.controls.airline.touched)?"error":"default")("data",n.airlineOptions||e.DdM(55,pe))("allowSearch",!1)("formControl",n.formGroup.controls.airline),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.airline.hasError("required")&&(n.formGroup.controls.airline.touched||n.formGroup.controls.airline.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.supplier.invalid&&(n.formGroup.controls.supplier.dirty||n.formGroup.controls.supplier.touched)?"error":"default")("data",n.supplierSelectOption||e.DdM(56,pe))("allowSearch",!1)("formControl",n.formGroup.controls.supplier),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.supplier.hasError("required")&&(n.formGroup.controls.supplier.touched||n.formGroup.controls.supplier.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.pnr.invalid&&(n.formGroup.controls.pnr.dirty||n.formGroup.controls.pnr.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.pnr),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.pnr.hasError("required")&&(n.formGroup.controls.pnr.touched||n.formGroup.controls.pnr.dirty)),e.xp6(6),e.Q6J("ngIf",n.isSpinning))},dependencies:[p.ez,p.O5,p.JJ,p.uU,u.AxE,u.Sm8,x.N8,x.Xq,C.j$,C.ND,C.BN,C.v2,C.lt,l.u5,l.Fj,l.JJ,l.UX,l.oH,M.q,J.Cs,B.IA,re.C,Z.OR],encapsulation:2}),i})(),Me=(()=>{class i{constructor(t,n,o,a){this.ref=t,this._modal=n,this._ticketLowFareService=o,this._toastService=a,this.paymentId=this.ref.data.paymentId,this.paymentCode=this.ref.data.paymentCode}ngOnInit(){this.getDetail()}getDetail(){this._ticketLowFareService.getTicketsPendingApprovalDetail(this.paymentCode,this.paymentId).subscribe({next:t=>{console.log(t)}})}close(){this.ref&&this.ref.close(!1)}onCancel(){this._modal.open(Z.V0,{title:"T\u1eeb ch\u1ed1i",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onApprove(){this._modal.open(Z.V0,{title:"Duy\u1ec7t xu\u1ea5t",body:"Duy\u1ec7t xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"Duy\u1ec7t",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(n=>{n.data&&this._ticketLowFareService.approvalTicketPending("").subscribe({next:o=>{"OK"===o.status?(this.ref.close(!0),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I.gb,8),e.Y36(I.oE),e.Y36(se.s),e.Y36(R.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["approve-product-modal"]],standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(t,n){},dependencies:[p.ez,u.AxE,x.N8],encapsulation:2}),i})();var te=m(28490),Xt=m(16039);const Wt=function(i,r){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":r}},en=function(i){return{"text-neutral-gray-6":i}},tn=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function nn(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33,34)(3,"div",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onChangeTab(a))}),e._uU(4),e.TgZ(5,"cf-label",36),e._uU(6),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,Wt,t.active,!n)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,en,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,tn,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function on(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onManualSaleProduct(o.productId))}),e._uU(1," B\xe1n th\u1ee7 c\xf4ng "),e.qZA()}}function an(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39)(2,"div",40)(3,"div",41)(4,"cf-label",42),e._uU(5),e.qZA()(),e.TgZ(6,"div",43),e.YNc(7,on,2,0,"button",44),e.TgZ(8,"button",45),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onEditProduct(a.productId))}),e._uU(9," Ch\u1ec9nh s\u1eeda "),e.qZA()()(),e.TgZ(10,"div",46)(11,"div",47),e._UZ(12,"img",48),e.TgZ(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"cf-icon",49),e.TgZ(16,"div"),e._uU(17),e.qZA()(),e.TgZ(18,"div",50)(19,"div",51)(20,"div",52),e._uU(21,"Ng\xe0y bay: "),e.qZA(),e.TgZ(22,"div",53),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div",51)(26,"div",52),e._uU(27,"M\xe3 PNR: "),e.qZA(),e.TgZ(28,"div",53),e._uU(29),e.qZA()(),e.TgZ(30,"div",51)(31,"div",52),e._uU(32,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(33,"div",53),e._uU(34),e.qZA()(),e.TgZ(35,"div",51)(36,"div",52),e._uU(37,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(38,"div",53),e._uU(39),e.ALo(40,"date"),e.qZA()(),e.TgZ(41,"div",51)(42,"div",52),e._uU(43,"Ng\u01b0\u1eddi \u0111\u1eb7t: "),e.qZA(),e.TgZ(44,"div",53),e._uU(45),e.qZA()(),e.TgZ(46,"div",51)(47,"div",52),e._uU(48,"Gi\xe1 mua v\xe0o: "),e.qZA(),e.TgZ(49,"div",53),e._uU(50),e.ALo(51,"number"),e.qZA()(),e.TgZ(52,"div",51)(53,"div",52),e._uU(54,"Gi\xe1 tr\xean Flychills: "),e.qZA(),e.TgZ(55,"div",53),e._uU(56),e.qZA()(),e.TgZ(57,"div",51)(58,"div",52),e._uU(59,"Gi\xe1 tr\xean GMBR: "),e.qZA(),e.TgZ(60,"div",53),e._uU(61),e.qZA()()()()(),e.BQk()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("color",n.STATE_PRODUCT_DISPLAY_CONST[t.state].backgroundColor)("size","small"),e.xp6(1),e.hij(" ",n.STATE_PRODUCT_DISPLAY_CONST[t.state].name," "),e.xp6(2),e.Q6J("ngIf",t.state===n.STATE_PRODUCT_ENUM.ON_SALE),e.xp6(5),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.AsE("",t.departureName," (",t.departure,")"),e.xp6(3),e.AsE("",t.arrival," (",t.arrivalName,")"),e.xp6(6),e.Oqu(e.xi3(24,17,1e3*t.flyScheduleTime,"dd/MM/yyyy")),e.xp6(6),e.Oqu(t.bookingCode),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(e.xi3(40,20,1e3*t.timeHoldBooking,"dd/MM/yyyy")),e.xp6(6),e.Oqu(t.ownerName),e.xp6(5),e.Oqu(e.lcZ(51,23,t.productBasePrice)),e.xp6(6),e.Oqu("-"),e.xp6(5),e.Oqu("-")}}function rn(i,r){if(1&i&&(e.TgZ(0,"div",37)(1,"div",38),e.YNc(2,an,62,25,"ng-container",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listProduct)}}function cn(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",54)(2,"ticket-item-skeleton",54),e.qZA())}const z=function(){return[]};let sn=(()=>{class i{constructor(t,n,o,a,c,s,d,g){this._cfIconRegister=t,this._fb=n,this._modal=o,this._router=a,this._inventoryService=c,this._locationDataService=s,this._flightDataService=d,this._excelService=g,this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!1},{value:"FOR_APPROVAL",text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!1},{value:"ON_SALE",text:"\u0110ang b\xe1n",counter:0,active:!0},{value:"SOLD",text:"\u0110\xe3 b\xe1n",counter:0,active:!1},{value:"REJECT",text:"T\u1eeb ch\u1ed1i",counter:0,active:!1},{value:"STOP_SALE",text:"Ng\u1eebng b\xe1n",counter:0,active:!1},{value:"EXPIRED",text:"H\u1ebft h\u1ea1n",counter:0,active:!1},{value:"LOST",text:"Ch\u1ed9p h\u1ee5t",counter:0,active:!1}],this.isSkeleton=!1,this.listProduct=[],this.STATE_PRODUCT_DISPLAY_CONST=de,this.STATE_PRODUCT_ENUM=N,this.typeTimeOptions=[],this.dateRangeStr="",this.airlineOptions=[],this.distributionChannelOptions=[],this.salesChannelOptions=[],this.sellSourceTypeOptions=[],this.searchTextTypeOptions=[],this.sourceOptions=[],this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR",t.registerIcons([u.esH,u.iYu]),this.initDateSearch()}ngOnInit(){var t;this.currentTab=(null===(t=this.listTab.find(n=>n.active))||void 0===t?void 0:t.value)||"",this.initListOptions(),this.initSearchForm(),this.getManageProduct()}initDateSearch(){this.startDateOfMonth=new Date,this.endDateOfMonth=T(this.startDateOfMonth).add(30,"day").toDate();const t=(0,p.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),n=(0,p.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+n}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[F.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],salesChannel:[""],searchText:[""],searchTextType:["PNR"],sellSourceType:[""],source:[""],timeFilterType:["TIME_BOOKING"]})}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airline"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:F.h.B2B_GMBR,text:"Flychills"},{value:F.h.B2C_GMBR,text:"GMBR"}],this.salesChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:F.h.B2B_GMBR,text:"Flychills"},{value:F.h.B2C_GMBR,text:"GMBR"},{value:"OTHER",text:"Kh\xe1c"}],this.searchTextTypeOptions=[{value:"PNR",text:"PNR"},{value:"JOURNEY",text:"H\xe0nh tr\xecnh"},{value:"BOOKER",text:"BOOKER"},{value:"AGENT",text:"AGENT"}],this.sourceOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"MANUAL",text:"Th\u1ee7 c\xf4ng"}],this.sellSourceTypeOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"BOOKER",text:"BOOKER"}]}onDateSelection(t,n,o,a){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),a.close(),this.startDate=n.value;const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),n.setValue(t);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{n.setValue(t),o.setValue(null);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onChangeTab(t){this.currentTab!==t.value&&(this.currentTab=t.value,this.getManageProduct(),this.listTab.forEach(n=>{n.active=n.value===this.currentTab}))}getManageProduct(){const t=this.searchForm.value,n={airline:(null==t?void 0:t.airline)||"",channelDistribution:(null==t?void 0:t.distributionChannel)||"",startDate:null!=t&&t.fromDate?(0,p.p6)(null==t?void 0:t.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=t&&t.toDate?(0,p.p6)(null==t?void 0:t.toDate,"yyyy-MM-dd","vi-VN"):"",salesChannel:(null==t?void 0:t.salesChannel)||null,searchText:(null==t?void 0:t.searchText)||"",searchTextType:(null==t?void 0:t.searchTextType)||null,sellSourceType:(null==t?void 0:t.sellSourceType)||null,source:(null==t?void 0:t.source)||null,state:this.currentTab||null,timeFilterType:(null==t?void 0:t.timeFilterType)||null};this.isSkeleton=!0,this._inventoryService.manageProduct(n).pipe((0,w.x)(()=>this.isSkeleton=!1)).subscribe({next:o=>{var a;"OK"===o.status&&(console.log(o),this.listProduct=(null===(a=o.data)||void 0===a?void 0:a.map(c=>({airline:c.productDetail.airline,airlineName:this._flightDataService.getAirlineNameByCode(c.productDetail.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(c.productDetail.airline),departure:c.productDetail.departure,departureName:this._locationDataService.getCityNameByCode(c.productDetail.departure),arrival:c.productDetail.arrival,arrivalName:this._locationDataService.getCityNameByCode(c.productDetail.arrival),bookingCode:c.productDetail.bookingCode,channelDistribution:c.productDetail.channelDistribution,flyScheduleTime:c.productDetail.flyScheduleTime,ownerName:c.productDetail.ownerName,paxCount:c.productDetail.paxCount,productBasePrice:c.productDetail.productBasePrice*c.productDetail.paxCount,productId:c.productDetail.productId,timeHoldBooking:c.productDetail.timeHoldBooking,state:c.productDetail.state,stateDisplay:de[c.productDetail.state].name})))||[],this.listProduct.sort((c,s)=>c.timeHoldBooking-s.timeHoldBooking))}})}onSearchTextType(t){switch(console.log(t),t){case"PNR":default:this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR";break;case"JOURNEY":this.placeholderTextSearch="T\xecm ki\u1ebfm theo H\xe0nh tr\xecnh";break;case"BOOKER":this.placeholderTextSearch="T\xecm ki\u1ebfm theo Booker";break;case"AGENT":this.placeholderTextSearch="T\xecm ki\u1ebfm theo \u0110\u1ea1i l\xfd"}}onEditProduct(t){this._router.navigate([`admin/edit-product/${t}`])}onCancelConfirm(){this._modal.open(Z.V0,{title:"",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onConfirm(){this._modal.open(Me,{})}onManualSaleProduct(t){this._modal.open(qe,{productId:t}).afterClosed$.subscribe({next:o=>{o.data&&this.getManageProduct()}})}exportExcelProduct(){const t=`inventory_ticket_report_${T().format("DDMMYYYY")}`;this._excelService.exportToExcel(this.listProduct.map(n=>({airline:n.airline,bookingCode:n.bookingCode,route:`${n.departureName}(${n.departure}) - ${n.arrivalName}(${n.arrival})`,type:"",timeCreated:"",ownerName:n.ownerName,timeHoldBooking:T(1e3*n.timeHoldBooking).format("DD/MM/YYYY HH:MM"),paxCount:n.paxCount,stateDisplay:de[n.state].name,productBasePrice:n.productBasePrice,b2bPrice:"",b2cPrice:"",reveneus:"",ownerSale:"",transactionChannel:"",transactionAgent:"",transactionDate:"",salePNR:""})),["H\xe3ng bay","PNR mua v\xe0o","H\xe0nh tr\xecnh","Ph\xe2n lo\u1ea1i","Ng\xe0y \u0111\u1eb7t","Ng\u01b0\u1eddi \u0111\u1eb7t","H\u1ea1n gi\u1eef ch\u1ed7","S\u1ed1 kh\xe1ch","Tr\u1ea1ng th\xe1i","Gi\xe1 mua v\xe0o","Gi\xe1 b\xe1n tr\xean Flychills","Gi\xe1 b\xe1n tr\xean GMBR","Doanh thu","Ng\u01b0\u1eddi b\xe1n","K\xeanh giao d\u1ecbch","AG giao d\u1ecbch","Ng\xe0y giao d\u1ecbch","PNR b\xe1n ra"],t,[{wch:10},{wch:10},{wch:20},{wch:25},{wch:25},{wch:10},{wch:20},{wch:20}])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(l.qu),e.Y36(I.oE),e.Y36(O.F0),e.Y36(ae),e.Y36(te._),e.Y36(j.G),e.Y36(Xt.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-product"]],standalone:!0,features:[e.jDz],decls:52,vars:56,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","items-center"],[1,"text-heading-lg","md:text-heading-sm"],["cf-button","","size","medium","type","secondary",1,"justify-center","whitespace-nowrap","bg-neutral-white",3,"click"],["cfHeadIcon","","icon","export","size","small",1,"mr-2"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","flex-wrap","gap-x-4","gap-y-2"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","allowSearch","formControl","ngModelChange"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","autocomplete","off",3,"formControl","placeholder"],["cf-button","","size","medium",1,"justify-center","whitespace-nowrap",3,"click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],["class","flex flex-col gap-y-[30px] md:gap-y-4",4,"ngIf"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass","click"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"py-2","px-3"],["type","solid",3,"color","size"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small","type","secondary","class","bg-white",3,"click",4,"ngIf"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],["icon","arrow_right","size","small"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"T\u1ed5ng kho v\xe9 T\u1ebft 2025"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.exportExcelProduct()}),e._UZ(6,"cf-icon",5),e._uU(7," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7),e.YNc(10,nn,7,13,"ng-container",8),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"cf-select",11)(14,"label",12),e._uU(15," L\u1ecdc theo "),e.qZA()(),e.TgZ(16,"div",13)(17,"cf-input-group",14),e._UZ(18,"cf-icon",15),e.TgZ(19,"label",16),e._uU(20,"Th\u1eddi gian"),e.qZA(),e.TgZ(21,"input",17),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(23);return e.KtG(c.open())})("ngModelChange",function(c){return n.dateRangeStr=c}),e.qZA()(),e.TgZ(22,"input",18,19),e.NdJ("dateSelect",function(c){e.CHM(o);const s=e.MAs(23);return e.KtG(n.onDateSelection(c,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,s))}),e.qZA()(),e.TgZ(24,"cf-select",20)(25,"label",12),e._uU(26," H\xe3ng bay "),e.qZA()(),e.TgZ(27,"cf-select",20)(28,"label",12),e._uU(29," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()(),e.TgZ(30,"cf-select",20)(31,"label",12),e._uU(32," Ng\u01b0\u1eddi \u0111\u1eb7t "),e.qZA()(),e.TgZ(33,"cf-select",20)(34,"label",12),e._uU(35," K\xeanh giao d\u1ecbch "),e.qZA()(),e.TgZ(36,"cf-select",20)(37,"label",12),e._uU(38," Ng\u01b0\u1eddi b\xe1n "),e.qZA()()(),e.TgZ(39,"div",21)(40,"cf-select",22),e.NdJ("ngModelChange",function(c){return n.onSearchTextType(c)}),e.qZA(),e.TgZ(41,"cf-input-group",23),e._UZ(42,"cf-icon",24)(43,"input",25),e.qZA(),e.TgZ(44,"button",26),e.NdJ("click",function(){return n.getManageProduct()}),e._uU(45," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(46,"div",27)(47,"div",28)(48,"div",29)(49,"div",30),e.YNc(50,rn,3,7,"div",31),e.YNc(51,cn,3,0,"div",32),e.qZA()()()()()}2&t&&(e.xp6(10),e.Q6J("ngForOf",n.listTab),e.xp6(3),e.Q6J("status","default")("data",n.typeTimeOptions||e.DdM(49,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(50,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",n.distributionChannelOptions||e.DdM(51,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.distributionChannel),e.xp6(3),e.Q6J("status","default")("data",n.sourceOptions||e.DdM(52,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.source),e.xp6(3),e.Q6J("status","default")("data",n.salesChannelOptions||e.DdM(53,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.salesChannel),e.xp6(3),e.Q6J("status","default")("data",n.sellSourceTypeOptions||e.DdM(54,z))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.sellSourceType),e.xp6(4),e.Q6J("status","default")("data",n.searchTextTypeOptions||e.DdM(55,z))("allowSearch",!0)("formControl",n.searchForm.controls.searchTextType),e.xp6(3),e.Q6J("formControl",n.searchForm.controls.searchText)("placeholder",n.placeholderTextSearch),e.xp6(7),e.Q6J("ngIf",!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,ye.b,M.q,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,x.N8,x.Xq,C.j$,C.ND,C.BN,u.AxE,u.Sm8,B.IA,Y.Rq,Y.Ry,J.Cs],encapsulation:2}),i})();var k=m(37094),_e=m(80429),ln=m(52013),K=m(42678);let un=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"status",void 0),(0,_.gn)([(0,U.D)(()=>dn),(0,f.C)()],i.prototype,"data",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"objectError",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"success",void 0),i})(),dn=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"orderId",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"code",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"ownerInfo",void 0),(0,_.gn)([(0,U.D)(()=>gn),(0,f.C)()],i.prototype,"userActionInfo",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"state",void 0),(0,_.gn)([(0,U.D)(()=>mn),(0,f.C)()],i.prototype,"ticketInfo",void 0),(0,_.gn)([(0,U.D)(()=>fn),(0,f.C)()],i.prototype,"orderInfo",void 0),(0,_.gn)([(0,U.D)(()=>_n),(0,f.C)()],i.prototype,"fareInfo",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"canUpdate",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"monitorType",void 0),(0,_.gn)([(0,U.D)(()=>pn),(0,f.C)()],i.prototype,"availableSlotInfo",void 0),i})(),pn=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"free",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"type",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"amountPerPax",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"percent",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"currency",void 0),i})(),_n=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"originalPnr",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"detectedPnr",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"originalFare",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"detectedFare",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"originalFareClass",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"detectedFareClass",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"higherFare",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"lastTimeUpdate",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"airline",void 0),i})(),fn=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"timeCreate",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"timeExpire",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"timeUpdate",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"timeFinished",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"fareMonitors",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"priceMonitors",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"notifyBeforeExpired",void 0),i})(),mn=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"airline",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"flightType",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"journeys",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"passengers",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"originalPrice",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"totalFare",void 0),i})(),gn=(()=>{class i{}return(0,_.gn)([(0,f.C)()],i.prototype,"id",void 0),(0,_.gn)([(0,f.C)()],i.prototype,"name",void 0),i})();const Ee={headers:new ee.WM({"Content-Type":"application/json"})};let Be=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}registerTickedAdvanced(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/register",JSON.stringify(t),Ee).pipe((0,q.U)(n=>(0,P.yE)(un,n,{excludeExtraneousValues:!0})))}getCurrentConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/current-config-order",JSON.stringify({orderId:t}),Ee).pipe((0,q.U)(n=>(0,P.yE)(K.zz,n,{excludeExtraneousValues:!0})))}updateConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/update_order",JSON.stringify(t),Ee).pipe((0,q.U)(n=>(0,P.yE)(K.Cs,n,{excludeExtraneousValues:!0})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ee.eN),e.LFG(oe.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function hn(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",53),e._uU(2),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.start+" - "+t.end," ")}}function vn(i,r){if(1&i&&(e.ynx(0),e.YNc(1,hn,3,1,"ng-container",52),e.ALo(2,"mapper"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.rawData.departureTime,t.viewDepartureTime))}}function xn(i,r){1&i&&(e.TgZ(0,"span",53),e._uU(1," 00:00 - 23:59 "),e.qZA())}function Tn(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Cn(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56),e._UZ(2,"img",57),e.TgZ(3,"div",31),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function yn(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Cn,7,8,"div",54),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function En(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,yn,2,1,"div",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rawData.specifyPriceList)}}function An(i,r){1&i&&(e.TgZ(0,"div",31)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function bn(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56),e._UZ(2,"img",57),e.TgZ(3,"div",31),e._uU(4),e.TgZ(5,"span",60),e._uU(6),e.qZA()()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function Zn(i,r){if(1&i&&(e.TgZ(0,"div",65),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Dn(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Zn,2,1,"div",64),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Fn(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Dn,2,1,"ng-container",52),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const kn=function(i){return{"w-full":i}};function Sn(i,r){if(1&i&&(e.TgZ(0,"div",62)(1,"div",63),e._uU(2),e.qZA(),e.YNc(3,Fn,2,1,"ng-container",39),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,kn,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function In(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Sn,4,5,"div",61),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function wn(i,r){if(1&i&&(e.ynx(0),e.YNc(1,In,2,1,"ng-container",52),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function On(i,r){if(1&i&&(e.ynx(0),e.YNc(1,wn,2,1,"ng-container",52),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Un(i,r){if(1&i&&(e.ynx(0),e.YNc(1,bn,7,3,"div",54),e.TgZ(2,"div",59),e.YNc(3,On,2,1,"ng-container",39),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Nn(i,r){if(1&i&&(e.TgZ(0,"div",58),e.YNc(1,Un,4,2,"ng-container",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function qn(i,r){1&i&&e._UZ(0,"cf-spinner")}let Je=(()=>{class i{constructor(t,n,o,a,c,s,d,g){this.cfIconRegister=t,this.ref=n,this.cfBottomSheetRef=o,this.huntTicketAdvancedSvc=a,this._route=c,this._modal=s,this.cdr=d,this.bottomSheetData=g,this.dataFlight=(0,e.f3M)(te._).getAllOption(),this.isLoading=!1,this.viewDepartureTime=h=>h.filter(v=>v.isActive),this.viewFly=h=>{const v=this.dataFlight.find(y=>y.Code===h);return`${null==v?void 0:v.CityName} (${h})`},t.registerIcons([u.UNF]),this.ref&&(this.rawData=this.ref.data.data,this.dataFormSubmit=this.progressDateAfterSubmit(this.ref.data.data),this.selectedFaresTree=this.ref.data.selectedFaresTree),this.cfBottomSheetRef&&(this.rawData=this.bottomSheetData.rawData,this.dataFormSubmit=this.progressDateAfterSubmit(this.bottomSheetData.rawData),this.selectedFaresTree=this.bottomSheetData.selectedFaresTree)}close(t){this.ref&&this.ref.close(t),this.bottomSheetData&&this.cfBottomSheetRef.dismiss(t)}submit(){this.isLoading=!0,this.huntTicketAdvancedSvc.registerTickedAdvanced(this.dataFormSubmit).pipe((0,w.x)(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe(t=>{if("OK"===t.status){let n="",o="";o="well_done",n=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t.data.code}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`,this._modal.open(ln.V,{title:"T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",content:n,status:o,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:c=>{c.data&&(this.close(!0),this._route.navigate(["admin/hunt-ticket-advanced-list"]))}})}})}progressDateAfterSubmit(t){const{type:n,endPoint:o,startPoint:a,distributionChannel:c,isTimeRange:s,departureTime:d,toDate:g,fromDate:h,specifyPriceList:v,specifyFareClassList:y}=t,A=null==d?void 0:d.filter(b=>b.isActive),E=A[A.length-1].end.split(":");return{conditions:{specifyPriceList:"PRICE"===n?v.filter(b=>b.price).map(({id:b,price:S})=>({airline:b,targetPrice:S})):[],specifyFareClassList:"FARE"===n?y.map(({airline:b,fareClass:S})=>({airline:b.toUpperCase(),fareClass:S.join(";")})):[],type:n},advanceSetting:{timeExecute:T(this.setTimeOnDate(g,+E[0],+E[1])).format("YYYY-MM-DDTHH:mm:ss"),notifBeforExpire:!1},journeys:{endPoint:o,startPoint:a,rangeDateTime:{fromDate:Math.floor(this.setTimeOnDate(h,0,0).getTime()/1e3),toDate:Math.floor(this.setTimeOnDate(g,0,0).getTime()/1e3)},allRangeTime:!s,rangeTime:A.map(({start:b,end:S})=>({toDate:S,fromDate:b}))},distributionChannel:c}}setTimeOnDate(t,n,o,a){return t.setHours(n),t.setMinutes(o),t.setSeconds(a?59:0),t.setMilliseconds(a?99:0),t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(I.gb,8),e.Y36(k.Zu,8),e.Y36(Be),e.Y36(O.F0),e.Y36(I.oE),e.Y36(e.sBO),e.Y36(k.Rr,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-add-confirm-modal"]],standalone:!0,features:[e.jDz],decls:110,vars:27,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","pt-6","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],["icon","plane","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"flex","flex-col","gap-3","bg-[#FAFAFA]","px-3","py-2"],[1,"flex","justify-center","gap-3","md:flex-col"],[1,"flex","items-center","gap-x-[20px]","md:flex-col","md:gap-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],[1,"items-center","w-[100px]","md:w-[75px]"],[1,"text-center","text-express-sm","text-neutral-gray-4"],[1,"flex","items-center"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]","cf-icon-small"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center","md:flex","md:flex-1","md:justify-center"],[1,"flex","justify-center","gap-x-1"],[1,"flex","items-center","gap-x-2","mb-2","justify-start"],["icon","calendar","size","small",1,"cf-icon-small"],[1,"text-body-md","text-neutral-black"],[1,"text-body-md","text-neutral-black","font-semibold"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"text-body-md"],[1,"w-[60%]"],[1,"text-express-md"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],[4,"ngIf","ngIfElse"],["allTimeTpl",""],[1,"w-[60%]","text-express-md"],[4,"ngIf"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],["icon","money","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-right",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],[4,"ngFor","ngForOf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close(!1)}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"cf-icon",7),e.TgZ(9,"span",8),e._uU(10,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div")(15,"div",12)(16,"div",13)(17,"span"),e._uU(18),e.ALo(19,"mapper"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15),e._uU(22,"Bay th\u1eb3ng"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"div",17)(25,"div",18)(26,"cf-icon",19),e.qZA()()()(),e.TgZ(27,"div")(28,"div",20)(29,"span"),e._uU(30),e.ALo(31,"mapper"),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",22),e._UZ(34,"cf-icon",23),e.TgZ(35,"div",24),e._uU(36,"T\u1eeb "),e.TgZ(37,"span",25),e._uU(38),e.ALo(39,"date"),e.qZA()()(),e.TgZ(40,"div",22)(41,"div",24),e._uU(42,"\u0110\u1ebfn "),e.TgZ(43,"span",25),e._uU(44),e.ALo(45,"date"),e.qZA()()()()(),e._UZ(46,"div",26),e.TgZ(47,"div",27)(48,"div",28)(49,"div",29)(50,"span"),e._uU(51,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(52,"div",30)(53,"span",31),e._uU(54),e.ALo(55,"date"),e.qZA()()(),e._UZ(56,"div",26),e.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"span"),e._uU(61,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(62,"div",35),e.YNc(63,vn,3,4,"ng-container",36),e.YNc(64,xn,2,0,"ng-template",null,37,e.W1O),e.qZA()(),e._UZ(66,"div",26),e.TgZ(67,"div",32)(68,"div",33)(69,"div",34)(70,"span"),e._uU(71,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(72,"div",38),e.YNc(73,Tn,2,0,"span",39),e.YNc(74,En,2,1,"div",39),e.qZA()(),e._UZ(75,"div",26),e.TgZ(76,"div",32)(77,"div",33)(78,"div",29)(79,"span"),e._uU(80,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(81,"div",30),e.YNc(82,An,3,0,"div",40),e.YNc(83,Nn,2,1,"div",41),e.qZA()()()(),e.TgZ(84,"div",5)(85,"div",42),e._UZ(86,"cf-icon",43),e.TgZ(87,"span",8),e._uU(88,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(89,"div",44),e._UZ(90,"cf-icon",45),e.TgZ(91,"div")(92,"span",31),e._uU(93,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(94," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(95,"div",44),e._UZ(96,"cf-icon",46),e.TgZ(97,"div",31),e._uU(98,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(99,"span",47),e._uU(100,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(101," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()(),e.TgZ(102,"div",48)(103,"button",49),e.NdJ("click",function(){return n.close(!1)}),e._uU(104," \u0110\xf3ng "),e.qZA(),e.TgZ(105,"button",50),e.NdJ("click",function(){return n.submit()}),e.TgZ(106,"span"),e._uU(107,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(108,"cf-icon",51),e.qZA()()(),e.YNc(109,qn,1,0,"cf-spinner",39)),2&t){const o=e.MAs(65);e.xp6(18),e.hij("",e.xi3(19,12,n.rawData.startPoint,n.viewFly)," "),e.xp6(12),e.hij(" ",e.xi3(31,15,n.rawData.endPoint,n.viewFly)," "),e.xp6(8),e.Oqu(e.xi3(39,18,n.rawData.fromDate,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(45,21,n.rawData.toDate,"dd/MM/yyyy")),e.xp6(10),e.Oqu(e.xi3(55,24,n.dataFormSubmit.advanceSetting.timeExecute,"dd/MM/yyy HH:mm")),e.xp6(9),e.Q6J("ngIf",n.rawData.isTimeRange)("ngIfElse",o),e.xp6(10),e.Q6J("ngIf","PRICE"!==n.rawData.type),e.xp6(1),e.Q6J("ngIf","PRICE"===n.rawData.type),e.xp6(8),e.Q6J("ngIf","FARE"!==n.rawData.type),e.xp6(1),e.Q6J("ngIf","FARE"===n.rawData.type),e.xp6(26),e.Q6J("ngIf",n.isLoading)}},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,u.AxE,u.Sm8,_e.q,x.N8,x.Xq,B.AS,k.DW,Z.OR],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),i})();function Mn(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1," ")}}function Bn(i,r){1&i&&(e.TgZ(0,"span"),e._UZ(1,"cf-icon",7),e.qZA())}function Jn(i,r){if(1&i&&e._UZ(0,"div",8),2&i){const t=e.oxw().index,n=e.oxw();e.Q6J("ngClass",t<n.stepCurIdx?"bg-secondary-7-4":"bg-neutral-gray-3")}}const Hn=function(i,r,t){return{"text-neutral-white !bg-secondary-7-4":i,"text-neutral-gray-3 !bg-white":r,"border-secondary-7-4":t}};function Pn(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3),e.YNc(3,Mn,2,1,"span",4),e.YNc(4,Bn,2,0,"span",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,Jn,1,1,"div",6),e.BQk()),2&i){const t=r.$implicit,n=r.index,o=r.last,a=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(5,Hn,a.stepCurIdx===n,a.stepCurIdx!==n,n<=a.stepCurIdx)),e.xp6(1),e.Q6J("ngIf",n>=a.stepCurIdx),e.xp6(1),e.Q6J("ngIf",n<a.stepCurIdx),e.xp6(2),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",!o)}}let Ln=(()=>{class i{set stepCur(t){this.stepCurIdx=this.steps.findIndex(n=>n.id===t)}constructor(t){this._cfRegister=t,this.stepChange=new e.vpe,t.registerIcons([u.NNX])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cheapflightclient-step-ct"]],inputs:{steps:"steps",stepCur:"stepCur"},outputs:{stepChange:"stepChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"flex","items-center","w-[84%]","md:w-[70%]"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3",3,"ngClass"],[4,"ngIf"],[1,"line-clamp-2","absolute","min-w-[140px]","max-w-[170px]","top-[130%]","text-[#2C2C2C]","text-express-md","md:max-w-[80px]","text-center"],["class","flex-grow h-[1px] ",3,"ngClass",4,"ngIf"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"flex-grow","h-[1px]",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pn,8,9,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.steps))},dependencies:[p.ez,p.mk,p.sg,p.O5,u.AxE,u.Sm8],styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:center;min-height:68px;align-items:flex-start}"],changeDetection:0}),i})();var Qn=m(99590),He=m(73546),Pe=m(76331);const Gn=(i,r)=>{var t;const n=i.fareType.map(o=>o.fareClass.map(({code:a})=>a)).reduce((o,a)=>[...o,...a],[]);return!(null===(t=null==r?void 0:r.fareClass)||void 0===t||!t.length)&&n.some(o=>r.fareClass.includes(o))},jn=(i,r)=>{var t;return!(null===(t=null==r?void 0:r.fareClass)||void 0===t||!t.length)&&i.fareClass.map(({code:n})=>n).some(n=>r.fareClass.includes(n))},zn=i=>{var r;let t=0;return null===(r=i.cabin)||void 0===r||r.forEach(n=>{var o;null===(o=n.fareType)||void 0===o||o.forEach(a=>{t+=a.fareClass.length||0})}),t},Kn=i=>["GDS","other","",null].includes(i)?"assets/icons/airline-default.svg":`assets/icons/${i}-icon.svg`,Vn={VJ:{name:"Vietjet Air",logo:"assets/airline-logo/VJ.png",smallLogo:"assets/airline-logo/VJ_small.png"},VN:{name:"Vietnam Airlines",logo:"assets/airline-logo/VN.png",smallLogo:"assets/airline-logo/VN_small.png"},QH:{name:"Bamboo Airways",logo:"assets/airline-logo/QH.png",smallLogo:"assets/airline-logo/QH_small.png"}},$n=i=>{var r;return(null===(r=Vn[i])||void 0===r?void 0:r.name)||""};var Xn=m(27361),Le=m(17489),Wn=m(39646),L=m(40899);function ei(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onExpandAirline(o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function ti(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onExpandAirline(o))}),e._UZ(1,"cf-icon",19),e.qZA()}}function ni(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(a,o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function ii(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(a,o))}),e._UZ(1,"cf-icon",19),e.qZA()}}const oi=function(i){return{"bg-[#FCB40A] text-neutral-white":i}};function ai(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(6);return e.KtG(c.onToggleFareSelected(a))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,oi,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function ri(i,r){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ai,3,4,"ng-container",5),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ci(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11)(5,"div",13),e._uU(6),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()(),e.YNc(9,ni,2,0,"button",15),e.YNc(10,ii,2,0,"button",15),e.qZA(),e.YNc(11,ri,2,1,"div",22),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function si(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ci,12,7,"ng-container",5),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function li(i,r){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,si,2,1,"ng-container",5),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ui(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11),e._UZ(5,"img",12),e.TgZ(6,"div",13),e._uU(7),e.TgZ(8,"span",14),e._uU(9),e.qZA()()()()(),e.YNc(10,ei,2,0,"button",15),e.YNc(11,ti,2,0,"button",15),e.qZA(),e.YNc(12,li,2,1,"div",16),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}let Qe=(()=>{class i{constructor(t,n,o,a,c,s,d,g){this.route=t,this._cfRegister=n,this._permissionService=o,this._modal=a,this._route=c,this._cd=s,this.data=d,this.cfBottomSheetRef=g,n.registerIcons([u.xgX,u.xbi,u.NYs,u.Hge,u.n78,u.fqi,u.esH,u.cnj,u.TM4]),g.containerInstance._rightButtonClick.subscribe(h=>{this.cfBottomSheetRef.dismiss(!1)}),this.fareOptions=d.fareOptions}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(n=>{n.isExpand=n.code.toUpperCase()===t.code.toUpperCase()&&!n.isExpand})}onFareTypeExpand(t,n){n.isExpand=!n.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(a=>{a.code!==n.code&&(a.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(n=>{n.isActive=t,n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(a=>{a.isActive=t,a.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,n){n.isActive=t,n.childItems.forEach(o=>{o.isActive=n.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,n){n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(a=>{a.isActive=t,a.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t){t.isActive=!t.isActive,this.standardizeFareOptionSelected()}close(){this.cfBottomSheetRef.dismiss()}submit(){this.cfBottomSheetRef.dismiss(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(n=>{let o=!1;n.childItems.forEach(a=>{a.childItems.forEach(c=>{c.isActive=c.childItems.map(s=>s.isActive).reduce((s,d)=>s||d,!1),t=t&&c.childItems.map(s=>s.isActive).reduce((s,d)=>s&&d,!0),c.totalSelectedFare=c.childItems.filter(s=>s.isActive).length,c.isActive&&(o=!0)})}),n.isActive=o,n.totalSelectedFare=n.childItems.reduce((a,c)=>a+c.childItems.map(s=>s.childItems.filter(d=>d.isActive).length).reduce((s,d)=>s+d),0)}),this.selectedAll=t,this._cd.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.gz),e.Y36(u.KNP),e.Y36(L.$A),e.Y36(I.oE),e.Y36(O.F0),e.Y36(e.sBO),e.Y36(k.Rr),e.Y36(k.Zu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fare-option-bottom-sheet"]],standalone:!0,features:[e.jDz],decls:14,vars:2,consts:[[1,"overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"px-3","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-4"],[1,"px-3","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"fixed","bottom-0","left-0","w-screen","bg-white","shadow-cf-large-top","p-3","flex","items-center","justify-end","gap-x-2","z-1000"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-3","items-center"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !outline-none !outline-transparent gap-x-2 items-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 pl-4",4,"ngIf"],["type","secondary",1,"flex","!outline-none","!outline-transparent","gap-x-2","items-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","pl-4"],[1,"w-full","flex","justify-between","py-2","px-3","items-center"],["class","flex flex-wrap gap-2 p-2 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-checkbox",3),e.NdJ("checkChange",function(a){return n.onSelectAllChange(a)}),e._uU(4,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,ui,13,8,"ng-container",5),e.qZA()(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.close()}),e.TgZ(9,"span"),e._uU(10,"H\u1ee7y"),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.submit()}),e.TgZ(12,"span"),e._uU(13,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("checked",n.selectedAll),e.xp6(3),e.Q6J("ngForOf",n.fareOptions))},dependencies:[u.AxE,u.Sm8,p.ez,p.mk,p.sg,p.O5,C.j$,x.N8,x.Xq,k.DW,l.UX,Ce.u],encapsulation:2}),i})();function di(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onExpandAirline(o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function pi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onExpandAirline(o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}function _i(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(a,o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function fi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(a,o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}const mi=function(i){return{"!bg-[#FFF8E7] border-[#FCB40A]":i}};function gi(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"cf-checkbox",24),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,c))}),e._uU(3),e.TgZ(4,"span",16),e._uU(5),e.qZA()(),e.YNc(6,_i,3,0,"button",25),e.YNc(7,fi,3,0,"button",25),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(7,mi,t.isExpand)),e.xp6(1),e.Q6J("checked",t.isActive),e.xp6(1),e.hij("",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function hi(i,r){if(1&i&&(e.ynx(0),e.YNc(1,gi,8,9,"ng-container",7),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function vi(i,r){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,hi,2,1,"ng-container",7),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const xi=function(i){return{"bg-[#FCB40A] text-neutral-white":i}};function Ti(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.onToggleFareSelected(a,c))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,xi,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function Ci(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,Ti,3,4,"ng-container",7),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function yi(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ci,2,1,"div",27),e.BQk()),2&i){const t=r.$implicit,n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.isExpand&&n.isExpand)}}function Ei(i,r){if(1&i&&(e.ynx(0),e.YNc(1,yi,2,1,"ng-container",7),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ai(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"cf-checkbox",5),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",12)(4,"div",13),e._UZ(5,"img",14),e.TgZ(6,"div",15),e._uU(7),e.TgZ(8,"span",16),e._uU(9),e.qZA()()()()(),e.YNc(10,di,3,0,"button",17),e.YNc(11,pi,3,0,"button",17),e.qZA(),e.YNc(12,vi,2,1,"div",18),e.YNc(13,Ei,2,1,"ng-container",7),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngForOf",t.childItems)}}let Re=(()=>{class i{constructor(t,n,o,a,c,s,d){this.route=t,this._cfRegister=n,this._permissionService=o,this._modal=a,this._route=c,this._cd=s,this._ref=d,n.registerIcons([u.xgX,u.xbi,u.NYs,u.Hge,u.n78,u.fqi,u.esH,u.cnj,u.TM4]),this.fareOptions=(0,Le.cloneDeep)(d.data.data)}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(n=>{n.isExpand=n.code.toUpperCase()===t.code.toUpperCase()&&!n.isExpand})}onFareTypeExpand(t,n){n.isExpand=!n.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(a=>{a.code!==n.code&&(a.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(n=>{n.isActive=t,n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(a=>{a.isActive=t,a.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,n){n.isActive=t,n.childItems.forEach(o=>{o.isActive=n.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,n){n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(a=>{a.isActive=t,a.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t,n){t.isActive=!t.isActive,n.isActive=n.childItems.some(o=>o.isActive),this.standardizeFareOptionSelected()}close(){this._ref.close(this._ref.data.data)}submit(){this._ref.close(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(n=>{let o=!1;n.childItems.forEach(a=>{a.isActive=a.childItems.some(c=>c.isActive),a.childItems.forEach(c=>{c.isActive=c.childItems.map(s=>s.isActive).reduce((s,d)=>s||d,!1),t=t&&c.childItems.map(s=>s.isActive).reduce((s,d)=>s&&d,!0),c.totalSelectedFare=c.childItems.filter(s=>s.isActive).length,c.isActive&&(o=!0)})}),n.isActive=o,n.totalSelectedFare=n.childItems.reduce((a,c)=>a+c.childItems.map(s=>s.childItems.filter(d=>d.isActive).length).reduce((s,d)=>s+d),0)}),this.selectedAll=t,this._cd.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.gz),e.Y36(u.KNP),e.Y36(L.$A),e.Y36(I.oE),e.Y36(O.F0),e.Y36(e.sBO),e.Y36(I.gb))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fare-option-modal"]],standalone:!0,features:[e.jDz],decls:17,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 px-6",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","px-6"],[1,"w-[calc(32%-12px)]","py-2","px-2.5","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-between","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"ngClass"],["size","medium",1,"w-full",3,"checked","checkChange"],["class","flex w-full text-center !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0","type","secondary",3,"click",4,"ngIf"],["type","secondary",1,"flex","w-full","text-center","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0",3,"click"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"cf-checkbox",5),e.NdJ("checkChange",function(a){return n.onSelectAllChange(a)}),e._uU(7,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,Ai,14,9,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return n.close()}),e.TgZ(12,"span"),e._uU(13,"H\u1ee7y"),e.qZA()(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.submit()}),e.TgZ(15,"span"),e._uU(16,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("checked",n.selectedAll),e.xp6(3),e.Q6J("ngForOf",n.fareOptions))},dependencies:[u.AxE,u.Sm8,p.ez,p.mk,p.sg,p.O5,C.j$,x.N8,x.Xq,k.DW,l.UX,Ce.u],encapsulation:2}),i})();const bi=function(i,r,t){return{"!bg-primary-2-4 !border-0":i,"opacity-[0.4]":r,"md:col-span-2":t}},Zi=function(i){return{"!text-neutral-white opacity-[0.6]":i}},Di=function(i){return{"!text-neutral-white":i}};function Fi(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTime(a))}),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.last;e.xp6(1),e.Q6J("ngClass",e.kEZ(5,bi,t.isActive,t.disable,n)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Zi,t.isActive)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Di,t.isActive)),e.xp6(1),e.hij(" ",t.start+" - "+t.end!="00:00 - 23:59"?t.start+" - "+t.end:"Gi\u1edd c\u1ee5 th\u1ec3","")}}function ki(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",12)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA()(),e.TgZ(8,"cf-slider",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.customRangeItem.rangeValues=o)})("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.timeChange(o,a.customRangeItem))})("onSlideEnd",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.end())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.customRangeItem.startTimeStr),e.xp6(2),e.Oqu(t.customRangeItem.endTimeStr),e.xp6(1),e.Q6J("ngModel",t.customRangeItem.rangeValues)("min",0)("max",1439)("step",1)("range",!0)}}let Si=(()=>{class i{constructor(t,n,o,a){this._cd=n,this.data=o,this.cfBottomSheetRef=a,this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}],this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},t.registerIcons([]),this.orgOptionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.optionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.orgOptionDepartureTime.forEach(c=>{"custom"===c.code&&(this.customRangeItem.rangeValues=[c.startTime,c.endTime],this.customRangeItem.startTimeStr=c.start,this.customRangeItem.endTimeStr=c.end)}),a.containerInstance._rightButtonClick.subscribe(c=>{this.cfBottomSheetRef.dismiss(!1)})}onSelectedTime(t){t.disable||(t.isActive=!t.isActive),"custom"===t.code&&!0===t.isActive?this.optionDepartureTime.forEach(n=>{"custom"!==n.code&&(n.isActive=!1)}):"custom"!==t.code&&!0===t.isActive&&(this.optionDepartureTime[4].isActive=!1)}timeChange(t,n){n.startTimeStr=this.minuteToString(t[0]),n.endTimeStr=this.minuteToString(t[1])}minuteToString(t){const n=Math.floor(t/60),o=t%60;let a=`${n}`,c=`${o}`;return n<10&&(a=`0${n}`),o<10&&(c=`0${o}`),`${a}:${c}`}end(){this.optionDepartureTime[4].start=this.customRangeItem.startTimeStr,this.optionDepartureTime[4].end=this.customRangeItem.endTimeStr,this.optionDepartureTime[4].startTime=this.customRangeItem.rangeValues[0],this.optionDepartureTime[4].endTime=this.customRangeItem.rangeValues[1]}submit(){this.cfBottomSheetRef.dismiss(this.optionDepartureTime)}reset(){this.optionDepartureTime.forEach(t=>{t.isActive=!1}),this._cd.detectChanges()}close(){this.cfBottomSheetRef.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(e.sBO),e.Y36(k.Rr),e.Y36(k.Zu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["time-range-options-bottom-sheet"]],hostAttrs:[1,"!w-full"],standalone:!0,features:[e.jDz],decls:10,vars:2,consts:[[1,"flex","flex-wrap","justify-center","items-center","md:grid","md:grid-cols-2","gap-x-4","gap-y-4","px-4"],[4,"ngFor","ngForOf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4 mt-4",4,"ngIf"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-[40%]","md:!w-full","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1","py-2.5",3,"ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4","mt-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelChange","onSlideEnd"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Fi,6,13,"ng-container",1),e.qZA(),e.YNc(2,ki,9,7,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.reset()}),e._uU(6," \u0110\u1eb7t l\u1ea1i "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.submit()}),e.TgZ(8,"span"),e._uU(9,"Xong"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.optionDepartureTime),e.xp6(1),e.Q6J("ngIf",n.optionDepartureTime[4].isActive))},dependencies:[u.AxE,p.ez,p.mk,p.sg,p.O5,He.nA,l.u5,l.JJ,l.On,x.N8,x.Xq],encapsulation:2}),i})();const Ii={headers:new ee.WM({"Content-Type":"application/json"})};let wi=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}getLstAirlineFareoptions(){return this.http.post(this.appConfig.apiUrlTPS+"ticket-low-fare/get-list-airline-fare-class",JSON.stringify({airline:"vn,qh,vj"}),Ii)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ee.eN),e.LFG(oe.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Oi=["dateFromEl"],Ui=["form",""];function Ni(i,r){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function qi(i,r){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function Mi(i,r){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Bi(i,r){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}const fe=function(i){return[i]},me=function(){return{"text-express-md":!0}};function Ji(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18),e.ynx(2),e.TgZ(3,"cf-select",19),e.NdJ("selectedChange",function(){e.CHM(t);const o=e.MAs(13),a=e.oxw();return e.KtG(a.nextPosition(o))}),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,Ni,1,1,"cf-hint",24),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"cf-select",27,28),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,qi,1,1,"cf-hint",24),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"div",31)(21,"cf-field-group",32),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",34),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",35,36),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33),a=e.MAs(26);return e.oxw().dateFromChange(o),e.KtG(a.close())}),e.qZA(),e.YNc(27,Mi,1,1,"cf-hint",37),e.qZA(),e.TgZ(28,"cf-field-group",32),e._UZ(29,"cf-icon",33),e.TgZ(30,"label",38),e._uU(31," \u0111\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(32,"input",39,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())}),e.ALo(34,"mapper"),e.qZA(),e.YNc(35,Bi,1,1,"cf-hint",37),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("data",t.data)("optionTmp",n)("excludes",e.VKq(32,fe,t.form.controls.endPoint.value)),e.xp6(2),e.Q6J("ngClass",e.DdM(34,me)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("data",t.data)("optionTmp",n)("excludes",e.VKq(35,fe,t.form.controls.startPoint.value)),e.xp6(3),e.Q6J("ngClass",e.DdM(37,me)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(1),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(34,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function Hi(i,r){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function Pi(i,r){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function Li(i,r){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Qi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",58),e.NdJ("dateSelect",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dateSelectMobile(o,a.form.controls.fromDate,a.form.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",59)(5,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("fromDate",t.form.controls.fromDate.value)("displayMonthsOffset",0)}}function Ri(i,r){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Yi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",61,62),e.NdJ("dateSelect",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dateSelectMobile(o,a.form.controls.toDate))}),e.ALo(5,"mapper"),e.qZA()()(),e.TgZ(6,"div",59)(7,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",e.xi3(5,14,t.form.value.toDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("toDate",t.form.controls.toDate.value)("displayMonthsOffset",0)}}function Gi(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.startPoint,o.form.controls.endPoint))}),e.TgZ(3,"cf-select",45),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,Hi,1,1,"cf-hint",24),e.qZA()(),e.TgZ(10,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.endPoint,o.form.controls.startPoint))}),e.TgZ(13,"cf-select",47),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,Pi,1,1,"cf-hint",24),e.qZA()()(),e.TgZ(20,"div",48)(21,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(29),a=e.oxw();return e.KtG(a.departDatePickerClick(o))}),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",50),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",51,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.roundTripFocus(o))}),e.qZA(),e.YNc(27,Li,1,1,"cf-hint",37),e.qZA(),e.YNc(28,Qi,7,13,"ng-template",null,52,e.W1O),e.TgZ(30,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(39),a=e.oxw();return e.KtG(a.departDatePickerClick(o))}),e._UZ(31,"cf-icon",33),e.TgZ(32,"label",50),e._uU(33," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(34,"input",53,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.roundTripFocus(o))}),e.ALo(36,"mapper"),e.qZA(),e.YNc(37,Ri,1,1,"cf-hint",37),e.qZA(),e.YNc(38,Yi,9,17,"ng-template",null,54,e.W1O),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(3),e.Q6J("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(32,fe,t.form.controls.endPoint.value))("data",t.data)("optionTmp",n),e.xp6(2),e.Q6J("ngClass",e.DdM(34,me)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(4),e.Q6J("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(35,fe,t.form.controls.startPoint.value))("data",t.data)("optionTmp",n),e.xp6(2),e.Q6J("ngClass",e.DdM(37,me)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(3),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(36,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function ji(i,r){1&i&&(e.TgZ(0,"div",71),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function zi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onRemoveAirlineOption(o,a))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Ki(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareTypeOption(o,a,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.name+"-"+t.name,"")}}function Vi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",76),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(5).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareOption(o,a,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+n.name+"-"+t.name,"")}}function $i(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Vi,3,1,"div",75),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Xi(i,r){if(1&i&&(e.ynx(0),e.YNc(1,$i,2,1,"ng-container",68),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Wi(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ki,3,1,"div",72),e.YNc(2,Xi,2,1,"ng-container",2),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function eo(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Wi,3,2,"ng-container",68),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function to(i,r){if(1&i&&(e.ynx(0),e.YNc(1,eo,2,1,"ng-container",68),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function no(i,r){if(1&i&&(e.ynx(0),e.YNc(1,zi,3,1,"div",72),e.YNc(2,to,2,1,"ng-container",2),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function io(i,r){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function oo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",66),e.YNc(5,ji,2,0,"div",67),e.YNc(6,no,3,2,"ng-container",68),e.qZA(),e._UZ(7,"cf-icon",69),e.qZA(),e.YNc(8,io,3,0,"div",70),e.ALo(9,"mapper"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",!(t.form.value.specifyFareClassList&&(null==t.form.value.specifyFareClassList?null:t.form.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.form.value.type,t.specifyFareClassList.touched))}}function ao(i,r){1&i&&(e.TgZ(0,"label",78),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&i&&e.Q6J("CfRequired",!1)}function ro(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",81)(2,"div",82),e._UZ(3,"img",83),e.TgZ(4,"span",84),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",86),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function co(i,r){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function so(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",79),e.ynx(2,80),e.YNc(3,ro,9,6,"ng-container",68),e.BQk(),e.YNc(4,co,3,0,"div",70),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.form.value.type,t.specifyPriceList.touched))}}const lo=function(i,r){return{"!bg-primary-2-4 !border-0":i,"opacity-[0.4]":r}},uo=function(i){return{"!text-neutral-white opacity-[0.6]":i}},po=function(i){return{"!text-neutral-white":i}};function _o(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",91),e.NdJ("click",function(){const o=e.CHM(t),a=o.$implicit,c=o.index,s=e.oxw(3);return e.KtG(s.onSelectedTime(a,c))}),e.TgZ(2,"div",92),e._uU(3),e.qZA(),e.TgZ(4,"div",93),e._uU(5),e.qZA()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n)("ngClass",e.WLB(6,lo,t.value.isActive,t.value.disable)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,uo,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,po,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.start+" - "+t.value.end!="00:00 - 23:59"?t.value.start+" - "+t.value.end:"Gi\u1edd c\u1ee5 th\u1ec3"," ")}}function fo(i,r){if(1&i&&(e.TgZ(0,"div",89),e.ynx(1,90),e.YNc(2,_o,6,13,"ng-container",68),e.BQk(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.departureTime.controls)}}const mo=function(){return{standalone:!0}};function go(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",96)(4,"div"),e._uU(5),e.ALo(6,"mapper"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"mapper"),e.qZA()(),e.TgZ(10,"cf-slider",97),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.rangeHours=o)})("onSlideEnd",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.endSliderTime())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,8,t.rangeHours[0],t.minuteToString)),e.xp6(3),e.Oqu(e.xi3(9,11,t.rangeHours[1],t.minuteToString)),e.xp6(2),e.Q6J("ngModel",t.rangeHours)("min",0)("max",1439)("step",1)("range",!0)("ngModelOptions",e.DdM(14,mo))}}function ho(i,r){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function vo(i,r){if(1&i&&(e.ynx(0),e.YNc(1,fo,3,1,"div",87),e.YNc(2,go,11,15,"div",88),e.YNc(3,ho,3,0,"div",70),e.ALo(4,"mapper"),e.ALo(5,"mapper"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",t.departureTime.value[4].isActive&&t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",e.gM2(4,3,e.xi3(5,8,t.departureTime.value,t.selectForDepartureTimeActive),t.checkInvalidField,t.form.value.isTimeRange,t.departureTime.touched))}}function xo(i,r){if(1&i&&(e.TgZ(0,"span",101),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function To(i,r){if(1&i&&(e.ynx(0),e.YNc(1,xo,2,1,"span",100),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Co(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openTimeRangeOptions())}),e.YNc(1,To,2,1,"ng-container",68),e.ALo(2,"mapper"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.departureTime.value,t.selectForDepartureTimeActive))}}function yo(i,r){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function Eo(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Co,3,4,"div",98),e.YNc(2,yo,3,0,"div",70),e.ALo(3,"mapper"),e.BQk()),2&i){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!(null!=(n=e.xi3(3,2,t.departureTime.value,t.selectForDepartureTimeActive))&&n.length))}}function Ao(i,r){if(1&i&&(e.TgZ(0,"div",102),e._UZ(1,"div",103),e.ALo(2,"highlighter"),e._UZ(3,"div",104),e.ALo(4,"highlighter"),e.qZA()),2&i){const t=r.item,n=r.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,t.CityName+", "+t.Title,n.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,t.Code+" - "+t.AirportName,n.text),e.oJD)}}function bo(i,r){1&i&&e._UZ(0,"cf-spinner")}let Zo=(()=>{class i{constructor(t,n,o,a,c,s,d,g){this.fb=t,this._cfRegister=n,this.calendar=o,this._bottomSheetService=a,this._locationDataService=c,this._cdr=s,this._modal=d,this._selectFareFlightSvc=g,this.isMobile=!1,this.maxDate={year:T().add(4,"days").toDate().getFullYear(),month:T().add(4,"days").toDate().getMonth()+1,day:T().add(4,"days").toDate().getDate()},this.numOfMonth=4,this.isLoading=!1,this.selectedFaresTreeChange=new e.vpe,this.rangeHours=[0,1439],this.convertDateFromCFDate=h=>({year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate()}),this.checkInvalidField=(h,v,y)=>v&&!h.length&&y,this.selectForDepartureTimeActive=h=>null==h?void 0:h.filter(v=>v.isActive),this.minuteToString=h=>{const v=Math.floor(h/60),y=h%60;let A=`${v}`,E=`${y}`;return v<10&&(A=`0${v}`),y<10&&(E=`0${y}`),`${A}:${E}`},this.positionSearchCustom=(h,v)=>{const y=this.removeAccents(h.Code.toLowerCase()),A=this.removeAccents(h.Title.toLowerCase()),E=this.removeAccents(h.CityName.toLowerCase()),b=this.removeAccents(h.AirportName.toLowerCase()),S=this.removeAccents(v.toLowerCase());return y.includes(S)||A.includes(S)||E.includes(S)||b.includes(S)},n.registerIcons([u.okA,u._tC,u.wvd,u.UNF,u.n78]),this.minDate=o.getToday(),this.data=this._locationDataService.getAllOption()}ngOnChanges(t){t.selectedFaresTree&&!t.selectedFaresTree.firstChange&&this.convertTreeDataToSpecifyFare(t.selectedFaresTree.currentValue)}swapPoint(t,n){if(""!=t.value&&""!=n.value){const o=t.value;t.setValue(null),t.setValue(n.value),n.setValue(null),n.setValue(o)}}nextPosition(t){setTimeout(()=>{t.selectFocus()})}dateFromChange(t){var n,o,a;this.form.patchValue({toDate:null});const c={year:T(null===(n=this.form.get("fromDate"))||void 0===n?void 0:n.value).add(4,"days").get("year"),month:T(null===(o=this.form.get("fromDate"))||void 0===o?void 0:o.value).add(4,"days").get("month")+1,day:T(null===(a=this.form.get("fromDate"))||void 0===a?void 0:a.value).add(4,"days").get("date")};this.maxDate=c,setTimeout(()=>{t.open()},0)}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}openAirportBottomSheet(t,n){const o=this._bottomSheetService.open(Xn.hm,{headerTitle:"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1,data:{airportOptions:this.data,currentSelected:this._locationDataService.getCityNameByCode(t.value),excludes:[n.value]}});o.containerInstance._leftButtonClick.subscribe(a=>{o.dismiss()}),o.afterDismissed().subscribe(a=>{a&&t.setValue(a.Code)})}departDatePickerClick(t){if(this.isMobile){const n=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0});n.containerInstance._leftButtonClick.subscribe(o=>{n.dismiss()})}}roundTripFocus(t){if(this.isMobile)return t.preventDefault(),!1}dateSelectMobile(t,n,o){var a,c,s;if(n.setValue(t),o){o.setValue(null);const d={year:T(null===(a=this.form.get("toDate"))||void 0===a?void 0:a.value).add(4,"days").get("year"),month:T(null===(c=this.form.get("toDate"))||void 0===c?void 0:c.value).add(4,"days").get("month")+1,day:T(null===(s=this.form.get("toDate"))||void 0===s?void 0:s.value).add(4,"days").get("date")};this.maxDate=d}this._cdr.detectChanges()}onMobileDatePickerOK(){this._bottomSheetService.dismiss()}scrollDown(){this.numOfMonth=this.numOfMonth+4}onShowFareOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(n=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:a=>{a.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onPriceOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(n=this.specifyFareClassList.value)&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(a=>{a&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:a=>{a.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}loadFareOptions(t){var n;return(null===(n=this.selectedFaresTree)||void 0===n?void 0:n.length)>0?(0,Wn.of)(this.selectedFaresTree):this._selectFareFlightSvc.getLstAirlineFareoptions().pipe((0,q.U)(o=>((i,r)=>i.map(t=>{var n,o;const a=null==r?void 0:r.find(c=>c.airline===t.airline);return{name:$n(null===(n=t.airline)||void 0===n?void 0:n.toUpperCase()),code:t.airline,icon:Kn(t.airline),isActive:!!r&&!!a,totalSelectedFare:(null===(o=null==a?void 0:a.fareClass)||void 0===o?void 0:o.length)||0,isDisable:!1,totalFare:zn(t),childItems:t.cabin.map(c=>({code:c.code,name:c.name,isActive:!!a&&Gn(c,a),isDisable:!1,childItems:c.fareType.map(s=>{var d;return{code:s.code,name:s.description,isActive:!!a&&jn,isDisable:!1,totalFare:(null===(d=s.fareClass)||void 0===d?void 0:d.length)||0,childItems:s.fareClass.map(g=>({code:g.code,name:g.name,isActive:!!a&&a.fareClass.find(h=>h===g.code),childItems:[],isDisable:!1})),totalSelectedFare:a?s.fareClass.map(({code:g})=>g).filter(g=>a.fareClass.includes(g)).length:0}})}))}}))(o.data,t)))}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(a=>{var c;null===(c=a.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}openFareOptions(){this.isLoading=!0,this.loadFareOptions().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(Qe,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(Re,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var n;this.specifyFareClassList.clear();for(const o of(i=>i.map(r=>({airline:r.code,fareClass:r.childItems.map(t=>t.childItems.map(n=>n.childItems.filter(o=>o.isActive)).reduce((n,o)=>[...n,...o.map(a=>a.code)],[])).reduce((t,n)=>[...t,...n],[])})))(t))null!==(n=o.fareClass)&&void 0!==n&&n.length&&this.addFareClass(o);this._cdr.markForCheck()}onRemoveAirlineOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(o=>{o.childItems.forEach(a=>{a.childItems.forEach(c=>c.isActive=!1)})}),this.standardizeAirlineOptionSelected(n)}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(a=>{a.isActive=a.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),a.totalSelectedFare=a.childItems.filter(c=>c.isActive).length,a.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,a)=>o+a.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}onRemoveFareTypeOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(a=>{a.isActive=!1}),this.standardizeAirlineOptionSelected(o)}onRemoveFareOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,this.standardizeAirlineOptionSelected(o)}get specifyFareClassList(){return this.form.get("specifyFareClassList")}get specifyPriceList(){return this.form.get("specifyPriceList")}addFareClass(t){var n;const o=this.fb.group({airline:null,fareClass:null});o.patchValue(t),null===(n=this.specifyFareClassList)||void 0===n||n.push(o)}onTimeOptionChange(t){this.form.patchValue({isTimeRange:t}),t&&this.isMobile&&this.openTimeRangeOptions()}openTimeRangeOptions(){this._bottomSheetService.open(Si,{headerTitle:"Gi\u1edd kh\u1edfi h\xe0nh",data:{timeRanges:(0,Le.cloneDeep)(this.departureTime.value)}}).afterDismissed().subscribe(n=>{n&&(this.departureTime.controls.forEach((o,a)=>{this.departureTime.at(a).setValue(n[a])}),this._cdr.detectChanges())})}get departureTime(){return this.form.get("departureTime")}onSelectedTime(t,n){this.departureTime.markAllAsTouched(),"custom"===t.value.code?this.departureTime.controls.forEach((o,a)=>{o.patchValue(a!==n?{isActive:!1}:{isActive:!o.value.isActive})}):(this.departureTime.at(4).patchValue({isActive:!1}),this.departureTime.at(n).patchValue({isActive:!t.value.isActive}))}endSliderTime(){const[t,n]=this.rangeHours;this.departureTime.at(4).patchValue({start:this.minuteToString(t),end:this.minuteToString(n),startTime:t,endTime:n})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(u.KNP),e.Y36(J.jH),e.Y36(k.a2),e.Y36(te._),e.Y36(e.sBO),e.Y36(I.oE),e.Y36(wi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-info-flight-step","form",""]],viewQuery:function(t,n){if(1&t&&e.Gf(Oi,5),2&t){let o;e.iGM(o=e.CRH())&&(n.dateFromEl=o.first)}},inputs:{form:"form",isMobile:"isMobile",selectedFaresTree:"selectedFaresTree"},outputs:{selectedFaresTreeChange:"selectedFaresTreeChange"},standalone:!0,features:[e.TTD,e.jDz],attrs:Ui,decls:41,vars:17,consts:[[1,"w-full","h-full",3,"formGroup"],[1,"text-heading-md","py-4"],[4,"ngIf"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mt-4","mb-4"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,"mb-3"],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],[1,"flex","justify-between","items-center","mb-2"],["icon","clock","size","small"],[3,"checked","checkedChange"],["optionTemplate",""],[1,"flex","items-start","gap-x-2","md:flex-wrap","md:gap-x-0","md:gap-y-4","pb-2"],["placeholder","T\u1eeb?","textField","AirportDisplay","valueField","Code","formControlName","startPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes","selectedChange"],["cf-head-icon","","icon","plane","size","medium",1,"text-neutral-gray-4"],["cf-label","","for","startPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","startPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],["cfInputElement",""],["cf-hint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:top-[45px]","md:!bg-neutral-white","mt-2","md:m-0",3,"click"],["icon","switch","size","small",1,"text-primary-1-4","md:rotate-90"],["textField","AirportDisplay","valueField","Code","valueField","Code","placeholder","\u0110\u1ebfn?","formControlName","endPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes"],["endPoint",""],["cf-label","","for","endPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","endPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],[1,"flex","items-center","gap-x-4","md:flex-wrap","md:gap-x-0","md:gap-y-4","justify-between"],[1,"grow-[293]","!max-w-none","md:flex-grow-0","md:w-full","w-[calc(50%-12px)]",3,"valid","status"],["cfHeadIcon","","icon","calendar","size","medium",1,"text-neutral-gray-4"],["cfLabel","","for","fromDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","fromDate","cfDatepicker","","formControlName","fromDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["cfLabel","","for","toDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","toDate","cfDatepicker","","formControlName","toDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect"],["dateTo","cfDatepicker"],["cf-hint","",3,"hint"],["cfHint","",3,"hint"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4","relative"],[1,"grow-[293]","md:flex-grow-0","md:w-full","hidden","md:block",3,"click"],["formControlName","startPoint","textField","AirportDisplay","valueField","Code","placeholder","T\u1eeb?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:bottom-[38%]","md:!bg-neutral-white",3,"click"],["formControlName","endPoint","textField","AirportDisplay","valueField","Code","placeholder","\u0110\u1ebfn?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4"],[1,"grow-[293]","md:flex-grow-0","w-full",3,"valid","status","click"],["cfLabel","",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","fromDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","mousedown"],["fromDatepickerBottomSheetTpl",""],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","toDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect","mousedown"],["toDatepickerBottomSheetTpl",""],[1,"flex","w-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","formControlName","fromDate","navigation","none","direction","vertical",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","fromDate","displayMonthsOffset","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],["cf-button","",1,"justify-center","w-full",3,"click"],["formControlName","toDate","outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","maxDate","displayMonths","rangeSelection","secondaryCalendar","toDate","displayMonthsOffset","dateSelect"],["dateFromMobileEl",""],[1,""],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],["class","flex flex-wrap justify-start items-center md:justify-between md:items-center gap-x-8 gap-y-2",4,"ngIf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4",4,"ngIf"],[1,"flex","flex-wrap","justify-start","items-center","md:justify-between","md:items-center","gap-x-8","gap-y-2"],["formArrayName","departureTime"],[1,"py-2","px-2.5","min-w-[106px]","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"formGroupName","ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelOptions","ngModelChange","onSlideEnd"],["class","flex flex-wrap gap-2 mt-4 cursor-pointer",3,"click",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mt-4","cursor-pointer",3,"click"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngIf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2,"T\xf9y ch\u1ecdn chuy\u1ebfn bay"),e.qZA(),e.YNc(3,Ji,36,38,"ng-container",2),e.YNc(4,Gi,40,38,"ng-container",2),e._UZ(5,"div",3),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7)(10,"span"),e._uU(11,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(12,"div",8),e.NdJ("click",function(a){return n.onShowFareOptionChange(a)}),e._UZ(13,"cf-switch",9),e.qZA()(),e.YNc(14,oo,10,8,"div",10),e._UZ(15,"div",3),e.TgZ(16,"div",11)(17,"div",4)(18,"div",5),e._UZ(19,"cf-icon",12),e.TgZ(20,"div",7)(21,"span"),e._uU(22,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(23,"div",8),e.NdJ("click",function(a){return n.onPriceOptionChange(a)}),e._UZ(24,"cf-switch",9),e.qZA()(),e.YNc(25,ao,2,1,"label",13),e.ALo(26,"mapper"),e.qZA(),e.YNc(27,so,6,7,"ng-container",2),e._UZ(28,"div",3),e.TgZ(29,"div",14)(30,"div",5),e._UZ(31,"cf-icon",15),e.TgZ(32,"div",7)(33,"span"),e._uU(34,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(35,"cf-switch",16),e.NdJ("checkedChange",function(a){return n.onTimeOptionChange(a)}),e.qZA()(),e.YNc(36,vo,6,11,"ng-container",2),e.YNc(37,Eo,4,5,"ng-container",2),e.qZA(),e.YNc(38,Ao,5,8,"ng-template",null,17,e.W1O),e.YNc(40,bo,1,0,"cf-spinner",2)),2&t&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(9),e.Q6J("checked","FARE"===n.form.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===n.form.value.type),e.xp6(10),e.Q6J("checked","PRICE"===n.form.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(26,12,n.specifyPriceList.value,n.checkInvalidField,"PRICE"===n.form.value.type,n.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===n.form.value.type),e.xp6(8),e.Q6J("checked",n.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[p.ez,p.mk,p.sg,p.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,u.AxE,u.Sm8,ie.m,C.j$,C.BN,C.lt,M.q,x.N8,x.Xq,k.DW,Qn.C,Ne.T,re.C,J.Cs,_e.q,Y.Rq,Y.Ry,J._o,Pe.I,Z.OR,He.nA,l.u5,l.On],encapsulation:2}),i})();var Ye=m(19123);function Do(i,r){if(1&i&&(e.TgZ(0,"cf-radio",12),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const Fo=function(){return{standalone:!0}};function ko(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"cf-radio-group",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.distributionChannelTempMobile=o)}),e.YNc(2,Do,2,2,"cf-radio",10),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirmDistributeChannel())}),e._uU(4,"X\xe1c nh\u1eadn"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.distributionChannelTempMobile)("ngModelOptions",e.DdM(3,Fo)),e.xp6(1),e.Q6J("ngForOf",t.distributionChannelOptions)}}const So=[{id:"B2B_GMBR;B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{id:"B2B_GMBR",name:"Flychills"},{id:"B2C_GMBR",name:"GMBR"}];let Io=(()=>{class i{constructor(t,n,o){this._cfRegister=t,this._permissionService=n,this._bottomSheetService=o,this.isMobile=!1,this.distributionChannelTempMobile="B2B_GMBR;B2C_GMBR",this.distributionChannelOptions=So,t.registerIcons([u.ctk,u.gEm])}isAgent2(){const t=this._permissionService.getCurrentAuthor();return"AGENT2"===(null==t?void 0:t.titleCode.toUpperCase())}selectMobileDistributionChannel(t){if(!this.isMobile)return;const n=this._bottomSheetService.open(t,{headerTitle:"Vai tr\xf2",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",restoreFocus:!1});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(()=>{var o;this.distributionChannelTempMobile=null===(o=this.form.get("distributionChannel"))||void 0===o?void 0:o.value})}onConfirmDistributeChannel(){this.form.patchValue({distributionChannel:this.distributionChannelTempMobile}),this._bottomSheetService.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(L.$A),e.Y36(k.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cheapflightclient-add-config-flight-step"]],inputs:{form:"form",isMobile:"isMobile"},standalone:!0,features:[e.jDz],decls:11,vars:5,consts:[[3,"formGroup"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"mb-6","md:mb-[1px]"],[1,"",3,"click"],["data-id","distributionChannel","textField","name","valueField","id","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"ngClass","status","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],["distributionChannelTpl",""],[1,"flex","flex-col","w-full","p-4","gap-y-6"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelOptions","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],["cf-button","",1,"w-full","justify-center",3,"click"],["size","medium",3,"value"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(n.selectMobileDistributionChannel(c))}),e.TgZ(4,"cf-select",4)(5,"label",5),e._UZ(6,"cf-icon",6),e.TgZ(7,"span"),e._uU(8,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()(),e.YNc(9,ko,5,4,"ng-template",null,7,e.W1O),e.qZA()}2&t&&(e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngClass",n.isMobile?"pointer-events-none":"pointer-events-auto")("status",n.form.controls.distributionChannel.invalid&&(n.form.controls.distributionChannel.dirty||n.form.controls.distributionChannel.touched)?"error":"default")("data",n.distributionChannelOptions)("allowSearch",!1))},dependencies:[p.ez,p.mk,p.sg,l.UX,l._Y,l.JJ,l.JL,l.sg,l.u,u.AxE,u.Sm8,C.j$,M.q,Ye.o,Ye.T,l.u5,l.On,x.N8,x.Xq],encapsulation:2}),i})();var Ae=m(9381);let be=(()=>{class i{constructor(){}setOrderId(t){this.orderId=t}getOrderId(){return this.orderId}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"add-info-flight-step",27),e.NdJ("selectedFaresTreeChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedFaresTree=o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)("selectedFaresTree",t.selectedFaresTree)}}function Oo(i,r){if(1&i&&e._UZ(0,"cheapflightclient-add-config-flight-step",28),2&i){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)}}function Uo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}const Ge=function(i,r,t,n,o){return[i,r,t,n,o]};function No(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,Ge,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function qo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function Mo(i,r){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,Uo,3,0,"button",30),e.YNc(2,No,5,13,"button",31),e.YNc(3,qo,3,1,"button",31),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function Bo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function Jo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,Ge,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function Ho(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA(),e._UZ(3,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function Po(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"div",37),e.YNc(2,Bo,3,0,"button",38),e.YNc(3,Jo,5,13,"button",39),e.YNc(4,Ho,4,1,"button",39),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function Lo(i,r){1&i&&e._UZ(0,"cf-spinner")}var V=(()=>{return(i=V||(V={}))[i.INFO_FLIGHT=0]="INFO_FLIGHT",i[i.CONFIG_HUNT=1]="CONFIG_HUNT",V;var i})();const Qo=[{title:"Th\xf4ng tin chuy\u1ebfn bay",id:V.INFO_FLIGHT},{title:"C\u1ea5u h\xecnh s\u0103n v\xe9",id:V.CONFIG_HUNT}],Ro=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}],Yo=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!0,disable:!1,startTime:0,endTime:1439,totalAvailable:0}];let Go=(()=>{class i{constructor(t,n,o,a,c,s,d,g,h,v){this.fb=t,this._cfRegister=n,this.router=o,this._mobileDetectService=a,this._cdr=c,this._modal=s,this._bottomSheetService=d,this._huntTicketAdvancedBindingSvc=g,this._bookingHunterSvc=h,this._flightDataService=v,this.currentStep=V.INFO_FLIGHT,this.STEP_PAGE=V,this.isMobile=!1,this.stepList=Qo,this.isLoading=!1,this.checkValidStepInfoFlight=(y,A,E,b)=>{var S,$;let H=!1;return"PRICE"===y.type?H=!(null!==(S=A.filter(ke=>ke.price))&&void 0!==S&&S.length)||H:"FARE"===y.type&&(H=!(null!=E&&E.length)||H),y.isTimeRange&&(H=!(null!==($=null==b?void 0:b.filter(ke=>ke.isActive))&&void 0!==$&&$.length)||H),H},n.registerIcons([u.toh,u.NNX,u.rJw])}ngOnInit(){this.initOrderIdForBinding(),this.initCheckMobile(),this.initForm()}initOrderIdForBinding(){const t=this._huntTicketAdvancedBindingSvc.getOrderId();t&&this._bookingHunterSvc.getPnrOrderDetail(t).subscribe(n=>{const o=n.data.orderInfo.fareMonitors,a=n.data.orderInfo.priceMonitors,{rangeTime:c,startPoint:s,endPoint:d,rangeDateTime:g}=n.data.ticketInfo.journeys[0];this.form.patchValue({startPoint:s,endPoint:d,distributionChannel:n.data.distributionChannel,toDate:T.unix(g.toDate).toDate(),fromDate:T.unix(g.fromDate).toDate(),isTimeRange:!(1===(null==c?void 0:c.length)&&"0:00"==c[0].fromDate&&"23:59"==c[0].toDate),type:null!=o&&o.length?"FARE":"PRICE"});const h=n.data.orderInfo.fareMonitors.reduce((v,y)=>[...v,...y.specifyFareClass],[]);this._bookingHunterSvc.getLstAirlineFareoptions().pipe((0,q.U)(v=>{var y;return null===(y=null==v?void 0:v.data)||void 0===y?void 0:y.map(A=>{var E;return{name:this._flightDataService.getAirlineNameByCode(null===(E=A.airline)||void 0===E?void 0:E.toUpperCase()),code:A.airline,icon:this._flightDataService.getAirlineIconByCode(A.airline),isActive:!1,isDisable:!1,totalFare:this.countAirlineTotalFare(A),childItems:A.cabin.map(b=>({code:b.code,name:b.name,isActive:!1,isDisable:!1,childItems:b.fareType.map(S=>{var $;return{code:S.code,name:S.description,isActive:!1,isDisable:!1,totalFare:(null===($=S.fareClass)||void 0===$?void 0:$.length)||0,childItems:S.fareClass.map(H=>({code:H.code,name:H.name,isActive:!1,childItems:[],isDisable:!1}))}})}))}})})).subscribe({next:v=>{this.selectedFaresTree=v,this.selectedFaresTree.forEach(y=>{y.childItems.forEach(A=>{A.childItems.forEach(E=>{E.childItems.forEach(b=>{h.includes(b.code)&&(b.isActive=!0)})})}),this.standardizeAirlineOptionSelected(y),this._cdr.detectChanges()})},error:v=>{console.log(v)}}),null!=a&&a.length&&this.specifyPriceList.controls.forEach((v,y)=>{a.forEach(A=>{A.airline===v.value.id&&v.patchValue({price:A.targetPrice})})})}),this._huntTicketAdvancedBindingSvc.setOrderId("")}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(a=>{var c;null===(c=a.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(a=>{a.isActive=a.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),a.totalSelectedFare=a.childItems.filter(c=>c.isActive).length,a.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,a)=>o+a.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0)}initForm(){this.form=this.fb.group({specifyFareClassList:this.fb.array([]),specifyPriceList:this.fb.array([]),type:"FARE",endPoint:[null,l.kI.required],startPoint:[null,l.kI.required],toDate:[T().toDate(),l.kI.required],fromDate:[T().toDate(),l.kI.required],isTimeRange:!1,departureTime:this.fb.array([]),distributionChannel:["B2B_GMBR;B2C_GMBR",l.kI.required]}),Ro.forEach(t=>{this.initDataPriceList(t)}),Yo.forEach(t=>{this.initDepartureTime(t)})}initDataPriceList(t){const n=this.fb.group({name:null,id:null,price:null,image:null});n.patchValue(t),this.specifyPriceList.push(n)}initDepartureTime(t){const n=this.fb.group({name:null,code:null,start:null,end:null,isActive:!1,disable:!1,startTime:null,endTime:null,totalAvailable:0});n.patchValue(t),this.departureTimeList.push(n)}get specifyPriceList(){return this.form.get("specifyPriceList")}get departureTimeList(){return this.form.get("departureTime")}initCheckMobile(){this._mobileDetectService.mobileSubject.subscribe(t=>{this.isMobile=t})}onMoveToHuntTicketAdvancedList(){this.router.navigate(["admin/hunt-ticket-advanced-list"])}get specifyFareClassList(){return this.form.get("specifyFareClassList")}onSubmit(){this.form.invalid||(this.isMobile?this._bottomSheetService.open(Je,{headerTitle:"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",containerFullHeigh:!0,data:{rawData:this.form.value,selectedFaresTree:this.selectedFaresTree}}):this._modal.open(Je,{data:this.form.value,selectedFaresTree:this.selectedFaresTree}).afterClosed$.subscribe({next:n=>{}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(u.KNP),e.Y36(O.F0),e.Y36(Ae.L),e.Y36(e.sBO),e.Y36(I.oE),e.Y36(k.a2),e.Y36(be),e.Y36(K.yL),e.Y36(j.G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-add"]],standalone:!0,features:[e.jDz],decls:33,vars:8,consts:[[1,"p-6","h-full","block","w-full","md:p-3",3,"formGroup"],[1,"flex","gap-x-2","mb-4","justify-start","items-center"],[1,"text-body-md-short","text-neutral-gray-6","cursor-pointer",3,"click"],["icon","chevron_right","size","small",1,"text-neutral-gray-4"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","flex-col","h-full","w-full","justify-center","items-center"],[1,"w-[70%]","md:w-full"],[1,"flex","justify-between","items-center","mb-4","md:hidden"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"flex","flex-col","w-full","justify-center"],[1,"block","gap-y-4","mb-2","md:mb-12"],[1,"flex","rounded","w-full","bg-white","justify-between","shadow-cf-md","mb-8","p-4","items-center"],[1,"flex","justify-start","gap-x-0","items-center"],[1,"h-full","flex","flex-col","justify-center","items-end"],["src","assets/images/booking-hunter-banner.svg",1,"w-full","object-contain"],[1,"h-full","p-4","items-start"],[1,"text-express-md","text-neutral-black"],[1,"flex","flex-col","gap-3","bg-white","rounded","shadow-cf-md","gap-y-3","p-6","md:px-3"],[1,"flex","justify-center","items-center","md:items-center","w-[80%]","mx-auto"],[3,"steps","stepCur"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange",4,"ngIf"],[3,"form","isMobile",4,"ngIf"],["class","w-full py-4",4,"ngIf"],["class","bg-neutral-white pt-3 pr-4 pb-3 pl-4 flex-row items-end justify-end w-full fixed bottom-0 hidden md:flex md:justify-between",4,"ngIf"],[4,"ngIf"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange"],[3,"form","isMobile"],[1,"w-full","py-4"],["cf-button","","size","medium","type","secondary","class","bg-white float-left",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center float-right",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left",3,"click"],["cfHeadIcon","","icon","chevron_left","size","small",1,"mr-2"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"bg-neutral-white","pt-3","pr-4","pb-3","pl-4","flex-row","items-end","justify-end","w-full","fixed","bottom-0","hidden","md:flex","md:justify-between"],[1,"flex","flex-row","items-center","justify-start","shrink-0","relative","md:w-full"],["cf-button","","size","medium","type","secondary","class","bg-white float-left justify-center md:w-full",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center ml-2 md:w-full",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left","justify-center","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return n.onMoveToHuntTicketAdvancedList()}),e._uU(3," S\u0103n v\xe9 t\u1ebft "),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"div",4),e._uU(6," T\u1ea1o y\xeau c\u1ea7u s\u0103n "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.TgZ(12,"div",10),e._uU(13," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"div"),e._UZ(20,"img",16),e.qZA()(),e.TgZ(21,"div",17)(22,"div",18),e._uU(23," M\u1ed9t c\xe1ch \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng \u0111\u1eb7t ch\u1ed7 nh\u1eefng chuy\u1ebfn bay v\xe0o d\u1ecbp l\u1ec5! "),e.qZA()()()(),e.TgZ(24,"div",19)(25,"div",20),e._UZ(26,"cheapflightclient-step-ct",21),e.qZA(),e.TgZ(27,"div"),e.YNc(28,wo,1,3,"add-info-flight-step",22),e.YNc(29,Oo,1,2,"cheapflightclient-add-config-flight-step",23),e.qZA()(),e.YNc(30,Mo,4,3,"div",24),e.qZA()()(),e.YNc(31,Po,5,3,"div",25),e.qZA()(),e.YNc(32,Lo,1,0,"cf-spinner",26)),2&t&&(e.Q6J("formGroup",n.form),e.xp6(26),e.Q6J("steps",n.stepList)("stepCur",n.currentStep),e.xp6(2),e.Q6J("ngIf",n.currentStep===n.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",n.currentStep===n.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[p.ez,p.O5,x.N8,x.Xq,u.AxE,u.Sm8,Ln,Z.OR,l.UX,l._Y,l.JL,l.sg,Zo,Io,k.DW,_e.q],encapsulation:2}),i})();var Ze=m(98184),je=m(74891),ze=m(24513),le=m(38514),D=m(53820),ge=m(62163);function jo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",37,38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("EDIT"))}),e._uU(3," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.pnrOrderData.canUpdate)("manualHandle",t.pnrOrderData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function zo(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("CANCEL"))}),e._uU(1," H\u1ee7y s\u0103n "),e.qZA()}}function Ko(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("CREATE_NEW"))}),e._uU(1," T\u1ea1o l\u1ea1i "),e.qZA()}}const he=function(i,r,t){return[i,r,t]},Ke=function(i,r){return[i,r]};function Vo(i,r){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,jo,4,4,"button",35),e.YNc(2,zo,2,0,"button",36),e.YNc(3,Ko,2,0,"button",36),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.kEZ(3,he,t.STATUS_ORDER.CREATE,t.STATUS_ORDER.IN_PROCESS,t.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.kEZ(7,he,t.STATUS_ORDER.CREATE,t.STATUS_ORDER.IN_PROCESS,t.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.WLB(11,Ke,t.STATUS_ORDER.CANCEL,t.STATUS_ORDER.EXPIRED).includes(t.pnrOrderData.state))}}function $o(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"span",41),e._uU(2),e.qZA(),e.TgZ(3,"span",42),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("(+",t.pnrOrderData.representPax.remainingPax,")"),e.xp6(2),e.hij("(+",t.pnrOrderData.representPax.remainingPax," h\xe0nh kh\xe1ch kh\xe1c)")}}function Xo(i,r){if(1&i&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.ownerName||"-")}}function Wo(i,r){if(1&i&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.timeCreated||"-")}}function ea(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"H\xe3ng bay"),e.qZA())}function ta(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Gi\xe1 v\xe9"),e.qZA())}function na(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("BOOKING_DETAIL"))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.pnrOrderData.fareInfo.detectedPnr," ")}}function ia(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function oa(i,r){1&i&&e._UZ(0,"cf-icon",44)}function aa(i,r){1&i&&e._UZ(0,"cf-icon",45)}function ra(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",46,38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("EDIT"))}),e._uU(3," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.pnrOrderData.canUpdate)("manualHandle",t.pnrOrderData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function ca(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("CANCEL"))}),e._uU(1," H\u1ee7y s\u0103n "),e.qZA()}}function sa(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("CREATE_NEW"))}),e._uU(1," T\u1ea1o l\u1ea1i "),e.qZA()}}const la=function(i){return{"md:!items-end":i}},ve=function(i){return{"md:!hidden":i}};let ua=(()=>{class i{constructor(t,n,o,a){this._permissionService=n,this._bottomSheetService=o,this._mobileDetectService=a,this.bookingHunterType=le.G.HUNT_NEW_TICKET,this.TYPE_ORDER=le.G,this.status=D.b.COMPLETED,this.STATUS_ORDER=D.b,this.CARD_HUNTER_STATUS=K.u1,this.MONITOR_TYPE=ge.$,this.actionChange=new e.vpe,this.viewListAgentForMonitorHuntFare=this._permissionService.hasPermission(L.or.ViewListAgentForMonitorHuntFare),this.canMonitorHuntFareTicket=this._permissionService.hasPermission(L.or.CanMonitorHuntFareTicket),this.isShowMore=!1,t.registerIcons([u.esH,u.NNX,u.Hge,u.Ffn,u.SlW,u.$PG,u.qDv,u.cnj,u.okA,u.xbi,u.n78,u.fqi,u.BbA,u.QkI,u.$S,u.SK7])}ngOnInit(){this.status=this.pnrOrderData.state}onAction(t){this._bottomSheetService&&this._bottomSheetService.dismiss(),this.actionChange.emit(t)}onShow(t){t.preventDefault(),t.stopPropagation(),this.isShowMore=!this.isShowMore}onClickDetail(){this._mobileDetectService.isMobile()&&this.onAction("DETAIL")}openBottomSheet(t,n){t.preventDefault(),t.stopPropagation(),this.bottomSheetAction=this._bottomSheetService.open(n,{hasHeader:!1,rightButtonIconClass:"text-neutral-gray-4"})}onConfirmCancel(t){this.bottomSheetAction.dismiss(),t.preventDefault(),t.stopPropagation(),this.mobileConfirmBts=this._bottomSheetService.open(Z.Q4,{headerTitle:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:`<div>B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${this.pnrOrderData.code}?</strong></div>`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}}),this.mobileConfirmBts.containerInstance._rightButtonClick.subscribe(n=>{this.mobileConfirmBts.dismiss()}),this.mobileConfirmBts.afterDismissed().subscribe(n=>{n?this.onAction("CANCEL"):this.onClose()})}onClose(){this.mobileConfirmBts.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(L.$A),e.Y36(k.a2),e.Y36(Ae.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-item"]],inputs:{bookingHunterType:"bookingHunterType",pnrOrderData:"pnrOrderData"},outputs:{actionChange:"actionChange"},standalone:!0,features:[e.jDz],decls:73,vars:60,consts:[[1,"rounded-lg","overflow-hidden","bg-white"],[1,"px-2.5","py-1.5","flex","justify-between","gap-x-2.5"],[1,"flex","items-center","gap-x-2"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],["class","flex gap-x-1.5 md:hidden",4,"ngIf"],[1,"p-3","flex","flex-col","gap-y-2",3,"click"],[1,"flex","justify-between","items-center"],[1,"flex","flex-col","justify-between","gap-y-1.5"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","plane","size","small"],["icon","arrow_right","size","small"],[1,"flex","gap-x-[30px]","pl-[26px]"],[1,"text-body-sm","text-neutral-gray-4"],[1,"text-express-sm","text-neutral-gray-6"],[1,"flex","gap-x-1","items-center"],["class","text-express-sm text-neutral-gray-4",4,"ngIf"],["cf-button","","size","medium",1,"md:hidden",3,"click"],[1,"p-2","bg-neutral-gray-1","rounded","md:flex","md:gap-x-4","md:justify-center","md:items-center","md:p-3",3,"ngClass"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],["class","min-w-[100px] flex flex-col justify-between gap-y-2 md:flex-row md:gap-x-4",4,"ngIf"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4",3,"ngClass"],[4,"ngIf"],[1,"text-express-sm","text-neutral-gray-6",3,"click"],["class","text-secondary-3-4 hover:underline cursor-default",3,"click",4,"ngIf"],[1,"md:p-2","hidden","md:block",3,"click"],["icon","chevron_down","size","small",4,"ngIf"],["icon","chevron_up","size","small",4,"ngIf"],[1,"w-full","md:flex","gap-3","hidden"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white flex-1",3,"disabled","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white flex-1",3,"click",4,"ngIf"],[1,"flex","gap-x-1.5","md:hidden"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"disabled","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"click",4,"ngIf"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"disabled","manualHandle","placement","cfTooltip","click"],["trigger","","originOverlay","cdkOverlayOrigin"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"click"],[1,"text-express-sm","text-neutral-gray-4"],[1,"hidden","md:block"],[1,"md:hidden"],[1,"text-secondary-3-4","hover:underline","cursor-default",3,"click"],["icon","chevron_down","size","small"],["icon","chevron_up","size","small"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white","flex-1",3,"disabled","manualHandle","placement","cfTooltip","click"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white","flex-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"cf-icon",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,Vo,4,14,"div",6),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){return n.onClickDetail()}),e.TgZ(9,"div",8)(10,"div",9)(11,"div",10),e._UZ(12,"cf-icon",11),e.TgZ(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"cf-icon",12),e.TgZ(16,"div"),e._uU(17),e.qZA()(),e.TgZ(18,"div",13)(19,"div")(20,"div",14),e._uU(21,"Ng\xe0y kh\u1edfi h\xe0nh:"),e.qZA(),e.TgZ(22,"div",15),e._uU(23),e.ALo(24,"date"),e.ALo(25,"date"),e.qZA()(),e.TgZ(26,"div")(27,"div",14),e._uU(28,"H\xe0nh kh\xe1ch:"),e.qZA(),e.TgZ(29,"div",16)(30,"div",15),e._uU(31),e.qZA(),e.YNc(32,$o,5,2,"div",17),e.qZA()()()(),e.TgZ(33,"button",18),e.NdJ("click",function(){return n.onAction("DETAIL")}),e._uU(34," Chi ti\u1ebft "),e.qZA()(),e.TgZ(35,"div",19)(36,"div",20),e.YNc(37,Xo,5,1,"div",21),e.TgZ(38,"div",22)(39,"div",23),e._uU(40,"M\xe3 y\xeau c\u1ea7u"),e.qZA(),e.TgZ(41,"div",15),e._uU(42),e.qZA()(),e.YNc(43,Wo,5,1,"div",21),e.TgZ(44,"div",24)(45,"div",23),e._uU(46,"H\u1ea1n s\u0103n v\xe9"),e.qZA(),e.TgZ(47,"div",15),e._uU(48),e.qZA()(),e.TgZ(49,"div",24)(50,"div",23),e._uU(51,"S\u0103n theo"),e.qZA(),e.TgZ(52,"div",15),e.YNc(53,ea,2,0,"span",25),e.YNc(54,ta,2,0,"span",25),e.qZA()(),e.TgZ(55,"div",24)(56,"div",23),e._uU(57,"H\xe3ng bay"),e.qZA(),e.TgZ(58,"div",15),e._uU(59),e.qZA()(),e.TgZ(60,"div",24)(61,"div",23),e._uU(62,"PNR m\u1edbi"),e.qZA(),e.TgZ(63,"div",26),e.NdJ("click",function(){return n.onAction("BOOKING_DETAIL")}),e.YNc(64,na,2,1,"a",27),e.YNc(65,ia,2,0,"span",25),e.qZA()()(),e.TgZ(66,"div",28),e.NdJ("click",function(a){return n.onShow(a)}),e.YNc(67,oa,1,0,"cf-icon",29),e.YNc(68,aa,1,0,"cf-icon",30),e.qZA()(),e.TgZ(69,"div",31),e.YNc(70,ra,4,4,"button",32),e.YNc(71,ca,2,0,"button",33),e.YNc(72,sa,2,0,"button",33),e.qZA()()()),2&t&&(e.xp6(1),e.Tol(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].backgroundColor),e.xp6(2),e.Tol(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].textColor),e.xp6(1),e.Q6J("icon",n.CARD_HUNTER_STATUS[n.pnrOrderData.state].icon),e.xp6(2),e.Oqu(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].description),e.xp6(1),e.Q6J("ngIf",n.canMonitorHuntFareTicket),e.xp6(7),e.AsE("",n.pnrOrderData.startPointName," (",n.pnrOrderData.startPoint,")"),e.xp6(3),e.AsE("",n.pnrOrderData.endPointName," (",n.pnrOrderData.endPoint,")"),e.xp6(6),e.hij(" ",e.xi3(24,33,1e3*n.pnrOrderData.rangeDateTime.fromDate,"dd/MM/yyy")+" - "+e.xi3(25,36,1e3*n.pnrOrderData.rangeDateTime.toDate,"dd/MM/yyy"),""),e.xp6(8),e.Oqu(n.pnrOrderData.representPax.name),e.xp6(1),e.Q6J("ngIf",n.pnrOrderData.representPax.remainingPax),e.xp6(3),e.Q6J("ngClass",e.VKq(39,la,n.isShowMore)),e.xp6(2),e.Q6J("ngIf",n.viewListAgentForMonitorHuntFare&&n.pnrOrderData.ownerName),e.xp6(5),e.Oqu(n.pnrOrderData.code||"-"),e.xp6(1),e.Q6J("ngIf",!n.viewListAgentForMonitorHuntFare),e.xp6(1),e.Q6J("ngClass",e.VKq(41,ve,!n.isShowMore)),e.xp6(4),e.Oqu(n.pnrOrderData.timeExpired||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(43,ve,!n.isShowMore)),e.xp6(4),e.Q6J("ngIf",n.pnrOrderData.monitorType===n.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",n.pnrOrderData.monitorType===n.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngClass",e.VKq(45,ve,!n.isShowMore)),e.xp6(4),e.Oqu(n.pnrOrderData.airline||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(47,ve,!n.isShowMore)),e.xp6(4),e.Q6J("ngIf",n.pnrOrderData.fareInfo.detectedPnr),e.xp6(1),e.Q6J("ngIf",!n.pnrOrderData.fareInfo.detectedPnr),e.xp6(2),e.Q6J("ngIf",!n.isShowMore),e.xp6(1),e.Q6J("ngIf",n.isShowMore),e.xp6(2),e.Q6J("ngIf",e.kEZ(49,he,n.STATUS_ORDER.CREATE,n.STATUS_ORDER.IN_PROCESS,n.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(n.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.kEZ(53,he,n.STATUS_ORDER.CREATE,n.STATUS_ORDER.IN_PROCESS,n.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(n.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.WLB(57,Ke,n.STATUS_ORDER.CANCEL,n.STATUS_ORDER.EXPIRED).includes(n.pnrOrderData.state)))},dependencies:[p.ez,p.mk,p.O5,p.uU,u.AxE,u.Sm8,x.N8,x.Xq,ze.Lk,je.f,Ze.xu,Ze.U8,k.DW],encapsulation:2}),i})();var De=m(77579),da=m(63900),pa=m(82722),_a=m(78372);function fa(i,r){1&i&&(e.TgZ(0,"div",46),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function ma(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(4);return e.KtG(c.onRemoveAirlineOption(o,a))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function ga(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(3).$implicit,s=e.oxw(4);return e.KtG(s.onRemoveFareTypeOption(o,a,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.name+"-"+t.name,"")}}function ha(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(5).$implicit,s=e.oxw(4);return e.KtG(s.onRemoveFareOption(o,a,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+n.name+"-"+t.name,"")}}function va(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ha,3,1,"div",50),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function xa(i,r){if(1&i&&(e.ynx(0),e.YNc(1,va,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ta(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ga,3,1,"div",47),e.YNc(2,xa,2,1,"ng-container",6),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Ca(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ta,3,2,"ng-container",43),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ya(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ca,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ea(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ma,3,1,"div",47),e.YNc(2,ya,2,1,"ng-container",6),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Aa(i,r){1&i&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function ba(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",39),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",41),e.YNc(5,fa,2,0,"div",42),e.YNc(6,Ea,3,2,"ng-container",43),e.qZA(),e._UZ(7,"cf-icon",44),e.qZA(),e.YNc(8,Aa,3,0,"div",45),e.ALo(9,"mapper"),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(5),e.Q6J("ngIf",!(t.formGroup.value.specifyFareClassList&&(null==t.formGroup.value.specifyFareClassList?null:t.formGroup.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.formGroup.value.type,t.specifyFareClassList.touched))}}function Za(i,r){1&i&&(e.TgZ(0,"label",53),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&i&&e.Q6J("CfRequired",!1)}function Da(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",56)(2,"div",57),e._UZ(3,"img",58),e.TgZ(4,"span",59),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",61),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function Fa(i,r){1&i&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function ka(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",54),e.ynx(2,55),e.YNc(3,Da,9,6,"ng-container",43),e.BQk(),e.YNc(4,Fa,3,0,"div",45),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched))}}function Sa(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",10)(1,"div")(2,"div",11)(3,"div",12),e._UZ(4,"cf-icon",13),e.TgZ(5,"span",14),e._uU(6,"M\xe3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA()()(),e.TgZ(7,"div",15),e._uU(8),e.qZA()(),e.TgZ(9,"div",16)(10,"div",17)(11,"div",18),e._uU(12),e.qZA(),e.TgZ(13,"div",19),e._uU(14),e.qZA()(),e.TgZ(15,"div",20)(16,"div",21)(17,"div",22),e._UZ(18,"div",23)(19,"div",24),e.qZA()(),e.TgZ(20,"div"),e._UZ(21,"cf-icon",25),e.qZA()(),e.TgZ(22,"div",17)(23,"div",18),e._uU(24),e.qZA(),e.TgZ(25,"div",19),e._uU(26),e.qZA()()(),e._UZ(27,"div",26),e.TgZ(28,"div",11)(29,"div",27),e._UZ(30,"cf-icon",28),e.TgZ(31,"div",29)(32,"span"),e._uU(33,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(34,"div",30),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onShowFareOptionChange(o))}),e._UZ(35,"cf-switch",31),e.qZA()(),e.YNc(36,ba,10,8,"div",32),e._UZ(37,"div",26),e.TgZ(38,"div",33)(39,"div",11)(40,"div",27),e._UZ(41,"cf-icon",34),e.TgZ(42,"div",29)(43,"span"),e._uU(44,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(45,"div",30),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPriceOptionChange(o))}),e._UZ(46,"cf-switch",31),e.qZA()(),e.YNc(47,Za,2,1,"label",35),e.ALo(48,"mapper"),e.qZA(),e.YNc(49,ka,6,7,"ng-container",6),e.TgZ(50,"div",33)(51,"cf-select",36)(52,"label",37),e._UZ(53,"cf-icon",38),e.TgZ(54,"span"),e._uU(55,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.formGroup),e.xp6(8),e.Oqu(null==t.configOrderData?null:t.configOrderData.code),e.xp6(4),e.AsE(" ",t.configOrderData?t.configOrderData.journeys[0].startPointName:""," (",t.configOrderData?t.configOrderData.journeys[0].startPoint:"",") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].departTime),e.xp6(10),e.AsE(" ",t.configOrderData.journeys[0].endPointName," (",t.configOrderData.journeys[0].endPoint,") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].arrivalTime),e.xp6(9),e.Q6J("checked","FARE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.formGroup.value.type),e.xp6(10),e.Q6J("checked","PRICE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(48,17,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===t.formGroup.value.type),e.xp6(2),e.Q6J("status",t.formGroup.controls.distributionChannel.invalid&&(t.formGroup.controls.distributionChannel.dirty||t.formGroup.controls.distributionChannel.touched)?"error":"default")("ngClass",t.isMobile?"pointer-events-none":"pointer-events-auto")("data",t.distributionChannelOptions)("allowSearch",!1)}}function Ia(i,r){if(1&i&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.fromDate," - ",t.toDate," ")}}function wa(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Oa(i,r){if(1&i&&(e.TgZ(0,"div",87)(1,"div",12),e._UZ(2,"img",88),e.TgZ(3,"div",82),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function Ua(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Oa,7,8,"div",86),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function Na(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ua,2,1,"div",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.formGroup.value.specifyPriceList)}}function qa(i,r){1&i&&(e.TgZ(0,"div",82)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function Ma(i,r){if(1&i&&(e.TgZ(0,"div",87)(1,"div",12),e._UZ(2,"img",88),e.TgZ(3,"div",82),e._uU(4),e.TgZ(5,"span",91),e._uU(6),e.qZA()()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function Ba(i,r){if(1&i&&(e.TgZ(0,"div",96),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Ja(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ba,2,1,"div",95),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Ha(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ja,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const Pa=function(i){return{"w-full":i}};function La(i,r){if(1&i&&(e.TgZ(0,"div",93)(1,"div",94),e._uU(2),e.qZA(),e.YNc(3,Ha,2,1,"ng-container",6),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,Pa,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Qa(i,r){if(1&i&&(e.ynx(0),e.YNc(1,La,4,5,"div",92),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Ra(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Qa,2,1,"ng-container",43),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ya(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ra,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ga(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ma,7,3,"div",86),e.TgZ(2,"div",90),e.YNc(3,Ya,2,1,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function ja(i,r){if(1&i&&(e.TgZ(0,"div",89),e.YNc(1,Ga,4,2,"ng-container",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function za(i,r){if(1&i&&(e.TgZ(0,"div",62)(1,"div",63)(2,"div",64),e._UZ(3,"cf-icon",28),e.TgZ(4,"span",14),e._uU(5,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(6,"div",65)(7,"div",16)(8,"div",17)(9,"div",18),e._uU(10),e.qZA(),e.TgZ(11,"div",19),e._uU(12),e.qZA()(),e.TgZ(13,"div",20)(14,"div",21)(15,"div",22),e._UZ(16,"div",23)(17,"div",24),e.qZA()(),e.TgZ(18,"div"),e._UZ(19,"cf-icon",25),e.qZA()(),e.TgZ(20,"div",17)(21,"div",18),e._uU(22),e.qZA(),e.TgZ(23,"div",19),e._uU(24),e.qZA()()(),e._UZ(25,"div",66),e.TgZ(26,"div",67)(27,"div",68)(28,"div",59)(29,"span"),e._uU(30,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(31,"div",69),e._uU(32),e.ALo(33,"date"),e.qZA()(),e._UZ(34,"div",66),e.TgZ(35,"div",70)(36,"div",71)(37,"div",72)(38,"span"),e._uU(39,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(40,"div",73),e.YNc(41,Ia,2,2,"span",74),e.qZA()(),e._UZ(42,"div",66),e.TgZ(43,"div",70)(44,"div",71)(45,"div",72)(46,"span"),e._uU(47,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(48,"div",75),e.YNc(49,wa,2,0,"span",6),e.YNc(50,Na,2,1,"div",6),e.qZA()(),e._UZ(51,"div",66),e.TgZ(52,"div",70)(53,"div",71)(54,"div",59)(55,"span"),e._uU(56,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(57,"div",76),e.YNc(58,qa,3,0,"div",77),e.YNc(59,ja,2,1,"div",78),e.qZA()(),e._UZ(60,"div",66),e.TgZ(61,"div",67)(62,"div",68)(63,"div",59)(64,"span"),e._uU(65,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()(),e.TgZ(66,"div",69),e._uU(67),e.ALo(68,"mapper"),e.qZA()()()(),e.TgZ(69,"div",63)(70,"div",79),e._UZ(71,"cf-icon",80),e.TgZ(72,"span",14),e._uU(73,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(74,"div",81),e._UZ(75,"cf-icon",34),e.TgZ(76,"div")(77,"span",82),e._uU(78,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(79," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(80,"div",81),e._UZ(81,"cf-icon",83),e.TgZ(82,"div",82),e._uU(83,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(84,"span",84),e._uU(85,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(86," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(10),e.AsE(" ",t.configOrderData?t.configOrderData.journeys[0].startPointName:""," (",t.configOrderData?t.configOrderData.journeys[0].startPoint:"",") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].departTime),e.xp6(10),e.AsE(" ",t.configOrderData.journeys[0].endPointName," (",t.configOrderData.journeys[0].endPoint,") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].arrivalTime),e.xp6(8),e.hij(" ",e.xi3(33,13,t.configOrderData.timeExecute,"dd/MM/yyy hh:mm")," "),e.xp6(9),e.Q6J("ngForOf",t.configOrderData.journeys[0].rangeTime),e.xp6(8),e.Q6J("ngIf","PRICE"!==t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","PRICE"===t.formGroup.value.type),e.xp6(8),e.Q6J("ngIf","FARE"!==t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.formGroup.value.type),e.xp6(8),e.hij(" ",e.xi3(68,16,t.formGroup.value.distributionChannel,t.viewDistributionChannel),"")}}function Ka(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Sa,56,22,"form",8),e.YNc(2,za,87,19,"div",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function Va(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",101),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.close())}),e._uU(1," \u0110\xf3ng "),e.qZA()}}function $a(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.INFO_FLIGHT))}),e.TgZ(1,"span"),e._uU(2,"C\u1eadp nh\u1eadt"),e.qZA(),e._UZ(3,"cf-icon",103),e.qZA()}}function Xa(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",101),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.CONFIG_HUNT))}),e._UZ(1,"cf-icon",104),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function Wa(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(3,"cf-icon",103),e.qZA()}}function er(i,r){if(1&i&&(e.TgZ(0,"div",97)(1,"div",98),e.YNc(2,Va,2,0,"button",99),e.YNc(3,$a,4,0,"button",100),e.YNc(4,Xa,3,0,"button",99),e.YNc(5,Wa,4,0,"button",100),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function tr(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",105)(2,"ticket-item-skeleton",105)(3,"ticket-item-skeleton",105),e.qZA())}function nr(i,r){1&i&&e._UZ(0,"cf-spinner")}const or=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}];var ne=(()=>{return(i=ne||(ne={})).INFO_FLIGHT="INFO_FLIGHT",i.CONFIG_HUNT="CONFIG_HUNT",ne;var i})();let xe=(()=>{class i{constructor(t,n,o,a,c,s,d,g,h,v,y){this.ref=t,this.cfIconRegister=n,this._fb=o,this._locationDataService=a,this._huntTicketAdvancedService=c,this._bookingHunterService=s,this._modal=d,this._flightDataService=g,this._bottomSheetService=h,this._cdr=v,this._router=y,this.title="Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",this.isLoading=!1,this.isSpinning=!1,this.STEP_PAGE=ne,this.currentStep=ne.CONFIG_HUNT,this.dataFlight=(0,e.f3M)(te._).getAllOption(),this.hiddenPax=!1,this.distributionChannelOptions=[{value:"B2B_GMBR;B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{value:"B2B_GMBR",name:"Flychills"},{value:"B2C_GMBR",name:"GMBR"}],this.isMobile=!1,this.checkInvalidField=(A,E,b)=>E&&!A.length&&b,this.viewFly=A=>{const E=this.dataFlight.find(b=>b.Code===A);return`${null==E?void 0:E.CityName} (${A})`},this.viewDistributionChannel=A=>{var E;return(null===(E=this.distributionChannelOptions.find(b=>b.value===A))||void 0===E?void 0:E.name)||""},n.registerIcons([u.PcQ,u.rJw]),t&&(this.orderId=t.data.orderId)}ngOnInit(){this.initFormGroup(),this.orderId&&this.getCurrentConfigOrder()}initFormGroup(){this.formGroup=this._fb.group({distributionChannel:[this.distributionChannelOptions[0].value,l.kI.required],specifyFareClassList:this._fb.array([]),specifyPriceList:this._fb.array([]),type:[ge.$.FARE]}),or.forEach(t=>{this.initDataPriceList(t)})}initDataPriceList(t){const n=this._fb.group({name:null,id:null,price:null,image:null});n.patchValue(t),this.specifyPriceList.push(n)}getCurrentConfigOrder(){this.isLoading=!0,this._huntTicketAdvancedService.getCurrentConfigOrder(this.orderId).pipe((0,w.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var n,o,a,c;if("OK"===t.status){this.configOrderData={orderId:t.data.orderId,canUpdate:t.data.canUpdate,code:t.data.code,notifBeforExpire:t.data.advanceSetting.notifBeforExpire,timeExecute:t.data.advanceSetting.timeExecute,monitorType:null===(n=t.data.conditions)||void 0===n?void 0:n.type,specifyPriceList:(null===(a=null===(o=t.data.conditions)||void 0===o?void 0:o.specifyPriceList)||void 0===a?void 0:a.filter(d=>d.targetPrice))||[],passengers:[],journeys:t.data.ticketInfo.journeys.map(d=>({departTime:T(new Date(1e3*d.rangeDateTime.fromDate)).format("DD/MM/YYYY"),arrivalTime:T(new Date(1e3*d.rangeDateTime.toDate)).format("DD/MM/YYYY"),startPoint:d.startPoint,startPointName:this._locationDataService.getCityNameByCode(d.startPoint),endPoint:d.endPoint,endPointName:this._locationDataService.getCityNameByCode(d.endPoint),leg:d.leg,rangeTime:d.rangeTime}))},this.formGroup.patchValue({type:this.configOrderData.monitorType||ge.$.FARE});const s=(null===(c=t.data.conditions.specifyFareClassList)||void 0===c?void 0:c.map(d=>d.fareClass.split(";")).reduce((d,g)=>[...d,...g]))||[];this.loadFareOptions$().subscribe({next:d=>{this.selectedFaresTree=d,this.selectedFaresTree.forEach(g=>{g.childItems.forEach(h=>{h.childItems.forEach(v=>{v.childItems.forEach(y=>{s.includes(y.code)&&(y.isActive=!0)})})}),this.standardizeAirlineOptionSelected(g)})},error:d=>{console.log(d)}})}},error:()=>{}})}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(a=>{a.isActive=a.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),a.totalSelectedFare=a.childItems.filter(c=>c.isActive).length,a.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,a)=>o+a.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(a=>{var c;null===(c=a.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}formatAirlineFareOptions(t){return t.map(n=>{var o;return{name:this._flightDataService.getAirlineNameByCode(null===(o=n.airline)||void 0===o?void 0:o.toUpperCase()),code:n.airline,icon:this._flightDataService.getAirlineIconByCode(n.airline),isActive:!1,isDisable:!1,totalFare:this.countAirlineTotalFare(n),childItems:n.cabin.map(a=>({code:a.code,name:a.name,isActive:!1,isDisable:!1,childItems:a.fareType.map(c=>{var s;return{code:c.code,name:c.description,isActive:!1,isDisable:!1,totalFare:(null===(s=c.fareClass)||void 0===s?void 0:s.length)||0,childItems:c.fareClass.map(d=>({code:d.code,name:d.name,isActive:!1,childItems:[],isDisable:!1}))}})}))}})}loadFareOptions$(){return this._bookingHunterService.getLstAirlineFareoptions().pipe((0,q.U)(t=>this.formatAirlineFareOptions(t.data)))}openFareOptions(){this.loadFareOptions$().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(Qe,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(Re,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var n;this.specifyFareClassList.clear();for(const o of(i=>i.map(r=>({airline:r.code,fareClass:r.childItems.map(t=>t.childItems.map(n=>n.childItems.filter(o=>o.isActive)).reduce((n,o)=>[...n,...o.map(a=>a.code)],[])).reduce((t,n)=>[...t,...n],[])})))(t))null!==(n=o.fareClass)&&void 0!==n&&n.length&&this.addFareClass(o);this._cdr.markForCheck()}addFareClass(t){var n;const o=this._fb.group({airline:null,fareClass:null});o.patchValue(t),null===(n=this.specifyFareClassList)||void 0===n||n.push(o)}onRemoveAirlineOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(o=>{o.childItems.forEach(a=>{a.childItems.forEach(c=>c.isActive=!1)})})}onRemoveFareOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1}onRemoveFareTypeOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(a=>{a.isActive=!1})}onShowFareOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(n=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:a=>{a.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}get specifyPriceList(){return this.formGroup.get("specifyPriceList")}get specifyFareClassList(){return this.formGroup.get("specifyFareClassList")}onPriceOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(n=this.specifyFareClassList.value)&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(a=>{a&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:a=>{a.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onChangeStep(t){this.currentStep=t,console.log(this.currentStep),console.log(this.formGroup.value),t===ne.INFO_FLIGHT&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",this.progressDateAfterSubmit())}progressDateAfterSubmit(){const t=this.formGroup.value;this.dataFormSubmit={conditions:{specifyPriceList:"PRICE"===t.type?t.specifyPriceList.filter(n=>n.price).map(({id:n,price:o})=>({airline:n,targetPrice:o})):[],specifyFareClassList:"FARE"===t.type?t.specifyFareClassList.map(({airline:n,fareClass:o})=>({airline:n,fareClass:o.join(";")})):[],type:t.type},advanceSetting:{timeExecute:this.configOrderData.timeExecute,notifBeforExpire:this.configOrderData.notifBeforExpire},distributionChannel:t.distributionChannel}}onSubmit(){this.isSpinning=!0,this._huntTicketAdvancedService.updateConfigOrder({advanceSetting:this.dataFormSubmit.advanceSetting,conditions:{specifyFareClassList:this.dataFormSubmit.conditions.specifyFareClassList,specifyPriceList:this.dataFormSubmit.conditions.specifyPriceList,type:this.dataFormSubmit.conditions.type},distributionChannel:this.dataFormSubmit.distributionChannel,orderId:this.orderId}).pipe((0,w.x)(()=>this.isSpinning=!0)).subscribe({next:n=>{console.log(n),"OK"===n.status?this.ref&&this.ref.close("OK"):this.ref&&this.ref.close("ERROR")},error:()=>{this.ref.close("ERROR")}})}close(){this.ref&&this.ref.close(!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I.gb,8),e.Y36(u.KNP),e.Y36(l.qu),e.Y36(te._),e.Y36(Be),e.Y36(K.yL),e.Y36(I.oE),e.Y36(j.G),e.Y36(k.a2),e.Y36(e.sBO),e.Y36(O.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-edit"]],standalone:!0,features:[e.jDz],decls:9,vars:5,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:hidden"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],["class","w-full h-full flex-1 overflow-auto",4,"ngIf"],["class","p-6",4,"ngIf"],[4,"ngIf"],[1,"w-full","h-full","flex-1","overflow-auto"],["class","p-6 w-ful h-full flex flex-col gap-y-6",3,"formGroup",4,"ngIf"],["class","flex flex-col gap-y-6 px-6 pt-6",4,"ngIf"],[1,"p-6","w-ful","h-full","flex","flex-col","gap-y-6",3,"formGroup"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"text-heading-md","text-neutral-black"],[1,"rounded","bg-neutral-gray-1","py-3","flex","justify-center","items-center","gap-x-4"],[1,"flex","flex-col","gap-y-1"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,""],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],["data-id","distributionChannel","textField","name","valueField","value","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"status","ngClass","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],[1,"flex","flex-col","gap-y-6","px-6","pt-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"w-[60%]","text-body-md","text-neutral-black"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngFor","ngForOf"],[1,"w-[60%]","text-express-md"],[1,"w-[60%]"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],[1,"text-express-md"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"bg-neutral-gray-1","text-express-md","p-2"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],["icon","chevron_left","size","small",1,"mr-2.5"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.YNc(5,Ka,3,2,"div",4),e.YNc(6,er,6,4,"div",5),e.YNc(7,tr,4,0,"div",6),e.qZA(),e.YNc(8,nr,1,0,"cf-spinner",6)),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(2),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isSpinning))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,u.AxE,u.Sm8,B.IA,Pe.I,M.q,x.N8,x.Xq,_e.q,re.C,l.u5,l._Y,l.JJ,l.JL,l.UX,l.sg,l.u,l.x0,l.CE,C.j$,C.lt,k.DW,B.AS,Z.OR],encapsulation:2}),i})();var ar=m(77492);const rr=function(i,r){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":r}},cr=function(i){return{"text-neutral-gray-6":i}},sr=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function lr(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33,34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.MAs(2),s=e.oxw();return e.KtG(s.onChangeTab(a,c))}),e.TgZ(3,"div",35),e._uU(4),e.TgZ(5,"cf-label",36),e._uU(6),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,rr,t.active,!n)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,cr,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,sr,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}const Te=function(){return[]};function ur(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"cf-select",23),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.filterData.ownerId=o)})("selectedChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFilterChange())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,Te))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function dr(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"hunt-ticket-advanced-item",38),e.NdJ("actionChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onChange(o,c))}),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("pnrOrderData",t)("bookingHunterType",n.TYPE_ORDER.HUNT_NEW_TICKET_TET)}}function pr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onScrollDown())}),e.YNc(1,dr,2,2,"ng-container",11),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listPnrOrder)}}function _r(i,r){1&i&&(e.TgZ(0,"div")(1,"div",40)(2,"div"),e._UZ(3,"img",41),e.qZA(),e.TgZ(4,"div",42)(5,"div",43),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",44)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()()())}function fr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onMoveToHuntTicketAdvancedAdd())}),e._UZ(1,"cf-icon",49),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o m\u1edbi ngay"),e.qZA()()}}function mr(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"div"),e._UZ(2,"img",45),e.qZA(),e.TgZ(3,"div",46)(4,"div",43),e._uU(5,"Ch\u01b0a c\xf3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(6,"div",44),e._uU(7," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 gi\xfap b\u1ea1n t\u1ef1 \u0111\u1ed9ng canh v\xe0 gi\u1eef ch\u1ed7 c\xe1c chuy\u1ebfn bay theo y\xeau c\u1ea7u m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng nh\u1ea5t! "),e.qZA()(),e.YNc(8,fr,4,0,"button",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.huntBookingFlag)}}function gr(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,_r,12,0,"div",31),e.YNc(2,mr,9,1,"div",39),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isEmptyOrder),e.xp6(1),e.Q6J("ngIf",t.isEmptyOrder)}}function hr(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",50)(2,"ticket-item-skeleton",50)(3,"ticket-item-skeleton",50),e.qZA())}function vr(i,r){1&i&&e._UZ(0,"cf-spinner")}function xr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.filterData.ownerId=o)}),e.TgZ(1,"label",56)(2,"span"),e._uU(3,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,Te))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function Tr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"cf-input-group",53),e._UZ(3,"cf-icon",14),e.TgZ(4,"input",15,16),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.filterData.searchText=o)}),e.qZA()(),e.YNc(6,xr,4,6,"cf-select",54),e.TgZ(7,"cf-select",55),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.filterData.airline=o)}),e.TgZ(8,"label",56)(9,"span"),e._uU(10,"H\xe3ng bay"),e.qZA()()(),e.TgZ(11,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.filterData.sortByType=o)}),e.TgZ(12,"label",56)(13,"span"),e._uU(14,"S\u1eafp x\u1ebfp"),e.qZA()()()(),e.TgZ(15,"div")(16,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchHuntLowFare())}),e._UZ(17,"cf-icon",59),e.TgZ(18,"div"),e._uU(19,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.filterData.searchText),e.xp6(2),e.Q6J("ngIf",t.viewListAgentForMonitorHuntFare),e.xp6(1),e.Q6J("status","default")("data",t.airlineOptions)("allowSearch",!1)("ngModel",t.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",t.orderbyOptions||e.DdM(11,Te))("placeholder","")("allowSearch",!1)("ngModel",t.filterData.sortByType)}}let Cr=(()=>{class i{constructor(t,n,o,a,c,s,d,g,h,v,y){this._locationDataService=n,this._permissionService=o,this._modal=a,this._router=c,this._ticketLowFareService=s,this._toastService=d,this._mobileDetectService=g,this._eventLogService=h,this._bottomSheetService=v,this._huntTicketAdvancedBindingSvc=y,this.isSpinner=!1,this.STATUS_ORDER=D.b,this.tabSelected="ALL",this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:D.b.IN_PROCESS,text:"\u0110ang ho\u1ea1t \u0111\u1ed9ng",counter:0,active:!1},{value:D.b.CANCEL,text:"\u0110\xe3 k\u1ebft th\xfac",counter:0,active:!1}],this.orderbyOptions=[{value:"TIME_UPDATE",text:"Ng\xe0y c\u1eadp nh\u1eadt"},{value:"TIME_CREATE",text:"Ng\xe0y y\xeau c\u1ea7u"},{value:"TIME_EXPIRE",text:"H\u1ea1n s\u0103n v\xe9"},{value:"AIRLINE",text:"H\xe3ng bay"},{value:"PNR",text:"M\xe3 \u0111\u1eb7t ch\u1ed7"}],this.airlineOptions=[{value:"ALL",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"VietJet Air"},{value:"QH",text:"Bamboo Airways"}],this.agentOptions=[{value:"",text:"T\u1ea5t c\u1ea3"}],this.searchValueChanged$=new De.x,this.currentTab="ALL",this.filterData={airline:"ALL",sortByType:"TIME_UPDATE",ownerId:"",searchText:"",offset:1,limit:10},this.listPnrOrder=[],this.viewListAgentForMonitorHuntFare=this._permissionService.hasPermission(L.or.ViewListAgentForMonitorHuntFare),this.TYPE_ORDER=le.G,this.isSkeleton=!0,this.isEmptyOrder=!1,this.isEmptyResult=!1,this.totalItem=0,this.huntBookingFlag=this._permissionService.hasPermission(L.or.CanMonitorHuntFareTicket),this.unsubscribe$=new De.x,this.searchHuntLowFareResult$=new De.x,this.availableSlotData={available:!1,type:le.G.HUNT_NEW_TICKET_TET,amount:0,currency:"VND"},t.registerIcons([u.TM4,u.oFb,u.xbi,u.D7,u.SK7]),this._eventLogService.captureOpenManageHuntFare()}ngOnInit(){this.viewListAgentForMonitorHuntFare&&this.getListAgentFilter(),this.searchHuntLowFareResult$.pipe((0,da.w)(t=>this._ticketLowFareService.getListPnrOrder(t).pipe((0,w.x)(()=>this.isSkeleton=!1))),(0,pa.R)(this.unsubscribe$)).subscribe({next:t=>{if("OK"===t.status){1===this.filterData.offset&&(this.listPnrOrder=[]);const n=this.listTab.find(a=>a.value===this.currentTab);n&&("ALL"===(null==n?void 0:n.value)?this.listTab=[...this.listTab.map(a=>Object.assign(Object.assign({},a),{counter:"ALL"===a.value?t.data.total:a.value===D.b.IN_PROCESS?t.data.listOrder.filter(c=>[D.b.CREATE,D.b.IN_PROCESS,D.b.IN_PROCESS_PRICE_UP].includes(c.state)).length:t.data.listOrder.filter(c=>[D.b.CANCEL,D.b.EXPIRED].includes(c.state)).length}))]:n.counter=t.data.total);const o=t.data.listOrder.map(a=>{var c,s,d,g;const h=a.ticketInfo.passengers.find(y=>"ADT"===y.type.toUpperCase()),v=h?`${h.lastName} ${h.firstName}`:"";return{orderId:a.orderId,code:a.code,state:a.state,monitorType:a.monitorType,startPoint:a.ticketInfo.journeys[0].startPoint,rangeDateTime:a.ticketInfo.journeys[0].rangeDateTime,startPointName:this._locationDataService.getCityNameByCode(a.ticketInfo.journeys[0].startPoint),endPoint:a.ticketInfo.journeys[0].endPoint,endPointName:this._locationDataService.getCityNameByCode(a.ticketInfo.journeys[0].endPoint),departTime:a.ticketInfo.journeys[0].departTime?T(a.ticketInfo.journeys[0].departTime).format("DD/MM/YYYY"):"",ownerName:(null===(c=a.ownerInfo)||void 0===c?void 0:c.name)||"",timeCreated:a.orderInfo.timeCreate?T(a.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpired:a.orderInfo.timeExpire?T(a.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdated:a.orderInfo.timeUpdate?T(a.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",targetPrice:(null===(s=a.orderInfo.priceMonitors[0])||void 0===s?void 0:s.targetPrice)||0,airline:a.ticketInfo.airline?a.ticketInfo.airline:"B\u1ea5t k\xec",canUpdate:a.canUpdate,countOfPax:[],representPax:{name:v,remainingPax:a.ticketInfo.passengers.length-1},fareInfo:{airline:(null===(d=a.fareInfo)||void 0===d?void 0:d.airline)||"",detectedPnr:(null===(g=a.fareInfo)||void 0===g?void 0:g.detectedPnr)||""},availableSlotInfo:{amountPerPax:a.availableSlotInfo.amountPerPax||0,currency:a.availableSlotInfo.currency||"",free:a.availableSlotInfo.free,percent:a.availableSlotInfo.percent||0,type:a.availableSlotInfo.type}}})||[];this.listPnrOrder=[...this.listPnrOrder,...o],this.totalItem=t.data.total,this.listPnrOrder.length?(this.isEmptyResult=!1,this.isEmptyOrder=!1):(this.isEmptyResult=!0,this.isEmptyOrder=t.data.empty)}else this.listPnrOrder=[]},error:()=>{this.listPnrOrder=[]}}),this.searchHuntLowFare(),this.searchValueChanged$.pipe((0,_a.b)(1e3)).subscribe(()=>{this.isEmptyResult=!0,this.searchHuntLowFare()})}onFilterChange(){this.isEmptyResult=!0,this.filterData.offset=1,this.searchHuntLowFare()}searchHuntLowFare(){this._mobileDetectService.isMobile()&&this.btsSearchMobile&&this.btsSearchMobile.dismiss(),this.isSkeleton=!0;const t=this.getReqSearch();this.searchHuntLowFareResult$.next(t)}getReqSearch(){let t={getAllState:!1,listState:[],searchText:this.filterData.searchText,airline:this.filterData.airline,sortByType:this.filterData.sortByType,ownerId:this.filterData.ownerId||"",pageOffset:1,pageSize:999,type:le.G.HUNT_NEW_TICKET_TET};switch(this.currentTab){case D.b.IN_PROCESS:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[D.b.CREATE,D.b.IN_PROCESS,D.b.IN_PROCESS_PRICE_UP]});break;case D.b.COMPLETED:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[D.b.COMPLETED]});break;case D.b.CANCEL:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[D.b.CANCEL,D.b.EXPIRED]});break;default:t=Object.assign(Object.assign({},t),{getAllState:!0,listState:[]})}return t}onMoveToHuntTicketAdvancedAdd(){this._router.navigate(["admin/hunt-ticket-advanced-add"])}getListAgentFilter(){this._ticketLowFareService.getAgentFilterOrder().subscribe({next:t=>{var n;if("OK"===t.status){const o=(null===(n=t.data)||void 0===n?void 0:n.map(a=>({value:a.id,text:a.username})))||[];this.agentOptions=[...this.agentOptions,...o]}}})}onChangeTab(t,n){t.value!==this.currentTab&&(n.scrollIntoView({behavior:"smooth",inline:"center"}),this.listPnrOrder=[],this.filterData.offset=1,this.listTab.forEach(o=>o.active=!1),t.active=!0,this.currentTab=t.value,this.searchHuntLowFare())}onScrollDown(){}onChange(t,n){switch(t){case"DETAIL":this.onShowBookingHunterDetail(n.orderId);break;case"EDIT":this.onEditBookingHunter(n.orderId);break;case"CANCEL":this.onCancelPnrOrder(n.orderId,n.code);break;case"BOOKING_DETAIL":this.onBookingDetail(n.fareInfo.airline,n.fareInfo.detectedPnr);break;case"CREATE_NEW":this._huntTicketAdvancedBindingSvc.setOrderId(n.orderId),this._router.navigate(["admin/hunt-ticket-advanced-add"])}}onBookingDetail(t,n){this._router.navigate([`admin/booking-detail/${t}/${n}`])}onShowBookingHunterDetail(t,n=!1,o=!1){this._eventLogService.captureOpenDetailHuntFare({source:0}),this._router.navigate([`admin/hunt-ticket-advanced-detail/${t}`],{state:{isUpdated:n,isUpdatedFail:o}})}onEditBookingHunter(t){if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(xe,{containerFullHeigh:!0,headerTitle:"Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",leftButtonIcon:"",rightButtonIcon:"close",data:{orderId:t}});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(o=>{"OK"===o&&this.onShowBookingHunterDetail(t,!0,!1),"ERROR"===o&&this.onShowBookingHunterDetail(t,!1,!0)})}else this._modal.open(xe,{orderId:t}).afterClosed$.subscribe({next:o=>{"OK"===o.data&&(this.onShowBookingHunterDetail(t,!0,!1),this.listPnrOrder.forEach(a=>{a.orderId===t&&(a.canUpdate=o.data.canUpdate)})),"ERROR"===o.data&&this.onShowBookingHunterDetail(t,!1,!0)}})}onCancelPnrOrder(t,n){this._eventLogService.captureCancelHuntFare({source:0}),this._mobileDetectService.isMobile()?(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,w.x)(()=>this.isSpinner=!1)).subscribe({next:o=>{"OK"===o.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}})):this._modal.open(Z.V0,{title:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${n}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:a=>{a.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,w.x)(()=>this.isSpinner=!1)).subscribe({next:c=>{"OK"===c.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}}))}})}openBottomSheet(t){const n=this._bottomSheetService.open(t,{headerTitle:"",rightButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4"});n.containerInstance._rightButtonClick.subscribe(o=>{n.dismiss()})}openSearchBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._leftButtonClick.subscribe(n=>{this.btsSearchMobile.dismiss()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(te._),e.Y36(L.$A),e.Y36(I.oE),e.Y36(O.F0),e.Y36(se.s),e.Y36(R.BX),e.Y36(Ae.L),e.Y36(ar.x),e.Y36(k.a2),e.Y36(be))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-list"]],standalone:!0,features:[e.jDz],decls:46,vars:19,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4","md:text-body-sm"],[1,"flex","justify-between","items-center","gap-x-6"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"!w-[350px]","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange"],["tableSearchInput",""],[1,"hidden","md:block","md:!w-full","md:!max-w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange","focus"],[1,"flex","gap-x-4","items-center","md:hidden"],["class","flex items-center gap-x-2.5",4,"ngIf"],[1,"flex","items-center","gap-x-2.5"],[1,"text-express-md","whitespace-nowrap"],["textField","text","valueField","value",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["class","flex flex-col gap-y-[30px] md:gap-y-4","infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled",4,"ngIf"],[4,"ngIf"],["bottomSheetSearch",""],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[3,"pnrOrderData","bookingHunterType","actionChange"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[120px] flex flex-col justify-center\n              items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[120px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],["src","assets/images/add-task.svg","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","gap-y-2","justify-between","items-center"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],["icon","plus","size","small",1,"mr-2.5"],[1,"rounded","border","border-neutral-gray-1"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"!max-w-none","w-full"],["class","!max-w-none w-full","textField","text","valueField","value",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange",4,"ngIf"],["textField","text","valueField","value","size","medium","placeholder","",1,"!max-w-none","w-full",3,"status","data","allowSearch","ngModel","ngModelChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"S\u0103n v\xe9 T\u1ebft 2025"),e.qZA(),e.TgZ(6,"div",5),e._uU(7," M\u1ed9t c\xe1ch \u0111\u1ec3 \u0111\u1eb7t ch\u1ed7 t\u1ef1 \u0111\u1ed9ng ng\xe0y l\u1ec5! "),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return n.onMoveToHuntTicketAdvancedAdd()}),e.TgZ(10,"span"),e._uU(11,"T\u1ea1o s\u0103n v\xe9"),e.qZA(),e._UZ(12,"cf-icon",8),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10),e.YNc(15,lr,7,13,"ng-container",11),e.qZA(),e.TgZ(16,"div",12)(17,"cf-input-group",13),e._UZ(18,"cf-icon",14),e.TgZ(19,"input",15,16),e.NdJ("ngModelChange",function(c){return n.filterData.searchText=c})("ngModelChange",function(c){return n.searchValueChanged$.next(c)}),e.qZA()(),e.TgZ(21,"cf-input-group",17),e._UZ(22,"cf-icon",14),e.TgZ(23,"input",18,16),e.NdJ("ngModelChange",function(c){return n.filterData.searchText=c})("focus",function(){e.CHM(o);const c=e.MAs(45);return e.KtG(n.openSearchBts(c))}),e.qZA()(),e.TgZ(25,"div",19),e.YNc(26,ur,4,6,"div",20),e.TgZ(27,"div",21)(28,"div",22),e._uU(29,"H\xe3ng bay:"),e.qZA(),e.TgZ(30,"cf-select",23),e.NdJ("ngModelChange",function(c){return n.filterData.airline=c})("selectedChange",function(){return n.onFilterChange()}),e.qZA()(),e.TgZ(31,"div",21)(32,"div",22),e._uU(33,"S\u1eafp x\u1ebfp:"),e.qZA(),e.TgZ(34,"cf-select",24),e.NdJ("ngModelChange",function(c){return n.filterData.sortByType=c})("selectedChange",function(){return n.onFilterChange()}),e.qZA()()()()()(),e.TgZ(35,"div",25)(36,"div",26)(37,"div",27)(38,"div",28)(39,"div",29),e.YNc(40,pr,2,7,"div",30),e.YNc(41,gr,3,2,"div",31),e.qZA(),e.YNc(42,hr,4,0,"div",31),e.qZA()()()()(),e.YNc(43,vr,1,0,"cf-spinner",31),e.YNc(44,Tr,20,12,"ng-template",null,32,e.W1O)}2&t&&(e.xp6(15),e.Q6J("ngForOf",n.listTab),e.xp6(4),e.Q6J("ngModel",n.filterData.searchText),e.xp6(4),e.Q6J("ngModel",n.filterData.searchText),e.xp6(3),e.Q6J("ngIf",n.viewListAgentForMonitorHuntFare),e.xp6(4),e.Q6J("status","default")("data",n.airlineOptions)("placeholder","")("allowSearch",!1)("ngModel",n.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",n.orderbyOptions||e.DdM(18,Te))("placeholder","")("allowSearch",!1)("ngModel",n.filterData.sortByType),e.xp6(6),e.Q6J("ngIf",!n.isEmptyResult&&n.listPnrOrder.length),e.xp6(1),e.Q6J("ngIf",n.isEmptyResult&&!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSpinner))},dependencies:[p.ez,p.mk,p.sg,p.O5,l.u5,l.Fj,l.JJ,l.On,x.N8,x.Xq,l.UX,C.j$,C.ND,C.BN,u.AxE,u.Sm8,M.q,Y.Rq,Y.Ry,ye.b,B.IA,Z.OR,ua],encapsulation:2}),i})();const yr=function(i,r){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":r}},Er=function(i){return{"text-neutral-gray-6":i}},Ar=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function br(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTab(a))}),e.TgZ(2,"div",30),e._uU(3),e.TgZ(4,"cf-label",31),e._uU(5),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,n=r.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,yr,t.active,!n)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Er,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,Ar,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function Zr(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"div",36)(4,"cf-label",37),e._uU(5),e.qZA()(),e.TgZ(6,"div",38)(7,"button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onConfirm(a))}),e._uU(8," Duy\u1ec7t "),e.qZA(),e.TgZ(9,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCancelConfirm())}),e._uU(10," T\u1eeb ch\u1ed1i "),e.qZA()()(),e.TgZ(11,"div",41)(12,"div",42),e._UZ(13,"cf-icon",43),e.TgZ(14,"div"),e._uU(15),e.qZA(),e._UZ(16,"cf-icon",44),e.TgZ(17,"div"),e._uU(18),e.qZA()(),e.TgZ(19,"div",45)(20,"div",46)(21,"div",47),e._uU(22,"Ng\xe0y bay: "),e.qZA(),e.TgZ(23,"div",48),e._uU(24),e.qZA()(),e.TgZ(25,"div",46)(26,"div",47),e._uU(27,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(28,"div",48),e._uU(29),e.qZA()(),e.TgZ(30,"div",46)(31,"div",47),e._uU(32,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(33,"div",48),e._uU(34),e.qZA()(),e.TgZ(35,"div",46)(36,"div",47),e._uU(37,"M\xe3 AG: "),e.qZA(),e.TgZ(38,"div",48),e._uU(39),e.qZA()(),e.TgZ(40,"div",46)(41,"div",47),e._uU(42,"K\xeanh ph\xe2n ph\u1ed1i: "),e.qZA(),e.TgZ(43,"div",48),e._uU(44),e.qZA()(),e.TgZ(45,"div",46)(46,"div",47),e._uU(47,"T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(48,"div",48),e._uU(49),e.qZA()(),e.TgZ(50,"div",46)(51,"div",47),e._uU(52,"Th\u1eddi gian \u0111\u1eb7t v\xe9: "),e.qZA(),e.TgZ(53,"div",48),e._uU(54),e.qZA()()()()(),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(4),e.Q6J("color","green")("size","small"),e.xp6(1),e.hij(" ",t.stateDisplay," "),e.xp6(10),e.AsE("",t.startPoint," (",t.endPoint,")"),e.xp6(3),e.AsE("",t.startCode," (",t.endCode,")"),e.xp6(6),e.Oqu(t.departureDate),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(t.timeHoldBooking),e.xp6(5),e.Oqu(t.agentName),e.xp6(5),e.Oqu(t.channel),e.xp6(5),e.Oqu(t.totalPayment),e.xp6(5),e.Oqu(t.timeBooked)}}function Dr(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33),e.YNc(2,Zr,55,14,"ng-container",6),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listOfProducts)}}function Fr(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",49)(2,"ticket-item-skeleton",49)(3,"ticket-item-skeleton",49),e.qZA())}const Fe=function(){return[]};let kr=(()=>{class i{constructor(t,n,o,a,c){this._modal=n,this._fb=o,this._ticketLowFareService=a,this._toastService=c,this.airlineOptions=[],this.distributionChannelOptions=[],this.dateRangeStr="",this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:"FOR_APPROVAL",text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!1},{value:"APPROVAL",text:"\u0110\xe3 duy\u1ec7t",counter:0,active:!1},{value:"REJECT",text:"T\u1eeb ch\u1ed1i",counter:0,active:!1}],this.currentTab="",this.isSkeleton=!1,this.typeTimeOptions=[],this.listOfProducts=[],t.registerIcons([u.esH]),this.initDateSearch(),this.initListOptions(),this.initSearchForm()}ngOnInit(){this.onSearch()}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airline"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:F.h.B2B_GMBR,text:"Flychills"},{value:F.h.B2C_GMBR,text:"GMBR"}]}initDateSearch(){this.startDateOfMonth=new Date,this.endDateOfMonth=T(this.startDateOfMonth).add(30,"day").toDate();const t=(0,p.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),n=(0,p.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+n}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[F.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],searchText:[""],timeFilterType:["TIME_BOOKING"]})}onSearch(){var t;const n=this.searchForm.value;console.log(n);const o={airline:(null==n?void 0:n.airline)||"",channelDistribution:(null==n?void 0:n.distributionChannel)||"",startDate:null!=n&&n.fromDate?(0,p.p6)(null==n?void 0:n.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=n&&n.toDate?(0,p.p6)(null==n?void 0:n.toDate,"yyyy-MM-dd","vi-VN"):"",searchText:(null==n?void 0:n.searchText)||"",searchTextType:null,timeFilterType:(null==n?void 0:n.timeFilterType)||null,state:(null===(t=this.listTab.find(a=>a.active))||void 0===t?void 0:t.value)||""};this.isSkeleton=!0,this._ticketLowFareService.getTicketsPendingApproval(o).pipe((0,w.x)(()=>this.isSkeleton=!1)).subscribe({next:a=>{var c;"OK"===a.status?(console.log(a),this.listOfProducts=null===(c=a.data)||void 0===c?void 0:c.map(s=>({departureDate:T(s.departureDate).format("DD/MM/YYYY"),paxCount:s.adtCount+s.chdCount+s.infCount,timeHoldBooking:s.timeHoldBooking?T(s.timeHoldBooking).format("DD/MM/YYYY"):"-",agentName:(null==s?void 0:s.agentName)||"-",channel:(null==s?void 0:s.channel)||"-",totalPayment:(null==s?void 0:s.totalPayment)||0,timeBooked:s.timeBooked?T(1e3*s.timeBooked).format("DD/MM/YYYY"):"-",paymentCode:(null==s?void 0:s.paymentCode)||"-",paymentId:(null==s?void 0:s.paymentId)||"-",startCode:s.startPoint,startPoint:s.startPoint,endCode:s.endPoint,endPoint:s.endPoint,state:s.state,stateDisplay:this.getState(s.state)}))):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})}})}getState(t){switch(t){case"FOR_APPROVAL":return"Ch\u01b0a duy\u1ec7t";case"APPROVED":return"\u0110\xe3 duy\u1ec7t";case"REJECT":return"T\u1eeb ch\u1ed1i";default:return"\u0110ang x\u1eed l\xfd"}}onDateSelection(t,n,o,a){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),a.close(),this.startDate=n.value;const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),n.setValue(t);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{n.setValue(t),o.setValue(null);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onSelectedTab(t){t.value!==this.currentTab&&(this.listTab.forEach(n=>n.active=!1),t.active=!0,this.currentTab=t.value,this.onSearch())}onCancelConfirm(){this._modal.open(Z.V0,{title:"",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onConfirm(t){this._modal.open(Z.V0,{title:"Duy\u1ec7t xu\u1ea5t",body:"Duy\u1ec7t xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"Duy\u1ec7t",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(o=>{if(o.data){const a={paymentCode:t.paymentCode,paymentId:t.paymentId};this.isSkeleton=!0,this._ticketLowFareService.approvalTicketPending(a).pipe((0,w.x)(()=>this.isSkeleton=!1)).subscribe({next:c=>{"OK"===c.status?(this.onSearch(),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(I.oE),e.Y36(l.qu),e.Y36(se.s),e.Y36(R.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-approve-product"]],standalone:!0,features:[e.jDz],decls:39,vars:32,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo h\xe0nh tr\xecnh","autocomplete","off",3,"formControl"],["cf-button","","size","medium","type","secondary","color","primary-1",1,"justify-center","whitespace-nowrap",3,"click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],["class","flex flex-col gap-y-[30px] md:gap-y-4",4,"ngIf"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"py-2","px-3"],["type","solid",3,"color","size"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small",1,"",3,"click"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","plane","size","small"],["icon","arrow_right","size","small"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Duy\u1ec7t xu\u1ea5t v\xe9"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,br,6,13,"ng-container",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"cf-select",9)(11,"label",10),e._uU(12," L\u1ecdc theo "),e.qZA()(),e.TgZ(13,"div",11)(14,"cf-input-group",12),e._UZ(15,"cf-icon",13),e.TgZ(16,"label",14),e._uU(17,"Th\u1eddi gian"),e.qZA(),e.TgZ(18,"input",15),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(20);return e.KtG(c.open())})("ngModelChange",function(c){return n.dateRangeStr=c}),e.qZA()(),e.TgZ(19,"input",16,17),e.NdJ("dateSelect",function(c){e.CHM(o);const s=e.MAs(20);return e.KtG(n.onDateSelection(c,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,s))}),e.qZA()(),e.TgZ(21,"cf-select",18)(22,"label",10),e._uU(23," H\xe3ng bay "),e.qZA()(),e.TgZ(24,"cf-select",18)(25,"label",10),e._uU(26," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()(),e.TgZ(27,"div",8)(28,"cf-input-group",19),e._UZ(29,"cf-icon",20)(30,"input",21),e.qZA(),e.TgZ(31,"button",22),e.NdJ("click",function(){return n.onSearch()}),e._uU(32," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(33,"div",23)(34,"div",24)(35,"div",25)(36,"div",26),e.YNc(37,Dr,3,7,"div",27),e.YNc(38,Fr,4,0,"div",28),e.qZA()()()()()}2&t&&(e.xp6(7),e.Q6J("ngForOf",n.listTab),e.xp6(3),e.Q6J("status","default")("data",n.typeTimeOptions||e.DdM(29,Fe))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(30,Fe))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",n.distributionChannelOptions||e.DdM(31,Fe))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.distributionChannel),e.xp6(6),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(7),e.Q6J("ngIf",!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton))},dependencies:[p.ez,p.mk,p.sg,p.O5,ye.b,M.q,l.u5,l.Fj,l.JJ,l.On,l.UX,l.oH,x.N8,x.Xq,C.j$,C.ND,C.BN,u.AxE,u.Sm8,B.IA,Y.Rq,Y.Ry,J.Cs],encapsulation:2}),i})();function Sr(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td",60),e._uU(2),e.qZA(),e.TgZ(3,"td",61),e._uU(4),e.qZA(),e.TgZ(5,"td",62),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",62),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",63)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&i){const t=r.$implicit;e.xp6(2),e.hij("",t.name," "),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}function Ir(i,r){1&i&&e._UZ(0,"cf-hint",64),2&i&&e.Q6J("hint","K\xeanh ph\xe2n ph\u1ed1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}const wr=function(){return[]};function Or(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"div",11),e._UZ(3,"div",12),e.TgZ(4,"div",13),e._uU(5,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(6,"div",14)(7,"div",15)(8,"div",16)(9,"div"),e._UZ(10,"img",17),e.qZA(),e.TgZ(11,"div",18)(12,"span",19),e._uU(13),e.qZA(),e.TgZ(14,"span",20),e._uU(15),e.qZA()(),e.TgZ(16,"div",21),e._uU(17),e.qZA()(),e._UZ(18,"div",22),e.TgZ(19,"div",23)(20,"div",24)(21,"span"),e._uU(22),e.qZA(),e._UZ(23,"cf-icon",25),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e.TgZ(26,"div",26),e._UZ(27,"span"),e.TgZ(28,"span",27),e._uU(29),e.ALo(30,"date"),e.qZA()()(),e._UZ(31,"div",22),e.TgZ(32,"div",28)(33,"div",29),e._uU(34,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(35,"div",30),e._uU(36),e.qZA()(),e._UZ(37,"div",22),e.TgZ(38,"div",28)(39,"div",29),e._uU(40,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(41,"div",31),e._UZ(42,"cf-icon",32),e.TgZ(43,"div",33)(44,"label",34),e._uU(45),e.qZA()()()()()(),e.TgZ(46,"div",35)(47,"div",36),e._UZ(48,"cf-icon",37),e._uU(49," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(50,"div",38)(51,"div")(52,"table",39)(53,"thead")(54,"tr",40)(55,"th",41),e._uU(56,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(57,"th",42),e._uU(58,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(59,"th",43),e._uU(60,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(61,"th",43),e._uU(62,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(63,"th",44),e._uU(64,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(65,"tbody"),e.YNc(66,Sr,15,11,"tr",45),e.qZA()()(),e.TgZ(67,"div",46)(68,"div",47)(69,"div",48),e._uU(70,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(71,"div",49)(72,"span"),e._uU(73),e.ALo(74,"number"),e.qZA()()(),e.TgZ(75,"div",47)(76,"div",48),e._uU(77,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(78,"div",49),e._uU(79),e.ALo(80,"number"),e.qZA()(),e.TgZ(81,"div",47)(82,"div",48),e._uU(83,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(84,"div",50)(85,"span"),e._uU(86),e.ALo(87,"number"),e.qZA()()()()()()(),e.TgZ(88,"div")(89,"div",11),e._UZ(90,"div",12),e.TgZ(91,"div",13),e._uU(92,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(93,"div",51)(94,"div",52)(95,"div",53),e._uU(96,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(97,"div",54),e._uU(98),e.qZA()(),e.TgZ(99,"div",52)(100,"div",53),e._uU(101,"Ng\u01b0\u1eddi \u0111\u1eb7t"),e.qZA(),e.TgZ(102,"div",54),e._uU(103),e.qZA()(),e.TgZ(104,"cf-multi-select",55)(105,"label",56),e._uU(106," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA(),e.YNc(107,Ir,1,1,"cf-hint",57),e.qZA()()(),e.TgZ(108,"div",58)(109,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateProduct())}),e._uU(110," Ch\u1ec9nh s\u1eeda "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("",t.bookingDetail.airline," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq(" ",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(30,26,t.bookingDetail.startTime,"HH:mm - dd/MM/yyyy"),") "),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(7),e.hij(" ",e.lcZ(74,29,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij(" ",e.lcZ(80,31,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(87,33,t.priceDetail.totalPrice)," \u0111"),e.xp6(12),e.hij(" ",t.productDetail.statusDisplay," "),e.xp6(5),e.hij(" ",t.productDetail.sourceDisplay," "),e.xp6(1),e.Q6J("status",t.formGroup.controls.channelDistribution.invalid&&(t.formGroup.controls.channelDistribution.dirty||t.formGroup.controls.channelDistribution.touched)?"error":"default")("status","default")("data",t.channelDistributionOption||e.DdM(35,wr))("allowSearch",!0)("formControl",t.formGroup.controls.channelDistribution)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==t.formGroup.controls.channelDistribution.errors?null:t.formGroup.controls.channelDistribution.errors.required)&&(t.formGroup.controls.channelDistribution.dirty||t.formGroup.controls.channelDistribution.touched))}}function Ur(i,r){1&i&&(e.TgZ(0,"div",65),e._UZ(1,"ticket-item-skeleton",66)(2,"ticket-item-skeleton",66)(3,"ticket-item-skeleton",66),e.qZA())}function Nr(i,r){1&i&&e._UZ(0,"cf-spinner")}let qr=(()=>{class i{constructor(t,n,o,a,c,s){this._fb=t,this._route=n,this._router=o,this._flightDataService=a,this._inventoryService=c,this._toastService=s,this.isLoading=!1,this.isSpinning=!1,this.productId="",this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL",selected:!1},{text:"Flychills",value:"B2B_GMBR",selected:!1},{text:"GMBR",value:"B2C_GMBR",selected:!1}],this.productDetail={source:"",sourceDisplay:"",status:N.LOCK_FOR_PROCESSING,statusDisplay:""},this._route.params.subscribe(d=>{this.productId=d.id})}ngOnInit(){this.initFormGroup(),this.productId&&this.getProductDetail()}initFormGroup(){this.formGroup=this._fb.group({channelDistribution:[null,l.kI.required]})}getProductDetail(){this.isLoading=!0,this._inventoryService.getProductDetail(this.productId).pipe((0,w.x)(()=>this.isLoading=!1)).subscribe({next:t=>{this.productDetail={source:t.data.source,sourceDisplay:"MANUAL"===t.data.source?"Th\u1ee7 c\xf4ng":"H\u1ec7 th\u1ed1ng",status:t.data.state,statusDisplay:de[t.data.state].name};const n=t.data.channelDistribution.split(",");this.formGroup.get("channelDistribution").setValue(n),this.initBookingDetail(t.data.bookingInfo),this.initPriceDetail(t.data.bookingInfo)}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:new Date(t.journeys[0].departure.localTime),endTime:new Date(t.journeys[0].arrival.localTime),statusText:"\u0110\xe3 gi\u1eef ch\u1ed7",flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(n=>({index:n.index,key:n.key,name:"",birthday:n.birthday,lastName:n.lastName,firstName:n.firstName,parentKey:n.parentKey,gender:n.genderEnum,type:n.type}))}}initPriceDetail(t){const n=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.totalFareCharge,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:n.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))}}updateProduct(){var t;if(this.formGroup.invalid)return;const n=this.formGroup.value;let a="";a=(null===(t=n.channelDistribution)||void 0===t?void 0:t.some(s=>"ALL"===s))?this.channelDistributionOption.filter(s=>"ALL"!==s.value).map(s=>s.value).join(","):n.channelDistribution.join(",");const c={channelDistribution:a,productId:this.productId,saleInfo:null};this.isSpinning=!0,this._inventoryService.updateProductDetail(c).pipe((0,w.x)(()=>this.isSpinning=!1)).subscribe({next:s=>{console.log(s),this._toastService.add("OK"===s.status?{severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",sticky:!1}:{severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})}})}gotoManage(){this._router.navigate(["admin/manage-product"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(O.gz),e.Y36(O.F0),e.Y36(j.G),e.Y36(ae),e.Y36(R.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["edit-product"]],standalone:!0,features:[e.jDz],decls:12,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer",3,"click"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[4,"ngIf"],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","items-end","gap-[10px]","p-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"min-w-[120px]","text-end","text-heading-md","text-primary-1-4"],[1,"grid","grid-cols-2","gap-4","bg-neutral-white","py-4","px-6"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-express-sm"],[1,"w-full","h-10","py-2.5","px-3","text-body-md","text-neutral-gray-6","rounded","border","border-neutral-gray-3","bg-neutral-gray-1","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex","justify-end"],["cf-button","",1,"justify-center",3,"click"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],["cfHint","",3,"hint"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.NdJ("click",function(){return n.gotoManage()}),e._uU(3,"T\u1ed5ng kho"),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft h\xe0ng"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,Or,111,36,"div",7),e.YNc(10,Ur,4,0,"div",8),e.qZA()()(),e.YNc(11,Nr,1,0,"cf-spinner",9)),2&t&&(e.xp6(9),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isSpinning))},dependencies:[p.ez,p.sg,p.O5,p.JJ,p.uU,l.u5,l.JJ,l.UX,l.oH,u.AxE,u.Sm8,x.N8,x.Xq,B.IA,C.j$,Z.OR,W.U,re.C,ie.m],encapsulation:2}),i})();function Mr(i,r){1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"ticket-item-skeleton",16)(3,"ticket-item-skeleton",16)(4,"ticket-item-skeleton",16)(5,"ticket-item-skeleton",16),e.qZA()())}function Br(i,r){1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",22),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",24),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",25),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function Jr(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",28)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7!"),e.qZA()(),e.BQk())}function Hr(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Pr(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Lr(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",26),e.qZA(),e.YNc(6,Jr,8,0,"ng-container",27),e.YNc(7,Hr,6,0,"ng-container",27),e.YNc(8,Pr,6,0,"ng-container",27),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function Qr(i,r){1&i&&(e.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(7,"button",36),e._uU(8," Ch\u01b0a thanh to\xe1n "),e.qZA()(),e.TgZ(9,"div",37)(10,"div",38),e._uU(11,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(12,"div",39)(13,"div",40)(14,"div",41)(15,"div",42),e._uU(16,"M\xe3 \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(17,"div",43),e._uU(18,"GMBR12312"),e.qZA()(),e.TgZ(19,"div",41)(20,"div",42),e._uU(21,"T\u1ed5ng ti\u1ec1n(bao g\u1ed3m VAT)"),e.qZA(),e.TgZ(22,"div",43),e._uU(23,"GMBR12312"),e.qZA()(),e.TgZ(24,"div",41)(25,"div",42),e._uU(26,"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(27,"div",43),e._uU(28,"Ch\u01b0a thanh to\xe1n"),e.qZA()()(),e.TgZ(29,"div",44)(30,"div"),e._uU(31,"1. Qu\xfd kh\xe1ch vui l\xf2ng ti\u1ebfn h\xe0nh thanh to\xe1n, \u0111\u01a1n h\xe0ng s\u1ebd h\u1ebft h\u1ea1n n\u1ebfu kh\xf4ng thanh to\xe1n tr\u01b0\u1edbc th\u1eddi gian "),e.qZA(),e.TgZ(32,"div"),e._uU(33,"2. Vui l\xf2ng ki\u1ec3m tra email abc@gmail.com \u0111\u1ec3 bi\u1ebft chi ti\u1ebft \u0111\u01a1n h\xe0ng v\xe0 h\u01b0\u1edbng d\u1eabn thanh to\xe1n"),e.qZA(),e.TgZ(34,"div"),e._uU(35,"3. Li\xean h\u1ec7 xxx \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 khi c\u1ea7n thi\u1ebft"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"4. Ki\u1ec3m tra t\xecnh tr\u1ea1ng \u0111\u01a1n h\xe0ng t\u1ea1i xxx"),e.qZA()()()(),e.TgZ(38,"div",37)(39,"div",38),e._uU(40,"Th\xf4ng b\xe1o"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"\u0110\u01a1n h\xe0ng ch\u01b0a \u0111\u01b0\u1ee3c thanh to\xe1n"),e.qZA()()(),e.TgZ(43,"div",45),e._UZ(44,"div",46),e.qZA()())}let Rr=(()=>{class i{constructor(t){this._fb=t,this.isLoading=!1,this.distributionChannelOptions=[],this.stateMode="has_value"}ngOnInit(){this.initFormGroup(),this.initListOptions()}initFormGroup(){this.searchForm=this._fb.group({channel:[""],searchText:[""]})}initListOptions(){this.distributionChannelOptions=[{value:"",text:"T\u1ef1 \u0111\u1ed9ng"},{value:F.h.B2B_GMBR,text:"Flychills"},{value:F.h.B2C_GMBR,text:"GMBR"}]}onSearch(){}onChannelChange(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["retail-order"]],standalone:!0,features:[e.jDz],decls:17,vars:10,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng",3,"formControl"],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[4,"ngIf"],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"w-[764px]","flex","flex-col","gap-y-4"],[1,"flex","justify-between","items-center"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],["cf-button","","size","medium"],[1,"bg-neutral-white","p-4","flex","flex-col","gap-y-4","rounded"],[1,"text-heading-xs"],[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],[1,"w-[200px]","text-body-md-short"],[1,"text-express-md"],[1,"px-3","py-1.5","bg-functional-1-1","rounded","text-body-md-short"],[1,"mt-[56px]","w-[302px]","rounded","h-fit","md:hidden","sticky","top-0"],[1,"bg-neutral-white","h-[500px]","rounded"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-select",4),e.NdJ("selectedChange",function(a){return n.onChannelChange(a)}),e.qZA(),e.TgZ(6,"cf-input-group",5),e._UZ(7,"cf-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.onSearch()}),e._UZ(10,"cf-icon",9),e._uU(11," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(12,"div",10),e.YNc(13,Mr,6,0,"div",11),e.YNc(14,Br,13,0,"div",12),e.YNc(15,Lr,9,3,"div",12),e.YNc(16,Qr,45,0,"div",13),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("formControl",n.searchForm.controls.channel)("data",n.distributionChannelOptions)("allowSearch",!1),e.xp6(1),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"search_default"===n.stateMode),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&("not_found"===n.stateMode||"cancelled"===n.stateMode||"issued"===n.stateMode)),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"has_value"===n.stateMode))},dependencies:[p.ez,p.O5,C.j$,C.ND,C.BN,u.AxE,u.Sm8,M.q,l.u5,l.Fj,l.JJ,l.UX,l.oH,x.N8,x.Xq,B.IA],encapsulation:2}),i})();function Yr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCancleHunt(o.orderId))}),e._UZ(1,"cf-icon",48),e._uU(2," H\u1ee7y s\u0103n "),e.qZA()}}function Gr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",49,50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onEditHunt())}),e._UZ(3,"cf-icon",51),e._uU(4," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.pnrOrderDetailData.canUpdate)("disabledOneClick",!0)("manualHandle",t.pnrOrderDetailData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function jr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.gotoBookingDetail())}),e._UZ(1,"cf-icon",53),e._uU(2," M\u1edf \u0111\u1eb7t ch\u1ed7 "),e.qZA()}}function zr(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCreateNewRegisterHunt())}),e._UZ(1,"cf-icon",54),e._uU(2," T\u1ea1o l\u1ea1i y\xeau c\u1ea7u "),e.qZA()}}function Kr(i,r){if(1&i&&(e.TgZ(0,"div",55),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pnrOrderDetailData.totalCharge)," \u0111")}}function Vr(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",34)(2,"div",35),e._UZ(3,"cf-icon",56),e.TgZ(4,"span"),e._uU(5,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(6,"div",37)(7,"div",57)(8,"div",58)(9,"div",59),e._uU(10),e.qZA()(),e.TgZ(11,"div",60),e._UZ(12,"img",61),e.qZA(),e.TgZ(13,"div",62)(14,"div",63),e._uU(15),e.qZA(),e.TgZ(16,"div",64),e._uU(17),e.qZA()(),e.TgZ(18,"div",62)(19,"div",63),e._uU(20),e.qZA(),e.TgZ(21,"div",64),e._uU(22),e.qZA()(),e.TgZ(23,"div",62)(24,"div",63),e._uU(25),e.qZA(),e.TgZ(26,"div",64),e._uU(27),e.qZA()(),e.TgZ(28,"div",65)(29,"div"),e._uU(30),e.qZA(),e.TgZ(31,"div",66)(32,"div",58),e._UZ(33,"div",67)(34,"div",68),e.qZA(),e._UZ(35,"cf-icon",69),e.qZA()(),e.TgZ(36,"div",62)(37,"div",63),e._uU(38),e.qZA(),e.TgZ(39,"div",64),e._uU(40),e.qZA()()()()(),e.BQk()),2&i){const t=r.$implicit,n=r.index;e.xp6(10),e.hij(" ",n+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departDate),e.xp6(2),e.Oqu(t.fareClass),e.xp6(3),e.Oqu(t.departTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(3),e.Oqu("Bay th\u1eb3ng"),e.xp6(8),e.Oqu(t.arriveTime),e.xp6(2),e.Oqu(t.endPoint)}}function $r(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Vr,41,11,"ng-container",33),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.segments)}}function Xr(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",70),e._uU(2),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(2),e.AsE(" ",t.fromDate," - ",t.toDate," ")}}function Wr(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",71),e._UZ(2,"img",72),e.TgZ(3,"div",55),e._uU(4),e.ALo(5,"number"),e.qZA()(),e.BQk()),2&i){const t=r.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij("",e.lcZ(5,2,t.targetPrice)," \u0111")}}function ec(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Wr,6,4,"ng-container",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.priceMonitors)}}function tc(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function nc(i,r){if(1&i&&(e.TgZ(0,"div",70),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function ic(i,r){if(1&i&&(e.TgZ(0,"div",76)(1,"div",79),e._uU(2),e.qZA(),e.TgZ(3,"div",80),e.YNc(4,nc,2,1,"div",81),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngForOf",t.fareClass)}}function oc(i,r){if(1&i&&(e.TgZ(0,"div",75)(1,"div",76),e._UZ(2,"img",72),e.TgZ(3,"div",55),e._uU(4),e.TgZ(5,"span",77),e._uU(6),e.qZA()()(),e.YNc(7,ic,5,2,"div",78),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij("",t.airlineName," "),e.xp6(2),e.hij("(",t.airline,")"),e.xp6(1),e.Q6J("ngForOf",t.fareType)}}function ac(i,r){if(1&i&&(e.TgZ(0,"div",73),e.YNc(1,oc,8,4,"div",74),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.monitors)}}function rc(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function cc(i,r){1&i&&(e.TgZ(0,"div",82)(1,"div",39),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",42),e._uU(4," Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n s\u0103n v\xe9 "),e.qZA()())}function sc(i,r){if(1&i&&(e.TgZ(0,"div",82)(1,"div",39),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"div",47),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij("",null==t.pnrOrderDetailData.ownerInfo?null:t.pnrOrderDetailData.ownerInfo.name," ")}}const Ve=function(){return["CREATE","IN_PROCESS","IN_PROCESS_PRICE_UP"]},lc=function(){return["COMPLETED"]},uc=function(){return["EXPIRED","CANCEL"]};function dc(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.gotoManage())}),e._UZ(3,"cf-icon",12),e._uU(4," Quay l\u1ea1i "),e.qZA(),e.TgZ(5,"div",13),e.YNc(6,Yr,3,0,"button",14),e.YNc(7,Gr,5,5,"button",15),e.YNc(8,jr,3,0,"button",16),e.YNc(9,zr,3,0,"button",16),e.qZA()(),e.TgZ(10,"div",17)(11,"div",18)(12,"div",19)(13,"div",20),e._UZ(14,"cf-icon",21),e.TgZ(15,"div",22),e._uU(16),e.qZA()()(),e.TgZ(17,"div",23)(18,"div",24)(19,"div",25)(20,"div",26),e._uU(21,"H\xe0nh tr\xecnh"),e.qZA(),e.TgZ(22,"div",22)(23,"div",27)(24,"span"),e._uU(25),e.qZA(),e._UZ(26,"cf-icon",28),e.TgZ(27,"span"),e._uU(28),e.qZA()()()(),e._UZ(29,"div",29),e.TgZ(30,"div",30)(31,"div",26),e._uU(32,"Ng\xe0y bay"),e.qZA(),e.TgZ(33,"div",22),e._uU(34),e.qZA()(),e._UZ(35,"div",29),e.TgZ(36,"div",30)(37,"div",31),e._uU(38,"M\xe3 \u0111\u1eb7t ch\u1ed7 (PNR)"),e.qZA()(),e._UZ(39,"div",29),e.TgZ(40,"div",30)(41,"div",26),e._uU(42,"T\u1ed5ng chi ph\xed"),e.qZA(),e.YNc(43,Kr,3,3,"div",32),e.qZA()()()(),e.YNc(44,$r,2,1,"ng-container",33),e.TgZ(45,"div",34)(46,"div",35),e._UZ(47,"cf-icon",36),e.TgZ(48,"span"),e._uU(49,"C\u1ea5u h\xecnh s\u0103n v\xe9"),e.qZA()(),e.TgZ(50,"div",37)(51,"div",38)(52,"div",39),e._uU(53,"H\u1ea1n s\u0103n v\xe9:"),e.qZA(),e.TgZ(54,"div",40)(55,"div"),e._uU(56),e.qZA()()(),e.TgZ(57,"div",38)(58,"div",39),e._uU(59,"Gi\u1edd kh\u1edfi h\xe0nh: "),e.qZA(),e.TgZ(60,"div",41),e.YNc(61,Xr,3,2,"ng-container",33),e.qZA()(),e.TgZ(62,"div",38)(63,"div",39),e._uU(64,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a: "),e.qZA(),e.TgZ(65,"div",42),e.YNc(66,ec,2,1,"div",43),e.YNc(67,tc,2,0,"div",43),e.qZA()(),e.TgZ(68,"div",38)(69,"div",39),e._uU(70,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n: "),e.qZA(),e.YNc(71,ac,2,1,"div",44),e.YNc(72,rc,2,0,"div",43),e.qZA(),e.YNc(73,cc,5,0,"div",45),e.qZA()(),e.TgZ(74,"div",34)(75,"div",35),e._UZ(76,"cf-icon",46),e.TgZ(77,"span"),e._uU(78,"Th\xf4ng tin chi ti\u1ebft"),e.qZA()(),e.TgZ(79,"div",37)(80,"div",38)(81,"div",39),e._uU(82,"M\xe3 y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(83,"div",42),e._uU(84),e.qZA()(),e.TgZ(85,"div",38)(86,"div",39),e._uU(87,"Ng\xe0y y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(88,"div",42),e._uU(89),e.qZA()(),e.TgZ(90,"div",38)(91,"div",39),e._uU(92,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n: "),e.qZA(),e.TgZ(93,"div",47),e._uU(94),e.qZA()(),e.YNc(95,sc,5,1,"div",45),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",e.DdM(26,Ve).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(27,Ve).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(28,lc).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(29,uc).includes(t.pnrOrderDetailData.state)),e.xp6(3),e.Tol(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].backgroundColor),e.xp6(1),e.Tol(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].textColor),e.xp6(1),e.Q6J("icon",t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].icon),e.xp6(2),e.Oqu(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].description),e.xp6(9),e.hij(" ",t.pnrOrderDetailData.journeys[0].startPoint," "),e.xp6(3),e.hij(" ",t.pnrOrderDetailData.journeys[0].endPoint," "),e.xp6(6),e.Oqu(t.pnrOrderDetailData.journeys[0].departTime),e.xp6(9),e.Q6J("ngIf",t.pnrOrderDetailData.totalCharge),e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys),e.xp6(12),e.hij("",t.pnrOrderDetailData.timeExpire," "),e.xp6(5),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys[0].rangeTime),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(4),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.notifyBeforeExpired),e.xp6(11),e.hij(" ",t.pnrOrderDetailData.code," "),e.xp6(5),e.hij("",t.pnrOrderDetailData.timeCreate," "),e.xp6(5),e.hij("",t.pnrOrderDetailData.userActionInfo.name," "),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.ownerInfo)}}function pc(i,r){1&i&&(e.TgZ(0,"div",83),e._UZ(1,"ticket-item-skeleton",84)(2,"ticket-item-skeleton",84)(3,"ticket-item-skeleton",84),e.qZA())}let _c=(()=>{class i{constructor(t,n,o,a,c,s,d,g,h){this._route=n,this._router=o,this._flightDataService=a,this._bookingHunterService=c,this._modal=s,this._ticketLowFareService=d,this._toastService=g,this._huntTicketAdvancedBindingSvc=h,this.STATUS_HUNTER=D.b,this.MONITOR_TYPE=ge.$,this.CARD_HUNTER_STATUS=K.u1,this.isSpinner=!1,t.registerIcons([u.toh,u.Xzk,u.D7,u.Ffn,u.TOh,u.okA]),this._route.params.subscribe(v=>{this.orderId=v.id,this.getHunterOrderDetail()})}ngOnInit(){}getHunterOrderDetail(){this._bookingHunterService.getPnrOrderDetail(this.orderId).subscribe({next:t=>{var n,o;console.log(t),"OK"===t.status&&(this.pnrOrderDetailData={orderId:t.data.orderId,code:t.data.code,canUpdate:t.data.canUpdate,airline:t.data.fareInfo.airline||"",bookingCode:t.data.fareInfo.detectedPnr||"",totalCharge:t.data.fareInfo.detectedFare||0,ownerInfo:t.data.ownerInfo,userActionInfo:t.data.userActionInfo,state:t.data.state,monitorType:t.data.monitorType,priceMonitors:(null===(n=t.data.orderInfo.priceMonitors)||void 0===n?void 0:n.map(a=>({airline:a.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(a.airline),targetPrice:a.targetPrice})))||[],notifyBeforeExpired:t.data.orderInfo.notifyBeforeExpired,timeCreate:t.data.orderInfo.timeCreate?T(t.data.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpire:t.data.orderInfo.timeExpire?T(t.data.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdate:t.data.orderInfo.timeUpdate?T(t.data.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",timeFinished:t.data.orderInfo.timeFinished?T(t.data.orderInfo.timeFinished).format("DD/MM/YYYY HH:mm"):"",monitors:(null===(o=t.data.orderInfo.fareMonitors)||void 0===o?void 0:o.map(a=>({airline:a.specifyFareClassInfo.airline,airlineName:this._flightDataService.getAirlineNameByCode(a.specifyFareClassInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(a.specifyFareClassInfo.airline),fareType:a.specifyFareClassInfo.cabin.flatMap(c=>c.fareType).map(c=>({order:c.order,code:c.code,name:c.description,fareClass:c.fareClass.map(s=>({order:s.order,code:s.code,name:s.name}))}))})))||[],journeys:t.data.ticketInfo.journeys.map(a=>{var c;return{leg:a.leg,airline:t.data.ticketInfo.airline,startPoint:a.startPoint,endPoint:a.endPoint,departTime:a.departTime?T(a.departTime).format("DD/MM/YYYY"):"",arrivalTime:a.arrivalTime,duration:a.duration,rangeTime:a.rangeTime,segments:(null===(c=a.segments)||void 0===c?void 0:c.map(s=>({departDate:T(s.departTime).format("DD/MM/YYYY"),departTime:T(s.departTime).format("HH:mm"),arriveDate:T(s.arriveTime).format("DD/MM/YYYY"),arriveTime:T(s.arriveTime).format("HH:mm"),startPoint:s.startPoint,endPoint:s.endPoint,fareClass:s.fareClass,airline:t.data.fareInfo.airline||"",airlineName:this._flightDataService.getAirlineNameByCode(t.data.fareInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(t.data.fareInfo.airline),flightNumber:`${t.data.fareInfo.airline} ${s.flightNumber}`,duration:""})))||[]}}),passengers:t.data.ticketInfo.passengers.map(a=>({birthday:a.birthday,firstName:a.firstName,lastName:a.lastName,displayName:`${a.lastName} ${a.firstName}`,type:a.type,index:a.index,parentIndex:a.parentIndex,namePrefix:a.namePrefix,gender:a.gender}))},console.log(this.pnrOrderDetailData),this.mappingPaxDisplayData())}})}mappingPaxDisplayData(){const t=[];this.pnrOrderDetailData.passengers.forEach(n=>{var o;if("INF"!==n.type){const a={displayName:n.lastName+" "+n.firstName,index:"number"==typeof n.index?n.index:"",type:n.type,gender:n.gender,namePrefix:"MALE"===(null===(o=n.gender)||void 0===o?void 0:o.toUpperCase())?"MR":"MRS"};t.push(a)}}),this.pnrOrderDetailData.passengers.forEach(n=>{var o;if("INF"===n.type){const a={displayName:n.lastName+" "+n.firstName,type:n.type,gender:n.gender,namePrefix:"MALE"===(null===(o=n.gender)||void 0===o?void 0:o.toUpperCase())?"B\xc9 TRAI":"B\xc9 G\xc1I",parentIndex:n.parentIndex||"",birthday:n.birthday?T(n.birthday).format("DD/MM/YYYY"):""},c=t.find(s=>s.index===n.parentIndex);c&&(c.infant=a)}}),this.displayPassengers=t}gotoManage(){this._router.navigate(["admin/hunt-ticket-advanced-list"])}gotoBookingDetail(){}onEditHunt(){this._modal.open(xe,{orderId:this.orderId}).afterClosed$.subscribe({next:n=>{"OK"===n.data&&this.getHunterOrderDetail()}})}onCancleHunt(t){this._modal.open(Z.V0,{title:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:o=>{o.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,w.x)(()=>this.isSpinner=!1)).subscribe({next:a=>{this._toastService.add("OK"===a.status?{severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${t} th\xe0nh c\xf4ng.`,sticky:!1}:{severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${t} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}}))}})}onCreateNewRegisterHunt(){this._huntTicketAdvancedBindingSvc.setOrderId(this.orderId),this._router.navigate(["admin/hunt-ticket-advanced-add"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.KNP),e.Y36(O.gz),e.Y36(O.F0),e.Y36(j.G),e.Y36(K.yL),e.Y36(I.oE),e.Y36(se.s),e.Y36(R.BX),e.Y36(be))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-detail"]],standalone:!0,features:[e.jDz],decls:11,vars:2,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer",3,"click"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","justify-between","items-center"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap","bg-neutral-white",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],[1,"flex","gap-x-4"],["cf-button","","size","medium","type","secondary","class","whitespace-nowrap bg-neutral-white",3,"click",4,"ngIf"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium",3,"click",4,"ngIf"],[1,"flex","flex-col","gap-y-6"],[1,"bg-white","rounded-lg","overflow-hidden"],[1,"flex","items-center","gap-x-2","px-2.5","py-1.5"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],[1,"p-3","flex","flex-col","gap-y-[20px]"],[1,"flex","gap-x-6"],[1,"flex","flex-col","gap-y-2"],[1,"text-body-md"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small"],[1,"h-[48px]","w-[1px]","bg-neutral-gray-1"],[1,"flex-1","flex","flex-col","justify-between","gap-y-2"],[1,"text-body-md","whitespace-nowrap"],["class","text-express-md text-neutral-gray-6",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","gap-x-2","text-heading-xs","text-neutral-gray-6"],["icon","settings","size","small"],[1,"p-3","bg-neutral-white","rounded","border","border-dashed","border-neutral-gray-3"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","flex","items-center","gap-x-6","text-express-md","text-neutral-gray-6"],[1,"flex-1","flex","gap-x-2","items-center","text-express-md","text-neutral-gray-6"],[1,"flex-1","text-express-md","text-neutral-gray-6"],[4,"ngIf"],["class","flex-1 text-express-md text-neutral-gray-6 flex flex-col gap-y-3",4,"ngIf"],["class","p-3 flex gap-x-3",4,"ngIf"],["icon","document","size","small"],[1,"flex-1","text-body-md","text-neutral-gray-6"],["icon","delete","size","small",1,"mr-2.5"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click"],["trigger","","originOverlay","cdkOverlayOrigin"],["icon","edit_alt","size","small",1,"mr-2.5"],["cf-button","","size","medium",3,"click"],["icon","external_link","size","small",1,"mr-2.5"],["icon","refresh","size","small",1,"mr-2.5"],[1,"text-express-md","text-neutral-gray-6"],["icon","plane","size","small"],[1,"flex","justify-between","gap-x-3","py-3"],[1,"flex","items-center"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","gap-x-1","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"text-express-sm","text-neutral-gray-6","py-1","px-2","rounded","bg-neutral-gray-2"],[1,"flex","gap-x-2","py-2"],[1,"w-[24px]","h-[24px]","object-contain",3,"src"],[1,"flex-1","text-express-md","text-neutral-gray-6","flex","flex-col","gap-y-3"],["class","flex flex-col gap-y-3",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-3"],[1,"flex","gap-x-2"],[1,"uppercase"],["class","flex gap-x-2",4,"ngFor","ngForOf"],[1,"rounded","text-express-sm","h-fit","py-1","px-2","border","border-neutral-gray-5"],[1,"flex","gap-2","flex-wrap"],["class","text-express-sm text-neutral-gray-6 py-1 px-2 rounded bg-neutral-gray-2",4,"ngFor","ngForOf"],[1,"p-3","flex","gap-x-3"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.NdJ("click",function(){return n.gotoManage()}),e._uU(3,"S\u0103n v\xe9 t\u1ebft"),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,dc,96,30,"div",7),e.YNc(10,pc,4,0,"div",8),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.pnrOrderDetailData),e.xp6(1),e.Q6J("ngIf",!n.pnrOrderDetailData))},dependencies:[p.ez,p.sg,p.O5,p.JJ,u.AxE,u.Sm8,x.N8,x.Xq,B.IA,ze.Lk,je.f,Ze.xu],encapsulation:2}),i})()},80429:(Se,X,m)=>{m.d(X,{q:()=>l});var p=m(94650);let l=(()=>{class x{transform(u,C,...W){return C(u,...W)}}return x.\u0275fac=function(u){return new(u||x)},x.\u0275pipe=p.Yjl({name:"mapper",type:x,pure:!0,standalone:!0}),x})()}}]);