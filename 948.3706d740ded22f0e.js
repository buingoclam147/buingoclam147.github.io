"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[948],{47917:(ye,Y,m)=>{m.d(Y,{h:()=>p});var p=(()=>{return(s=p||(p={})).B2B_GMBR="B2B_GMBR",s.B2C_GMBR="B2C_GMBR",p;var s})()},20948:(ye,Y,m)=>{m.r(Y),m.d(Y,{ApproveProductModalComponent:()=>be,CreateDistributionTicketConfigComponent:()=>vt,DistributionTicketConfigComponent:()=>gt,EditProductComponent:()=>Oa,HuntTicketAdvancedAddComponent:()=>so,HuntTicketAdvancedEditComponent:()=>ve,HuntTicketAdvancedListComponent:()=>Ea,ManageApproveProductComponent:()=>Sa,ManageProductComponent:()=>Zt,ManualSaleProductComponent:()=>Ae,ReceivingTicketInventoryComponent:()=>rt,RetailOrderComponent:()=>Ya});var p=m(36895),s=m(24006),h=m(83700),ee=m(72853),_=m(72506),x=m(44143),ue=m(17736),I=m(74713),Z=m(67460),B=m(76978),te=m(88001),C=m(15439),M=m(28746),e=m(94650),R=m(80529),O=m(54004),u=m(97582),d=m(87067),w=m(43429);let Ne=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Be),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})(),Be=(()=>{class n{}return(0,u.gn)([(0,w.D)(()=>Je),(0,d.C)()],n.prototype,"productDetail",void 0),n})(),Je=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"airline",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"arrival",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"bookingCode",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"channelDistribution",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"departure",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"flyScheduleTime",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"ownerName",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"paxCount",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"productBasePrice",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"productId",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"timeHoldBooking",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"state",void 0),n})();var Ce=m(99251);let Pe=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Ce.eG),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})(),He=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Qe),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})();class Qe{}let Le=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Ye),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})();class Ye{}let Ee=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Re),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})(),Re=(()=>{class n{}return(0,u.gn)([(0,w.D)(()=>Ce.eG),(0,d.C)()],n.prototype,"bookingInfo",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"channelDistribution",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"distributionFee",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"productId",void 0),(0,u.gn)([(0,w.D)(()=>je),(0,d.C)()],n.prototype,"saleInfo",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"source",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"state",void 0),n})(),je=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"agentName",void 0),(0,u.gn)([(0,w.D)(()=>Ge),(0,d.C)()],n.prototype,"newPnrInfo",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"revenue",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"salesChannel",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"sellSourceType",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"time",void 0),n})(),Ge=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"airline",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"pnr",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"supplier",void 0),n})();var J=m(50494);const j={headers:new R.WM({"Content-Type":"application/json"})};let ne=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}manageProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/manage-product",JSON.stringify(t),j).pipe((0,O.U)(i=>(0,J.yE)(Ne,i,{excludeExtraneousValues:!0})))}shortRetrieveTicket(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/retrieve-ticket",JSON.stringify(t),j).pipe((0,O.U)(i=>(0,J.yE)(Pe,i,{excludeExtraneousValues:!0})))}approveProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/approved-product",JSON.stringify(t),j).pipe((0,O.U)(i=>(0,J.yE)(He,i,{excludeExtraneousValues:!0})))}importManualProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/import-product-manual",JSON.stringify(t),j).pipe((0,O.U)(i=>(0,J.yE)(Le,i,{excludeExtraneousValues:!0})))}getProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/get-product-detail",JSON.stringify({productId:t}),j).pipe((0,O.U)(i=>(0,J.yE)(Ee,i,{excludeExtraneousValues:!0})))}updateProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/update-product",JSON.stringify(t),j).pipe((0,O.U)(i=>(0,J.yE)(Ee,i,{excludeExtraneousValues:!0})))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(R.eN),e.LFG(te.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var q=m(82761),$=m(62331),X=m(62733);function ze(n,a){1&n&&e._UZ(0,"cf-hint",18),2&n&&e.Q6J("hint","Ch\u01b0a nh\u1eadp booking code")}function Ve(n,a){1&n&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",24),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",27),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function Ke(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7!"),e.qZA()(),e.BQk())}function $e(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Xe(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function We(n,a){if(1&n&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",28),e.qZA(),e.YNc(6,Ke,8,0,"ng-container",17),e.YNc(7,$e,6,0,"ng-container",17),e.YNc(8,Xe,6,0,"ng-container",17),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function et(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",77),e._uU(2),e.qZA(),e.TgZ(3,"td",78),e._uU(4),e.qZA(),e.TgZ(5,"td",79),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",79),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",80)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}const tt=function(){return[]};function nt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div")(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(7,"div",36)(8,"div",37)(9,"div",38)(10,"div"),e._UZ(11,"img",39),e.qZA(),e.TgZ(12,"div",40)(13,"span",41),e._uU(14),e.qZA(),e.TgZ(15,"span",42),e._uU(16),e.qZA()(),e.TgZ(17,"div",43),e._uU(18),e.qZA()(),e._UZ(19,"div",44),e.TgZ(20,"div",45)(21,"div",46)(22,"span"),e._uU(23),e.qZA(),e._UZ(24,"cf-icon",47),e.TgZ(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"div",48),e._UZ(28,"span"),e.TgZ(29,"span",49),e._uU(30),e.ALo(31,"date"),e.qZA()()(),e._UZ(32,"div",44),e.TgZ(33,"div",50)(34,"div",51),e._uU(35,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(36,"div",2),e._uU(37),e.qZA()(),e._UZ(38,"div",44),e.TgZ(39,"div",50)(40,"div",51),e._uU(41,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(42,"div",52),e._UZ(43,"cf-icon",53),e.TgZ(44,"div",54)(45,"label",55),e._uU(46),e.qZA()()()()()(),e.TgZ(47,"div",56)(48,"div",57),e._UZ(49,"cf-icon",58),e._uU(50," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(51,"div",59)(52,"div")(53,"table",60)(54,"thead")(55,"tr",61)(56,"th",62),e._uU(57,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(58,"th",63),e._uU(59,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(60,"th",64),e._uU(61,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(62,"th",64),e._uU(63,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(64,"th",65),e._uU(65,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(66,"tbody"),e.YNc(67,et,15,11,"tr",66),e.qZA()(),e._UZ(68,"hr",67),e.qZA(),e.TgZ(69,"div",68)(70,"div",69)(71,"div",70),e._uU(72,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(73,"div",71)(74,"span"),e._uU(75),e.ALo(76,"number"),e.qZA()()(),e.TgZ(77,"div",69)(78,"div",70),e._uU(79,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(80,"div",71),e._uU(81),e.ALo(82,"number"),e.qZA()(),e.TgZ(83,"div",69)(84,"div",70),e._uU(85,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(86,"div",72)(87,"span"),e._uU(88),e.ALo(89,"number"),e.qZA()()()()()()(),e.TgZ(90,"div")(91,"div",33),e._UZ(92,"div",34),e.TgZ(93,"div",35),e._uU(94,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(95,"div",36)(96,"cf-multi-select",73),e.NdJ("valueChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeChannel(o))}),e.TgZ(97,"label",74),e._uU(98," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()()(),e.TgZ(99,"div",75)(100,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCreateDistributionTicketConfig())}),e._uU(101," C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i "),e.qZA(),e.TgZ(102,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(103," Nh\u1eadp kho "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("","VN"," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq("",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(31,21,t.bookingDetail.startTime,"HH:mm - dd/MM/yyyy"),")"),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(8),e.hij(" ",e.lcZ(76,24,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij("",e.lcZ(82,26,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(89,28,t.priceDetail.totalPrice)," \u0111"),e.xp6(8),e.Q6J("status","default")("data",t.channelDistributionOption||e.DdM(30,tt))("allowSearch",!0)("formControl",t.channelControl)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230)}}function it(n,a){1&n&&(e.TgZ(0,"div",81)(1,"div",82),e._UZ(2,"ticket-item-skeleton",83)(3,"ticket-item-skeleton",83)(4,"ticket-item-skeleton",83)(5,"ticket-item-skeleton",83),e.qZA()())}function ot(n,a){1&n&&e._UZ(0,"cf-spinner")}const at=function(n){return{"opacity-50 pointer-events-none cursor-default":n}};let rt=(()=>{class n{constructor(t,i,o,r,c,l){this._inventoryService=o,this._router=r,this._toastService=c,this._flightDataService=l,this.channelControl=new s.NI(["ALL"],s.kI.required),this.airlineSelectOption=[],this.supplierSelectOption=[],this.channelDistributionOption=[],this.isLoading=!1,this.isLoadingInventory=!1,this.stateMode="search_default",this.isDisableSupplier=!1,t.registerIcons([_.Ffn]),this.searchForm=i.group({airline:["VJ"],supplier:[""],searchText:[""]})}ngOnInit(){this.airlineSelectOption=[{text:"Vietnam Airlines",value:"VN"},{text:"Bamboo Airways",value:"QH"},{text:"Vietjet Air",value:"VJ"}],this.supplierSelectOption=[{text:"T\u1ef1 \u0111\u1ed9ng",value:""},...Object.entries(te.f$).map(([t,i])=>({text:t,value:i}))],this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL",selected:!1},{text:"B2B GMBR",value:"B2B_GMBR",selected:!1},{text:"B2C GMBR",value:"B2C_GMBR",selected:!1}]}onAirlineChange(t){console.log(t),"VN"===t.value?this.isDisableSupplier=!1:(this.isDisableSupplier=!0,this.searchForm.get("supplier").setValue(""))}onSearch(){var t;if(this.searchForm.invalid)return;const i=this.searchForm.value,o={airline:i.airline,bookingCode:null===(t=i.searchText)||void 0===t?void 0:t.toUpperCase(),supplier:i.supplier};console.log(o),this.isLoading=!0,this._inventoryService.shortRetrieveTicket(o).pipe((0,M.x)(()=>this.isLoading=!1)).subscribe({next:r=>{console.log(r),"OK"===r.status?(this.stateMode="has_value",this.initBookingDetail(r.data),this.initPriceDetail(r.data)):this.stateMode="not_found"},error:()=>{this.stateMode="not_found"}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:C(t.journeys[0].departure.localTime).toDate(),endTime:C(t.journeys[0].arrival.localTimelocalTime).toDate(),statusText:"\u0110\xe3 gi\u1eef ch\u1ed7",flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(i=>({index:i.index,key:i.key,name:"",birthday:i.birthday,lastName:i.lastName,firstName:i.firstName,parentKey:i.parentKey,gender:i.genderEnum,type:i.type}))}}initPriceDetail(t){const i=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.totalFareCharge,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:i.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))}}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}onSubmit(){var t;let o="";o=(null===(t=this.channelControl.value)||void 0===t?void 0:t.some(c=>"ALL"===c))?this.channelDistributionOption.filter(c=>"ALL"!==c.value).map(c=>c.value).join(","):this.channelControl.value.join(",");const r={channelDistribution:o,data:{airline:this.bookingDetail.airline||"",bookingCode:this.bookingDetail.bookingCode||"",supplier:this.bookingDetail.supplier||""}};console.log(r),this.isLoadingInventory=!0,this._inventoryService.importManualProduct(r).pipe((0,M.x)(()=>this.isLoadingInventory=!1)).subscribe({next:c=>{var l,f;if("OK"===c.status)this.searchForm.reset(),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\xe0nh c\xf4ng!",sticky:!1}),this.stateMode="search_default";else{const v=(null===(f=null===(l=c.objectError)||void 0===l?void 0:l.errorDescription)||void 0===f?void 0:f.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:v,sticky:!0})}},error:c=>{var l,f,v;if(c.error&&"FAILED"===c.error.status){const g=(null===(v=null===(f=null===(l=c.error)||void 0===l?void 0:l.objectError)||void 0===f?void 0:f.errorDescription)||void 0===v?void 0:v.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:g,sticky:!0})}else this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!",sticky:!0})}})}onChangeChannel(t){console.log(t),console.log(this.channelControl)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(s.qu),e.Y36(ne),e.Y36(q.F0),e.Y36($.BX),e.Y36(X.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["receiving-ticket-inventory"]],standalone:!0,features:[e.jDz],decls:21,vars:18,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],["textField","text","valueField","value","size","medium","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p",1,"w-[180px]",3,"formControl","data","allowSearch","ngClass"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp booking code",3,"formControl"],["tableSearchInput",""],["cfHint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"min-w-[750px]","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"text-neutral-gray-1","w-full","mb-4"],[1,"flex","flex-col","items-end","gap-[10px]","pr-3","pb-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"min-w-[120px]","text-end","text-heading-md","text-primary-1-4"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black"],[1,"flex","justify-end","items-center","gap-x-2","pb-6"],["cf-button","","size","medium",3,"click"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-select",4),e.NdJ("selectedChange",function(r){return i.onAirlineChange(r)}),e.qZA(),e._UZ(6,"cf-select",5),e.TgZ(7,"cf-input-group",6),e._UZ(8,"cf-icon",7)(9,"input",8,9),e.YNc(11,ze,1,1,"cf-hint",10),e.qZA(),e.TgZ(12,"button",11),e.NdJ("click",function(){return i.onSearch()}),e._UZ(13,"cf-icon",12),e._uU(14," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(15,"div",13),e.YNc(16,Ve,13,0,"div",14),e.YNc(17,We,9,3,"div",14),e.YNc(18,nt,104,31,"div",15),e.YNc(19,it,6,0,"div",16),e.qZA()(),e.YNc(20,ot,1,0,"cf-spinner",17)),2&t&&(e.xp6(5),e.Q6J("formControl",i.searchForm.controls.airline)("data",i.airlineSelectOption)("allowSearch",!1),e.xp6(1),e.Q6J("formControl",i.searchForm.controls.supplier)("data",i.supplierSelectOption)("allowSearch",!1)("ngClass",e.VKq(16,at,i.isDisableSupplier)),e.xp6(1),e.Q6J("status",i.searchForm.controls.searchText.invalid&&(i.searchForm.controls.searchText.dirty||i.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",i.searchForm.controls.searchText),e.xp6(2),e.Q6J("ngIf",(null==i.searchForm.controls.searchText.errors?null:i.searchForm.controls.searchText.errors.required)&&(i.searchForm.controls.searchText.dirty||i.searchForm.controls.searchText.touched)),e.xp6(1),e.Q6J("disabled",i.isLoading),e.xp6(4),e.Q6J("ngIf",!i.isLoading&&"search_default"===i.stateMode),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&("not_found"===i.stateMode||"cancelled"===i.stateMode||"issued"===i.stateMode)),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&"has_value"===i.stateMode),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoadingInventory))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,x.j$,x.ND,x.BN,_.AxE,_.Sm8,s.u5,s.Fj,s.JJ,s.UX,s.oH,I.q,h.N8,h.Xq,ee.m,B.IA,Z.OR,ue.U],encapsulation:2}),n})();var ie=m(48373);function ct(n,a){if(1&n&&(e.TgZ(0,"tr",24)(1,"td",25),e._UZ(2,"img",26),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij(" ",t.bookingCode||"-"," ")}}const lt=function(){return{num:25}},st=function(){return{num:50}},ut=function(){return{num:75}},dt=function(){return{num:100}},pt=function(n,a,t,i){return[n,a,t,i]};function _t(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12),e._uU(3,"Danh s\xe1ch c\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCreateDistributionTicketConfig())}),e._UZ(5,"cf-icon",14),e._uU(6," T\u1ea1o c\xe0i \u0111\u1eb7t m\u1edbi "),e.qZA()(),e.TgZ(7,"cf-table",15,16)(9,"thead",17)(10,"th",18),e._uU(11,"H\xe3ng bay"),e.qZA(),e.TgZ(12,"th",19),e._uU(13,"\u0110i\u1ec3m \u0111i"),e.qZA(),e.TgZ(14,"th",19),e._uU(15,"\u0110i\u1ec3m \u0111\u1ebfn"),e.qZA(),e.TgZ(16,"th",19),e._uU(17,"Ng\xe0y gi\u1edd bay"),e.qZA(),e.TgZ(18,"th",19),e._uU(19,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(20,"th",19),e._uU(21,"Ng\u01b0\u1eddi l\u1edbn"),e.qZA(),e.TgZ(22,"th",19),e._uU(23,"Tr\u1ebb em"),e.qZA(),e.TgZ(24,"th",19),e._uU(25,"Em b\xe9"),e.qZA(),e.TgZ(26,"th",19),e._uU(27,"Ng\xe0y t\u1ea1o"),e.qZA(),e.TgZ(28,"th",19),e._uU(29,"Ch\u1ee9c n\u0103ng"),e.qZA()(),e.TgZ(30,"tbody")(31,"tr")(32,"td",20)(33,"cf-input-group",21),e._UZ(34,"input",22),e.qZA()(),e.TgZ(35,"td",20)(36,"cf-input-group",21),e._UZ(37,"input",22),e.qZA()(),e.TgZ(38,"td",20)(39,"cf-input-group",21),e._UZ(40,"input",22),e.qZA()(),e.TgZ(41,"td",20)(42,"cf-input-group",21),e._UZ(43,"input",22),e.qZA()(),e.TgZ(44,"td",20)(45,"cf-input-group",21),e._UZ(46,"input",22),e.qZA()(),e.TgZ(47,"td",20)(48,"cf-input-group",21),e._UZ(49,"input",22),e.qZA()(),e.TgZ(50,"td",20)(51,"cf-input-group",21),e._UZ(52,"input",22),e.qZA()(),e.TgZ(53,"td",20)(54,"cf-input-group",21),e._UZ(55,"input",22),e.qZA()(),e.TgZ(56,"td",20)(57,"cf-input-group",21),e._UZ(58,"input",22),e.qZA()()(),e.YNc(59,ct,5,2,"ng-template",23),e.qZA()()()}if(2&n){const t=e.MAs(8),i=e.oxw();e.xp6(7),e.Q6J("fnSort",i.sortChange)("fnSearch",i.searchChange)("pageSizeList",e.l5B(10,pt,e.DdM(6,lt),e.DdM(7,st),e.DdM(8,ut),e.DdM(9,dt)))("listData",i.listOfData)("pageSize",i.pageSize),e.xp6(52),e.Q6J("ngForOf",t.partOfdata)}}function ft(n,a){1&n&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div"),e._UZ(3,"img",30),e.qZA(),e.TgZ(4,"div",31)(5,"div",32),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",33)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u0111i\u1ec1u ki\u1ec7n t\xecm ki\u1ebfm."),e.qZA()()()()())}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"div"),e._UZ(3,"img",34),e.qZA(),e.TgZ(4,"div",31)(5,"div",32),e._uU(6,"C\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",35),e._uU(8,"Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb danh s\xe1ch c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!"),e.qZA()(),e.TgZ(9,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSearch())}),e._UZ(10,"cf-icon",36),e._uU(11," Th\u1eed l\u1ea1i "),e.qZA()()()}}let gt=(()=>{class n{constructor(t,i){this._fb=t,this._router=i,this.dateRangeStr="",this.accountOptions=[],this.state="SUCCESS",this.pageSize=25,this.listOfData=[],this.searchChange=(o,r)=>r,this.sortChange=(o,r)=>r}ngOnInit(){this.searchForm=this._fb.group({fromDate:[null,s.kI.required],toDate:[null,s.kI.required],userId:[""]})}changeValue(){}onSearch(){}onDateSelection(t,i,o,r){}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(q.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:22,vars:16,consts:[[1,"py-4","px-[30px]","bg-white","w-full","md:hidden"],[1,"flex"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],["cfLabel",""],[1,"w-[168px]","mt-[28px]"],["cf-button","","type","secondary","size","medium",1,"justify-center",3,"disabled","click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"py-4","px-[30px]","rounded-lg","md:py-4","md:pr-0","md:pl-4","md:flex-auto","md:overflow-y-hidden"],["class","bg-neutral-white rounded-lg shadow-cf-md md:h-full",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-md md:mr-4",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:h-full"],[1,"p-4","flex","justify-between","items-center","md:hidden"],[1,"text-heading-sm"],["cf-button","","size","medium",3,"click"],["icon","export","size","small",1,"mr-2.5"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap"],["cf-th",""],["cf-td","",1,"py-2","px-1","!bg-neutral-white"],[1,"grow","!w-auto"],["type","text","size","medium","cf-input","","placeholder","L\u1ecdc"],["ngFor","",3,"ngForOf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],[1,"w-12","h-6","object-contain",3,"src"],[1,"py-2","px-3","text-body-sm"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:mr-4"],[1,"flex","flex-col","gap-y-8","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"],["src","assets/images/error.svg","alt",""],[1,"text-body-md-short"],["cfHeadIcon","","icon","refresh","size","small",1,"mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"cf-select",2)(3,"label",3),e._uU(4,"H\xe3ng bay"),e.qZA()(),e.TgZ(5,"cf-select",2)(6,"label",3),e._uU(7,"\u0110i\u1ec3m \u0111i"),e.qZA()(),e.TgZ(8,"cf-select",2)(9,"label",3),e._uU(10,"\u0110i\u1ec3m \u0111\u1ebfn"),e.qZA()(),e.TgZ(11,"cf-select",2)(12,"label",3),e._uU(13,"Ng\xe0y gi\u1edd bay"),e.qZA()(),e.TgZ(14,"div",4)(15,"button",5),e.NdJ("click",function(){return i.onSearch()}),e._UZ(16,"cf-icon",6),e._uU(17," T\xecm ki\u1ebfm "),e.qZA()()()(),e.TgZ(18,"div",7),e.YNc(19,_t,60,15,"div",8),e.YNc(20,ft,12,0,"div",9),e.YNc(21,mt,12,0,"div",9),e.qZA()),2&t&&(e.xp6(2),e.Q6J("formControl",i.searchForm.controls.userId)("data",i.accountOptions)("allowSearch",!0),e.xp6(3),e.Q6J("formControl",i.searchForm.controls.userId)("data",i.accountOptions)("allowSearch",!0),e.xp6(3),e.Q6J("formControl",i.searchForm.controls.userId)("data",i.accountOptions)("allowSearch",!0),e.xp6(3),e.Q6J("formControl",i.searchForm.controls.userId)("data",i.accountOptions)("allowSearch",!0),e.xp6(4),e.Q6J("disabled",i.searchForm.invalid),e.xp6(4),e.Q6J("ngIf","SUCCESS"===i.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===i.state),e.xp6(1),e.Q6J("ngIf","ERROR"===i.state))},dependencies:[p.ez,p.sg,p.O5,s.u5,s.JJ,s.UX,s.oH,x.j$,x.ND,x.BN,_.AxE,_.Sm8,I.q,h.N8,h.Xq,ie.rC,ie.E_,ie.zs,ie.qS],encapsulation:2}),n})();var de=m(27898);const ht={B2BGMBR:{adt:1e5,chd:1e5,inf:5e4},B2CGMBR:{adt:2e5,chd:2e5,inf:1e5}};var k=m(47917),oe=m(34541);const H=function(){return[]};let vt=(()=>{class n{constructor(t,i){this._fb=t,this._inventoryService=i,this.airlineSelectOption=[],this.channelDistributionOption=[],this.distributionTicketFee=ht,this.CHANNEL_DISTRIBUTION_ENUM=k.h}ngOnInit(){this.formGroup=this._fb.group({channel:[""],supplier:[""],adtFee:[0,s.kI.required],chdFee:[0,s.kI.required],infFee:[0,s.kI.required]}),this.airlineSelectOption=[{text:"T\u1ea5t c\u1ea3",value:""},{text:"Vietnam Airlines",value:"VN"},{text:"Bamboo Airways",value:"QH"},{text:"Vietjet Air",value:"VJ"}],this.channelDistributionOption=[...Object.entries(k.h).map(([t,i])=>({text:t,value:i}))]}onCancel(){}onSubmit(){}checkedChange(t){let i={adt:0,chd:0,inf:0};t&&(this.formGroup.value.channel===k.h.B2B_GMBR&&(i=this.distributionTicketFee.B2BGMBR),this.formGroup.value.channel===k.h.B2C_GMBR&&(i=this.distributionTicketFee.B2CGMBR)),this.formGroup.patchValue({adtFee:i.adt,chdFee:i.chd,infFee:i.inf})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["create-distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:61,vars:46,consts:[[1,"flex","justify-center","py-4","px-[30px]","md:hidden"],[1,"w-[1000px]","max-w-[1000px]","flex","flex-col","gap-y-8"],[1,"flex","gap-x-[20px]","mb-4"],[1,"w-1","bg-[#fcb40a]"],[1,"text-heading-md"],[1,"p-6","bg-neutral-white","rounded-lg","shadow-cf-md","flex","flex-col","gap-y-4"],[1,"flex","gap-x-4"],[1,"flex","flex-col","grow","gap-y-4"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"data","placeholder","allowSearch"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["textField","name","valueField","code",1,"!max-w-none","w-full",3,"data","placeholder","allowSearch"],[1,"flex","justify-between","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"data","formControl","placeholder","allowSearch"],[1,"flex","justify-between","items-center","gap-x-4"],[1,"grow-[400]","!w-full"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["size","medium",3,"formControl","placeholder"],["size","medium",1,"flex",3,"checked","checkChange"],[1,"flex","justify-end","items-center","gap-x-4"],["cf-button","","size","medium","type","secondary",1,"bg-white",3,"click"],["cf-button","","size","medium",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),e._UZ(4,"div",3),e.TgZ(5,"div",4),e._uU(6,"\u0110i\u1ec1u ki\u1ec7n ph\xe2n ph\u1ed1i"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"cf-select",8)(11,"label",9),e._uU(12," H\xe3ng bay khai th\xe1c "),e.qZA()(),e.TgZ(13,"cf-select",10)(14,"label",9),e._uU(15," H\u1ea1ng gh\u1ebf "),e.qZA()(),e.TgZ(16,"div",11)(17,"cf-select",10)(18,"label",9),e._uU(19," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA()(),e.TgZ(20,"cf-select",10)(21,"label",9),e._uU(22," \u0110i\u1ec3m k\u1ebft th\xfac "),e.qZA()()(),e.TgZ(23,"div",11)(24,"cf-select",10)(25,"label",9),e._uU(26," Th\u1eddi gian bay t\u1eeb ng\xe0y "),e.qZA()(),e.TgZ(27,"cf-select",10)(28,"label",9),e._uU(29," \u0110\u1ebfn ng\xe0y "),e.qZA()()()()()()(),e.TgZ(30,"div")(31,"div",2),e._UZ(32,"div",3),e.TgZ(33,"div",4),e._uU(34,"C\xe0i \u0111\u1eb7t ph\xed d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(35,"div",5)(36,"div",6)(37,"div",7)(38,"cf-select",12)(39,"label",9),e._uU(40," Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i "),e.qZA()(),e.TgZ(41,"div",13)(42,"cf-input-group",14)(43,"label",15),e._uU(44," ADT "),e.qZA(),e._UZ(45,"cf-input-number",16),e.qZA(),e.TgZ(46,"cf-input-group",14)(47,"label",15),e._uU(48," CHD "),e.qZA(),e._UZ(49,"cf-input-number",16),e.qZA(),e.TgZ(50,"cf-input-group",14)(51,"label",15),e._uU(52," INF "),e.qZA(),e._UZ(53,"cf-input-number",16),e.qZA()(),e.TgZ(54,"cf-checkbox",17),e.NdJ("checkChange",function(r){return i.checkedChange(r)}),e._uU(55," S\u1eed d\u1ee5ng gi\xe1 m\u1eb7c \u0111\u1ecbnh "),e.qZA()()()()(),e.TgZ(56,"div",18)(57,"button",19),e.NdJ("click",function(){return i.onCancel()}),e._uU(58," H\u1ee7y b\u1ecf "),e.qZA(),e.TgZ(59,"button",20),e.NdJ("click",function(){return i.onSubmit()}),e._uU(60," T\u1ea1o c\xe0i \u0111\u1eb7t "),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("data",i.airlineSelectOption||e.DdM(39,H))("placeholder","Ch\u1ecdn h\xe3ng bay")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("data",e.DdM(40,H))("placeholder","Ch\u1ecdn h\u1ea1ng gh\u1ebf")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(3),e.Q6J("data",e.DdM(41,H))("placeholder","Ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("data",e.DdM(42,H))("placeholder","Ch\u1ecdn \u0111i\u1ec3m k\u1ebft th\xfac")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(3),e.Q6J("data",e.DdM(43,H))("placeholder","Ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("data",e.DdM(44,H))("placeholder","Ch\u1ecdn \u0111i\u1ec3m k\u1ebft th\xfac")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(10),e.Q6J("data",i.channelDistributionOption||e.DdM(45,H))("formControl",i.formGroup.controls.channel)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(4),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",i.formGroup.controls.adtFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho ADT (\u0111)"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",i.formGroup.controls.chdFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho CHD (\u0111)"),e.xp6(2),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",i.formGroup.controls.infFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho INF (\u0111)"),e.xp6(1),e.Q6J("checked",!1))},dependencies:[p.ez,s.u5,s.JJ,s.UX,s.oH,I.q,oe.C,x.j$,x.ND,x.lt,h.N8,h.Xq,de.u],encapsulation:2}),n})();var G=m(88516),pe=m(4688),N=(()=>{return(n=N||(N={})).FOR_APPROVAL="FOR_APPROVAL",n.APPROVED="APPROVED",n.SOLD="SOLD",n.ON_SALE="ON_SALE",n.STOP_SALE="STOP_SALE",n.LOST="LOST",n.REJECT="REJECT",n.EXPIRED="EXPIRED",N;var n})();const _e={[N.FOR_APPROVAL]:{name:"Ch\u01b0a duy\u1ec7t",backgroundColor:"orange",textColor:""},[N.APPROVED]:{name:"\u0110\xe3 duy\u1ec7t",backgroundColor:"cyan",textColor:""},[N.SOLD]:{name:"\u0110\xe3 b\xe1n",backgroundColor:"green",textColor:""},[N.ON_SALE]:{name:"\u0110ang b\xe1n",backgroundColor:"cyan",textColor:""},[N.STOP_SALE]:{name:"Ng\u1eebng b\xe1n",backgroundColor:"gray-2",textColor:""},[N.LOST]:{name:"Ch\u1ed9p h\u1ee5t",backgroundColor:"purple",textColor:""},[N.REJECT]:{name:"T\u1eeb ch\u1ed1i",backgroundColor:"gray-2",textColor:""},[N.EXPIRED]:{name:"H\u1ebft h\u1ea1n",backgroundColor:"gray-2",textColor:""}};var P=m(77296),S=m(97579);const ae=function(){return[]};let Ae=(()=>{class n{constructor(t,i){this._modal=t,this._ref=i,this.transactionChannelOptions=[]}ngOnInit(){}initListOptions(){this.transactionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:k.h.B2B_GMBR,text:"Flychills"},{value:k.h.B2C_GMBR,text:"GMBR"},{value:"other",text:"Kh\xe1c"}]}close(){this._ref&&this._ref.close(!1)}onSubmit(){this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn b\xe1n \u0111\u01a1n h\xe0ng n\xe0y?",body:"\u0110\u01a1n h\xe0ng \u0111\xe3 b\xe1n s\u1ebd \u0111\u01b0\u1ee3c ghi nh\u1eadn doanh thu v\xe0 kh\xf4ng th\u1ec3 ph\xe2n ph\u1ed1i tr\u1edf l\u1ea1i. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ti\u1ebfp t\u1ee5c?",okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng",hasIcon:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oE),e.Y36(S.gb))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manual-sale-product"]],standalone:!0,features:[e.jDz],decls:65,vars:18,consts:[[1,"w-[740px]","flex","flex-col","rounded-lg","bg-neutral-white","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-6"],[1,"flex","items-center","justify-between","gap-x-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"whitespace-nowrap"],[1,"h-full","shrink-0","flex","flex-col","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small"],[1,"h-full","w-full","flex","flex-col","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,""],[1,"flex","flex-col","gap-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"flex-1","w-full","max-w-full"],["cfLabel","",1,"text-express-sm","text-black"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7"],["textField","text","valueField","value","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd","size","medium",1,"!max-w-full","!w-full",3,"data","allowSearch"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"grow-[400]","!w-full"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y giao d\u1ecbch",1,"py-[7px]",3,"secondaryCalendar","displayMonths","input","dateSelect"],["dateFrom","cfDatepicker"],[1,"text-body-md","mb-1.5"],[1,"grid","grid-cols-3","gap-4"],["textField","text","valueField","value","placeholder","Ch\u1ecdn h\xe3ng h\xe0ng kh\xf4ng","size","medium",1,"!max-w-full","!w-full",3,"data","allowSearch"],["textField","text","valueField","value","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p","size","medium",1,"!max-w-full","!w-full",3,"data","allowSearch"],["cf-input","","size","medium","placeholder","Nh\u1eadp PNR"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6"],["cf-button","","size","medium","type","secondary",1,"md:w-full","md:justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",3,"click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp th\xf4ng tin b\xe1n h\xe0ng th\u1ee7 c\xf4ng"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div"),e._UZ(9,"img",7),e.qZA(),e.TgZ(10,"div",8)(11,"span",9),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"span"),e._uU(16),e.qZA(),e._UZ(17,"cf-icon",12),e.TgZ(18,"span"),e._uU(19),e.qZA()()(),e.TgZ(20,"div",13)(21,"div",14),e._uU(22,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(23,"div",15),e._uU(24,"JXVXW2"),e.qZA()(),e.TgZ(25,"div",13)(26,"div",14),e._uU(27,"Gi\xe1 mua v\xe0o"),e.qZA(),e.TgZ(28,"div",16),e._uU(29,"JXVXW2"),e.qZA()(),e.TgZ(30,"div",13)(31,"div",14),e._uU(32,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(33,"div",16),e._uU(34,"S\u1ed1 kh\xe1ch"),e.qZA()()(),e.TgZ(35,"div",17)(36,"div",18)(37,"cf-input-group",19)(38,"label",20),e._uU(39," Doanh thu "),e.qZA(),e._UZ(40,"input",21),e.qZA(),e.TgZ(41,"cf-select",22)(42,"label",23),e._uU(43," K\xeanh giao d\u1ecbch "),e.qZA()(),e.TgZ(44,"cf-input-group",24)(45,"label",23),e._uU(46," Ng\xe0y giao d\u1ecbch "),e.qZA(),e.TgZ(47,"input",25,26),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(48);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(48);return e.KtG(c.close())}),e.qZA()(),e.TgZ(49,"cf-select",22)(50,"label",23),e._uU(51," AG mua "),e.qZA()()(),e.TgZ(52,"div")(53,"div",27),e._uU(54,"PNR m\u1edbi ph\xe1t sinh"),e.qZA(),e.TgZ(55,"div",28),e._UZ(56,"cf-select",29)(57,"cf-select",30),e.TgZ(58,"cf-input-group",24),e._UZ(59,"input",31),e.qZA()()()()(),e.TgZ(60,"div",32)(61,"button",33),e.NdJ("click",function(){return i.close()}),e._uU(62," H\u1ee7y "),e.qZA(),e.TgZ(63,"button",34),e.NdJ("click",function(){return i.onSubmit()}),e._uU(64," X\xe1c nh\u1eadn "),e.qZA()()()}2&t&&(e.xp6(9),e.Q6J("src","assets/icons/airline-default.svg",e.LSH),e.xp6(3),e.Oqu("Vietname Airline"),e.xp6(4),e.hij(" ","HAN",""),e.xp6(3),e.hij(" ","SGN"," "),e.xp6(22),e.Q6J("data",i.transactionChannelOptions||e.DdM(14,ae))("allowSearch",!1),e.xp6(6),e.Q6J("secondaryCalendar","lunar")("displayMonths",1),e.xp6(2),e.Q6J("data",e.DdM(15,ae))("allowSearch",!1),e.xp6(7),e.Q6J("data",e.DdM(16,ae))("allowSearch",!1),e.xp6(1),e.Q6J("data",e.DdM(17,ae))("allowSearch",!1))},dependencies:[p.ez,_.AxE,_.Sm8,h.N8,h.Xq,x.j$,x.ND,x.BN,I.q,G.Cs],encapsulation:2}),n})();var fe=m(70800);let be=(()=>{class n{constructor(t,i,o,r){this.ref=t,this._modal=i,this._ticketLowFareService=o,this._toastService=r,this.paymentId=this.ref.data.paymentId,this.paymentCode=this.ref.data.paymentCode}ngOnInit(){this.getDetail()}getDetail(){this._ticketLowFareService.getTicketsPendingApprovalDetail(this.paymentCode,this.paymentId).subscribe({next:t=>{console.log(t)}})}close(){this.ref&&this.ref.close(!1)}onCancel(){this._modal.open(Z.V0,{title:"T\u1eeb ch\u1ed1i",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onApprove(){this._modal.open(Z.V0,{title:"Duy\u1ec7t xu\u1ea5t",body:"Duy\u1ec7t xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"Duy\u1ec7t",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(i=>{i.data&&this._ticketLowFareService.approvalTicketPending("").subscribe({next:o=>{"OK"===o.status?(this.ref.close(!0),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.gb,8),e.Y36(S.oE),e.Y36(fe.s),e.Y36($.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["approve-product-modal"]],standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(t,i){},dependencies:[p.ez,_.AxE,h.N8],encapsulation:2}),n})();var z=m(28490);const xt=function(n,a){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":a}},Tt=function(n){return{"text-neutral-gray-6":n}},yt=function(n){return{"!bg-neutral-gray-6 text-express-sm":n}};function Ct(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",31,32)(3,"div",33),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onChangeTab(r))}),e._uU(4),e.TgZ(5,"cf-label",34),e._uU(6),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,xt,t.active,!i)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Tt,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,yt,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function Et(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",37)(2,"div",38)(3,"div",39)(4,"cf-label",40),e._uU(5),e.qZA()(),e.TgZ(6,"div",41)(7,"button",42),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onEditProduct(r.productId))}),e._uU(8," Ch\u1ec9nh s\u1eeda "),e.qZA()()(),e.TgZ(9,"div",43)(10,"div",44),e._UZ(11,"img",45),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"cf-icon",46),e.TgZ(15,"div"),e._uU(16),e.qZA()(),e.TgZ(17,"div",47)(18,"div",48)(19,"div",49),e._uU(20,"Ng\xe0y bay: "),e.qZA(),e.TgZ(21,"div",50),e._uU(22),e.ALo(23,"date"),e.qZA()(),e.TgZ(24,"div",48)(25,"div",49),e._uU(26,"M\xe3 PNR: "),e.qZA(),e.TgZ(27,"div",50),e._uU(28),e.qZA()(),e.TgZ(29,"div",48)(30,"div",49),e._uU(31,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(32,"div",50),e._uU(33),e.qZA()(),e.TgZ(34,"div",48)(35,"div",49),e._uU(36,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(37,"div",50),e._uU(38),e.ALo(39,"date"),e.qZA()(),e.TgZ(40,"div",48)(41,"div",49),e._uU(42,"Ng\u01b0\u1eddi \u0111\u1eb7t: "),e.qZA(),e.TgZ(43,"div",50),e._uU(44),e.qZA()(),e.TgZ(45,"div",48)(46,"div",49),e._uU(47,"Gi\xe1 mua v\xe0o: "),e.qZA(),e.TgZ(48,"div",50),e._uU(49),e.ALo(50,"number"),e.qZA()(),e.TgZ(51,"div",48)(52,"div",49),e._uU(53,"Gi\xe1 tr\xean Flychills: "),e.qZA(),e.TgZ(54,"div",50),e._uU(55),e.qZA()(),e.TgZ(56,"div",48)(57,"div",49),e._uU(58,"Gi\xe1 tr\xean GMBR: "),e.qZA(),e.TgZ(59,"div",50),e._uU(60),e.qZA()()()()(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(4),e.Q6J("color",i.STATE_PRODUCT_DISPLAY_CONST[t.state].backgroundColor)("size","small"),e.xp6(1),e.hij(" ",i.STATE_PRODUCT_DISPLAY_CONST[t.state].name," "),e.xp6(6),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.AsE("",t.departureName," (",t.departure,")"),e.xp6(3),e.AsE("",t.arrival," (",t.arrivalName,")"),e.xp6(6),e.Oqu(e.xi3(23,16,1e3*t.flyScheduleTime,"dd/MM/yyyy")),e.xp6(6),e.Oqu(t.bookingCode),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(e.xi3(39,19,1e3*t.timeHoldBooking,"dd/MM/yyyy")),e.xp6(6),e.Oqu(t.ownerName),e.xp6(5),e.Oqu(e.lcZ(50,22,t.productBasePrice)),e.xp6(6),e.Oqu("-"),e.xp6(5),e.Oqu("-")}}function At(n,a){if(1&n&&(e.TgZ(0,"div",35)(1,"div",36),e.YNc(2,Et,61,24,"ng-container",6),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listProduct)}}function bt(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",51)(2,"ticket-item-skeleton",51),e.qZA())}const Q=function(){return[]};let Zt=(()=>{class n{constructor(t,i,o,r,c,l,f){this._fb=i,this._modal=o,this._router=r,this._inventoryService=c,this._locationDataService=l,this._flightDataService=f,this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:"FOR_APPROVAL",text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!1},{value:"ON_SALE",text:"\u0110ang b\xe1n",counter:0,active:!1},{value:"SOLD",text:"\u0110\xe3 b\xe1n",counter:0,active:!1},{value:"REJECT",text:"T\u1eeb ch\u1ed1i",counter:0,active:!1},{value:"STOP_SALE",text:"Ng\u1eebng b\xe1n",counter:0,active:!1},{value:"EXPIRED",text:"H\u1ebft h\u1ea1n",counter:0,active:!1},{value:"LOST",text:"Ch\u1ed9p h\u1ee5t",counter:0,active:!1}],this.isSkeleton=!1,this.listProduct=[],this.STATE_PRODUCT_DISPLAY_CONST=_e,this.typeTimeOptions=[],this.dateRangeStr="",this.airlineOptions=[],this.distributionChannelOptions=[],this.salesChannelOptions=[],this.sellSourceTypeOptions=[],this.searchTextTypeOptions=[],this.sourceOptions=[],this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR",t.registerIcons([_.esH]),this.initDateSearch()}ngOnInit(){this.initListOptions(),this.initSearchForm(),this.getManageProduct()}initDateSearch(){this.startDateOfMonth=new Date,this.endDateOfMonth=C(this.startDateOfMonth).add(30,"day").toDate();const t=(0,p.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),i=(0,p.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+i}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[k.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],salesChannel:[""],searchText:[""],searchTextType:["PNR"],sellSourceType:[""],source:[""],timeFilterType:["TIME_BOOKING"]})}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airline"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:k.h.B2B_GMBR,text:"Flychills"},{value:k.h.B2C_GMBR,text:"GMBR"}],this.salesChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:k.h.B2B_GMBR,text:"Flychills"},{value:k.h.B2C_GMBR,text:"GMBR"},{value:"OTHER",text:"Kh\xe1c"}],this.searchTextTypeOptions=[{value:"PNR",text:"PNR"},{value:"JOURNEY",text:"H\xe0nh tr\xecnh"},{value:"BOOKER",text:"BOOKER"},{value:"AGENT",text:"AGENT"}],this.sourceOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"MANUAL",text:"Th\u1ee7 c\xf4ng"}],this.sellSourceTypeOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"BOOKER",text:"BOOKER"}]}onDateSelection(t,i,o,r){if(i.value||o.value)if(i.value&&!o.value&&t&&t.getTime()>=i.value.getTime()){o.setValue(t),r.close(),this.startDate=i.value;const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),i.setValue(t);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{i.setValue(t),o.setValue(null);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onChangeTab(t){this.currentTab!==t.value&&(this.currentTab=t.value,this.getManageProduct(),this.listTab.forEach(i=>{i.active=i.value===this.currentTab}))}getManageProduct(){const t=this.searchForm.value,i={airline:(null==t?void 0:t.airline)||"",channelDistribution:(null==t?void 0:t.distributionChannel)||"",startDate:null!=t&&t.fromDate?(0,p.p6)(null==t?void 0:t.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=t&&t.toDate?(0,p.p6)(null==t?void 0:t.toDate,"yyyy-MM-dd","vi-VN"):"",salesChannel:(null==t?void 0:t.salesChannel)||null,searchText:(null==t?void 0:t.searchText)||"",searchTextType:(null==t?void 0:t.searchTextType)||null,sellSourceType:(null==t?void 0:t.sellSourceType)||null,source:(null==t?void 0:t.source)||null,state:this.currentTab||null,timeFilterType:(null==t?void 0:t.timeFilterType)||null};this.isSkeleton=!0,this._inventoryService.manageProduct(i).pipe((0,M.x)(()=>this.isSkeleton=!1)).subscribe({next:o=>{var r;console.log(132),"OK"===o.status&&(console.log(o),this.listProduct=(null===(r=o.data)||void 0===r?void 0:r.map(c=>({airline:c.productDetail.airline,airlineName:this._flightDataService.getAirlineNameByCode(c.productDetail.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(c.productDetail.airline),departure:c.productDetail.departure,departureName:this._locationDataService.getCityNameByCode(c.productDetail.departure),arrival:c.productDetail.arrival,arrivalName:this._locationDataService.getCityNameByCode(c.productDetail.arrival),bookingCode:c.productDetail.bookingCode,channelDistribution:c.productDetail.channelDistribution,flyScheduleTime:c.productDetail.flyScheduleTime,ownerName:c.productDetail.ownerName,paxCount:c.productDetail.paxCount,productBasePrice:c.productDetail.productBasePrice,productId:c.productDetail.productId,timeHoldBooking:c.productDetail.timeHoldBooking,state:c.productDetail.state,stateDisplay:_e[c.productDetail.state].name})))||[],console.log(this.listProduct))}})}onSearchTextType(t){switch(console.log(t),t){case"PNR":default:this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR";break;case"JOURNEY":this.placeholderTextSearch="T\xecm ki\u1ebfm theo H\xe0nh tr\xecnh";break;case"BOOKER":this.placeholderTextSearch="T\xecm ki\u1ebfm theo Booker";break;case"AGENT":this.placeholderTextSearch="T\xecm ki\u1ebfm theo \u0110\u1ea1i l\xfd"}}onEditProduct(t){this._router.navigate([`admin/edit-product/${t}`])}onCancelConfirm(){this._modal.open(Z.V0,{title:"",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onConfirm(){this._modal.open(be,{})}onManualSaleProduct(){this._modal.open(Ae,{})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(s.qu),e.Y36(S.oE),e.Y36(q.F0),e.Y36(ne),e.Y36(z._),e.Y36(X.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manage-product"]],standalone:!0,features:[e.jDz],decls:49,vars:56,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","flex-wrap","gap-x-4","gap-y-2"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","allowSearch","formControl","ngModelChange"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","autocomplete","off",3,"formControl","placeholder"],["cf-button","","size","medium",1,"justify-center","whitespace-nowrap",3,"click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],["class","flex flex-col gap-y-[30px] md:gap-y-4",4,"ngIf"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass","click"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"py-2","px-3"],["type","solid",3,"color","size"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],["icon","arrow_right","size","small"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"T\u1ed5ng kho v\xe9 T\u1ebft 2025"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,Ct,7,13,"ng-container",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"cf-select",9)(11,"label",10),e._uU(12," L\u1ecdc theo "),e.qZA()(),e.TgZ(13,"div",11)(14,"cf-input-group",12),e._UZ(15,"cf-icon",13),e.TgZ(16,"label",14),e._uU(17,"Th\u1eddi gian"),e.qZA(),e.TgZ(18,"input",15),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(20);return e.KtG(c.open())})("ngModelChange",function(c){return i.dateRangeStr=c}),e.qZA()(),e.TgZ(19,"input",16,17),e.NdJ("dateSelect",function(c){e.CHM(o);const l=e.MAs(20);return e.KtG(i.onDateSelection(c,i.searchForm.controls.fromDate,i.searchForm.controls.toDate,l))}),e.qZA()(),e.TgZ(21,"cf-select",18)(22,"label",10),e._uU(23," H\xe3ng bay "),e.qZA()(),e.TgZ(24,"cf-select",18)(25,"label",10),e._uU(26," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()(),e.TgZ(27,"cf-select",18)(28,"label",10),e._uU(29," Ng\u01b0\u1eddi \u0111\u1eb7t "),e.qZA()(),e.TgZ(30,"cf-select",18)(31,"label",10),e._uU(32," K\xeanh giao d\u1ecbch "),e.qZA()(),e.TgZ(33,"cf-select",18)(34,"label",10),e._uU(35," Ng\u01b0\u1eddi b\xe1n "),e.qZA()()(),e.TgZ(36,"div",19)(37,"cf-select",20),e.NdJ("ngModelChange",function(c){return i.onSearchTextType(c)}),e.qZA(),e.TgZ(38,"cf-input-group",21),e._UZ(39,"cf-icon",22)(40,"input",23),e.qZA(),e.TgZ(41,"button",24),e.NdJ("click",function(){return i.getManageProduct()}),e._uU(42," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(43,"div",25)(44,"div",26)(45,"div",27)(46,"div",28),e.YNc(47,At,3,7,"div",29),e.YNc(48,bt,3,0,"div",30),e.qZA()()()()()}2&t&&(e.xp6(7),e.Q6J("ngForOf",i.listTab),e.xp6(3),e.Q6J("status","default")("data",i.typeTimeOptions||e.DdM(49,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",i.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",i.startDate)("canReset",!1)("fromDate",i.searchForm.controls.fromDate.value)("toDate",i.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",i.airlineOptions||e.DdM(50,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",i.distributionChannelOptions||e.DdM(51,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.distributionChannel),e.xp6(3),e.Q6J("status","default")("data",i.sourceOptions||e.DdM(52,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.source),e.xp6(3),e.Q6J("status","default")("data",i.salesChannelOptions||e.DdM(53,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.salesChannel),e.xp6(3),e.Q6J("status","default")("data",i.sellSourceTypeOptions||e.DdM(54,Q))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.sellSourceType),e.xp6(4),e.Q6J("status","default")("data",i.searchTextTypeOptions||e.DdM(55,Q))("allowSearch",!0)("formControl",i.searchForm.controls.searchTextType),e.xp6(3),e.Q6J("formControl",i.searchForm.controls.searchText)("placeholder",i.placeholderTextSearch),e.xp6(7),e.Q6J("ngIf",!i.isSkeleton),e.xp6(1),e.Q6J("ngIf",i.isSkeleton))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,pe.b,I.q,s.u5,s.Fj,s.JJ,s.On,s.UX,s.oH,h.N8,h.Xq,x.j$,x.ND,x.BN,_.AxE,_.Sm8,B.IA,P.Rq,P.Ry,G.Cs],encapsulation:2}),n})();var D=m(37094),re=m(80429),Ft=m(52013),W=m(42678);let kt=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"status",void 0),(0,u.gn)([(0,w.D)(()=>Dt),(0,d.C)()],n.prototype,"data",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"objectError",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"success",void 0),n})(),Dt=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"orderId",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"code",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"ownerInfo",void 0),(0,u.gn)([(0,w.D)(()=>Ut),(0,d.C)()],n.prototype,"userActionInfo",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"state",void 0),(0,u.gn)([(0,w.D)(()=>qt),(0,d.C)()],n.prototype,"ticketInfo",void 0),(0,u.gn)([(0,w.D)(()=>It),(0,d.C)()],n.prototype,"orderInfo",void 0),(0,u.gn)([(0,w.D)(()=>wt),(0,d.C)()],n.prototype,"fareInfo",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"canUpdate",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"monitorType",void 0),(0,u.gn)([(0,w.D)(()=>St),(0,d.C)()],n.prototype,"availableSlotInfo",void 0),n})(),St=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"free",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"type",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"amountPerPax",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"percent",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"currency",void 0),n})(),wt=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"originalPnr",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"detectedPnr",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"originalFare",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"detectedFare",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"originalFareClass",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"detectedFareClass",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"higherFare",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"lastTimeUpdate",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"airline",void 0),n})(),It=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"timeCreate",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"timeExpire",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"timeUpdate",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"timeFinished",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"fareMonitors",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"priceMonitors",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"notifyBeforeExpired",void 0),n})(),qt=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"airline",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"flightType",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"journeys",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"passengers",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"originalPrice",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"totalFare",void 0),n})(),Ut=(()=>{class n{}return(0,u.gn)([(0,d.C)()],n.prototype,"id",void 0),(0,u.gn)([(0,d.C)()],n.prototype,"name",void 0),n})();const me={headers:new R.WM({"Content-Type":"application/json"})};let Ze=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}registerTickedAdvanced(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/register",JSON.stringify(t),me).pipe((0,O.U)(i=>(0,J.yE)(kt,i,{excludeExtraneousValues:!0})))}getCurrentConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/current-config-order",JSON.stringify({orderId:t}),me).pipe((0,O.U)(i=>(0,J.yE)(W.zz,i,{excludeExtraneousValues:!0})))}updateConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/update_order",JSON.stringify(t),me).pipe((0,O.U)(i=>(0,J.yE)(W.Cs,i,{excludeExtraneousValues:!0})))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(R.eN),e.LFG(te.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mt(n,a){if(1&n&&(e.TgZ(0,"span",51),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function Ot(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Nt(n,a){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"img",56),e.TgZ(3,"div",31),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function Bt(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Nt,7,8,"div",53),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function Jt(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Bt,2,1,"div",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rawData.specifyPriceList)}}function Pt(n,a){1&n&&(e.TgZ(0,"div",31)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function Ht(n,a){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"img",56),e.TgZ(3,"div",31),e._uU(4),e.TgZ(5,"span",59),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function Qt(n,a){if(1&n&&(e.TgZ(0,"div",64),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Lt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Qt,2,1,"div",63),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Yt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Lt,2,1,"ng-container",52),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const Rt=function(n){return{"w-full":n}};function jt(n,a){if(1&n&&(e.TgZ(0,"div",61)(1,"div",62),e._uU(2),e.qZA(),e.YNc(3,Yt,2,1,"ng-container",38),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,Rt,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Gt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,jt,4,5,"div",60),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function zt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Gt,2,1,"ng-container",52),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Vt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,zt,2,1,"ng-container",52),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Kt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ht,7,3,"div",53),e.TgZ(2,"div",58),e.YNc(3,Vt,2,1,"ng-container",38),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function $t(n,a){if(1&n&&(e.TgZ(0,"div",57),e.YNc(1,Kt,4,2,"ng-container",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function Xt(n,a){1&n&&e._UZ(0,"cf-spinner")}let Fe=(()=>{class n{constructor(t,i,o,r,c,l,f,v){this.cfIconRegister=t,this.ref=i,this.cfBottomSheetRef=o,this.huntTicketAdvancedSvc=r,this._route=c,this._modal=l,this.cdr=f,this.bottomSheetData=v,this.dataFlight=(0,e.f3M)(z._).getAllOption(),this.isLoading=!1,this.viewDepartureTime=g=>g.filter(T=>T.isActive),this.viewFly=g=>{const T=this.dataFlight.find(A=>A.Code===g);return`${null==T?void 0:T.CityName} (${g})`},t.registerIcons([_.UNF]),this.ref&&(this.rawData=this.ref.data.data,this.dataFormSubmit=this.progressDateAfterSubmit(this.ref.data.data),this.selectedFaresTree=this.ref.data.selectedFaresTree),this.cfBottomSheetRef&&(this.rawData=this.bottomSheetData.rawData,this.dataFormSubmit=this.progressDateAfterSubmit(this.bottomSheetData.rawData),this.selectedFaresTree=this.bottomSheetData.selectedFaresTree),console.log(this.rawData),console.log(this.dataFormSubmit)}close(t){this.ref&&this.ref.close(t),this.bottomSheetData&&this.cfBottomSheetRef.dismiss(t)}submit(){this.isLoading=!0,this.huntTicketAdvancedSvc.registerTickedAdvanced(this.dataFormSubmit).pipe((0,M.x)(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe(t=>{if("OK"===t.status){let i="",o="";o="well_done",i=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t.data.code}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`,this._modal.open(Ft.V,{title:"T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",content:i,status:o,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:c=>{c.data&&(this.close(!0),this._route.navigate(["admin/hunt-ticket-advanced-list"]))}})}})}progressDateAfterSubmit(t){const{type:i,endPoint:o,startPoint:r,distributionChannel:c,isTimeRange:l,departureTime:f,toDate:v,fromDate:g,specifyPriceList:T,specifyFareClassList:A}=t,b=null==f?void 0:f.filter(y=>y.isActive),E=b[b.length-1].end.split(":");return{conditions:{specifyPriceList:"PRICE"===i?T.filter(y=>y.price).map(({id:y,price:F})=>({airline:y,targetPrice:F})):[],specifyFareClassList:"FARE"===i?A.map(({airline:y,fareClass:F})=>({airline:y.toUpperCase(),fareClass:F.join(";")})):[],type:i},advanceSetting:{timeExecute:C(this.setTimeOnDate(g,+E[0],+E[1])).format("YYYY-MM-DDTHH:mm:ss"),notifBeforExpire:!1},journeys:{endPoint:o,startPoint:r,rangeDateTime:{fromDate:Math.floor(this.setTimeOnDate(g,0,0).getTime()/1e3),toDate:Math.floor(this.setTimeOnDate(v,0,0).getTime()/1e3)},allRangeTime:l,rangeTime:b.map(({start:y,end:F})=>({toDate:F,fromDate:y}))},distributionChannel:c}}setTimeOnDate(t,i,o,r){return t.setHours(i),t.setMinutes(o),t.setSeconds(r?59:0),t.setMilliseconds(r?99:0),t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(S.gb,8),e.Y36(D.Zu,8),e.Y36(Ze),e.Y36(q.F0),e.Y36(S.oE),e.Y36(e.sBO),e.Y36(D.Rr,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-hunt-ticket-advanced-add-confirm-modal"]],standalone:!0,features:[e.jDz],decls:109,vars:29,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","pt-6","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],["icon","plane","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"flex","flex-col","gap-3","bg-[#FAFAFA]","px-3","py-2"],[1,"flex","justify-center","gap-3","md:flex-col"],[1,"flex","items-center","gap-x-[20px]","md:flex-col","md:gap-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],[1,"items-center","w-[100px]","md:w-[75px]"],[1,"text-center","text-express-sm","text-neutral-gray-4"],[1,"flex","items-center"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]","cf-icon-small"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center","md:flex","md:flex-1","md:justify-center"],[1,"flex","justify-center","gap-x-1"],[1,"flex","items-center","gap-x-2","mb-2","justify-start"],["icon","calendar","size","small",1,"cf-icon-small"],[1,"text-body-md","text-neutral-black"],[1,"text-body-md","text-neutral-black","font-semibold"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"text-body-md"],[1,"w-[60%]"],[1,"text-express-md"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngFor","ngForOf"],[1,"w-[60%]","text-express-md"],[4,"ngIf"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],["icon","money","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-right",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[4,"ngFor","ngForOf"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close(!1)}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"cf-icon",7),e.TgZ(9,"span",8),e._uU(10,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div")(15,"div",12)(16,"div",13)(17,"span"),e._uU(18),e.ALo(19,"mapper"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15),e._uU(22,"Bay th\u1eb3ng"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"div",17)(25,"div",18)(26,"cf-icon",19),e.qZA()()()(),e.TgZ(27,"div")(28,"div",20)(29,"span"),e._uU(30),e.ALo(31,"mapper"),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",22),e._UZ(34,"cf-icon",23),e.TgZ(35,"div",24),e._uU(36,"T\u1eeb "),e.TgZ(37,"span",25),e._uU(38),e.ALo(39,"date"),e.qZA()()(),e.TgZ(40,"div",22)(41,"div",24),e._uU(42,"\u0110\u1ebfn "),e.TgZ(43,"span",25),e._uU(44),e.ALo(45,"date"),e.qZA()()()()(),e._UZ(46,"div",26),e.TgZ(47,"div",27)(48,"div",28)(49,"div",29)(50,"span"),e._uU(51,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(52,"div",30)(53,"span",31),e._uU(54),e.ALo(55,"date"),e.qZA()()(),e._UZ(56,"div",26),e.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"span"),e._uU(61,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(62,"div",35),e.YNc(63,Mt,2,1,"span",36),e.ALo(64,"mapper"),e.qZA()(),e._UZ(65,"div",26),e.TgZ(66,"div",32)(67,"div",33)(68,"div",34)(69,"span"),e._uU(70,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(71,"div",37),e.YNc(72,Ot,2,0,"span",38),e.YNc(73,Jt,2,1,"div",38),e.qZA()(),e._UZ(74,"div",26),e.TgZ(75,"div",32)(76,"div",33)(77,"div",29)(78,"span"),e._uU(79,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(80,"div",30),e.YNc(81,Pt,3,0,"div",39),e.YNc(82,$t,2,1,"div",40),e.qZA()()()(),e.TgZ(83,"div",5)(84,"div",41),e._UZ(85,"cf-icon",42),e.TgZ(86,"span",8),e._uU(87,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(88,"div",43),e._UZ(89,"cf-icon",44),e.TgZ(90,"div")(91,"span",31),e._uU(92,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(93," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(94,"div",43),e._UZ(95,"cf-icon",45),e.TgZ(96,"div",31),e._uU(97,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(98,"span",46),e._uU(99,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(100," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()(),e.TgZ(101,"div",47)(102,"button",48),e.NdJ("click",function(){return i.close(!1)}),e._uU(103," \u0110\xf3ng "),e.qZA(),e.TgZ(104,"button",49),e.NdJ("click",function(){return i.submit()}),e.TgZ(105,"span"),e._uU(106,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(107,"cf-icon",50),e.qZA()()(),e.YNc(108,Xt,1,0,"cf-spinner",38)),2&t&&(e.xp6(18),e.hij("",e.xi3(19,11,i.rawData.startPoint,i.viewFly)," "),e.xp6(12),e.hij(" ",e.xi3(31,14,i.rawData.endPoint,i.viewFly)," "),e.xp6(8),e.Oqu(e.xi3(39,17,i.rawData.toDate,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(45,20,i.rawData.fromDate,"dd/MM/yyyy")),e.xp6(10),e.Oqu(e.xi3(55,23,i.dataFormSubmit.advanceSetting.timeExecute,"dd/MM/yyy HH:mm")),e.xp6(9),e.Q6J("ngForOf",e.xi3(64,26,i.rawData.departureTime,i.viewDepartureTime)),e.xp6(9),e.Q6J("ngIf","PRICE"!==i.rawData.type),e.xp6(1),e.Q6J("ngIf","PRICE"===i.rawData.type),e.xp6(8),e.Q6J("ngIf","FARE"!==i.rawData.type),e.xp6(1),e.Q6J("ngIf","FARE"===i.rawData.type),e.xp6(26),e.Q6J("ngIf",i.isLoading))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,_.AxE,_.Sm8,re.q,h.N8,h.Xq,B.AS,D.DW,Z.OR],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})();function Wt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1," ")}}function en(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"cf-icon",7),e.qZA())}function tn(n,a){if(1&n&&e._UZ(0,"div",8),2&n){const t=e.oxw().index,i=e.oxw();e.Q6J("ngClass",t<i.stepCurIdx?"bg-secondary-7-4":"bg-neutral-gray-3")}}const nn=function(n,a,t){return{"text-neutral-white !bg-secondary-7-4":n,"text-neutral-gray-3 !bg-white":a,"border-secondary-7-4":t}};function on(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3),e.YNc(3,Wt,2,1,"span",4),e.YNc(4,en,2,0,"span",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,tn,1,1,"div",6),e.BQk()),2&n){const t=a.$implicit,i=a.index,o=a.last,r=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(5,nn,r.stepCurIdx===i,r.stepCurIdx!==i,i<=r.stepCurIdx)),e.xp6(1),e.Q6J("ngIf",i>=r.stepCurIdx),e.xp6(1),e.Q6J("ngIf",i<r.stepCurIdx),e.xp6(2),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",!o)}}let an=(()=>{class n{set stepCur(t){this.stepCurIdx=this.steps.findIndex(i=>i.id===t)}constructor(t){this._cfRegister=t,this.stepChange=new e.vpe,t.registerIcons([_.NNX])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-step-ct"]],inputs:{steps:"steps",stepCur:"stepCur"},outputs:{stepChange:"stepChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"flex","items-center","w-[84%]","md:w-[70%]"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3",3,"ngClass"],[4,"ngIf"],[1,"line-clamp-2","absolute","min-w-[140px]","max-w-[170px]","top-[130%]","text-[#2C2C2C]","text-express-md","md:max-w-[80px]","text-center"],["class","flex-grow h-[1px] ",3,"ngClass",4,"ngIf"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"flex-grow","h-[1px]",3,"ngClass"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,on,8,9,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.steps))},dependencies:[p.ez,p.mk,p.sg,p.O5,_.AxE,_.Sm8],styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:center;min-height:68px;align-items:flex-start}"],changeDetection:0}),n})();var rn=m(99590),ke=m(73546),De=m(76331);const sn=(n,a)=>{var t;const i=n.fareType.map(o=>o.fareClass.map(({code:r})=>r)).reduce((o,r)=>[...o,...r],[]);return!(null===(t=null==a?void 0:a.fareClass)||void 0===t||!t.length)&&i.some(o=>a.fareClass.includes(o))},un=(n,a)=>{var t;return!(null===(t=null==a?void 0:a.fareClass)||void 0===t||!t.length)&&n.fareClass.map(({code:i})=>i).some(i=>a.fareClass.includes(i))},dn=n=>{var a;let t=0;return null===(a=n.cabin)||void 0===a||a.forEach(i=>{var o;null===(o=i.fareType)||void 0===o||o.forEach(r=>{t+=r.fareClass.length||0})}),t},pn=n=>["GDS","other","",null].includes(n)?"assets/icons/airline-default.svg":`assets/icons/${n}-icon.svg`,_n={VJ:{name:"Vietjet Air",logo:"assets/airline-logo/VJ.png",smallLogo:"assets/airline-logo/VJ_small.png"},VN:{name:"Vietnam Airlines",logo:"assets/airline-logo/VN.png",smallLogo:"assets/airline-logo/VN_small.png"},QH:{name:"Bamboo Airways",logo:"assets/airline-logo/QH.png",smallLogo:"assets/airline-logo/QH_small.png"}},fn=n=>{var a;return(null===(a=_n[n])||void 0===a?void 0:a.name)||""};var mn=m(27361),gn=m(50633),Se=m(17489),hn=m(39646),V=m(40899);function vn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function xn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._UZ(1,"cf-icon",19),e.qZA()}}function Tn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function yn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._UZ(1,"cf-icon",19),e.qZA()}}const Cn=function(n){return{"bg-[#FCB40A] text-neutral-white":n}};function En(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(6);return e.KtG(c.onToggleFareSelected(r))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Cn,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function An(n,a){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,En,3,4,"ng-container",5),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function bn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.onFareTypeSelectedChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11)(5,"div",13),e._uU(6),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()(),e.YNc(9,Tn,2,0,"button",15),e.YNc(10,yn,2,0,"button",15),e.qZA(),e.YNc(11,An,2,1,"div",22),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Zn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,bn,12,7,"ng-container",5),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Fn(n,a){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,Zn,2,1,"ng-container",5),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function kn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11),e._UZ(5,"img",12),e.TgZ(6,"div",13),e._uU(7),e.TgZ(8,"span",14),e._uU(9),e.qZA()()()()(),e.YNc(10,vn,2,0,"button",15),e.YNc(11,xn,2,0,"button",15),e.qZA(),e.YNc(12,Fn,2,1,"div",16),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}let we=(()=>{class n{constructor(t,i,o,r,c,l,f,v){this.route=t,this._cfRegister=i,this._permissionService=o,this._modal=r,this._route=c,this._cd=l,this.data=f,this.cfBottomSheetRef=v,i.registerIcons([_.xgX,_.xbi,_.NYs,_.Hge,_.n78,_.fqi,_.esH,_.cnj,_.TM4]),v.containerInstance._rightButtonClick.subscribe(g=>{this.cfBottomSheetRef.dismiss(!1)}),this.fareOptions=f.fareOptions}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(i=>{i.isExpand=i.code.toUpperCase()===t.code.toUpperCase()&&!i.isExpand})}onFareTypeExpand(t,i){i.isExpand=!i.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.code!==i.code&&(r.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(i=>{i.isActive=t,i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,i){i.isActive=t,i.childItems.forEach(o=>{o.isActive=i.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,i){i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t){t.isActive=!t.isActive,this.standardizeFareOptionSelected()}close(){this.cfBottomSheetRef.dismiss()}submit(){this.cfBottomSheetRef.dismiss(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(i=>{let o=!1;i.childItems.forEach(r=>{r.childItems.forEach(c=>{c.isActive=c.childItems.map(l=>l.isActive).reduce((l,f)=>l||f,!1),t=t&&c.childItems.map(l=>l.isActive).reduce((l,f)=>l&&f,!0),c.totalSelectedFare=c.childItems.filter(l=>l.isActive).length,c.isActive&&(o=!0)})}),i.isActive=o,i.totalSelectedFare=i.childItems.reduce((r,c)=>r+c.childItems.map(l=>l.childItems.filter(f=>f.isActive).length).reduce((l,f)=>l+f),0)}),this.selectedAll=t,this._cd.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.gz),e.Y36(_.KNP),e.Y36(V.$A),e.Y36(S.oE),e.Y36(q.F0),e.Y36(e.sBO),e.Y36(D.Rr),e.Y36(D.Zu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fare-option-bottom-sheet"]],standalone:!0,features:[e.jDz],decls:14,vars:2,consts:[[1,"overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"px-3","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-4"],[1,"px-3","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"fixed","bottom-0","left-0","w-screen","bg-white","shadow-cf-large-top","p-3","flex","items-center","justify-end","gap-x-2","z-1000"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-3","items-center"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !outline-none !outline-transparent gap-x-2 items-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 pl-4",4,"ngIf"],["type","secondary",1,"flex","!outline-none","!outline-transparent","gap-x-2","items-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","pl-4"],[1,"w-full","flex","justify-between","py-2","px-3","items-center"],["class","flex flex-wrap gap-2 p-2 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-checkbox",3),e.NdJ("checkChange",function(r){return i.onSelectAllChange(r)}),e._uU(4,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,kn,13,8,"ng-container",5),e.qZA()(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return i.close()}),e.TgZ(9,"span"),e._uU(10,"H\u1ee7y"),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return i.submit()}),e.TgZ(12,"span"),e._uU(13,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("checked",i.selectedAll),e.xp6(3),e.Q6J("ngForOf",i.fareOptions))},dependencies:[_.AxE,_.Sm8,p.ez,p.mk,p.sg,p.O5,x.j$,h.N8,h.Xq,D.DW,s.UX,de.u],encapsulation:2}),n})();function Dn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function Sn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}function wn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function In(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}const qn=function(n){return{"!bg-[#FFF8E7] border-[#FCB40A]":n}};function Un(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"cf-checkbox",24),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.onFareTypeSelectedChange(o,c))}),e._uU(3),e.TgZ(4,"span",16),e._uU(5),e.qZA()(),e.YNc(6,wn,3,0,"button",25),e.YNc(7,In,3,0,"button",25),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(7,qn,t.isExpand)),e.xp6(1),e.Q6J("checked",t.isActive),e.xp6(1),e.hij("",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Mn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Un,8,9,"ng-container",7),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function On(n,a){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,Mn,2,1,"ng-container",7),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const Nn=function(n){return{"bg-[#FCB40A] text-neutral-white":n}};function Bn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,l=e.oxw(3);return e.KtG(l.onToggleFareSelected(r,c))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Nn,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function Jn(n,a){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,Bn,3,4,"ng-container",7),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Pn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Jn,2,1,"div",27),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.isExpand&&i.isExpand)}}function Hn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Pn,2,1,"ng-container",7),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Qn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"cf-checkbox",5),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",12)(4,"div",13),e._UZ(5,"img",14),e.TgZ(6,"div",15),e._uU(7),e.TgZ(8,"span",16),e._uU(9),e.qZA()()()()(),e.YNc(10,Dn,3,0,"button",17),e.YNc(11,Sn,3,0,"button",17),e.qZA(),e.YNc(12,On,2,1,"div",18),e.YNc(13,Hn,2,1,"ng-container",7),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngForOf",t.childItems)}}let Ie=(()=>{class n{constructor(t,i,o,r,c,l,f){this.route=t,this._cfRegister=i,this._permissionService=o,this._modal=r,this._route=c,this._cd=l,this._ref=f,i.registerIcons([_.xgX,_.xbi,_.NYs,_.Hge,_.n78,_.fqi,_.esH,_.cnj,_.TM4]),this.fareOptions=(0,Se.cloneDeep)(f.data.data)}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(i=>{i.isExpand=i.code.toUpperCase()===t.code.toUpperCase()&&!i.isExpand})}onFareTypeExpand(t,i){i.isExpand=!i.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.code!==i.code&&(r.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(i=>{i.isActive=t,i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,i){i.isActive=t,i.childItems.forEach(o=>{o.isActive=i.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,i){i.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t,i){t.isActive=!t.isActive,i.isActive=i.childItems.some(o=>o.isActive),this.standardizeFareOptionSelected()}close(){this._ref.close(this._ref.data.data)}submit(){this._ref.close(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(i=>{let o=!1;i.childItems.forEach(r=>{r.isActive=r.childItems.some(c=>c.isActive),r.childItems.forEach(c=>{c.isActive=c.childItems.map(l=>l.isActive).reduce((l,f)=>l||f,!1),t=t&&c.childItems.map(l=>l.isActive).reduce((l,f)=>l&&f,!0),c.totalSelectedFare=c.childItems.filter(l=>l.isActive).length,c.isActive&&(o=!0)})}),i.isActive=o,i.totalSelectedFare=i.childItems.reduce((r,c)=>r+c.childItems.map(l=>l.childItems.filter(f=>f.isActive).length).reduce((l,f)=>l+f),0)}),this.selectedAll=t,this._cd.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.gz),e.Y36(_.KNP),e.Y36(V.$A),e.Y36(S.oE),e.Y36(q.F0),e.Y36(e.sBO),e.Y36(S.gb))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fare-option-modal"]],standalone:!0,features:[e.jDz],decls:17,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 px-6",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","px-6"],[1,"w-[calc(32%-12px)]","py-2","px-2.5","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-between","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"ngClass"],["size","medium",1,"w-full",3,"checked","checkChange"],["class","flex w-full text-center !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0","type","secondary",3,"click",4,"ngIf"],["type","secondary",1,"flex","w-full","text-center","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0",3,"click"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"cf-checkbox",5),e.NdJ("checkChange",function(r){return i.onSelectAllChange(r)}),e._uU(7,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,Qn,14,9,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return i.close()}),e.TgZ(12,"span"),e._uU(13,"H\u1ee7y"),e.qZA()(),e.TgZ(14,"button",10),e.NdJ("click",function(){return i.submit()}),e.TgZ(15,"span"),e._uU(16,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("checked",i.selectedAll),e.xp6(3),e.Q6J("ngForOf",i.fareOptions))},dependencies:[_.AxE,_.Sm8,p.ez,p.mk,p.sg,p.O5,x.j$,h.N8,h.Xq,D.DW,s.UX,de.u],encapsulation:2}),n})();const Ln=function(n,a,t){return{"!bg-primary-2-4 !border-0":n,"opacity-[0.4]":a,"md:col-span-2":t}},Yn=function(n){return{"!text-neutral-white opacity-[0.6]":n}},Rn=function(n){return{"!text-neutral-white":n}};function jn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTime(r))}),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.last;e.xp6(1),e.Q6J("ngClass",e.kEZ(5,Ln,t.isActive,t.disable,i)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Yn,t.isActive)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Rn,t.isActive)),e.xp6(1),e.hij(" ",t.start+" - "+t.end!="00:00 - 23:59"?t.start+" - "+t.end:"Gi\u1edd c\u1ee5 th\u1ec3","")}}function Gn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",12)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA()(),e.TgZ(8,"cf-slider",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.customRangeItem.rangeValues=o)})("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.timeChange(o,r.customRangeItem))})("onSlideEnd",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.end())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.customRangeItem.startTimeStr),e.xp6(2),e.Oqu(t.customRangeItem.endTimeStr),e.xp6(1),e.Q6J("ngModel",t.customRangeItem.rangeValues)("min",0)("max",1439)("step",1)("range",!0)}}let zn=(()=>{class n{constructor(t,i,o,r){this._cd=i,this.data=o,this.cfBottomSheetRef=r,this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}],this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},t.registerIcons([]),this.orgOptionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.optionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.orgOptionDepartureTime.forEach(c=>{"custom"===c.code&&(this.customRangeItem.rangeValues=[c.startTime,c.endTime],this.customRangeItem.startTimeStr=c.start,this.customRangeItem.endTimeStr=c.end)}),r.containerInstance._rightButtonClick.subscribe(c=>{this.cfBottomSheetRef.dismiss(!1)})}onSelectedTime(t){t.disable||(t.isActive=!t.isActive),"custom"===t.code&&!0===t.isActive?this.optionDepartureTime.forEach(i=>{"custom"!==i.code&&(i.isActive=!1)}):"custom"!==t.code&&!0===t.isActive&&(this.optionDepartureTime[4].isActive=!1)}timeChange(t,i){i.startTimeStr=this.minuteToString(t[0]),i.endTimeStr=this.minuteToString(t[1])}minuteToString(t){const i=Math.floor(t/60),o=t%60;let r=`${i}`,c=`${o}`;return i<10&&(r=`0${i}`),o<10&&(c=`0${o}`),`${r}:${c}`}end(){this.optionDepartureTime[4].start=this.customRangeItem.startTimeStr,this.optionDepartureTime[4].end=this.customRangeItem.endTimeStr,this.optionDepartureTime[4].startTime=this.customRangeItem.rangeValues[0],this.optionDepartureTime[4].endTime=this.customRangeItem.rangeValues[1]}submit(){this.cfBottomSheetRef.dismiss(this.optionDepartureTime)}reset(){this.optionDepartureTime.forEach(t=>{t.isActive=!1}),this._cd.detectChanges()}close(){this.cfBottomSheetRef.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(e.sBO),e.Y36(D.Rr),e.Y36(D.Zu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["time-range-options-bottom-sheet"]],hostAttrs:[1,"!w-full"],standalone:!0,features:[e.jDz],decls:10,vars:2,consts:[[1,"flex","flex-wrap","justify-center","items-center","md:grid","md:grid-cols-2","gap-x-4","gap-y-4","px-4"],[4,"ngFor","ngForOf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4 mt-4",4,"ngIf"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-[40%]","md:!w-full","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1","py-2.5",3,"ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4","mt-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelChange","onSlideEnd"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,jn,6,13,"ng-container",1),e.qZA(),e.YNc(2,Gn,9,7,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return i.reset()}),e._uU(6," \u0110\u1eb7t l\u1ea1i "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.submit()}),e.TgZ(8,"span"),e._uU(9,"Xong"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.optionDepartureTime),e.xp6(1),e.Q6J("ngIf",i.optionDepartureTime[4].isActive))},dependencies:[_.AxE,p.ez,p.mk,p.sg,p.O5,ke.nA,s.u5,s.JJ,s.On,h.N8,h.Xq],encapsulation:2}),n})();const Vn={headers:new R.WM({"Content-Type":"application/json"})};let Kn=(()=>{class n{constructor(t,i){this.http=t,this.appConfig=i}getLstAirlineFareoptions(){return this.http.post(this.appConfig.apiUrlTPS+"ticket-low-fare/get-list-airline-fare-class",JSON.stringify({airline:"vn,qh,vj"}),Vn)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(R.eN),e.LFG(te.qB))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $n=["dateFromEl"],Xn=["form",""];function Wn(n,a){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function ei(n,a){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function ti(n,a){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ni(n,a){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}const ce=function(n){return[n]},le=function(){return{"text-express-md":!0}};function ii(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18),e.ynx(2),e.TgZ(3,"cf-select",19),e.NdJ("selectedChange",function(){e.CHM(t);const o=e.MAs(13),r=e.oxw();return e.KtG(r.nextPosition(o))}),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,Wn,1,1,"cf-hint",24),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"cf-select",27,28),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,ei,1,1,"cf-hint",24),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"div",31)(21,"cf-field-group",32),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",34),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",35,36),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33),r=e.MAs(26);return e.oxw().dateFromChange(o),e.KtG(r.close())}),e.qZA(),e.YNc(27,ti,1,1,"cf-hint",37),e.qZA(),e.TgZ(28,"cf-field-group",32),e._UZ(29,"cf-icon",33),e.TgZ(30,"label",38),e._uU(31," \u0111\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(32,"input",39,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())}),e.ALo(34,"mapper"),e.qZA(),e.YNc(35,ni,1,1,"cf-hint",37),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(39);e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("data",t.data)("optionTmp",i)("excludes",e.VKq(32,ce,t.form.controls.endPoint.value)),e.xp6(2),e.Q6J("ngClass",e.DdM(34,le)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("data",t.data)("optionTmp",i)("excludes",e.VKq(35,ce,t.form.controls.startPoint.value)),e.xp6(3),e.Q6J("ngClass",e.DdM(37,le)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(1),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(34,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function oi(n,a){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function ai(n,a){1&n&&e._UZ(0,"cf-hint",41),2&n&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function ri(n,a){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ci(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",58),e.NdJ("dateSelect",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.dateSelectMobile(o,r.form.controls.fromDate,r.form.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",59)(5,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("fromDate",t.form.controls.fromDate.value)("displayMonthsOffset",0)}}function li(n,a){1&n&&e._UZ(0,"cf-hint",42),2&n&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function si(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",61,62),e.NdJ("dateSelect",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.dateSelectMobile(o,r.form.controls.toDate))}),e.ALo(5,"mapper"),e.qZA()()(),e.TgZ(6,"div",59)(7,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",e.xi3(5,14,t.form.value.toDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("toDate",t.form.controls.toDate.value)("displayMonthsOffset",0)}}function ui(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.startPoint,o.form.controls.endPoint))}),e.TgZ(3,"cf-select",45),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,oi,1,1,"cf-hint",24),e.qZA()(),e.TgZ(10,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.endPoint,o.form.controls.startPoint))}),e.TgZ(13,"cf-select",47),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,ai,1,1,"cf-hint",24),e.qZA()()(),e.TgZ(20,"div",48)(21,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(29),r=e.oxw();return e.KtG(r.departDatePickerClick(o))}),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",50),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",51,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roundTripFocus(o))}),e.qZA(),e.YNc(27,ri,1,1,"cf-hint",37),e.qZA(),e.YNc(28,ci,7,13,"ng-template",null,52,e.W1O),e.TgZ(30,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(39),r=e.oxw();return e.KtG(r.departDatePickerClick(o))}),e._UZ(31,"cf-icon",33),e.TgZ(32,"label",50),e._uU(33," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(34,"input",53,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roundTripFocus(o))}),e.ALo(36,"mapper"),e.qZA(),e.YNc(37,li,1,1,"cf-hint",37),e.qZA(),e.YNc(38,si,9,17,"ng-template",null,54,e.W1O),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(39);e.xp6(3),e.Q6J("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(32,ce,t.form.controls.endPoint.value))("data",t.data)("optionTmp",i),e.xp6(2),e.Q6J("ngClass",e.DdM(34,le)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(4),e.Q6J("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(35,ce,t.form.controls.startPoint.value))("data",t.data)("optionTmp",i),e.xp6(2),e.Q6J("ngClass",e.DdM(37,le)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(3),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(36,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function di(n,a){1&n&&(e.TgZ(0,"div",71),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function pi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onRemoveAirlineOption(o,r))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function _i(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3).$implicit,l=e.oxw(2);return e.KtG(l.onRemoveFareTypeOption(o,r,c))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",i.name+"-"+t.name,"")}}function fi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",76),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(5).$implicit,l=e.oxw(2);return e.KtG(l.onRemoveFareOption(o,r,c))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+i.name+"-"+t.name,"")}}function mi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,fi,3,1,"div",75),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function gi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,mi,2,1,"ng-container",68),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function hi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,_i,3,1,"div",72),e.YNc(2,gi,2,1,"ng-container",2),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function vi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,hi,3,2,"ng-container",68),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function xi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,vi,2,1,"ng-container",68),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ti(n,a){if(1&n&&(e.ynx(0),e.YNc(1,pi,3,1,"div",72),e.YNc(2,xi,2,1,"ng-container",2),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function yi(n,a){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function Ci(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",66),e.YNc(5,di,2,0,"div",67),e.YNc(6,Ti,3,2,"ng-container",68),e.qZA(),e._UZ(7,"cf-icon",69),e.qZA(),e.YNc(8,yi,3,0,"div",70),e.ALo(9,"mapper"),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",!(t.form.value.specifyFareClassList&&(null==t.form.value.specifyFareClassList?null:t.form.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.form.value.type,t.specifyFareClassList.touched))}}function Ei(n,a){1&n&&(e.TgZ(0,"label",78),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&n&&e.Q6J("CfRequired",!1)}function Ai(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",81)(2,"div",82),e._UZ(3,"img",83),e.TgZ(4,"span",84),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",86),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.index;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function bi(n,a){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function Zi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",79),e.ynx(2,80),e.YNc(3,Ai,9,6,"ng-container",68),e.BQk(),e.YNc(4,bi,3,0,"div",70),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.form.value.type,t.specifyPriceList.touched))}}const Fi=function(n,a){return{"!bg-primary-2-4 !border-0":n,"opacity-[0.4]":a}},ki=function(n){return{"!text-neutral-white opacity-[0.6]":n}},Di=function(n){return{"!text-neutral-white":n}};function Si(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",91),e.NdJ("click",function(){const o=e.CHM(t),r=o.$implicit,c=o.index,l=e.oxw(3);return e.KtG(l.onSelectedTime(r,c))}),e.TgZ(2,"div",92),e._uU(3),e.qZA(),e.TgZ(4,"div",93),e._uU(5),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.index;e.xp6(1),e.Q6J("formGroupName",i)("ngClass",e.WLB(6,Fi,t.value.isActive,t.value.disable)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ki,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Di,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.start+" - "+t.value.end!="00:00 - 23:59"?t.value.start+" - "+t.value.end:"Gi\u1edd c\u1ee5 th\u1ec3"," ")}}function wi(n,a){if(1&n&&(e.TgZ(0,"div",89),e.ynx(1,90),e.YNc(2,Si,6,13,"ng-container",68),e.BQk(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.departureTime.controls)}}const Ii=function(){return{standalone:!0}};function qi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",96)(4,"div"),e._uU(5),e.ALo(6,"mapper"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"mapper"),e.qZA()(),e.TgZ(10,"cf-slider",97),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.rangeHours=o)})("onSlideEnd",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.endSliderTime())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,8,t.rangeHours[0],t.minuteToString)),e.xp6(3),e.Oqu(e.xi3(9,11,t.rangeHours[1],t.minuteToString)),e.xp6(2),e.Q6J("ngModel",t.rangeHours)("min",0)("max",1439)("step",1)("range",!0)("ngModelOptions",e.DdM(14,Ii))}}function Ui(n,a){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function Mi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,wi,3,1,"div",87),e.YNc(2,qi,11,15,"div",88),e.YNc(3,Ui,3,0,"div",70),e.ALo(4,"mapper"),e.ALo(5,"mapper"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",t.departureTime.value[4].isActive&&t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",e.gM2(4,3,e.xi3(5,8,t.departureTime.value,t.selectForDepartureTimeActive),t.checkInvalidField,t.form.value.isTimeRange,t.departureTime.touched))}}function Oi(n,a){if(1&n&&(e.TgZ(0,"span",101),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function Ni(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Oi,2,1,"span",100),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Bi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openTimeRangeOptions())}),e.YNc(1,Ni,2,1,"ng-container",68),e.ALo(2,"mapper"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.departureTime.value,t.selectForDepartureTimeActive))}}function Ji(n,a){1&n&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function Pi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Bi,3,4,"div",98),e.YNc(2,Ji,3,0,"div",70),e.ALo(3,"mapper"),e.BQk()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!(null!=(i=e.xi3(3,2,t.departureTime.value,t.selectForDepartureTimeActive))&&i.length))}}function Hi(n,a){if(1&n&&(e.TgZ(0,"div",102),e._UZ(1,"div",103),e.ALo(2,"highlighter"),e._UZ(3,"div",104),e.ALo(4,"highlighter"),e.qZA()),2&n){const t=a.item,i=a.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,t.CityName+", "+t.Title,i.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,t.Code+" - "+t.AirportName,i.text),e.oJD)}}function Qi(n,a){1&n&&e._UZ(0,"cf-spinner")}let Li=(()=>{class n{constructor(t,i,o,r,c,l,f,v){this.fb=t,this._cfRegister=i,this.calendar=o,this._bottomSheetService=r,this._locationDataService=c,this._cdr=l,this._modal=f,this._selectFareFlightSvc=v,this.isMobile=!1,this.maxDate={year:C().add(4,"days").toDate().getFullYear(),month:C().add(4,"days").toDate().getMonth()+1,day:C().add(4,"days").toDate().getDate()},this.numOfMonth=4,this.isLoading=!1,this.selectedFaresTreeChange=new e.vpe,this.rangeHours=[0,1439],this.convertDateFromCFDate=g=>({year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate()}),this.checkInvalidField=(g,T,A)=>T&&!g.length&&A,this.selectForDepartureTimeActive=g=>null==g?void 0:g.filter(T=>T.isActive),this.minuteToString=g=>{const T=Math.floor(g/60),A=g%60;let b=`${T}`,E=`${A}`;return T<10&&(b=`0${T}`),A<10&&(E=`0${A}`),`${b}:${E}`},this.positionSearchCustom=(g,T)=>{const A=this.removeAccents(g.Code.toLowerCase()),b=this.removeAccents(g.Title.toLowerCase()),E=this.removeAccents(g.CityName.toLowerCase()),y=this.removeAccents(g.AirportName.toLowerCase()),F=this.removeAccents(T.toLowerCase());return A.includes(F)||b.includes(F)||E.includes(F)||y.includes(F)},i.registerIcons([_.okA,_._tC,_.wvd,_.UNF,_.n78]),this.minDate=o.getToday(),this.data=this._locationDataService.getAllOption()}ngOnInit(){}swapPoint(t,i){if(""!=t.value&&""!=i.value){const o=t.value;t.setValue(null),t.setValue(i.value),i.setValue(null),i.setValue(o)}}nextPosition(t){setTimeout(()=>{t.selectFocus()})}dateFromChange(t){var i,o,r;this.form.patchValue({toDate:null});const c={year:C(null===(i=this.form.get("fromDate"))||void 0===i?void 0:i.value).add(4,"days").get("year"),month:C(null===(o=this.form.get("fromDate"))||void 0===o?void 0:o.value).add(4,"days").get("month")+1,day:C(null===(r=this.form.get("fromDate"))||void 0===r?void 0:r.value).add(4,"days").get("date")};this.maxDate=c,setTimeout(()=>{t.open()},0)}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}openAirportBottomSheet(t,i){const o=this._bottomSheetService.open(mn.hm,{headerTitle:"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1,data:{airportOptions:this.data,currentSelected:this._locationDataService.getCityNameByCode(t.value),excludes:[i.value]}});o.containerInstance._leftButtonClick.subscribe(r=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&t.setValue(r.Code)})}departDatePickerClick(t){if(this.isMobile){const i=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0});i.containerInstance._leftButtonClick.subscribe(o=>{i.dismiss()})}}roundTripFocus(t){if(this.isMobile)return t.preventDefault(),!1}dateSelectMobile(t,i,o){var r,c,l;if(i.setValue(t),o){o.setValue(null);const f={year:C(null===(r=this.form.get("toDate"))||void 0===r?void 0:r.value).add(4,"days").get("year"),month:C(null===(c=this.form.get("toDate"))||void 0===c?void 0:c.value).add(4,"days").get("month")+1,day:C(null===(l=this.form.get("toDate"))||void 0===l?void 0:l.value).add(4,"days").get("date")};this.maxDate=f}this._cdr.detectChanges()}onMobileDatePickerOK(){this._bottomSheetService.dismiss()}scrollDown(){this.numOfMonth=this.numOfMonth+4}onShowFareOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(i=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onPriceOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(i=this.specifyFareClassList.value)&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}loadFareOptions(t){var i;return(null===(i=this.selectedFaresTree)||void 0===i?void 0:i.length)>0?(0,hn.of)(this.selectedFaresTree):this._selectFareFlightSvc.getLstAirlineFareoptions().pipe((0,O.U)(o=>((n,a)=>n.map(t=>{var i,o;const r=null==a?void 0:a.find(c=>c.airline===t.airline);return{name:fn(null===(i=t.airline)||void 0===i?void 0:i.toUpperCase()),code:t.airline,icon:pn(t.airline),isActive:!!a&&!!r,totalSelectedFare:(null===(o=null==r?void 0:r.fareClass)||void 0===o?void 0:o.length)||0,isDisable:!1,totalFare:dn(t),childItems:t.cabin.map(c=>({code:c.code,name:c.name,isActive:!!r&&sn(c,r),isDisable:!1,childItems:c.fareType.map(l=>{var f;return{code:l.code,name:l.description,isActive:!!r&&un,isDisable:!1,totalFare:(null===(f=l.fareClass)||void 0===f?void 0:f.length)||0,childItems:l.fareClass.map(v=>({code:v.code,name:v.name,isActive:!!r&&r.fareClass.find(g=>g===v.code),childItems:[],isDisable:!1})),totalSelectedFare:r?l.fareClass.map(({code:v})=>v).filter(v=>r.fareClass.includes(v)).length:0}})}))}}))(o.data,t)))}countAirlineTotalFare(t){var i;let o=0;return null===(i=t.cabin)||void 0===i||i.forEach(r=>{var c;null===(c=r.fareType)||void 0===c||c.forEach(l=>{o+=l.fareClass.length||0})}),o}openFareOptions(){this.isLoading=!0,this.loadFareOptions().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(we,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(Ie,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var i;this.specifyFareClassList.clear();for(const o of(n=>n.map(a=>({airline:a.code,fareClass:a.childItems.map(t=>t.childItems.map(i=>i.childItems.filter(o=>o.isActive)).reduce((i,o)=>[...i,...o.map(r=>r.code)],[])).reduce((t,i)=>[...t,...i],[])})))(t))null!==(i=o.fareClass)&&void 0!==i&&i.length&&this.addFareClass(o);this._cdr.markForCheck()}onRemoveAirlineOption(t,i){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(o=>{o.childItems.forEach(r=>{r.childItems.forEach(c=>c.isActive=!1)})}),this.standardizeAirlineOptionSelected(i)}standardizeAirlineOptionSelected(t){let i=!1;t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.isActive=r.childItems.map(c=>c.isActive).reduce((c,l)=>c||l,!1),r.totalSelectedFare=r.childItems.filter(c=>c.isActive).length,r.isActive&&(i=!0)})}),t.isActive=i,t.totalSelectedFare=t.childItems.reduce((o,r)=>o+r.childItems.map(c=>c.childItems.filter(l=>l.isActive).length).reduce((c,l)=>c+l),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}onRemoveFareTypeOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(r=>{r.isActive=!1}),this.standardizeAirlineOptionSelected(o)}onRemoveFareOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1,this.standardizeAirlineOptionSelected(o)}get specifyFareClassList(){return this.form.get("specifyFareClassList")}get specifyPriceList(){return this.form.get("specifyPriceList")}addFareClass(t){var i;const o=this.fb.group({airline:null,fareClass:null});o.patchValue(t),null===(i=this.specifyFareClassList)||void 0===i||i.push(o)}onTimeOptionChange(t){this.form.patchValue({isTimeRange:t}),t&&this.isMobile&&this.openTimeRangeOptions()}openTimeRangeOptions(){this._bottomSheetService.open(zn,{headerTitle:"Gi\u1edd kh\u1edfi h\xe0nh",data:{timeRanges:(0,Se.cloneDeep)(this.departureTime.value)}}).afterDismissed().subscribe(i=>{i&&(this.departureTime.controls.forEach((o,r)=>{this.departureTime.at(r).setValue(i[r])}),this._cdr.detectChanges())})}get departureTime(){return this.form.get("departureTime")}onSelectedTime(t,i){this.departureTime.markAllAsTouched(),"custom"===t.value.code?this.departureTime.controls.forEach((o,r)=>{o.patchValue(r!==i?{isActive:!1}:{isActive:!o.value.isActive})}):(this.departureTime.at(4).patchValue({isActive:!1}),this.departureTime.at(i).patchValue({isActive:!t.value.isActive}))}endSliderTime(){const[t,i]=this.rangeHours;this.departureTime.at(4).patchValue({start:this.minuteToString(t),end:this.minuteToString(i),startTime:t,endTime:i})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(_.KNP),e.Y36(G.jH),e.Y36(D.a2),e.Y36(z._),e.Y36(e.sBO),e.Y36(S.oE),e.Y36(Kn))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-add-info-flight-step","form",""]],viewQuery:function(t,i){if(1&t&&e.Gf($n,5),2&t){let o;e.iGM(o=e.CRH())&&(i.dateFromEl=o.first)}},inputs:{form:"form",isMobile:"isMobile",selectedFaresTree:"selectedFaresTree"},outputs:{selectedFaresTreeChange:"selectedFaresTreeChange"},standalone:!0,features:[e.jDz],attrs:Xn,decls:41,vars:17,consts:[[1,"w-full","h-full",3,"formGroup"],[1,"text-heading-md","py-4"],[4,"ngIf"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mt-4","mb-4"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,"mb-3"],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],[1,"flex","justify-between","items-center","mb-2"],["icon","clock","size","small"],[3,"checked","checkedChange"],["optionTemplate",""],[1,"flex","items-start","gap-x-2","md:flex-wrap","md:gap-x-0","md:gap-y-4","pb-2"],["placeholder","T\u1eeb?","textField","AirportDisplay","valueField","Code","formControlName","startPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes","selectedChange"],["cf-head-icon","","icon","plane","size","medium",1,"text-neutral-gray-4"],["cf-label","","for","startPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","startPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],["cfInputElement",""],["cf-hint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:top-[45px]","md:!bg-neutral-white","mt-2","md:m-0",3,"click"],["icon","switch","size","small",1,"text-primary-1-4","md:rotate-90"],["textField","AirportDisplay","valueField","Code","valueField","Code","placeholder","\u0110\u1ebfn?","formControlName","endPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes"],["endPoint",""],["cf-label","","for","endPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","endPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],[1,"flex","items-center","gap-x-4","md:flex-wrap","md:gap-x-0","md:gap-y-4","justify-between"],[1,"grow-[293]","!max-w-none","md:flex-grow-0","md:w-full","w-[calc(50%-12px)]",3,"valid","status"],["cfHeadIcon","","icon","calendar","size","medium",1,"text-neutral-gray-4"],["cfLabel","","for","fromDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","fromDate","cfDatepicker","","formControlName","fromDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["cfLabel","","for","toDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","toDate","cfDatepicker","","formControlName","toDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect"],["dateTo","cfDatepicker"],["cf-hint","",3,"hint"],["cfHint","",3,"hint"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4","relative"],[1,"grow-[293]","md:flex-grow-0","md:w-full","hidden","md:block",3,"click"],["formControlName","startPoint","textField","AirportDisplay","valueField","Code","placeholder","T\u1eeb?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:bottom-[38%]","md:!bg-neutral-white",3,"click"],["formControlName","endPoint","textField","AirportDisplay","valueField","Code","placeholder","\u0110\u1ebfn?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4"],[1,"grow-[293]","md:flex-grow-0","w-full",3,"valid","status","click"],["cfLabel","",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","fromDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","mousedown"],["fromDatepickerBottomSheetTpl",""],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","toDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect","mousedown"],["toDatepickerBottomSheetTpl",""],[1,"flex","w-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","formControlName","fromDate","navigation","none","direction","vertical",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","fromDate","displayMonthsOffset","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],["cf-button","",1,"justify-center","w-full",3,"click"],["formControlName","toDate","outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","maxDate","displayMonths","rangeSelection","secondaryCalendar","toDate","displayMonthsOffset","dateSelect"],["dateFromMobileEl",""],[1,""],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],["class","flex flex-wrap justify-start items-center md:justify-between md:items-center gap-x-8 gap-y-2",4,"ngIf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4",4,"ngIf"],[1,"flex","flex-wrap","justify-start","items-center","md:justify-between","md:items-center","gap-x-8","gap-y-2"],["formArrayName","departureTime"],[1,"py-2","px-2.5","min-w-[106px]","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"formGroupName","ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelOptions","ngModelChange","onSlideEnd"],["class","flex flex-wrap gap-2 mt-4 cursor-pointer",3,"click",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mt-4","cursor-pointer",3,"click"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngIf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2,"T\xf9y ch\u1ecdn chuy\u1ebfn bay"),e.qZA(),e.YNc(3,ii,36,38,"ng-container",2),e.YNc(4,ui,40,38,"ng-container",2),e._UZ(5,"div",3),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7)(10,"span"),e._uU(11,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(12,"div",8),e.NdJ("click",function(r){return i.onShowFareOptionChange(r)}),e._UZ(13,"cf-switch",9),e.qZA()(),e.YNc(14,Ci,10,8,"div",10),e._UZ(15,"div",3),e.TgZ(16,"div",11)(17,"div",4)(18,"div",5),e._UZ(19,"cf-icon",12),e.TgZ(20,"div",7)(21,"span"),e._uU(22,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(23,"div",8),e.NdJ("click",function(r){return i.onPriceOptionChange(r)}),e._UZ(24,"cf-switch",9),e.qZA()(),e.YNc(25,Ei,2,1,"label",13),e.ALo(26,"mapper"),e.qZA(),e.YNc(27,Zi,6,7,"ng-container",2),e._UZ(28,"div",3),e.TgZ(29,"div",14)(30,"div",5),e._UZ(31,"cf-icon",15),e.TgZ(32,"div",7)(33,"span"),e._uU(34,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(35,"cf-switch",16),e.NdJ("checkedChange",function(r){return i.onTimeOptionChange(r)}),e.qZA()(),e.YNc(36,Mi,6,11,"ng-container",2),e.YNc(37,Pi,4,5,"ng-container",2),e.qZA(),e.YNc(38,Hi,5,8,"ng-template",null,17,e.W1O),e.YNc(40,Qi,1,0,"cf-spinner",2)),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(9),e.Q6J("checked","FARE"===i.form.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===i.form.value.type),e.xp6(10),e.Q6J("checked","PRICE"===i.form.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(26,12,i.specifyPriceList.value,i.checkInvalidField,"PRICE"===i.form.value.type,i.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===i.form.value.type),e.xp6(8),e.Q6J("checked",i.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(3),e.Q6J("ngIf",i.isLoading))},dependencies:[p.ez,p.mk,p.sg,p.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,_.AxE,_.Sm8,ee.m,x.j$,x.BN,x.lt,I.q,h.N8,h.Xq,D.DW,rn.C,gn.T,oe.C,G.Cs,re.q,P.Rq,P.Ry,G._o,De.I,Z.OR,ke.nA,s.u5,s.On],encapsulation:2,changeDetection:0}),n})();var qe=m(19123);function Yi(n,a){if(1&n&&(e.TgZ(0,"cf-radio",12),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const Ri=function(){return{standalone:!0}};function ji(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"cf-radio-group",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.distributionChannelTempMobile=o)}),e.YNc(2,Yi,2,2,"cf-radio",10),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirmDistributeChannel())}),e._uU(4,"X\xe1c nh\u1eadn"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.distributionChannelTempMobile)("ngModelOptions",e.DdM(3,Ri)),e.xp6(1),e.Q6J("ngForOf",t.distributionChannelOptions)}}const Gi=[{id:"B2B_GMBR;B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{id:"B2B_GMBR",name:"Flychills"},{id:"B2C_GMBR",name:"GMBR"}];let zi=(()=>{class n{constructor(t,i,o){this._cfRegister=t,this._permissionService=i,this._bottomSheetService=o,this.isMobile=!1,this.distributionChannelTempMobile="B2B_GMBR;B2C_GMBR",this.distributionChannelOptions=Gi,t.registerIcons([_.ctk,_.gEm])}isAgent2(){const t=this._permissionService.getCurrentAuthor();return"AGENT2"===(null==t?void 0:t.titleCode.toUpperCase())}selectMobileDistributionChannel(t){if(!this.isMobile)return;const i=this._bottomSheetService.open(t,{headerTitle:"Vai tr\xf2",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",restoreFocus:!1});i.containerInstance._rightButtonClick.subscribe(()=>{i.dismiss()}),i.afterDismissed().subscribe(()=>{var o;this.distributionChannelTempMobile=null===(o=this.form.get("distributionChannel"))||void 0===o?void 0:o.value})}onConfirmDistributeChannel(){this.form.patchValue({distributionChannel:this.distributionChannelTempMobile}),this._bottomSheetService.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(V.$A),e.Y36(D.a2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cheapflightclient-add-config-flight-step"]],inputs:{form:"form",isMobile:"isMobile"},standalone:!0,features:[e.jDz],decls:11,vars:5,consts:[[3,"formGroup"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"mb-6","md:mb-[1px]"],[1,"",3,"click"],["data-id","distributionChannel","textField","name","valueField","id","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"ngClass","status","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],["distributionChannelTpl",""],[1,"flex","flex-col","w-full","p-4","gap-y-6"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelOptions","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],["cf-button","",1,"w-full","justify-center",3,"click"],["size","medium",3,"value"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(i.selectMobileDistributionChannel(c))}),e.TgZ(4,"cf-select",4)(5,"label",5),e._UZ(6,"cf-icon",6),e.TgZ(7,"span"),e._uU(8,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()(),e.YNc(9,ji,5,4,"ng-template",null,7,e.W1O),e.qZA()}2&t&&(e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("ngClass",i.isMobile?"pointer-events-none":"pointer-events-auto")("status",i.form.controls.distributionChannel.invalid&&(i.form.controls.distributionChannel.dirty||i.form.controls.distributionChannel.touched)?"error":"default")("data",i.distributionChannelOptions)("allowSearch",!1))},dependencies:[p.ez,p.mk,p.sg,s.UX,s._Y,s.JJ,s.JL,s.sg,s.u,_.AxE,_.Sm8,x.j$,I.q,qe.o,qe.T,s.u5,s.On,h.N8,h.Xq],encapsulation:2,changeDetection:0}),n})();var Ue=m(9381);function Vi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"cheapflightclient-add-info-flight-step",27),e.NdJ("selectedFaresTreeChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedFaresTree=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)("selectedFaresTree",t.selectedFaresTree)}}function Ki(n,a){if(1&n&&e._UZ(0,"cheapflightclient-add-config-flight-step",28),2&n){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)}}function $i(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}const Me=function(n,a,t,i,o){return[n,a,t,i,o]};function Xi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,Me,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function Wi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function eo(n,a){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,$i,3,0,"button",30),e.YNc(2,Xi,5,13,"button",31),e.YNc(3,Wi,3,1,"button",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function to(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function no(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,Me,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function io(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA(),e._UZ(3,"cf-icon",35),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function oo(n,a){if(1&n&&(e.TgZ(0,"div",36)(1,"div",37),e.YNc(2,to,3,0,"button",38),e.YNc(3,no,5,13,"button",39),e.YNc(4,io,4,1,"button",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function ao(n,a){1&n&&e._UZ(0,"cf-spinner")}var L=(()=>{return(n=L||(L={}))[n.INFO_FLIGHT=0]="INFO_FLIGHT",n[n.CONFIG_HUNT=1]="CONFIG_HUNT",L;var n})();const ro=[{title:"Th\xf4ng tin chuy\u1ebfn bay",id:L.INFO_FLIGHT},{title:"C\u1ea5u h\xecnh s\u0103n v\xe9",id:L.CONFIG_HUNT}],co=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}],lo=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!0,disable:!1,startTime:0,endTime:1439,totalAvailable:0}];let so=(()=>{class n{constructor(t,i,o,r,c,l,f){this.fb=t,this._cfRegister=i,this.router=o,this._mobileDetectService=r,this._cdr=c,this._modal=l,this._bottomSheetService=f,this.currentStep=L.INFO_FLIGHT,this.STEP_PAGE=L,this.isMobile=!1,this.stepList=ro,this.isLoading=!1,this.checkValidStepInfoFlight=(v,g,T,A)=>{var b,E;let y=!1;return"PRICE"===v.type?y=!(null!==(b=g.filter(Te=>Te.price))&&void 0!==b&&b.length)||y:"FARE"===v.type&&(y=!(null!=T&&T.length)||y),v.isTimeRange&&(y=!(null!==(E=null==A?void 0:A.filter(Te=>Te.isActive))&&void 0!==E&&E.length)||y),y},i.registerIcons([_.toh,_.NNX,_.rJw])}ngOnInit(){this.initCheckMobile(),this.initForm()}initForm(){this.form=this.fb.group({specifyFareClassList:this.fb.array([]),specifyPriceList:this.fb.array([]),type:"FARE",endPoint:[null,s.kI.required],startPoint:[null,s.kI.required],toDate:[C().toDate(),s.kI.required],fromDate:[C().toDate(),s.kI.required],isTimeRange:!1,departureTime:this.fb.array([]),distributionChannel:["B2B_GMBR;B2C_GMBR",s.kI.required]}),co.forEach(t=>{this.initDataPriceList(t)}),lo.forEach(t=>{this.initDepartureTime(t)})}initDataPriceList(t){const i=this.fb.group({name:null,id:null,price:null,image:null});i.patchValue(t),this.specifyPriceList.push(i)}initDepartureTime(t){const i=this.fb.group({name:null,code:null,start:null,end:null,isActive:!1,disable:!1,startTime:null,endTime:null,totalAvailable:0});i.patchValue(t),this.departureTimeList.push(i)}get specifyPriceList(){return this.form.get("specifyPriceList")}get departureTimeList(){return this.form.get("departureTime")}initCheckMobile(){this._mobileDetectService.mobileSubject.subscribe(t=>{this.isMobile=t})}onMoveToHuntTicketAdvancedList(){this.router.navigate(["admin/hunt-ticket-advanced-list"])}get specifyFareClassList(){return this.form.get("specifyFareClassList")}onSubmit(){this.form.invalid||(this.isMobile?this._bottomSheetService.open(Fe,{headerTitle:"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",containerFullHeigh:!0,data:{rawData:this.form.value,selectedFaresTree:this.selectedFaresTree}}):this._modal.open(Fe,{data:this.form.value,selectedFaresTree:this.selectedFaresTree}).afterClosed$.subscribe({next:i=>{}}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(_.KNP),e.Y36(q.F0),e.Y36(Ue.L),e.Y36(e.sBO),e.Y36(S.oE),e.Y36(D.a2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hunt-ticket-advanced-add"]],standalone:!0,features:[e.jDz],decls:33,vars:8,consts:[[1,"p-6","h-full","block","w-full","md:p-3",3,"formGroup"],[1,"flex","gap-x-2","mb-4","justify-start","items-center"],[1,"text-body-md-short","text-neutral-gray-6","cursor-pointer",3,"click"],["icon","chevron_right","size","small",1,"text-neutral-gray-4"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","flex-col","h-full","w-full","justify-center","items-center"],[1,"w-[70%]","md:w-full"],[1,"flex","justify-between","items-center","mb-4","md:hidden"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"flex","flex-col","w-full","justify-center"],[1,"block","gap-y-4","mb-2","md:mb-12"],[1,"flex","rounded","w-full","bg-white","justify-between","shadow-cf-md","mb-8","p-4","items-center"],[1,"flex","justify-start","gap-x-0","items-center"],[1,"h-full","flex","flex-col","justify-center","items-end"],["src","assets/images/booking-hunter-banner.svg",1,"w-full","object-contain"],[1,"h-full","p-4","items-start"],[1,"text-express-md","text-neutral-black"],[1,"flex","flex-col","gap-3","bg-white","rounded","shadow-cf-md","gap-y-3","p-6","md:px-3"],[1,"flex","justify-center","items-center","md:items-center","w-[80%]","mx-auto"],[3,"steps","stepCur"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange",4,"ngIf"],[3,"form","isMobile",4,"ngIf"],["class","w-full py-4",4,"ngIf"],["class","bg-neutral-white pt-3 pr-4 pb-3 pl-4 flex-row items-end justify-end w-full fixed bottom-0 hidden md:flex md:justify-between",4,"ngIf"],[4,"ngIf"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange"],[3,"form","isMobile"],[1,"w-full","py-4"],["cf-button","","size","medium","type","secondary","class","bg-white float-left",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center float-right",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left",3,"click"],["cfHeadIcon","","icon","chevron_left","size","small",1,"mr-2"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"bg-neutral-white","pt-3","pr-4","pb-3","pl-4","flex-row","items-end","justify-end","w-full","fixed","bottom-0","hidden","md:flex","md:justify-between"],[1,"flex","flex-row","items-center","justify-start","shrink-0","relative","md:w-full"],["cf-button","","size","medium","type","secondary","class","bg-white float-left justify-center md:w-full",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center ml-2 md:w-full",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left","justify-center","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return i.onMoveToHuntTicketAdvancedList()}),e._uU(3," S\u0103n v\xe9 t\u1ebft "),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"div",4),e._uU(6," T\u1ea1o y\xeau c\u1ea7u s\u0103n "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.TgZ(12,"div",10),e._uU(13," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"div"),e._UZ(20,"img",16),e.qZA()(),e.TgZ(21,"div",17)(22,"div",18),e._uU(23," M\u1ed9t c\xe1ch \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng \u0111\u1eb7t ch\u1ed7 nh\u1eefng chuy\u1ebfn bay v\xe0o d\u1ecbp l\u1ec5! "),e.qZA()()()(),e.TgZ(24,"div",19)(25,"div",20),e._UZ(26,"cheapflightclient-step-ct",21),e.qZA(),e.TgZ(27,"div"),e.YNc(28,Vi,1,3,"cheapflightclient-add-info-flight-step",22),e.YNc(29,Ki,1,2,"cheapflightclient-add-config-flight-step",23),e.qZA()(),e.YNc(30,eo,4,3,"div",24),e.qZA()()(),e.YNc(31,oo,5,3,"div",25),e.qZA()(),e.YNc(32,ao,1,0,"cf-spinner",26)),2&t&&(e.Q6J("formGroup",i.form),e.xp6(26),e.Q6J("steps",i.stepList)("stepCur",i.currentStep),e.xp6(2),e.Q6J("ngIf",i.currentStep===i.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",i.currentStep===i.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[p.ez,p.O5,h.N8,h.Xq,_.AxE,_.Sm8,an,Z.OR,s.UX,s._Y,s.JL,s.sg,Li,zi,D.DW,re.q],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),n})();var uo=m(81372),U=m(53820),ge=m(38514),he=m(77579),po=m(63900),_o=m(82722),fo=m(78372),Oe=m(62163);function mo(n,a){1&n&&(e.TgZ(0,"div",46),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function go(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(4);return e.KtG(c.onRemoveAirlineOption(o,r))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function ho(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3).$implicit,l=e.oxw(4);return e.KtG(l.onRemoveFareTypeOption(o,r,c))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",i.name+"-"+t.name,"")}}function vo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(5).$implicit,l=e.oxw(4);return e.KtG(l.onRemoveFareOption(o,r,c))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+i.name+"-"+t.name,"")}}function xo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,vo,3,1,"div",50),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function To(n,a){if(1&n&&(e.ynx(0),e.YNc(1,xo,2,1,"ng-container",43),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function yo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ho,3,1,"div",47),e.YNc(2,To,2,1,"ng-container",6),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Co(n,a){if(1&n&&(e.ynx(0),e.YNc(1,yo,3,2,"ng-container",43),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Eo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Co,2,1,"ng-container",43),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ao(n,a){if(1&n&&(e.ynx(0),e.YNc(1,go,3,1,"div",47),e.YNc(2,Eo,2,1,"ng-container",6),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function bo(n,a){1&n&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function Zo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",39),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",41),e.YNc(5,mo,2,0,"div",42),e.YNc(6,Ao,3,2,"ng-container",43),e.qZA(),e._UZ(7,"cf-icon",44),e.qZA(),e.YNc(8,bo,3,0,"div",45),e.ALo(9,"mapper"),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(5),e.Q6J("ngIf",!(t.formGroup.value.specifyFareClassList&&(null==t.formGroup.value.specifyFareClassList?null:t.formGroup.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.formGroup.value.type,t.specifyFareClassList.touched))}}function Fo(n,a){1&n&&(e.TgZ(0,"label",53),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&n&&e.Q6J("CfRequired",!1)}function ko(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",56)(2,"div",57),e._UZ(3,"img",58),e.TgZ(4,"span",59),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",61),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.index;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function Do(n,a){1&n&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function So(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54),e.ynx(2,55),e.YNc(3,ko,9,6,"ng-container",43),e.BQk(),e.YNc(4,Do,3,0,"div",45),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched))}}function wo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",10)(1,"div")(2,"div",11)(3,"div",12),e._UZ(4,"cf-icon",13),e.TgZ(5,"span",14),e._uU(6,"M\xe3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA()()(),e.TgZ(7,"div",15),e._uU(8),e.qZA()(),e.TgZ(9,"div",16)(10,"div",17)(11,"div",18),e._uU(12),e.qZA(),e.TgZ(13,"div",19),e._uU(14),e.qZA()(),e.TgZ(15,"div",20)(16,"div",21)(17,"div",22),e._UZ(18,"div",23)(19,"div",24),e.qZA()(),e.TgZ(20,"div"),e._UZ(21,"cf-icon",25),e.qZA()(),e.TgZ(22,"div",17)(23,"div",18),e._uU(24),e.qZA(),e.TgZ(25,"div",19),e._uU(26),e.qZA()()(),e._UZ(27,"div",26),e.TgZ(28,"div",11)(29,"div",27),e._UZ(30,"cf-icon",28),e.TgZ(31,"div",29)(32,"span"),e._uU(33,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(34,"div",30),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onShowFareOptionChange(o))}),e._UZ(35,"cf-switch",31),e.qZA()(),e.YNc(36,Zo,10,8,"div",32),e._UZ(37,"div",26),e.TgZ(38,"div",33)(39,"div",11)(40,"div",27),e._UZ(41,"cf-icon",34),e.TgZ(42,"div",29)(43,"span"),e._uU(44,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(45,"div",30),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onPriceOptionChange(o))}),e._UZ(46,"cf-switch",31),e.qZA()(),e.YNc(47,Fo,2,1,"label",35),e.ALo(48,"mapper"),e.qZA(),e.YNc(49,So,6,7,"ng-container",6),e.TgZ(50,"div",33)(51,"cf-select",36)(52,"label",37),e._UZ(53,"cf-icon",38),e.TgZ(54,"span"),e._uU(55,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.formGroup),e.xp6(8),e.Oqu(null==t.configOrderData?null:t.configOrderData.code),e.xp6(4),e.AsE(" ",t.configOrderData?t.configOrderData.journeys[0].startPointName:""," (",t.configOrderData?t.configOrderData.journeys[0].startPoint:"",") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].departTime),e.xp6(10),e.AsE(" ",t.configOrderData.journeys[0].endPointName," (",t.configOrderData.journeys[0].endPoint,") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].arrivalTime),e.xp6(9),e.Q6J("checked","FARE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.formGroup.value.type),e.xp6(10),e.Q6J("checked","PRICE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(48,17,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===t.formGroup.value.type),e.xp6(2),e.Q6J("status",t.formGroup.controls.distributionChannel.invalid&&(t.formGroup.controls.distributionChannel.dirty||t.formGroup.controls.distributionChannel.touched)?"error":"default")("ngClass",t.isMobile?"pointer-events-none":"pointer-events-auto")("data",t.distributionChannelOptions)("allowSearch",!1)}}function Io(n,a){if(1&n&&(e.TgZ(0,"span",99),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function qo(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Uo(n,a){if(1&n&&(e.TgZ(0,"div",101)(1,"div",12),e._UZ(2,"img",102),e.TgZ(3,"div",96),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function Mo(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Uo,7,8,"div",100),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function Oo(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Mo,2,1,"div",43),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.rawData.specifyPriceList)}}function No(n,a){1&n&&(e.TgZ(0,"div",96)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function Bo(n,a){if(1&n&&(e.TgZ(0,"div",101)(1,"div",12),e._UZ(2,"img",102),e.TgZ(3,"div",96),e._uU(4),e.TgZ(5,"span",105),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function Jo(n,a){if(1&n&&(e.TgZ(0,"div",110),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Po(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Jo,2,1,"div",109),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Ho(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Po,2,1,"ng-container",43),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const Qo=function(n){return{"w-full":n}};function Lo(n,a){if(1&n&&(e.TgZ(0,"div",107)(1,"div",108),e._uU(2),e.qZA(),e.YNc(3,Ho,2,1,"ng-container",6),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,Qo,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Yo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Lo,4,5,"div",106),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Ro(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Yo,2,1,"ng-container",43),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function jo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ro,2,1,"ng-container",43),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Go(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Bo,7,3,"div",100),e.TgZ(2,"div",104),e.YNc(3,jo,2,1,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function zo(n,a){if(1&n&&(e.TgZ(0,"div",103),e.YNc(1,Go,4,2,"ng-container",43),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function Vo(n,a){if(1&n&&(e.TgZ(0,"div",62)(1,"div",63)(2,"div",64),e._UZ(3,"cf-icon",28),e.TgZ(4,"span",14),e._uU(5,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(6,"div",65)(7,"div",66)(8,"div",67)(9,"div")(10,"div",68)(11,"div",69)(12,"span"),e._uU(13),e.ALo(14,"mapper"),e.qZA()(),e.TgZ(15,"div",70)(16,"div",71),e._uU(17,"Bay th\u1eb3ng"),e.qZA(),e.TgZ(18,"div",22),e._UZ(19,"div",72)(20,"div",73)(21,"cf-icon",74),e.qZA()()()(),e.TgZ(22,"div")(23,"div",75)(24,"span"),e._uU(25),e.ALo(26,"mapper"),e.qZA()()()(),e.TgZ(27,"div",76)(28,"div",77),e._UZ(29,"cf-icon",78),e.TgZ(30,"div",79),e._uU(31,"T\u1eeb "),e.TgZ(32,"span",80),e._uU(33),e.ALo(34,"date"),e.qZA()()(),e.TgZ(35,"div",77)(36,"div",79),e._uU(37,"\u0110\u1ebfn "),e.TgZ(38,"span",80),e._uU(39),e.ALo(40,"date"),e.qZA()()()()(),e._UZ(41,"div",81),e.TgZ(42,"div",82)(43,"div",83)(44,"div",59)(45,"span"),e._uU(46,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e._UZ(47,"div",84),e.qZA(),e._UZ(48,"div",81),e.TgZ(49,"div",85)(50,"div",86)(51,"div",87)(52,"span"),e._uU(53,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(54,"div",88),e.YNc(55,Io,2,1,"span",89),e.ALo(56,"mapper"),e.qZA()(),e._UZ(57,"div",81),e.TgZ(58,"div",85)(59,"div",86)(60,"div",87)(61,"span"),e._uU(62,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(63,"div",90),e.YNc(64,qo,2,0,"span",6),e.YNc(65,Oo,2,1,"div",6),e.qZA()(),e._UZ(66,"div",81),e.TgZ(67,"div",85)(68,"div",86)(69,"div",59)(70,"span"),e._uU(71,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(72,"div",84),e.YNc(73,No,3,0,"div",91),e.YNc(74,zo,2,1,"div",92),e.qZA()(),e._UZ(75,"div",81),e.TgZ(76,"div",82)(77,"div",83)(78,"div",59)(79,"span"),e._uU(80,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()(),e._UZ(81,"div",84),e.qZA()()(),e.TgZ(82,"div",63)(83,"div",93),e._UZ(84,"cf-icon",94),e.TgZ(85,"span",14),e._uU(86,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(87,"div",95),e._UZ(88,"cf-icon",34),e.TgZ(89,"div")(90,"span",96),e._uU(91,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(92," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(93,"div",95),e._UZ(94,"cf-icon",97),e.TgZ(95,"div",96),e._uU(96,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(97,"span",98),e._uU(98,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(99," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(13),e.hij("",e.xi3(14,9,t.rawData.startPoint,t.viewFly)," "),e.xp6(12),e.hij(" ",e.xi3(26,12,t.rawData.endPoint,t.viewFly)," "),e.xp6(8),e.Oqu(e.xi3(34,15,t.rawData.toDate,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(40,18,t.rawData.fromDate,"dd/MM/yyyy")),e.xp6(16),e.Q6J("ngForOf",e.xi3(56,21,t.rawData.departureTime,t.viewDepartureTime)),e.xp6(9),e.Q6J("ngIf","PRICE"!==t.rawData.type),e.xp6(1),e.Q6J("ngIf","PRICE"===t.rawData.type),e.xp6(8),e.Q6J("ngIf","FARE"!==t.rawData.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.rawData.type)}}function Ko(n,a){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,wo,56,22,"form",8),e.YNc(2,Vo,100,24,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function $o(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",115),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.close())}),e._uU(1," \u0110\xf3ng "),e.qZA()}}function Xo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",116),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.INFO_FLIGHT))}),e.TgZ(1,"span"),e._uU(2,"C\u1eadp nh\u1eadt"),e.qZA(),e._UZ(3,"cf-icon",117),e.qZA()}}function Wo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",115),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.CONFIG_HUNT))}),e._UZ(1,"cf-icon",118),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function ea(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",116),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(3,"cf-icon",117),e.qZA()}}function ta(n,a){if(1&n&&(e.TgZ(0,"div",111)(1,"div",112),e.YNc(2,$o,2,0,"button",113),e.YNc(3,Xo,4,0,"button",114),e.YNc(4,Wo,3,0,"button",113),e.YNc(5,ea,4,0,"button",114),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function na(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",119)(2,"ticket-item-skeleton",119)(3,"ticket-item-skeleton",119),e.qZA())}function ia(n,a){1&n&&e._UZ(0,"cf-spinner")}const aa=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}];var K=(()=>{return(n=K||(K={})).INFO_FLIGHT="INFO_FLIGHT",n.CONFIG_HUNT="CONFIG_HUNT",K;var n})();let ve=(()=>{class n{constructor(t,i,o,r,c,l,f,v,g,T,A){this.ref=t,this.cfIconRegister=i,this._fb=o,this._locationDataService=r,this._huntTicketAdvancedService=c,this._bookingHunterService=l,this._modal=f,this._flightDataService=v,this._bottomSheetService=g,this._cdr=T,this._router=A,this.title="Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",this.isLoading=!1,this.isSpinning=!1,this.STEP_PAGE=K,this.currentStep=K.CONFIG_HUNT,this.dataFlight=(0,e.f3M)(z._).getAllOption(),this.hiddenPax=!1,this.distributionChannelOptions=[{value:"B2B_GMBR;B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{value:"B2B_GMBR",name:"Flychills"},{value:"B2C_GMBR",name:"GMBR"}],this.isMobile=!1,this.checkInvalidField=(b,E,y)=>E&&!b.length&&y,this.viewDepartureTime=b=>b.filter(E=>E.isActive),this.viewFly=b=>{const E=this.dataFlight.find(y=>y.Code===b);return`${null==E?void 0:E.CityName} (${b})`},this.viewDistributionChannel=b=>{var E;return(null===(E=this.distributionChannelOptions.find(y=>y.value===b))||void 0===E?void 0:E.name)||""},i.registerIcons([_.PcQ,_.rJw]),t&&(this.orderId=t.data.orderId)}ngOnInit(){this.initFormGroup(),this.orderId&&this.getCurrentConfigOrder()}initFormGroup(){this.formGroup=this._fb.group({distributionChannel:[this.distributionChannelOptions[0].value,s.kI.required],specifyFareClassList:this._fb.array([]),specifyPriceList:this._fb.array([]),type:[Oe.$.FARE]}),aa.forEach(t=>{this.initDataPriceList(t)})}initDataPriceList(t){const i=this._fb.group({name:null,id:null,price:null,image:null});i.patchValue(t),this.specifyPriceList.push(i)}getCurrentConfigOrder(){this.isLoading=!0,this._huntTicketAdvancedService.getCurrentConfigOrder(this.orderId).pipe((0,M.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var i,o,r,c;if(console.log(t),"OK"===t.status){this.configOrderData={orderId:t.data.orderId,canUpdate:t.data.canUpdate,code:t.data.code,notifBeforExpire:t.data.advanceSetting.notifBeforExpire,timeExecute:t.data.advanceSetting.timeExecute,monitorType:null===(i=t.data.huntFareConditions)||void 0===i?void 0:i.type,specifyPriceList:(null===(r=null===(o=t.data.huntFareConditions)||void 0===o?void 0:o.specifyPriceList)||void 0===r?void 0:r.filter(f=>f.targetPrice))||[],passengers:[],journeys:t.data.ticketInfo.journeys.map(f=>({departTime:C(new Date(1e3*f.rangeDateTime.fromDate)).format("DD/MM/YYYY"),arrivalTime:C(new Date(1e3*f.rangeDateTime.toDate)).format("DD/MM/YYYY"),startPoint:f.startPoint,startPointName:this._locationDataService.getCityNameByCode(f.startPoint),endPoint:f.endPoint,endPointName:this._locationDataService.getCityNameByCode(f.endPoint),leg:f.leg,rangeTime:f.rangeTime}))},this.formGroup.patchValue({type:this.configOrderData.monitorType||Oe.$.FARE});const l=(null===(c=t.data.huntFareConditions.specifyFareClassList)||void 0===c?void 0:c.map(f=>f.fareClass.split(";")).reduce((f,v)=>[...f,...v]))||[];this.loadFareOptions$().subscribe({next:f=>{this.selectedFaresTree=f,this.selectedFaresTree.forEach(v=>{v.childItems.forEach(g=>{g.childItems.forEach(T=>{T.childItems.forEach(A=>{l.includes(A.code)&&(A.isActive=!0)})})}),this.standardizeAirlineOptionSelected(v)})},error:f=>{console.log(f)}})}},error:()=>{}})}standardizeAirlineOptionSelected(t){let i=!1;t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.isActive=r.childItems.map(c=>c.isActive).reduce((c,l)=>c||l,!1),r.totalSelectedFare=r.childItems.filter(c=>c.isActive).length,r.isActive&&(i=!0)})}),t.isActive=i,t.totalSelectedFare=t.childItems.reduce((o,r)=>o+r.childItems.map(c=>c.childItems.filter(l=>l.isActive).length).reduce((c,l)=>c+l),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}countAirlineTotalFare(t){var i;let o=0;return null===(i=t.cabin)||void 0===i||i.forEach(r=>{var c;null===(c=r.fareType)||void 0===c||c.forEach(l=>{o+=l.fareClass.length||0})}),o}formatAirlineFareOptions(t){return t.map(i=>{var o;return{name:this._flightDataService.getAirlineNameByCode(null===(o=i.airline)||void 0===o?void 0:o.toUpperCase()),code:i.airline,icon:this._flightDataService.getAirlineIconByCode(i.airline),isActive:!1,isDisable:!1,totalFare:this.countAirlineTotalFare(i),childItems:i.cabin.map(r=>({code:r.code,name:r.name,isActive:!1,isDisable:!1,childItems:r.fareType.map(c=>{var l;return{code:c.code,name:c.description,isActive:!1,isDisable:!1,totalFare:(null===(l=c.fareClass)||void 0===l?void 0:l.length)||0,childItems:c.fareClass.map(f=>({code:f.code,name:f.name,isActive:!1,childItems:[],isDisable:!1}))}})}))}})}loadFareOptions$(){return this._bookingHunterService.getLstAirlineFareoptions().pipe((0,O.U)(t=>this.formatAirlineFareOptions(t.data)))}openFareOptions(){this.loadFareOptions$().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(we,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(Ie,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var i;this.specifyFareClassList.clear();for(const o of(n=>n.map(a=>({airline:a.code,fareClass:a.childItems.map(t=>t.childItems.map(i=>i.childItems.filter(o=>o.isActive)).reduce((i,o)=>[...i,...o.map(r=>r.code)],[])).reduce((t,i)=>[...t,...i],[])})))(t))null!==(i=o.fareClass)&&void 0!==i&&i.length&&this.addFareClass(o);this._cdr.markForCheck()}addFareClass(t){var i;const o=this._fb.group({airline:null,fareClass:null});o.patchValue(t),null===(i=this.specifyFareClassList)||void 0===i||i.push(o)}onRemoveAirlineOption(t,i){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(o=>{o.childItems.forEach(r=>{r.childItems.forEach(c=>c.isActive=!1)})})}onRemoveFareOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1}onRemoveFareTypeOption(t,i,o){t.preventDefault(),t.stopPropagation(),i.isActive=!1,i.childItems.forEach(r=>{r.isActive=!1})}onShowFareOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(i=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}get specifyPriceList(){return this.formGroup.get("specifyPriceList")}get specifyFareClassList(){return this.formGroup.get("specifyFareClassList")}onPriceOptionChange(t){var i;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(i=this.specifyFareClassList.value)&&void 0!==i&&i.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onChangeStep(t){this.currentStep=t,t===K.CONFIG_HUNT&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",this.progressDateAfterSubmit())}progressDateAfterSubmit(){const t=this.formGroup.value;this.dataFormSubmit={conditions:{specifyPriceList:"PRICE"===t.type?t.specifyPriceList.filter(i=>i.price).map(({id:i,price:o})=>({airline:i,targetPrice:o})):[],specifyFareClassList:"FARE"===t.type?t.specifyFareClassList.map(({airline:i,fareClass:o})=>({airline:i,fareClass:o.join(";")})):[],type:t.type},advanceSetting:{timeExecute:this.configOrderData.timeExecute,notifBeforExpire:this.configOrderData.notifBeforExpire},distributionChannel:t.distributionChannel}}onSubmit(){this.isSpinning=!0,this._huntTicketAdvancedService.updateConfigOrder({advanceSetting:this.dataFormSubmit.advanceSetting,conditions:{specifyFareClassList:this.dataFormSubmit.conditions.specifyFareClassList,specifyPriceList:this.dataFormSubmit.conditions.specifyPriceList,type:this.dataFormSubmit.conditions.type},distributionChannel:this.dataFormSubmit.distributionChannel,orderId:this.orderId}).pipe((0,M.x)(()=>this.isSpinning=!0)).subscribe({next:i=>{console.log(i),"OK"===i.status?this.ref&&this.ref.close("OK"):this.ref&&this.ref.close("ERROR")},error:()=>{this.ref.close("ERROR")}})}close(){this.ref&&this.ref.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.gb,8),e.Y36(_.KNP),e.Y36(s.qu),e.Y36(z._),e.Y36(Ze),e.Y36(W.yL),e.Y36(S.oE),e.Y36(X.G),e.Y36(D.a2),e.Y36(e.sBO),e.Y36(q.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hunt-ticket-advanced-edit"]],standalone:!0,features:[e.jDz],decls:9,vars:5,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:hidden"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],["class","w-full h-full flex-1 overflow-auto",4,"ngIf"],["class","p-6",4,"ngIf"],[4,"ngIf"],[1,"w-full","h-full","flex-1","overflow-auto"],["class","p-6 w-ful h-full flex flex-col gap-y-6",3,"formGroup",4,"ngIf"],["class","flex flex-col gap-y-6 px-6 pt-6",4,"ngIf"],[1,"p-6","w-ful","h-full","flex","flex-col","gap-y-6",3,"formGroup"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"text-heading-md","text-neutral-black"],[1,"rounded","bg-neutral-gray-1","py-3","flex","justify-center","items-center","gap-x-4"],[1,"flex","flex-col","gap-y-1"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,""],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],["data-id","distributionChannel","textField","name","valueField","value","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"status","ngClass","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],[1,"flex","flex-col","gap-y-6","px-6","pt-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"flex","flex-col","gap-3","bg-[#FAFAFA]","px-3","py-2"],[1,"flex","justify-center","gap-3","md:flex-col"],[1,"flex","items-center","gap-x-[20px]","md:flex-col","md:gap-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],[1,"items-center","w-[100px]","md:w-[75px]"],[1,"text-center","text-express-sm","text-neutral-gray-4"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]","cf-icon-small"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center","md:flex","md:flex-1","md:justify-center"],[1,"flex","justify-center","gap-x-1"],[1,"flex","items-center","gap-x-2","mb-2","justify-start"],["icon","calendar","size","small",1,"cf-icon-small"],[1,"text-body-md","text-neutral-black"],[1,"text-body-md","text-neutral-black","font-semibold"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"w-[60%]"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngFor","ngForOf"],[1,"w-[60%]","text-express-md"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],[1,"text-express-md"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"bg-neutral-gray-1","text-express-md","p-2"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],["icon","chevron_left","size","small",1,"mr-2.5"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.YNc(5,Ko,3,2,"div",4),e.YNc(6,ta,6,4,"div",5),e.YNc(7,na,4,0,"div",6),e.qZA(),e.YNc(8,ia,1,0,"cf-spinner",6)),2&t&&(e.xp6(3),e.Oqu(i.title),e.xp6(2),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isSpinning))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.JJ,p.uU,_.AxE,_.Sm8,B.IA,De.I,I.q,h.N8,h.Xq,re.q,oe.C,s.u5,s._Y,s.JJ,s.JL,s.UX,s.sg,s.u,s.x0,s.CE,x.j$,x.lt,D.DW,B.AS,Z.OR],encapsulation:2}),n})();var ra=m(46779),ca=m(77492);const la=function(n,a){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":a}},sa=function(n){return{"text-neutral-gray-6":n}},ua=function(n){return{"!bg-neutral-gray-6 text-express-sm":n}};function da(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33,34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.MAs(2),l=e.oxw();return e.KtG(l.onChangeTab(r,c))}),e.TgZ(3,"div",35),e._uU(4),e.TgZ(5,"cf-label",36),e._uU(6),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,la,t.active,!i)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,sa,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,ua,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}const se=function(){return[]};function pa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"cf-select",23),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.ownerId=o)})("selectedChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFilterChange())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,se))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function _a(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"booking-hunter-item",38),e.NdJ("actionChange",function(o){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onChange(o,c))}),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("pnrOrderData",t)("bookingHunterType",i.TYPE_ORDER.HUNT_NEW_TICKET_TET)}}function fa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onScrollDown())}),e.YNc(1,_a,2,2,"ng-container",11),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listPnrOrder)}}function ma(n,a){1&n&&(e.TgZ(0,"div")(1,"div",40)(2,"div"),e._UZ(3,"img",41),e.qZA(),e.TgZ(4,"div",42)(5,"div",43),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",44)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()()())}function ga(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onMoveToHuntTicketAdvancedAdd())}),e._UZ(1,"cf-icon",49),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o m\u1edbi ngay"),e.qZA()()}}function ha(n,a){if(1&n&&(e.TgZ(0,"div",40)(1,"div"),e._UZ(2,"img",45),e.qZA(),e.TgZ(3,"div",46)(4,"div",43),e._uU(5,"Ch\u01b0a c\xf3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(6,"div",44),e._uU(7," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 gi\xfap b\u1ea1n t\u1ef1 \u0111\u1ed9ng canh v\xe0 gi\u1eef ch\u1ed7 c\xe1c chuy\u1ebfn bay theo y\xeau c\u1ea7u m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng nh\u1ea5t! "),e.qZA()(),e.YNc(8,ga,4,0,"button",47),e.qZA()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.huntBookingFlag)}}function va(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ma,12,0,"div",31),e.YNc(2,ha,9,1,"div",39),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isEmptyOrder),e.xp6(1),e.Q6J("ngIf",t.isEmptyOrder)}}function xa(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",50)(2,"ticket-item-skeleton",50)(3,"ticket-item-skeleton",50),e.qZA())}function Ta(n,a){1&n&&e._UZ(0,"cf-spinner")}function ya(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.filterData.ownerId=o)}),e.TgZ(1,"label",56)(2,"span"),e._uU(3,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,se))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function Ca(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"cf-input-group",53),e._UZ(3,"cf-icon",14),e.TgZ(4,"input",15,16),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.searchText=o)}),e.qZA()(),e.YNc(6,ya,4,6,"cf-select",54),e.TgZ(7,"cf-select",55),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.airline=o)}),e.TgZ(8,"label",56)(9,"span"),e._uU(10,"H\xe3ng bay"),e.qZA()()(),e.TgZ(11,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.sortByType=o)}),e.TgZ(12,"label",56)(13,"span"),e._uU(14,"S\u1eafp x\u1ebfp"),e.qZA()()()(),e.TgZ(15,"div")(16,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchHuntLowFare())}),e._UZ(17,"cf-icon",59),e.TgZ(18,"div"),e._uU(19,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.filterData.searchText),e.xp6(2),e.Q6J("ngIf",t.viewListAgentForMonitorHuntFare),e.xp6(1),e.Q6J("status","default")("data",t.airlineOptions)("allowSearch",!1)("ngModel",t.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",t.orderbyOptions||e.DdM(11,se))("placeholder","")("allowSearch",!1)("ngModel",t.filterData.sortByType)}}let Ea=(()=>{class n{constructor(t,i,o,r,c,l,f,v,g,T,A,b,E,y){this._locationDataService=i,this._flightDataService=o,this._permissionService=r,this._modal=c,this._router=l,this._ticketLowFareService=f,this._authenticationService=v,this._toastService=g,this._mobileDetectService=T,this._requestDataService=A,this._bookingHunterService=b,this._eventLogService=E,this._bottomSheetService=y,this.isSpinner=!1,this.STATUS_ORDER=U.b,this.tabSelected="ALL",this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:U.b.IN_PROCESS,text:"\u0110ang ho\u1ea1t \u0111\u1ed9ng",counter:0,active:!1},{value:U.b.CANCEL,text:"\u0110\xe3 k\u1ebft th\xfac",counter:0,active:!1}],this.orderbyOptions=[{value:"TIME_UPDATE",text:"Ng\xe0y c\u1eadp nh\u1eadt"},{value:"TIME_CREATE",text:"Ng\xe0y y\xeau c\u1ea7u"},{value:"TIME_EXPIRE",text:"H\u1ea1n s\u0103n v\xe9"},{value:"AIRLINE",text:"H\xe3ng bay"},{value:"PNR",text:"M\xe3 \u0111\u1eb7t ch\u1ed7"}],this.airlineOptions=[{value:"ALL",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"VietJet Air"},{value:"QH",text:"Bamboo Airways"}],this.agentOptions=[{value:"",text:"T\u1ea5t c\u1ea3"}],this.searchValueChanged$=new he.x,this.currentTab="ALL",this.filterData={airline:"ALL",sortByType:"TIME_UPDATE",ownerId:"",searchText:"",offset:1,limit:10},this.listPnrOrder=[],this.viewListAgentForMonitorHuntFare=this._permissionService.hasPermission(V.or.ViewListAgentForMonitorHuntFare),this.TYPE_ORDER=ge.G,this.isSkeleton=!0,this.isEmptyOrder=!1,this.isEmptyResult=!1,this.totalItem=0,this.huntBookingFlag=this._permissionService.hasPermission(V.or.CanMonitorHuntFareTicket),this.unsubscribe$=new he.x,this.searchHuntLowFareResult$=new he.x,this.availableSlotData={available:!1,type:ge.G.HUNT_NEW_TICKET_TET,amount:0,currency:"VND"},t.registerIcons([_.TM4,_.oFb,_.xbi,_.D7,_.SK7]),this._eventLogService.captureOpenManageHuntFare()}ngOnInit(){this.viewListAgentForMonitorHuntFare&&this.getListAgentFilter(),this.searchHuntLowFareResult$.pipe((0,po.w)(t=>this._ticketLowFareService.getListPnrOrder(t).pipe((0,M.x)(()=>this.isSkeleton=!1))),(0,_o.R)(this.unsubscribe$)).subscribe({next:t=>{if("OK"===t.status){1===this.filterData.offset&&(this.listPnrOrder=[]);const i=this.listTab.find(r=>r.value===this.currentTab);i&&(i.counter=t.data.total);const o=t.data.listOrder.map(r=>{var c,l,f,v;const g=r.ticketInfo.passengers.find(A=>"ADT"===A.type.toUpperCase()),T=g?`${g.lastName} ${g.firstName}`:"";return{orderId:r.orderId,code:r.code,state:r.state,monitorType:r.monitorType,startPoint:r.ticketInfo.journeys[0].startPoint,startPointName:this._locationDataService.getCityNameByCode(r.ticketInfo.journeys[0].startPoint),endPoint:r.ticketInfo.journeys[0].endPoint,endPointName:this._locationDataService.getCityNameByCode(r.ticketInfo.journeys[0].endPoint),departTime:r.ticketInfo.journeys[0].departTime?C(r.ticketInfo.journeys[0].departTime).format("DD/MM/YYYY"):"",ownerName:(null===(c=r.ownerInfo)||void 0===c?void 0:c.name)||"",timeCreated:r.orderInfo.timeCreate?C(r.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpired:r.orderInfo.timeExpire?C(r.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdated:r.orderInfo.timeUpdate?C(r.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",targetPrice:(null===(l=r.orderInfo.priceMonitors[0])||void 0===l?void 0:l.targetPrice)||0,airline:r.ticketInfo.airline?r.ticketInfo.airline:"B\u1ea5t k\xec",canUpdate:r.canUpdate,countOfPax:[],representPax:{name:T,remainingPax:r.ticketInfo.passengers.length-1},fareInfo:{airline:(null===(f=r.fareInfo)||void 0===f?void 0:f.airline)||"",detectedPnr:(null===(v=r.fareInfo)||void 0===v?void 0:v.detectedPnr)||""},availableSlotInfo:{amountPerPax:r.availableSlotInfo.amountPerPax||0,currency:r.availableSlotInfo.currency||"",free:r.availableSlotInfo.free,percent:r.availableSlotInfo.percent||0,type:r.availableSlotInfo.type}}})||[];this.listPnrOrder=[...this.listPnrOrder,...o],this.totalItem=t.data.total,this.listPnrOrder.length?(this.isEmptyResult=!1,this.isEmptyOrder=!1):(this.isEmptyResult=!0,this.isEmptyOrder=t.data.empty)}else this.listPnrOrder=[]},error:()=>{this.listPnrOrder=[]}}),this.searchHuntLowFare(),this.searchValueChanged$.pipe((0,fo.b)(1e3)).subscribe(()=>{this.isEmptyResult=!0,this.searchHuntLowFare()})}onFilterChange(){this.isEmptyResult=!0,this.filterData.offset=1,this.searchHuntLowFare()}searchHuntLowFare(){this._mobileDetectService.isMobile()&&this.btsSearchMobile&&this.btsSearchMobile.dismiss(),this.isSkeleton=!0;const t=this.getReqSearch();this.searchHuntLowFareResult$.next(t)}getReqSearch(){let t={getAllState:!1,listState:[],searchText:this.filterData.searchText,airline:this.filterData.airline,sortByType:this.filterData.sortByType,ownerId:this.filterData.ownerId||"",pageOffset:this.filterData.offset,pageSize:this.filterData.limit,type:ge.G.HUNT_NEW_TICKET_TET};switch(this.currentTab){case U.b.IN_PROCESS:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[U.b.CREATE,U.b.IN_PROCESS,U.b.IN_PROCESS_PRICE_UP]});break;case U.b.COMPLETED:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[U.b.COMPLETED]});break;case U.b.CANCEL:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[U.b.CANCEL,U.b.EXPIRED]});break;default:t=Object.assign(Object.assign({},t),{getAllState:!0,listState:[]})}return t}onMoveToHuntTicketAdvancedAdd(){this._router.navigate(["admin/hunt-ticket-advanced-add"])}getListAgentFilter(){this._ticketLowFareService.getAgentFilterOrder().subscribe({next:t=>{var i;if("OK"===t.status){const o=(null===(i=t.data)||void 0===i?void 0:i.map(r=>({value:r.id,text:r.username})))||[];this.agentOptions=[...this.agentOptions,...o]}}})}onChangeTab(t,i){t.value!==this.currentTab&&(i.scrollIntoView({behavior:"smooth",inline:"center"}),this.listPnrOrder=[],this.filterData.offset=1,this.listTab.forEach(o=>o.active=!1),t.active=!0,this.currentTab=t.value,this.searchHuntLowFare())}onScrollDown(){this.filterData.offset*this.filterData.limit<this.totalItem&&(this.filterData.offset+=1,this.searchHuntLowFare())}onChange(t,i){switch(t){case"DETAIL":this.onShowBookingHunterDetail(i.orderId);break;case"EDIT":this.onEditBookingHunter(i.orderId);break;case"CANCEL":this.onCancelPnrOrder(i.orderId,i.code);break;case"BOOKING_DETAIL":this.onBookingDetail(i.fareInfo.airline,i.fareInfo.detectedPnr);break;case"CREATE_NEW":this._router.navigate(["admin/hunt-ticket-advanced-add"],{state:{isEntryPointManageOrder:!0}})}}onBookingDetail(t,i){this._router.navigate([`admin/booking-detail/${t}/${i}`])}onShowBookingHunterDetail(t,i=!1,o=!1){this._eventLogService.captureOpenDetailHuntFare({source:0}),this._router.navigate([`admin/booking-hunter-detail/${t}`],{state:{isUpdated:i,isUpdatedFail:o}})}onEditBookingHunter(t){if(this._mobileDetectService.isMobile()){const i=this._bottomSheetService.open(ve,{containerFullHeigh:!0,headerTitle:"Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",leftButtonIcon:"",rightButtonIcon:"close",data:{orderId:t}});i.containerInstance._rightButtonClick.subscribe(()=>{i.dismiss()}),i.afterDismissed().subscribe(o=>{"OK"===o&&this.onShowBookingHunterDetail(t,!0,!1),"ERROR"===o&&this.onShowBookingHunterDetail(t,!1,!0)})}else this._modal.open(ve,{orderId:t}).afterClosed$.subscribe({next:o=>{"OK"===o.data&&(this.onShowBookingHunterDetail(t,!0,!1),this.listPnrOrder.forEach(r=>{r.orderId===t&&(r.canUpdate=o.data.canUpdate)})),"ERROR"===o.data&&this.onShowBookingHunterDetail(t,!1,!0)}})}onCancelPnrOrder(t,i){this._eventLogService.captureCancelHuntFare({source:0}),this._mobileDetectService.isMobile()?(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,M.x)(()=>this.isSpinner=!1)).subscribe({next:o=>{"OK"===o.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${i} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${i} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}})):this._modal.open(Z.V0,{title:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${i}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,M.x)(()=>this.isSpinner=!1)).subscribe({next:c=>{"OK"===c.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${i} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${i} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}}))}})}openBottomSheet(t){const i=this._bottomSheetService.open(t,{headerTitle:"",rightButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4"});i.containerInstance._rightButtonClick.subscribe(o=>{i.dismiss()})}openSearchBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._leftButtonClick.subscribe(i=>{this.btsSearchMobile.dismiss()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(z._),e.Y36(X.G),e.Y36(V.$A),e.Y36(S.oE),e.Y36(q.F0),e.Y36(fe.s),e.Y36(ra.r),e.Y36($.BX),e.Y36(Ue.L),e.Y36(W.FH),e.Y36(W.yL),e.Y36(ca.x),e.Y36(D.a2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hunt-ticket-advanced-list"]],standalone:!0,features:[e.jDz],decls:46,vars:19,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4","md:text-body-sm"],[1,"flex","justify-between","items-center","gap-x-6"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"!w-[350px]","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange"],["tableSearchInput",""],[1,"hidden","md:block","md:!w-full","md:!max-w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange","focus"],[1,"flex","gap-x-4","items-center","md:hidden"],["class","flex items-center gap-x-2.5",4,"ngIf"],[1,"flex","items-center","gap-x-2.5"],[1,"text-express-md","whitespace-nowrap"],["textField","text","valueField","value",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["class","flex flex-col gap-y-[30px] md:gap-y-4","infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled",4,"ngIf"],[4,"ngIf"],["bottomSheetSearch",""],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[3,"pnrOrderData","bookingHunterType","actionChange"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[120px] flex flex-col justify-center\n              items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[120px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],["src","assets/images/add-task.svg","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","gap-y-2","justify-between","items-center"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],["icon","plus","size","small",1,"mr-2.5"],[1,"rounded","border","border-neutral-gray-1"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"!max-w-none","w-full"],["class","!max-w-none w-full","textField","text","valueField","value",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange",4,"ngIf"],["textField","text","valueField","value","size","medium","placeholder","",1,"!max-w-none","w-full",3,"status","data","allowSearch","ngModel","ngModelChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"S\u0103n v\xe9 T\u1ebft 2025"),e.qZA(),e.TgZ(6,"div",5),e._uU(7," M\u1ed9t c\xe1ch \u0111\u1ec3 \u0111\u1eb7t ch\u1ed7 t\u1ef1 \u0111\u1ed9ng ng\xe0y l\u1ec5! "),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return i.onMoveToHuntTicketAdvancedAdd()}),e.TgZ(10,"span"),e._uU(11,"T\u1ea1o s\u0103n v\xe9"),e.qZA(),e._UZ(12,"cf-icon",8),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10),e.YNc(15,da,7,13,"ng-container",11),e.qZA(),e.TgZ(16,"div",12)(17,"cf-input-group",13),e._UZ(18,"cf-icon",14),e.TgZ(19,"input",15,16),e.NdJ("ngModelChange",function(c){return i.filterData.searchText=c})("ngModelChange",function(c){return i.searchValueChanged$.next(c)}),e.qZA()(),e.TgZ(21,"cf-input-group",17),e._UZ(22,"cf-icon",14),e.TgZ(23,"input",18,16),e.NdJ("ngModelChange",function(c){return i.filterData.searchText=c})("focus",function(){e.CHM(o);const c=e.MAs(45);return e.KtG(i.openSearchBts(c))}),e.qZA()(),e.TgZ(25,"div",19),e.YNc(26,pa,4,6,"div",20),e.TgZ(27,"div",21)(28,"div",22),e._uU(29,"H\xe3ng bay:"),e.qZA(),e.TgZ(30,"cf-select",23),e.NdJ("ngModelChange",function(c){return i.filterData.airline=c})("selectedChange",function(){return i.onFilterChange()}),e.qZA()(),e.TgZ(31,"div",21)(32,"div",22),e._uU(33,"S\u1eafp x\u1ebfp:"),e.qZA(),e.TgZ(34,"cf-select",24),e.NdJ("ngModelChange",function(c){return i.filterData.sortByType=c})("selectedChange",function(){return i.onFilterChange()}),e.qZA()()()()()(),e.TgZ(35,"div",25)(36,"div",26)(37,"div",27)(38,"div",28)(39,"div",29),e.YNc(40,fa,2,7,"div",30),e.YNc(41,va,3,2,"div",31),e.qZA(),e.YNc(42,xa,4,0,"div",31),e.qZA()()()()(),e.YNc(43,Ta,1,0,"cf-spinner",31),e.YNc(44,Ca,20,12,"ng-template",null,32,e.W1O)}2&t&&(e.xp6(15),e.Q6J("ngForOf",i.listTab),e.xp6(4),e.Q6J("ngModel",i.filterData.searchText),e.xp6(4),e.Q6J("ngModel",i.filterData.searchText),e.xp6(3),e.Q6J("ngIf",i.viewListAgentForMonitorHuntFare),e.xp6(4),e.Q6J("status","default")("data",i.airlineOptions)("placeholder","")("allowSearch",!1)("ngModel",i.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",i.orderbyOptions||e.DdM(18,se))("placeholder","")("allowSearch",!1)("ngModel",i.filterData.sortByType),e.xp6(6),e.Q6J("ngIf",!i.isEmptyResult&&i.listPnrOrder.length),e.xp6(1),e.Q6J("ngIf",i.isEmptyResult&&!i.isSkeleton),e.xp6(1),e.Q6J("ngIf",i.isSkeleton),e.xp6(1),e.Q6J("ngIf",i.isSpinner))},dependencies:[p.ez,p.mk,p.sg,p.O5,s.u5,s.Fj,s.JJ,s.On,h.N8,h.Xq,s.UX,x.j$,x.ND,x.BN,_.AxE,_.Sm8,I.q,P.Rq,P.Ry,pe.b,B.IA,Z.OR,uo.xf],encapsulation:2}),n})();const Aa=function(n,a){return{"border-b-4 border-neutral-gray-4":n,"!pl-5":a}},ba=function(n){return{"text-neutral-gray-6":n}},Za=function(n){return{"!bg-neutral-gray-6 text-express-sm":n}};function Fa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTab(r))}),e.TgZ(2,"div",31),e._uU(3),e.TgZ(4,"cf-label",32),e._uU(5),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,Aa,t.active,!i)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ba,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,Za,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function ka(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"div",34)(3,"div",35)(4,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onConfirm(r))}),e._uU(5," Duy\u1ec7t "),e.qZA(),e.TgZ(6,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancelConfirm())}),e._uU(7," T\u1eeb ch\u1ed1i "),e.qZA()()(),e.TgZ(8,"div",38)(9,"div",39),e._UZ(10,"cf-icon",40),e.TgZ(11,"div"),e._uU(12),e.qZA(),e._UZ(13,"cf-icon",41),e.TgZ(14,"div"),e._uU(15),e.qZA()(),e.TgZ(16,"div",42)(17,"div",43)(18,"div",44),e._uU(19,"Ng\xe0y bay: "),e.qZA(),e.TgZ(20,"div",45),e._uU(21),e.qZA()(),e.TgZ(22,"div",43)(23,"div",44),e._uU(24,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(25,"div",45),e._uU(26),e.qZA()(),e.TgZ(27,"div",43)(28,"div",44),e._uU(29,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(30,"div",45),e._uU(31),e.qZA()(),e.TgZ(32,"div",43)(33,"div",44),e._uU(34,"M\xe3 AG: "),e.qZA(),e.TgZ(35,"div",45),e._uU(36),e.qZA()(),e.TgZ(37,"div",43)(38,"div",44),e._uU(39,"K\xeanh ph\xe2n ph\u1ed1i: "),e.qZA(),e.TgZ(40,"div",45),e._uU(41),e.qZA()(),e.TgZ(42,"div",43)(43,"div",44),e._uU(44,"T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(45,"div",45),e._uU(46),e.qZA()(),e.TgZ(47,"div",43)(48,"div",44),e._uU(49,"Th\u1eddi gian \u0111\u1eb7t v\xe9: "),e.qZA(),e.TgZ(50,"div",45),e._uU(51),e.qZA()()()()(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(12),e.AsE("",t.startPoint," (",t.endPoint,")"),e.xp6(3),e.AsE("",t.startCode," (",t.endCode,")"),e.xp6(6),e.Oqu(t.departureDate),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(t.timeHoldBooking),e.xp6(5),e.Oqu(t.agentName),e.xp6(5),e.Oqu(t.channel),e.xp6(5),e.Oqu(t.totalPayment),e.xp6(5),e.Oqu(t.timeBooked)}}function Da(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",46)(2,"ticket-item-skeleton",46)(3,"ticket-item-skeleton",46),e.qZA())}const xe=function(){return[]};let Sa=(()=>{class n{constructor(t,i,o,r,c){this._modal=i,this._fb=o,this._ticketLowFareService=r,this._toastService=c,this.airlineOptions=[],this.distributionChannelOptions=[],this.dateRangeStr="",this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:"FOR_APPROVAL",text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!1},{value:"APPROVAL",text:"\u0110\xe3 duy\u1ec7t",counter:0,active:!1},{value:"REJECT",text:"T\u1eeb ch\u1ed1i",counter:0,active:!1}],this.isSkeleton=!1,this.typeTimeOptions=[],this.listOfProducts=[],t.registerIcons([_.esH]),this.initListOptions(),this.initSearchForm(),this.initDateSearch()}ngOnInit(){this.onSearch()}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airline"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:k.h.B2B_GMBR,text:"Flychills"},{value:k.h.B2C_GMBR,text:"GMBR"}]}initDateSearch(){this.startDateOfMonth=new Date,this.endDateOfMonth=C(this.startDateOfMonth).add(30,"day").toDate();const t=(0,p.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),i=(0,p.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+i}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[k.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],searchText:[""],timeFilterType:["TIME_BOOKING"]})}onSearch(){var t;const i=this.searchForm.value;console.log(i);const o={airline:(null==i?void 0:i.airline)||"",channelDistribution:(null==i?void 0:i.distributionChannel)||"",startDate:null!=i&&i.fromDate?(0,p.p6)(null==i?void 0:i.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=i&&i.toDate?(0,p.p6)(null==i?void 0:i.toDate,"yyyy-MM-dd","vi-VN"):"",searchText:(null==i?void 0:i.searchText)||"",searchTextType:null,timeFilterType:(null==i?void 0:i.timeFilterType)||null,state:(null===(t=this.listTab.find(r=>r.active))||void 0===t?void 0:t.value)||""};this._ticketLowFareService.getTicketsPendingApproval(o).subscribe({next:r=>{"OK"===r.status?(console.log(r),this.listOfProducts=r.data.map(c=>({departureDate:C(c.departureDate).format("DD/MM/YYYY"),paxCount:c.adtCount+c.chdCount+c.infCount,timeHoldBooking:c.timeHoldBooking?C(c.timeHoldBooking).format("DD/MM/YYYY"):"-",agentName:(null==c?void 0:c.agentName)||"-",channel:(null==c?void 0:c.channel)||"-",totalPayment:(null==c?void 0:c.totalPayment)||0,timeBooked:c.timeBooked?C(1e3*c.timeBooked).format("DD/MM/YYYY"):"-",paymentCode:(null==c?void 0:c.paymentCode)||"-",paymentId:(null==c?void 0:c.paymentId)||"-",startCode:c.startPoint,startPoint:c.startPoint,endCode:c.endPoint,endPoint:c.endPoint}))):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})}})}onDateSelection(t,i,o,r){if(i.value||o.value)if(i.value&&!o.value&&t&&t.getTime()>=i.value.getTime()){o.setValue(t),r.close(),this.startDate=i.value;const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),i.setValue(t);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{i.setValue(t),o.setValue(null);const c=(0,p.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onSelectedTab(t){this.listTab.forEach(i=>i.active=!1),t.active=!0}onCancelConfirm(){this._modal.open(Z.V0,{title:"",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onConfirm(t){const i=this._modal.open(Z.V0,{title:"Duy\u1ec7t xu\u1ea5t",body:"Duy\u1ec7t xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"Duy\u1ec7t",cancelText:"\u0110\xf3ng"});i.afterClosed$.subscribe(o=>{o.data&&this._ticketLowFareService.approvalTicketPending({paymentCode:t.paymentCode,paymentId:t.paymentId}).subscribe({next:c=>{"OK"===c.status?(i.close(!0),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"\u0110\xe3 duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.KNP),e.Y36(S.oE),e.Y36(s.qu),e.Y36(fe.s),e.Y36($.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manage-approve-product"]],standalone:!0,features:[e.jDz],decls:41,vars:38,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo h\xe0nh tr\xecnh","autocomplete","off",3,"formControl"],["cf-button","","size","medium","type","secondary","color","primary-1",1,"justify-center","whitespace-nowrap",3,"click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small",1,"",3,"click"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","plane","size","small"],["icon","arrow_right","size","small"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Duy\u1ec7t xu\u1ea5t v\xe9"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,Fa,6,13,"ng-container",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"cf-select",9)(11,"label",10),e._uU(12," L\u1ecdc theo "),e.qZA()(),e.TgZ(13,"div",11)(14,"cf-input-group",12),e._UZ(15,"cf-icon",13),e.TgZ(16,"label",14),e._uU(17,"Th\u1eddi gian"),e.qZA(),e.TgZ(18,"input",15),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(20);return e.KtG(c.open())})("ngModelChange",function(c){return i.dateRangeStr=c}),e.qZA()(),e.TgZ(19,"input",16,17),e.NdJ("dateSelect",function(c){e.CHM(o);const l=e.MAs(20);return e.KtG(i.onDateSelection(c,i.searchForm.controls.fromDate,i.searchForm.controls.toDate,l))}),e.qZA()(),e.TgZ(21,"cf-select",18)(22,"label",10),e._uU(23," H\xe3ng bay "),e.qZA()(),e.TgZ(24,"cf-select",18)(25,"label",10),e._uU(26," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()(),e.TgZ(27,"div",8)(28,"cf-input-group",19),e._UZ(29,"cf-icon",20)(30,"input",21),e.qZA(),e.TgZ(31,"button",22),e.NdJ("click",function(){return i.onSearch()}),e._uU(32," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(33,"div",23)(34,"div",24)(35,"div",25)(36,"div",26)(37,"div",27)(38,"div",28),e.YNc(39,ka,52,11,"ng-container",6),e.qZA()(),e.YNc(40,Da,4,0,"div",29),e.qZA()()()()()}2&t&&(e.xp6(7),e.Q6J("ngForOf",i.listTab),e.xp6(3),e.Q6J("status","default")("data",i.typeTimeOptions||e.DdM(35,xe))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",i.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",i.startDate)("canReset",!1)("fromDate",i.searchForm.controls.fromDate.value)("toDate",i.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",i.airlineOptions||e.DdM(36,xe))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",i.distributionChannelOptions||e.DdM(37,xe))("placeholder","")("allowSearch",!0)("formControl",i.searchForm.controls.distributionChannel),e.xp6(6),e.Q6J("formControl",i.searchForm.controls.searchText),e.xp6(8),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",i.listOfProducts),e.xp6(1),e.Q6J("ngIf",i.isSkeleton))},dependencies:[p.ez,p.mk,p.sg,p.O5,pe.b,I.q,s.u5,s.Fj,s.JJ,s.On,s.UX,s.oH,h.N8,h.Xq,x.j$,x.ND,x.BN,_.AxE,_.Sm8,B.IA,P.Rq,P.Ry,G.Cs],encapsulation:2}),n})();function wa(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",59),e._uU(2),e.qZA(),e.TgZ(3,"td",60),e._uU(4),e.qZA(),e.TgZ(5,"td",61),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",61),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",62)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.hij("",t.name," "),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}const Ia=function(){return[]};function qa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"div",11),e._UZ(3,"div",12),e.TgZ(4,"div",13),e._uU(5,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(6,"div",14)(7,"div",15)(8,"div",16)(9,"div"),e._UZ(10,"img",17),e.qZA(),e.TgZ(11,"div",18)(12,"span",19),e._uU(13),e.qZA(),e.TgZ(14,"span",20),e._uU(15),e.qZA()(),e.TgZ(16,"div",21),e._uU(17),e.qZA()(),e._UZ(18,"div",22),e.TgZ(19,"div",23)(20,"div",24)(21,"span"),e._uU(22),e.qZA(),e._UZ(23,"cf-icon",25),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e.TgZ(26,"div",26),e._UZ(27,"span"),e.TgZ(28,"span",27),e._uU(29),e.ALo(30,"date"),e.qZA()()(),e._UZ(31,"div",22),e.TgZ(32,"div",28)(33,"div",29),e._uU(34,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(35,"div",30),e._uU(36),e.qZA()(),e._UZ(37,"div",22),e.TgZ(38,"div",28)(39,"div",29),e._uU(40,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(41,"div",31),e._UZ(42,"cf-icon",32),e.TgZ(43,"div",33)(44,"label",34),e._uU(45),e.qZA()()()()()(),e.TgZ(46,"div",35)(47,"div",36),e._UZ(48,"cf-icon",37),e._uU(49," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(50,"div",38)(51,"div")(52,"table",39)(53,"thead")(54,"tr",40)(55,"th",41),e._uU(56,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(57,"th",42),e._uU(58,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(59,"th",43),e._uU(60,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(61,"th",43),e._uU(62,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(63,"th",44),e._uU(64,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(65,"tbody"),e.YNc(66,wa,15,11,"tr",45),e.qZA()()(),e.TgZ(67,"div",46)(68,"div",47)(69,"div",48),e._uU(70,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(71,"div",49)(72,"span"),e._uU(73),e.ALo(74,"number"),e.qZA()()(),e.TgZ(75,"div",47)(76,"div",48),e._uU(77,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(78,"div",49),e._uU(79),e.ALo(80,"number"),e.qZA()(),e.TgZ(81,"div",47)(82,"div",48),e._uU(83,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(84,"div",50)(85,"span"),e._uU(86),e.ALo(87,"number"),e.qZA()()()()()()(),e.TgZ(88,"div")(89,"div",11),e._UZ(90,"div",12),e.TgZ(91,"div",13),e._uU(92,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(93,"div",51)(94,"div",52)(95,"div",53),e._uU(96,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(97,"div",54),e._uU(98),e.qZA()(),e.TgZ(99,"div",52)(100,"div",53),e._uU(101,"Ng\u01b0\u1eddi \u0111\u1eb7t"),e.qZA(),e.TgZ(102,"div",54),e._uU(103),e.qZA()(),e.TgZ(104,"cf-select",55)(105,"label",56),e._uU(106," Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()()(),e.TgZ(107,"div",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateProduct())}),e.TgZ(108,"button",58),e._uU(109," Ch\u1ec9nh s\u1eeda "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(10),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("",t.bookingDetail.airline," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq(" ",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(30,22,t.bookingDetail.startTime,"dd/MM/yyyy"),") "),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(7),e.hij(" ",e.lcZ(74,25,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij(" ",e.lcZ(80,27,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(87,29,t.priceDetail.totalPrice)," \u0111"),e.xp6(12),e.hij(" ",t.productDetail.statusDisplay," "),e.xp6(5),e.hij(" ",t.productDetail.sourceDisplay," "),e.xp6(1),e.Q6J("data",t.channelDistributionOption||e.DdM(31,Ia))("formControl",t.formGroup.controls.channelDistribution)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0)}}function Ua(n,a){1&n&&(e.TgZ(0,"div",63),e._UZ(1,"ticket-item-skeleton",64)(2,"ticket-item-skeleton",64)(3,"ticket-item-skeleton",64),e.qZA())}function Ma(n,a){1&n&&e._UZ(0,"cf-spinner")}let Oa=(()=>{class n{constructor(t,i,o,r,c){this._fb=t,this._route=i,this._flightDataService=o,this._inventoryService=r,this._toastService=c,this.isLoading=!1,this.isSpinning=!1,this.productId="",this.channelDistributionOption=[],this.productDetail={source:"",sourceDisplay:"",status:"",statusDisplay:""},this._route.params.subscribe(l=>{this.productId=l.id,this.getProductDetail()})}ngOnInit(){this.channelDistributionOption=[...Object.entries(k.h).map(([t,i])=>({text:t,value:i}))],this.initFormGroup()}initFormGroup(){this.formGroup=this._fb.group({channelDistribution:["",s.kI.required]})}getProductDetail(){this.isLoading=!0,this._inventoryService.getProductDetail(this.productId).pipe((0,M.x)(()=>this.isLoading=!1)).subscribe({next:t=>{console.log(t),this.productDetail={source:t.data.source,sourceDisplay:"MANUAL"===t.data.source?"Th\u1ee7 c\xf4ng":"H\u1ec7 th\u1ed1ng",status:t.data.state,statusDisplay:_e[t.data.state].name},this.formGroup.patchValue({channelDistribution:t.data.channelDistribution}),this.initBookingDetail(t.data.bookingInfo),this.initPriceDetail(t.data.bookingInfo)}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:new Date,endTime:new Date,statusText:"\u0110\xe3 gi\u1eef ch\u1ed7",flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(i=>({index:i.index,key:i.key,name:"",birthday:i.birthday,lastName:i.lastName,firstName:i.firstName,parentKey:i.parentKey,gender:i.genderEnum,type:i.type}))},console.log(this.bookingDetail)}initPriceDetail(t){const i=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.total,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:i.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))},console.log(this.priceDetail)}updateProduct(){if(this.formGroup.invalid)return;const i={channelDistribution:this.formGroup.value.channelDistribution,productId:this.productId,saleInfo:null};this.isSpinning=!0,this._inventoryService.updateProductDetail(i).pipe((0,M.x)(()=>this.isSpinning=!1)).subscribe({next:o=>{console.log(o),this._toastService.add("OK"===o.status?{severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",sticky:!1}:{severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(q.gz),e.Y36(X.G),e.Y36(ne),e.Y36($.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-product"]],standalone:!0,features:[e.jDz],decls:12,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[4,"ngIf"],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","items-end","gap-[10px]","p-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"min-w-[120px]","text-end","text-heading-md","text-primary-1-4"],[1,"grid","grid-cols-2","gap-4","bg-neutral-white","py-4","px-6"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-express-sm"],[1,"w-full","h-10","py-2.5","px-3","text-body-md","text-neutral-gray-6","rounded","border","border-neutral-gray-3","bg-neutral-gray-1","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"data","formControl","placeholder","allowSearch"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],[1,"flex","justify-end",3,"click"],["cf-button","",1,"justify-center"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"T\u1ed5ng kho"),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft h\xe0ng"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,qa,110,32,"div",7),e.YNc(10,Ua,4,0,"div",8),e.qZA()()(),e.YNc(11,Ma,1,0,"cf-spinner",9)),2&t&&(e.xp6(9),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isSpinning))},dependencies:[p.ez,p.sg,p.O5,p.JJ,p.uU,s.u5,s.JJ,s.UX,s.oH,_.AxE,_.Sm8,h.N8,h.Xq,B.IA,I.q,x.j$,oe.C,Z.OR],encapsulation:2}),n})();function Na(n,a){1&n&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"ticket-item-skeleton",16)(3,"ticket-item-skeleton",16)(4,"ticket-item-skeleton",16)(5,"ticket-item-skeleton",16),e.qZA()())}function Ba(n,a){1&n&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",22),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",24),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",25),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function Ja(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",28)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7!"),e.qZA()(),e.BQk())}function Pa(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Ha(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Qa(n,a){if(1&n&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",26),e.qZA(),e.YNc(6,Ja,8,0,"ng-container",27),e.YNc(7,Pa,6,0,"ng-container",27),e.YNc(8,Ha,6,0,"ng-container",27),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function La(n,a){1&n&&(e.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(7,"button",36),e._uU(8," Ch\u01b0a thanh to\xe1n "),e.qZA()(),e.TgZ(9,"div",37)(10,"div",38),e._uU(11,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(12,"div",39)(13,"div",40)(14,"div",41)(15,"div",42),e._uU(16,"M\xe3 \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(17,"div",43),e._uU(18,"GMBR12312"),e.qZA()(),e.TgZ(19,"div",41)(20,"div",42),e._uU(21,"T\u1ed5ng ti\u1ec1n(bao g\u1ed3m VAT)"),e.qZA(),e.TgZ(22,"div",43),e._uU(23,"GMBR12312"),e.qZA()(),e.TgZ(24,"div",41)(25,"div",42),e._uU(26,"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(27,"div",43),e._uU(28,"Ch\u01b0a thanh to\xe1n"),e.qZA()()(),e.TgZ(29,"div",44)(30,"div"),e._uU(31,"1. Qu\xfd kh\xe1ch vui l\xf2ng ti\u1ebfn h\xe0nh thanh to\xe1n, \u0111\u01a1n h\xe0ng s\u1ebd h\u1ebft h\u1ea1n n\u1ebfu kh\xf4ng thanh to\xe1n tr\u01b0\u1edbc th\u1eddi gian "),e.qZA(),e.TgZ(32,"div"),e._uU(33,"2. Vui l\xf2ng ki\u1ec3m tra email abc@gmail.com \u0111\u1ec3 bi\u1ebft chi ti\u1ebft \u0111\u01a1n h\xe0ng v\xe0 h\u01b0\u1edbng d\u1eabn thanh to\xe1n"),e.qZA(),e.TgZ(34,"div"),e._uU(35,"3. Li\xean h\u1ec7 xxx \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 khi c\u1ea7n thi\u1ebft"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"4. Ki\u1ec3m tra t\xecnh tr\u1ea1ng \u0111\u01a1n h\xe0ng t\u1ea1i xxx"),e.qZA()()()(),e.TgZ(38,"div",37)(39,"div",38),e._uU(40,"Th\xf4ng b\xe1o"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"\u0110\u01a1n h\xe0ng ch\u01b0a \u0111\u01b0\u1ee3c thanh to\xe1n"),e.qZA()()(),e.TgZ(43,"div",45),e._UZ(44,"div",46),e.qZA()())}let Ya=(()=>{class n{constructor(t){this._fb=t,this.isLoading=!1,this.distributionChannelOptions=[],this.stateMode="has_value"}ngOnInit(){this.initFormGroup(),this.initListOptions()}initFormGroup(){this.searchForm=this._fb.group({channel:[""],searchText:[""]})}initListOptions(){this.distributionChannelOptions=[{value:"",text:"T\u1ef1 \u0111\u1ed9ng"},{value:k.h.B2B_GMBR,text:"Flychills"},{value:k.h.B2C_GMBR,text:"GMBR"}]}onSearch(){}onChannelChange(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["retail-order"]],standalone:!0,features:[e.jDz],decls:17,vars:10,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng",3,"formControl"],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[4,"ngIf"],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"w-[764px]","flex","flex-col","gap-y-4"],[1,"flex","justify-between","items-center"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],["cf-button","","size","medium"],[1,"bg-neutral-white","p-4","flex","flex-col","gap-y-4","rounded"],[1,"text-heading-xs"],[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],[1,"w-[200px]","text-body-md-short"],[1,"text-express-md"],[1,"px-3","py-1.5","bg-functional-1-1","rounded","text-body-md-short"],[1,"mt-[56px]","w-[302px]","rounded","h-fit","md:hidden","sticky","top-0"],[1,"bg-neutral-white","h-[500px]","rounded"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-select",4),e.NdJ("selectedChange",function(r){return i.onChannelChange(r)}),e.qZA(),e.TgZ(6,"cf-input-group",5),e._UZ(7,"cf-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return i.onSearch()}),e._UZ(10,"cf-icon",9),e._uU(11," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(12,"div",10),e.YNc(13,Na,6,0,"div",11),e.YNc(14,Ba,13,0,"div",12),e.YNc(15,Qa,9,3,"div",12),e.YNc(16,La,45,0,"div",13),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("formControl",i.searchForm.controls.channel)("data",i.distributionChannelOptions)("allowSearch",!1),e.xp6(1),e.Q6J("status",i.searchForm.controls.searchText.invalid&&(i.searchForm.controls.searchText.dirty||i.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",i.searchForm.controls.searchText),e.xp6(1),e.Q6J("disabled",i.isLoading),e.xp6(4),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&"search_default"===i.stateMode),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&("not_found"===i.stateMode||"cancelled"===i.stateMode||"issued"===i.stateMode)),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&"has_value"===i.stateMode))},dependencies:[p.ez,p.O5,x.j$,x.ND,x.BN,_.AxE,_.Sm8,I.q,s.u5,s.Fj,s.JJ,s.UX,s.oH,h.N8,h.Xq,B.IA],encapsulation:2}),n})()},80429:(ye,Y,m)=>{m.d(Y,{q:()=>s});var p=m(94650);let s=(()=>{class h{transform(_,x,...ue){return x(_,...ue)}}return h.\u0275fac=function(_){return new(_||h)},h.\u0275pipe=p.Yjl({name:"mapper",type:h,pure:!0,standalone:!0}),h})()}}]);